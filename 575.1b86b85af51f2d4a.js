(self.webpackChunkspear=self.webpackChunkspear||[]).push([[575],{4575:(it,K,u)=>{u.r(K);var e=u(4497),n=u(7451),y=u(3192),x=u(6152),$=u(9906),c=u(2508),d=u(8163),p=u(6124),z=u(3271),S=u(3599),V=u(7478),N=u(464),U=u(2578);const H=new n.InjectionToken("REQUEST");new n.InjectionToken("RESPONSE");var Z=u(2341),ue=u(9337),G=u(2673),X=u(9295),ee=u(3853),ve=u(3336);class Oe{constructor(h){h&&(this.authority=h.authority,this.client_id=h.client_id,this.redirect_uri=h.redirect_uri,this.silent_redirect_uri=h.silent_redirect_uri,this.response_type=h.response_type,this.scope=h.scope,this.filterProtocolClaims=h.filterProtocolClaims,this.loadUserInfo=h.loadUserInfo,this.automaticSilentRenew=h.automaticSilentRenew,this.metadata={...h.metadata},this.userStore=h.userStore?h.userStore:void 0,this.stateStore=h.userStore?h.stateStore:void 0)}}const Le=(0,e.Cb)("auth");let be=(()=>{class v{constructor(o,w,q){this.clientSettings=o,this.platformId=w,this.transferState=q,this.data={},this.isBrowser=(0,y.isPlatformBrowser)(this.platformId),this.cookieMap={oa:"access_token",oi:"id_token",or:"refresh_token",os:"scope",oe:"expires_at",op:"profile"},this.tokenKey=`oidc.user:${this.clientSettings.authority}:${this.clientSettings.client_id}`}set request(o){this.req=o}init(){if(this.isBrowser)if(sessionStorage.getItem(this.tokenKey))this.setItem(this.tokenKey,sessionStorage.getItem(this.tokenKey));else if(this.transferState.hasKey(Le)){const o=this.transferState.get(Le,void 0);o&&this.setItem(this.tokenKey,o)}else for(let o=0;o<sessionStorage.length;o++){const w=sessionStorage.key(o);this.setItem(w,sessionStorage.getItem(w))}else{const o={token_type:"Bearer"};let w;Object.getOwnPropertyNames(this.cookieMap).forEach(q=>{let re=this.getCookie(q);re&&""!==re&&(re=this.translateFromCookieValue(q,re),"oe"===q?w=re:o[this.cookieMap[q]]=re)}),o.access_token&&(this.data[this.tokenKey]=JSON.stringify(o),this.transferState.set(Le,JSON.stringify({...o,expires_at:w})))}}getItem(o){return this.data[o]}setItem(o,w){if(o===this.tokenKey){const q=JSON.parse(w);Object.getOwnPropertyNames(this.cookieMap).forEach(re=>{this.setCookie(re,this.translateCookieValue(re,q[this.cookieMap[re]]))})}this.isBrowser&&sessionStorage.setItem(o,w),this.data[o]=w}removeItem(o){this.removeCookie(o),this.isBrowser&&sessionStorage.removeItem(o),delete this.data[o]}get length(){return Object.getOwnPropertyNames(this.data).length}key(o){return console.log("index()"),Object.getOwnPropertyNames(this.data)[o]}getCookie(o){return this.isBrowser?V.get(o):this.req?this.req.cookies[o]??"":void 0}setCookie(o,w){this.isBrowser&&V.set(o,w)}removeCookie(o){this.isBrowser&&V.remove(o)}translateCookieValue(o,w){switch(o){case"os":return w.split(" ").join("|");case"oe":return`${w}`;case"op":return JSON.stringify(w);default:return w}}translateFromCookieValue(o,w){switch(o){case"os":return w.split("|").join(" ");case"oe":return(0,N.He)(w);case"op":return JSON.parse(w);default:return w}}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275inject(Oe),n.\u0275\u0275inject(Object),n.\u0275\u0275inject(e.ki))},v.\u0275prov=n.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac}),v})();const m=(v,h)=>new U.UserManager(new Oe({...v,stateStore:new U.WebStorageStateStore({store:h}),userStore:new U.WebStorageStateStore({store:h})})),P=(v,h,o)=>()=>new Promise(w=>{v.getUser().then(q=>{q?(h.setUser(q),setTimeout(()=>w())):w()})}),b=(v,h,o,w)=>{const q=new be(v,h,w);if((0,y.isPlatformServer)(h))try{q.request=o.get(H)}catch{}return q.init(),q};let _=(()=>{class v{constructor(o,w,q){this.actions$=o,this.userManager=w,this.entityActionFactory=q,this.login$=(0,S.GW)(()=>this.actions$.pipe((0,S.l4)(z.uQ.AuthActionTypes.Login),(0,ue.b)(()=>{this.userManager.signinRedirect()})),{dispatch:!1}),this.logout$=(0,S.GW)(()=>this.actions$.pipe((0,S.l4)(z.uQ.AuthActionTypes.Logout),(0,ue.b)(()=>{this.userManager.signoutRedirect()})),{dispatch:!1}),this.completeAuthentication$=(0,S.GW)(()=>this.actions$.pipe((0,S.l4)(z.uQ.AuthActionTypes.CompleteAuthentication),(0,G.w)(()=>new ve.y(re=>{this.userManager.signinRedirectCallback().then(Ve=>{re.next(new z.uQ.SetUser(Ve)),re.complete()})})))),this.loadCookies$=(0,S.GW)(()=>this.actions$.pipe((0,Z.Qo)("Cookie"),(0,Z.TR)([Z.WD.QUERY_ALL_SUCCESS]),(0,ue.b)(re=>console.log(re.payload.data)),(0,ue.b)(re=>{})),{dispatch:!1})}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275inject(S.eX),n.\u0275\u0275inject(U.UserManager),n.\u0275\u0275inject(Z.xb))},v.\u0275prov=n.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac}),v})();const R={Cookie:{entityName:"Cookie"}},E=new n.InjectionToken("ClientSettings");let ne=(()=>{class v{constructor(o){o.registerMetadataMap(R)}static forRoot(){return{ngModule:v,providers:[{provide:be,useFactory:b,deps:[E,n.PLATFORM_ID,n.Injector,e.ki]},{provide:U.UserManager,useFactory:m,deps:[E,be]},{provide:n.APP_INITIALIZER,useFactory:P,multi:!0,deps:[U.UserManager,z.jE,n.PLATFORM_ID]}]}}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275inject(Z.f0))},v.\u0275mod=n.\u0275\u0275defineNgModule({type:v}),v.\u0275inj=n.\u0275\u0275defineInjector({imports:[[z.ny,S.sQ.forFeature([_])]]}),v})(),me=(()=>{class v{constructor(o){this.authFacade=o}intercept(o,w){return this.authFacade.token$.pipe((0,X.q)(1),(0,ee.b)(q=>{let re=o.headers;if(o.url.indexOf("/awproxy"),q&&-1===o.url.indexOf("cloudfront")&&-1===o.url.indexOf("cloudinary")&&-1===o.url.indexOf("carquery")&&-1===o.url.indexOf("gateway.marvel.com")&&-1===o.url.indexOf("hereapi.com")&&-1===o.url.indexOf(".es.")&&-1===o.url.indexOf(".s3.")&&-1===o.url.indexOf("/awproxy")){re=re.set("Authorization",q);const Ve=o.clone({headers:re});return w.handle(Ve)}{const Ve=o.clone({headers:re});return w.handle(Ve)}}))}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275inject(z.jE))},v.\u0275prov=n.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac}),v})();var Ee=u(2579),se=u(2063),ze=u(1276),Ge=u(8698),xe=u(8448),qe=u(2062),Xe=u(8433),lt=u(6853),He=u(745),Ye=u(1640),ht=u(4744),Se=u(635);const pe=[];let Fe=(()=>{class v{}return v.\u0275fac=function(o){return new(o||v)},v.\u0275mod=n.\u0275\u0275defineNgModule({type:v}),v.\u0275inj=n.\u0275\u0275defineInjector({providers:[],imports:[[se.UtilsModule,Xe.RouterModule.forChild(pe)]]}),v})();class Je extends lt.Plugin{constructor(h){super(h),h&&(this.loadingStrategy=h.loadingStrategy,this.matchingStrategy=h.matchingStrategy,this.redirectHandler=h.redirectHandler)}}let we=(()=>{class v extends lt.BasePluginManager{constructor(o,w){super(o,w)}pluginDef(){return(0,He.of)(new lt.PluginDef({name:"alias"}))}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275inject(lt.PluginConfigurationManager),n.\u0275\u0275inject(se.ModuleLoaderService))},v.\u0275prov=n.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac,providedIn:"root"}),v})(),De=(()=>{class v{constructor(o,w,q,re){this.siteName=o,this.router=w,this.apm=q,this.routesLoaded=!1}canActivate(o,w){return console.log("catch all alias hit"),new Promise(q=>{this.apm.getPlugins().pipe((0,G.w)(re=>(0,Ye.D)(this.routesLoaded?[]:Array.from(re).map(([Ve,mt])=>mt.loadingStrategy.load())).pipe((0,ht.d)(void 0))),(0,ue.b)(()=>this.routesLoaded=!0),(0,G.w)(()=>this.apm.getPlugins()),(0,G.w)(re=>(0,Ye.D)(Array.from(re).map(([Ve,mt])=>mt.matchingStrategy.match(w).pipe((0,Se.U)(Qt=>[mt,Qt])))))).subscribe(re=>{if(console.log("routes loaded: "+(this.routesLoaded?"y":"n")),void 0!==re.map(([mt,Qt],It)=>Qt?mt:void 0).find(mt=>void 0!==mt)){console.log(`alias gaurd state: ${w.url}`);const mt=this.router.parseUrl(w.url);q(mt)}else q(!0)})})}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275inject(se.SITE_NAME),n.\u0275\u0275inject(Xe.Router),n.\u0275\u0275inject(we),n.\u0275\u0275inject(Z.jn))},v.\u0275prov=n.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac}),v})();var ut=u(3158),le=u(2570);class C extends Je{}class g{constructor(h,o,w){this.siteName=h,this.es=o,this.router=w,this.routesLoaded=!1}get panelPageListItemsService(){return this.es.getEntityCollectionService("PanelPageListItem")}isLoaded(){return this.routesLoaded}load(){return this.panelPageListItemsService.getWithQuery(`site=${encodeURIComponent(`{"term":{"site.keyword":{"value":"${this.siteName}"}}}`)}&path=${encodeURIComponent('{"wildcard":{"path.keyword":{"value":"*"}}}')}`).pipe((0,Se.U)(h=>h.filter(o=>void 0!==o.path&&""!==o.path)),(0,Se.U)(h=>h.map(o=>new le.Z8(o)).sort((o,w)=>o.path.split("/").length===w.path.split("/").length?o.path.split("/")[o.path.split("/").length-1]>w.path.split("/")[w.path.split("/").length-1]?-1:1:o.path.split("/").length>w.path.split("/").length?-1:1)),(0,ue.b)(h=>h.sort((o,w)=>o.path.length>w.path.length?1:-1)),(0,ue.b)(h=>{const o=h.map(w=>w.path);this.router.config.unshift({matcher:this.createPageMatcher(o),loadChildren:()=>Promise.resolve().then(u.bind(u,811)).then(w=>w.PagesModule)}),this.routesLoaded=!0}),(0,ue.b)(()=>console.log("panels routes loaded")),(0,Se.U)(()=>!0))}createPageMatcher(h){return o=>{for(let w=0;w<h.length;w++)if(0===("/"+o.map(q=>q.path).join("/")).indexOf(h[w]))return{consumed:[],posParams:{}};return o.length>0&&"pages"===o[0].path?(console.log("matched page!"),{consumed:o.slice(0,1),posParams:{}}):null}}}class B{constructor(h,o,w){this.siteName=h,this.es=o,this.router=w}get panelPageListItemsService(){return this.es.getEntityCollectionService("PanelPageListItem")}match(h){let o=h.url;-1!==o.indexOf("?")&&(o=h.url.substr(0,o.indexOf("?")));const w="path="+o.substr(1).split("/").reduce((q,re,Ve)=>[...q,0===Ve?`/${re}`:`${q[Ve-1]}/${re}`],[]).map(q=>this.encodePathComponent(q)).join("&path=")+`&site=${encodeURIComponent(`{"term":{"site.keyword":{"value":"${this.siteName}"}}}`)}`;return this.panelPageListItemsService.getWithQuery(w).pipe((0,ut.K)(q=>(0,He.of)([])),(0,Se.U)(q=>q.reduce((re,Ve)=>void 0===re||re.path.split("/").length<Ve.path.split("/").length?Ve:re,void 0)),(0,Se.U)(q=>!!q||h.url.indexOf("pages")>-1))}encodePathComponent(h){return`{"term":{"path.keyword":{"value":"${h}"}}}`}}class de{constructor(h,o,w){this.siteName=h,this.es=o,this.router=w}get panelPageListItemsService(){return this.es.getEntityCollectionService("PanelPageListItem")}redirect(h,o){if(o.url.indexOf("pages")>-1)console.log(`redirect: ${o.url}`),this.router.navigateByUrl(o.url);else{let w=o.url;-1!==w.indexOf("?")&&(w=o.url.substr(0,w.indexOf("?")));const q="path="+w.substr(1).split("/").reduce((re,Ve,mt)=>[...re,0===mt?`/${Ve}`:`${re[mt-1]}/${Ve}`],[]).map(re=>this.encodePathComponent(re)).join("&path=")+`&site=${encodeURIComponent(`{"term":{"site.keyword":{"value":"${this.siteName}"}}}`)}`;this.panelPageListItemsService.getWithQuery(q).pipe((0,Se.U)(re=>re.reduce((Ve,mt)=>void 0===Ve||Ve.path.split("/").length<mt.path.split("/").length?mt:Ve,void 0)),(0,Se.U)(re=>{const Ve=o.url.substr(1).split("/").slice(re.path.split("/").length-1).join("/");return[re,Ve]})).subscribe(([re,Ve])=>{this.router.navigate(["reload"])})}}encodePathComponent(h){return`{"term":{"path.keyword":{"value":"${h}"}}}`}}let Me=(()=>{class v{constructor(o,w,q,re){o.register(((v,h,o)=>{const w=new g(v,h,o),q=new B(v,h,o),re=new de(v,h,o);return new C({id:"panels",title:"Panels",loadingStrategy:w,matchingStrategy:q,redirectHandler:re})})(q,re,w))}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275inject(we),n.\u0275\u0275inject(Xe.Router),n.\u0275\u0275inject(se.SITE_NAME),n.\u0275\u0275inject(Z.jn))},v.\u0275mod=n.\u0275\u0275defineNgModule({type:v}),v.\u0275inj=n.\u0275\u0275defineInjector({imports:[[y.CommonModule]]}),v})();function qt(v,h){var o={};for(var w in v)Object.prototype.hasOwnProperty.call(v,w)&&h.indexOf(w)<0&&(o[w]=v[w]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var q=0;for(w=Object.getOwnPropertySymbols(v);q<w.length;q++)h.indexOf(w[q])<0&&Object.prototype.propertyIsEnumerable.call(v,w[q])&&(o[w[q]]=v[w[q]])}return o}var Cn=u(8977),xn=u(1989),Qn=u(116),dr=u(4874),ur=u(4437),Xn=u(253),ir=u(6646);const mr=["content"];function hr(v,h){if(1&v&&n.\u0275\u0275element(0,"formly-field",2),2&v){const o=h.$implicit;n.\u0275\u0275property("form",o.form)("options",o.options)("model",o.model)("field",o)}}const Or=["*"],fr=["container"];function Hr(v,h){}const xr=["fieldComponent"];function Dn(v,h){1&v&&n.\u0275\u0275element(0,"formly-field",1),2&v&&n.\u0275\u0275property("field",h.$implicit)}function Er(v,h,o){if(h.id)return h.id;let w=h.type;return!w&&h.template&&(w="template"),Kn(w)&&(w=w.prototype.constructor.name),[v,w,h.key,o].join("_")}function wr(v){if(!v.key)return[];if(!v._keyPath||v._keyPath.key!==v.key){let h=[];if("string"==typeof v.key){const o=-1===v.key.indexOf("[")?v.key:v.key.replace(/\[(\w+)\]/g,".$1");h=-1!==o.indexOf(".")?o.split("."):[o]}else h=Array.isArray(v.key)?v.key.slice(0):[`${v.key}`];v._keyPath={key:v.key,path:h}}return v._keyPath.path.slice(0)}const Zn=["required","pattern","minLength","maxLength","min","max"];function Nr(v,h){let o=wr(v);if(0===o.length)return;let w=v;for(;w.parent;)w=w.parent,o=[...wr(w),...o];if(void 0===h&&v.resetOnHide){const q=o.pop();delete o.reduce((Ve,mt)=>Ve[mt]||{},w.model)[q]}else!function kr(v,h,o){for(let w=0;w<h.length-1;w++){const q=h[w];(!v[q]||!$r(v[q]))&&(v[q]=/^\d+$/.test(h[w+1])?[]:{}),v=v[q]}v[h[h.length-1]]=M(o)}(w.model,o,h)}function Rt(v){let h=v.parent.model;for(const o of wr(v)){if(!h)return h;h=h[o]}return h}function wn(v,...h){return h.forEach(o=>{for(let w in o)an(v[w])||$n(v[w])?v[w]=M(o[w]):mi(v[w],o[w])&&wn(v[w],o[w])}),v}function an(v){return null==v}function On(v){return void 0===v}function $n(v){return""===v}function Kn(v){return"function"==typeof v}function mi(v,h){return $r(v)&&$r(h)&&Object.getPrototypeOf(v)===Object.getPrototypeOf(h)&&!(Array.isArray(v)||Array.isArray(h))}function $r(v){return null!=v&&"object"==typeof v}function M(v){if(!$r(v)||(0,ur.b)(v)||v instanceof n.TemplateRef||v.changingThisBreaksApplicationSecurity||-1!==["RegExp","FileList","File","Blob"].indexOf(v.constructor.name))return v;if(v instanceof Set)return new Set(v);if(v instanceof Map)return new Map(v);if(v._isAMomentObject&&Kn(v.clone))return v.clone();if(v instanceof c.TO)return null;if(v instanceof Date)return new Date(v.getTime());if(Array.isArray(v))return v.slice(0).map(w=>M(w));const h=Object.getPrototypeOf(v);let o=Object.create(h);return o=Object.setPrototypeOf(o,h),Object.keys(v).reduce((w,q)=>{const re=Object.getOwnPropertyDescriptor(v,q);return re.get?Object.defineProperty(w,q,re):w[q]=M(v[q]),w},o)}function Y(v,h,o){Object.defineProperty(v,h,{enumerable:!1,writable:!0,configurable:!0}),v[h]=o}function J(v,h,o){v._observers||Y(v,"_observers",{}),v._observers[h]||(v._observers[h]=[]);let w=v._observers[h];return-1===w.indexOf(o)&&(w.push(o),o({currentValue:v[h],firstChange:!0}),1===w.length&&(Y(v,`___$${h}`,v[h]),Object.defineProperty(v,h,{configurable:!0,get:()=>v[`___$${h}`],set:q=>{if(q!==v[`___$${h}`]){const re=v[`___$${h}`];v[`___$${h}`]=q,w.forEach(Ve=>Ve({previousValue:re,currentValue:q,firstChange:!1}))}}}))),()=>w.splice(w.indexOf(o),1)}const ge=new n.InjectionToken("FORMLY_CONFIG");class Ce{constructor(){this.types={},this.validators={},this.wrappers={},this.messages={},this.templateManipulators={preWrapper:[],postWrapper:[]},this.extras={checkExpressionOn:"changeDetectionCheck",lazyRender:!1,showError:function(h){return h.formControl&&h.formControl.invalid&&(h.formControl.touched||h.options.parentForm&&h.options.parentForm.submitted||!(!h.field.validation||!h.field.validation.show))}},this.extensions={}}addConfig(h){h.types&&h.types.forEach(o=>this.setType(o)),h.validators&&h.validators.forEach(o=>this.setValidator(o)),h.wrappers&&h.wrappers.forEach(o=>this.setWrapper(o)),h.manipulators&&(console.warn("NgxFormly: passing 'manipulators' config is deprecated, use custom extension instead."),h.manipulators.forEach(o=>this.setManipulator(o))),h.validationMessages&&h.validationMessages.forEach(o=>this.addValidatorMessage(o.name,o.message)),h.extensions&&h.extensions.forEach(o=>this.extensions[o.name]=o.extension),h.extras&&(this.extras=Object.assign({},this.extras,h.extras))}setType(h){Array.isArray(h)?h.forEach(o=>this.setType(o)):(this.types[h.name]||(this.types[h.name]={name:h.name}),["component","extends","defaultOptions","wrappers"].forEach(o=>{h.hasOwnProperty(o)&&(this.types[h.name][o]=h[o])}))}getType(h){if(!this.types[h])throw new Error(`[Formly Error] The type "${h}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.mergeExtendedType(h),this.types[h]}getMergedField(h={}){const o=this.getType(h.type);o.defaultOptions&&wn(h,o.defaultOptions);const w=o.extends&&this.getType(o.extends).defaultOptions;w&&wn(h,w),h&&h.optionsTypes&&h.optionsTypes.forEach(re=>{const Ve=this.getType(re).defaultOptions;Ve&&wn(h,Ve)});const q=this.resolveFieldTypeRef(h);q&&q.instance&&q.instance.defaultOptions&&wn(h,q.instance.defaultOptions),!h.wrappers&&o.wrappers&&(h.wrappers=[...o.wrappers])}resolveFieldTypeRef(h={}){if(!h.type)return null;const o=this.getType(h.type);if(!o.component||o._componentRef)return o._componentRef;const{_resolver:w,_injector:q}=h.parent.options,re=w.resolveComponentFactory(o.component).create(q);return Y(o,"_componentRef",re),re.destroy(),o._componentRef}setWrapper(h){this.wrappers[h.name]=h,h.types&&h.types.forEach(o=>{this.setTypeWrapper(o,h.name)})}getWrapper(h){if(!this.wrappers[h])throw new Error(`[Formly Error] The wrapper "${h}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.wrappers[h]}setTypeWrapper(h,o){this.types[h]||(this.types[h]={}),this.types[h].wrappers||(this.types[h].wrappers=[]),-1===this.types[h].wrappers.indexOf(o)&&this.types[h].wrappers.push(o)}setValidator(h){this.validators[h.name]=h}getValidator(h){if(!this.validators[h])throw new Error(`[Formly Error] The validator "${h}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.validators[h]}addValidatorMessage(h,o){this.messages[h]=o}getValidatorMessage(h){return this.messages[h]}setManipulator(h){(new h.class)[h.method](this)}mergeExtendedType(h){if(!this.types[h].extends)return;const o=this.getType(this.types[h].extends);this.types[h].component||(this.types[h].component=o.component),this.types[h].wrappers||(this.types[h].wrappers=o.wrappers)}}Ce.\u0275fac=function(h){return new(h||Ce)},Ce.\u0275prov=n.\u0275\u0275defineInjectable({token:Ce,factory:Ce.\u0275fac,providedIn:"root"}),Ce.ngInjectableDef=(0,n.defineInjectable)({factory:function(){return new Ce},token:Ce,providedIn:"root"});class We{constructor(h,o,w){this.formlyConfig=h,this.componentFactoryResolver=o,this.injector=w}buildForm(h,o=[],w,q){if(!this.formlyConfig.extensions.core)throw new Error("NgxFormly: missing `forRoot()` call. use `forRoot()` when registering the `FormlyModule`.");const re={fieldGroup:o,model:w,formControl:h,options:this._setOptions(q)};(function pr(v,h){const o=v._updateTreeValidity.bind(v);v._updateTreeValidity=()=>{},h(),v._updateTreeValidity=o})(h,()=>this._buildForm(re)),re.options._checkField(re,!0)}_buildForm(h){this.getExtensions().forEach(o=>o.prePopulate&&o.prePopulate(h)),this.getExtensions().forEach(o=>o.onPopulate&&o.onPopulate(h)),h.fieldGroup&&h.fieldGroup.forEach(o=>this._buildForm(o)),this.getExtensions().forEach(o=>o.postPopulate&&o.postPopulate(h))}getExtensions(){return Object.keys(this.formlyConfig.extensions).map(h=>this.formlyConfig.extensions[h])}_setOptions(h){return(h=h||{}).formState=h.formState||{},h.showError||(h.showError=this.formlyConfig.extras.showError),h.fieldChanges||Y(h,"fieldChanges",new Xn.x),h._resolver||Y(h,"_resolver",this.componentFactoryResolver),h._injector||Y(h,"_injector",this.injector),h._hiddenFieldsForCheck||(h._hiddenFieldsForCheck=[]),h._markForCheck||(h._markForCheck=o=>{o._componentRefs&&o._componentRefs.forEach(w=>{w.injector.get(n.ChangeDetectorRef).markForCheck()}),o.fieldGroup&&o.fieldGroup.forEach(w=>h._markForCheck(w))}),h._buildField||(h._buildField=o=>(this.buildForm(o.form,o.fieldGroup,o.model,o.options),o)),h}}function pt(v,h=!1){const o=v.formControl,w=o._fields?o._fields.indexOf(v):-1;-1!==w&&o._fields.splice(w,1);const q=o.parent;if(!q)return;const re={emitEvent:h};if(q instanceof c.Oe){const Ve=q.controls.findIndex(mt=>mt===o);-1!==Ve&&Nt(q,re,()=>q.removeAt(Ve))}else if(q instanceof c.cw){const Ve=wr(v),mt=Ve[Ve.length-1];q.get([mt])===o&&Nt(q,re,()=>q.removeControl(mt))}o.setParent(null)}function dt(v){if(v.formControl)return v.formControl;if(!1===v.shareFormControl)return null;const h=v.parent.formControl;return h?h.get(wr(v)):null}function xt(v,h,o=!1){(h=h||v.formControl)._fields||Y(h,"_fields",[]),-1===h._fields.indexOf(v)&&h._fields.push(v),!v.formControl&&h&&(Y(v,"formControl",h),h.setValidators(null),h.setAsyncValidators(null),v.templateOptions.disabled=!!v.templateOptions.disabled,J(v.templateOptions,"disabled",({firstChange:mt,currentValue:Qt})=>{mt||(Qt?v.formControl.disable():v.formControl.enable())}),h.registerOnDisabledChange&&h.registerOnDisabledChange(mt=>{v.templateOptions.___$disabled=mt,v.options&&v.options._markForCheck(v)}));let w=v.parent.formControl;if(!w||!v.key)return;const q=wr(v),re=Rt(v);(!an(h.value)||!an(re))&&h.value!==re&&h instanceof c.NI&&h.patchValue(re);for(let mt=0;mt<q.length-1;mt++){const Qt=q[mt];w.get([Qt])||Nt(w,{emitEvent:o},()=>w.setControl(Qt,new c.cw({}))),w=w.get([Qt])}const Ve=q[q.length-1];!v._hide&&w.get([Ve])!==h&&Nt(w,{emitEvent:o},()=>w.setControl(Ve,h))}function Mt(v,h=!1){const o=v.status,w=v.value;v.updateValueAndValidity({emitEvent:!1,onlySelf:h}),o!==v.status&&v.statusChanges.emit(v.status),w!==v.value&&v.valueChanges.emit(v.value)}function Nt(v,h,o){v instanceof c.cw&&!v.__patchForEachChild&&(Y(v,"__patchForEachChild",!0),v._forEachChild=q=>{Object.keys(v.controls).forEach(re=>v.controls[re]&&q(v.controls[re],re))});const w=v.updateValueAndValidity.bind(v);!1===h.emitEvent&&(v.updateValueAndValidity=q=>{w(Object.assign({},q||{},{emitEvent:!1}))}),o(),!1===h.emitEvent&&(v.updateValueAndValidity=w)}function $t(v){v._fields&&delete v._fields,v.setValidators(null),v.setAsyncValidators(null),(v instanceof c.cw||v instanceof c.Oe)&&Object.keys(v.controls).forEach(h=>$t(v.controls[h]))}We.\u0275fac=function(h){return new(h||We)(n.\u0275\u0275inject(Ce),n.\u0275\u0275inject(n.ComponentFactoryResolver),n.\u0275\u0275inject(n.Injector))},We.\u0275prov=n.\u0275\u0275defineInjectable({token:We,factory:We.\u0275fac,providedIn:"root"}),We.ngInjectableDef=(0,n.defineInjectable)({factory:function(){return new We((0,n.inject)(Ce),(0,n.inject)(n.ComponentFactoryResolver),(0,n.inject)(n.INJECTOR))},token:We,providedIn:"root"});let St=(()=>{class v{constructor(o,w,q,re,Ve){this.formlyBuilder=o,this.formlyConfig=w,this.ngZone=q,this.parentFormGroup=Ve,this.modelChange=new n.EventEmitter,this.immutable=!1,this._modelChangeValue={},this.modelChangeSubs=[],this.modelChange$=new Xn.x,this.modelChangeSub=this.modelChange$.pipe((0,G.w)(()=>this.ngZone.onStable.asObservable().pipe((0,X.q)(1)))).subscribe(()=>this.ngZone.runGuarded(()=>{this.checkExpressionChange(),this.modelChange.emit(this._modelChangeValue=M(this.model))})),null!==re&&console.warn("NgxFormly: passing 'immutable' attribute to 'formly-form' component is deprecated since v5.5, enable immutable mode through NgModule declaration instead."),this.immutable=null!==re||!!w.extras.immutable}set model(o){this._model=this.immutable?M(o):o}get model(){return this._model||(this._model={}),this._model}set fields(o){this._fields=this.immutable?M(o):o}get fields(){return this._fields||[]}set options(o){this._options=this.immutable?M(o):o}get options(){return this._options}set content(o){if(o){let w=!1,q=o.nativeElement.nextSibling;for(;q&&!w;)(q.nodeType===Node.ELEMENT_NODE||q.nodeType===Node.TEXT_NODE&&q.textContent&&""!==q.textContent.trim())&&(w=!0),q=q.nextSibling;w&&console.warn("NgxFormly: content projection for 'formly-form' component is deprecated since v5.5, you should avoid passing content inside the 'formly-form' tag.")}}ngDoCheck(){"changeDetectionCheck"===this.formlyConfig.extras.checkExpressionOn&&this.checkExpressionChange()}ngOnChanges(o){o.model&&this.field&&(this.field.model=this.model),o.fields&&this.form&&$t(this.form),(o.fields||o.form||o.model&&this._modelChangeValue!==o.model.currentValue)&&(this.form=this.form||new c.cw({}),this.setOptions(),this.options.updateInitialValue(),this.clearModelSubscriptions(),this.formlyBuilder.buildForm(this.form,this.fields,this.model,this.options),this.trackModelChanges(this.fields))}ngOnDestroy(){this.modelChangeSub.unsubscribe(),this.clearModelSubscriptions()}changeModel({value:w,field:q}){Nr(q,w),this.modelChange$.next()}setOptions(){this.options||(this.options={}),this.options.resetModel||(this.options.resetModel=o=>{o=M(an(o)?this.options._initialModel:o),this.model&&(Object.keys(this.model).forEach(w=>delete this.model[w]),Object.assign(this.model,o||{})),this.options._buildForm(),this.options.parentForm&&this.options.parentForm.control===this.form?this.options.parentForm.resetForm(this.model):this.form.reset(this.model)}),!this.options.parentForm&&this.parentFormGroup&&(Y(this.options,"parentForm",this.parentFormGroup),J(this.options.parentForm,"submitted",({firstChange:o})=>{o||(this.checkExpressionChange(),this.options._markForCheck({fieldGroup:this.fields,model:this.model,formControl:this.form,options:this.options}))})),this.options.updateInitialValue||(this.options.updateInitialValue=()=>this.options._initialModel=M(this.model)),this.options._buildForm||(this.options._buildForm=(o=!1)=>{this.clearModelSubscriptions(),this.formlyBuilder.buildForm(this.form,this.fields,this.model,this.options),this.trackModelChanges(this.fields),o&&this.modelChange.emit(this._modelChangeValue=M(this.model))})}checkExpressionChange(){this.options&&this.options._checkField&&this.options._checkField({fieldGroup:this.fields,model:this.model,formControl:this.form,options:this.options})}trackModelChanges(o,w=[]){o.forEach(q=>{if(q.key&&!q.fieldGroup&&q.formControl){const re=q.formControl;let Ve=re.valueChanges.pipe((0,Cn.x)((gn,Bn)=>!(gn!==Bn||Array.isArray(gn)||$r(gn))));const{updateOn:mt,debounce:Qt}=q.modelOptions;(!mt||"change"===mt)&&Qt&&Qt.default>0&&(Ve=re.valueChanges.pipe((0,xn.b)(Qt.default))),this.modelChangeSubs.push(Ve.subscribe(gn=>{re instanceof c.NI&&re._fields&&re._fields.length>1&&re.patchValue(gn,{emitEvent:!1,onlySelf:!0}),q.parsers&&q.parsers.length>0&&q.parsers.forEach(Bn=>gn=Bn(gn)),this.changeModel({key:[...w,...wr(q)].join("."),value:gn,field:q})}));const It=re.valueChanges.observers;It&&It.length>1&&It.unshift(It.pop())}q.fieldGroup&&q.fieldGroup.length>0&&this.trackModelChanges(q.fieldGroup,q.key?[...w,...wr(q)]:w)})}clearModelSubscriptions(){this.modelChangeSubs.forEach(o=>o.unsubscribe()),this.modelChangeSubs=[]}get field(){return this.fields&&this.fields[0]&&this.fields[0].parent}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(We),n.\u0275\u0275directiveInject(Ce),n.\u0275\u0275directiveInject(n.NgZone),n.\u0275\u0275injectAttribute("immutable"),n.\u0275\u0275directiveInject(c.sg,8))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["formly-form"]],viewQuery:function(o,w){if(1&o&&n.\u0275\u0275viewQuery(mr,5),2&o){let q;n.\u0275\u0275queryRefresh(q=n.\u0275\u0275loadQuery())&&(w.content=q.first)}},inputs:{model:"model",fields:"fields",options:"options",form:"form"},outputs:{modelChange:"modelChange"},features:[n.\u0275\u0275ProvidersFeature([We]),n.\u0275\u0275NgOnChangesFeature],ngContentSelectors:Or,decls:4,vars:1,consts:[["hide-deprecation","",3,"form","options","model","field",4,"ngFor","ngForOf"],["content",""],["hide-deprecation","",3,"form","options","model","field"]],template:function(o,w){1&o&&(n.\u0275\u0275projectionDef(),n.\u0275\u0275template(0,hr,1,4,"formly-field",0),n.\u0275\u0275elementContainerStart(1,null,1),n.\u0275\u0275projection(3),n.\u0275\u0275elementContainerEnd()),2&o&&n.\u0275\u0275property("ngForOf",w.fields)},directives:function(){return[y.NgForOf,tt]},encapsulation:2}),v})(),tt=(()=>{class v{constructor(o,w,q,re,Ve){this.formlyConfig=o,this.renderer=w,this.resolver=q,this.elementRef=re,this.warnDeprecation=!1,this.modelChange=new n.EventEmitter,this.hostObservers=[],this.componentRefs=[],this.hooksObservers=[],this.detectFieldBuild=!1,this.warnDeprecation=null===Ve}set model(o){this.warnDeprecation&&console.warn(`NgxFormly: passing 'model' input to '${this.constructor.name}' component is not required anymore, you may remove it!`)}set form(o){this.warnDeprecation&&console.warn(`NgxFormly: passing 'form' input to '${this.constructor.name}' component is not required anymore, you may remove it!`)}set options(o){this.warnDeprecation&&console.warn(`NgxFormly: passing 'options' input to '${this.constructor.name}' component is not required anymore, you may remove it!`)}ngAfterContentInit(){this.triggerHook("afterContentInit")}ngAfterContentChecked(){this.triggerHook("afterContentChecked")}ngAfterViewInit(){this.triggerHook("afterViewInit")}ngAfterViewChecked(){this.triggerHook("afterViewChecked")}ngDoCheck(){this.triggerHook("doCheck"),this.detectFieldBuild&&this.field&&this.field.options&&this.render()}ngOnInit(){this.triggerHook("onInit")}ngOnChanges(o){this.triggerHook("onChanges",o)}ngOnDestroy(){this.resetRefs(this.field),this.hostObservers.forEach(o=>o()),this.hooksObservers.forEach(o=>o()),this.triggerHook("onDestroy")}renderField(o,w,q=[]){if(this.containerRef===o&&(this.resetRefs(this.field),this.containerRef.clear(),q=this.field?this.field.wrappers:[]),q&&q.length>0){const[re,...Ve]=q,{component:mt}=this.formlyConfig.getWrapper(re),Qt=o.createComponent(this.resolver.resolveComponentFactory(mt));this.attachComponentRef(Qt,w),J(Qt.instance,"fieldComponent",({firstChange:It,previousValue:gn,currentValue:Bn})=>{if(Bn){if(gn&&gn._lContainer===Bn._lContainer)return;const Hn=gn?gn.detach():null;Hn&&!Hn.destroyed?Bn.insert(Hn):this.renderField(Bn,w,Ve),!It&&Qt.changeDetectorRef.detectChanges()}})}else if(w&&w.type){const{component:re}=this.formlyConfig.getType(w.type),Ve=o.createComponent(this.resolver.resolveComponentFactory(re));this.attachComponentRef(Ve,w)}}triggerHook(o,w){if(this.field&&this.field.hooks&&this.field.hooks[o]&&(!w||w.field)){const q=this.field.hooks[o](this.field);if((0,ur.b)(q)&&-1!==["onInit","afterContentInit","afterViewInit"].indexOf(o)){const re=q.subscribe();this.hooksObservers.push(()=>re.unsubscribe())}}this.field&&this.field.lifecycle&&this.field.lifecycle[o]&&this.field.lifecycle[o](this.field.form,this.field,this.field.model,this.field.options),"onChanges"===o&&w.field&&(this.resetRefs(w.field.previousValue),this.render())}attachComponentRef(o,w){this.componentRefs.push(o),w._componentRefs.push(o),Object.assign(o.instance,{field:w})}render(){if(this.field){if(!this.field.options)return void(this.detectFieldBuild=!0);this.detectFieldBuild=!1,this.hostObservers.forEach(o=>o()),this.hostObservers=[J(this.field,"hide",({firstChange:o,currentValue:w})=>{this.formlyConfig.extras.lazyRender?w?(this.containerRef.clear(),this.field.className&&this.renderer.removeAttribute(this.elementRef.nativeElement,"class")):(this.renderField(this.containerRef,this.field),this.field.className&&this.renderer.setAttribute(this.elementRef.nativeElement,"class",this.field.className)):(o&&this.renderField(this.containerRef,this.field),(!o||o&&w)&&this.renderer.setStyle(this.elementRef.nativeElement,"display",w?"none":""))}),J(this.field,"className",({firstChange:o,currentValue:w})=>{(!o||o&&w)&&(!this.formlyConfig.extras.lazyRender||!0!==this.field.hide)&&this.renderer.setAttribute(this.elementRef.nativeElement,"class",w)})]}}resetRefs(o){o&&(o._componentRefs?o._componentRefs=o._componentRefs.filter(w=>-1===this.componentRefs.indexOf(w)):Y(this.field,"_componentRefs",[])),this.componentRefs=[]}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(Ce),n.\u0275\u0275directiveInject(n.Renderer2),n.\u0275\u0275directiveInject(n.ComponentFactoryResolver),n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275injectAttribute("hide-deprecation"))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["formly-field"]],viewQuery:function(o,w){if(1&o&&n.\u0275\u0275viewQuery(fr,7,n.ViewContainerRef),2&o){let q;n.\u0275\u0275queryRefresh(q=n.\u0275\u0275loadQuery())&&(w.containerRef=q.first)}},inputs:{model:"model",form:"form",options:"options",field:"field"},outputs:{modelChange:"modelChange"},features:[n.\u0275\u0275NgOnChangesFeature],decls:2,vars:0,consts:[["container",""]],template:function(o,w){1&o&&n.\u0275\u0275template(0,Hr,0,0,"ng-template",null,0,n.\u0275\u0275templateRefExtractor)},encapsulation:2}),v})(),At=(()=>{class v{constructor(o,w,q){this.renderer=o,this.elementRef=w,this.uiAttributesCache={},this.uiAttributes=null,this.uiEvents={listeners:[],events:["click","keyup","keydown","keypress","focus","blur","change"],callback:(re,Ve)=>{switch(re){case"focus":return this.onFocus(Ve);case"blur":return this.onBlur(Ve);case"change":return this.onChange(Ve);default:return this.to[re](this.field,Ve)}}},this.document=q}get to(){return this.field.templateOptions||{}}get fieldAttrElements(){return this.field&&this.field._elementRefs||[]}ngOnChanges(o){o.field&&(this.field.name&&this.setAttribute("name",this.field.name),this.uiEvents.listeners.forEach(w=>w()),this.uiEvents.events.forEach(w=>{(this.to&&this.to[w]||-1!==["focus","blur","change"].indexOf(w))&&this.uiEvents.listeners.push(this.renderer.listen(this.elementRef.nativeElement,w,q=>this.uiEvents.callback(w,q)))}),this.to&&this.to.attributes&&J(this.to,"attributes",({currentValue:w,previousValue:q})=>{q&&Object.keys(q).forEach(re=>this.removeAttribute(re)),w&&Object.keys(w).forEach(re=>{null!=w[re]&&this.setAttribute(re,w[re])})}),this.detachElementRef(o.field.previousValue),this.attachElementRef(o.field.currentValue),1===this.fieldAttrElements.length&&(!this.id&&this.field.id&&this.setAttribute("id",this.field.id),J(this.field,"focus",({currentValue:w})=>{this.toggleFocus(w)}))),o.id&&this.setAttribute("id",this.id)}ngDoCheck(){if(!this.uiAttributes){const o=this.elementRef.nativeElement;this.uiAttributes=[...Zn,"tabindex","placeholder","readonly","disabled","step"].filter(w=>!o.hasAttribute||!o.hasAttribute(w))}this.uiAttributes.forEach(o=>{const w=this.to[o];this.uiAttributesCache[o]!==w&&(!this.to.attributes||!this.to.attributes.hasOwnProperty(o.toLowerCase()))&&(this.uiAttributesCache[o]=w,w||0===w?this.setAttribute(o,!0===w?o:`${w}`):this.removeAttribute(o))})}ngOnDestroy(){this.uiEvents.listeners.forEach(o=>o()),this.detachElementRef(this.field)}toggleFocus(o){const w=this.fieldAttrElements?this.fieldAttrElements[0]:null;if(!w||!w.nativeElement.focus)return;const q=!!this.document.activeElement&&this.fieldAttrElements.some(({nativeElement:re})=>this.document.activeElement===re||re.contains(this.document.activeElement));o&&!q?w.nativeElement.focus():!o&&q&&w.nativeElement.blur()}onFocus(o){this.field.___$focus=!0,this.to.focus&&this.to.focus(this.field,o)}onBlur(o){this.field.___$focus=!1,this.to.blur&&this.to.blur(this.field,o)}onHostChange(o){o instanceof Event||this.onChange(o)}onChange(o){this.to.change&&this.to.change(this.field,o),this.field.formControl&&this.field.formControl.markAsDirty()}attachElementRef(o){!o||(o._elementRefs&&-1===o._elementRefs.indexOf(this.elementRef)?o._elementRefs.push(this.elementRef):Y(o,"_elementRefs",[this.elementRef]))}detachElementRef(o){const w=o&&o._elementRefs?this.fieldAttrElements.indexOf(this.elementRef):-1;-1!==w&&this.field._elementRefs.splice(w,1)}setAttribute(o,w){this.renderer.setAttribute(this.elementRef.nativeElement,o,w)}removeAttribute(o){this.renderer.removeAttribute(this.elementRef.nativeElement,o)}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(n.Renderer2),n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(y.DOCUMENT))},v.\u0275dir=n.\u0275\u0275defineDirective({type:v,selectors:[["","formlyAttributes",""]],hostBindings:function(o,w){1&o&&n.\u0275\u0275listener("change",function(re){return w.onHostChange(re)})},inputs:{field:["formlyAttributes","field"],id:"id"},features:[n.\u0275\u0275NgOnChangesFeature]}),v})(),oe=(()=>{class v{get model(){return this.field.model}set model(o){console.warn(`NgxFormly: passing 'model' input to '${this.constructor.name}' component is not required anymore, you may remove it!`)}get form(){return this.field.parent.formControl}set form(o){console.warn(`NgxFormly: passing 'form' input to '${this.constructor.name}' component is not required anymore, you may remove it!`)}get options(){return this.field.options}set options(o){console.warn(`NgxFormly: passing 'options' input to '${this.constructor.name}' component is not required anymore, you may remove it!`)}get key(){return this.field.key}get formControl(){return this.field.formControl}get to(){return this.field.templateOptions||{}}get showError(){return this.options.showError(this)}get id(){return this.field.id}get formState(){return this.options.formState||{}}}return v.\u0275fac=function(o){return new(o||v)},v.\u0275dir=n.\u0275\u0275defineDirective({type:v,inputs:{model:"model",form:"form",options:"options",field:"field"}}),v})(),I=(()=>{class v extends oe{constructor(o){super(),this.defaultOptions={defaultValue:[]},o instanceof We&&console.warn(`NgxFormly: passing 'FormlyFormBuilder' to '${this.constructor.name}' type is not required anymore, you may remove it!`)}onPopulate(o){!o.formControl&&o.key&&xt(o,dt(o)||new c.Oe([],{updateOn:o.modelOptions.updateOn})),o.fieldGroup=o.fieldGroup||[];const w=o.model?o.model.length:0;if(o.fieldGroup.length>w)for(let q=o.fieldGroup.length-1;q>=w;--q)pt(o.fieldGroup[q]),o.fieldGroup.splice(q,1);for(let q=o.fieldGroup.length;q<w;q++){const re=Object.assign({},M(o.fieldArray),{key:`${q}`});o.fieldGroup.push(re)}}add(o,w,{markAsDirty:q}={markAsDirty:!0}){o=an(o)?this.field.fieldGroup.length:o,this.model||Nr(this.field,[]),this.model.splice(o,0,w?M(w):void 0),this.options._buildForm(!0),q&&this.formControl.markAsDirty()}remove(o,{markAsDirty:w}={markAsDirty:!0}){this.model.splice(o,1),pt(this.field.fieldGroup[o],!0),this.field.fieldGroup.splice(o,1),this.field.fieldGroup.forEach((q,re)=>q.key=`${re}`),this.options._buildForm(!0),w&&this.formControl.markAsDirty()}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(ge,8))},v.\u0275dir=n.\u0275\u0275defineDirective({type:v,selectors:[["fieldArray"]],features:[n.\u0275\u0275InheritDefinitionFeature]}),v})(),ce=(()=>{class v extends oe{}return v.\u0275fac=function(){let h;return function(w){return(h||(h=n.\u0275\u0275getInheritedFactory(v)))(w||v)}}(),v.\u0275dir=n.\u0275\u0275defineDirective({type:v,viewQuery:function(o,w){if(1&o&&n.\u0275\u0275viewQuery(xr,5,n.ViewContainerRef),2&o){let q;n.\u0275\u0275queryRefresh(q=n.\u0275\u0275loadQuery())&&(w.fieldComponent=q.first)}},features:[n.\u0275\u0275InheritDefinitionFeature]}),v})(),Te=(()=>{class v extends oe{constructor(){super(...arguments),this.defaultOptions={defaultValue:{}}}}return v.\u0275fac=function(){let h;return function(w){return(h||(h=n.\u0275\u0275getInheritedFactory(v)))(w||v)}}(),v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["formly-group"]],hostVars:2,hostBindings:function(o,w){2&o&&n.\u0275\u0275classMap(w.field.fieldGroupClassName||"")},features:[n.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:Or,decls:2,vars:1,consts:[[3,"field",4,"ngFor","ngForOf"],[3,"field"]],template:function(o,w){1&o&&(n.\u0275\u0275projectionDef(),n.\u0275\u0275template(0,Dn,1,1,"formly-field",0),n.\u0275\u0275projection(1)),2&o&&n.\u0275\u0275property("ngForOf",w.field.fieldGroup)},directives:[y.NgForOf,tt],encapsulation:2}),v})(),at=(()=>{class v{constructor(o){this.formlyConfig=o}ngOnChanges(){this.errorMessage$=(0,ir.T)(this.field.formControl.statusChanges,this.field.options?this.field.options.fieldChanges.pipe((0,Qn.h)(({field:o,type:w,property:q})=>o===this.field&&"expressionChanges"===w&&-1!==q.indexOf("validation"))):(0,He.of)(null)).pipe((0,dr.O)(null),(0,G.w)(()=>(0,ur.b)(this.errorMessage)?this.errorMessage:(0,He.of)(this.errorMessage)))}get errorMessage(){const o=this.field.formControl;for(let w in o.errors)if(o.errors.hasOwnProperty(w)){let q=this.formlyConfig.getValidatorMessage(w);if($r(o.errors[w])){if(o.errors[w].errorPath)return;o.errors[w].message&&(q=o.errors[w].message)}return this.field.validation&&this.field.validation.messages&&this.field.validation.messages[w]&&(q=this.field.validation.messages[w]),this.field.validators&&this.field.validators[w]&&this.field.validators[w].message&&(q=this.field.validators[w].message),this.field.asyncValidators&&this.field.asyncValidators[w]&&this.field.asyncValidators[w].message&&(q=this.field.asyncValidators[w].message),"function"==typeof q?q(o.errors[w],this.field):q}}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(Ce))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["formly-validation-message"]],inputs:{field:"field"},features:[n.\u0275\u0275NgOnChangesFeature],decls:2,vars:3,template:function(o,w){1&o&&(n.\u0275\u0275text(0),n.\u0275\u0275pipe(1,"async")),2&o&&n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(1,1,w.errorMessage$))},pipes:[y.AsyncPipe],encapsulation:2,changeDetection:0}),v})(),Tt=(()=>{class v extends oe{constructor(o){super(),this.sanitizer=o,this.innerHtml={content:null,template:null}}get template(){return this.field&&this.field.template!==this.innerHtml.template&&(this.innerHtml={template:this.field.template,content:this.to.safeHtml?this.sanitizer.bypassSecurityTrustHtml(this.field.template):this.field.template}),this.innerHtml.content}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(e.H7))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["formly-template"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[3,"innerHtml"]],template:function(o,w){1&o&&n.\u0275\u0275element(0,"div",0),2&o&&n.\u0275\u0275property("innerHtml",w.template,n.\u0275\u0275sanitizeHtml)},encapsulation:2}),v})();function on(v,h,o){return v instanceof Function?v.apply(h,o):!!v}class bn{prePopulate(h){if(h.parent||h.options._checkField)return;let o=!1;h.options._checkField=(w,q)=>{o||(o=!0,this.checkField(w,q),o=!1)}}postPopulate(h){if(h.parent&&!h._expressionProperties){if(Y(h,"_expressionProperties",{}),h.expressionProperties)for(const o in h.expressionProperties){const w=h.expressionProperties[o];if("string"==typeof w||Kn(w))h._expressionProperties[o]={expression:this._evalExpression(o,w,"templateOptions.disabled"===o&&h.parent.expressionProperties&&h.parent.expressionProperties.hasOwnProperty("templateOptions.disabled")?()=>h.parent.templateOptions.disabled:void 0)},"templateOptions.disabled"===o&&Object.defineProperty(h._expressionProperties[o],"expressionValue",{get:()=>h.templateOptions.disabled,set:()=>{},enumerable:!0,configurable:!0});else if(w instanceof ve.y){const q=()=>w.subscribe(Qt=>{this.setExprValue(h,o,Qt),h.options&&h.options._markForCheck&&h.options._markForCheck(h)});let re=q();const Ve=h.hooks.onInit;h.hooks.onInit=()=>(null===re&&(re=q()),Ve&&Ve(h));const mt=h.hooks.onDestroy;h.hooks.onDestroy=()=>{mt&&mt(h),re.unsubscribe(),re=null}}}h.hideExpression?(delete h.hide,h.hideExpression=this._evalExpression("hide",h.hideExpression,()=>{let o=h.parent;for(;o.parent&&!o.hide;)o=o.parent;return o.hide})):J(h,"hide",({currentValue:o,firstChange:w})=>{h._hide=o,(!w||w&&!0===o)&&h.options._hiddenFieldsForCheck.push(h)})}}_evalExpression(h,o,w){return(...q)=>{try{return"string"==typeof o&&(o=function tn(v,h){try{return-1!==v.indexOf("this.field")&&console.warn("NgxFormly: using 'this.field' in expressionProperties is deprecated since v5.1, use 'field' instead."),Function(...h,`return ${v};`)}catch(o){console.error(o)}}(o,["model","formState","field"])),"function"!=typeof o&&(o=()=>!!o),w&&w()||o(...q)}catch(re){throw re.message=`[Formly Error] [Expression "${h}"] ${re.message}`,re}}}checkField(h,o=!1){const w=this._checkField(h,o);h.options._hiddenFieldsForCheck.sort(q=>q.hide?-1:1).forEach(q=>this.toggleFormControl(q,!!q.hide,!o)),h.options._hiddenFieldsForCheck=[],w&&(this.checkField(h),h.options&&h.options._markForCheck&&h.options._markForCheck(h))}_checkField(h,o=!1){let w=!1;return h.fieldGroup.forEach(q=>{!q.options||(this.checkFieldExpressionChange(q,o)&&(w=!0),this.checkFieldVisibilityChange(q,o)&&(h.options._hiddenFieldsForCheck.push(q),w=!0),q.fieldGroup&&q.fieldGroup.length>0&&this._checkField(q,o)&&(w=!0))}),w}checkFieldExpressionChange(h,o){if(!h||!h._expressionProperties)return!1;let w=!1;const q=h._expressionProperties;for(const re in q){let Ve=on(q[re].expression,{field:h},[h.model,h.options.formState,h,o]);"templateOptions.disabled"===re&&(Ve=!!Ve),(o||q[re].expressionValue!==Ve&&(!$r(Ve)&&!Kn(Ve)||Kn(Ve)&&""+q[re].expressionValue!=""+Ve||(0,ur.b)(Ve)||JSON.stringify(Ve)!==JSON.stringify(q[re].expressionValue)))&&(w=!0,q[re].expressionValue=Ve,this.setExprValue(h,re,Ve))}return w}checkFieldVisibilityChange(h,o){if(!h||an(h.hideExpression))return!1;const w=!!on(h.hideExpression,{field:h},[h.model,h.options.formState,h,o]);let q=!1;return(w!==h.hide||o)&&(q=!0,h.hide=w,h.templateOptions.hidden=w),q}setDisabledState(h,o){h.fieldGroup&&h.fieldGroup.filter(w=>!w.expressionProperties||!w.expressionProperties.hasOwnProperty("templateOptions.disabled")).forEach(w=>this.setDisabledState(w,o)),h.key&&h.templateOptions.disabled!==o&&(h.templateOptions.disabled=o)}toggleFormControl(h,o,w){if(h.fieldGroup&&h.fieldGroup.filter(q=>!q.hideExpression).forEach(q=>this.toggleFormControl(q,o,w)),h.formControl&&h.key){Y(h,"_hide",!(!o&&!h.hide));const q=h.formControl;q._fields&&q._fields.length>1&&Mt(q),!0!==o||q._fields&&!q._fields.every(re=>!!re._hide)?!1===o&&(h.resetOnHide&&h.parent&&!On(h.defaultValue)&&On(Rt(h))&&Nr(h,h.defaultValue),xt(h,void 0,!0),h.resetOnHide&&h.fieldArray&&(h.fieldGroup||[]).length!==(h.model||[]).length&&h.options._buildForm(!0)):(pt(h,!0),w&&h.resetOnHide&&(h.formControl.reset({value:void 0,disabled:h.formControl.disabled}),h.fieldGroup&&(Nr(h,void 0),h.formControl instanceof c.Oe&&(h.fieldGroup.length=0))))}h.options.fieldChanges&&h.options.fieldChanges.next({field:h,type:"hidden",value:o})}setExprValue(h,o,w){try{let q=h;const re=-1===o.indexOf("[")?o.split("."):o.replace(/\'|\"/g,"").split(/[[\]]{1,2}/).filter(mt=>mt),Ve=re.length-1;for(let mt=0;mt<Ve;mt++)q=q[re[mt]];q[re[Ve]]=w}catch(q){throw q.message=`[Formly Error] [Expression "${o}"] ${q.message}`,q}if("templateOptions.disabled"===o&&h.key&&this.setDisabledState(h,w),0===o.indexOf("model.")){const q=o.replace(/^model\./,""),re=h.key&&o===q?h.formControl:h.parent.formControl.get(q);re&&(!an(re.value)||!an(w))&&re.value!==w&&re.patchValue(w)}this.emitExpressionChanges(h,o,w)}emitExpressionChanges(h,o,w){!h.options.fieldChanges||h.options.fieldChanges.next({field:h,type:"expressionChanges",property:o,value:w})}}class vn{constructor(h){this.formlyConfig=h}onPopulate(h){this.initFieldValidation(h,"validators"),this.initFieldValidation(h,"asyncValidators")}initFieldValidation(h,o){const w=[];if("validators"===o&&!(h.hasOwnProperty("fieldGroup")&&!h.key)&&w.push(this.getPredefinedFieldValidation(h)),h[o])for(const q in h[o])"validation"===q&&!Array.isArray(h[o].validation)&&(h[o].validation=[h[o].validation],console.warn(`NgxFormly(${h.key}): passing a non array value to the 'validation' is deprecated, pass an array instead`)),"validation"===q?w.push(...h[o].validation.map(re=>this.wrapNgValidatorFn(h,re))):w.push(this.wrapNgValidatorFn(h,h[o][q],q));Y(h,"_"+o,w)}getPredefinedFieldValidation(h){let o=[];return Zn.forEach(w=>J(h.templateOptions,w,({currentValue:q,firstChange:re})=>{o=o.filter(Ve=>Ve!==w),null!=q&&!1!==q&&o.push(w),!re&&h.formControl&&Mt(h.formControl)})),w=>0===o.length?null:c.kI.compose(o.map(q=>()=>{const re=h.templateOptions[q];switch(q){case"required":return c.kI.required(w);case"pattern":return c.kI.pattern(re)(w);case"minLength":return c.kI.minLength(re)(w);case"maxLength":return c.kI.maxLength(re)(w);case"min":return c.kI.min(re)(w);case"max":return c.kI.max(re)(w)}}))(w)}wrapNgValidatorFn(h,o,w){let q=null;if("string"==typeof o&&(q=M(this.formlyConfig.getValidator(o))),"object"==typeof o&&o.name&&(q=M(this.formlyConfig.getValidator(o.name)),o.options&&(q.options=o.options)),"object"==typeof o&&o.expression){const{expression:re}=o,Ve=qt(o,["expression"]);q={name:w,validation:re,options:Object.keys(Ve).length>0?Ve:null}}return"function"==typeof o&&(q={name:w,validation:o}),re=>{const Ve=q.validation(re,h,q.options);return function T(v){return!!v&&"function"==typeof v.then}(Ve)?Ve.then(mt=>this.handleAsyncResult(h,w?!!mt:mt,q)):(0,ur.b)(Ve)?Ve.pipe((0,Se.U)(mt=>this.handleAsyncResult(h,w?!!mt:mt,q))):this.handleResult(h,w?!!Ve:Ve,q)}}handleAsyncResult(h,o,w){return h.options&&h.options._markForCheck&&h.options._markForCheck(h),this.handleResult(h,o,w)}handleResult(h,o,{name:w,options:q}){"boolean"==typeof o&&(o=o?null:{[w]:q||!0});const re=h.formControl;return re._childrenErrors&&re._childrenErrors[w]&&re._childrenErrors[w](),$r(o)&&Object.keys(o).forEach(Ve=>{const mt=o[Ve].errorPath?o[Ve].errorPath:(q||{}).errorPath,Qt=mt?h.formControl.get(mt):null;if(Qt){const gn=qt(o[Ve],["errorPath"]);Qt.setErrors(Object.assign({},Qt.errors||{},{[Ve]:gn})),!re._childrenErrors&&Y(re,"_childrenErrors",{}),re._childrenErrors[Ve]=()=>{const Vr=qt(Qt.errors||{},["symbol"==typeof Ve?Ve:Ve+""]);Qt.setErrors(0===Object.keys(Vr).length?null:Vr)}}}),o}}class Ht{constructor(h){this.config=h}onPopulate(h){!h.parent||(h.fieldGroup&&!h.key?Y(h,"formControl",h.parent.formControl):this.addFormControl(h))}postPopulate(h){h.parent||this.setValidators(h)}addFormControl(h){let o=dt(h);if(!o){const w={updateOn:h.modelOptions.updateOn},q=h.key?Rt(h):h.defaultValue,re=this.config?this.config.resolveFieldTypeRef(h):null;if(re&&re.componentType&&re.componentType.createControl){const Ve=re.componentType;console.warn(`NgxFormly: '${Ve.name}::createControl' is deprecated since v5.0, use 'prePopulate' hook instead.`),o=Ve.createControl(q,h)}else o=h.fieldGroup?new c.cw({},w):new c.NI(q,w)}xt(h,o)}setValidators(h,o=!1){let w=!1;if(!1===o&&h.key&&h.templateOptions&&h.templateOptions.disabled&&(o=!0),(h.fieldGroup||[]).forEach(q=>this.setValidators(q,o)&&(w=!0)),h.key||!h.parent||!h.key&&!h.fieldGroup){const{formControl:q}=h;h.templateOptions=h.templateOptions||{},h.key&&q&&q instanceof c.NI&&(o&&q.enabled&&(q.disable({emitEvent:!1,onlySelf:!0}),w=!0),!o&&q.disabled&&(q.enable({emitEvent:!1,onlySelf:!0}),w=!0)),q&&(null===q.validator||null===q.asyncValidator)&&(q.setValidators(()=>{const re=c.kI.compose(this.mergeValidators(h,"_validators"));return re?re(q):null}),q.setAsyncValidators(()=>{const re=c.kI.composeAsync(this.mergeValidators(h,"_asyncValidators"));return re?re(q):(0,He.of)(null)}),w=!0),w&&Mt(q,!0)}return w}mergeValidators(h,o){const w=[],q=h.formControl;return q&&q._fields&&q._fields.length>1?q._fields.filter(re=>!re._hide).forEach(re=>w.push(...re[o])):h[o]&&w.push(...h[o]),h.fieldGroup&&h.fieldGroup.filter(re=>!re.key&&re.fieldGroup).forEach(re=>w.push(...this.mergeValidators(re,o))),w}}class Jn{constructor(h){this.formlyConfig=h,this.formId=0}prePopulate(h){if(this.getFieldComponentInstance(h).prePopulate(),h.parent)return;const o=h.options&&h.options.fieldTransform||this.formlyConfig.extras.fieldTransform;(Array.isArray(o)?o:[o]).forEach(w=>{if(w&&(console.warn("NgxFormly: fieldTransform is deprecated since v5.0, use custom extension instead."),!w(h.fieldGroup,h.model,h.formControl,h.options)))throw new Error("fieldTransform must return an array of fields")})}onPopulate(h){this.initFieldOptions(h),this.getFieldComponentInstance(h).onPopulate(),h.fieldGroup&&h.fieldGroup.forEach((o,w)=>{Object.defineProperty(o,"parent",{get:()=>h,configurable:!0}),Object.defineProperty(o,"index",{get:()=>w,configurable:!0}),this.formId++})}postPopulate(h){this.getFieldComponentInstance(h).postPopulate()}initFieldOptions(h){const o=h.parent;if(o){if(Object.defineProperty(h,"form",{get:()=>o.formControl,configurable:!0}),Object.defineProperty(h,"options",{get:()=>o.options,configurable:!0}),Object.defineProperty(h,"model",{get:()=>h.key&&h.fieldGroup?Rt(h):o.model,configurable:!0}),wn(h,{id:Er(`formly_${this.formId}`,h,h.index),hooks:{},modelOptions:{},validation:{messages:{}},templateOptions:h.type&&h.key?{label:"",placeholder:"",focus:!1,disabled:!1}:{}}),this.formlyConfig.extras.resetFieldOnHide&&!1!==h.resetOnHide&&(h.resetOnHide=!0),h.lifecycle&&console.warn("NgxFormly: 'lifecycle' is deprecated since v5.0, use 'hooks' instead."),"formly-template"!==h.type&&(h.template||h.expressionProperties&&h.expressionProperties.template)&&(h.type&&console.warn("NgxFormly: passing 'type' property is not allowed when 'template' is set."),h.type="formly-template"),!h.type&&h.fieldGroup&&(h.type="formly-group"),h.type&&this.formlyConfig.getMergedField(h),h.parent){let w=!On(h.key)&&!On(h.defaultValue)&&On(Rt(h))&&(!h.resetOnHide||!(h.hide||h.hideExpression));if(w&&h.resetOnHide){let q=h.parent;for(;q&&!q.hideExpression&&!q.hide;)q=q.parent;w=!q||!(q.hideExpression||q.hide)}w&&Nr(h,h.defaultValue)}this.initFieldWrappers(h)}}initFieldWrappers(h){h.wrappers=h.wrappers||[];const o=Object.assign({preWrapper:[],postWrapper:[]},h.templateOptions.templateManipulators||{});h.wrappers=[...this.formlyConfig.templateManipulators.preWrapper.map(w=>w(h)),...o.preWrapper.map(w=>w(h)),...h.wrappers,...this.formlyConfig.templateManipulators.postWrapper.map(w=>w(h)),...o.postWrapper.map(w=>w(h))].filter((w,q,re)=>w&&q===re.indexOf(w))}getFieldComponentInstance(h){const o=this.formlyConfig.resolveFieldTypeRef(h),w=o?o.instance:{};return{prePopulate:()=>w.prePopulate&&w.prePopulate(h),onPopulate:()=>w.onPopulate&&w.onPopulate(h),postPopulate:()=>w.postPopulate&&w.postPopulate(h)}}}function er(v){return{types:[{name:"formly-group",component:Te},{name:"formly-template",component:Tt}],extensions:[{name:"core",extension:new Jn(v)},{name:"field-validation",extension:new vn(v)},{name:"field-form",extension:new Ht(v)},{name:"field-expression",extension:new bn}]}}let rr=(()=>{class v{constructor(o,w=[]){!w||w.forEach(q=>o.addConfig(q))}static forRoot(o={}){return{ngModule:v,providers:[{provide:ge,multi:!0,useFactory:er,deps:[Ce]},{provide:ge,useValue:o,multi:!0},{provide:n.ANALYZE_FOR_ENTRY_COMPONENTS,useValue:o,multi:!0},Ce,We]}}static forChild(o={}){return{ngModule:v,providers:[{provide:ge,multi:!0,useFactory:er,deps:[Ce]},{provide:ge,useValue:o,multi:!0},{provide:n.ANALYZE_FOR_ENTRY_COMPONENTS,useValue:o,multi:!0},We]}}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275inject(Ce),n.\u0275\u0275inject(ge,8))},v.\u0275mod=n.\u0275\u0275defineNgModule({type:v}),v.\u0275inj=n.\u0275\u0275defineInjector({imports:[[y.CommonModule]]}),v})();var Ln=u(5074),Nn=u(4218);const Mn=["matPrefix"],kn=["matSuffix"],jn=["fieldComponent"];function Gn(v,h){1&v&&(n.\u0275\u0275elementStart(0,"span",8),n.\u0275\u0275text(1,"*"),n.\u0275\u0275elementEnd())}function nr(v,h){if(1&v&&(n.\u0275\u0275elementStart(0,"mat-label"),n.\u0275\u0275text(1),n.\u0275\u0275template(2,Gn,2,0,"span",7),n.\u0275\u0275elementEnd()),2&v){const o=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",o.to.label," "),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",o.to.required&&!0!==o.to.hideRequiredMarker)}}function Sr(v,h){1&v&&n.\u0275\u0275elementContainer(0)}function bt(v,h){if(1&v&&(n.\u0275\u0275elementContainerStart(0,9),n.\u0275\u0275template(1,Sr,1,0,"ng-container",10),n.\u0275\u0275elementContainerEnd()),2&v){const o=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngTemplateOutlet",o.to.prefix?o.to.prefix:o.to._matPrefix)}}function _t(v,h){1&v&&n.\u0275\u0275elementContainer(0)}function Ze(v,h){if(1&v&&(n.\u0275\u0275elementContainerStart(0,11),n.\u0275\u0275template(1,_t,1,0,"ng-container",10),n.\u0275\u0275elementContainerEnd()),2&v){const o=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngTemplateOutlet",o.to.suffix?o.to.suffix:o.to._matSuffix)}}function jt(v,h){if(1&v&&(n.\u0275\u0275elementStart(0,"mat-hint",12),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&v){const o=n.\u0275\u0275nextContext();n.\u0275\u0275property("id",null),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(o.to.description)}}class Jt{constructor(h){this.field=h}isErrorState(h,o){return this.field&&this.field.showError}}let en=(()=>{class v extends oe{constructor(){super(...arguments),this.errorStateMatcher=new Jt(this),this.stateChanges=new Xn.x,this._errorState=!1}get formFieldControl(){return this._control||this}set formFieldControl(o){this._control=o,this.formField&&o!==this.formField._control&&(this.formField._control=o)}ngOnInit(){this.formField&&(this.formField._control=this.formFieldControl)}ngAfterViewInit(){(this.matPrefix||this.matSuffix)&&setTimeout(()=>{Y(this.to,"_matPrefix",this.matPrefix),Y(this.to,"_matSuffix",this.matSuffix),this.options._markForCheck(this.field)})}ngOnDestroy(){this.formField&&delete this.formField._control,this.stateChanges.complete()}setDescribedByIds(o){}onContainerClick(o){this.field.focus=!0,this.stateChanges.next()}get errorState(){const o=this.options.showError(this);return o!==this._errorState&&(this._errorState=o,this.stateChanges.next()),o}get controlType(){return this.to.type?this.to.type:this.field.type instanceof n.Type?this.field.type.constructor.name:this.field.type}get focused(){return!!this.field.focus&&!this.disabled}get disabled(){return!!this.to.disabled}get required(){return!!this.to.required}get placeholder(){return this.to.placeholder||""}get shouldPlaceholderFloat(){return this.shouldLabelFloat}get value(){return this.formControl.value}set value(o){this.formControl.patchValue(o)}get ngControl(){return this.formControl}get empty(){return null==this.value||""===this.value}get shouldLabelFloat(){return this.focused||!this.empty}get formField(){return this.field?this.field.__formField__:null}}return v.\u0275fac=function(){let h;return function(w){return(h||(h=n.\u0275\u0275getInheritedFactory(v)))(w||v)}}(),v.\u0275dir=n.\u0275\u0275defineDirective({type:v,viewQuery:function(o,w){if(1&o&&(n.\u0275\u0275viewQuery(Mn,5),n.\u0275\u0275viewQuery(kn,5)),2&o){let q;n.\u0275\u0275queryRefresh(q=n.\u0275\u0275loadQuery())&&(w.matPrefix=q.first),n.\u0275\u0275queryRefresh(q=n.\u0275\u0275loadQuery())&&(w.matSuffix=q.first)}},features:[n.\u0275\u0275InheritDefinitionFeature]}),v})(),nn=(()=>{class v extends ce{constructor(o,w,q,re){super(),this.config=o,this.renderer=w,this.elementRef=q,this.focusMonitor=re,this.stateChanges=new Xn.x,this._errorState=!1,this.initialGapCalculated=!1}ngOnInit(){this.formField._control=this,Y(this.field,"__formField__",this.formField);const o=this.config.resolveFieldTypeRef(this.formlyField);o&&!(o.instance instanceof en)&&console.warn(`Component '${o.componentType.name}' must extend 'FieldType' from '@ngx-formly/material/form-field'.`),this.formlyField.hide&&"outline"===this.formlyField.templateOptions.appearance&&(this.initialGapCalculated=!0),this.focusMonitor.monitor(this.elementRef,!0).subscribe(w=>{!w&&this.field.focus&&(this.field.focus=!1),this.stateChanges.next()})}ngAfterContentChecked(){!this.initialGapCalculated||this.formlyField.hide||(this.formField.updateOutlineGap(),this.initialGapCalculated=!0)}ngAfterViewInit(){if("outline"!==this.formField.appearance&&!0===this.to.hideFieldUnderline){const o=this.formField._elementRef.nativeElement.querySelector(".mat-form-field-underline");o&&this.renderer.removeChild(o.parentNode,o)}}ngOnDestroy(){delete this.formlyField.__formField__,this.stateChanges.complete(),this.focusMonitor.stopMonitoring(this.elementRef)}setDescribedByIds(o){}onContainerClick(o){this.formlyField.focus=!0,this.stateChanges.next()}get errorState(){const o=this.options.showError(this);return o!==this._errorState&&(this._errorState=o,this.stateChanges.next()),o}get controlType(){return this.to.type}get focused(){return!!this.formlyField.focus&&!this.disabled}get disabled(){return!!this.to.disabled}get required(){return!!this.to.required}get placeholder(){return this.to.placeholder||""}get shouldPlaceholderFloat(){return this.shouldLabelFloat}get value(){return this.formControl.value}get ngControl(){return this.formControl}get empty(){return!this.formControl.value}get shouldLabelFloat(){return this.focused||!this.empty}get formlyField(){return this.field}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(Ce),n.\u0275\u0275directiveInject(n.Renderer2),n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(Nn.tE))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["formly-wrapper-mat-form-field"]],viewQuery:function(o,w){if(1&o&&(n.\u0275\u0275viewQuery(jn,7,n.ViewContainerRef),n.\u0275\u0275viewQuery(Ln.KE,7)),2&o){let q;n.\u0275\u0275queryRefresh(q=n.\u0275\u0275loadQuery())&&(w.fieldComponent=q.first),n.\u0275\u0275queryRefresh(q=n.\u0275\u0275loadQuery())&&(w.formField=q.first)}},features:[n.\u0275\u0275ProvidersFeature([{provide:Ln.Eo,useExisting:v}]),n.\u0275\u0275InheritDefinitionFeature],decls:9,vars:9,consts:[[3,"hideRequiredMarker","floatLabel","appearance","color"],["fieldComponent",""],[4,"ngIf"],["matPrefix","",4,"ngIf"],["matSuffix","",4,"ngIf"],[3,"field"],[3,"id",4,"ngIf"],["aria-hidden","true","class","mat-form-field-required-marker",4,"ngIf"],["aria-hidden","true",1,"mat-form-field-required-marker"],["matPrefix",""],[4,"ngTemplateOutlet"],["matSuffix",""],[3,"id"]],template:function(o,w){1&o&&(n.\u0275\u0275elementStart(0,"mat-form-field",0),n.\u0275\u0275elementContainer(1,null,1),n.\u0275\u0275template(3,nr,3,2,"mat-label",2),n.\u0275\u0275template(4,bt,2,1,"ng-container",3),n.\u0275\u0275template(5,Ze,2,1,"ng-container",4),n.\u0275\u0275elementStart(6,"mat-error"),n.\u0275\u0275element(7,"formly-validation-message",5),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(8,jt,2,2,"mat-hint",6),n.\u0275\u0275elementEnd()),2&o&&(n.\u0275\u0275property("hideRequiredMarker",!0)("floatLabel",w.to.floatLabel)("appearance",w.to.appearance)("color",w.to.color),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",w.to.label&&!0!==w.to.hideLabel),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",w.to.prefix||w.to._matPrefix),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",w.to.suffix||w.to._matSuffix),n.\u0275\u0275advance(2),n.\u0275\u0275property("field",w.field),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",w.to.description))},directives:[Ln.KE,y.NgIf,Ln.hX,Ln.qo,y.NgTemplateOutlet,Ln.R9,Ln.TO,at,Ln.bx],styles:["formly-wrapper-mat-form-field .mat-form-field{width:100%}"],encapsulation:2}),v})(),un=(()=>{class v{}return v.\u0275fac=function(o){return new(o||v)},v.\u0275mod=n.\u0275\u0275defineNgModule({type:v}),v.\u0275inj=n.\u0275\u0275defineInjector({imports:[[y.CommonModule,c.UX,Ln.lN,rr.forChild({wrappers:[{name:"form-field",component:nn}]})]]}),v})();var rn=u(8562);function cn(v,h){if(1&v&&n.\u0275\u0275element(0,"input",2),2&v){const o=n.\u0275\u0275nextContext();n.\u0275\u0275property("id",o.id)("type",o.type||"text")("readonly",o.to.readonly)("required",o.to.required)("errorStateMatcher",o.errorStateMatcher)("formControl",o.formControl)("formlyAttributes",o.field)("tabindex",o.to.tabindex)("placeholder",o.to.placeholder)}}function Sn(v,h){if(1&v&&n.\u0275\u0275element(0,"input",3),2&v){const o=n.\u0275\u0275nextContext();n.\u0275\u0275property("id",o.id)("readonly",o.to.readonly)("required",o.to.required)("errorStateMatcher",o.errorStateMatcher)("formControl",o.formControl)("formlyAttributes",o.field)("tabIndex",o.to.tabindex)("placeholder",o.to.placeholder)}}let Vn=(()=>{class v extends en{get type(){return this.to.type||"text"}}return v.\u0275fac=function(){let h;return function(w){return(h||(h=n.\u0275\u0275getInheritedFactory(v)))(w||v)}}(),v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["formly-field-mat-input"]],viewQuery:function(o,w){if(1&o&&n.\u0275\u0275viewQuery(rn.Nt,5),2&o){let q;n.\u0275\u0275queryRefresh(q=n.\u0275\u0275loadQuery())&&(w.formFieldControl=q.first)}},features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[["matInput","",3,"id","type","readonly","required","errorStateMatcher","formControl","formlyAttributes","tabindex","placeholder",4,"ngIf","ngIfElse"],["numberTmp",""],["matInput","",3,"id","type","readonly","required","errorStateMatcher","formControl","formlyAttributes","tabindex","placeholder"],["matInput","","type","number",3,"id","readonly","required","errorStateMatcher","formControl","formlyAttributes","tabIndex","placeholder"]],template:function(o,w){if(1&o&&(n.\u0275\u0275template(0,cn,1,9,"input",0),n.\u0275\u0275template(1,Sn,1,8,"ng-template",null,1,n.\u0275\u0275templateRefExtractor)),2&o){const q=n.\u0275\u0275reference(2);n.\u0275\u0275property("ngIf","number"!==w.type)("ngIfElse",q)}},directives:[y.NgIf,rn.Nt,c.Fj,c.Q7,c.JJ,c.oH,At,c.wV],encapsulation:2}),v})(),tr=(()=>{class v{}return v.\u0275fac=function(o){return new(o||v)},v.\u0275mod=n.\u0275\u0275defineNgModule({type:v}),v.\u0275inj=n.\u0275\u0275defineInjector({imports:[[y.CommonModule,c.UX,rn.c,un,rr.forChild({types:[{name:"input",component:Vn,wrappers:["form-field"]}]})]]}),v})();var Wr=u(5804);let Ci=(()=>{class v extends en{constructor(){super(...arguments),this.defaultOptions={templateOptions:{cols:1,rows:1}}}}return v.\u0275fac=function(){let h;return function(w){return(h||(h=n.\u0275\u0275getInheritedFactory(v)))(w||v)}}(),v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["formly-field-mat-textarea"]],viewQuery:function(o,w){if(1&o&&n.\u0275\u0275viewQuery(rn.Nt,7),2&o){let q;n.\u0275\u0275queryRefresh(q=n.\u0275\u0275loadQuery())&&(w.formFieldControl=q.first)}},features:[n.\u0275\u0275ProvidersFeature([{provide:rn.Jk,useExisting:v}]),n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:15,consts:[["matInput","",3,"id","readonly","required","formControl","errorStateMatcher","cols","rows","formlyAttributes","placeholder","tabindex","cdkTextareaAutosize","cdkAutosizeMinRows","cdkAutosizeMaxRows"]],template:function(o,w){1&o&&(n.\u0275\u0275elementStart(0,"textarea",0),n.\u0275\u0275text(1,"    "),n.\u0275\u0275elementEnd()),2&o&&(n.\u0275\u0275classProp("cdk-textarea-autosize",w.to.autosize),n.\u0275\u0275property("id",w.id)("readonly",w.to.readonly)("required",w.to.required)("formControl",w.formControl)("errorStateMatcher",w.errorStateMatcher)("cols",w.to.cols)("rows",w.to.rows)("formlyAttributes",w.field)("placeholder",w.to.placeholder)("tabindex",w.to.tabindex)("cdkTextareaAutosize",w.to.autosize)("cdkAutosizeMinRows",w.to.autosizeMinRows)("cdkAutosizeMaxRows",w.to.autosizeMaxRows))},directives:[rn.Nt,c.Fj,Wr.IC,c.Q7,c.JJ,c.oH,At],encapsulation:2}),v})(),Oi=(()=>{class v{}return v.\u0275fac=function(o){return new(o||v)},v.\u0275mod=n.\u0275\u0275defineNgModule({type:v}),v.\u0275inj=n.\u0275\u0275defineInjector({imports:[[y.CommonModule,c.UX,rn.c,un,rr.forChild({types:[{name:"textarea",component:Ci,wrappers:["form-field"]}]})]]}),v})(),Tr=(()=>{class v{transform(o,w){return o instanceof ve.y||(o=(0,He.of)(o)),o.pipe((0,Se.U)(q=>this.toOptions(q,w||{})))}toOptions(o,w){const q=[],re={},Ve=w.templateOptions||{};return Ve._flatOptions=!0,o.map(mt=>{this.getGroupProp(mt,Ve)?(Ve._flatOptions=!1,re[this.getGroupProp(mt,Ve)]||(re[this.getGroupProp(mt,Ve)]=[],q.push({label:this.getGroupProp(mt,Ve),group:re[this.getGroupProp(mt,Ve)]})),re[this.getGroupProp(mt,Ve)].push(this.toOption(mt,Ve))):q.push(this.toOption(mt,Ve))}),q}toOption(o,w){return{label:this.getLabelProp(o,w),value:this.getValueProp(o,w),disabled:this.getDisabledProp(o,w)||!1}}getLabelProp(o,w){return"function"==typeof w.labelProp?w.labelProp(o):this.shouldUseLegacyOption(o,w)?(console.warn("NgxFormly: legacy select option '{key, value}' is deprecated since v5.5, use '{value, label}' instead."),o.value):o[w.labelProp||"label"]}getValueProp(o,w){return"function"==typeof w.valueProp?w.valueProp(o):this.shouldUseLegacyOption(o,w)?o.key:o[w.valueProp||"value"]}getDisabledProp(o,w){return"function"==typeof w.disabledProp?w.disabledProp(o):o[w.disabledProp||"disabled"]}getGroupProp(o,w){return"function"==typeof w.groupProp?w.groupProp(o):o[w.groupProp||"group"]}shouldUseLegacyOption(o,w){return!w.valueProp&&!w.labelProp&&null!=o&&"object"==typeof o&&"key"in o&&"value"in o}}return v.\u0275fac=function(o){return new(o||v)},v.\u0275pipe=n.\u0275\u0275definePipe({name:"formlySelectOptions",type:v,pure:!0}),v})(),vi=(()=>{class v{}return v.\u0275fac=function(o){return new(o||v)},v.\u0275mod=n.\u0275\u0275defineNgModule({type:v}),v.\u0275inj=n.\u0275\u0275defineInjector({}),v})();var ai=u(2922);function li(v,h){if(1&v&&(n.\u0275\u0275elementStart(0,"mat-radio-button",2),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&v){const o=h.$implicit,w=h.index,q=n.\u0275\u0275nextContext();n.\u0275\u0275property("id",q.id+"_"+w)("color",q.to.color)("labelPosition",q.to.labelPosition)("disabled",o.disabled)("value",o.value),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",o.label," ")}}let ko=(()=>{class v extends en{constructor(){super(...arguments),this.defaultOptions={templateOptions:{hideFieldUnderline:!0,floatLabel:"always",options:[],tabindex:-1}}}ngAfterViewInit(){this.focusObserver=J(this.field,"focus",({currentValue:o})=>{-1===this.to.tabindex&&o&&this.radioGroup._radios.length>0&&setTimeout(()=>{(this.radioGroup.selected?this.radioGroup.selected:this.radioGroup._radios.first)._elementRef.nativeElement.focus({preventScroll:!0})})})}onContainerClick(){}ngOnDestroy(){this.focusObserver&&this.focusObserver()}}return v.\u0275fac=function(){let h;return function(w){return(h||(h=n.\u0275\u0275getInheritedFactory(v)))(w||v)}}(),v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["formly-field-mat-radio"]],viewQuery:function(o,w){if(1&o&&n.\u0275\u0275viewQuery(ai.VQ,7),2&o){let q;n.\u0275\u0275queryRefresh(q=n.\u0275\u0275loadQuery())&&(w.radioGroup=q.first)}},features:[n.\u0275\u0275InheritDefinitionFeature],decls:4,vars:10,consts:[[3,"formControl","formlyAttributes","required","tabindex"],[3,"id","color","labelPosition","disabled","value",4,"ngFor","ngForOf"],[3,"id","color","labelPosition","disabled","value"]],template:function(o,w){1&o&&(n.\u0275\u0275elementStart(0,"mat-radio-group",0),n.\u0275\u0275template(1,li,2,6,"mat-radio-button",1),n.\u0275\u0275pipe(2,"async"),n.\u0275\u0275pipe(3,"formlySelectOptions"),n.\u0275\u0275elementEnd()),2&o&&(n.\u0275\u0275property("formControl",w.formControl)("formlyAttributes",w.field)("required",w.to.required)("tabindex",w.to.tabindex),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind1(2,5,n.\u0275\u0275pipeBind2(3,7,w.to.options,w.field))))},directives:[ai.VQ,c.JJ,c.oH,At,c.Q7,y.NgForOf,ai.U0],pipes:[y.AsyncPipe,Tr],encapsulation:2}),v})(),Qi=(()=>{class v{}return v.\u0275fac=function(o){return new(o||v)},v.\u0275mod=n.\u0275\u0275defineNgModule({type:v}),v.\u0275inj=n.\u0275\u0275defineInjector({imports:[[y.CommonModule,c.UX,ai.Fk,un,vi,rr.forChild({types:[{name:"radio",component:ko,wrappers:["form-field"]}]})]]}),v})();var xi=u(4792);function Fo(v,h){1&v&&(n.\u0275\u0275elementStart(0,"span",2),n.\u0275\u0275text(1,"*"),n.\u0275\u0275elementEnd())}let Do=(()=>{class v extends en{constructor(o,w){super(),this.renderer=o,this.focusMonitor=w,this.defaultOptions={templateOptions:{hideFieldUnderline:!0,indeterminate:!0,floatLabel:"always",hideLabel:!0,align:"start",color:"accent"}}}onContainerClick(o){this.checkbox.focus(),super.onContainerClick(o)}ngAfterViewInit(){this.checkbox&&this.focusMonitor.monitor(this.checkbox._inputElement,!0).subscribe(o=>{o?this.to.focus&&this.to.focus(this.field):this.to.blur&&this.to.blur(this.field)})}ngAfterViewChecked(){if(this.required!==this._required&&this.checkbox&&this.checkbox._inputElement){this._required=this.required;const o=this.checkbox._inputElement.nativeElement;this.required?this.renderer.setAttribute(o,"required","required"):this.renderer.removeAttribute(o,"required")}}ngOnDestroy(){this.checkbox&&this.focusMonitor.stopMonitoring(this.checkbox._inputElement)}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(n.Renderer2),n.\u0275\u0275directiveInject(Nn.tE))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["formly-field-mat-checkbox"]],viewQuery:function(o,w){if(1&o&&n.\u0275\u0275viewQuery(xi.oG,7),2&o){let q;n.\u0275\u0275queryRefresh(q=n.\u0275\u0275loadQuery())&&(w.checkbox=q.first)}},features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:9,consts:[[3,"formControl","id","formlyAttributes","tabIndex","indeterminate","color","labelPosition"],["aria-hidden","true","class","mat-form-field-required-marker",4,"ngIf"],["aria-hidden","true",1,"mat-form-field-required-marker"]],template:function(o,w){1&o&&(n.\u0275\u0275elementStart(0,"mat-checkbox",0),n.\u0275\u0275text(1),n.\u0275\u0275template(2,Fo,2,0,"span",1),n.\u0275\u0275elementEnd()),2&o&&(n.\u0275\u0275property("formControl",w.formControl)("id",w.id)("formlyAttributes",w.field)("tabIndex",w.to.tabindex)("indeterminate",w.to.indeterminate&&null===w.formControl.value)("color",w.to.color)("labelPosition",w.to.align||w.to.labelPosition),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",w.to.label," "),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",w.to.required&&!0!==w.to.hideRequiredMarker))},directives:[xi.oG,c.JJ,c.oH,At,y.NgIf],encapsulation:2}),v})(),Jo=(()=>{class v{}return v.\u0275fac=function(o){return new(o||v)},v.\u0275mod=n.\u0275\u0275defineNgModule({type:v}),v.\u0275inj=n.\u0275\u0275defineInjector({imports:[[y.CommonModule,c.UX,xi.p9,un,rr.forChild({types:[{name:"checkbox",component:Do,wrappers:["form-field"]}]})]]}),v})();function no(v,h){if(1&v){const o=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"mat-checkbox",1),n.\u0275\u0275listener("change",function(q){const Ve=n.\u0275\u0275restoreView(o).$implicit;return n.\u0275\u0275nextContext().onChange(Ve.value,q.checked)}),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()}if(2&v){const o=h.$implicit,w=h.index,q=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("id",q.id+"_"+w)("formlyAttributes",q.field)("tabIndex",q.to.tabindex)("color",q.to.color)("labelPosition",q.to.labelPosition)("checked",q.isChecked(o))("disabled",q.formControl.disabled||o.disabled),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",o.label," ")}}let bs=(()=>{class v extends en{constructor(){super(...arguments),this.defaultOptions={templateOptions:{hideFieldUnderline:!0,floatLabel:"always",options:[],color:"accent"}}}onChange(o,w){this.formControl.patchValue("array"===this.to.type?w?[...this.formControl.value||[],o]:[...this.formControl.value||[]].filter(q=>q!==o):Object.assign({},this.formControl.value,{[o]:w})),this.formControl.markAsTouched()}onContainerClick(){}isChecked(o){const w=this.formControl.value;return w&&("array"===this.to.type?-1!==w.indexOf(o.value):w[o.value])}}return v.\u0275fac=function(){let h;return function(w){return(h||(h=n.\u0275\u0275getInheritedFactory(v)))(w||v)}}(),v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["formly-field-mat-multicheckbox"]],viewQuery:function(o,w){if(1&o&&n.\u0275\u0275viewQuery(xi.oG,5),2&o){let q;n.\u0275\u0275queryRefresh(q=n.\u0275\u0275loadQuery())&&(w.checkboxes=q)}},hostVars:1,hostBindings:function(o,w){2&o&&n.\u0275\u0275hostProperty("id",w.id)},features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:6,consts:[[4,"ngFor","ngForOf"],[3,"id","formlyAttributes","tabIndex","color","labelPosition","checked","disabled","change"]],template:function(o,w){1&o&&(n.\u0275\u0275template(0,no,3,8,"ng-container",0),n.\u0275\u0275pipe(1,"async"),n.\u0275\u0275pipe(2,"formlySelectOptions")),2&o&&n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind1(1,1,n.\u0275\u0275pipeBind2(2,3,w.to.options,w.field)))},directives:[y.NgForOf,xi.oG,At],pipes:[y.AsyncPipe,Tr],encapsulation:2}),v})(),zs=(()=>{class v{}return v.\u0275fac=function(o){return new(o||v)},v.\u0275mod=n.\u0275\u0275defineNgModule({type:v}),v.\u0275inj=n.\u0275\u0275defineInjector({imports:[[y.CommonModule,c.UX,xi.p9,un,vi,rr.forChild({types:[{name:"multicheckbox",component:bs,wrappers:["form-field"]}]})]]}),v})();var ro=u(7371),Ui=u(207);function Yo(v,h){if(1&v){const o=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"mat-option",3),n.\u0275\u0275listener("click",function(){const re=n.\u0275\u0275restoreView(o).selectOptions;return n.\u0275\u0275nextContext().toggleSelectAll(re)}),n.\u0275\u0275element(1,"mat-pseudo-checkbox",4),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()}if(2&v){const o=h.selectOptions,w=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("state",w.getSelectAllState(o)),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",w.to.selectAllOption," ")}}const _a=function(v){return{selectOptions:v}};function Gs(v,h){if(1&v&&n.\u0275\u0275elementContainer(0,7),2&v){const o=n.\u0275\u0275nextContext().ngIf;n.\u0275\u0275nextContext();const w=n.\u0275\u0275reference(1);n.\u0275\u0275property("ngTemplateOutlet",w)("ngTemplateOutletContext",n.\u0275\u0275pureFunction1(2,_a,o))}}function ba(v,h){if(1&v&&(n.\u0275\u0275elementStart(0,"mat-option",12),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&v){const o=h.$implicit;n.\u0275\u0275property("value",o.value)("disabled",o.disabled),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",o.label," ")}}function wa(v,h){if(1&v&&(n.\u0275\u0275elementStart(0,"mat-optgroup",10),n.\u0275\u0275template(1,ba,2,3,"mat-option",11),n.\u0275\u0275elementEnd()),2&v){const o=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275property("label",o.label),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",o.group)}}function $s(v,h){if(1&v&&(n.\u0275\u0275elementStart(0,"mat-option",12),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&v){const o=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275property("value",o.value)("disabled",o.disabled),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(o.label)}}function Vs(v,h){if(1&v&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,wa,2,2,"mat-optgroup",8),n.\u0275\u0275template(2,$s,2,3,"mat-option",9),n.\u0275\u0275elementContainerEnd()),2&v){const o=h.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",o.group),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!o.group)}}function Hs(v,h){if(1&v&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,Gs,1,4,"ng-container",5),n.\u0275\u0275template(2,Vs,3,2,"ng-container",6),n.\u0275\u0275elementContainerEnd()),2&v){const o=h.ngIf,w=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",w.to.multiple&&w.to.selectAllOption),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",o)}}let Ks=(()=>{class v extends en{constructor(){super(...arguments),this.defaultOptions={templateOptions:{options:[],compareWith:(o,w)=>o===w}}}getSelectAllState(o){return this.empty||0===this.value.length?"":this.value.length!==this.getSelectAllValue(o).length?"indeterminate":"checked"}toggleSelectAll(o){const w=this.getSelectAllValue(o);this.formControl.setValue(this.value&&this.value.length===w.length?[]:w),this.formControl.markAsDirty()}change(o){this.to.change&&this.to.change(this.field,o)}_getAriaLabelledby(){return this.to.attributes&&this.to.attributes["aria-labelledby"]?this.to.attributes["aria-labelledby"]:this.formField&&this.formField._labelId?this.formField._labelId:void 0}_getAriaLabel(){return this.to.attributes?this.to.attributes["aria-label"]:void 0}getSelectAllValue(o){if(!this.selectAllValue||o!==this.selectAllValue.options){const w=[];o.forEach(q=>q.group?w.push(...q.group):w.push(q)),this.selectAllValue={options:o,value:w.filter(q=>!q.disabled).map(q=>q.value)}}return this.selectAllValue.value}}return v.\u0275fac=function(){let h;return function(w){return(h||(h=n.\u0275\u0275getInheritedFactory(v)))(w||v)}}(),v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["formly-field-mat-select"]],viewQuery:function(o,w){if(1&o&&n.\u0275\u0275viewQuery(ro.gD,7),2&o){let q;n.\u0275\u0275queryRefresh(q=n.\u0275\u0275loadQuery())&&(w.formFieldControl=q.first)}},features:[n.\u0275\u0275InheritDefinitionFeature],decls:6,vars:18,consts:[["selectAll",""],[3,"id","formControl","formlyAttributes","placeholder","tabIndex","required","compareWith","multiple","errorStateMatcher","aria-label","aria-labelledby","disableOptionCentering","selectionChange"],[4,"ngIf"],[3,"click"],[1,"mat-option-pseudo-checkbox",3,"state"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"label",4,"ngIf"],[3,"value","disabled",4,"ngIf"],[3,"label"],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"value","disabled"]],template:function(o,w){1&o&&(n.\u0275\u0275template(0,Yo,3,2,"ng-template",null,0,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementStart(2,"mat-select",1),n.\u0275\u0275listener("selectionChange",function(re){return w.change(re)}),n.\u0275\u0275template(3,Hs,3,2,"ng-container",2),n.\u0275\u0275pipe(4,"async"),n.\u0275\u0275pipe(5,"formlySelectOptions"),n.\u0275\u0275elementEnd()),2&o&&(n.\u0275\u0275advance(2),n.\u0275\u0275property("id",w.id)("formControl",w.formControl)("formlyAttributes",w.field)("placeholder",w.to.placeholder)("tabIndex",w.to.tabindex)("required",w.to.required)("compareWith",w.to.compareWith)("multiple",w.to.multiple)("errorStateMatcher",w.errorStateMatcher)("aria-label",w._getAriaLabel())("aria-labelledby",w._getAriaLabelledby())("disableOptionCentering",w.to.disableOptionCentering),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(4,13,n.\u0275\u0275pipeBind2(5,15,w.to.options,w.field))))},directives:[Ui.ey,Ui.nP,ro.gD,c.JJ,c.oH,At,c.Q7,y.NgIf,y.NgTemplateOutlet,y.NgForOf,Ui.Nv],pipes:[y.AsyncPipe,Tr],encapsulation:2}),v})(),Ca=(()=>{class v{}return v.\u0275fac=function(o){return new(o||v)},v.\u0275mod=n.\u0275\u0275defineNgModule({type:v}),v.\u0275inj=n.\u0275\u0275defineInjector({imports:[[y.CommonModule,c.UX,ro.LD,Ui.us,un,vi,rr.forChild({types:[{name:"select",component:Ks,wrappers:["form-field"]}]})]]}),v})(),Ws=(()=>{class v{}return v.\u0275fac=function(o){return new(o||v)},v.\u0275mod=n.\u0275\u0275defineNgModule({type:v}),v.\u0275inj=n.\u0275\u0275defineInjector({imports:[[un,tr,Oi,Qi,Jo,zs,Ca]]}),v})();var Ji=u(2298);const il=["datepickerToggle"];function No(v,h){if(1&v&&n.\u0275\u0275element(0,"mat-datepicker-toggle",4),2&v){const o=n.\u0275\u0275nextContext(),w=n.\u0275\u0275reference(4);n.\u0275\u0275property("disabled",o.to.disabled)("for",w)}}let xa=(()=>{class v extends en{constructor(o){super(),this.config=o,this.defaultOptions={templateOptions:{datepickerOptions:{startView:"month",datepickerTogglePosition:"suffix",dateInput:()=>{},dateChange:()=>{},monthSelected:()=>{},yearSelected:()=>{}}}}}ngAfterViewInit(){super.ngAfterViewInit(),this.config.getValidatorMessage("matDatepickerParse")&&J(this.field.formControl,"errors",({currentValue:o})=>{if(o.required&&o.matDatepickerParse){const w=Object.keys(o).sort(q=>"matDatepickerParse"===q?-1:0).reduce((q,re)=>Object.assign({},q,{[re]:o[re]}),{});this.field.formControl.___$errors=w}}),this.datepickerInput._formField=this.formField,setTimeout(()=>{switch(this.to.datepickerOptions.datepickerTogglePosition){case"suffix":this.to._matSuffix=this.datepickerToggle;break;case"prefix":this.to._matPrefix=this.datepickerToggle}this.options._markForCheck(this.field)})}ngOnDestroy(){this.fieldErrorsObserver&&this.fieldErrorsObserver()}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(Ce))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["formly-field-mat-datepicker"]],viewQuery:function(o,w){if(1&o&&(n.\u0275\u0275viewQuery(rn.Nt,7),n.\u0275\u0275viewQuery(Ji.hl,7),n.\u0275\u0275viewQuery(il,5)),2&o){let q;n.\u0275\u0275queryRefresh(q=n.\u0275\u0275loadQuery())&&(w.formFieldControl=q.first),n.\u0275\u0275queryRefresh(q=n.\u0275\u0275loadQuery())&&(w.datepickerInput=q.first),n.\u0275\u0275queryRefresh(q=n.\u0275\u0275loadQuery())&&(w.datepickerToggle=q.first)}},features:[n.\u0275\u0275InheritDefinitionFeature],decls:5,vars:20,consts:[["matInput","",3,"id","errorStateMatcher","formControl","matDatepicker","matDatepickerFilter","max","min","formlyAttributes","placeholder","tabindex","readonly","required","dateInput","dateChange"],["datepickerToggle",""],[3,"color","dateClass","disabled","opened","panelClass","startAt","startView","touchUi","monthSelected","yearSelected"],["picker",""],[3,"disabled","for"]],template:function(o,w){if(1&o){const q=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"input",0),n.\u0275\u0275listener("dateInput",function(Ve){return w.to.datepickerOptions.dateInput(w.field,Ve)})("dateChange",function(Ve){return w.to.datepickerOptions.dateChange(w.field,Ve)}),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(1,No,1,2,"ng-template",null,1,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementStart(3,"mat-datepicker",2,3),n.\u0275\u0275listener("monthSelected",function(Ve){n.\u0275\u0275restoreView(q);const mt=n.\u0275\u0275reference(4);return w.to.datepickerOptions.monthSelected(w.field,Ve,mt)})("yearSelected",function(Ve){n.\u0275\u0275restoreView(q);const mt=n.\u0275\u0275reference(4);return w.to.datepickerOptions.yearSelected(w.field,Ve,mt)}),n.\u0275\u0275elementEnd()}if(2&o){const q=n.\u0275\u0275reference(4);n.\u0275\u0275property("id",w.id)("errorStateMatcher",w.errorStateMatcher)("formControl",w.formControl)("matDatepicker",q)("matDatepickerFilter",w.to.datepickerOptions.filter)("max",w.to.datepickerOptions.max)("min",w.to.datepickerOptions.min)("formlyAttributes",w.field)("placeholder",w.to.placeholder)("tabindex",w.to.tabindex)("readonly",w.to.readonly)("required",w.to.required),n.\u0275\u0275advance(3),n.\u0275\u0275property("color",w.to.color)("dateClass",w.to.datepickerOptions.dateClass)("disabled",w.to.datepickerOptions.disabled)("opened",w.to.datepickerOptions.opened)("panelClass",w.to.datepickerOptions.panelClass)("startAt",w.to.datepickerOptions.startAt)("startView",w.to.datepickerOptions.startView)("touchUi",w.to.datepickerOptions.touchUi)}},directives:[rn.Nt,c.Fj,Ji.hl,c.JJ,c.oH,At,c.Q7,Ji.nW,Ji.Mq],encapsulation:2}),v})(),Xs=(()=>{class v{}return v.\u0275fac=function(o){return new(o||v)},v.\u0275mod=n.\u0275\u0275defineNgModule({type:v}),v.\u0275inj=n.\u0275\u0275defineInjector({imports:[[y.CommonModule,c.UX,rn.c,Ji.FA,un,rr.forChild({types:[{name:"datepicker",component:xa,wrappers:["form-field"]}]})]]}),v})();var vr=u(8193),$i=u(5330),jr=u(6317),Mi=u(6562),Rr=u(5276),yi=u(4567),wo=u(2727),Kr=u(1484),go=u(4522),ws=u(6722),Zo=u(8550),zi=u(8714),ol=u(4865),Co=u(6517),Vi=u(9263),Qs=u(760);function Cs(v,h){if(1&v&&(n.\u0275\u0275elementStart(0,"option",3),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&v){const o=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngValue",null),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(o.to.placeholder)}}function Ea(v,h){if(1&v&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"option",7),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&v){const o=h.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngValue",o.value)("disabled",o.disabled),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(o.label)}}function xs(v,h){if(1&v&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,Ea,3,3,"ng-container",6),n.\u0275\u0275elementContainerEnd()),2&v){const o=n.\u0275\u0275nextContext().ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",o)}}function Es(v,h){if(1&v&&(n.\u0275\u0275elementStart(0,"option",7),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&v){const o=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275property("ngValue",o.value)("disabled",o.disabled),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(o.label)}}function ji(v,h){if(1&v&&(n.\u0275\u0275elementStart(0,"option",7),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&v){const o=h.$implicit;n.\u0275\u0275property("ngValue",o.value)("disabled",o.disabled),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",o.label," ")}}function sl(v,h){if(1&v&&(n.\u0275\u0275elementStart(0,"optgroup",10),n.\u0275\u0275template(1,ji,2,3,"option",11),n.\u0275\u0275elementEnd()),2&v){const o=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275property("label",o.label),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",o.group)}}function al(v,h){if(1&v&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,Es,2,3,"option",8),n.\u0275\u0275template(2,sl,2,2,"ng-template",null,9,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementContainerEnd()),2&v){const o=h.$implicit,w=n.\u0275\u0275reference(3);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!o.group)("ngIfElse",w)}}function Sa(v,h){if(1&v&&n.\u0275\u0275template(0,al,4,2,"ng-container",6),2&v){const o=n.\u0275\u0275nextContext().ngIf;n.\u0275\u0275property("ngForOf",o)}}function Aa(v,h){if(1&v&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,xs,2,1,"ng-container",4),n.\u0275\u0275template(2,Sa,1,1,"ng-template",null,5,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementContainerEnd()),2&v){const o=n.\u0275\u0275reference(3),w=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",w.to._flatOptions)("ngIfElse",o)}}let ll=(()=>{class v extends en{constructor(){super(...arguments),this.defaultOptions={templateOptions:{options:[]}}}}return v.\u0275fac=function(){let h;return function(w){return(h||(h=n.\u0275\u0275getInheritedFactory(v)))(w||v)}}(),v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["formly-field-mat-native-select"]],viewQuery:function(o,w){if(1&o&&n.\u0275\u0275viewQuery(rn.Nt,7),2&o){let q;n.\u0275\u0275queryRefresh(q=n.\u0275\u0275loadQuery())&&(w.formFieldControl=q.first)}},features:[n.\u0275\u0275InheritDefinitionFeature],decls:5,vars:13,consts:[["matNativeControl","",3,"id","readonly","required","errorStateMatcher","formControl","formlyAttributes"],[3,"ngValue",4,"ngIf"],[4,"ngIf"],[3,"ngValue"],[4,"ngIf","ngIfElse"],["grouplist",""],[4,"ngFor","ngForOf"],[3,"ngValue","disabled"],[3,"ngValue","disabled",4,"ngIf","ngIfElse"],["optgroup",""],[3,"label"],[3,"ngValue","disabled",4,"ngFor","ngForOf"]],template:function(o,w){1&o&&(n.\u0275\u0275elementStart(0,"select",0),n.\u0275\u0275template(1,Cs,2,2,"option",1),n.\u0275\u0275template(2,Aa,4,2,"ng-container",2),n.\u0275\u0275pipe(3,"async"),n.\u0275\u0275pipe(4,"formlySelectOptions"),n.\u0275\u0275elementEnd()),2&o&&(n.\u0275\u0275property("id",w.id)("readonly",w.to.readonly)("required",w.to.required)("errorStateMatcher",w.errorStateMatcher)("formControl",w.formControl)("formlyAttributes",w.field),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",w.to.placeholder),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(3,8,n.\u0275\u0275pipeBind2(4,10,w.to.options,w.field))))},directives:[rn.Nt,c.EJ,c.Q7,c.JJ,c.oH,At,y.NgIf,c.YN,c.Kr,y.NgForOf],pipes:[y.AsyncPipe,Tr],encapsulation:2}),v})(),ul=(()=>{class v{}return v.\u0275fac=function(o){return new(o||v)},v.\u0275mod=n.\u0275\u0275defineNgModule({type:v}),v.\u0275inj=n.\u0275\u0275defineInjector({imports:[[y.CommonModule,c.UX,rn.c,un,vi,rr.forChild({types:[{name:"native-select",component:ll,wrappers:["form-field"]}]})]]}),v})();var xo=u(4714);let es=(()=>{class v extends en{constructor(){super(...arguments),this.defaultOptions={templateOptions:{hideFieldUnderline:!0,floatLabel:"always",hideLabel:!0}}}onContainerClick(o){this.slideToggle.focus(),super.onContainerClick(o)}}return v.\u0275fac=function(){let h;return function(w){return(h||(h=n.\u0275\u0275getInheritedFactory(v)))(w||v)}}(),v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["formly-field-mat-toggle"]],viewQuery:function(o,w){if(1&o&&n.\u0275\u0275viewQuery(xo.Rr,5),2&o){let q;n.\u0275\u0275queryRefresh(q=n.\u0275\u0275loadQuery())&&(w.slideToggle=q.first)}},features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:7,consts:[[3,"id","formControl","formlyAttributes","color","tabIndex","required"]],template:function(o,w){1&o&&(n.\u0275\u0275elementStart(0,"mat-slide-toggle",0),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&o&&(n.\u0275\u0275property("id",w.id)("formControl",w.formControl)("formlyAttributes",w.field)("color",w.to.color)("tabIndex",w.to.tabindex)("required",w.to.required),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",w.to.label," "))},directives:[xo.Rr,xo.SA,c.JJ,c.oH,At,c.Q7],encapsulation:2}),v})(),cl=(()=>{class v{}return v.\u0275fac=function(o){return new(o||v)},v.\u0275mod=n.\u0275\u0275defineNgModule({type:v}),v.\u0275inj=n.\u0275\u0275defineInjector({imports:[[y.CommonModule,c.UX,xo.rP,un,rr.forChild({types:[{name:"toggle",component:es,wrappers:["form-field"]}]})]]}),v})();var ts=u(5682);let Pa=(()=>{class v extends en{constructor(){super(...arguments),this.defaultOptions={templateOptions:{hideFieldUnderline:!0,floatLabel:"always",thumbLabel:!1}}}onContainerClick(o){this.slider.focus(),super.onContainerClick(o)}}return v.\u0275fac=function(){let h;return function(w){return(h||(h=n.\u0275\u0275getInheritedFactory(v)))(w||v)}}(),v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["formly-field-mat-slider"]],viewQuery:function(o,w){if(1&o&&n.\u0275\u0275viewQuery(ts.pH,5),2&o){let q;n.\u0275\u0275queryRefresh(q=n.\u0275\u0275loadQuery())&&(w.slider=q.first)}},features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:11,consts:[[3,"id","formControl","formlyAttributes","tabIndex","color","thumbLabel","step","max","min"]],template:function(o,w){1&o&&n.\u0275\u0275element(0,"mat-slider",0),2&o&&(n.\u0275\u0275styleProp("width","100%"),n.\u0275\u0275property("id",w.id)("formControl",w.formControl)("formlyAttributes",w.field)("tabIndex",w.to.tabindex)("color",w.to.color)("thumbLabel",w.to.thumbLabel)("step",w.to.step)("max",w.to.max)("min",w.to.min))},directives:[ts.pH,c.JJ,c.oH,At],encapsulation:2}),v})(),io=(()=>{class v{}return v.\u0275fac=function(o){return new(o||v)},v.\u0275mod=n.\u0275\u0275defineNgModule({type:v}),v.\u0275inj=n.\u0275\u0275defineInjector({imports:[[y.CommonModule,c.UX,ts.KP,un,rr.forChild({types:[{name:"slider",component:Pa,wrappers:["form-field"]}]})]]}),v})();var jo=u(5383);function Ia(v,h){if(1&v&&(n.\u0275\u0275elementStart(0,"mat-option",11),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&v){const o=h.$implicit;n.\u0275\u0275property("value",o),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(o)}}function Ta(v,h){if(1&v&&(n.\u0275\u0275elementStart(0,"mat-option",4),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&v){const o=h.$implicit;n.\u0275\u0275property("value",o),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",o.label," ")}}function Bo(v,h){if(1&v){const o=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"a",1),n.\u0275\u0275listener("click",function(){const re=n.\u0275\u0275restoreView(o).$implicit;return n.\u0275\u0275nextContext().onItemSelect(re.key)}),n.\u0275\u0275elementStart(1,"span",2),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()}if(2&v){const o=h.$implicit;n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(o.value)}}function dl(v,h){if(1&v){const o=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",3),n.\u0275\u0275element(1,"formly-field",4),n.\u0275\u0275elementStart(2,"div",5),n.\u0275\u0275elementStart(3,"button",6),n.\u0275\u0275listener("click",function(){const re=n.\u0275\u0275restoreView(o).index;return n.\u0275\u0275nextContext().remove(re)}),n.\u0275\u0275text(4,"Remove"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()}if(2&v){const o=h.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("field",o)}}class lr{constructor(h){h&&(this.type=h.type,this.key=h.key,this.value=null!=h.value?h.value:void 0,h.options&&"object"==typeof h.options&&(this.options=new ns(h.options)),h.rest&&"object"==typeof h.rest&&(this.rest=new vr.kr(h.rest)),h.datasourceBinding&&"object"==typeof h.datasourceBinding&&(this.datasourceBinding=new qe.ContentBinding(h.datasourceBinding)),h.datasourceOptions&&"object"==typeof h.datasourceOptions&&(this.datasourceOptions=new vr.CD(h.datasourceOptions)))}}class ns{constructor(h){h&&(this.label=h.label)}}class fl{constructor(h){h&&(this.valuesMapping=h.valuesMapping)}}let Jr=(()=>{class v{constructor(o,w,q,re,Ve){this.urlGeneratorService=o,this.datasourceApi=w,this.tokenizerService=q,this.datasourceContentHandler=re,this.panelResolver=Ve}buildFieldConfig(o,w){return(0,He.of)(o).pipe((0,G.w)(q=>(0,$i.s)(()=>!!q.options,this.buildTemplateOptions(q,w).pipe((0,Se.U)(re=>[q,re])),(0,He.of)([q,{}]))),(0,Se.U)(([q,re])=>({key:"value",type:q.type,templateOptions:re})))}buildTemplateOptions(o,w){return(0,He.of)(o).pipe((0,Se.U)(q=>[q,{label:q.options.label,multiple:!!q.datasourceOptions&&q.datasourceOptions.multiple,options:[]}]),(0,G.w)(([q,re])=>(0,$i.s)(()=>this.hasDataOptions(q),this.buildDataOptions(q,w).pipe((0,Se.U)(Ve=>[re,Ve])),(0,He.of)([re,[]]))),(0,Se.U)(([q,re])=>({...q,options:re})))}buildDataOptions(o,w){return(0,He.of)(o).pipe((0,G.w)(q=>{if((q.rest||q.datasourceBinding&&q.datasourceBinding.id&&""!==q.datasourceBinding.id)&&"autocomplete"!==q.type){if(q.datasourceBinding){const re=w.has("panes")?w.get("panes").find(Ve=>Ve.name===q.datasourceBinding.id):void 0;return this.panelResolver.dataPanes(w.get("panes")).pipe((0,G.w)(Ve=>re?this.datasourceContentHandler.fetchDynamicData(re.settings,new Map([...w,["dataPanes",Ve]])):(0,He.of)([])),(0,Se.U)(Ve=>[q,Ve.results]))}return this.buildRestDataOptions(q).pipe((0,Se.U)(re=>[q,re]))}return(0,He.of)([q,[]])}),(0,Se.U)(([q,re])=>[q,q.datasourceOptions&&""!==q.datasourceOptions.query?(0,yi.JSONPath)({path:q.datasourceOptions.query,json:re}):re]),(0,G.w)(([q,re])=>this.mapDataOptions(q,re)))}buildRestDataOptions(o){return(0,He.of)(o).pipe((0,G.w)(w=>this.urlGeneratorService.getUrl(w.rest.url,w.rest.params,new Map([]))),(0,G.w)(w=>this.datasourceApi.getData(`${w}`)))}mapDataOptions(o,w){return(0,He.of)([o,w]).pipe((0,Se.U)(([q,re])=>[q,re,re?re.map(Ve=>this.tokenizerService.generateGenericTokens(Ve)):[]]),(0,Se.U)(([q,re,Ve])=>Ve.map(mt=>this.mapDataItem(q,mt))))}mapDataItem(o,w){return{value:this.tokenizerService.replaceTokens(`${o.datasourceOptions.valueMapping}`,w),label:this.tokenizerService.replaceTokens(`${o.datasourceOptions.labelMapping}`,w),display:this.tokenizerService.replaceTokens(`${o.datasourceOptions.labelMapping}`,w)}}hasDataOptions(o){return!!o.rest&&o.rest.url&&""!==o.rest.url.trim()||o.datasourceBinding&&o.datasourceBinding.id&&""!==o.datasourceBinding.id}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275inject(wo.o),n.\u0275\u0275inject(vr.Bc),n.\u0275\u0275inject(Ge.G),n.\u0275\u0275inject(le.i9),n.\u0275\u0275inject(le.Si))},v.\u0275prov=n.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac,providedIn:"root"}),v})(),_r=(()=>{class v{constructor(o,w,q,re){this.attributeSerializer=o,this.formlyHandlerHelper=w,this.datasourceHandler=q,this.dpm=re}handleFile(o){return(0,He.of)([])}handlesType(o){return!1}implementsRendererOverride(){return!1}hasRendererOverride(o){return(0,He.of)(!1)}isDynamic(o){return!1}isData(o){return!1}getBindings(o,w,q){return"pane"===w?this.toObject(o).pipe((0,G.w)(re=>(0,$i.s)(()=>re.datasourceBinding&&re.datasourceBinding.id&&null!==re.datasourceBinding.id,(0,He.of)([re.datasourceBinding]),(0,He.of)([])))):(0,He.of)([])}fetchDynamicData(o,w){return(0,He.of)(new vr.qz)}buildDynamicItems(o,w){return(0,He.of)([])}toObject(o){return(0,He.of)(new lr(this.attributeSerializer.deserializeAsObject(o)))}buildSettings(o){return this.attributeSerializer.serialize(o,"root").attributes}buildFieldConfig(o,w){return this.toObject(o).pipe((0,G.w)(q=>this.formlyHandlerHelper.buildFieldConfig(q,w)))}stateDefinition(o){return(0,He.of)({autocomplete:{input:""},value:void 0})}editorOptions(o){return(0,He.of)(new qe.ContentPluginEditorOptions)}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275inject(Rr.AttributeSerializerService),n.\u0275\u0275inject(Jr),n.\u0275\u0275inject(le.i9),n.\u0275\u0275inject(vr.Ar))},v.\u0275prov=n.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac}),v})(),ti=(()=>{class v{constructor(o,w,q,re,Ve){this.data=o,this.dialogRef=w,this.fb=q,this.handler=re,this.attributeSerializer=Ve,this.rest=vr.c_,this.datasourceOptions=vr.Ef,this.bindableOptions=[],this.formGroup=this.fb.group({type:this.fb.control("",[c.kI.required]),key:this.fb.control("",[c.kI.required]),value:this.fb.control(""),options:this.fb.group({label:this.fb.control("")}),rest:this.fb.control(""),datasourceOptions:this.fb.control(""),datasourceBinding:this.fb.group({id:this.fb.control(""),type:this.fb.control("pane")})})}get paneGroup(){return this.data.panelFormGroup.get("panes").at(this.data.paneIndex)}ngOnInit(){this.handler.toObject(this.data.pane.settings).subscribe(o=>{this.formGroup.get("type").setValue(o.type),this.formGroup.get("key").setValue(o.key),this.formGroup.get("value").setValue(o.value),this.formGroup.get("options").setValue(o.options?o.options:{label:""}),this.rest=o.rest?new vr.kr({...o.rest,params:[]}):vr.c_,this.datasourceOptions=o.datasourceOptions?o.datasourceOptions:vr.Ef,this.formGroup.get("datasourceBinding").get("id").setValue(o.datasourceBinding&&o.datasourceBinding.id&&null!==o.datasourceBinding.id?o.datasourceBinding.id:""),setTimeout(()=>this.rest=o.rest?o.rest:vr.c_)}),this.bindableOptions=this.data.panelFormGroup.get("panes").controls.reduce((o,w)=>w.get("name").value?[...o,w.get("name").value]:[...o],[])}submit(){console.log(this.formGroup.value);const o=new lr(this.formGroup.value);console.log(o),this.paneGroup.get("name").setValue(o.key),this.paneGroup.get("label").setValue(o.key),this.paneGroup.get("settings").clear(),this.handler.buildSettings(o).map(q=>this.attributeSerializer.convertToGroup(q)).forEach(q=>this.paneGroup.get("settings").push(q)),this.dialogRef.close()}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(Kr.WI),n.\u0275\u0275directiveInject(Kr.so),n.\u0275\u0275directiveInject(c.qu),n.\u0275\u0275directiveInject(_r),n.\u0275\u0275directiveInject(Rr.AttributeSerializerService))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["classifieds-formly-field-editor"]],inputs:{bindableOptions:"bindableOptions"},decls:21,vars:3,consts:[[3,"formGroup","ngSubmit"],["fxLayout","column"],["matInput","","placeholder","Key","formControlName","key","required",""],["formGroupName","options"],["matInput","","placeholder","label","formControlName","label"],["matInput","","formControlName","value"],["formGroupName","datasourceBinding"],["required","","formControlName","id"],[3,"value",4,"ngFor","ngForOf"],["formControlName","datasourceOptions",3,"datasourceOptions"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close",""],[3,"value"]],template:function(o,w){1&o&&(n.\u0275\u0275elementStart(0,"form",0),n.\u0275\u0275listener("ngSubmit",function(){return w.submit()}),n.\u0275\u0275elementStart(1,"mat-dialog-content",1),n.\u0275\u0275elementStart(2,"div"),n.\u0275\u0275elementStart(3,"mat-form-field"),n.\u0275\u0275element(4,"input",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"mat-form-field",3),n.\u0275\u0275element(6,"input",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(7,"div"),n.\u0275\u0275elementStart(8,"mat-form-field"),n.\u0275\u0275elementStart(9,"mat-label"),n.\u0275\u0275text(10,"Value"),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(11,"input",5),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(12,"mat-form-field",6),n.\u0275\u0275elementStart(13,"mat-label"),n.\u0275\u0275text(14,"Datasource"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(15,"mat-select",7),n.\u0275\u0275template(16,Ia,2,2,"mat-option",8),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(17,"classifieds-ui-datasource-options",9),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(18,"mat-dialog-actions"),n.\u0275\u0275elementStart(19,"button",10),n.\u0275\u0275text(20,"Save"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&o&&(n.\u0275\u0275property("formGroup",w.formGroup),n.\u0275\u0275advance(16),n.\u0275\u0275property("ngForOf",w.bindableOptions),n.\u0275\u0275advance(1),n.\u0275\u0275property("datasourceOptions",w.datasourceOptions))},directives:[Ln.KE,ro.gD,Ui.ey,vr.wL,go.lW,c._Y,c.JL,c.sg,Kr.xY,ws.xw,rn.Nt,c.Fj,c.JJ,c.u,c.Q7,c.x0,Ln.hX,y.NgForOf,Kr.H8,Kr.ZT],styles:[""]}),v})(),Eo=(()=>{class v extends en{ngOnInit(){super.ngOnInit(),this.filter=this.formControl.valueChanges.pipe((0,dr.O)(""),(0,G.w)(o=>this.to.filter({term:o,field:this.field})))}ngAfterViewInit(){super.ngAfterViewInit(),this.autocomplete._formField=this.formField}displayAuto(o){return o&&null!==o?o.label:""}}return v.\u0275fac=function(){let h;return function(w){return(h||(h=n.\u0275\u0275getInheritedFactory(v)))(w||v)}}(),v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["classifieds-formly-autocomplete"]],viewQuery:function(o,w){if(1&o&&(n.\u0275\u0275viewQuery(rn.Nt,5),n.\u0275\u0275viewQuery(Zo.ZL,5)),2&o){let q;n.\u0275\u0275queryRefresh(q=n.\u0275\u0275loadQuery())&&(w.formFieldControl=q.first),n.\u0275\u0275queryRefresh(q=n.\u0275\u0275loadQuery())&&(w.autocomplete=q.first)}},features:[n.\u0275\u0275InheritDefinitionFeature],decls:5,vars:9,consts:[["matInput","",3,"matAutocomplete","formControl","formlyAttributes","placeholder","errorStateMatcher"],[3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(o,w){if(1&o&&(n.\u0275\u0275element(0,"input",0),n.\u0275\u0275elementStart(1,"mat-autocomplete",1,2),n.\u0275\u0275template(3,Ta,2,2,"mat-option",3),n.\u0275\u0275pipe(4,"async"),n.\u0275\u0275elementEnd()),2&o){const q=n.\u0275\u0275reference(2);n.\u0275\u0275property("matAutocomplete",q)("formControl",w.formControl)("formlyAttributes",w.field)("placeholder",w.to.placeholder)("errorStateMatcher",w.errorStateMatcher),n.\u0275\u0275advance(1),n.\u0275\u0275property("displayWith",w.displayAuto),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind1(4,7,w.filter))}},directives:[Zo.XC,Ui.ey,rn.Nt,Zo.ZL,c.Fj,c.JJ,c.oH,At,y.NgForOf],pipes:[y.AsyncPipe],encapsulation:2}),v})(),vo=(()=>{class v{constructor(o,w,q,re,Ve,mt,Qt,It,gn){this.fb=o,this.attributeSerializer=w,this.handler=q,this.formlyHandlerHelper=re,this.urlGeneratorService=Ve,this.datasourceApi=mt,this.datasourceHandler=Qt,this.panelResolver=It,this.tokenizerService=gn,this.contexts=[],this.searchChange=new n.EventEmitter,this.valueChange=new n.EventEmitter,this.settingsFormArray=this.fb.array([]),this.proxyGroup=this.fb.group({}),this.init$=new Xn.x,this.afterViewInit$=new Xn.x,this.resolvedContext$=new jr.X(void 0),this.settings$=new jr.X([]),this.panes$=new jr.X([]),this.originPanes$=new jr.X([]),this.bridgeSub=this.proxyGroup.valueChanges.pipe((0,xn.b)(500)).subscribe(Bn=>{this.valueChange.emit(Bn.value),this.settingsFormArray.clear();const Hn=this.attributeSerializer.convertToGroup(this.attributeSerializer.serialize(Bn.value,"value"));this.settingsFormArray.push(Hn)}),this.renderContentSub=(0,Mi.a)([this.settings$,this.resolvedContext$,this.afterViewInit$]).pipe((0,G.w)(([Bn,Hn])=>this.handler.toObject(Bn)),(0,G.w)(Bn=>this.resolveContexts().pipe((0,Se.U)(Hn=>[Bn,Hn])))).subscribe(([Bn,Hn])=>{if(void 0!==Hn&&(this.tokens=Hn),Bn.value&&null!==Bn.value&&""!==Bn.value){this.model={value:this.replaceTokens(Bn.value)};const Pr=this.tokenizerService.discoverTokens(this.model.value,!0);0!==Pr.length&&(this.model={value:this.tokenizerService.replaceTokens(Bn.value,new Map(Array.from(Pr).map(Vr=>[Vr,""])))})}else this.model={}}),this.settingsSub=(0,Mi.a)([this.settings$,this.panes$,this.originPanes$,this.init$]).pipe((0,Se.U)(([Bn,Hn,Pr])=>({settings:Bn,metadata:new Map([["panes",[...Hn&&Array.isArray(Hn)?Hn:[],...Pr&&Array.isArray(Pr)?Pr:[]]],["contexts",this.contexts]])})),(0,G.w)(({settings:Bn,metadata:Hn})=>this.handler.buildFieldConfig(Bn,Hn).pipe((0,G.w)(Pr=>this.handler.toObject(Bn).pipe((0,Se.U)(Vr=>[Pr,Vr]))),(0,Se.U)(([Pr,Vr])=>[{...Pr,hooks:{afterViewInit:pi=>{this.formlyHookAfterViewInit(pi)}}},Vr]),(0,Se.U)(([Pr,Vr])=>[{...Pr,templateOptions:{...Pr.templateOptions,..."autocomplete"===Vr.type?{filter:this.makeFilterFunction({i:Vr,metadata:Hn})}:{},change:(pi,Ti)=>{}}},Vr]))),(0,ue.b)(([Bn,Hn])=>{this.fields=[{...Bn}]})).subscribe(),this.onTouched=()=>{},this.fields=[],this.model={}}set resolvedContext(o){this.resolvedContext$.next(o)}set settings(o){this.settings$.next(o)}set panes(o){this.panes$.next(o)}set originPanes(o){this.originPanes$.next(o)}ngOnInit(){this.init$.next(void 0)}ngAfterViewInit(){this.afterViewInit$.next(void 0)}writeValue(o){o&&setTimeout(()=>this.settingsFormArray.setValue(o,{emitEvent:!1}))}registerOnChange(o){this.settingsFormArray.valueChanges.subscribe(o)}registerOnTouched(o){this.onTouched=o}setDisabledState(o){o?this.settingsFormArray.disable():this.settingsFormArray.enable()}validate(o){return null}formlyHookAfterViewInit(o){"autocomplete"===o.type&&o._componentRefs.find(q=>q.instance instanceof Eo).instance.formControl.valueChanges.pipe((0,xn.b)(1e3),(0,Cn.x)(),(0,ue.b)(q=>this.searchChange.emit(q))).subscribe()}makeFilterFunction({i:o,metadata:w}){const q=w.get("panes").find(re=>re.name===o.datasourceBinding.id);return({term:re})=>(0,He.of)([]).pipe((0,G.w)(mt=>this.searchChange.pipe((0,Qn.h)(Qt=>Qt===re))),(0,G.w)(()=>(0,$i.s)(()=>!!o.datasourceBinding,o.datasourceBinding?this.panelResolver.dataPanes(w.get("panes")).pipe((0,G.w)(mt=>q?this.datasourceHandler.fetchDynamicData(q.settings,new Map([...w,["dataPanes",mt],["inputparams",new Map([["term",new zi.dO({flags:[],mapping:new zi.vs({value:re,type:"static",testValue:re,context:void 0})})]])]])):(0,He.of)([])),(0,Se.U)(mt=>mt.results)):(0,He.of)([]),o.datasourceBinding?(0,He.of)([]):this.urlGeneratorService.getUrl(o.rest.url,o.rest.params,new Map([["contexts",this.contexts]])).pipe((0,G.w)(mt=>this.datasourceApi.getData(`${mt}`))))),(0,Se.U)(mt=>o.datasourceOptions&&""!==o.datasourceOptions.query?(0,yi.JSONPath)({path:o.datasourceOptions.query,json:mt}):mt),(0,G.w)(mt=>this.formlyHandlerHelper.mapDataOptions(o,mt)))}replaceTokens(o){return void 0!==this.tokens&&this.tokens.forEach((w,q)=>{o=o.split(`[${q}]`).join(`${w}`)}),o}resolveContexts(){return new ve.y(o=>{let w=new Map;if(this.resolvedContext$.value)for(const q in this.resolvedContext$.value)w=new Map([...w,...this.tokenizerService.generateGenericTokens(this.resolvedContext$.value[q],"_root"===q?"":q)]);o.next(w),o.complete()})}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(c.qu),n.\u0275\u0275directiveInject(Rr.AttributeSerializerService),n.\u0275\u0275directiveInject(_r),n.\u0275\u0275directiveInject(Jr),n.\u0275\u0275directiveInject(wo.o),n.\u0275\u0275directiveInject(vr.Bc),n.\u0275\u0275directiveInject(le.i9),n.\u0275\u0275directiveInject(le.Si),n.\u0275\u0275directiveInject(Ge.G))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["classifieds-ui-formly-pane-field"]],inputs:{contexts:"contexts",tokens:"tokens",resolvedContext:"resolvedContext",settings:"settings",panes:"panes",originPanes:"originPanes"},outputs:{searchChange:"searchChange",valueChange:"valueChange"},features:[n.\u0275\u0275ProvidersFeature([{provide:c.JU,useExisting:(0,n.forwardRef)(()=>v),multi:!0},{provide:c.Cf,useExisting:(0,n.forwardRef)(()=>v),multi:!0}])],decls:2,vars:4,consts:[[3,"formGroup"],[3,"form","fields","model"]],template:function(o,w){1&o&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275element(1,"formly-form",1),n.\u0275\u0275elementEnd()),2&o&&(n.\u0275\u0275property("formGroup",w.proxyGroup),n.\u0275\u0275advance(1),n.\u0275\u0275property("form",w.proxyGroup)("fields",w.fields)("model",w.model))},directives:[St,c.JL,c.sg],styles:[""]}),v})(),Ra=(()=>{class v{constructor(o,w,q,re){this.fb=o,this.handler=w,this.attributeSerializer=q,this.controlContainer=re,this.settings=[],this.contexts=[],this.panes=[],this.originPanes=[],this.appearance="legacy",this.resolvedContext={},this.state={},this.stateChange=new n.EventEmitter,this.fields=[],this.model={}}ngOnInit(){this.handler.toObject(this.settings).subscribe(o=>{this.fields=[{key:o.key,type:o.type}]})}onSearchChange(o){this.input=o,this.state={value:this.value,autocomplete:{input:o}},this.stateChange.emit({value:this.value,autocomplete:{input:o}})}onValueChange(o){this.value=o,this.state={value:o,autocomplete:{input:this.input}},this.stateChange.emit({value:o,autocomplete:{input:this.input}})}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(c.qu),n.\u0275\u0275directiveInject(_r),n.\u0275\u0275directiveInject(Rr.AttributeSerializerService),n.\u0275\u0275directiveInject(c.gN,8))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["classifieds-formly-field-renderer"]],inputs:{settings:"settings",contexts:"contexts",panes:"panes",originPanes:"originPanes",appearance:"appearance",name:"name",label:"label",displayType:"displayType",resolvedContext:"resolvedContext",state:"state",tokens:"tokens"},outputs:{stateChange:"stateChange"},decls:2,vars:7,consts:[[3,"formGroup"],["formControlName","settings",3,"settings","contexts","panes","originPanes","resolvedContext","tokens","searchChange","valueChange"]],template:function(o,w){1&o&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275elementStart(1,"classifieds-ui-formly-pane-field",1),n.\u0275\u0275listener("searchChange",function(re){return w.onSearchChange(re)})("valueChange",function(re){return w.onValueChange(re)}),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&o&&(n.\u0275\u0275property("formGroup",w.controlContainer.control),n.\u0275\u0275advance(1),n.\u0275\u0275property("settings",w.settings)("contexts",w.contexts)("panes",w.panes)("originPanes",w.originPanes)("resolvedContext",w.resolvedContext)("tokens",w.tokens))},directives:[vo,c.JL,c.sg,c.JJ,c.u],styles:[""]}),v})(),rs=(()=>{class v{constructor(o,w,q,re,Ve){this.bottomSheetRef=o,this.handler=w,this.attributeSerializer=q,this.fb=re,this.dialog=Ve,this.contexts=[],this.fields$=new jr.X(new Map([["input","Input"],["textarea","Textarea"],["radio","Radio"],["checkbox","Checkbox"],["select","Select"],["native-select","Native Select"],["datepicker","Date picker"],["toggle","Toggle"],["slider","Slider"],["autocomplete","Autocomplete"]]))}ngOnInit(){}onItemSelect(o){const w=new lr({type:o,key:""});this.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:"formly_field",name:new c.NI(""),label:new c.NI(""),rule:new c.NI(""),settings:this.fb.array(this.handler.buildSettings(w).map(mt=>this.attributeSerializer.convertToGroup(mt)))}));const q=this.panelFormGroup.get("panes"),re=q.length-1,Ve=new le.X6(q.at(re).value);this.dialog.open(ti,{data:{panelFormGroup:this.panelFormGroup,pane:Ve,paneIndex:re,contexts:[]}}),this.bottomSheetRef.dismiss()}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(ol.oL),n.\u0275\u0275directiveInject(_r),n.\u0275\u0275directiveInject(Rr.AttributeSerializerService),n.\u0275\u0275directiveInject(c.qu),n.\u0275\u0275directiveInject(Kr.uw))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["classifieds-formly-field-selector"]],inputs:{panelFormGroup:"panelFormGroup",contexts:"contexts"},decls:4,vars:5,consts:[["mat-list-item","","mat-list-item","",3,"click",4,"ngFor","ngForOf"],["mat-list-item","","mat-list-item","",3,"click"],["mat-line",""]],template:function(o,w){1&o&&(n.\u0275\u0275elementStart(0,"mat-nav-list"),n.\u0275\u0275template(1,Bo,3,1,"a",0),n.\u0275\u0275pipe(2,"keyvalue"),n.\u0275\u0275pipe(3,"async"),n.\u0275\u0275elementEnd()),2&o&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind1(2,1,n.\u0275\u0275pipeBind1(3,3,w.fields$))))},directives:[Co.Hk,Co.Tg,y.NgForOf,Ui.X2],pipes:[y.KeyValuePipe,y.AsyncPipe],styles:[""]}),v})(),pl=(()=>{class v extends I{}return v.\u0275fac=function(){let h;return function(w){return(h||(h=n.\u0275\u0275getInheritedFactory(v)))(w||v)}}(),v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["classifieds-formly-repeat-section"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:4,vars:2,consts:[["class","row",4,"ngFor","ngForOf"],[2,"margin","30px 0"],["type","button",1,"btn","btn-primary",3,"click"],[1,"row"],[1,"col",3,"field"],[1,"col-sm-2","d-flex","align-items-center"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(o,w){1&o&&(n.\u0275\u0275template(0,dl,5,1,"div",0),n.\u0275\u0275elementStart(1,"div",1),n.\u0275\u0275elementStart(2,"button",2),n.\u0275\u0275listener("click",function(){return w.add()}),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&o&&(n.\u0275\u0275property("ngForOf",w.field.fieldGroup),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(w.to.addText))},directives:[tt,y.NgForOf],styles:[""]}),v})(),Lo=(()=>{class v{constructor(o,w,q,re,Ve,mt,Qt,It,gn,Bn,Hn,Pr,Vr,pi,Ti,Us){this.fb=o,this.cpm=w,this.formlyHandlerHelper=q,this.paneStateService=re,this.pageBuilderFacade=Ve,this.formStateConverter=mt,this.attributeSerializer=Qt,this.formService=It,this.formGroupConverter=gn,this.urlGeneratorService=Bn,this.datasourceApi=Hn,this.datasourceHandler=Pr,this.panelResolver=Vr,this.tokenizerService=pi,this.controlContainer=Us,this.originMappings=[],this.panes$=new jr.X([]),this.panel$=new jr.X(new le.s_),this.originPanes$=new jr.X([]),this.ancestory$=new jr.X([]),this.contexts$=new jr.X([]),this.resolvedContext$=new jr.X(void 0),this.settings$=new jr.X([]),this.init$=new Xn.x,this.fields=[],this.model={items:[]},this.proxyGroup=this.fb.group({}),this.panesSub=(0,Mi.a)([this.panes$,this.originPanes$]).pipe((0,G.w)(([zr,Yr])=>(0,Ye.D)(zr.filter(Zr=>"formly_field"===Zr.contentPlugin||"panel"===Zr.contentPlugin).map(Zr=>this.cpm.getPlugin(Zr.contentPlugin).pipe((0,Se.U)(hi=>({pane:Zr,plugin:hi,panes:zr,originPanes:Yr}))))).pipe((0,ht.d)([]))),(0,G.w)(zr=>(0,Ye.D)(zr.map(({pane:Yr,plugin:Zr,panes:hi,originPanes:wi})=>Zr.handler.toObject(Yr.settings).pipe((0,Se.U)(ci=>({pane:Yr,plugin:Zr,i:ci,panes:hi,originPanes:wi}))))).pipe((0,ht.d)([]))),(0,G.w)(zr=>(0,Ye.D)(zr.map(({pane:Yr,plugin:Zr,i:hi,panes:wi,originPanes:ci})=>"panel"===Yr.contentPlugin?(0,He.of)({pane:Yr,plugin:Zr,i:hi,panes:wi,originPanes:ci,f:{type:"panelpage",panelpage:hi}}):this.formlyHandlerHelper.buildFieldConfig(hi,new Map([["panes",[...wi&&Array.isArray(wi)?wi:[],...ci&&Array.isArray(ci)?ci:[]]],["contexts",this.contexts]])).pipe((0,Se.U)(ms=>({pane:Yr,plugin:Zr,i:hi,f:ms,panes:wi,originPanes:ci})),(0,X.q)(1)))).pipe((0,ht.d)([]),(0,X.q)(1))),(0,G.w)(zr=>(0,Mi.a)([this.panel$,this.ancestory$,this.contexts$]).pipe((0,Se.U)(([Yr,Zr,hi])=>({groups:zr,panel:Yr,ancestory:Zr,contexts:hi})))),(0,ue.b)(({groups:zr,panel:Yr,ancestory:Zr,contexts:hi})=>{this.fields=[{key:Yr.name&&""!==Yr.name?Yr.name:"items",type:"repeat",templateOptions:{addText:"Add another"},fieldArray:{fieldGroup:zr.map(({f:wi,i:ci,pane:ms,panes:gs,originPanes:Qo},Bu)=>({key:ci.key&&""!==ci.key?ci.key:ms.name&&""!==ms.name?ms.name:wi.key,wrappers:[...wi.wrappers?wi.wrappers:[],"imaginary-pane"],pane:ms,panelAncestory:Zr,indexPosition:Bu,fieldGroup:[{...wi,panelAncestory:Zr,indexPosition:Bu,templateOptions:{...wi.templateOptions,..."autocomplete"===ci.type?{filter:this.makeFilterFunction({i:ci,metadata:new Map([["panes",[...gs&&Array.isArray(gs)?gs:[],...Qo&&Array.isArray(Qo)?Qo:[]]],["contexts",hi]])})}:{}}}]}))},hooks:{onInit:wi=>wi.formControl.valueChanges.pipe((0,Cn.x)(),(0,ue.b)(ci=>console.log(ci)))}}]})).subscribe(),this.forwardStateToForm=(0,Mi.a)([this.pageBuilderFacade.getPageInfo$,this.panel$,this.ancestory$,this.init$]).pipe((0,Se.U)(([zr,Yr,Zr])=>({p:zr,panel:Yr,ancestory:Zr})),(0,G.w)(({p:zr,panel:Yr,ancestory:Zr})=>this.panelPageStateService.collection$.pipe((0,Vi.Ys)(this.paneStateService.selectById({id:zr.id})),(0,Se.U)(hi=>new le.sY(hi||{id:zr.id,panels:[]})),(0,ue.b)(hi=>{const wi="$."+Zr.map((gs,Qo)=>`${(Qo+1)%2==0?"panes":(0===Qo?"":"nestedPage.")+"panels"}[${gs}]`).join("."),ci=(0,yi.JSONPath)({path:wi,json:hi})[0];new le.Z8({id:"",title:"",name:"",layoutType:"",displayType:"",gridItems:[],layoutSetting:void 0,rowSettings:void 0,panels:[new le.s_({label:"",name:"",settings:void 0,stylePlugin:"",columnSetting:void 0,panes:Yr.panes})]}),this.rebuildPanel({panel:Yr,panelState:ci}).subscribe(gs=>{console.log("rebuilt panel",gs),this.formStateConverter.convertPanelToForm({panel:ci||new le.Cg,panel2:gs,ancestory:Zr}).subscribe(Qo=>{const Bu=this.controlContainer.control.get("panes");this.formGroupConverter.makeFormGroupFromPanel(gs,Qo).subscribe(zd=>{Bu.clear();const Sd=zd.get("panes"),Ad=Sd.length;for(let Wl=0;Wl<Ad;Wl++)Bu.push(Sd.at(Wl))})})})})))).subscribe(),this.populateDefaultValues=(0,Mi.a)([this.settings$.pipe((0,Se.U)(zr=>zr?new fl(this.attributeSerializer.deserializeAsObject(zr)):void 0)),this.resolvedContext$,this.panel$]).pipe((0,Se.U)(([zr,Yr,Zr])=>({s:zr,rc:Yr,p:Zr})),(0,Se.U)(({s:zr,rc:Yr,p:Zr})=>Yr&&zr&&zr.valuesMapping&&""!==zr.valuesMapping.trim()?{items:(0,yi.JSONPath)({path:`$.${zr.valuesMapping}.*`,json:Yr}),s:zr,p:Zr}:{items:[],p:Zr}),(0,ue.b)(({items:zr,p:Yr})=>{const Zr=zr.length,hi=[],wi=Yr.name&&""!==Yr.name?Yr.name:"items";for(let ci=0;ci<Zr;ci++){const ms={};Object.keys(zr[ci]).forEach(Qo=>ms[Qo]={value:zr[ci][Qo]}),hi.push(ms)}this.model={[wi]:hi}})).subscribe(),this.panelPageStateService=Ti.getEntityCollectionService("PanelPageState")}set settings(o){this.settings$.next(o)}set panes(o){this.panes$.next(o)}set panel(o){this.panel$.next(o)}set originPanes(o){this.originPanes$.next(o)}set ancestory(o){this.ancestory$.next(o)}set contexts(o){this.contexts$.next(o)}set resolvedContext(o){this.resolvedContext$.next(o)}ngOnInit(){this.init$.next(void 0)}makeFilterFunction({i:o,metadata:w}){const q=w.get("panes").find(re=>re.name===o.datasourceBinding.id);return({term:re})=>(0,He.of)([]).pipe((0,G.w)(()=>(0,$i.s)(()=>!!o.datasourceBinding,o.datasourceBinding?this.panelResolver.dataPanes(w.get("panes")).pipe((0,G.w)(mt=>q?this.datasourceHandler.fetchDynamicData(q.settings,new Map([...w,["dataPanes",mt],["inputparams",new Map([["term",new zi.dO({flags:[],mapping:new zi.vs({value:re,testValue:re,type:"static",context:void 0})})]])]])):(0,He.of)([])),(0,Se.U)(mt=>mt.results)):(0,He.of)([]),o.datasourceBinding?(0,He.of)([]):this.urlGeneratorService.getUrl(o.rest.url,o.rest.params,w).pipe((0,G.w)(mt=>this.datasourceApi.getData(`${mt}`))))),(0,Se.U)(mt=>o.datasourceOptions&&""!==o.datasourceOptions.query?(0,yi.JSONPath)({path:o.datasourceOptions.query,json:mt}):mt),(0,G.w)(mt=>this.formlyHandlerHelper.mapDataOptions(o,mt)))}rebuildPanel({panel:o,panelState:w}){return(0,Ye.D)(w?w.panes.map((q,re)=>"panel"===o.panes[re].contentPlugin?this.rebuildFromPanelPage({panelPage:new le.Z8(this.attributeSerializer.deserializeAsObject(o.panes[re].settings)),pane:o.panes[re],panelPageState:w&&w.panes[re]?w.panes[re].nestedPage:void 0}):(0,He.of)(o.panes[re])):[]).pipe((0,Se.U)(q=>new le.Z8({id:"",title:"",name:"",layoutType:"",displayType:"",gridItems:[],layoutSetting:void 0,rowSettings:void 0,panels:[new le.s_({label:o.label,name:o.name,settings:void 0,stylePlugin:o.stylePlugin,columnSetting:void 0,panes:q})]})),(0,Se.U)(q=>new le.s_({...o,panes:w?w.panes.map(()=>new le.X6({name:o.name,label:o.label,contentPlugin:"panel",nestedPage:q,settings:this.attributeSerializer.serialize(q,"root").attributes})):[]})),(0,ht.d)(new le.s_(o)))}rebuildFromPanelPage({panelPageState:o,panelPage:w,pane:q}){return(0,Ye.D)(w.panels.map((re,Ve)=>"formly_repeating"===re.stylePlugin?this.rebuildPanel({panel:re,panelState:o?o.panels[Ve]:void 0}):(0,He.of)(re))).pipe((0,Se.U)(re=>new le.X6({...q,nestedPage:new le.Z8({...w,panels:re.map(Ve=>new le.s_(Ve))})})),(0,ht.d)(new le.X6({...q,nestedPage:new le.Z8(w)})))}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(c.qu),n.\u0275\u0275directiveInject(qe.ContentPluginManager),n.\u0275\u0275directiveInject(Jr),n.\u0275\u0275directiveInject(le.ms),n.\u0275\u0275directiveInject(le.QK),n.\u0275\u0275directiveInject(le.fr),n.\u0275\u0275directiveInject(Rr.AttributeSerializerService),n.\u0275\u0275directiveInject(le.oL),n.\u0275\u0275directiveInject(le.YZ),n.\u0275\u0275directiveInject(wo.o),n.\u0275\u0275directiveInject(vr.Bc),n.\u0275\u0275directiveInject(le.i9),n.\u0275\u0275directiveInject(le.Si),n.\u0275\u0275directiveInject(Ge.G),n.\u0275\u0275directiveInject(Z.jn),n.\u0275\u0275directiveInject(c.gN,8))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["classifieds-formly-repeating-renderer"]],inputs:{settings:"settings",panes:"panes",panel:"panel",originPanes:"originPanes",ancestory:"ancestory",contexts:"contexts",resolvedContext:"resolvedContext",originMappings:"originMappings"},decls:2,vars:4,consts:[[3,"formGroup"],[3,"form","fields","model"]],template:function(o,w){1&o&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275element(1,"formly-form",1),n.\u0275\u0275elementEnd()),2&o&&(n.\u0275\u0275property("formGroup",w.proxyGroup),n.\u0275\u0275advance(1),n.\u0275\u0275property("form",w.proxyGroup)("fields",w.fields)("model",w.model))},directives:[St,c.JL,c.sg],styles:[""]}),v})(),Oa=(()=>{class v{constructor(o,w,q,re){this.data=o,this.dialogRef=w,this.fb=q,this.attributeSerializer=re,this.contexts=[],this.formGroup=this.fb.group({valuesMapping:this.fb.control("")})}ngOnInit(){}submit(){this.data.panelFormGroup.get("settings").clear(),this.attributeSerializer.serialize(this.formGroup.value,"root").attributes.forEach(o=>{console.log("formly repeating editor form"),console.log(this.attributeSerializer.convertToGroup(o)),this.data.panelFormGroup.get("settings").push(this.attributeSerializer.convertToGroup(o))})}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(Kr.WI),n.\u0275\u0275directiveInject(Kr.so),n.\u0275\u0275directiveInject(c.qu),n.\u0275\u0275directiveInject(Rr.AttributeSerializerService))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["classifieds-formly-repeating-editor"]],decls:8,vars:2,consts:[[3,"formGroup","ngSubmit"],["matInput","","formControlName","valuesMapping"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"]],template:function(o,w){1&o&&(n.\u0275\u0275elementStart(0,"form",0),n.\u0275\u0275listener("ngSubmit",function(){return w.submit()}),n.\u0275\u0275elementStart(1,"div"),n.\u0275\u0275elementStart(2,"mat-form-field"),n.\u0275\u0275elementStart(3,"mat-label"),n.\u0275\u0275text(4,"Values Mapping"),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(5,"input",1),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"button",2),n.\u0275\u0275text(7,"Save"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&o&&(n.\u0275\u0275property("formGroup",w.formGroup),n.\u0275\u0275advance(6),n.\u0275\u0275property("disabled",!w.formGroup.valid))},directives:[Ln.KE,go.lW,c._Y,c.JL,c.sg,Ln.hX,rn.Nt,c.Fj,c.JJ,c.u,Kr.ZT],styles:[""]}),v})(),So=(()=>{class v extends ce{constructor(o,w,q){super(),this.paneStateService=o,this.cpm=w,this.valueChange$=new Xn.x,this.valueChangeSub=this.valueChange$.pipe((0,xn.b)(1e3),(0,Se.U)(re=>({state:{value:re.value}})),(0,G.w)(({state:re})=>this.cpm.getPlugin(this.field.pane.contentPlugin).pipe((0,Se.U)(Ve=>({state:re,plugin:Ve})))),(0,G.w)(({state:re,plugin:Ve})=>this.paneStateService.mergeState({state:re,ancestory:this.panelStateAncestory,settings:this.field.pane.settings,plugin:Ve})),(0,ue.b)(({pageState:re})=>{this.panelPageStateService.upsert(re)})).subscribe(),this.panelPageStateService=q.getEntityCollectionService("PanelPageState")}get panelStateAncestory(){return[...this.field.panelAncestory,+this.field.parent.key,0,this.field.indexPosition]}ngOnInit(){this.formControl.valueChanges.subscribe(o=>{this.valueChange$.next(o)})}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(le.ms),n.\u0275\u0275directiveInject(qe.ContentPluginManager),n.\u0275\u0275directiveInject(Z.jn))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["classifieds-ui-formly-field-wrapper"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:0,consts:[["fieldComponent",""]],template:function(o,w){1&o&&n.\u0275\u0275elementContainer(0,null,0)},styles:[""]}),v})(),hl=(()=>{class v extends en{constructor(){super(...arguments),this.ancestoryWithSelf=[]}ngOnInit(){super.ngOnInit(),this.panelPage=this.field.panelpage,this.ancestoryWithSelf=[...this.field.panelAncestory,+this.field.parent.parent.key,0,this.field.indexPosition]}ngAfterViewInit(){super.ngAfterViewInit()}}return v.\u0275fac=function(){let h;return function(w){return(h||(h=n.\u0275\u0275getInheritedFactory(v)))(w||v)}}(),v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["classifieds-formly-panel-page"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:4,consts:[[3,"panelPage","nested","formControl","ancestory"]],template:function(o,w){1&o&&n.\u0275\u0275element(0,"classifieds-ui-panel-page",0),2&o&&n.\u0275\u0275property("panelPage",w.panelPage)("nested",!0)("formControl",w.formControl)("ancestory",w.ancestoryWithSelf)},directives:[jo.hT,c.JJ,c.oH],encapsulation:2}),v})(),ml=(()=>{class v{constructor(o,w,q){o.register((v=>new qe.ContentPlugin({id:"formly_field",title:"Formly Field",selectionComponent:rs,editorComponent:ti,renderComponent:Ra,handler:v}))(w)),q.register(new le.tA({id:"formly_repeating",name:"formly_repeating",title:"Formly Repeating",editorComponent:Oa,renderComponent:Lo}))}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275inject(qe.ContentPluginManager),n.\u0275\u0275inject(_r),n.\u0275\u0275inject(le.er))},v.\u0275mod=n.\u0275\u0275defineNgModule({type:v}),v.\u0275inj=n.\u0275\u0275defineInjector({providers:[_r],imports:[[y.CommonModule,c.UX,ze.MaterialModule,d.o9,rr.forChild({types:[{name:"autocomplete",component:Eo,wrappers:["form-field"]},{name:"repeat",component:pl},{name:"panelpage",component:hl}],wrappers:[{name:"imaginary-pane",component:So}]}),Ws,Xs,ul,cl,io,qe.ContentModule,Qs.cb,vr.zG,wo.Q,jo.sm]]}),v})();var is=u(9367);let Uo=(()=>{class v{constructor(o,w){this.fb=o,this.controlContainer=w,this.context$=new jr.X(void 0),this.formGroup=this.fb.group({value:this.fb.control("",[c.kI.required])}),this.stateCtrl=this.fb.control(""),this.stateCtrlSub=this.stateCtrl.valueChanges.pipe((0,xn.b)(250),(0,Cn.x)(),(0,Qn.h)(q=>{try{return JSON.parse(q),!0}catch{return!1}}),(0,Se.U)(q=>JSON.parse(q))).subscribe(q=>{console.log("write state"),console.log(q),this.formGroup.get("value").setValue(q)}),this.onTouched=()=>{}}set context(o){this.context$.next(o)}ngOnInit(){this.context$.subscribe(o=>{this.stateCtrl.setValue(o?JSON.stringify(o.data.value):"")})}writeValue(o){o&&this.formGroup.setValue(o,{emitEvent:!1})}registerOnChange(o){this.formGroup.valueChanges.subscribe(o)}registerOnTouched(o){this.onTouched=o}setDisabledState(o){o?this.formGroup.disable():this.formGroup.enable()}validate(o){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"source is invalid"}}}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(c.qu),n.\u0275\u0275directiveInject(c.gN))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["classifieds-ui-context-state-form"]],inputs:{context:"context"},features:[n.\u0275\u0275ProvidersFeature([{provide:c.JU,useExisting:(0,n.forwardRef)(()=>v),multi:!0},{provide:c.Cf,useExisting:(0,n.forwardRef)(()=>v),multi:!0}])],decls:2,vars:2,consts:[[3,"formGroup"],["cols","40","rows","20","required","",3,"formControl"]],template:function(o,w){1&o&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275element(1,"textarea",1),n.\u0275\u0275elementEnd()),2&o&&(n.\u0275\u0275property("formGroup",w.formGroup),n.\u0275\u0275advance(1),n.\u0275\u0275property("formControl",w.stateCtrl))},directives:[c.JL,c.sg,c.Fj,c.Q7,c.JJ,c.oH],styles:[""]}),v})(),Ma=(()=>{class v{constructor(o,w){this.fb=o,this.controlContainer=w}ngOnInit(){this.controlContainer.control.addControl("adaptor",this.fb.control("data",c.kI.required)),this.controlContainer.control.addControl("data",this.fb.control(""))}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(c.qu),n.\u0275\u0275directiveInject(c.gN))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["classifieds-ui-context-state-editor"]],viewQuery:function(o,w){if(1&o&&n.\u0275\u0275viewQuery(Uo,7),2&o){let q;n.\u0275\u0275queryRefresh(q=n.\u0275\u0275loadQuery())&&(w.contextStateFormComp=q.first)}},inputs:{context:"context"},decls:2,vars:2,consts:[[3,"formGroup"],["formControlName","data",3,"context"]],template:function(o,w){1&o&&(n.\u0275\u0275elementContainerStart(0,0),n.\u0275\u0275element(1,"classifieds-ui-context-state-form",1),n.\u0275\u0275elementContainerEnd()),2&o&&(n.\u0275\u0275property("formGroup",w.controlContainer.control),n.\u0275\u0275advance(1),n.\u0275\u0275property("context",w.context))},directives:[Uo,c.JL,c.sg,c.JJ,c.u],styles:[""]}),v})(),ae=(()=>{class v{constructor(o,w){this.attributeSerializer=o,this.es=w}get entityCollectionService(){return this.es.getEntityCollectionService("GlobalState")}resolve(o,w,q){console.log("hookup globalstate"),console.log(w);const mt=q&&q.has("name")&&q.get("name")&&null!==q.get("name")&&""!==q.get("name")?q.get("name"):void 0;return mt?this.entityCollectionService.collection$.pipe((0,Vi.Ys)((Qt=mt,(0,Vi.P1)(Qt=>Qt.entities,It=>It[Qt]?It[Qt]:void 0))),(0,Se.U)(Qt=>Qt?this.attributeSerializer.deserialize(Qt.value):w.value?w.value:{}),(0,Se.U)(Qt=>Qt.root?Qt.root:Qt),(0,ue.b)(Qt=>{console.log("resolve globalstate"),console.log(Qt)})):(0,He.of)(w.value?w.value:{}).pipe((0,ue.b)(Qt=>{console.log("resolve default globalstate"),console.log(Qt)}));var Qt}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275inject(Rr.AttributeSerializerService),n.\u0275\u0275inject(Z.jn))},v.\u0275prov=n.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac}),v})();class Ae{constructor(h){h&&(this.id=h.id,this.value=new Rr.AttributeValue(h.value))}}const Gt={GlobalState:{entityName:"GlobalState"}};let Kt=(()=>{class v{constructor(o,w,q,re,Ve,mt,Qt){o.registerMetadataMap(Gt),w.registerService("GlobalState",new se.NoopDataService("GlobalState")),q.register((v=>{const h=new Rr.AttributeValue;return new xe.eO({id:"state",name:"state",title:"State",baseObject:h,resolver:v,editorComponent:Ma})})(Qt)),mt.register(((v,h)=>new is.UG({id:"state",title:"State",build:()=>{is.LS.prototype.writeState=o=>new Promise(w=>{v.getEntityCollectionService("GlobalState").upsert(new Ae({id:o.id,value:h.serialize(o.value,"root")})).pipe((0,ue.b)(re=>w(re))).subscribe()})}}))(re,Ve))}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275inject(Z.f0),n.\u0275\u0275inject(Z.sP),n.\u0275\u0275inject(xe.UV),n.\u0275\u0275inject(Z.jn),n.\u0275\u0275inject(Rr.AttributeSerializerService),n.\u0275\u0275inject(is.$M),n.\u0275\u0275inject(ae))},v.\u0275mod=n.\u0275\u0275defineNgModule({type:v}),v.\u0275inj=n.\u0275\u0275defineInjector({providers:[ae],imports:[[y.CommonModule,c.u5,c.UX]]}),v})();var Tn=u(6088),hn=u(2044),Fn=u(4382),Zt=u(1944);function qr(v){return new Promise((h,o)=>{v.oncomplete=v.onsuccess=()=>h(v.result),v.onabort=v.onerror=()=>o(v.error)})}let Hi;function _i(){return Hi||(Hi=function ki(v,h){const o=function ri(){var h;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(o){var w=function(){return indexedDB.databases().finally(o)};h=setInterval(w,100),w()}).finally(function(){return clearInterval(h)}):Promise.resolve()}().then(()=>{const w=indexedDB.open(v);return w.onupgradeneeded=()=>w.result.createObjectStore(h),qr(w)});return(w,q)=>o.then(re=>q(re.transaction(h,w).objectStore(h)))}("keyval-store","keyval")),Hi}function Po(v,h,o=_i()){return o("readwrite",w=>(w.put(h,v),qr(w.transaction)))}var Yl=u(78);const $u=v=>new hn.e8({id:"idb_keyval",title:"Idb Keyval",create:({object:h,identity:o,params:w,parentObject:q})=>(0,He.of)({success:!1}).pipe((0,G.w)(()=>o({object:h,parentObject:q}).pipe((0,Se.U)(({identity:re})=>({identity:re})))),(0,G.w)(({identity:re})=>w&&0!==Object.keys(w).length?(0,Ye.D)(Object.keys(w).map(Ve=>v.paramValue(w[Ve],new Map).pipe((0,Se.U)(mt=>({[Ve]:mt}))))).pipe((0,Se.U)(Ve=>Ve.reduce((mt,Qt)=>({...mt,...Qt}),{})),(0,Se.U)(Ve=>({identity:re,options:Ve}))):(0,He.of)({identity:re,options:{}})),(0,Se.U)(({identity:re,options:Ve})=>({name:Ve.prefix+re})),(0,G.w)(({name:re})=>new ve.y(Ve=>{Po(re,h).then(mt=>{console.log("idb write suceeded"),console.log(mt),Ve.next({success:!0}),Ve.complete()}).catch(mt=>{console.log("idb write failed"),console.log(mt),Ve.next({success:!1}),Ve.complete()})}))),read:({})=>(0,He.of)({success:!1}),update:({object:h,identity:o,params:w,parentObject:q})=>(0,He.of)({success:!1}).pipe((0,G.w)(()=>o({object:h,parentObject:q}).pipe((0,Se.U)(({identity:re})=>({identity:re})))),(0,G.w)(({identity:re})=>w&&0!==Object.keys(w).length?(0,Ye.D)(Object.keys(w).map(Ve=>v.paramValue(w[Ve],new Map).pipe((0,Se.U)(mt=>({[Ve]:mt}))))).pipe((0,Se.U)(Ve=>Ve.reduce((mt,Qt)=>({...mt,...Qt}),{})),(0,Se.U)(Ve=>({identity:re,options:Ve}))):(0,He.of)({identity:re,options:{}})),(0,Se.U)(({identity:re,options:Ve})=>({name:Ve.prefix+re})),(0,G.w)(({name:re})=>new ve.y(Ve=>{Po(re,h).then(mt=>{console.log("idb write suceeded"),console.log(mt),Ve.next({success:!0}),Ve.complete()}).catch(mt=>{console.log("idb write failed"),console.log(mt),Ve.next({success:!1}),Ve.complete()})}))),delete:({})=>(0,He.of)({success:!1}),query:({params:h,rule:o,identity:w})=>v.paramValues(new Map(Object.keys(h).map(q=>[q,h[q]]))).pipe((0,G.w)(q=>new ve.y(re=>{(function Gu(v=_i()){return v("readonly",h=>{if(h.getAllKeys)return qr(h.getAllKeys());const o=[];return function Ps(v,h){return v.openCursor().onsuccess=function(){!this.result||(h(this.result),this.result.continue())},qr(v.transaction)}(h,w=>o.push(w.key)).then(()=>o)})})().then(Ve=>Ve.filter(mt=>0===`${mt}`.indexOf(q.get("prefix")))).then(Ve=>function As(v,h=_i()){return h("readonly",o=>Promise.all(v.map(w=>qr(o.get(w)))))}(Ve)).then(Ve=>{re.next({entities:Ve,success:!0}),re.complete()})})),(0,G.w)(q=>o?new ve.y(re=>{const Ve=new Yl.Engine;Ve.addOperator("startsWith",(mt,Qt)=>"string"==typeof Qt&&"string"==typeof mt&&0===Qt.indexOf(mt)),Ve.addOperator("term||wildcard",(mt,Qt)=>{const It=JSON.parse(decodeURIComponent(Qt)),gn=(0,yi.JSONPath)({path:"$.term.*.value.@string()",json:It,flatten:!0});return void 0!==It.wildcard||It.term&&0!==gn.lengh&&gn[0]===mt}),Ve.addRule(o),Ve.addFact("identity",(mt,Qt)=>new ve.y(It=>{Qt.factValue("entity").then(gn=>w({object:gn}).pipe((0,Se.U)(({identity:Bn})=>Bn)).toPromise()).then(gn=>{It.next(gn),It.complete()})}).toPromise(),{cache:!1}),(0,He.of)(...q.entities).pipe((0,ee.b)(mt=>new ve.y(Qt=>{Ve.removeFact("entity"),Ve.addFact("entity",mt,{cache:!1}),Ve.run().then(It=>{Qt.next([mt,It.events.findIndex(gn=>"visible"===gn.type)>-1]),Qt.complete()})})),(0,Qn.h)(([mt,Qt])=>Qt),(0,Se.U)(([mt])=>mt),function bi(v,h){return(0,Zt.e)((0,Fn.U)(v,h,arguments.length>=2,!1,!0))}((mt,Qt)=>[...mt,Qt],[]),(0,ht.d)([])).subscribe(mt=>{re.next({...q,entities:mt}),re.complete()})}):(0,He.of)(q)))});let Vu=(()=>{class v{constructor(o,w){o.register($u(w))}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275inject(hn.YS),n.\u0275\u0275inject(zi.nU))},v.\u0275mod=n.\u0275\u0275defineNgModule({type:v}),v.\u0275inj=n.\u0275\u0275defineInjector({imports:[[hn.Z5]]}),v})();var Ys=u(811),gl=u(982),Zl=u(3547);function Fa(v,h){1&v&&(n.\u0275\u0275elementStart(0,"a",5),n.\u0275\u0275text(1,"register"),n.\u0275\u0275elementEnd())}function os(v,h){if(1&v){const o=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"a",6),n.\u0275\u0275listener("click",function(){return n.\u0275\u0275restoreView(o),n.\u0275\u0275nextContext().login()}),n.\u0275\u0275text(1,"login"),n.\u0275\u0275elementEnd()}}let oi=(()=>{class v{constructor(o,w,q,re){this.authFacade=w,this.router=q,this.title="ipe",this.menuClicked=new n.EventEmitter,(0,y.isPlatformBrowser)(o)&&(bridge=re)}ngOnInit(){this.authFacade.getUser$.subscribe(o=>{this.isAuthenticated=!!o})}login(){this.authFacade.login()}menuClick(){this.menuClicked.emit()}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(n.PLATFORM_ID),n.\u0275\u0275directiveInject(z.jE),n.\u0275\u0275directiveInject(Xe.Router),n.\u0275\u0275directiveInject(is.LS))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["app-root"]],outputs:{menuClicked:"menuClicked"},decls:6,vars:2,consts:[["fxLayout","column","fxFill",""],[1,"top-bar"],["mat-button","",4,"ngIf"],["mat-raised-button","","color","accent",3,"click",4,"ngIf"],[1,"outlet-wrapper"],["mat-button",""],["mat-raised-button","","color","accent",3,"click"]],template:function(o,w){1&o&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275elementStart(1,"div",1),n.\u0275\u0275template(2,Fa,2,0,"a",2),n.\u0275\u0275template(3,os,2,0,"a",3),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"div",4),n.\u0275\u0275element(5,"router-outlet"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&o&&(n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",!w.isAuthenticated),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!w.isAuthenticated))},directives:[ws.xw,ws.s9,y.NgIf,go.zs,Xe.RouterOutlet],styles:[".outlet-wrapper[_ngcontent-%COMP%]{height:100%}.top-bar[_ngcontent-%COMP%]{position:absolute;top:.5em;left:.5em}.top-bar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{background-color:#fff;text-transform:capitalize}.top-bar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] + a[_ngcontent-%COMP%]{margin-left:.5em;color:#141b3f}"]}),v})();var ui=u(5242);const ni_production=!1,ni_site="card.rollthecloud.com",ni_apiGatewaySettings={endpointUrl:"https://80ry0dd5s4.execute-api.us-east-1.amazonaws.com"},ni_mediaSettings={endpointUrl:"https://80ry0dd5s4.execute-api.us-east-1.amazonaws.com/media",cloudinaryUrl:"https://api.cloudinary.com/v1_1/dj4vvkgzw",uploadPreset:"i0hm4opm",imageUrl:"https://d12b7acm1cy55s.cloudfront.net",bucket:"classifieds-ui-dev",prefix:"media/"},ni_cognitoSettings={identityPoolId:"us-east-1:6f5cdc41-35b0-41ca-9f6b-7eca11320942",region:"us-east-1",userPoolId:"us-east-1_z8PhK3D8V"},ni_panelsSettings={openSearchDomain:"search-classifieds-ui-dev-eldczuhq3vesgpjnr3vie6cagq",s3Bucket:"classifieds-ui-dev"},ni_alienaliasSettings={openSearchDomain:"search-classifieds-ui-dev-eldczuhq3vesgpjnr3vie6cagq"},ni_rumSettings={appId:"",guestRoleArn:"",identityPoolId:"",region:""},ni_clientSettings={authority:"https://classifieds-ui-dev.auth.us-east-1.amazoncognito.com",client_id:"3lkidn79q4jq8nahkecsguleij",redirect_uri:"https://d3saavhqmjxl6q.cloudfront.net/auth-callback",silent_redirect_uri:"https://d3saavhqmjxl6q.cloudfront.net/silent-refresh.html",response_type:"code",scope:"openid profile aws.cognito.signin.user.admin ads_api/ads_api taxonomy_api/taxonomy_api chat/chat media_api/media_api profiles_api/profiles_api",filterProtocolClaims:!0,loadUserInfo:!0,automaticSilentRenew:!0,stateStore:void 0,userStore:void 0,metadata:{issuer:"https://cognito-idp.us-east-1.amazonaws.com/us-east-1_z8PhK3D8V",authorization_endpoint:"https://classifieds-ui-dev.auth.us-east-1.amazoncognito.com/oauth2/authorize",userinfo_endpoint:"https://classifieds-ui-dev.auth.us-east-1.amazoncognito.com/oauth2/userInfo",end_session_endpoint:"https://classifieds-ui-dev.auth.us-east-1.amazoncognito.com/logout",token_endpoint:"https://classifieds-ui-dev.auth.us-east-1.amazoncognito.com/oauth2/token",jwks_uri:"https://cognito-idp.us-east-1.amazonaws.com/us-east-1_z8PhK3D8V"},signingKeys:[{alg:"RS256",e:"AQAB",kid:"LFfHKQ51C81E+ByYd/wucwrvfiEnYJQtJvb4GHbalFQ=",kty:"RSA",n:"gijyjUXIzkAPofeaM7JCAsuLHLc_GP3of-NT8ARjSTTMif-wqJeNww4MJkvRYzfL6mL_owVZgD37O4Dd81jBLY6iEyi6hxHYTUuXR7mYkQ2008Fp3m45wztUKWeeNgzsvuR01STkkwmuf7afkQXJUlHts8eT47Dqc4mrKA3vcHYG4vJXmvtjQT-IirkA-yU36TXyd1TPOetdwlmFOcSYfL4CW7ZZfVg1dCvT1T50mO1AaQDMcA8S3fVfROGW36hjiB8r9q5zQrrfBLTMPSVpn85LscVLbYUxJL9yLygiD4UTCXw7Y1hiE2tDL2nmy6PHumylNf8yj5I7N56Kz4cwtQ",use:"sig"},{alg:"RS256",e:"AQAB",kid:"UNTk4hVhUrq0k8uAGvDYs/w0g/iW+b9PweObMbM6S/w=",kty:"RSA",n:"g7Z-JKiovH7ZnwK1o8hsiLf4GfxA9w11RsQK3yQWG3xR__qKbkvxKxhn3Xt5QsUSo8nhiwWtsjUTyVxRO7WJlCjSHGztvYhoYIlwSL8Mqtf3Plg6CrJoDhq7CZDe_TNeQczfBI8k1w5U6n4h5G-e4Fa41nH-qXrDh2L7onTFKSzZDJRCELmh64ur5RmU6kuhwrejwS4YXuz4gKQRcTuDu9AXH7A7cNO5EF_sVRy8hkFtKCPO-mgwJ5S_e5_Y5gleJRpMZnzWmBv_-GpwO5V9XzxBr5s1O9HqyBMXR1pKU_YykeP7PvukEDpyr8UXu-2drzq-oHzXHDInNHjYPLx3BQ",use:"sig"}]};var Ei=u(1611);const Go={router:Ei.mg},ss=[];class Fi{constructor(h){h&&(this.query=h.query)}}let Zs=(()=>{class v{constructor(o,w){this.fb=o,this.attributeSerializer=w,this.settings$=new jr.X(void 0),this.formGroup=this.fb.group({query:this.fb.control("",[c.kI.required])}),this.settingsSub=this.settings$.pipe((0,Se.U)(q=>q?new Fi(this.attributeSerializer.deserializeAsObject(q)):void 0)).subscribe(q=>{q?this.formGroup.get("query").setValue(q.query):this.formGroup.get("query").setValue("")}),this.onTouched=()=>{}}set settings(o){this.settings$.next(o)}ngOnInit(){}writeValue(o){o&&this.formGroup.setValue(o,{emitEvent:!1})}registerOnChange(o){this.formGroup.valueChanges.subscribe(o)}registerOnTouched(o){this.onTouched=o}setDisabledState(o){o?this.formGroup.disable():this.formGroup.enable()}validate(o){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(c.qu),n.\u0275\u0275directiveInject(Rr.AttributeSerializerService))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["classifieds-ui-select-source-form"]],inputs:{settings:"settings"},features:[n.\u0275\u0275ProvidersFeature([{provide:c.JU,useExisting:(0,n.forwardRef)(()=>v),multi:!0},{provide:c.Cf,useExisting:(0,n.forwardRef)(()=>v),multi:!0}])],decls:5,vars:1,consts:[[3,"formGroup"],["matInput","","formControlName","query","required",""]],template:function(o,w){1&o&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275elementStart(1,"mat-form-field"),n.\u0275\u0275elementStart(2,"mat-label"),n.\u0275\u0275text(3,"Query"),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(4,"input",1),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&o&&n.\u0275\u0275property("formGroup",w.formGroup)},directives:[Ln.KE,c.JL,c.sg,Ln.hX,rn.Nt,c.Fj,c.JJ,c.u,c.Q7],styles:[""]}),v})(),vl=(()=>{class v{constructor(o){this.controlContainer=o,this.settings=[]}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(c.gN))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["classifieds-ui-transform-select"]],inputs:{settings:"settings"},decls:2,vars:2,consts:[[3,"formGroup"],["formControlName","settings",3,"settings"]],template:function(o,w){1&o&&(n.\u0275\u0275elementContainerStart(0,0),n.\u0275\u0275element(1,"classifieds-ui-select-source-form",1),n.\u0275\u0275elementContainerEnd()),2&o&&(n.\u0275\u0275property("formGroup",w.controlContainer.control),n.\u0275\u0275advance(1),n.\u0275\u0275property("settings",w.settings))},directives:[Zs,c.JL,c.sg,c.JJ,c.u],encapsulation:2}),v})(),yl=(()=>{class v{constructor(){}ngOnInit(){}}return v.\u0275fac=function(o){return new(o||v)},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["classifieds-ui-transform-merge"]],decls:2,vars:0,template:function(o,w){1&o&&(n.\u0275\u0275elementStart(0,"p"),n.\u0275\u0275text(1,"transform merge"),n.\u0275\u0275elementEnd())},styles:[""]}),v})();const ea=v=>new vr.Sn({id:"select",title:"Select",editor:vl,fetch:({settings:h,dataset:o})=>(0,$i.s)(()=>!!o,(0,He.of)(o).pipe((0,Se.U)(()=>new Fi(v.deserializeAsObject(h))),(0,Se.U)(w=>new vr.qz({results:(0,yi.JSONPath)({path:w.query,json:o.results})}))),(0,He.of)(new vr.qz))});let eu=(()=>{class v{constructor(o,w){[ea(w),new vr.Sn({id:"merge",title:"Merge",editor:yl,fetch:({})=>(0,He.of)(new vr.qz)})].forEach(q=>o.register(q))}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275inject(vr.Ar),n.\u0275\u0275inject(Rr.AttributeSerializerService))},v.\u0275mod=n.\u0275\u0275defineNgModule({type:v}),v.\u0275inj=n.\u0275\u0275defineInjector({imports:[[y.CommonModule,c.u5,c.UX,ze.MaterialModule,vr.zG]]}),v})();var tu=u(3670),Da=u(9376);let nu=(()=>{class v{constructor(o,w){this.fb=o,this.attributeSerializer=w,this.contexts=[],this.settings$=new jr.X(void 0),this.paramValues$=new jr.X([]),this.formGroup=this.fb.group({entityName:this.fb.control(""),queryString:this.fb.control(""),params:this.fb.control([])}),this.settingsSub=this.settings$.pipe((0,Se.U)(q=>q?this.attributeSerializer.deserializeAsObject(q):void 0)).subscribe(q=>{q?(this.formGroup.get("entityName").setValue(q.entityName),this.formGroup.get("queryString").setValue(q.queryString)):(this.formGroup.get("entityName").setValue(""),this.formGroup.get("queryString").setValue(""))}),this.queryStringChangeSub=this.formGroup.get("queryString").valueChanges.pipe((0,xn.b)(500)).subscribe(q=>{const re=tu.parse("?"+q);this.paramsParsed=re}),this.onTouched=()=>{}}set settings(o){this.settings$.next(o)}ngOnInit(){}writeValue(o){o&&this.formGroup.setValue(o,{emitEvent:!1})}registerOnChange(o){this.formGroup.valueChanges.subscribe(o)}registerOnTouched(o){this.onTouched=o}setDisabledState(o){o?this.formGroup.disable():this.formGroup.enable()}validate(o){return this.formGroup.valid?null:this.formGroup.errors}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(c.qu),n.\u0275\u0275directiveInject(Rr.AttributeSerializerService))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["classifieds-ui-entity-datasource-form"]],inputs:{contexts:"contexts",settings:"settings"},features:[n.\u0275\u0275ProvidersFeature([{provide:c.JU,useExisting:(0,n.forwardRef)(()=>v),multi:!0},{provide:c.Cf,useExisting:(0,n.forwardRef)(()=>v),multi:!0}])],decls:8,vars:4,consts:[[3,"formGroup"],["matInput","","placeholder","Name","formControlName","entityName","required",""],["matInput","","placeholder","Query String","formControlName","queryString"],["formControlName","params",3,"params","paramValues","contexts"]],template:function(o,w){1&o&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275elementStart(1,"div"),n.\u0275\u0275elementStart(2,"mat-form-field"),n.\u0275\u0275element(3,"input",1),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"div"),n.\u0275\u0275elementStart(5,"mat-form-field"),n.\u0275\u0275element(6,"input",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(7,"classifieds-ui-params-form",3),n.\u0275\u0275elementEnd()),2&o&&(n.\u0275\u0275property("formGroup",w.formGroup),n.\u0275\u0275advance(7),n.\u0275\u0275property("params",w.paramsParsed)("paramValues",w.paramValues$.value)("contexts",w.contexts))},directives:[Ln.KE,zi.Op,c.JL,c.sg,rn.Nt,c.Fj,c.JJ,c.u,c.Q7],styles:[""]}),v})(),Na=(()=>{class v{constructor(o){this.controlContainer=o,this.settings=[],this.contexts=[]}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(c.gN))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["classifieds-ui-entity-datasource"]],inputs:{settings:"settings",contexts:"contexts"},decls:2,vars:3,consts:[[3,"formGroup"],["formControlName","settings",3,"settings","contexts"]],template:function(o,w){1&o&&(n.\u0275\u0275elementContainerStart(0,0),n.\u0275\u0275element(1,"classifieds-ui-entity-datasource-form",1),n.\u0275\u0275elementContainerEnd()),2&o&&(n.\u0275\u0275property("formGroup",w.controlContainer.control),n.\u0275\u0275advance(1),n.\u0275\u0275property("settings",w.settings)("contexts",w.contexts))},directives:[nu,c.JL,c.sg,c.JJ,c.u],encapsulation:2}),v})();class ru{constructor(h){this.params=[],h&&(this.entityName=h.entityName,this.queryString=h.queryString?h.queryString:"",h.params&&Array.isArray(h.params)&&(this.params=h.params.map(o=>new zi.dO(o))))}}let bl=(()=>{class v{constructor(o,w,q,re,Ve,mt){o.register(((v,h,o,w)=>new vr.Sn({id:"entity",title:"Entity",editor:Na,fetch:({settings:q,metadata:re})=>(0,He.of)(new vr.qz).pipe((0,Se.U)(()=>h.deserializeAsObject(q)),(0,Se.U)(Ve=>new ru(Ve)),(0,G.w)(Ve=>o.getUrl("?"+Ve.queryString,Ve.params,re).pipe((0,Se.U)(mt=>({e:Ve,queryString:mt})))),(0,Se.U)(({e:Ve,queryString:mt})=>({e:Ve,queryString:mt.substr(1)})),(0,G.w)(({e:Ve,queryString:mt})=>mt&&""!==mt?w.getEntityCollectionService(Ve.entityName).getWithQuery(mt):w.getEntityCollectionService(Ve.entityName).getAll()),(0,Se.U)(Ve=>new vr.qz({results:Ve}))),editorOptions:()=>(0,He.of)(new vr.se({fullscreen:!0})),getBindings:({settings:q})=>(0,He.of)([]).pipe((0,Se.U)(()=>h.deserializeAsObject(q)),(0,Se.U)(Ve=>new ru(Ve)),(0,G.w)(Ve=>v.extractContexts(Ve.params)),(0,Se.U)(Ve=>Ve.map(mt=>new qe.ContentBinding({id:mt,type:"context"}))))}))(q,re,Ve,mt)),w.register(new Da.DR({id:"entity",title:"Entity",editor:Na,send:v=>(0,He.of)(new Da.yt({}))}))}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275inject(vr.Ar),n.\u0275\u0275inject(Da.S0),n.\u0275\u0275inject(xe.$U),n.\u0275\u0275inject(Rr.AttributeSerializerService),n.\u0275\u0275inject(wo.o),n.\u0275\u0275inject(Z.jn))},v.\u0275mod=n.\u0275\u0275defineNgModule({type:v}),v.\u0275inj=n.\u0275\u0275defineInjector({imports:[[y.CommonModule,c.UX,c.u5,ze.MaterialModule,xe.Lu,zi.bI]]}),v})(),wl=(()=>{class v{constructor(o){this.fb=o,this.contexts=[],this.settings$=new jr.X(void 0),this.datasource$=new jr.X(void 0),this.formGroup=this.fb.group({}),this.onTouched=()=>{}}set settings(o){this.settings$.next(o)}ngOnInit(){}writeValue(o){o&&this.formGroup.setValue(o,{emitEvent:!1})}registerOnChange(o){this.formGroup.valueChanges.subscribe(o)}registerOnTouched(o){this.onTouched=o}setDisabledState(o){o?this.formGroup.disable():this.formGroup.enable()}validate(o){return this.formGroup.valid?null:this.formGroup.errors}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(c.qu))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["classifieds-ui-loop-datasource-form"]],inputs:{contexts:"contexts",settings:"settings"},features:[n.\u0275\u0275ProvidersFeature([{provide:c.JU,useExisting:(0,n.forwardRef)(()=>v),multi:!0},{provide:c.Cf,useExisting:(0,n.forwardRef)(()=>v),multi:!0}])],decls:1,vars:1,consts:[[3,"formGroup"]],template:function(o,w){1&o&&n.\u0275\u0275element(0,"div",0),2&o&&n.\u0275\u0275property("formGroup",w.formGroup)},directives:[c.JL,c.sg],styles:[""]}),v})(),Cl=(()=>{class v{constructor(o){this.controlContainer=o,this.settings=[],this.contexts=[]}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(c.gN))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["classifieds-ui-loop-datasource"]],inputs:{settings:"settings",contexts:"contexts"},decls:2,vars:3,consts:[[3,"formGroup"],["formControlName","settings",3,"settings","contexts"]],template:function(o,w){1&o&&(n.\u0275\u0275elementContainerStart(0,0),n.\u0275\u0275element(1,"classifieds-ui-loop-datasource-form",1),n.\u0275\u0275elementContainerEnd()),2&o&&(n.\u0275\u0275property("formGroup",w.controlContainer.control),n.\u0275\u0275advance(1),n.\u0275\u0275property("settings",w.settings)("contexts",w.contexts))},directives:[wl,c.JL,c.sg,c.JJ,c.u],encapsulation:2}),v})();class xl{constructor(h){}}const Hu=(v,h)=>new vr.Sn({id:"loop",title:"loop",editor:Cl,fetch:({settings:o,dataset:w,datasource:q,metadata:re,datasources:Ve})=>(0,He.of)(new vr.qz).pipe((0,Se.U)(()=>v.deserializeAsObject(o)),(0,Se.U)(mt=>mt?new xl(mt):void 0),(0,G.w)(mt=>(0,Ye.D)(w?w.results.map(Qt=>h.evalDatasource({datasource:new vr.Yh({plugin:"data",renderer:q.renderer,settings:v.serialize({data:JSON.stringify(w.results)},"root").attributes}),datasources:Ve,metadata:new Map([...re?Array.from(re).filter(([It])=>"contexts"!==It):[],["contexts",[...re.has("contexts")&&Array.isArray(re.get("contexts"))?re.get("contexts").filter(It=>"_root"!==It.name):[],new xe.Js({name:"_root",adaptor:"data",data:Qt})]]])}).pipe((0,X.q)(1))):[]).pipe((0,Se.U)(Qt=>new vr.qz({results:Qt.reduce((It,gn)=>[...It,...gn.results],[])})),(0,ht.d)(new vr.qz({results:[]})))))});let Ku=(()=>{class v{constructor(o,w,q){[Hu(w,q)].forEach(re=>o.register(re))}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275inject(vr.Ar),n.\u0275\u0275inject(Rr.AttributeSerializerService),n.\u0275\u0275inject(vr.A7))},v.\u0275mod=n.\u0275\u0275defineNgModule({type:v}),v.\u0275inj=n.\u0275\u0275defineInjector({imports:[[y.CommonModule,c.UX,ze.MaterialModule,xe.Lu,vr.zG]]}),v})();var ao=u(6067),na=u(9525),ou=u(538),as=u(6102),Yi=u(8055),te=u(2522);function Re(v,h){if(1&v&&(n.\u0275\u0275elementStart(0,"mat-option",2),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&v){const o=h.$implicit;n.\u0275\u0275property("value",o.value),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(o.label)}}function A(v,h){if(1&v){const o=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275element(1,"classifieds-ui-render-pane",4),n.\u0275\u0275elementStart(2,"button",3),n.\u0275\u0275listener("click",function(){const re=n.\u0275\u0275restoreView(o).index;return n.\u0275\u0275nextContext().remove$.next(re)}),n.\u0275\u0275text(3,"Remove"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()}if(2&v){const o=h.$implicit,w=h.index,q=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("formControlName",w)("pluginName",o.contentPlugin)("settings",o.settings)("name",o.name)("label",o.label)("contexts",o.contexts)("panes",q.panes)("resolvedContext",o.resolvedContext)("indexPosition",w)("ancestory",q.ancestory)}}function ie(v,h){if(1&v&&(n.\u0275\u0275elementStart(0,"mat-option",8),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&v){const o=h.$implicit;n.\u0275\u0275property("value",o),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(o)}}function Pe(v,h){if(1&v&&(n.\u0275\u0275elementStart(0,"mat-radio-button",2),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&v){const o=h.$implicit;n.\u0275\u0275property("value",o.value),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(o.label)}}function nt(v,h){if(1&v&&(n.\u0275\u0275elementStart(0,"mat-option",4),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&v){const o=h.$implicit;n.\u0275\u0275property("value",o),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(o.label)}}function Dt(v,h){if(1&v){const o=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"ngx-dropzone-image-preview",4),n.\u0275\u0275listener("removed",function(){n.\u0275\u0275restoreView(o);const q=n.\u0275\u0275nextContext().$implicit;return n.\u0275\u0275nextContext().onRemove(q)}),n.\u0275\u0275elementStart(1,"ngx-dropzone-label"),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()}if(2&v){const o=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275property("file",o)("removable",!0),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate2("",o.name," (",o.type,")")}}function Wt(v,h){if(1&v){const o=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"ngx-dropzone-video-preview",4),n.\u0275\u0275listener("removed",function(){n.\u0275\u0275restoreView(o);const q=n.\u0275\u0275nextContext().$implicit;return n.\u0275\u0275nextContext().onRemove(q)}),n.\u0275\u0275elementStart(1,"ngx-dropzone-label"),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()}if(2&v){const o=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275property("file",o)("removable",!0),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate2("",o.name," (",o.type,")")}}function mn(v,h){if(1&v){const o=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"ngx-dropzone-preview",5),n.\u0275\u0275listener("removed",function(){n.\u0275\u0275restoreView(o);const q=n.\u0275\u0275nextContext().$implicit;return n.\u0275\u0275nextContext().onRemove(q)}),n.\u0275\u0275elementStart(1,"ngx-dropzone-label"),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()}if(2&v){const o=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275property("removable",!0),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate2("",o.name," (",o.type,")")}}function Pn(v,h){if(1&v&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,Dt,3,4,"ngx-dropzone-image-preview",2),n.\u0275\u0275template(2,Wt,3,4,"ngx-dropzone-video-preview",2),n.\u0275\u0275template(3,mn,3,3,"ngx-dropzone-preview",3),n.\u0275\u0275elementContainerEnd()),2&v){const o=h.$implicit,w=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",w.isType(o,"image")),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",w.isType(o,"video")),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!w.isType(o,"image")&&!w.isType(o,"video"))}}class br{constructor(h){h&&(this.value=h.value?h.value:"",h.datasourceBinding&&"object"==typeof h.datasourceBinding&&(this.datasourceBinding=new qe.ContentBinding(h.datasourceBinding)),h.datasourceOptions&&"object"==typeof h.datasourceOptions&&(this.datasourceOptions=new vr.CD(h.datasourceOptions)))}}class Br{constructor(h){h&&(this.valuesMapping=h.valuesMapping)}}let Cr=(()=>{class v{constructor(o,w,q,re){this.tokenizerService=o,this.datasourceContentHandler=w,this.panelResolver=q,this.attributeSerializer=re}resolveElementOptions(o,w){return(0,He.of)(o).pipe((0,G.w)(q=>{if(q.datasourceBinding&&q.datasourceBinding.id&&""!==q.datasourceBinding.id){const re=w.has("panes")?w.get("panes").find(Ve=>Ve.name===q.datasourceBinding.id):void 0;return this.panelResolver.dataPanes(w.get("panes")).pipe((0,G.w)(Ve=>re?this.datasourceContentHandler.fetchDynamicData(re.settings,new Map([...w,["dataPanes",Ve]])):(0,He.of)([])),(0,Se.U)(Ve=>[q,Ve.results]))}return(0,He.of)([q,[]])}),(0,Se.U)(([q,re])=>[q,q.datasourceOptions&&""!==q.datasourceOptions.query?(0,yi.JSONPath)({path:q.datasourceOptions.query,json:re}):re]),(0,G.w)(([q,re])=>this.mapDataOptions(q,re)))}mapDataOptions(o,w){return(0,He.of)([o,w]).pipe((0,Se.U)(([q,re])=>[q,re,re?re.map(Ve=>this.tokenizerService.generateGenericTokens(Ve)):[]]),(0,Se.U)(([q,re,Ve])=>Ve.map(mt=>this.mapDataItem(q,mt))))}mapDataItem(o,w){return new vr.$m({value:this.tokenizerService.replaceTokens(`${o.datasourceOptions.valueMapping}`,w),label:this.tokenizerService.replaceTokens(`${o.datasourceOptions.labelMapping}`,w),dataItem:void 0})}hasDataOptions(o){return o.datasourceBinding&&o.datasourceBinding.id&&""!==o.datasourceBinding.id}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275inject(Ge.G),n.\u0275\u0275inject(le.i9),n.\u0275\u0275inject(le.Si),n.\u0275\u0275inject(Rr.AttributeSerializerService))},v.\u0275prov=n.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac,providedIn:"root"}),v})(),Gr=(()=>{class v{constructor(o){this.tokenizerService=o,this.cachedResolvedContexts=[],this.scheduleResolution$=new Xn.x,this.scheduleResolutionSub=this.scheduleResolution$.pipe((0,ue.b)(({resolvedContext:w,index:q})=>{let re=new Map;if(w)for(const Ve in w)w[Ve]instanceof le.zd||(re=new Map([...re,...this.tokenizerService.generateGenericTokens(w[Ve],"_root"===Ve?"":Ve)]));this.cachedResolvedContexts[q].resolution$.next(re)})).subscribe()}resolveContexts({resolvedContext:o}){let w=this.cachedResolvedContexts.findIndex(({rContext:q})=>0===(0,Yi.getDiff)(q,o).length);return-1===w?(console.log("resolved context no cache",o),w=this.cachedResolvedContexts.length,this.cachedResolvedContexts.push({rContext:o,resolution$:new ao.t}),this.scheduleResolution$.next({resolvedContext:o,index:w})):console.log("resolved context cache hit",o),this.cachedResolvedContexts[w].resolution$.pipe((0,X.q)(1))}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275inject(Ge.G))},v.\u0275prov=n.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac,providedIn:"root"}),v})(),Lr=(()=>{class v{constructor(o,w,q,re,Ve){this.attributeSerializer=o,this.optionsResolver=w,this.tokenizerService=q,this.formsContextHelper=re,this.controlContainer=Ve,this.formControl=new c.NI(""),this.formControlValueChangesSub=this.formControl.valueChanges.pipe((0,ue.b)(mt=>console.log("serialized form value",this.attributeSerializer.serialize(mt,"value"))),(0,ue.b)(mt=>this.controlContainer.control.get("settings").setValue([this.attributeSerializer.serialize(mt,"value")]))).subscribe(),this.formSettings$=new jr.X(void 0),this.settings$=new jr.X([]),this.options$=new jr.X([]),this.init$=new Xn.x,this.afterViewInit$=new Xn.x,this.panes$=new jr.X([]),this.originPanes$=new jr.X([]),this.contexts$=new jr.X([]),this.resolvedContext$=new jr.X(void 0),this.value$=new Xn.x,this.settingsSub=this.settings$.pipe((0,Se.U)(mt=>mt?this.settingsToObject(this.attributeSerializer.deserializeAsObject(mt)):void 0),(0,ue.b)(mt=>this.formSettings$.next(mt))).subscribe(),this.loadOptionsSub=(0,Mi.a)([this.formSettings$,this.panes$,this.originPanes$,this.contexts$,this.init$]).pipe((0,Se.U)(([mt,Qt,It,gn])=>({settings:mt,metadata:new Map([["panes",[...Qt&&Array.isArray(Qt)?Qt:[],...It&&Array.isArray(It)?It:[]]],["contexts",gn]])})),(0,G.w)(({settings:mt,metadata:Qt})=>this.optionsResolver.resolveElementOptions(mt,Qt)),(0,ue.b)(mt=>this.options$.next(mt))).subscribe(),this.renderContentSub=(0,Mi.a)([this.formSettings$,this.resolvedContext$,this.afterViewInit$]).pipe((0,Se.U)(([mt,Qt])=>({settings:mt,resolvedContext:Qt})),(0,G.w)(({settings:mt,resolvedContext:Qt})=>this.formsContextHelper.resolveContexts({resolvedContext:Qt}).pipe((0,Se.U)(It=>({settings:mt,tokens:It})))),(0,ue.b)(({settings:mt,tokens:Qt})=>{if(void 0!==Qt&&(this.tokens=Qt),mt.value&&null!==mt.value&&""!==mt.value){(-1!==mt.value.indexOf(".$i.")||-1!==mt.value.indexOf(".$j.")||-1!==mt.value.indexOf(".$k."))&&console.log(mt.value,this.ancestory);const It=mt.value.split("$i"),gn=It.map((Vr,pi)=>this.ancestory[1*pi+(3+(0===pi?0:3))]),Bn=It.reduce((Vr,pi,Ti)=>[...Vr,0===Ti?"":Ti-1<gn.length?`${gn[Ti-1]}`:"",pi],[]).join("");console.log("path",Bn);const Hn=this.replaceTokens(Bn);this.formControl.setValue(Hn);const Pr=this.tokenizerService.discoverTokens(Hn,!0);if(0!==Pr.length)if(Pr[0].trim().lastIndexOf(".id")===Pr[0].trim().length-3){const Vr=as.Z();this.formControl.setValue(Vr),this.value$.next(Vr)}else{const Vr=Array.from(Qt).filter(([pi])=>0===pi.indexOf(Bn.substr(1,Bn.length-2)));if(0!==Vr.length){const pi=Vr.reduce((Ti,[Us,zr])=>({...Ti,[Us.substr(Us.lastIndexOf(".")+1)]:zr}),{});this.formControl.setValue(pi),this.value$.next(pi)}else{const pi=this.tokenizerService.replaceTokens(mt.value,new Map(Array.from(Pr).map(Ti=>[Ti,""])));this.formControl.setValue(pi),this.value$.next(pi)}}else this.value$.next(Hn)}else this.formControl.setValue("")}),(0,X.q)(1)).subscribe()}set settings(o){this.settings$.next(o)}set panes(o){this.panes$.next(o)}set originPanes(o){this.originPanes$.next(o)}set contexts(o){this.contexts$.next(o)}set resolvedContext(o){this.resolvedContext$.next(o)}ngOnInit(){this.init$.next(void 0)}ngAfterViewInit(){this.afterViewInit$.next(void 0)}settingsToObject(o){return new br(o)}replaceTokens(o){return void 0!==this.tokens&&this.tokens.forEach((w,q)=>{o=o.split(`[${q}]`).join(`${w}`)}),o}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(Rr.AttributeSerializerService),n.\u0275\u0275directiveInject(Cr),n.\u0275\u0275directiveInject(Ge.G),n.\u0275\u0275directiveInject(Gr),n.\u0275\u0275directiveInject(c.gN))},v.\u0275dir=n.\u0275\u0275defineDirective({type:v,selectors:[["","druid-forms-form-element-base",""]],inputs:{tokens:"tokens",settings:"settings",panes:"panes",originPanes:"originPanes",contexts:"contexts",resolvedContext:"resolvedContext",ancestory:"ancestory"}}),v})(),di=(()=>{class v extends Lr{constructor(o,w,q,re,Ve){super(o,w,q,re,Ve)}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(Rr.AttributeSerializerService),n.\u0275\u0275directiveInject(Cr),n.\u0275\u0275directiveInject(Ge.G),n.\u0275\u0275directiveInject(Gr),n.\u0275\u0275directiveInject(c.gN))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["druid-forms-form-input"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[["matInput","",3,"formControl"]],template:function(o,w){1&o&&(n.\u0275\u0275elementStart(0,"mat-form-field"),n.\u0275\u0275element(1,"input",0),n.\u0275\u0275elementEnd()),2&o&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("formControl",w.formControl))},directives:[Ln.KE,rn.Nt,c.Fj,c.JJ,c.oH],styles:[""]}),v})(),Xr=(()=>{class v extends Lr{constructor(o,w,q,re,Ve){super(o,w,q,re,Ve)}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(Rr.AttributeSerializerService),n.\u0275\u0275directiveInject(Cr),n.\u0275\u0275directiveInject(Ge.G),n.\u0275\u0275directiveInject(Gr),n.\u0275\u0275directiveInject(c.gN))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["druid-forms-form-select"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:4,vars:4,consts:[[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(o,w){1&o&&(n.\u0275\u0275elementStart(0,"mat-form-field"),n.\u0275\u0275elementStart(1,"mat-select",0),n.\u0275\u0275template(2,Re,2,2,"mat-option",1),n.\u0275\u0275pipe(3,"async"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&o&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("formControl",w.formControl),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind1(3,2,w.options$)))},directives:[Ln.KE,ro.gD,Ui.ey,c.JJ,c.oH,y.NgForOf],pipes:[y.AsyncPipe],styles:[""]}),v})(),Si=(()=>{class v{constructor(o,w,q){this.attributeSerializer=o,this.fb=w,this.controlContainer=q,this.panes=[],this.originMappings=[],this.ancestory=[],this.add$=new Xn.x,this.remove$=new Xn.x,this.panes$=new jr.X([]),this.settings$=new Xn.x,this.resolvedContext$=new Xn.x,this.panel$=new Xn.x,this.afterViewInit$=new Xn.x,this.addSub=this.add$.pipe((0,Se.U)(()=>new le.X6(this.panes[0])),(0,ue.b)(()=>this.panesFormArray.push(this.fb.control(""))),(0,ue.b)(re=>this.panes.push(re))).subscribe(),this.removeSub=this.remove$.pipe((0,ue.b)(re=>this.panesFormArray.removeAt(re)),(0,ue.b)(re=>this.panes.splice(re,1))).subscribe(),this.populateDefaultValues=(0,Mi.a)([this.settings$.pipe((0,Se.U)(re=>re?new Br(this.attributeSerializer.deserializeAsObject(re)):void 0)),this.resolvedContext$,this.panel$,this.afterViewInit$]).pipe((0,Se.U)(([re,Ve,mt])=>({s:re,rc:Ve,p:mt})),(0,ue.b)(({s:re})=>console.log(re.valuesMapping,this.ancestory)),(0,Se.U)(({s:re,rc:Ve,p:mt})=>{if(Ve&&re&&re.valuesMapping&&""!==re.valuesMapping.trim()){const Qt=re.valuesMapping.split("[$i]"),It=Qt.map((Hn,Pr)=>this.ancestory[1*Pr+3]),gn=Qt.reduce((Hn,Pr,Vr)=>[...Hn,0===Vr?"":Vr-1<It.length?`[${It[Vr-1]}]`:"",Pr],[]).join("");return console.log("path",gn),{items:(0,yi.JSONPath)({path:`$.${gn}.*`,json:Ve}),s:re,p:mt}}return{items:[],p:mt}}),(0,ue.b)(({items:re})=>{const Ve=re.length-this.panesFormArray.length;for(let mt=0;mt<Ve;mt++)this.add$.next(void 0)})).subscribe()}set settings(o){this.settings$.next(o)}set resolvedContext(o){this.resolvedContext$.next(o)}set panel(o){this.panel$.next(o)}get panesFormArray(){return this.controlContainer.control.get("panes")}ngOnInit(){}ngAfterViewInit(){this.afterViewInit$.next(void 0)}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(Rr.AttributeSerializerService),n.\u0275\u0275directiveInject(c.qu),n.\u0275\u0275directiveInject(c.gN))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["classifieds-ui-form-section"]],inputs:{panes:"panes",originPanes:"originPanes",originMappings:"originMappings",ancestory:"ancestory",settings:"settings",resolvedContext:"resolvedContext",panel:"panel"},decls:5,vars:2,consts:[[3,"formGroup"],["formArrayName","panes"],[4,"ngFor","ngForOf"],["type","button",3,"click"],[3,"formControlName","pluginName","settings","name","label","contexts","panes","resolvedContext","indexPosition","ancestory"]],template:function(o,w){1&o&&(n.\u0275\u0275elementContainerStart(0,0),n.\u0275\u0275elementContainerStart(1,1),n.\u0275\u0275template(2,A,4,10,"div",2),n.\u0275\u0275elementContainerEnd(),n.\u0275\u0275elementContainerEnd(),n.\u0275\u0275elementStart(3,"button",3),n.\u0275\u0275listener("click",function(){return w.add$.next(void 0)}),n.\u0275\u0275text(4,"Add Item"),n.\u0275\u0275elementEnd()),2&o&&(n.\u0275\u0275property("formGroup",w.controlContainer.control),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",w.panes))},directives:[jo.rQ,c.JL,c.sg,c.CE,y.NgForOf,c.JJ,c.u],styles:[""]}),v})(),Zi=(()=>{class v extends Lr{constructor(o,w,q,re,Ve){super(o,w,q,re,Ve),this.cols=20,this.rows=20}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(Rr.AttributeSerializerService),n.\u0275\u0275directiveInject(Cr),n.\u0275\u0275directiveInject(Ge.G),n.\u0275\u0275directiveInject(Gr),n.\u0275\u0275directiveInject(c.gN))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["druid-forms-form-textarea"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:3,consts:[[3,"formControl","cols","rows"]],template:function(o,w){1&o&&n.\u0275\u0275element(0,"textarea",0),2&o&&n.\u0275\u0275property("formControl",w.formControl)("cols",w.cols)("rows",w.rows)},directives:[c.Fj,c.JJ,c.oH],styles:[""]}),v})(),$o=(()=>{class v{constructor(o){this.attributeSerializer=o}handleFile(o){return(0,He.of)([])}handlesType(o){return!1}implementsRendererOverride(){return!1}hasRendererOverride(o){return(0,He.of)(!1)}isDynamic(o){return!1}isData(o){return!1}getBindings(o,w,q){return"pane"===w?this.toObject(o).pipe((0,G.w)(re=>(0,$i.s)(()=>re.datasourceBinding&&re.datasourceBinding.id&&null!==re.datasourceBinding.id,(0,He.of)([re.datasourceBinding]),(0,He.of)([])))):(0,He.of)([])}fetchDynamicData(o,w){return(0,He.of)(new vr.qz)}buildDynamicItems(o,w){return(0,He.of)([])}toObject(o){return(0,He.of)(new br(this.attributeSerializer.deserializeAsObject(o)))}buildSettings(o){return this.attributeSerializer.serialize(o,"root").attributes}stateDefinition(o){return(0,He.of)({autocomplete:{input:""},value:void 0})}editorOptions(o){return(0,He.of)(new qe.ContentPluginEditorOptions)}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275inject(Rr.AttributeSerializerService))},v.\u0275prov=n.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac}),v})(),Is=(()=>{class v extends $o{}return v.\u0275fac=function(){let h;return function(w){return(h||(h=n.\u0275\u0275getInheritedFactory(v)))(w||v)}}(),v.\u0275prov=n.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac,providedIn:"root"}),v})(),Ai=(()=>{class v{constructor(o,w,q,re,Ve){this.data=o,this.dialogRef=w,this.fb=q,this.handler=re,this.attributeSerializer=Ve,this.datasourceOptions=vr.Ef,this.bindableOptions=[],this.formGroup=this.fb.group({value:this.fb.control(""),datasourceOptions:this.fb.control(""),datasourceBinding:this.fb.group({id:this.fb.control(""),type:this.fb.control("pane")})}),this.paneIndex=o.paneIndex,this.pane=o.pane}get paneGroup(){return this.data.panelFormGroup.get("panes").at(this.paneIndex)}ngOnInit(){this.data.pane?this.handler.toObject(this.data.pane.settings).subscribe(o=>{this.formGroup.get("value").setValue(o.value),this.datasourceOptions=o.datasourceOptions?o.datasourceOptions:vr.Ef,this.formGroup.get("datasourceBinding").get("id").setValue(o.datasourceBinding&&o.datasourceBinding.id&&null!==o.datasourceBinding.id?o.datasourceBinding.id:"")}):(this.data.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:this.data.plugin.id,name:new c.NI(""),label:new c.NI(""),rule:new c.NI(""),settings:this.fb.array([])})),this.paneIndex=this.data.panelFormGroup.get("panes").length-1,this.pane=new le.X6(this.data.panelFormGroup.get("panes").at(this.paneIndex).value)),this.bindableOptions=this.data.panelFormGroup.get("panes").controls.reduce((o,w)=>w.get("name").value?[...o,w.get("name").value]:[...o],[])}submit(){console.log(this.formGroup.value);const o=new br(this.formGroup.value);console.log(o),this.paneGroup.get("settings").clear(),this.handler.buildSettings(o).map(q=>this.attributeSerializer.convertToGroup(q)).forEach(q=>this.paneGroup.get("settings").push(q)),this.dialogRef.close()}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(Kr.WI),n.\u0275\u0275directiveInject(Kr.so),n.\u0275\u0275directiveInject(c.qu),n.\u0275\u0275directiveInject(Is),n.\u0275\u0275directiveInject(Rr.AttributeSerializerService))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["druid-forms-form-element-editor"]],inputs:{bindableOptions:"bindableOptions"},decls:16,vars:3,consts:[[3,"formGroup","ngSubmit"],["fxLayout","column"],["matInput","","formControlName","value"],["formGroupName","datasourceBinding"],["required","","formControlName","id"],[3,"value",4,"ngFor","ngForOf"],["formControlName","datasourceOptions",3,"datasourceOptions"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close",""],[3,"value"]],template:function(o,w){1&o&&(n.\u0275\u0275elementStart(0,"form",0),n.\u0275\u0275listener("ngSubmit",function(){return w.submit()}),n.\u0275\u0275elementStart(1,"mat-dialog-content",1),n.\u0275\u0275elementStart(2,"div"),n.\u0275\u0275elementStart(3,"mat-form-field"),n.\u0275\u0275elementStart(4,"mat-label"),n.\u0275\u0275text(5,"Value"),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(6,"input",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(7,"mat-form-field",3),n.\u0275\u0275elementStart(8,"mat-label"),n.\u0275\u0275text(9,"Datasource"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(10,"mat-select",4),n.\u0275\u0275template(11,ie,2,2,"mat-option",5),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(12,"classifieds-ui-datasource-options",6),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(13,"mat-dialog-actions"),n.\u0275\u0275elementStart(14,"button",7),n.\u0275\u0275text(15,"Save"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&o&&(n.\u0275\u0275property("formGroup",w.formGroup),n.\u0275\u0275advance(11),n.\u0275\u0275property("ngForOf",w.bindableOptions),n.\u0275\u0275advance(1),n.\u0275\u0275property("datasourceOptions",w.datasourceOptions))},directives:[Ln.KE,ro.gD,Ui.ey,vr.wL,go.lW,c._Y,c.JL,c.sg,Kr.xY,Ln.hX,rn.Nt,c.Fj,c.JJ,c.u,c.x0,c.Q7,y.NgForOf,Kr.H8,Kr.ZT],styles:[""]}),v})(),ls=(()=>{class v extends Lr{constructor(o,w,q,re,Ve){super(o,w,q,re,Ve)}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(Rr.AttributeSerializerService),n.\u0275\u0275directiveInject(Cr),n.\u0275\u0275directiveInject(Ge.G),n.\u0275\u0275directiveInject(Gr),n.\u0275\u0275directiveInject(c.gN))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["druid-forms-form-radiogroup"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(o,w){1&o&&(n.\u0275\u0275elementStart(0,"mat-radio-group",0),n.\u0275\u0275template(1,Pe,2,2,"mat-radio-button",1),n.\u0275\u0275pipe(2,"async"),n.\u0275\u0275elementEnd()),2&o&&(n.\u0275\u0275property("formControl",w.formControl),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind1(2,2,w.options$)))},directives:[ai.U0,ai.VQ,c.JJ,c.oH,y.NgForOf],pipes:[y.AsyncPipe],styles:[""]}),v})(),su=(()=>{class v extends Lr{constructor(o,w,q,re,Ve){super(o,w,q,re,Ve)}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(Rr.AttributeSerializerService),n.\u0275\u0275directiveInject(Cr),n.\u0275\u0275directiveInject(Ge.G),n.\u0275\u0275directiveInject(Gr),n.\u0275\u0275directiveInject(c.gN))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["druid-forms-form-slider"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[3,"formControl"]],template:function(o,w){1&o&&n.\u0275\u0275element(0,"mat-slider",0),2&o&&n.\u0275\u0275property("formControl",w.formControl)},directives:[ts.pH,c.JJ,c.oH],styles:[""]}),v})(),ra=(()=>{class v extends Lr{constructor(o,w,q,re,Ve){super(o,w,q,re,Ve)}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(Rr.AttributeSerializerService),n.\u0275\u0275directiveInject(Cr),n.\u0275\u0275directiveInject(Ge.G),n.\u0275\u0275directiveInject(Gr),n.\u0275\u0275directiveInject(c.gN))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["druid-forms-form-toggle"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[[3,"formControl"]],template:function(o,w){1&o&&(n.\u0275\u0275elementStart(0,"mat-slide-toggle",0),n.\u0275\u0275text(1,"Toggle Label"),n.\u0275\u0275elementEnd()),2&o&&n.\u0275\u0275property("formControl",w.formControl)},directives:[xo.Rr,c.JJ,c.oH],styles:[""]}),v})(),qu=(()=>{class v extends Lr{constructor(o,w,q,re,Ve){super(o,w,q,re,Ve)}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(Rr.AttributeSerializerService),n.\u0275\u0275directiveInject(Cr),n.\u0275\u0275directiveInject(Ge.G),n.\u0275\u0275directiveInject(Gr),n.\u0275\u0275directiveInject(c.gN))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["druid-forms-form-checkbox"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[3,"formControl"]],template:function(o,w){1&o&&n.\u0275\u0275element(0,"mat-checkbox",0),2&o&&n.\u0275\u0275property("formControl",w.formControl)},directives:[xi.oG,c.JJ,c.oH],styles:[""]}),v})(),ja=(()=>{class v extends Lr{constructor(o,w,q,re,Ve){super(o,w,q,re,Ve)}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(Rr.AttributeSerializerService),n.\u0275\u0275directiveInject(Cr),n.\u0275\u0275directiveInject(Ge.G),n.\u0275\u0275directiveInject(Gr),n.\u0275\u0275directiveInject(c.gN))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["druid-forms-form-datepicker"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:7,vars:3,consts:[["appearance","fill"],["matInput","",3,"matDatepicker","formControl"],["matSuffix","",3,"for"],["picker",""]],template:function(o,w){if(1&o&&(n.\u0275\u0275elementStart(0,"mat-form-field",0),n.\u0275\u0275elementStart(1,"mat-label"),n.\u0275\u0275text(2,"Choose a date"),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(3,"input",1),n.\u0275\u0275element(4,"mat-datepicker-toggle",2),n.\u0275\u0275element(5,"mat-datepicker",null,3),n.\u0275\u0275elementEnd()),2&o){const q=n.\u0275\u0275reference(6);n.\u0275\u0275advance(3),n.\u0275\u0275property("matDatepicker",q)("formControl",w.formControl),n.\u0275\u0275advance(1),n.\u0275\u0275property("for",q)}},directives:[Ln.KE,Ji.nW,Ji.Mq,Ln.hX,rn.Nt,Ji.hl,c.Fj,c.JJ,c.oH,Ln.R9],styles:[""]}),v})(),au=(()=>{class v extends Lr{constructor(o,w,q,re,Ve){super(o,w,q,re,Ve),this.proxyControl=new c.NI(""),this.optionSelected$=new Xn.x,this.proxyControlValueChangesSub=this.proxyControl.valueChanges.pipe((0,xn.b)(1e3),(0,Cn.x)(),(0,ou.M)((0,Mi.a)([this.formSettings$,this.panes$,this.originPanes$,this.contexts$]).pipe((0,Se.U)(([mt,Qt,It,gn])=>({settings:mt,panes:Qt,originPanes:It,contexts:gn})))),(0,Se.U)(([mt,{settings:Qt,panes:It,originPanes:gn,contexts:Bn}])=>({term:mt,settings:Qt,metadata:new Map([["panes",[...It&&Array.isArray(It)?It:[],...gn&&Array.isArray(gn)?gn:[]]],["contexts",Bn],["inputparams",new Map([["term",new zi.dO({flags:[],mapping:new zi.vs({value:mt,testValue:mt,type:"static",context:void 0})})]])]])})),(0,G.w)(({settings:mt,metadata:Qt})=>this.optionsResolver.resolveElementOptions(mt,Qt)),(0,ue.b)(mt=>this.options$.next(mt))).subscribe(),this.optionSelectedSub=this.optionSelected$.pipe((0,ue.b)(mt=>this.formControl.setValue(mt.option&&mt.option.value?mt.option.value.value:""))).subscribe(),this.displayAuto=mt=>mt.label}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(Rr.AttributeSerializerService),n.\u0275\u0275directiveInject(Cr),n.\u0275\u0275directiveInject(Ge.G),n.\u0275\u0275directiveInject(Gr),n.\u0275\u0275directiveInject(c.gN))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["druid-forms-form-autocomplete"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:8,vars:6,consts:[["matInput","",3,"matAutocomplete","formControl"],[3,"displayWith","optionSelected"],["autocomplete","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(o,w){if(1&o&&(n.\u0275\u0275elementStart(0,"mat-form-field"),n.\u0275\u0275elementStart(1,"mat-label"),n.\u0275\u0275text(2,"Autocomplete"),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(3,"input",0),n.\u0275\u0275elementStart(4,"mat-autocomplete",1,2),n.\u0275\u0275listener("optionSelected",function(re){return w.optionSelected$.next(re)}),n.\u0275\u0275template(6,nt,2,2,"mat-option",3),n.\u0275\u0275pipe(7,"async"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&o){const q=n.\u0275\u0275reference(5);n.\u0275\u0275advance(3),n.\u0275\u0275property("matAutocomplete",q)("formControl",w.proxyControl),n.\u0275\u0275advance(1),n.\u0275\u0275property("displayWith",w.displayAuto),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind1(7,4,w.options$))}},directives:[Ln.KE,Zo.XC,Ui.ey,Ln.hX,rn.Nt,Zo.ZL,c.Fj,c.JJ,c.oH,y.NgForOf],pipes:[y.AsyncPipe],styles:[""]}),v})(),Ba=(()=>{class v extends Lr{constructor(o,w,q,re,Ve,mt){super(o,w,re,Ve,mt),this.files=[],this.select$=new Xn.x,this.selectSub=this.select$.pipe((0,ue.b)(Qt=>console.log(Qt)),(0,na.z)(Qt=>this.filesService.bulkUpload({files:[Qt.addedFiles[0]]}).pipe((0,Se.U)(It=>({mfs:It,e:Qt})))),(0,ue.b)(({mfs:Qt})=>this.formControl.setValue(Qt[0])),(0,ue.b)(({e:Qt})=>this.files.push(...Qt.addedFiles))).subscribe(),this.valueSub=this.value$.pipe((0,Qn.h)(Qt=>"object"==typeof Qt),(0,Se.U)(Qt=>new Ee.xt(Qt)),(0,ue.b)(Qt=>{console.log("populate value",Qt)}),(0,G.w)(Qt=>this.filesService.convertToFiles([Qt])),(0,ue.b)(Qt=>{console.log("populate as file",Qt),this.files=Qt})).subscribe(),this.filesService=q}onSelect(o){this.select$.next(o)}onRemove(o){console.log(o),this.formControl.setValue(""),this.files.splice(this.files.indexOf(o),1)}isType(o,w){switch(w){case"image":return this.filesService.isImage({file:o});case"video":return this.filesService.isVideo({file:o});default:return!1}}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(Rr.AttributeSerializerService),n.\u0275\u0275directiveInject(Cr),n.\u0275\u0275directiveInject(Ee.nS),n.\u0275\u0275directiveInject(Ge.G),n.\u0275\u0275directiveInject(Gr),n.\u0275\u0275directiveInject(c.gN))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["druid-forms-form-media"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:4,vars:1,consts:[[3,"change"],[4,"ngFor","ngForOf"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed",4,"ngIf"],[3,"removable","removed",4,"ngIf"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed"],[3,"removable","removed"]],template:function(o,w){1&o&&(n.\u0275\u0275elementStart(0,"ngx-dropzone",0),n.\u0275\u0275listener("change",function(re){return w.onSelect(re)}),n.\u0275\u0275elementStart(1,"ngx-dropzone-label"),n.\u0275\u0275text(2,"Drop it, baby!"),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,Pn,4,3,"ng-container",1),n.\u0275\u0275elementEnd()),2&o&&(n.\u0275\u0275advance(3),n.\u0275\u0275property("ngForOf",w.files))},directives:[te._f,te.sv,te.yH,te.dt,te.NP,y.NgForOf,y.NgIf],styles:[""]}),v})(),La=(()=>{class v extends Lr{constructor(o,w,q,re,Ve){super(o,w,q,re,Ve)}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(Rr.AttributeSerializerService),n.\u0275\u0275directiveInject(Cr),n.\u0275\u0275directiveInject(Ge.G),n.\u0275\u0275directiveInject(Gr),n.\u0275\u0275directiveInject(c.gN))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["druid-forms-form-hidden"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(o,w){},encapsulation:2}),v})(),Wu=(()=>{class v{constructor(o,w,q,re){this.data=o,this.dialogRef=w,this.fb=q,this.attributeSerializer=re,this.contexts=[],this.formGroup=this.fb.group({valuesMapping:this.fb.control("")})}ngOnInit(){}submit(){this.data.panelFormGroup.get("settings").clear(),this.attributeSerializer.serialize(this.formGroup.value,"root").attributes.forEach(o=>{console.log("formly repeating editor form"),console.log(this.attributeSerializer.convertToGroup(o)),this.data.panelFormGroup.get("settings").push(this.attributeSerializer.convertToGroup(o))})}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(Kr.WI),n.\u0275\u0275directiveInject(Kr.so),n.\u0275\u0275directiveInject(c.qu),n.\u0275\u0275directiveInject(Rr.AttributeSerializerService))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["classifieds-form-section-editor"]],decls:8,vars:2,consts:[[3,"formGroup","ngSubmit"],["matInput","","formControlName","valuesMapping"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"]],template:function(o,w){1&o&&(n.\u0275\u0275elementStart(0,"form",0),n.\u0275\u0275listener("ngSubmit",function(){return w.submit()}),n.\u0275\u0275elementStart(1,"div"),n.\u0275\u0275elementStart(2,"mat-form-field"),n.\u0275\u0275elementStart(3,"mat-label"),n.\u0275\u0275text(4,"Values Mapping"),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(5,"input",1),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"button",2),n.\u0275\u0275text(7,"Save"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&o&&(n.\u0275\u0275property("formGroup",w.formGroup),n.\u0275\u0275advance(6),n.\u0275\u0275property("disabled",!w.formGroup.valid))},directives:[Ln.KE,go.lW,c._Y,c.JL,c.sg,Ln.hX,rn.Nt,c.Fj,c.JJ,c.u,Kr.ZT],styles:[""]}),v})();const Xu=({handler:v})=>new qe.ContentPlugin({id:"form_input",title:"Form Input",selectionComponent:void 0,editorComponent:Ai,renderComponent:di,handler:v}),Vo=({handler:v})=>new qe.ContentPlugin({id:"form_select",title:"Form Select",selectionComponent:void 0,editorComponent:Ai,renderComponent:Xr,handler:v}),Qu=({handler:v})=>new qe.ContentPlugin({id:"form_radiogroup",title:"Form Radiogroup",selectionComponent:void 0,editorComponent:Ai,renderComponent:ls,handler:v}),lu=({handler:v})=>new qe.ContentPlugin({id:"form_textarea",title:"Form Textarea",selectionComponent:void 0,editorComponent:Ai,renderComponent:Zi,handler:v}),El=({handler:v})=>new qe.ContentPlugin({id:"form_slider",title:"Form Slider",selectionComponent:void 0,editorComponent:Ai,renderComponent:su,handler:v}),uu=({handler:v})=>new qe.ContentPlugin({id:"form_toggle",title:"Form Toggle",selectionComponent:void 0,editorComponent:Ai,renderComponent:ra,handler:v}),Dc=({handler:v})=>new qe.ContentPlugin({id:"form_checkbox",title:"Form Checkbox",selectionComponent:void 0,editorComponent:Ai,renderComponent:qu,handler:v}),Ua=({handler:v})=>new qe.ContentPlugin({id:"form_datepicker",title:"Form Datepicker",selectionComponent:void 0,editorComponent:Ai,renderComponent:ja,handler:v}),Ju=({handler:v})=>new qe.ContentPlugin({id:"form_autocomplete",title:"Form Autocomplete",selectionComponent:void 0,editorComponent:Ai,renderComponent:au,handler:v}),Sl=({handler:v})=>new qe.ContentPlugin({id:"form_media",title:"Form Media",selectionComponent:void 0,editorComponent:Ai,renderComponent:Ba,handler:v}),Ho=({handler:v})=>new qe.ContentPlugin({id:"form_hidden",title:"Form Hidden",selectionComponent:void 0,editorComponent:Ai,renderComponent:La,handler:v});let Pl=(()=>{class v{constructor(o,w,q){[Xu({handler:q}),Vo({handler:q}),lu({handler:q}),Qu({handler:q}),El({handler:q}),uu({handler:q}),Dc({handler:q}),Ua({handler:q}),Ju({handler:q}),Sl({handler:q}),Ho({handler:q})].forEach(re=>o.register(re)),[new le.tA({id:"form_section",name:"form_section",title:"Form Section",editorComponent:Wu,renderComponent:Si})].forEach(re=>w.register(re))}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275inject(qe.ContentPluginManager),n.\u0275\u0275inject(le.er),n.\u0275\u0275inject(Is))},v.\u0275mod=n.\u0275\u0275defineNgModule({type:v}),v.\u0275inj=n.\u0275\u0275defineInjector({imports:[[y.CommonModule,c.u5,c.UX,ze.MaterialModule,jo.sm,vr.zG,te.bB]]}),v})();function ia(v){const h={};for(const o of v.keys()){const w=v.getAll(o);null!==w&&(h[o]=w)}return h}let cu=(()=>{class v{constructor(o,w){this.transferState=w,this.isCacheActive=!0,o.isStable.pipe((0,Qn.h)(q=>q),(0,X.q)(1)).subscribe(()=>{this.isCacheActive=!1})}invalidateCacheEntry(o){Object.keys(this.transferState.store).forEach(w=>w.includes(o)?this.transferState.remove((0,e.Cb)(w)):null)}makeCacheKey(o,w,q){const re=q.keys().sort().map(mt=>`${mt}=${q.getAll(mt)}`).join("&");return(0,e.Cb)(("GET"===o?"G.":"H.")+w+"?"+re)}intercept(o,w){if("GET"!==o.method&&"HEAD"!==o.method&&(this.isCacheActive=!1,this.invalidateCacheEntry(o.url)),!this.isCacheActive)return w.handle(o);const q=this.makeCacheKey(o.method,o.url,o.params);if(this.transferState.hasKey(q)){const re=this.transferState.get(q,{});return(0,He.of)(new x.HttpResponse({body:re.body,headers:new x.HttpHeaders(re.headers),status:re.status,statusText:re.statusText,url:re.url}))}return w.handle(o).pipe((0,ue.b)(Ve=>{Ve instanceof x.HttpResponse&&this.transferState.set(q,{body:Ve.body,headers:ia(Ve.headers),status:Ve.status,statusText:Ve.statusText,url:Ve.url||""})}))}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275inject(n.ApplicationRef),n.\u0275\u0275inject(e.ki))},v.\u0275prov=n.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac}),v})(),za=(()=>{class v{}return v.\u0275fac=function(o){return new(o||v)},v.\u0275mod=n.\u0275\u0275defineNgModule({type:v}),v.\u0275inj=n.\u0275\u0275defineInjector({providers:[cu,{provide:x.HTTP_INTERCEPTORS,useExisting:cu,multi:!0}],imports:[[e.Cu]]}),v})();const gi=new n.InjectionToken("AlienaliasSettings");class fu{constructor(h){h&&(this.openSearchDomain=h.openSearchDomain)}}var lo=u(7260),oa=u(4379),pu=u(7628);const Ga=["mfeReactComponent"];let sa=(()=>{class v{constructor(){}ngOnChanges(o){this.render()}ngAfterViewInit(){this.render()}ngOnDestroy(){pu.unmountComponentAtNode(this.containerRef.nativeElement)}render(){const o=this.component();pu.render(o,this.containerRef.nativeElement)}}return v.\u0275fac=function(o){return new(o||v)},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["druid-mfe-react"]],viewQuery:function(o,w){if(1&o&&n.\u0275\u0275viewQuery(Ga,5),2&o){let q;n.\u0275\u0275queryRefresh(q=n.\u0275\u0275loadQuery())&&(w.containerRef=q.first)}},inputs:{component:"component"},features:[n.\u0275\u0275NgOnChangesFeature],decls:2,vars:0,consts:[["mfeReactComponent",""]],template:function(o,w){1&o&&n.\u0275\u0275element(0,"span",null,0)},encapsulation:2}),v})(),hu=(()=>{class v{}return v.\u0275fac=function(o){return new(o||v)},v.\u0275mod=n.\u0275\u0275defineNgModule({type:v}),v.\u0275inj=n.\u0275\u0275defineInjector({imports:[[]]}),v})();const mu=["appContainer"];class Tl{constructor(h){h&&(this.type=h.type&&""!==h.type?h.type:"module",this.remoteEntry=h.remoteEntry,this.componentName=h.componentName,this.exposedModule=h.exposedModule,this.remoteName=h.remoteName&&""!==h.remoteName?h.remoteName:void 0)}}let gu=(()=>{class v{constructor(o){this.attributeSerializer=o}handleFile(o){return(0,He.of)([])}handlesType(o){return!1}implementsRendererOverride(){return!1}hasRendererOverride(o){return(0,He.of)(!1)}isDynamic(o){return!1}isData(o){return!1}getBindings(o,w,q){return(0,He.of)([])}fetchDynamicData(o,w){return(0,He.of)(new vr.qz)}buildDynamicItems(o,w){return(0,He.of)([])}toObject(o){return(0,He.of)(new Tl(this.attributeSerializer.deserializeAsObject(o)))}buildSettings(o){return this.attributeSerializer.serialize(o,"root").attributes}stateDefinition(o){return(0,He.of)({autocomplete:{input:""},value:void 0})}editorOptions(o){return(0,He.of)(new qe.ContentPluginEditorOptions)}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275inject(Rr.AttributeSerializerService))},v.\u0275prov=n.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac,providedIn:"root"}),v})(),jc=(()=>{class v{constructor(o,w,q,re,Ve){this.data=o,this.dialogRef=w,this.fb=q,this.handler=re,this.attributeSerializer=Ve,this.bindableOptions=[],this.formGroup=this.fb.group({type:this.fb.control("module",[c.kI.required]),remoteEntry:this.fb.control("",[c.kI.required]),exposedModule:this.fb.control("",[c.kI.required]),componentName:this.fb.control("",[c.kI.required]),remoteName:this.fb.control("")}),this.paneIndex=o.paneIndex,this.pane=o.pane}get paneGroup(){return this.data.panelFormGroup.get("panes").at(this.paneIndex)}ngOnInit(){this.data.pane?this.handler.toObject(this.data.pane.settings).subscribe(o=>{this.formGroup.get("type").setValue(o.type&&""!==o.type?o.type:"module"),this.formGroup.get("remoteEntry").setValue(o.remoteEntry),this.formGroup.get("exposedModule").setValue(o.exposedModule),this.formGroup.get("componentName").setValue(o.componentName),this.formGroup.get("remoteName").setValue(o.remoteName)}):(this.data.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:this.data.plugin.id,name:new c.NI(""),label:new c.NI(""),rule:new c.NI(""),settings:this.fb.array([])})),this.paneIndex=this.data.panelFormGroup.get("panes").length-1,this.pane=new le.X6(this.data.panelFormGroup.get("panes").at(this.paneIndex).value)),this.bindableOptions=this.data.panelFormGroup.get("panes").controls.reduce((o,w)=>w.get("name").value?[...o,w.get("name").value]:[...o],[])}submit(){console.log(this.formGroup.value);const o=new Tl(this.formGroup.value);console.log(o),this.paneGroup.get("settings").clear(),this.handler.buildSettings(o).map(q=>this.attributeSerializer.convertToGroup(q)).forEach(q=>this.paneGroup.get("settings").push(q)),this.dialogRef.close()}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(Kr.WI),n.\u0275\u0275directiveInject(Kr.so),n.\u0275\u0275directiveInject(c.qu),n.\u0275\u0275directiveInject(gu),n.\u0275\u0275directiveInject(Rr.AttributeSerializerService))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["druid-outsider-outside-app-editor"]],inputs:{bindableOptions:"bindableOptions"},decls:32,vars:1,consts:[[3,"formGroup","ngSubmit"],["formControlName","type","required",""],["value","module"],["value","script"],["matInput","","formControlName","remoteEntry","required",""],["matInput","","formControlName","exposedModule","required",""],["matInput","","formControlName","componentName","required",""],["matInput","","formControlName","remoteName"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close",""]],template:function(o,w){1&o&&(n.\u0275\u0275elementStart(0,"form",0),n.\u0275\u0275listener("ngSubmit",function(){return w.submit()}),n.\u0275\u0275elementStart(1,"div"),n.\u0275\u0275elementStart(2,"mat-form-field"),n.\u0275\u0275elementStart(3,"mat-label"),n.\u0275\u0275text(4,"Remote Entry"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"mat-select",1),n.\u0275\u0275elementStart(6,"mat-option",2),n.\u0275\u0275text(7,"Module"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(8,"mat-option",3),n.\u0275\u0275text(9,"Script"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(10,"div"),n.\u0275\u0275elementStart(11,"mat-form-field"),n.\u0275\u0275elementStart(12,"mat-label"),n.\u0275\u0275text(13,"Remote Entry"),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(14,"input",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(15,"div"),n.\u0275\u0275elementStart(16,"mat-form-field"),n.\u0275\u0275elementStart(17,"mat-label"),n.\u0275\u0275text(18,"Exposed Module"),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(19,"input",5),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(20,"div"),n.\u0275\u0275elementStart(21,"mat-form-field"),n.\u0275\u0275elementStart(22,"mat-label"),n.\u0275\u0275text(23,"Component Name"),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(24,"input",6),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(25,"div"),n.\u0275\u0275elementStart(26,"mat-form-field"),n.\u0275\u0275elementStart(27,"mat-label"),n.\u0275\u0275text(28,"Remote Name"),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(29,"input",7),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(30,"button",8),n.\u0275\u0275text(31,"Save"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&o&&n.\u0275\u0275property("formGroup",w.formGroup)},directives:[Ln.KE,ro.gD,Ui.ey,go.lW,c._Y,c.JL,c.sg,Ln.hX,c.JJ,c.u,c.Q7,rn.Nt,c.Fj,Kr.ZT],styles:[""]}),v})(),ec=(()=>{class v{constructor(o){this.attributeSerializer=o,this.objectSettings$=new jr.X(void 0),this.contexts$=new jr.X([]),this.settings$=new jr.X([]),this.settingsSub=this.settings$.pipe((0,Se.U)(w=>w?new Tl(this.attributeSerializer.deserializeAsObject(w)):void 0),(0,ue.b)(w=>this.objectSettings$.next(w))).subscribe(),this.renderAppSub=this.objectSettings$.pipe((0,lo.T)(1),(0,G.w)(w=>new ve.y(q=>{(0,oa.V)(w.type&&"script"!==w.type?{type:"module",remoteEntry:w.remoteEntry,exposedModule:w.exposedModule}:{type:"script",remoteEntry:w.remoteEntry,exposedModule:w.exposedModule,remoteName:w.remoteName}).then(re=>{q.next(re[w.componentName&&""!==w.componentName?w.componentName:"default"]),q.complete()})}).pipe((0,Se.U)(q=>({s:w,c:q})))),(0,ue.b)(({s:w,c:q})=>{this.viewContainer.clear(),w.type&&"script"!==w.type?this.viewContainer.createComponent(q):this.viewContainer.createComponent(sa).instance.component=q})).subscribe()}set settings(o){this.settings$.next(o)}set contexts(o){this.contexts$.next(o)}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(Rr.AttributeSerializerService))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["druid-outsider-outside-app-renderer"]],viewQuery:function(o,w){if(1&o&&n.\u0275\u0275viewQuery(mu,7,n.ViewContainerRef),2&o){let q;n.\u0275\u0275queryRefresh(q=n.\u0275\u0275loadQuery())&&(w.viewContainer=q.first)}},inputs:{settings:"settings",contexts:"contexts"},decls:2,vars:0,consts:[["appContainer",""]],template:function(o,w){1&o&&n.\u0275\u0275elementContainer(0,null,0)},styles:[""]}),v})(),Bc=(()=>{class v{constructor(o,w){o.register((({handler:v})=>new qe.ContentPlugin({id:"outside_app",title:"Outside App",selectionComponent:void 0,editorComponent:jc,renderComponent:ec,handler:v}))({handler:w}))}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275inject(qe.ContentPluginManager),n.\u0275\u0275inject(gu))},v.\u0275mod=n.\u0275\u0275defineNgModule({type:v}),v.\u0275inj=n.\u0275\u0275defineInjector({imports:[[y.CommonModule,ze.MaterialModule,c.UX]]}),v})();var vu=u(3350);let nc=(()=>{class v{constructor(o,w){this.fb=o,this.controlContainer=w,this.context$=new jr.X(void 0),this.formGroup=this.fb.group({remoteEntry:this.fb.control("",[c.kI.required]),exposedModule:this.fb.control("",[c.kI.required]),moduleName:this.fb.control("",[c.kI.required])}),this.onTouched=()=>{}}set context(o){this.context$.next(o)}ngOnInit(){this.context$.subscribe(o=>{this.formGroup.setValue(o?{remoteEntry:o.data.remoteEntry,exposedModule:o.data.exposedModule,moduleName:o.data.moduleName}:{remoteEntry:"",exposedModule:"",moduleName:""})})}writeValue(o){o&&this.formGroup.setValue(o,{emitEvent:!1})}registerOnChange(o){this.formGroup.valueChanges.subscribe(o)}registerOnTouched(o){this.onTouched=o}setDisabledState(o){o?this.formGroup.disable():this.formGroup.enable()}validate(o){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"source is invalid"}}}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(c.qu),n.\u0275\u0275directiveInject(c.gN))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["classifieds-ui-context-module-form"]],inputs:{context:"context"},features:[n.\u0275\u0275ProvidersFeature([{provide:c.JU,useExisting:(0,n.forwardRef)(()=>v),multi:!0},{provide:c.Cf,useExisting:(0,n.forwardRef)(()=>v),multi:!0}])],decls:16,vars:1,consts:[[3,"formGroup"],["matInput","","formControlName","remoteEntry","required",""],["matInput","","formControlName","exposedModule","required",""],["matInput","","formControlName","moduleName","required",""]],template:function(o,w){1&o&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275elementStart(1,"div"),n.\u0275\u0275elementStart(2,"mat-form-field"),n.\u0275\u0275elementStart(3,"mat-label"),n.\u0275\u0275text(4,"Remote Entry"),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(5,"input",1),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"div"),n.\u0275\u0275elementStart(7,"mat-form-field"),n.\u0275\u0275elementStart(8,"mat-label"),n.\u0275\u0275text(9,"Exposed Module"),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(10,"input",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(11,"div"),n.\u0275\u0275elementStart(12,"mat-form-field"),n.\u0275\u0275elementStart(13,"mat-label"),n.\u0275\u0275text(14,"Module Name"),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(15,"input",3),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&o&&n.\u0275\u0275property("formGroup",w.formGroup)},directives:[Ln.KE,c.JL,c.sg,Ln.hX,rn.Nt,c.Fj,c.JJ,c.u,c.Q7],styles:[""]}),v})(),Lc=(()=>{class v{constructor(o,w){this.fb=o,this.controlContainer=w}ngOnInit(){this.controlContainer.control.addControl("adaptor",this.fb.control("data",c.kI.required)),this.controlContainer.control.addControl("data",this.fb.control(""))}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275directiveInject(c.qu),n.\u0275\u0275directiveInject(c.gN))},v.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["classifieds-ui-context-module-editor"]],viewQuery:function(o,w){if(1&o&&n.\u0275\u0275viewQuery(nc,7),2&o){let q;n.\u0275\u0275queryRefresh(q=n.\u0275\u0275loadQuery())&&(w.contextModuleFormComp=q.first)}},inputs:{context:"context"},decls:2,vars:2,consts:[[3,"formGroup"],["formControlName","data",3,"context"]],template:function(o,w){1&o&&(n.\u0275\u0275elementContainerStart(0,0),n.\u0275\u0275element(1,"classifieds-ui-context-module-form",1),n.\u0275\u0275elementContainerEnd()),2&o&&(n.\u0275\u0275property("formGroup",w.controlContainer.control),n.\u0275\u0275advance(1),n.\u0275\u0275property("context",w.context))},directives:[nc,c.JL,c.sg,c.JJ,c.u],styles:[""]}),v})(),Uc=(()=>{class v{constructor(o,w,q){this.actions$=o,this.moduleLoaderService=w,this.es=q,this.setPage$=(0,S.GW)(()=>this.actions$.pipe((0,S.l4)(le.YA),(0,ue.b)(({page:re})=>{console.log("tractor beam capture page",re),re.contexts&&Array.isArray(re.contexts)&&re.contexts.forEach(Ve=>{if("module"===Ve.plugin)return this.moduleLoaderService.loadModule(()=>(0,oa.V)({type:"module",remoteEntry:Ve.data.remoteEntry,exposedModule:Ve.data.exposedModule}).then(mt=>mt[Ve.data.moduleName])).subscribe()})})),{dispatch:!1}),this.setPageInfo$=(0,S.GW)(()=>this.actions$.pipe((0,S.l4)(le.D8),(0,ue.b)(({info:re})=>{console.log("tractor beam info",re)}),(0,G.w)(({info:re})=>this.es.getEntityCollectionService("PanelPage").getByKey(re.id)),(0,ue.b)(re=>{re.contexts&&Array.isArray(re.contexts)&&re.contexts.forEach(Ve=>{if("module"===Ve.plugin)return this.moduleLoaderService.loadModule(()=>(0,oa.V)({type:"module",remoteEntry:Ve.data.remoteEntry,exposedModule:Ve.data.exposedModule}).then(mt=>mt[Ve.data.moduleName])).subscribe()})})),{dispatch:!1})}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275inject(S.eX),n.\u0275\u0275inject(se.ModuleLoaderService),n.\u0275\u0275inject(Z.jn))},v.\u0275prov=n.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac}),v})(),yu=(()=>{class v{constructor(o){this.moduleLoaderService=o}resolve(o,w,q){return console.log("module resolver context",o,w,q),this.moduleLoaderService.loadModule(()=>(0,oa.V)({type:"module",remoteEntry:w.remoteEntry,exposedModule:w.exposedModule}).then(re=>re[w.moduleName]))}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275inject(se.ModuleLoaderService))},v.\u0275prov=n.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac}),v})(),_u=(()=>{class v{constructor(o,w,q){this.moduleLoader=o,this.pageBuilderFacade=w,this.es=q}loadPlugins(){return this.pageBuilderFacade.getPageInfo$.pipe((0,ue.b)(()=>console.log("started loading external modules")),(0,G.w)(o=>(o&&o.id?this.es.getEntityCollectionService("PanelPage").getByKey(o.id):(0,He.of)(void 0)).pipe((0,ht.d)(void 0))),(0,G.w)(o=>o?(0,Ye.D)(o.contexts.filter(w=>"module"===w.plugin).map(w=>this.moduleLoader.loadModule(()=>(0,oa.V)({type:"module",remoteEntry:w.data.remoteEntry,exposedModule:w.data.exposedModule}).then(q=>q[w.data.moduleName])))).pipe((0,vu.g)(1),(0,ht.d)([])):(0,He.of)([])),(0,ue.b)(()=>console.log("completed loading external modules")),(0,Se.U)(()=>!0),(0,X.q)(1))}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275inject(se.ModuleLoaderService),n.\u0275\u0275inject(le.QK),n.\u0275\u0275inject(Z.jn))},v.\u0275prov=n.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac,providedIn:"root"}),v})(),Gc=(()=>{class v{constructor(o,w,q,re){w.addDiscovery(re),o.register((({moduleResolver:v})=>new xe.eO({id:"module",name:"module",title:"Module",baseObject:{},resolver:v,editorComponent:Lc}))({moduleResolver:q}))}}return v.\u0275fac=function(o){return new(o||v)(n.\u0275\u0275inject(xe.UV),n.\u0275\u0275inject(qe.ContentPluginManager),n.\u0275\u0275inject(yu),n.\u0275\u0275inject(_u))},v.\u0275mod=n.\u0275\u0275defineNgModule({type:v}),v.\u0275inj=n.\u0275\u0275defineInjector({providers:[yu],imports:[[y.CommonModule,c.u5,c.UX,xe.Lu,ze.MaterialModule,S.sQ.forFeature([Uc])]]}),v})();for(var js,tl,ma,Gl,rc=u(7125),Ko=u(6510),$a=function(v,h,o,w){return new(o||(o=Promise))(function(re,Ve){function mt(gn){try{It(w.next(gn))}catch(Bn){Ve(Bn)}}function Qt(gn){try{It(w.throw(gn))}catch(Bn){Ve(Bn)}}function It(gn){gn.done?re(gn.value):function q(re){return re instanceof o?re:new o(function(Ve){Ve(re)})}(gn.value).then(mt,Qt)}It((w=w.apply(v,h||[])).next())})},ic=function(v,h){var w,q,re,Ve,o={label:0,sent:function(){if(1&re[0])throw re[1];return re[1]},trys:[],ops:[]};return Ve={next:mt(0),throw:mt(1),return:mt(2)},"function"==typeof Symbol&&(Ve[Symbol.iterator]=function(){return this}),Ve;function mt(It){return function(gn){return function Qt(It){if(w)throw new TypeError("Generator is already executing.");for(;o;)try{if(w=1,q&&(re=2&It[0]?q.return:It[0]?q.throw||((re=q.return)&&re.call(q),0):q.next)&&!(re=re.call(q,It[1])).done)return re;switch(q=0,re&&(It=[2&It[0],re.value]),It[0]){case 0:case 1:re=It;break;case 4:return o.label++,{value:It[1],done:!1};case 5:o.label++,q=It[1],It=[0];continue;case 7:It=o.ops.pop(),o.trys.pop();continue;default:if(!(re=(re=o.trys).length>0&&re[re.length-1])&&(6===It[0]||2===It[0])){o=0;continue}if(3===It[0]&&(!re||It[1]>re[0]&&It[1]<re[3])){o.label=It[1];break}if(6===It[0]&&o.label<re[1]){o.label=re[1],re=It;break}if(re&&o.label<re[2]){o.label=re[2],o.ops.push(It);break}re[2]&&o.ops.pop(),o.trys.pop();continue}It=h.call(v,o)}catch(gn){It=[6,gn],q=0}finally{w=re=0}if(5&It[0])throw It[1];return{value:It[0]?It[1]:void 0,done:!0}}([It,gn])}}},bu=function v(h){var o=this;this.getId=function(w){return $a(o,void 0,void 0,function(){var q,re;return ic(this,function(Ve){return q=JSON.stringify(w),re=this.getHttpRequest("AWSCognitoIdentityService.GetId",q),[2,this.fetchRequestHandler.handle(re).then(function(mt){return mt.response.body.getReader().read().then(function(It){return JSON.parse(String.fromCharCode.apply(null,It.value))})}).catch(function(){throw new Error("CWR: Failed to retrieve Cognito identity")})]})})},this.getOpenIdToken=function(w){return $a(o,void 0,void 0,function(){var q,re;return ic(this,function(Ve){return q=JSON.stringify(w),re=this.getHttpRequest("AWSCognitoIdentityService.GetOpenIdToken",q),[2,this.fetchRequestHandler.handle(re).then(function(mt){return mt.response.body.getReader().read().then(function(It){return JSON.parse(String.fromCharCode.apply(null,It.value))})}).catch(function(){throw new Error("CWR: Failed to retrieve Cognito OpenId token")})]})})},this.getCredentialsForIdentity=function(w){return $a(o,void 0,void 0,function(){var q,re;return ic(this,function(Ve){return q=JSON.stringify({IdentityId:w}),re=this.getHttpRequest("AWSCognitoIdentityService.GetCredentialsForIdentity",q),[2,this.fetchRequestHandler.handle(re).then(function(mt){return mt.response.body.getReader().read().then(function(It){var Bn=JSON.parse(String.fromCharCode.apply(null,It.value)),Pr=Bn.Credentials;return{identityId:Bn.IdentityId,accessKeyId:Pr.AccessKeyId,secretAccessKey:Pr.SecretAccessKey,sessionToken:Pr.SessionToken,expiration:new Date(1e3*Pr.Expiration)}})}).catch(function(){throw new Error("CWR: Failed to retrieve credentials for Cognito identity")})]})})},this.getHttpRequest=function(w,q){return new Ko.aW({method:"POST",headers:{"content-type":"application/x-amz-json-1.1","x-amz-target":w},protocol:"https:",hostname:o.hostname,body:q})},this.hostname="cognito-identity."+h.region+".amazonaws.com",this.fetchRequestHandler=h.fetchRequestHandler},wu=u(1237),la=function(){return la=Object.assign||function(v){for(var h,o=1,w=arguments.length;o<w;o++)for(var q in h=arguments[o])Object.prototype.hasOwnProperty.call(h,q)&&(v[q]=h[q]);return v},la.apply(this,arguments)},qc=function v(h){var o=this;this.assumeRoleWithWebIdentity=function(w){return function(v,h,o,w){return new(o||(o=Promise))(function(re,Ve){function mt(gn){try{It(w.next(gn))}catch(Bn){Ve(Bn)}}function Qt(gn){try{It(w.throw(gn))}catch(Bn){Ve(Bn)}}function It(gn){gn.done?re(gn.value):function q(re){return re instanceof o?re:new o(function(Ve){Ve(re)})}(gn.value).then(mt,Qt)}It((w=w.apply(v,h||[])).next())})}(o,void 0,void 0,function(){var q,re,Ve;return function(v,h){var w,q,re,Ve,o={label:0,sent:function(){if(1&re[0])throw re[1];return re[1]},trys:[],ops:[]};return Ve={next:mt(0),throw:mt(1),return:mt(2)},"function"==typeof Symbol&&(Ve[Symbol.iterator]=function(){return this}),Ve;function mt(It){return function(gn){return function Qt(It){if(w)throw new TypeError("Generator is already executing.");for(;o;)try{if(w=1,q&&(re=2&It[0]?q.return:It[0]?q.throw||((re=q.return)&&re.call(q),0):q.next)&&!(re=re.call(q,It[1])).done)return re;switch(q=0,re&&(It=[2&It[0],re.value]),It[0]){case 0:case 1:re=It;break;case 4:return o.label++,{value:It[1],done:!1};case 5:o.label++,q=It[1],It=[0];continue;case 7:It=o.ops.pop(),o.trys.pop();continue;default:if(!(re=(re=o.trys).length>0&&re[re.length-1])&&(6===It[0]||2===It[0])){o=0;continue}if(3===It[0]&&(!re||It[1]>re[0]&&It[1]<re[3])){o.label=It[1];break}if(6===It[0]&&o.label<re[1]){o.label=re[1],re=It;break}if(re&&o.label<re[2]){o.label=re[2],o.ops.push(It);break}re[2]&&o.ops.pop(),o.trys.pop();continue}It=h.call(v,o)}catch(gn){It=[6,gn],q=0}finally{w=re=0}if(5&It[0])throw It[1];return{value:It[0]?It[1]:void 0,done:!0}}([It,gn])}}}(this,function(mt){return q=la(la({},w),{Action:"AssumeRoleWithWebIdentity",Version:"2011-06-15"}),re=new URLSearchParams(Object.entries(q)).toString(),Ve=new Ko.aW({method:"POST",headers:{"content-type":"application/x-www-form-urlencoded",host:this.hostname},protocol:"https:",hostname:this.hostname,body:re}),[2,this.fetchRequestHandler.handle(Ve).then(function(Qt){return Qt.response.body.getReader().read().then(function(gn){var Hn=String.fromCharCode.apply(null,gn.value);return{accessKeyId:Hn.split("<AccessKeyId>")[1].split("</AccessKeyId>")[0],secretAccessKey:Hn.split("<SecretAccessKey>")[1].split("</SecretAccessKey>")[0],sessionToken:Hn.split("<SessionToken>")[1].split("</SessionToken>")[0],expiration:new Date(Hn.split("<Expiration>")[1].split("</Expiration>")[0])}})}).catch(function(){throw new Error("CWR: Failed to retrieve credentials from STS")})]})})},this.hostname="sts."+h.region+".amazonaws.com",this.fetchRequestHandler=h.fetchRequestHandler},Va="cwr_c",Ha=function(v,h,o,w){return new(o||(o=Promise))(function(re,Ve){function mt(gn){try{It(w.next(gn))}catch(Bn){Ve(Bn)}}function Qt(gn){try{It(w.throw(gn))}catch(Bn){Ve(Bn)}}function It(gn){gn.done?re(gn.value):function q(re){return re instanceof o?re:new o(function(Ve){Ve(re)})}(gn.value).then(mt,Qt)}It((w=w.apply(v,h||[])).next())})},Ol=function(v,h){var w,q,re,Ve,o={label:0,sent:function(){if(1&re[0])throw re[1];return re[1]},trys:[],ops:[]};return Ve={next:mt(0),throw:mt(1),return:mt(2)},"function"==typeof Symbol&&(Ve[Symbol.iterator]=function(){return this}),Ve;function mt(It){return function(gn){return function Qt(It){if(w)throw new TypeError("Generator is already executing.");for(;o;)try{if(w=1,q&&(re=2&It[0]?q.return:It[0]?q.throw||((re=q.return)&&re.call(q),0):q.next)&&!(re=re.call(q,It[1])).done)return re;switch(q=0,re&&(It=[2&It[0],re.value]),It[0]){case 0:case 1:re=It;break;case 4:return o.label++,{value:It[1],done:!1};case 5:o.label++,q=It[1],It=[0];continue;case 7:It=o.ops.pop(),o.trys.pop();continue;default:if(!(re=(re=o.trys).length>0&&re[re.length-1])&&(6===It[0]||2===It[0])){o=0;continue}if(3===It[0]&&(!re||It[1]>re[0]&&It[1]<re[3])){o.label=It[1];break}if(6===It[0]&&o.label<re[1]){o.label=re[1],re=It;break}if(re&&o.label<re[2]){o.label=re[2],o.ops.push(It);break}re[2]&&o.ops.pop(),o.trys.pop();continue}It=h.call(v,o)}catch(gn){It=[6,gn],q=0}finally{w=re=0}if(5&It[0])throw It[1];return{value:It[0]?It[1]:void 0,done:!0}}([It,gn])}}},uc=function(){function v(h){var o=this;this.ChainAnonymousCredentialsProvider=function(){return Ha(o,void 0,void 0,function(){return Ol(this,function(q){return[2,this.AnonymousCredentialsProvider().catch(this.AnonymousStorageCredentialsProvider).catch(this.AnonymousCognitoCredentialsProvider)]})})},this.AnonymousCredentialsProvider=function(){return Ha(o,void 0,void 0,function(){var q=this;return Ol(this,function(re){return[2,new Promise(function(Ve,mt){if(q.renewCredentials())return mt();Ve(q.credentials)})]})})},this.AnonymousStorageCredentialsProvider=function(){return Ha(o,void 0,void 0,function(){var q=this;return Ol(this,function(re){return[2,new Promise(function(Ve,mt){var Qt;try{Qt=JSON.parse(localStorage.getItem(Va))}catch{return mt()}if(Qt.expiration=new Date(Qt.expiration),q.credentials=Qt,q.renewCredentials())return mt();q.credentials=Qt,Ve(Qt)})]})})},this.AnonymousCognitoCredentialsProvider=function(){return Ha(o,void 0,void 0,function(){var q=this;return Ol(this,function(re){return[2,this.cognitoIdentityClient.getId({IdentityPoolId:this.config.identityPoolId}).then(function(Ve){return q.cognitoIdentityClient.getOpenIdToken(Ve)}).then(function(Ve){return q.stsClient.assumeRoleWithWebIdentity({RoleArn:q.config.guestRoleArn,RoleSessionName:"cwr",WebIdentityToken:Ve.Token})}).then(function(Ve){q.credentials=Ve;try{localStorage.setItem(Va,JSON.stringify(Ve))}catch{}return Ve})]})})};var w=h.identityPoolId.split(":")[0];this.config=h,this.stsClient=new qc({fetchRequestHandler:new wu.B,region:w}),this.cognitoIdentityClient=new bu({fetchRequestHandler:new wu.B,region:w})}return v.prototype.renewCredentials=function(){if(!this.credentials||!this.credentials.expiration)return!0;var h=new Date(this.credentials.expiration.getTime()-3e4);return new Date>h},v}(),Ka=function(v,h,o,w){return new(o||(o=Promise))(function(re,Ve){function mt(gn){try{It(w.next(gn))}catch(Bn){Ve(Bn)}}function Qt(gn){try{It(w.throw(gn))}catch(Bn){Ve(Bn)}}function It(gn){gn.done?re(gn.value):function q(re){return re instanceof o?re:new o(function(Ve){Ve(re)})}(gn.value).then(mt,Qt)}It((w=w.apply(v,h||[])).next())})},Ml=function(v,h){var w,q,re,Ve,o={label:0,sent:function(){if(1&re[0])throw re[1];return re[1]},trys:[],ops:[]};return Ve={next:mt(0),throw:mt(1),return:mt(2)},"function"==typeof Symbol&&(Ve[Symbol.iterator]=function(){return this}),Ve;function mt(It){return function(gn){return function Qt(It){if(w)throw new TypeError("Generator is already executing.");for(;o;)try{if(w=1,q&&(re=2&It[0]?q.return:It[0]?q.throw||((re=q.return)&&re.call(q),0):q.next)&&!(re=re.call(q,It[1])).done)return re;switch(q=0,re&&(It=[2&It[0],re.value]),It[0]){case 0:case 1:re=It;break;case 4:return o.label++,{value:It[1],done:!1};case 5:o.label++,q=It[1],It=[0];continue;case 7:It=o.ops.pop(),o.trys.pop();continue;default:if(!(re=(re=o.trys).length>0&&re[re.length-1])&&(6===It[0]||2===It[0])){o=0;continue}if(3===It[0]&&(!re||It[1]>re[0]&&It[1]<re[3])){o.label=It[1];break}if(6===It[0]&&o.label<re[1]){o.label=re[1],re=It;break}if(re&&o.label<re[2]){o.label=re[2],o.ops.push(It);break}re[2]&&o.ops.pop(),o.trys.pop();continue}It=h.call(v,o)}catch(gn){It=[6,gn],q=0}finally{w=re=0}if(5&It[0])throw It[1];return{value:It[0]?It[1]:void 0,done:!0}}([It,gn])}}},cs=function(){function v(h){var o=this;this.ChainAnonymousCredentialsProvider=function(){return Ka(o,void 0,void 0,function(){return Ml(this,function(q){return[2,this.AnonymousCredentialsProvider().catch(this.AnonymousStorageCredentialsProvider).catch(this.AnonymousCognitoCredentialsProvider)]})})},this.AnonymousCredentialsProvider=function(){return Ka(o,void 0,void 0,function(){var q=this;return Ml(this,function(re){return[2,new Promise(function(Ve,mt){if(q.renewCredentials())return mt();Ve(q.credentials)})]})})},this.AnonymousStorageCredentialsProvider=function(){return Ka(o,void 0,void 0,function(){var q=this;return Ml(this,function(re){return[2,new Promise(function(Ve,mt){var Qt;try{Qt=JSON.parse(localStorage.getItem(Va))}catch{mt()}if(Qt.expiration=new Date(Qt.expiration),q.credentials=Qt,q.renewCredentials())return mt();q.credentials=Qt,Ve(Qt)})]})})},this.AnonymousCognitoCredentialsProvider=function(){return Ka(o,void 0,void 0,function(){var q,re=this;return Ml(this,function(Ve){return q=function(v){return function(){return v.client.getCredentialsForIdentity(v.identityPoolId)}}({client:this.cognitoIdentityClient,identityPoolId:this.config.identityPoolId}),[2,q().then(function(mt){re.credentials=mt;try{localStorage.setItem(Va,JSON.stringify(mt))}catch{}return mt})]})})};var w=h.identityPoolId.split(":")[0];this.config=h,this.cognitoIdentityClient=new bu({fetchRequestHandler:new wu.B,region:w})}return v.prototype.renewCredentials=function(){if(!this.credentials||!this.credentials.expiration)return!0;var h=new Date(this.credentials.expiration.getTime()-3e4);return new Date>h},v}(),cc=function(){function v(h){this.plugins=new Map,this.context=h}return v.prototype.addPlugin=function(h){var o=h.getPluginId();if(!o)throw new Error("InvalidPluginIdException");this.plugins.set(o,h),h.load(this.context)},v.prototype.updatePlugin=function(h,o){var w=this.plugins.get(h);w&&w.update instanceof Function&&w.update(o)},v.prototype.enable=function(){this.plugins.forEach(function(h){return h.enable()})},v.prototype.disable=function(){this.plugins.forEach(function(h){return h.disable()})},v.prototype.hasPlugin=function(h){return this.plugins.has(h)},v.prototype.record=function(h,o){var w=this.plugins.get(h);if(!(w&&w.record instanceof Function))throw new Error("AWS RUM Client record: Invalid plugin ID");w.record(o)},v}(),qa="com.amazon.rum.http_event",fc="com.amazon.rum.xray_trace_event",Wa="com.amazon.rum.performance_navigation_event",Xa=function(){return Xa=Object.assign||function(v){for(var h,o=1,w=arguments.length;o<w;o++)for(var q in h=arguments[o])Object.prototype.hasOwnProperty.call(h,q)&&(v[q]=h[q]);return v},Xa.apply(this,arguments)},ed="com.amazonaws.rum.dom-event",pc={enableMutationObserver:!1,events:[]},td=function(){function v(h){this.pluginId=ed,this.eventListenerMap=new Map,this.config=Xa(Xa({},pc),h),this.enabled=!1}return v.prototype.load=function(h){this.recordEvent=h.record,this.enable()},v.prototype.enable=function(){var h=this;"complete"===document.readyState?this.enabled||(this.addListeners(),this.config.enableMutationObserver&&this.observeDOMMutation(),this.enabled=!0):window.addEventListener("load",function(){return h.enable()})},v.prototype.disable=function(){!this.enabled||(this.removeListeners(),this.observer&&this.observer.disconnect(),this.enabled=!1)},v.prototype.getPluginId=function(){return this.pluginId},v.prototype.update=function(h){var o=this;h.forEach(function(w){o.addEventHandler(w),o.config.events.push(w)})},v.prototype.removeListeners=function(){var h=this;this.config.events.forEach(function(o){return h.removeEventHandler(o)})},v.prototype.addListeners=function(){var h=this;this.config.events.forEach(function(o){return h.addEventHandler(o)})},v.prototype.getEventListener=function(h){var o=this;return function(w){var q={version:"1.0.0",event:w.type,elementId:o.getElementId(w)};void 0!==h&&(q.cssLocator=h),o.recordEvent&&o.recordEvent("com.amazon.rum.dom_event",q)}},v.prototype.getElementId=function(h){return h.target?h.target instanceof Element&&h.target.id?h.target.id:h.target instanceof Node?h.target.nodeName:"":""},v.prototype.addEventHandler=function(h){var o=h.event,w=this.getEventListener(h.cssLocator),q=[],re=this.eventListenerMap.has(h)?this.eventListenerMap.get(h):[];if(h.cssLocator)document.querySelectorAll(h.cssLocator).forEach(function(Qt){q.push(Qt)});else if(h.elementId){var mt=document.getElementById(h.elementId);mt&&q.push(mt)}else h.element&&q.push(h.element);q.forEach(function(Qt){Qt.addEventListener(o,w),re.push({element:Qt,eventListener:w})}),this.eventListenerMap.set(h,re)},v.prototype.removeEventHandler=function(h){var o=this.eventListenerMap.get(h);o&&(o.forEach(function(w){w.element.removeEventListener(h.event,w.eventListener)}),this.eventListenerMap.delete(h))},v.prototype.observeDOMMutation=function(){var h=this;this.observer=new MutationObserver(function(){h.removeListeners(),h.addListeners()}),this.observer.observe(document,{childList:!0,subtree:!0})},v}(),xu=function(v){return v!==Object(v)&&null!=v},Fl=function(v,h){var o=function(v){var h={version:"1.0.0",type:"undefined",message:"undefined"};return void 0!==v.type&&(h.type=v.type),void 0!==v.message&&(h.message=v.message),void 0!==v.filename&&(h.filename=v.filename),void 0!==v.lineno&&(h.lineno=v.lineno),void 0!==v.colno&&(h.colno=v.colno),h}(v),w=v.error;return function(v){var h=typeof v;return("object"===h||"function"===h)&&!!v}(w)?function(v,h,o){h.name&&(v.type=h.name),h.message&&(v.message=h.message),h.fileName&&(v.filename=h.fileName),h.lineNumber&&(v.lineno=h.lineNumber),h.columnNumber&&(v.colno=h.columnNumber),o&&h.stack&&(v.stack=h.stack.length>o?h.stack.substring(0,o)+"...":h.stack)}(o,w,h):xu(w)&&function(v,h){"unhandledrejection"!==v.type&&(v.type=h.toString()),v.message=h.toString()}(o,w),o},Qa=function(){return Qa=Object.assign||function(v){for(var h,o=1,w=arguments.length;o<w;o++)for(var q in h=arguments[o])Object.prototype.hasOwnProperty.call(h,q)&&(v[q]=h[q]);return v},Qa.apply(this,arguments)},rd="com.amazonaws.rum.js-error",gc={stackTraceLength:200},id=function(){function v(h){var o=this;this.eventHandler=function(w){o.recordEvent("com.amazon.rum.js_error_event",Fl(w,o.config.stackTraceLength))},this.promiseRejectEventHandler=function(w){o.eventHandler({type:w.type,error:w.reason})},this.pluginId=rd,this.enabled=!0,this.config=Qa(Qa({},gc),h)}return v.prototype.load=function(h){this.recordEvent=h.record,this.addEventHandler()},v.prototype.enable=function(){this.enabled||(this.addEventHandler(),this.enabled=!0)},v.prototype.disable=function(){!this.enabled||(this.removeEventHandler(),this.enabled=!1)},v.prototype.getPluginId=function(){return this.pluginId},v.prototype.record=function(h){h instanceof ErrorEvent?this.eventHandler(h):this.eventHandler({type:"error",error:h})},v.prototype.addEventHandler=function(){window.addEventListener("error",this.eventHandler),window.addEventListener("unhandledrejection",this.promiseRejectEventHandler)},v.prototype.removeEventHandler=function(){window.removeEventListener("error",this.eventHandler),window.removeEventListener("unhandledrejection",this.promiseRejectEventHandler)},v}(),vc=function(v,h,o,w,q){var re=v+"=";re+=h||"",void 0!==q?re+="; Expires="+q.toUTCString():void 0!==w&&(re+="; Expires="+Eu(w).toUTCString()),re+="; Domain="+o.domain,re+="; Path="+o.path,re+="; SameSite="+o.sameSite,re+=o.secure?"; Secure":"",document.cookie=re},Eu=function(v){return new Date((new Date).getTime()+1e3*v)},Ii=function(v){for(var o=0,w=document.cookie.split("; ");o<w.length;o++){var re=w[o].split("=");if(re[0]===v)return re[1]}return""},Su=u(7006),Gi="00000000-0000-0000-0000-000000000000",eo="unknown",Pu=function(){function v(h,o,w,q){this.appMonitorDetails=h,this.config=o,this.record=w,this.pageManager=q,this.session={sessionId:Gi,record:this.sample(),eventCount:0},this.initializeUser(),this.collectAttributes(),this.getSessionFromCookie()}return v.prototype.getSession=function(){return this.session.sessionId===Gi||this.useCookies()?(this.session.sessionId===Gi&&this.useCookies()||this.session.sessionId!==Gi&&new Date>this.sessionExpiry)&&this.createSession():this.session={sessionId:Gi,record:this.sample(),eventCount:0,page:this.session.page},this.session},v.prototype.getAttributes=function(){return this.attributes},v.prototype.getUserId=function(){return this.useCookies()?this.userId:Gi},v.prototype.incrementSessionEventCount=function(){this.session.eventCount++,this.renewSession()},v.prototype.initializeUser=function(){var h="";this.userExpiry=new Date,this.userExpiry.setDate(this.userExpiry.getDate()+this.config.userIdRetentionDays),this.config.userIdRetentionDays<=0?this.userId="00000000-0000-0000-0000-000000000000":this.useCookies()?(h=this.getUserIdCookie(),this.userId=h||(0,as.Z)(),this.createOrRenewUserCookie(h,this.userExpiry)):this.userId=(0,as.Z)()},v.prototype.createOrRenewSessionCookie=function(h,o){btoa&&vc(this.sessionCookieName(),btoa(JSON.stringify(h)),this.config.cookieAttributes,void 0,o)},v.prototype.createOrRenewUserCookie=function(h,o){vc("cwr_u",h,this.config.cookieAttributes,void 0,o)},v.prototype.getUserIdCookie=function(){return Ii("cwr_u")},v.prototype.getSessionFromCookie=function(){if(this.useCookies()){var h=Ii(this.sessionCookieName());if(h&&atob)try{this.session=JSON.parse(atob(h)),this.pageManager.resumeSession(this.session.page.pageId,this.session.page.interaction)}catch{}}},v.prototype.storeSessionAsCookie=function(){this.useCookies()&&this.config.userIdRetentionDays>0&&this.createOrRenewUserCookie(this.userId,this.userExpiry),this.useCookies()&&this.createOrRenewSessionCookie(this.session,this.sessionExpiry)},v.prototype.createSession=function(){this.session={sessionId:(0,as.Z)(),record:this.sample(),eventCount:0},this.session.page=this.pageManager.getPage(),this.sessionExpiry=new Date((new Date).getTime()+1e3*this.config.sessionLengthSeconds),this.storeSessionAsCookie(),this.record(this.session,"com.amazon.rum.session_start_event",{version:"1.0.0"})},v.prototype.renewSession=function(){this.sessionExpiry=new Date((new Date).getTime()+1e3*this.config.sessionLengthSeconds),this.session.page=this.pageManager.getPage(),this.storeSessionAsCookie()},v.prototype.collectAttributes=function(){var h=new Su.UAParser(navigator.userAgent).getResult();this.attributes={browserLanguage:navigator.language,browserName:h.browser.name?h.browser.name:eo,browserVersion:h.browser.version?h.browser.version:eo,osName:h.os.name?h.os.name:eo,osVersion:h.os.version?h.os.version:eo,deviceType:h.device.type?h.device.type:"desktop",platformType:"web",domain:window.location.hostname}},v.prototype.useCookies=function(){return navigator.cookieEnabled&&this.config.allowCookies},v.prototype.sample=function(){return Math.random()<this.config.sessionSampleRate},v.prototype.sessionCookieName=function(){return this.config.cookieAttributes.unique?"cwr_s_"+this.appMonitorDetails.id:"cwr_s"},v}(),Ar=u(843),Bi=function(){function v(){this.enabled=!1}return v.prototype.enable=function(){if(!this.enabled){this.enabled=!0;for(var h=0,o=this.patches();h<o.length;h++){var w=o[h];Ar.wrap(w.nodule,w.name,w.wrapper())}}},v.prototype.disable=function(){if(this.enabled){this.enabled=!1;for(var h=0,o=this.patches();h<o.length;h++){var w=o[h];Ar.unwrap(w.nodule,w.name)}}},v}(),Mr=function(){var v=function(h,o){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,q){w.__proto__=q}||function(w,q){for(var re in q)Object.prototype.hasOwnProperty.call(q,re)&&(w[re]=q[re])})(h,o)};return function(h,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function w(){this.constructor=h}v(h,o),h.prototype=null===o?Object.create(o):(w.prototype=o.prototype,new w)}}(),Wi=function(v){function h(o,w,q){var re=v.call(this)||this;return re.sendWrapper=function(){var Ve=re;return function(mt){return function(){return Ve.recordXhr(this),this.addEventListener("loadend",Ve.endTracking),mt.apply(this,arguments)}}},re.endTracking=function(Ve){var mt=Date.now(),Qt=Ve.target;Qt.removeEventListener("loadend",re.endTracking),re.removeXhr(Qt,mt)},re.fetch=function(Ve,mt,Qt,It,gn){var Bn=re;return Ve.apply(mt,Qt).catch(function(Hn){throw Hn}).finally(Bn.decrementFetchCounter())},re.fetchWrapper=function(){var Ve=re;return function(mt){return function(Qt,It){return Ve.fetchCounter+=1,Ve.fetch(mt,this,arguments,Qt,It)}}},re.checkLoadStatus=function(){0===re.ongoingRequests.size&&0===re.fetchCounter&&(clearInterval(re.periodicCheckerId),clearTimeout(re.timeoutCheckerId),re.domMutationObserver.disconnect(),re.recordRouteChangeNavigationEvent(re.pageManager.getPage()),re.periodicCheckerId=void 0,re.timeoutCheckerId=void 0,re.isPageLoaded=!0)},re.declareTimeout=function(){clearInterval(re.periodicCheckerId),re.periodicCheckerId=void 0,re.timeoutCheckerId=void 0,re.domMutationObserver.disconnect(),re.isPageLoaded=!0},re.resetInterval=function(){re.latestEndTime=Date.now(),clearInterval(re.periodicCheckerId),re.periodicCheckerId=setInterval(re.checkLoadStatus,re.config.routeChangeComplete)},re.moveItemsFromBuffer=function(Ve){re.ongoingRequests.add(Ve)},re.updateLatestInteractionTime=function(Ve){re.latestInteractionTime=Date.now()},re.periodicCheckerId=void 0,re.timeoutCheckerId=void 0,re.domMutationObserver=new MutationObserver(re.resetInterval),re.ongoingRequests=new Set,re.requestBuffer=new Set,re.fetchCounter=0,re.isPageLoaded=!0,re.latestEndTime=0,re.latestInteractionTime=0,re.config=w,re.pageManager=o,re.record=q,re.enable(),document.addEventListener("mousedown",re.updateLatestInteractionTime),document.addEventListener("keydown",re.updateLatestInteractionTime),re}return Mr(h,v),h.prototype.startTiming=function(){this.latestEndTime=Date.now(),this.periodicCheckerId&&clearInterval(this.periodicCheckerId),this.timeoutCheckerId&&clearTimeout(this.timeoutCheckerId),this.domMutationObserver.disconnect(),this.periodicCheckerId=setInterval(this.checkLoadStatus,this.config.routeChangeComplete),this.timeoutCheckerId=setTimeout(this.declareTimeout,this.config.routeChangeTimeout),this.domMutationObserver.observe(document,{subtree:!0,childList:!0,attributes:!1,characterData:!1}),this.isPageLoaded=!1,this.requestBuffer.forEach(this.moveItemsFromBuffer),this.requestBuffer.clear()},h.prototype.patches=function(){return[{nodule:XMLHttpRequest.prototype,name:"send",wrapper:this.sendWrapper},{nodule:window,name:"fetch",wrapper:this.fetchWrapper}]},h.prototype.recordXhr=function(o){this.pageManager.getPage()&&!1===this.isPageLoaded?this.ongoingRequests.add(o):this.requestBuffer.add(o)},h.prototype.removeXhr=function(o,w){this.pageManager.getPage()&&this.ongoingRequests.has(o)?(this.ongoingRequests.delete(o),this.latestEndTime=w):this.requestBuffer.has(o)&&this.requestBuffer.delete(o)},h.prototype.decrementFetchCounter=function(){this.isPageLoaded||(this.latestEndTime=Date.now()),this.fetchCounter-=1},h.prototype.recordRouteChangeNavigationEvent=function(o){this.record&&this.record(Wa,{version:"1.0.0",initiatorType:"route_change",navigationType:"navigate",startTime:o.start,duration:this.latestEndTime-o.start})},h}(Bi),Di=function(){function v(h,o){this.TIMEOUT=1e3,this.config=h,this.record=o,this.page=void 0,this.resumed=void 0,this.recordInteraction=!1,this.virtualPageLoadTimer=new Wi(this,h,o)}return v.prototype.getPage=function(){return this.page},v.prototype.getAttributes=function(){return this.attributes},v.prototype.resumeSession=function(h,o){this.recordInteraction=!0,this.resumed={pageId:h,interaction:o,start:0}},v.prototype.recordPageView=function(h){var o;if(o="string"==typeof h?h:h.pageId,this.useCookies()&&(this.recordInteraction=!0),!this.page&&this.resumed)this.createResumedPage(o);else if(this.page){if(this.page.pageId===o)return;this.createNextPage(o)}else this.createLandingPage(o);this.collectAttributes("object"==typeof h?h:void 0),this.recordPageViewEvent()},v.prototype.createResumedPage=function(h){this.page={pageId:h,parentPageId:this.resumed.pageId,interaction:this.resumed.interaction+1,start:Date.now()},this.resumed=void 0},v.prototype.createNextPage=function(h){var o=Date.now(),w=this.virtualPageLoadTimer.latestInteractionTime;o-w<=this.TIMEOUT&&(o=w,this.virtualPageLoadTimer.startTiming()),this.page={pageId:h,parentPageId:this.page.pageId,interaction:this.page.interaction+1,start:o}},v.prototype.createLandingPage=function(h){this.page={pageId:h,interaction:0,start:Date.now()}},v.prototype.collectAttributes=function(h){var o=this;this.attributes={title:document.title,pageId:this.page.pageId},this.recordInteraction&&(this.attributes.interaction=this.page.interaction,void 0!==this.page.parentPageId&&(this.attributes.parentPageId=this.page.parentPageId)),h&&Object.keys(h).forEach(function(w){o.attributes[w]=h[w]})},v.prototype.createPageViewEvent=function(){var h={version:"1.0.0",pageId:this.page.pageId};return this.recordInteraction&&(h.interaction=this.page.interaction,h.pageInteractionId=this.page.pageId+"-"+this.page.interaction,void 0!==this.page.parentPageId&&(h.parentPageInteractionId=this.page.parentPageId+"-"+(this.page.interaction-1))),h},v.prototype.recordPageViewEvent=function(){this.record("com.amazon.rum.page_view_event",this.createPageViewEvent())},v.prototype.useCookies=function(){return navigator.cookieEnabled&&this.config.allowCookies},v}(),Os=function(){return Os=Object.assign||function(v){for(var h,o=1,w=arguments.length;o<w;o++)for(var q in h=arguments[o])Object.prototype.hasOwnProperty.call(h,q)&&(v[q]=h[q]);return v},Os.apply(this,arguments)},ds=function(){function v(h,o){var w=this;this.events=[],this.recordPageView=function(q){w.isCurrentUrlAllowed()&&w.pageManager.recordPageView(q)},this.recordEvent=function(q,re){if(w.enabled&&w.isCurrentUrlAllowed()){var Ve=w.sessionManager.getSession();w.sessionManager.incrementSessionEventCount(),w.canRecord(Ve)&&w.addRecordToCache(q,re)}},this.getSession=function(){if(w.isCurrentUrlAllowed())return w.sessionManager.getSession()},this.recordSessionInitEvent=function(q,re,Ve){!w.enabled||(w.sessionManager.incrementSessionEventCount(),w.canRecord(q)&&w.addRecordToCache(re,Ve))},this.canRecord=function(q){return q.record&&(q.eventCount<=w.config.sessionEventLimit||w.config.sessionEventLimit<=0)},this.addRecordToCache=function(q,re){if(w.enabled){w.events.length===w.config.eventCacheSize&&w.events.shift();var Ve=Os(Os({version:"1.0.0"},w.sessionManager.getAttributes()),w.pageManager.getAttributes());w.events.push({details:JSON.stringify(re),id:(0,as.Z)(),metadata:JSON.stringify(Ve),timestamp:new Date,type:q})}},this.appMonitorDetails=h,this.config=o,this.enabled=!0,this.pageManager=new Di(o,this.recordEvent),this.sessionManager=new Pu(h,o,this.recordSessionInitEvent,this.pageManager)}return v.prototype.enable=function(){this.enabled=!0},v.prototype.disable=function(){this.enabled=!1},v.prototype.hasEvents=function(){return 0!==this.events.length},v.prototype.getEventBatch=function(){var h=[];return 0===this.events.length||(this.events.length<=this.config.batchLimit?(h=this.events,this.events=[]):h=this.events.splice(0,this.config.batchLimit)),h},v.prototype.getAppMonitorDetails=function(){return this.appMonitorDetails},v.prototype.getUserDetails=function(){return{userId:this.sessionManager.getUserId(),sessionId:this.sessionManager.getSession().sessionId}},v.prototype.isCurrentUrlAllowed=function(){var h=document.location.toString();return!(this.config.pagesToExclude.length>0&&this.config.pagesToExclude.some(function(o){return o.test(h)}))&&(!(this.config.pagesToInclude.length&&!this.config.pagesToInclude.some(function(o){return o.test(h)}))||void 0)},v}(),Ja=u(9775),Iu=u(7193),ca=u(9984),Ni=(()=>{return(v=Ni||(Ni={})).OTHER="other",v.STYLESHEET="stylesheet",v.DOCUMENT="document",v.SCRIPT="script",v.IMAGE="image",v.FONT="font",Ni;var v})(),Tu=[{name:Ni.STYLESHEET,list:["css","less"]},{name:Ni.DOCUMENT,list:["htm","html","ts","doc","docx","pdf","xls","xlsx"]},{name:Ni.SCRIPT,list:["js"]},{name:Ni.IMAGE,list:["ai","bmp","gif","ico","jpeg","jpg","png","ps","psd","svg","tif","tiff"]},{name:Ni.FONT,list:["fnt","fon","otf","ttf","woff"]}],_c=function(v){for(var h=v.length-1;h>0;h--){var o=Math.floor(Math.random()*(h+1)),w=v[h];v[h]=v[o],v[o]=w}},cr=function(v){var h=v.substring(v.lastIndexOf("/")+1),o=h.substring(h.lastIndexOf(".")+1).split(/[?#]/)[0],w=Ni.OTHER;return Tu.forEach(function(q){q.list.indexOf(o)>-1&&(w=q.name)}),w},fs=function(v){var o=v.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/);return o&&o[4]?o[4]:""},Nl=function(v){var o=v.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/);return o&&o[2]?o[2]:""},fa=function(v,h,o,w){return new(o||(o=Promise))(function(re,Ve){function mt(gn){try{It(w.next(gn))}catch(Bn){Ve(Bn)}}function Qt(gn){try{It(w.throw(gn))}catch(Bn){Ve(Bn)}}function It(gn){gn.done?re(gn.value):function q(re){return re instanceof o?re:new o(function(Ve){Ve(re)})}(gn.value).then(mt,Qt)}It((w=w.apply(v,h||[])).next())})},pa=function(v,h){var w,q,re,Ve,o={label:0,sent:function(){if(1&re[0])throw re[1];return re[1]},trys:[],ops:[]};return Ve={next:mt(0),throw:mt(1),return:mt(2)},"function"==typeof Symbol&&(Ve[Symbol.iterator]=function(){return this}),Ve;function mt(It){return function(gn){return function Qt(It){if(w)throw new TypeError("Generator is already executing.");for(;o;)try{if(w=1,q&&(re=2&It[0]?q.return:It[0]?q.throw||((re=q.return)&&re.call(q),0):q.next)&&!(re=re.call(q,It[1])).done)return re;switch(q=0,re&&(It=[2&It[0],re.value]),It[0]){case 0:case 1:re=It;break;case 4:return o.label++,{value:It[1],done:!1};case 5:o.label++,q=It[1],It=[0];continue;case 7:It=o.ops.pop(),o.trys.pop();continue;default:if(!(re=(re=o.trys).length>0&&re[re.length-1])&&(6===It[0]||2===It[0])){o=0;continue}if(3===It[0]&&(!re||It[1]>re[0]&&It[1]<re[3])){o.label=It[1];break}if(6===It[0]&&o.label<re[1]){o.label=re[1],re=It;break}if(re&&o.label<re[2]){o.label=re[2],o.ops.push(It);break}re[2]&&o.ops.pop(),o.trys.pop();continue}It=h.call(v,o)}catch(gn){It=[6,gn],q=0}finally{w=re=0}if(5&It[0])throw It[1];return{value:It[0]?It[1]:void 0,done:!0}}([It,gn])}}},jl={expiresIn:60},Wo=function v(h){var o=this;this.sendFetch=function(w){return fa(o,void 0,void 0,function(){var q,re,Ve,mt,Qt,It,Bn,Hn;return pa(this,function(Pr){switch(Pr.label){case 0:return q=fs(this.config.endpoint),re=JSON.stringify(ps(w)),mt=Ko.aW.bind,Bn={method:"POST"},Hn={"content-type":"application/json"},Qt="X-Amz-Content-Sha256",[4,el(re)];case 1:return Ve=new(mt.apply(Ko.aW,[void 0,(Bn.headers=(Hn[Qt]=Pr.sent(),Hn.host=q,Hn),Bn.protocol=Nl(this.config.endpoint),Bn.hostname=q,Bn.path="/appmonitors/"+w.AppMonitorDetails.id+"/",Bn.body=re,Bn)])),[4,this.awsSigV4.sign(Ve)];case 2:return It=Pr.sent(),[2,this.config.fetchRequestHandler.handle(It)]}})})},this.sendBeacon=function(w){return fa(o,void 0,void 0,function(){var q,re,Ve,mt,Qt,It,Bn,Hn;return pa(this,function(Pr){switch(Pr.label){case 0:return q=fs(this.config.endpoint),re=JSON.stringify(ps(w)),mt=Ko.aW.bind,Bn={method:"POST"},Hn={"content-type":"text/plain;charset=UTF-8"},Qt="X-Amz-Content-Sha256",[4,el(re)];case 1:return Ve=new(mt.apply(Ko.aW,[void 0,(Bn.headers=(Hn[Qt]=Pr.sent(),Hn.host=q,Hn),Bn.protocol=Nl(this.config.endpoint),Bn.hostname=q,Bn.path="/appmonitors/"+w.AppMonitorDetails.id,Bn.body=re,Bn)])),[4,this.awsSigV4.presign(Ve,jl)];case 2:return It=Pr.sent(),[2,this.config.beaconRequestHandler.handle(It)]}})})},this.config=h,this.awsSigV4=new Iu.L1({applyChecksum:!0,credentials:h.credentials,region:h.region,service:"rum",uriEscapePath:!0,sha256:ca.Sha256})},ps=function(v){var h=[];return v.RumEvents.forEach(function(w){return h.push(ks(w))}),{BatchId:v.BatchId,AppMonitorDetails:v.AppMonitorDetails,UserDetails:v.UserDetails,RumEvents:h}},ks=function(v){return{id:v.id,timestamp:Math.round(v.timestamp.getTime()/1e3),type:v.type,metadata:v.metadata,details:v.details}},el=function(v){return fa(void 0,void 0,void 0,function(){var h,o;return pa(this,function(w){switch(w.label){case 0:return(h=new ca.Sha256).update(v),o=Ja.N,[4,h.digest()];case 1:return[2,o.apply(void 0,[w.sent()]).toLowerCase()]}})})},Bl=u(2107),to=function(){function v(){}return v.prototype.handle=function(h){var o=this.sendBeacon(h);return new Promise(function(w,q){o?w({response:new Ko.Zn({statusCode:200})}):q()})},v.prototype.sendBeacon=function(h){var o=h.path;if(h.query){var w=(0,Bl.I)(h.query);w&&(o+="?"+w)}var q=h.port;return navigator.sendBeacon(h.protocol+"//"+h.hostname+(q?":"+q:"")+o,h.body)},v}(),ad=function(v){return void 0===v&&(v=0),new Promise(function(h,o){v&&setTimeout(function(){var w=new Error("Request did not complete within "+v+" ms");w.name="TimeoutError",o(w)},v)})},Ru=function(){function v(h){var o=void 0===h?{}:h,w=o.fetchFunction;this.requestTimeout=o.requestTimeout,this.fetchFunction=w}return v.prototype.destroy=function(){},v.prototype.handle=function(h,o){var q=(void 0===o?{}:o).abortSignal,re=this.requestTimeout;if(null==q?void 0:q.aborted){var Ve=new Error("Request aborted");return Ve.name="AbortError",Promise.reject(Ve)}var mt=h.path;if(h.query){var Qt=(0,Bl.I)(h.query);Qt&&(mt+="?"+Qt)}var It=h.port,gn=h.method,Bn=h.protocol+"//"+h.hostname+(It?":"+It:"")+mt,Pr={body:"GET"===gn||"HEAD"===gn?void 0:h.body,headers:new Headers(h.headers),method:gn};"undefined"!=typeof AbortController&&(Pr.signal=q);var Vr=new Request(Bn,Pr),pi=[this.fetchFunction.apply(window,[Vr]).then(function(Ti){for(var zr={},Yr=0,Zr=Ti.headers.entries();Yr<Zr.length;Yr++){var hi=Zr[Yr];zr[hi[0]]=hi[1]}return void 0!==Ti.body?{response:new Ko.Zn({headers:zr,statusCode:Ti.status,body:Ti.body})}:Ti.blob().then(function(ci){return{response:new Ko.Zn({headers:zr,statusCode:Ti.status,body:ci})}})}),ad(re)];return q&&pi.push(new Promise(function(Ti,Us){q.onabort=function(){var zr=new Error("Request aborted");zr.name="AbortError",Us(zr)}})),Promise.race(pi)},v}(),Ll=function(v,h,o,w){return new(o||(o=Promise))(function(re,Ve){function mt(gn){try{It(w.next(gn))}catch(Bn){Ve(Bn)}}function Qt(gn){try{It(w.throw(gn))}catch(Bn){Ve(Bn)}}function It(gn){gn.done?re(gn.value):function q(re){return re instanceof o?re:new o(function(Ve){Ve(re)})}(gn.value).then(mt,Qt)}It((w=w.apply(v,h||[])).next())})},ha=function(v,h){var w,q,re,Ve,o={label:0,sent:function(){if(1&re[0])throw re[1];return re[1]},trys:[],ops:[]};return Ve={next:mt(0),throw:mt(1),return:mt(2)},"function"==typeof Symbol&&(Ve[Symbol.iterator]=function(){return this}),Ve;function mt(It){return function(gn){return function Qt(It){if(w)throw new TypeError("Generator is already executing.");for(;o;)try{if(w=1,q&&(re=2&It[0]?q.return:It[0]?q.throw||((re=q.return)&&re.call(q),0):q.next)&&!(re=re.call(q,It[1])).done)return re;switch(q=0,re&&(It=[2&It[0],re.value]),It[0]){case 0:case 1:re=It;break;case 4:return o.label++,{value:It[1],done:!1};case 5:o.label++,q=It[1],It=[0];continue;case 7:It=o.ops.pop(),o.trys.pop();continue;default:if(!(re=(re=o.trys).length>0&&re[re.length-1])&&(6===It[0]||2===It[0])){o=0;continue}if(3===It[0]&&(!re||It[1]>re[0]&&It[1]<re[3])){o.label=It[1];break}if(6===It[0]&&o.label<re[1]){o.label=re[1],re=It;break}if(re&&o.label<re[2]){o.label=re[2],o.ops.push(It);break}re[2]&&o.ops.pop(),o.trys.pop();continue}It=h.call(v,o)}catch(gn){It=[6,gn],q=0}finally{w=re=0}if(5&It[0])throw It[1];return{value:It[0]?It[1]:void 0,done:!0}}([It,gn])}}},wc="CWR: Cannot dispatch; no AWS credentials.",Fs=function(){function v(h,o,w,q){var re=this;this.dispatchFetch=function(){return Ll(re,void 0,void 0,function(){return ha(this,function(Ve){return[2,this.dispatch(this.rum.sendFetch)]})})},this.dispatchBeacon=function(){return Ll(re,void 0,void 0,function(){return ha(this,function(Ve){return[2,this.dispatch(this.rum.sendBeacon)]})})},this.dispatchFetchFailSilent=function(){return Ll(re,void 0,void 0,function(){return ha(this,function(Ve){return[2,this.dispatchFetch().catch(function(){})]})})},this.dispatchBeaconFailSilent=function(){return Ll(re,void 0,void 0,function(){return ha(this,function(Ve){return[2,this.dispatchBeacon().catch(function(){})]})})},this.defaultClientBuilder=function(Ve,mt,Qt){return new Wo({fetchRequestHandler:new Ru({fetchFunction:re.config.fetchFunction}),beaconRequestHandler:new to,endpoint:Ve,region:mt,credentials:Qt})},this.region=h,this.endpoint=o,this.eventCache=w,this.enabled=!0,this.buildClient=q.clientBuilder||this.defaultClientBuilder,this.config=q,this.startDispatchTimer(),this.rum={sendFetch:function(){return Promise.reject(new Error(wc))},sendBeacon:function(){return Promise.reject(new Error(wc))}}}return v.prototype.enable=function(){this.enabled=!0,this.startDispatchTimer()},v.prototype.disable=function(){this.stopDispatchTimer(),this.enabled=!1},v.prototype.setAwsCredentials=function(h){this.rum=this.buildClient(this.endpoint,this.region,h),"function"==typeof h&&h()},v.prototype.startDispatchTimer=function(){document.addEventListener("visibilitychange",this.dispatchBeaconFailSilent),document.addEventListener("pagehide",this.dispatchBeaconFailSilent),!(this.config.dispatchInterval<=0||this.dispatchTimerId)&&(this.dispatchTimerId=window.setInterval(this.dispatchFetchFailSilent,this.config.dispatchInterval))},v.prototype.stopDispatchTimer=function(){document.removeEventListener("visibilitychange",this.dispatchBeaconFailSilent),document.removeEventListener("pagehide",this.dispatchBeaconFailSilent),this.dispatchTimerId&&(window.clearInterval(this.dispatchTimerId),this.dispatchTimerId=void 0)},v.prototype.dispatch=function(h){return Ll(this,void 0,void 0,function(){var o;return ha(this,function(w){return this.enabled&&this.eventCache.hasEvents()?(o={BatchId:(0,as.Z)(),AppMonitorDetails:this.eventCache.getAppMonitorDetails(),UserDetails:this.eventCache.getUserDetails(),RumEvents:this.eventCache.getEventBatch()},[2,h(o)]):[2]})})},v}(),Ds="navigation",Ou="load",Ul=function(){function v(){var h=this;this.eventListener=function(){0===performance.getEntriesByType(Ds).length?h.performanceNavigationEventHandlerTimingLevel1():new PerformanceObserver(function(w){w.getEntries().forEach(function(q){q.entryType===Ds&&h.performanceNavigationEventHandlerTimingLevel2(q)})}).observe({entryTypes:[Ds]})},this.performanceNavigationEventHandlerTimingLevel1=function(){setTimeout(function(){var w=performance.timing,q=w.navigationStart;h.recordEvent&&h.recordEvent(Wa,{version:"1.0.0",initiatorType:"navigation",startTime:0,unloadEventStart:w.unloadEventStart>0?w.unloadEventStart-q:0,promptForUnload:w.unloadEventEnd-w.unloadEventStart,redirectStart:w.redirectStart>0?w.redirectStart-q:0,redirectTime:w.redirectEnd-w.redirectStart,fetchStart:w.fetchStart>0?w.fetchStart-q:0,domainLookupStart:w.domainLookupStart>0?w.domainLookupStart-q:0,dns:w.domainLookupEnd-w.domainLookupStart,connectStart:w.connectStart>0?w.connectStart-q:0,connect:w.connectEnd-w.connectStart,secureConnectionStart:w.secureConnectionStart>0?w.secureConnectionStart-q:0,tlsTime:w.secureConnectionStart>0?w.connectEnd-w.secureConnectionStart:0,requestStart:w.requestStart>0?w.requestStart-q:0,timeToFirstByte:w.responseStart-w.requestStart,responseStart:w.responseStart>0?w.responseStart-q:0,responseTime:w.responseStart>0?w.responseEnd-w.responseStart:0,domInteractive:w.domInteractive>0?w.domInteractive-q:0,domContentLoadedEventStart:w.domContentLoadedEventStart>0?w.domContentLoadedEventStart-q:0,domContentLoaded:w.domContentLoadedEventEnd-w.domContentLoadedEventStart,domComplete:w.domComplete>0?w.domComplete-q:0,domProcessingTime:w.loadEventStart-w.responseEnd,loadEventStart:w.loadEventStart>0?w.loadEventStart-q:0,loadEventTime:w.loadEventEnd-w.loadEventStart,duration:w.loadEventEnd-w.navigationStart,navigationTimingLevel:1})},0)},this.performanceNavigationEventHandlerTimingLevel2=function(o){h.recordEvent&&h.recordEvent(Wa,{version:"1.0.0",initiatorType:o.initiatorType,navigationType:o.type,startTime:o.startTime,unloadEventStart:o.unloadEventStart,promptForUnload:o.unloadEventEnd-o.unloadEventStart,redirectCount:o.redirectCount,redirectStart:o.redirectStart,redirectTime:o.redirectEnd-o.redirectStart,workerStart:o.workerStart,workerTime:o.workerStart>0?o.fetchStart-o.workerStart:0,fetchStart:o.fetchStart,domainLookupStart:o.domainLookupStart,dns:o.domainLookupEnd-o.domainLookupStart,nextHopProtocol:o.nextHopProtocol,connectStart:o.connectStart,connect:o.connectEnd-o.connectStart,secureConnectionStart:o.secureConnectionStart,tlsTime:o.secureConnectionStart>0?o.connectEnd-o.secureConnectionStart:0,requestStart:o.requestStart,timeToFirstByte:o.responseStart-o.requestStart,responseStart:o.responseStart,responseTime:o.responseStart>0?o.responseEnd-o.responseStart:0,domInteractive:o.domInteractive,domContentLoadedEventStart:o.domContentLoadedEventStart,domContentLoaded:o.domContentLoadedEventEnd-o.domContentLoadedEventStart,domComplete:o.domComplete,domProcessingTime:o.loadEventStart-o.responseEnd,loadEventStart:o.loadEventStart,loadEventTime:o.loadEventEnd-o.loadEventStart,duration:o.duration,headerSize:o.transferSize-o.encodedBodySize,transferSize:o.transferSize,compressionRatio:o.encodedBodySize>0?o.decodedBodySize/o.encodedBodySize:0,navigationTimingLevel:2})},this.pluginId="com.amazonaws.rum.navigation",this.enabled=!0}return v.prototype.load=function(h){if(this.recordEvent=h.record,this.enabled)if(this.hasTheWindowLoadEventFired()){var o=window.performance.getEntriesByType(Ds)[0];this.performanceNavigationEventHandlerTimingLevel2(o)}else window.addEventListener(Ou,this.eventListener)},v.prototype.enable=function(){this.enabled||(this.enabled=!0,window.addEventListener(Ou,this.eventListener))},v.prototype.disable=function(){!this.enabled||(this.enabled=!1,this.eventListener&&window.removeEventListener(Ou,this.eventListener))},v.prototype.hasTheWindowLoadEventFired=function(){if(window.performance&&window.performance.getEntriesByType(Ds).length){var h=window.performance.getEntriesByType(Ds)[0];return Boolean(h.loadEventEnd)}return!1},v.prototype.getPluginId=function(){return this.pluginId},v}(),Mu=function(){return Mu=Object.assign||function(v){for(var h,o=1,w=arguments.length;o<w;o++)for(var q in h=arguments[o])Object.prototype.hasOwnProperty.call(h,q)&&(v[q]=h[q]);return v},Mu.apply(this,arguments)},ku="resource",zl="load",Cc={eventLimit:10,recordAllTypes:[Ni.DOCUMENT,Ni.SCRIPT],sampleTypes:[Ni.STYLESHEET,Ni.IMAGE,Ni.FONT,Ni.OTHER]},Ns=function(){function v(h){var o=this;this.resourceEventListener=function(w){var q=[],re=[],Ve=0;new PerformanceObserver(function(It){It.getEntries().filter(function(gn){return gn.entryType===ku}).forEach(function(gn){var Bn=cr(gn.name);o.config.recordAllTypes.includes(Bn)?q.push(gn):o.config.sampleTypes.includes(Bn)&&re.push(gn)})}).observe({entryTypes:[ku]});var Qt=performance.getEntriesByType(ku);for(void 0!==Qt&&Qt.length>0&&Qt.forEach(function(It){var gn=cr(It.name);o.config.recordAllTypes.includes(gn)?q.push(It):o.config.sampleTypes.includes(gn)&&re.push(It)}),_c(q);q.length>0&&Ve<o.config.eventLimit;)o.recordResourceEvent(q.pop()),Ve++;for(_c(re);re.length>0&&Ve<o.config.eventLimit;)o.recordResourceEvent(re.pop()),Ve++},this.recordResourceEvent=function(w){if(o.recordEvent&&fs(w.name)!==fs(o.context.config.endpoint)){var q={version:"1.0.0",initiatorType:w.initiatorType,duration:w.duration,fileType:cr(w.name),transferSize:w.transferSize};o.context.config.recordResourceUrl&&(q.targetUrl=w.name),o.recordEvent("com.amazon.rum.performance_resource_event",q)}},this.pluginId="com.amazonaws.rum.resource",this.enabled=!0,this.config=Mu(Mu({},Cc),h)}return v.prototype.load=function(h){this.context=h,this.recordEvent=h.record,window.addEventListener(zl,this.resourceEventListener)},v.prototype.enable=function(){this.enabled||(this.enabled=!0,window.addEventListener(zl,this.resourceEventListener))},v.prototype.disable=function(){!this.enabled||(this.enabled=!1,this.resourceEventListener&&window.removeEventListener(zl,this.resourceEventListener))},v.prototype.getPluginId=function(){return this.pluginId},v}(),Xo=function(v,h){return{name:v,value:void 0===h?-1:h,delta:0,entries:[],id:"v1-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},Io=function(v,h){try{if(PerformanceObserver.supportedEntryTypes.includes(v)){if("first-input"===v&&!("PerformanceEventTiming"in self))return;var o=new PerformanceObserver(function(w){return w.getEntries().map(h)});return o.observe({type:v,buffered:!0}),o}}catch{}},Fu=function(v,h){var o=function w(q){"pagehide"!==q.type&&"hidden"!==document.visibilityState||(v(q),h&&(removeEventListener("visibilitychange",w,!0),removeEventListener("pagehide",w,!0)))};addEventListener("visibilitychange",o,!0),addEventListener("pagehide",o,!0)},nl=function(v){addEventListener("pageshow",function(h){h.persisted&&v(h)},!0)},Bs="function"==typeof WeakSet?new WeakSet:new Set,To=function(v,h,o){var w;return function(){h.value>=0&&(o||Bs.has(h)||"hidden"===document.visibilityState)&&(h.delta=h.value-(w||0),(h.delta||void 0===w)&&(w=h.value,v(h)))}},rl=-1,cd=function(){return"hidden"===document.visibilityState?0:1/0},bo=function(){Fu(function(v){rl=v.timeStamp},!0)},$l=function(){return rl<0&&(rl=cd(),bo(),nl(function(){setTimeout(function(){rl=cd(),bo()},0)})),{get timeStamp(){return rl}}},Ro={passive:!0,capture:!0},Vl=new Date,hs=function(v,h){js||(js=h,tl=v,ma=new Date,Sc(removeEventListener),Hl())},Hl=function(){if(tl>=0&&tl<ma-Vl){var v={entryType:"first-input",name:js.type,target:js.target,cancelable:js.cancelable,startTime:js.timeStamp,processingStart:js.timeStamp+tl};Gl.forEach(function(h){h(v)}),Gl=[]}},Ec=function(v){if(v.cancelable){var h=(v.timeStamp>1e12?new Date:performance.now())-v.timeStamp;"pointerdown"==v.type?(o=h,w=v,q=function(){hs(o,w),Ve()},re=function(){Ve()},Ve=function(){removeEventListener("pointerup",q,Ro),removeEventListener("pointercancel",re,Ro)},addEventListener("pointerup",q,Ro),addEventListener("pointercancel",re,Ro)):hs(h,v)}var o,w,q,re,Ve},Sc=function(v){["mousedown","keydown","touchstart","pointerdown"].forEach(function(h){return v(h,Ec,Ro)})},Nu=function(){function v(){this.pluginId="com.amazonaws.rum.web-vitals"}return v.prototype.load=function(h){var o=this;this.recordEvent=h.record,function(v,h){var o,w=$l(),q=Xo("LCP"),re=function(Qt){var It=Qt.startTime;It<w.timeStamp&&(q.value=It,q.entries.push(Qt)),o()},Ve=Io("largest-contentful-paint",re);if(Ve){o=To(v,q,h);var mt=function(){Bs.has(q)||(Ve.takeRecords().map(re),Ve.disconnect(),Bs.add(q),o())};["keydown","click"].forEach(function(Qt){addEventListener(Qt,mt,{once:!0,capture:!0})}),Fu(mt,!0),nl(function(Qt){q=Xo("LCP"),o=To(v,q,h),requestAnimationFrame(function(){requestAnimationFrame(function(){q.value=performance.now()-Qt.timeStamp,Bs.add(q),o()})})})}}(function(w){return o.getWebVitalData(w,"com.amazon.rum.largest_contentful_paint_event")}),function(v,h){var o,w=$l(),q=Xo("FID"),re=function(mt){mt.startTime<w.timeStamp&&(q.value=mt.processingStart-mt.startTime,q.entries.push(mt),Bs.add(q),o())},Ve=Io("first-input",re);o=To(v,q,h),Ve&&Fu(function(){Ve.takeRecords().map(re),Ve.disconnect()},!0),Ve&&nl(function(){q=Xo("FID"),o=To(v,q,h),Gl=[],tl=-1,js=null,Sc(addEventListener),Gl.push(re),Hl()})}(function(w){return o.getWebVitalData(w,"com.amazon.rum.first_input_delay_event")}),function(v,h){var o,w=Xo("CLS",0),q=function(Ve){Ve.hadRecentInput||(w.value+=Ve.value,w.entries.push(Ve),o())},re=Io("layout-shift",q);re&&(o=To(v,w,h),Fu(function(){re.takeRecords().map(q),o()}),nl(function(){w=Xo("CLS",0),o=To(v,w,h)}))}(function(w){return o.getWebVitalData(w,"com.amazon.rum.cumulative_layout_shift_event")})},v.prototype.enable=function(){},v.prototype.disable=function(){},v.prototype.getPluginId=function(){return this.pluginId},v.prototype.configure=function(h){},v.prototype.getWebVitalData=function(h,o){this.recordEvent(o,{version:"1.0.0",value:h.value})},v}(),Kl=function(v){if(crypto)return crypto.getRandomValues(v);if(msCrypto)return msCrypto.getRandomValues(v);throw new Error("No crypto library found.")},Ac=[],ga=0;ga<256;ga++)Ac[ga]=(ga+256).toString(16).substr(1);var v,ql="X-Amzn-Trace-Id",va={logicalServiceName:"rum.aws.amazon.com",urlsToInclude:[/.*/],urlsToExclude:[/cognito\-identity\.([^\.]*\.)?amazonaws\.com/,/sts\.([^\.]*\.)?amazonaws\.com/],stackTraceLength:200,recordAllRequests:!1,addXRayTraceIdHeader:!1},fd=function(v,h){var o=h.urlsToInclude.some(function(q){return q.test(v)}),w=h.urlsToExclude.some(function(q){return q.test(v)});return o&&!w},Oo=function(){return Date.now()/1e3},ju=function(v,h,o){var w={version:"1.0.0",name:v,origin:"AWS::RUM::AppMonitor",id:gt(),start_time:h,trace_id:ke(),end_time:void 0,subsegments:[],in_progress:!1};return o&&(w.http=o),w},pd=function(v,h,o){var w={id:gt(),name:v,start_time:h,end_time:void 0,in_progress:!1,namespace:v.endsWith("amazonaws.com")?"aws":"remote"};return o&&(w.http=o),w},s=function(v){return(v.hostname?v.hostname:fs(v.url?v.url:v.toString()))||window.location.hostname},fe=function(v,h){return"Root="+v+";Parent="+h+";Sampled=1"},ke=function(){return"1-"+Ct()+"-"+Xt()},gt=function(){var v=new Uint8Array(8);return Kl(v),En(v)},Ct=function(){return Math.floor(Date.now()/1e3).toString(16)},Xt=function(){var v=new Uint8Array(12);return Kl(v),En(v)},En=function(v){for(var h="",o=0;o<v.length;o++)h+=Ac[v[o]];return h},An=(v=function(h,o){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,q){w.__proto__=q}||function(w,q){for(var re in q)Object.prototype.hasOwnProperty.call(q,re)&&(w[re]=q[re])})(h,o)},function(h,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function w(){this.constructor=h}v(h,o),h.prototype=null===o?Object.create(o):(w.prototype=o.prototype,new w)}),Yn=function(v){function h(o){var w=v.call(this,o)||this;return w.name="XMLHttpRequest error",w}return An(h,v),h}(Error),or=function(){var v=function(h,o){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,q){w.__proto__=q}||function(w,q){for(var re in q)Object.prototype.hasOwnProperty.call(q,re)&&(w[re]=q[re])})(h,o)};return function(h,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function w(){this.constructor=h}v(h,o),h.prototype=null===o?Object.create(o):(w.prototype=o.prototype,new w)}}(),Fr=function(){return Fr=Object.assign||function(v){for(var h,o=1,w=arguments.length;o<w;o++)for(var q in h=arguments[o])Object.prototype.hasOwnProperty.call(h,q)&&(v[q]=h[q]);return v},Fr.apply(this,arguments)},co=function(v){function h(o){var w=v.call(this)||this;return w.addXRayTraceIdHeader=function(){return w.config.addXRayTraceIdHeader},w.isTracingEnabled=function(){return w.context.config.enableXRay},w.isSessionRecorded=function(){var q;return(null===(q=w.context.getSession())||void 0===q?void 0:q.record)||!1},w.handleXhrLoadEvent=function(q){var re=q.target,Ve=w.xhrMap.get(re);if(Ve){var mt=Oo();Ve.trace.end_time=mt,Ve.trace.subsegments[0].end_time=mt,Ve.trace.subsegments[0].http.response={status:re.status};var Qt=parseInt(re.getResponseHeader("Content-Length"),10);isNaN(Qt)||(Ve.trace.subsegments[0].http.response.content_length=parseInt(re.getResponseHeader("Content-Length"),10)),w.recordTraceEvent(Ve.trace),w.recordHttpEventWithResponse(Ve,re)}},w.handleXhrErrorEvent=function(q){var re=q.target,Ve=w.xhrMap.get(re),Qt=re.statusText?re.status.toString()+": "+re.statusText:re.status.toString();if(Ve){var It=Oo();Ve.trace.end_time=It,Ve.trace.subsegments[0].end_time=It,Ve.trace.subsegments[0].error=!0,Ve.trace.subsegments[0].cause={exceptions:[{type:"XMLHttpRequest error",message:Qt}]},w.recordTraceEvent(Ve.trace),w.recordHttpEventWithError(Ve,new Yn(Qt))}},w.handleXhrAbortEvent=function(q){var Ve=w.xhrMap.get(q.target),mt="XMLHttpRequest abort";if(Ve){var Qt=Oo();Ve.trace.end_time=Qt,Ve.trace.subsegments[0].end_time=Qt,Ve.trace.subsegments[0].error=!0,Ve.trace.subsegments[0].cause={exceptions:[{type:mt}]},w.recordTraceEvent(Ve.trace),w.recordHttpEventWithError(Ve,mt)}},w.handleXhrTimeoutEvent=function(q){var Ve=w.xhrMap.get(q.target),mt="XMLHttpRequest timeout";if(Ve){var Qt=Oo();Ve.trace.end_time=Qt,Ve.trace.subsegments[0].end_time=Qt,Ve.trace.subsegments[0].error=!0,Ve.trace.subsegments[0].cause={exceptions:[{type:mt}]},w.recordTraceEvent(Ve.trace),w.recordHttpEventWithError(Ve,mt)}},w.initializeTrace=function(q){var re=Oo();q.trace=ju(w.config.logicalServiceName,re),q.trace.subsegments.push(pd(s(q.url),re,{request:{method:q.method,traced:!0}}))},w.sendWrapper=function(){var q=w;return function(re){return function(){var Ve=q.xhrMap.get(this);return Ve&&(this.addEventListener("load",q.handleXhrLoadEvent),this.addEventListener("error",q.handleXhrErrorEvent),this.addEventListener("abort",q.handleXhrAbortEvent),this.addEventListener("timeout",q.handleXhrTimeoutEvent),q.initializeTrace(Ve),q.isTracingEnabled()&&q.addXRayTraceIdHeader()&&q.isSessionRecorded()&&this.setRequestHeader(ql,fe(Ve.trace.trace_id,Ve.trace.subsegments[0].id))),re.apply(this,arguments)}}},w.openWrapper=function(){var q=w;return function(re){return function(Ve,mt,Qt){return fd(mt,q.config)&&q.xhrMap.set(this,{url:mt,method:Ve,async:Qt}),re.apply(this,arguments)}}},w.pluginId="com.amazonaws.rum.xhr",w.config=Fr(Fr({},va),o),w.xhrMap=new Map,w}return or(h,v),h.prototype.load=function(o){this.context=o,this.enable()},h.prototype.getPluginId=function(){return this.pluginId},h.prototype.patches=function(){return[{nodule:XMLHttpRequest.prototype,name:"send",wrapper:this.sendWrapper},{nodule:XMLHttpRequest.prototype,name:"open",wrapper:this.openWrapper}]},h.prototype.statusOk=function(o){return o>=200&&o<300},h.prototype.recordHttpEventWithResponse=function(o,w){(this.config.recordAllRequests||!this.statusOk(w.status))&&this.context.record(qa,{version:"1.0.0",request:{method:o.method},response:{status:w.status,statusText:w.statusText}})},h.prototype.recordHttpEventWithError=function(o,w){var q={version:"1.0.0",request:{method:o.method}};q.error=Fl({type:"error",error:w},this.config.stackTraceLength),this.context.record(qa,q)},h.prototype.recordTraceEvent=function(o){this.isTracingEnabled()&&this.isSessionRecorded()&&this.context.record(fc,o)},h}(Bi),Li=function(){var v=function(h,o){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,q){w.__proto__=q}||function(w,q){for(var re in q)Object.prototype.hasOwnProperty.call(q,re)&&(w[re]=q[re])})(h,o)};return function(h,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function w(){this.constructor=h}v(h,o),h.prototype=null===o?Object.create(o):(w.prototype=o.prototype,new w)}}(),yn=function(){return yn=Object.assign||function(v){for(var h,o=1,w=arguments.length;o<w;o++)for(var q in h=arguments[o])Object.prototype.hasOwnProperty.call(h,q)&&(v[q]=h[q]);return v},yn.apply(this,arguments)},Rn=function(v){function h(o){var w=v.call(this)||this;return w.isTracingEnabled=function(){return w.context.config.enableXRay},w.isSessionRecorded=function(){var q;return(null===(q=w.context.getSession())||void 0===q?void 0:q.record)||!1},w.beginTrace=function(q,re,Ve){var mt=Oo(),Qt=function(v,h){var o={request:{}};return o.request.method=(null==v?void 0:v.method)?v.method:"GET",o.request.traced=!0,o}(re),It=ju(w.config.logicalServiceName,mt),gn=pd(s(q),mt,Qt);return It.subsegments.push(gn),w.config.addXRayTraceIdHeader&&w.addXRayTraceIdHeader(q,re,Ve,It),It},w.addXRayTraceIdHeader=function(q,re,Ve,mt){if(q.headers)return function(v,h,o){v.set(ql,fe(h,o))}(q.headers,mt.trace_id,mt.subsegments[0].id);re||[].push.call(Ve,re={}),function(v,h,o){v.headers||(v.headers={}),v.headers[ql]=fe(h,o)}(re,mt.trace_id,mt.subsegments[0].id)},w.endTrace=function(q,re,Ve){if(q){var mt=Oo();if(q.subsegments[0].end_time=mt,q.end_time=mt,re){q.subsegments[0].http.response={status:re.status};var Qt=parseInt(re.headers.get("Content-Length"),10);isNaN(Qt)||(q.subsegments[0].http.response.content_length=Qt)}Ve&&(q.subsegments[0].error=!0,Ve instanceof Object?w.appendErrorCauseFromObject(q.subsegments[0],Ve):xu(Ve)&&w.appendErrorCauseFromPrimitive(q.subsegments[0],Ve.toString())),w.context.record(fc,q)}},w.createHttpEvent=function(q,re){return{version:"1.0.0",request:{method:(null==re?void 0:re.method)?re.method:"GET"}}},w.recordHttpEventWithResponse=function(q,re){(w.config.recordAllRequests||!re.ok)&&(q.response={status:re.status,statusText:re.statusText},w.context.record(qa,q))},w.recordHttpEventWithError=function(q,re){q.error=Fl({type:"error",error:re},w.config.stackTraceLength),w.context.record(qa,q)},w.fetch=function(q,re,Ve,mt,Qt){var gn,It=w.createHttpEvent(mt,Qt);return fd("string"==typeof mt?mt:mt.url,w.config)?(w.isTracingEnabled()&&w.isSessionRecorded()&&(gn=w.beginTrace(mt,Qt,Ve)),q.apply(re,Ve).then(function(Hn){return w.endTrace(gn,Hn,void 0),w.recordHttpEventWithResponse(It,Hn),Hn}).catch(function(Hn){throw w.endTrace(gn,void 0,Hn),w.recordHttpEventWithError(It,Hn),Hn})):q.apply(re,Ve)},w.fetchWrapper=function(){var q=w;return function(re){return function(Ve,mt){return q.fetch(re,this,arguments,Ve,mt)}}},w.pluginId="com.amazonaws.rum.fetch",w.config=yn(yn({},va),o),w}return Li(h,v),h.prototype.load=function(o){this.context=o,this.enable()},h.prototype.getPluginId=function(){return this.pluginId},h.prototype.patches=function(){return[{nodule:window,name:"fetch",wrapper:this.fetchWrapper}]},h.prototype.appendErrorCauseFromPrimitive=function(o,w){o.cause={exceptions:[{type:w}]}},h.prototype.appendErrorCauseFromObject=function(o,w){o.cause={exceptions:[{type:w.name,message:w.message}]}},h}(Bi),Un=function(){var v=function(h,o){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,q){w.__proto__=q}||function(w,q){for(var re in q)Object.prototype.hasOwnProperty.call(q,re)&&(w[re]=q[re])})(h,o)};return function(h,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function w(){this.constructor=h}v(h,o),h.prototype=null===o?Object.create(o):(w.prototype=o.prototype,new w)}}(),ar=function(v){function h(){var o=v.call(this)||this;return o.pushState=function(){var w=o;return function(q){return function(re,Ve,mt){var Qt=q.apply(this,arguments);return w.recordPageView(),Qt}}},o.replaceState=function(){var w=o;return function(q){return function(re,Ve,mt){var Qt=q.apply(this,arguments);return w.recordPageView(),Qt}}},o.popstateListener=function(w){o.recordPageView()},o.recordPageView=function(){o.context.recordPageView(o.createIdForCurrentPage())},o.pluginId="com.amazonaws.rum.page-view",o.enable(),o}return Un(h,v),h.prototype.load=function(o){this.context=o,this.addListener(),this.recordPageView()},h.prototype.getPluginId=function(){return this.pluginId},h.prototype.patches=function(){return[{nodule:History.prototype,name:"pushState",wrapper:this.pushState},{nodule:History.prototype,name:"replaceState",wrapper:this.replaceState}]},h.prototype.addListener=function(){window.addEventListener("popstate",this.popstateListener)},h.prototype.createIdForCurrentPage=function(){var o=window.location.pathname,w=window.location.hash;switch(this.context.config.pageIdFormat){case ya.PATH_AND_HASH:return o&&w?o+w:o||w||"";case ya.HASH:return w||"";default:return o||""}},h}(Bi),gr=function(){return gr=Object.assign||function(v){for(var h,o=1,w=arguments.length;o<w;o++)for(var q in h=arguments[o])Object.prototype.hasOwnProperty.call(h,q)&&(v[q]=h[q]);return v},gr.apply(this,arguments)},Ur=function(v,h,o){if(o||2===arguments.length)for(var re,w=0,q=h.length;w<q;w++)(re||!(w in h))&&(re||(re=Array.prototype.slice.call(h,0,w)),re[w]=h[w]);return v.concat(re||Array.prototype.slice.call(h))},Xi=(()=>(function(v){v.ERRORS="errors",v.PERFORMANCE="performance",v.INTERACTION="interaction",v.HTTP="http"}(Xi||(Xi={})),Xi))(),ya=(()=>(function(v){v.PATH="PATH",v.HASH="HASH",v.PATH_AND_HASH="PATH_AND_HASH"}(ya||(ya={})),ya))();!function(){function v(h,o,w,q){void 0===q&&(q={}),void 0===w&&(w="us-west-2");var re=gr(gr({},{unique:!1,domain:window.location.hostname,path:"/",sameSite:"Strict",secure:!0}),q.cookieAttributes);delete q.cookieAttributes,this.config=gr(gr({fetchFunction:fetch},function(v){return{allowCookies:!1,batchLimit:100,cookieAttributes:v,disableAutoPageView:!1,dispatchInterval:5e3,enableRumClient:!0,enableXRay:!1,endpoint:"https://dataplane.rum.us-west-2.amazonaws.com",eventCacheSize:200,eventPluginsToLoad:[],pageIdFormat:ya.PATH,pagesToExclude:[],pagesToInclude:[],recordResourceUrl:!0,routeChangeComplete:100,routeChangeTimeout:1e4,sessionEventLimit:200,sessionLengthSeconds:1800,sessionSampleRate:1,telemetries:[],userIdRetentionDays:30}}(re)),q),this.config.endpoint=this.getDataPlaneEndpoint(w,q),this.eventCache=this.initEventCache(h,o),this.dispatchManager=this.initDispatch(w),this.pluginManager=this.initPluginManager(h,o),this.config.enableRumClient?this.enable():this.disable()}v.prototype.setAwsCredentials=function(h){this.dispatchManager.setAwsCredentials(h)},v.prototype.addPlugin=function(h){this.pluginManager.addPlugin(h)},v.prototype.dispatch=function(){this.dispatchManager.dispatchFetch()},v.prototype.dispatchBeacon=function(){this.dispatchManager.dispatchBeacon()},v.prototype.enable=function(){this.eventCache.enable(),this.pluginManager.enable(),this.dispatchManager.enable()},v.prototype.disable=function(){this.dispatchManager.disable(),this.pluginManager.disable(),this.eventCache.disable()},v.prototype.allowCookies=function(h){this.config.allowCookies=h},v.prototype.recordPageView=function(h){this.eventCache.recordPageView(h)},v.prototype.recordError=function(h){this.pluginManager.record(rd,h)},v.prototype.registerDomEvents=function(h){this.pluginManager.updatePlugin(ed,h)},v.prototype.initEventCache=function(h,o){return new ds({id:h,version:o},this.config)},v.prototype.initDispatch=function(h){var o=new Fs(h,this.config.endpoint,this.eventCache,this.config);return this.config.identityPoolId&&this.config.guestRoleArn?o.setAwsCredentials(new uc(this.config).ChainAnonymousCredentialsProvider):this.config.identityPoolId&&o.setAwsCredentials(new cs(this.config).ChainAnonymousCredentialsProvider),o},v.prototype.initPluginManager=function(h,o){var w=this.constructBuiltinPlugins(),q=Ur(Ur([],w,!0),this.config.eventPluginsToLoad,!0),Ve=new cc({applicationId:h,applicationVersion:o,config:this.config,record:this.eventCache.recordEvent,recordPageView:this.eventCache.recordPageView,getSession:this.eventCache.getSession});return this.config.disableAutoPageView||Ve.addPlugin(new ar),q.forEach(function(mt){Ve.addPlugin(mt)}),Ve},v.prototype.constructBuiltinPlugins=function(){var h=[],o=this.telemetryFunctor();return this.config.telemetries.forEach(function(w){"string"==typeof w&&o[w.toLowerCase()]?h=Ur(Ur([],h,!0),o[w.toLowerCase()]({}),!0):Array.isArray(w)&&o[w[0].toLowerCase()]&&(h=Ur(Ur([],h,!0),o[w[0].toLowerCase()](w[1]),!0))}),h},v.prototype.getDataPlaneEndpoint=function(h,o){return o.endpoint?o.endpoint:"https://dataplane.rum.${REGION}.amazonaws.com".replace("${REGION}",h)},v.prototype.telemetryFunctor=function(){var h;return(h={})[Xi.ERRORS]=function(o){return[new id(o)]},h[Xi.PERFORMANCE]=function(o){return[new Ul,new Ns(o),new Nu]},h[Xi.INTERACTION]=function(o){return[new td(o)]},h[Xi.HTTP]=function(o){return[new co(o),new Rn(o)]},h}}();class tf{constructor(h){h&&(this.appId=h.appId,this.guestRoleArn=h.guestRoleArn,this.region=h.region,this.identityPoolId=h.identityPoolId)}}const Nd=new n.InjectionToken("RumSettings"),jd=new le.Z8({id:"f4c36261-0886-4a6a-8883-7ccf530da319",layoutType:"",displayType:"",gridItems:[],panels:[],layoutSetting:void 0,rowSettings:[],path:"/"}),Bd=[{path:"auth-callback",component:z.pl},{matcher:(0,Ys.createMatcher)(jd),component:Ys.PanelPageRouterComponent,data:{panelPageListItem:jd}}],Ld={root:ni_apiGatewaySettings.endpointUrl,timeout:2e4};function Ud(){const v=new Zl.Th;return v.link=(h,o,w)=>"page"===w?`<classifieds-ui-panel-page id="${h}"></classifieds-ui-panel-page>`:`<classifieds-ui-page-router-link href="${h}" text="${w}"></classifieds-ui-page-router-link>`,{renderer:v}}let nf=(()=>{class v{}return v.\u0275fac=function(o){return new(o||v)},v.\u0275mod=n.\u0275\u0275defineNgModule({type:v,bootstrap:[oi]}),v.\u0275inj=n.\u0275\u0275defineInjector({providers:[De,{provide:se.SITE_NAME,useValue:ni_site},{provide:E,useValue:new Oe(ni_clientSettings)},{provide:Ee.yk,useValue:new Ee.rB(ni_mediaSettings)},{provide:le.Xt,useValue:new le.ki(ni_panelsSettings)},{provide:gi,useValue:new fu(ni_alienaliasSettings)},{provide:Ys.PAGES_SETTINGS,useValue:new Ys.PagesSettings({disableRouting:!0})},{provide:Tn.NR,useValue:new Tn.F5(ni_cognitoSettings)},{provide:Nd,useValue:new tf(ni_rumSettings)},{provide:x.HTTP_INTERCEPTORS,useClass:me,multi:!0},{provide:x.HTTP_INTERCEPTORS,useClass:z.$v,multi:!0},{provide:Z.jh,useValue:Ld}],imports:[[e.b2.withServerTransition({appId:"serverApp"}),y.CommonModule,x.HttpClientModule,x.HttpClientJsonpModule,e.Cu,c.u5,c.UX,$.PW,d.o9,p.s,za,gl.JP.forRoot({sanitize:n.SecurityContext.NONE,markedOptions:{provide:gl.TX,useFactory:Ud}}),Xe.RouterModule.forRoot(Bd,{initialNavigation:"enabled",relativeLinkResolution:"legacy"}),ui.FT.instrument({maxAge:25,logOnly:ni_production}),Ei.Qi.forRoot({serializer:Ei.km}),Vi.Aw.forRoot(Go,{metaReducers:ss,runtimeChecks:{strictActionImmutability:!0,strictStateImmutability:!0}}),S.sQ.forRoot([]),ni_production?[]:ui.FT.instrument(),is.D5,Kt,ze.MaterialModule,se.UtilsModule,Ge.W,qe.ContentModule,xe.Lu,z.ny.forRoot(),ne.forRoot(),Ee.cO,Z.ov.forRoot({}),Fe,le.r9,jo.sm,Me,ml,eu,Tn.Yz,Vu,bl,Ku,Pl,Bc,Gc,Da.ZF,rc.Fw,te.bB,hu,Ys.PagesModule]]}),v})();console.log("bootstrap"),ni_production&&(0,n.enableProdMode)(),e.q6().bootstrapModule(nf).catch(v=>console.log(v))},4379:(it,K,u)=>{u.d(K,{V:()=>S});var e=u(4929);const n={},y={};let x=!1;function c(V,N){return(0,e.mG)(this,void 0,void 0,function*(){return y[N]||(x||(yield u.I("default"),x=!0),yield V.init(u.S.default),y[N]=!0),V})}function z(V,N){return(0,e.mG)(this,void 0,void 0,function*(){return new Promise((U,H)=>{if(n[N])return void U();const Q=document.createElement("script");Q.src=V,Q.onerror=H,Q.onload=()=>{const Z=window[N];c(Z,N),n[N]=Z,U()},document.body.appendChild(Q)})})}function S(V){return(0,e.mG)(this,void 0,void 0,function*(){let N,U;return V.type||(V.type="script"),"script"===V.type?(N={type:"script",remoteEntry:V.remoteEntry,remoteName:V.remoteName},U=V.remoteName):"module"===V.type&&(N={type:"module",remoteEntry:V.remoteEntry},U=V.remoteEntry),V.remoteEntry&&(yield function d(V,N){return(0,e.mG)(this,void 0,void 0,function*(){if("string"==typeof V)return yield z(V,N);if("script"===V.type){const U=V;return yield z(U.remoteEntry,U.remoteName)}"module"===V.type&&(yield function p(V){return(0,e.mG)(this,void 0,void 0,function*(){return n[V]?Promise.resolve():yield import(V).then(N=>{c(N,V),n[V]=N})})}(V.remoteEntry))})}(N)),yield function $(V,N){return(0,e.mG)(this,void 0,void 0,function*(){return(yield n[V].get(N))()})}(U,V.exposedModule)})}},6954:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.AwsCrc32c=void 0;var e=u(480),n=u(1500),y=u(5423),x=function(){function $(){this.crc32c=new y.Crc32c}return $.prototype.update=function(c){(0,n.isEmptyData)(c)||this.crc32c.update((0,n.convertToBuffer)(c))},$.prototype.digest=function(){return(0,e.__awaiter)(this,void 0,void 0,function(){return(0,e.__generator)(this,function(c){return[2,(0,n.numToUint8)(this.crc32c.digest())]})})},$}();K.AwsCrc32c=x},5423:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.AwsCrc32c=K.Crc32c=K.crc32c=void 0;var e=u(480),n=u(1500);K.crc32c=function y(p){return(new x).update(p).digest()};var x=function(){function p(){this.checksum=4294967295}return p.prototype.update=function(z){var S,V;try{for(var N=(0,e.__values)(z),U=N.next();!U.done;U=N.next())this.checksum=this.checksum>>>8^c[255&(this.checksum^U.value)]}catch(Q){S={error:Q}}finally{try{U&&!U.done&&(V=N.return)&&V.call(N)}finally{if(S)throw S.error}}return this},p.prototype.digest=function(){return(4294967295^this.checksum)>>>0},p}();K.Crc32c=x;var c=(0,n.uint32ArrayFrom)([0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697]),d=u(6954);Object.defineProperty(K,"AwsCrc32c",{enumerable:!0,get:function(){return d.AwsCrc32c}})},6502:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.convertToBuffer=void 0;var e=u(2093),n="undefined"!=typeof Buffer&&Buffer.from?function(x){return Buffer.from(x,"utf8")}:e.fromUtf8;K.convertToBuffer=function y(x){return x instanceof Uint8Array?x:"string"==typeof x?n(x):ArrayBuffer.isView(x)?new Uint8Array(x.buffer,x.byteOffset,x.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(x)}},1500:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.uint32ArrayFrom=K.numToUint8=K.isEmptyData=K.convertToBuffer=void 0;var e=u(6502);Object.defineProperty(K,"convertToBuffer",{enumerable:!0,get:function(){return e.convertToBuffer}});var n=u(3814);Object.defineProperty(K,"isEmptyData",{enumerable:!0,get:function(){return n.isEmptyData}});var y=u(566);Object.defineProperty(K,"numToUint8",{enumerable:!0,get:function(){return y.numToUint8}});var x=u(2700);Object.defineProperty(K,"uint32ArrayFrom",{enumerable:!0,get:function(){return x.uint32ArrayFrom}})},3814:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.isEmptyData=void 0,K.isEmptyData=function u(e){return"string"==typeof e?0===e.length:0===e.byteLength}},566:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.numToUint8=void 0,K.numToUint8=function u(e){return new Uint8Array([(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])}},2700:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.uint32ArrayFrom=void 0,K.uint32ArrayFrom=function u(e){if(!Uint32Array.from){for(var n=new Uint32Array(e.length),y=0;y<e.length;)n[y]=e[y],y+=1;return n}return Uint32Array.from(e)}},3141:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.EMPTY_DATA_SHA_1=K.SHA_1_HMAC_ALGO=K.SHA_1_HASH=void 0,K.SHA_1_HASH={name:"SHA-1"},K.SHA_1_HMAC_ALGO={name:"HMAC",hash:K.SHA_1_HASH},K.EMPTY_DATA_SHA_1=new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9])},1883:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.Sha1=void 0;var e=u(1283),n=u(2766),y=u(7506),x=u(776),$=u(5468),c=function(){function d(p){if((0,y.supportsWebCrypto)((0,$.locateWindow)()))this.hash=new n.Sha1(p);else{if(!(0,x.isMsWindow)((0,$.locateWindow)()))throw new Error("SHA1 not supported");this.hash=new e.Sha1(p)}}return d.prototype.update=function(p,z){this.hash.update(p,z)},d.prototype.digest=function(){return this.hash.digest()},d}();K.Sha1=c},1283:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.Sha1=void 0;var e=u(3626),n=u(3141),y=u(2093),x=u(5468),$=function(){function p(z){z?(this.operation=function c(p){return new Promise(function(z,S){var V=(0,x.locateWindow)().msCrypto.subtle.importKey("raw",d(p),n.SHA_1_HMAC_ALGO,!1,["sign"]);V.oncomplete=function(){V.result&&z(V.result),S(new Error("ImportKey completed without importing key."))},V.onerror=function(){S(new Error("ImportKey failed to import key."))}})}(z).then(function(S){return(0,x.locateWindow)().msCrypto.subtle.sign(n.SHA_1_HMAC_ALGO,S)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,x.locateWindow)().msCrypto.subtle.digest("SHA-1"))}return p.prototype.update=function(z){var S=this;(0,e.isEmptyData)(z)||(this.operation=this.operation.then(function(V){return V.onerror=function(){S.operation=Promise.reject(new Error("Error encountered updating hash"))},V.process(d(z)),V}),this.operation.catch(function(){}))},p.prototype.digest=function(){return this.operation.then(function(z){return new Promise(function(S,V){z.onerror=function(){V(new Error("Error encountered finalizing hash"))},z.oncomplete=function(){z.result&&S(new Uint8Array(z.result)),V(new Error("Error encountered finalizing hash"))},z.finish()})})},p}();function d(p){return"string"==typeof p?(0,y.fromUtf8)(p):ArrayBuffer.isView(p)?new Uint8Array(p.buffer,p.byteOffset,p.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(p)}K.Sha1=$},6982:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.WebCryptoSha1=K.Ie11Sha1=void 0,(0,u(70).__exportStar)(u(1883),K);var n=u(1283);Object.defineProperty(K,"Ie11Sha1",{enumerable:!0,get:function(){return n.Sha1}});var y=u(2766);Object.defineProperty(K,"WebCryptoSha1",{enumerable:!0,get:function(){return y.Sha1}})},3626:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.isEmptyData=void 0,K.isEmptyData=function u(e){return"string"==typeof e?0===e.length:0===e.byteLength}},2766:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.Sha1=void 0;var e=u(2093),n=u(3626),y=u(3141),x=u(5468),$=function(){function d(p){this.toHash=new Uint8Array(0),void 0!==p&&(this.key=new Promise(function(z,S){(0,x.locateWindow)().crypto.subtle.importKey("raw",c(p),y.SHA_1_HMAC_ALGO,!1,["sign"]).then(z,S)}),this.key.catch(function(){}))}return d.prototype.update=function(p){if(!(0,n.isEmptyData)(p)){var z=c(p),S=new Uint8Array(this.toHash.byteLength+z.byteLength);S.set(this.toHash,0),S.set(z,this.toHash.byteLength),this.toHash=S}},d.prototype.digest=function(){var p=this;return this.key?this.key.then(function(z){return(0,x.locateWindow)().crypto.subtle.sign(y.SHA_1_HMAC_ALGO,z,p.toHash).then(function(S){return new Uint8Array(S)})}):(0,n.isEmptyData)(this.toHash)?Promise.resolve(y.EMPTY_DATA_SHA_1):Promise.resolve().then(function(){return(0,x.locateWindow)().crypto.subtle.digest(y.SHA_1_HASH,p.toHash)}).then(function(z){return Promise.resolve(new Uint8Array(z))})},d}();function c(d){return"string"==typeof d?(0,e.fromUtf8)(d):ArrayBuffer.isView(d)?new Uint8Array(d.buffer,d.byteOffset,d.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(d)}K.Sha1=$},9189:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0})},2624:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0})},8732:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0})},8424:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0})},7705:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.isMsWindow=void 0;var u=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];K.isMsWindow=function n(y){if(function e(y){return"MSInputMethodContext"in y&&"msCrypto"in y}(y)&&void 0!==y.msCrypto.subtle){var x=y.msCrypto,$=x.getRandomValues,c=x.subtle;return u.map(function(d){return c[d]}).concat($).every(function(d){return"function"==typeof d})}return!1}},776:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0});var e=u(70);(0,e.__exportStar)(u(9189),K),(0,e.__exportStar)(u(2624),K),(0,e.__exportStar)(u(8732),K),(0,e.__exportStar)(u(8424),K),(0,e.__exportStar)(u(7705),K)},7506:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),(0,u(70).__exportStar)(u(2398),K)},2398:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.supportsZeroByteGCM=K.supportsSubtleCrypto=K.supportsSecureRandom=K.supportsWebCrypto=void 0;var e=u(70),n=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function x(d){return"object"==typeof d&&"object"==typeof d.crypto&&"function"==typeof d.crypto.getRandomValues}function $(d){return d&&n.every(function(p){return"function"==typeof d[p]})}K.supportsWebCrypto=function y(d){return!(!x(d)||"object"!=typeof d.crypto.subtle)&&$(d.crypto.subtle)},K.supportsSecureRandom=x,K.supportsSubtleCrypto=$,K.supportsZeroByteGCM=function c(d){return(0,e.__awaiter)(this,void 0,void 0,function(){var p;return(0,e.__generator)(this,function(V){switch(V.label){case 0:if(!$(d))return[2,!1];V.label=1;case 1:return V.trys.push([1,4,,5]),[4,d.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return p=V.sent(),[4,d.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},p,new Uint8Array(0))];case 3:return[2,16===V.sent().byteLength];case 4:return V.sent(),[2,!1];case 5:return[2]}})})}},5337:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.RawSha256=void 0;var e=u(9271),n=function(){function y(){this.state=Int32Array.from(e.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return y.prototype.update=function(x){if(this.finished)throw new Error("Attempted to update an already finished hash.");var $=0,c=x.byteLength;if(this.bytesHashed+=c,8*this.bytesHashed>e.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;c>0;)this.buffer[this.bufferLength++]=x[$++],c--,this.bufferLength===e.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},y.prototype.digest=function(){if(!this.finished){var x=8*this.bytesHashed,$=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),c=this.bufferLength;if($.setUint8(this.bufferLength++,128),c%e.BLOCK_SIZE>=e.BLOCK_SIZE-8){for(var d=this.bufferLength;d<e.BLOCK_SIZE;d++)$.setUint8(d,0);this.hashBuffer(),this.bufferLength=0}for(d=this.bufferLength;d<e.BLOCK_SIZE-8;d++)$.setUint8(d,0);$.setUint32(e.BLOCK_SIZE-8,Math.floor(x/4294967296),!0),$.setUint32(e.BLOCK_SIZE-4,x),this.hashBuffer(),this.finished=!0}var p=new Uint8Array(e.DIGEST_LENGTH);for(d=0;d<8;d++)p[4*d]=this.state[d]>>>24&255,p[4*d+1]=this.state[d]>>>16&255,p[4*d+2]=this.state[d]>>>8&255,p[4*d+3]=this.state[d]>>>0&255;return p},y.prototype.hashBuffer=function(){for(var $=this.buffer,c=this.state,d=c[0],p=c[1],z=c[2],S=c[3],V=c[4],N=c[5],U=c[6],H=c[7],Q=0;Q<e.BLOCK_SIZE;Q++){if(Q<16)this.temp[Q]=(255&$[4*Q])<<24|(255&$[4*Q+1])<<16|(255&$[4*Q+2])<<8|255&$[4*Q+3];else{var Z=this.temp[Q-2];this.temp[Q]=(((Z>>>17|Z<<15)^(Z>>>19|Z<<13)^Z>>>10)+this.temp[Q-7]|0)+((((Z=this.temp[Q-15])>>>7|Z<<25)^(Z>>>18|Z<<14)^Z>>>3)+this.temp[Q-16]|0)}var X=(((V>>>6|V<<26)^(V>>>11|V<<21)^(V>>>25|V<<7))+(V&N^~V&U)|0)+(H+(e.KEY[Q]+this.temp[Q]|0)|0)|0,ee=((d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10))+(d&p^d&z^p&z)|0;H=U,U=N,N=V,V=S+X|0,S=z,z=p,p=d,d=X+ee|0}c[0]+=d,c[1]+=p,c[2]+=z,c[3]+=S,c[4]+=V,c[5]+=N,c[6]+=U,c[7]+=H},y}();K.RawSha256=n},9271:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.MAX_HASHABLE_LENGTH=K.INIT=K.KEY=K.DIGEST_LENGTH=K.BLOCK_SIZE=void 0,K.BLOCK_SIZE=64,K.DIGEST_LENGTH=32,K.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),K.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],K.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},9984:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),(0,u(9055).__exportStar)(u(7803),K)},7803:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.Sha256=void 0;var e=u(9055),n=u(9271),y=u(5337),x=u(5272),$=function(){function d(p){if(this.hash=new y.RawSha256,p){this.outer=new y.RawSha256;var z=function c(d){var p=(0,x.convertToBuffer)(d);if(p.byteLength>n.BLOCK_SIZE){var z=new y.RawSha256;z.update(p),p=z.digest()}var S=new Uint8Array(n.BLOCK_SIZE);return S.set(p),S}(p),S=new Uint8Array(n.BLOCK_SIZE);S.set(z);for(var V=0;V<n.BLOCK_SIZE;V++)z[V]^=54,S[V]^=92;for(this.hash.update(z),this.outer.update(S),V=0;V<z.byteLength;V++)z[V]=0}}return d.prototype.update=function(p){if(!(0,x.isEmptyData)(p)&&!this.error)try{this.hash.update((0,x.convertToBuffer)(p))}catch(z){this.error=z}},d.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},d.prototype.digest=function(){return(0,e.__awaiter)(this,void 0,void 0,function(){return(0,e.__generator)(this,function(p){return[2,this.digestSync()]})})},d}();K.Sha256=$},5448:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.convertToBuffer=void 0;var e=u(2093),n="undefined"!=typeof Buffer&&Buffer.from?function(x){return Buffer.from(x,"utf8")}:e.fromUtf8;K.convertToBuffer=function y(x){return x instanceof Uint8Array?x:"string"==typeof x?n(x):ArrayBuffer.isView(x)?new Uint8Array(x.buffer,x.byteOffset,x.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(x)}},5272:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.uint32ArrayFrom=K.numToUint8=K.isEmptyData=K.convertToBuffer=void 0;var e=u(5448);Object.defineProperty(K,"convertToBuffer",{enumerable:!0,get:function(){return e.convertToBuffer}});var n=u(482);Object.defineProperty(K,"isEmptyData",{enumerable:!0,get:function(){return n.isEmptyData}});var y=u(6203);Object.defineProperty(K,"numToUint8",{enumerable:!0,get:function(){return y.numToUint8}});var x=u(5824);Object.defineProperty(K,"uint32ArrayFrom",{enumerable:!0,get:function(){return x.uint32ArrayFrom}})},482:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.isEmptyData=void 0,K.isEmptyData=function u(e){return"string"==typeof e?0===e.length:0===e.byteLength}},6203:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.numToUint8=void 0,K.numToUint8=function u(e){return new Uint8Array([(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])}},5824:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.uint32ArrayFrom=void 0,K.uint32ArrayFrom=function u(e){if(!Array.from){for(var n=new Uint32Array(e.length);0<e.length;)n[0]=e[0];return n}return Uint32Array.from(e)}},884:(it,K,u)=>{u.d(K,{Q:()=>m});var e=u(4929),n=u(6683),y=u(6467),x=u(5147),$=u(9014),c=u(9972),d=u(2356),p=u(1703),z=u(4198);var V=u(6513),N=u(1237),U=u(6752),H=u(1187),Q=u(2845),Z=u(3018),ue=u(2093),G=u(4707),X={"us-east-1":{variants:[{hostname:"cognito-identity-fips.us-east-1.amazonaws.com",tags:["fips"]}]},"us-east-2":{variants:[{hostname:"cognito-identity-fips.us-east-2.amazonaws.com",tags:["fips"]}]},"us-gov-west-1":{variants:[{hostname:"cognito-identity-fips.us-gov-west-1.amazonaws.com",tags:["fips"]}]},"us-west-2":{variants:[{hostname:"cognito-identity-fips.us-west-2.amazonaws.com",tags:["fips"]}]}},ee={aws:{regions:["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-northeast-3","ap-south-1","ap-southeast-1","ap-southeast-2","ap-southeast-3","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","fips-us-east-1","fips-us-east-2","fips-us-west-2","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"],regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",variants:[{hostname:"cognito-identity.{region}.amazonaws.com",tags:[]},{hostname:"cognito-identity-fips.{region}.amazonaws.com",tags:["fips"]},{hostname:"cognito-identity-fips.{region}.api.aws",tags:["dualstack","fips"]},{hostname:"cognito-identity.{region}.api.aws",tags:["dualstack"]}]},"aws-cn":{regions:["cn-north-1","cn-northwest-1"],regionRegex:"^cn\\-\\w+\\-\\d+$",variants:[{hostname:"cognito-identity.{region}.amazonaws.com.cn",tags:[]},{hostname:"cognito-identity-fips.{region}.amazonaws.com.cn",tags:["fips"]},{hostname:"cognito-identity-fips.{region}.api.amazonwebservices.com.cn",tags:["dualstack","fips"]},{hostname:"cognito-identity.{region}.api.amazonwebservices.com.cn",tags:["dualstack"]}]},"aws-iso":{regions:["us-iso-east-1","us-iso-west-1"],regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",variants:[{hostname:"cognito-identity.{region}.c2s.ic.gov",tags:[]},{hostname:"cognito-identity-fips.{region}.c2s.ic.gov",tags:["fips"]}]},"aws-iso-b":{regions:["us-isob-east-1"],regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",variants:[{hostname:"cognito-identity.{region}.sc2s.sgov.gov",tags:[]},{hostname:"cognito-identity-fips.{region}.sc2s.sgov.gov",tags:["fips"]}]},"aws-us-gov":{regions:["fips-us-gov-west-1","us-gov-east-1","us-gov-west-1"],regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",variants:[{hostname:"cognito-identity.{region}.amazonaws.com",tags:[]},{hostname:"cognito-identity-fips.{region}.amazonaws.com",tags:["fips"]},{hostname:"cognito-identity-fips.{region}.api.aws",tags:["dualstack","fips"]},{hostname:"cognito-identity.{region}.api.aws",tags:["dualstack"]}]}},ve=function(P,b){return(0,e.mG)(void 0,void 0,void 0,function(){return(0,e.Jh)(this,function(_){return[2,(0,n.iF)(P,(0,e.pi)((0,e.pi)({},b),{signingService:"cognito-identity",regionHash:X,partitionHash:ee}))]})})},Le=u(8959),m=function(P){function b(_){var R=this,E=function(P){var b,_,R,E,ne,me,Ee,se,ze,Ge,xe,qe,Xe,lt,He,Ye=(0,Le.j)(P),ht=function(){return Ye().then(z.jv)},Se=function(P){var b,_,R,E,ne;return{apiVersion:"2014-06-30",disableHostPrefix:null!==(b=null==P?void 0:P.disableHostPrefix)&&void 0!==b&&b,logger:null!==(_=null==P?void 0:P.logger)&&void 0!==_?_:{},regionInfoProvider:null!==(R=null==P?void 0:P.regionInfoProvider)&&void 0!==R?R:ve,serviceId:null!==(E=null==P?void 0:P.serviceId)&&void 0!==E?E:"Cognito Identity",urlParser:null!==(ne=null==P?void 0:P.urlParser)&&void 0!==ne?ne:G.e}}(P);return(0,e.pi)((0,e.pi)((0,e.pi)({},Se),P),{runtime:"browser",defaultsMode:Ye,base64Decoder:null!==(b=null==P?void 0:P.base64Decoder)&&void 0!==b?b:H.G,base64Encoder:null!==(_=null==P?void 0:P.base64Encoder)&&void 0!==_?_:H.s,bodyLengthChecker:null!==(R=null==P?void 0:P.bodyLengthChecker)&&void 0!==R?R:Q.W,credentialDefaultProvider:null!==(E=null==P?void 0:P.credentialDefaultProvider)&&void 0!==E?E:function(he){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:null!==(ne=null==P?void 0:P.defaultUserAgentProvider)&&void 0!==ne?ne:(0,Z.f)({serviceId:Se.serviceId,clientVersion:"3.54.0"}),maxAttempts:null!==(me=null==P?void 0:P.maxAttempts)&&void 0!==me?me:c.J,region:null!==(Ee=null==P?void 0:P.region)&&void 0!==Ee?Ee:(0,U.n)("Region is missing"),requestHandler:null!==(se=null==P?void 0:P.requestHandler)&&void 0!==se?se:new N.B(ht),retryMode:null!==(ze=null==P?void 0:P.retryMode)&&void 0!==ze?ze:function(){return(0,e.mG)(void 0,void 0,void 0,function(){return(0,e.Jh)(this,function(he){switch(he.label){case 0:return[4,ht()];case 1:return[2,he.sent().retryMode||c.CA]}})})},sha256:null!==(Ge=null==P?void 0:P.sha256)&&void 0!==Ge?Ge:V.Sha256,streamCollector:null!==(xe=null==P?void 0:P.streamCollector)&&void 0!==xe?xe:N.C,useDualstackEndpoint:null!==(qe=null==P?void 0:P.useDualstackEndpoint)&&void 0!==qe?qe:function(){return Promise.resolve(n.JY)},useFipsEndpoint:null!==(Xe=null==P?void 0:P.useFipsEndpoint)&&void 0!==Xe?Xe:function(){return Promise.resolve(n.Fh)},utf8Decoder:null!==(lt=null==P?void 0:P.utf8Decoder)&&void 0!==lt?lt:ue.fromUtf8,utf8Encoder:null!==(He=null==P?void 0:P.utf8Encoder)&&void 0!==He?He:ue.toUtf8})}(_),ne=(0,n.Xb)(E),me=(0,n.g4)(ne),Ee=(0,c.BC)(me),se=(0,x.S8)(Ee),ze=(0,d.A$)(se),Ge=(0,p.er)(ze);return(R=P.call(this,Ge)||this).config=Ge,R.middlewareStack.use((0,c.NQ)(R.config)),R.middlewareStack.use((0,y.VG)(R.config)),R.middlewareStack.use((0,x.G2)(R.config)),R.middlewareStack.use((0,$.cV)(R.config)),R.middlewareStack.use((0,p.XJ)(R.config)),R}return(0,e.ZT)(b,P),b.prototype.destroy=function(){P.prototype.destroy.call(this)},b}(z.KU)},4447:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0})},5694:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0})},3502:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0})},9710:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0})},3707:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.isMsWindow=void 0;var u=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];K.isMsWindow=function n(y){if(function e(y){return"MSInputMethodContext"in y&&"msCrypto"in y}(y)&&void 0!==y.msCrypto.subtle){var x=y.msCrypto,$=x.getRandomValues,c=x.subtle;return u.map(function(d){return c[d]}).concat($).every(function(d){return"function"==typeof d})}return!1}},9826:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0});var e=u(7994);(0,e.__exportStar)(u(4447),K),(0,e.__exportStar)(u(5694),K),(0,e.__exportStar)(u(3502),K),(0,e.__exportStar)(u(9710),K),(0,e.__exportStar)(u(3707),K)},4812:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.EMPTY_DATA_SHA_256=K.SHA_256_HMAC_ALGO=K.SHA_256_HASH=void 0,K.SHA_256_HASH={name:"SHA-256"},K.SHA_256_HMAC_ALGO={name:"HMAC",hash:K.SHA_256_HASH},K.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])},3911:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.Sha256=void 0;var e=u(5912),n=u(532),y=u(7408),x=u(8284),$=u(9826),c=u(5468),d=function(){function p(z){this.hash=(0,x.supportsWebCrypto)((0,c.locateWindow)())?new n.Sha256(z):(0,$.isMsWindow)((0,c.locateWindow)())?new e.Sha256(z):new y.Sha256(z)}return p.prototype.update=function(z,S){this.hash.update(z,S)},p.prototype.digest=function(){return this.hash.digest()},p}();K.Sha256=d},5912:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.Sha256=void 0;var e=u(7283),n=u(4812),y=u(2093),x=u(5468),$=function(){function p(z){z?(this.operation=function c(p){return new Promise(function(z,S){var V=(0,x.locateWindow)().msCrypto.subtle.importKey("raw",d(p),n.SHA_256_HMAC_ALGO,!1,["sign"]);V.oncomplete=function(){V.result&&z(V.result),S(new Error("ImportKey completed without importing key."))},V.onerror=function(){S(new Error("ImportKey failed to import key."))}})}(z).then(function(S){return(0,x.locateWindow)().msCrypto.subtle.sign(n.SHA_256_HMAC_ALGO,S)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,x.locateWindow)().msCrypto.subtle.digest("SHA-256"))}return p.prototype.update=function(z){var S=this;(0,e.isEmptyData)(z)||(this.operation=this.operation.then(function(V){return V.onerror=function(){S.operation=Promise.reject(new Error("Error encountered updating hash"))},V.process(d(z)),V}),this.operation.catch(function(){}))},p.prototype.digest=function(){return this.operation.then(function(z){return new Promise(function(S,V){z.onerror=function(){V(new Error("Error encountered finalizing hash"))},z.oncomplete=function(){z.result&&S(new Uint8Array(z.result)),V(new Error("Error encountered finalizing hash"))},z.finish()})})},p}();function d(p){return"string"==typeof p?(0,y.fromUtf8)(p):ArrayBuffer.isView(p)?new Uint8Array(p.buffer,p.byteOffset,p.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(p)}K.Sha256=$},6513:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.WebCryptoSha256=K.Ie11Sha256=void 0,(0,u(8952).__exportStar)(u(3911),K);var n=u(5912);Object.defineProperty(K,"Ie11Sha256",{enumerable:!0,get:function(){return n.Sha256}});var y=u(532);Object.defineProperty(K,"WebCryptoSha256",{enumerable:!0,get:function(){return y.Sha256}})},7283:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.isEmptyData=void 0,K.isEmptyData=function u(e){return"string"==typeof e?0===e.length:0===e.byteLength}},532:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.Sha256=void 0;var e=u(2862),n=u(4812),y=u(5468),x=function(){function $(c){this.toHash=new Uint8Array(0),void 0!==c&&(this.key=new Promise(function(d,p){(0,y.locateWindow)().crypto.subtle.importKey("raw",(0,e.convertToBuffer)(c),n.SHA_256_HMAC_ALGO,!1,["sign"]).then(d,p)}),this.key.catch(function(){}))}return $.prototype.update=function(c){if(!(0,e.isEmptyData)(c)){var d=(0,e.convertToBuffer)(c),p=new Uint8Array(this.toHash.byteLength+d.byteLength);p.set(this.toHash,0),p.set(d,this.toHash.byteLength),this.toHash=p}},$.prototype.digest=function(){var c=this;return this.key?this.key.then(function(d){return(0,y.locateWindow)().crypto.subtle.sign(n.SHA_256_HMAC_ALGO,d,c.toHash).then(function(p){return new Uint8Array(p)})}):(0,e.isEmptyData)(this.toHash)?Promise.resolve(n.EMPTY_DATA_SHA_256):Promise.resolve().then(function(){return(0,y.locateWindow)().crypto.subtle.digest(n.SHA_256_HASH,c.toHash)}).then(function(d){return Promise.resolve(new Uint8Array(d))})},$}();K.Sha256=x},9700:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.RawSha256=void 0;var e=u(9359),n=function(){function y(){this.state=Int32Array.from(e.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return y.prototype.update=function(x){if(this.finished)throw new Error("Attempted to update an already finished hash.");var $=0,c=x.byteLength;if(this.bytesHashed+=c,8*this.bytesHashed>e.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;c>0;)this.buffer[this.bufferLength++]=x[$++],c--,this.bufferLength===e.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},y.prototype.digest=function(){if(!this.finished){var x=8*this.bytesHashed,$=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),c=this.bufferLength;if($.setUint8(this.bufferLength++,128),c%e.BLOCK_SIZE>=e.BLOCK_SIZE-8){for(var d=this.bufferLength;d<e.BLOCK_SIZE;d++)$.setUint8(d,0);this.hashBuffer(),this.bufferLength=0}for(d=this.bufferLength;d<e.BLOCK_SIZE-8;d++)$.setUint8(d,0);$.setUint32(e.BLOCK_SIZE-8,Math.floor(x/4294967296),!0),$.setUint32(e.BLOCK_SIZE-4,x),this.hashBuffer(),this.finished=!0}var p=new Uint8Array(e.DIGEST_LENGTH);for(d=0;d<8;d++)p[4*d]=this.state[d]>>>24&255,p[4*d+1]=this.state[d]>>>16&255,p[4*d+2]=this.state[d]>>>8&255,p[4*d+3]=this.state[d]>>>0&255;return p},y.prototype.hashBuffer=function(){for(var $=this.buffer,c=this.state,d=c[0],p=c[1],z=c[2],S=c[3],V=c[4],N=c[5],U=c[6],H=c[7],Q=0;Q<e.BLOCK_SIZE;Q++){if(Q<16)this.temp[Q]=(255&$[4*Q])<<24|(255&$[4*Q+1])<<16|(255&$[4*Q+2])<<8|255&$[4*Q+3];else{var Z=this.temp[Q-2];this.temp[Q]=(((Z>>>17|Z<<15)^(Z>>>19|Z<<13)^Z>>>10)+this.temp[Q-7]|0)+((((Z=this.temp[Q-15])>>>7|Z<<25)^(Z>>>18|Z<<14)^Z>>>3)+this.temp[Q-16]|0)}var X=(((V>>>6|V<<26)^(V>>>11|V<<21)^(V>>>25|V<<7))+(V&N^~V&U)|0)+(H+(e.KEY[Q]+this.temp[Q]|0)|0)|0,ee=((d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10))+(d&p^d&z^p&z)|0;H=U,U=N,N=V,V=S+X|0,S=z,z=p,p=d,d=X+ee|0}c[0]+=d,c[1]+=p,c[2]+=z,c[3]+=S,c[4]+=V,c[5]+=N,c[6]+=U,c[7]+=H},y}();K.RawSha256=n},9359:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.MAX_HASHABLE_LENGTH=K.INIT=K.KEY=K.DIGEST_LENGTH=K.BLOCK_SIZE=void 0,K.BLOCK_SIZE=64,K.DIGEST_LENGTH=32,K.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),K.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],K.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},7408:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),(0,u(1707).__exportStar)(u(4319),K)},4319:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.Sha256=void 0;var e=u(1707),n=u(9359),y=u(9700),x=u(2862),$=function(){function d(p){if(this.hash=new y.RawSha256,p){this.outer=new y.RawSha256;var z=function c(d){var p=(0,x.convertToBuffer)(d);if(p.byteLength>n.BLOCK_SIZE){var z=new y.RawSha256;z.update(p),p=z.digest()}var S=new Uint8Array(n.BLOCK_SIZE);return S.set(p),S}(p),S=new Uint8Array(n.BLOCK_SIZE);S.set(z);for(var V=0;V<n.BLOCK_SIZE;V++)z[V]^=54,S[V]^=92;for(this.hash.update(z),this.outer.update(S),V=0;V<z.byteLength;V++)z[V]=0}}return d.prototype.update=function(p){if(!(0,x.isEmptyData)(p)&&!this.error)try{this.hash.update((0,x.convertToBuffer)(p))}catch(z){this.error=z}},d.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},d.prototype.digest=function(){return(0,e.__awaiter)(this,void 0,void 0,function(){return(0,e.__generator)(this,function(p){return[2,this.digestSync()]})})},d}();K.Sha256=$},8284:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),(0,u(9106).__exportStar)(u(7906),K)},7906:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.supportsZeroByteGCM=K.supportsSubtleCrypto=K.supportsSecureRandom=K.supportsWebCrypto=void 0;var e=u(9106),n=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function x(d){return"object"==typeof d&&"object"==typeof d.crypto&&"function"==typeof d.crypto.getRandomValues}function $(d){return d&&n.every(function(p){return"function"==typeof d[p]})}K.supportsWebCrypto=function y(d){return!(!x(d)||"object"!=typeof d.crypto.subtle)&&$(d.crypto.subtle)},K.supportsSecureRandom=x,K.supportsSubtleCrypto=$,K.supportsZeroByteGCM=function c(d){return(0,e.__awaiter)(this,void 0,void 0,function(){var p;return(0,e.__generator)(this,function(V){switch(V.label){case 0:if(!$(d))return[2,!1];V.label=1;case 1:return V.trys.push([1,4,,5]),[4,d.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return p=V.sent(),[4,d.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},p,new Uint8Array(0))];case 3:return[2,16===V.sent().byteLength];case 4:return V.sent(),[2,!1];case 5:return[2]}})})}},3376:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.convertToBuffer=void 0;var e=u(2093),n="undefined"!=typeof Buffer&&Buffer.from?function(x){return Buffer.from(x,"utf8")}:e.fromUtf8;K.convertToBuffer=function y(x){return x instanceof Uint8Array?x:"string"==typeof x?n(x):ArrayBuffer.isView(x)?new Uint8Array(x.buffer,x.byteOffset,x.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(x)}},2862:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.uint32ArrayFrom=K.numToUint8=K.isEmptyData=K.convertToBuffer=void 0;var e=u(3376);Object.defineProperty(K,"convertToBuffer",{enumerable:!0,get:function(){return e.convertToBuffer}});var n=u(8075);Object.defineProperty(K,"isEmptyData",{enumerable:!0,get:function(){return n.isEmptyData}});var y=u(2127);Object.defineProperty(K,"numToUint8",{enumerable:!0,get:function(){return y.numToUint8}});var x=u(2768);Object.defineProperty(K,"uint32ArrayFrom",{enumerable:!0,get:function(){return x.uint32ArrayFrom}})},8075:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.isEmptyData=void 0,K.isEmptyData=function u(e){return"string"==typeof e?0===e.length:0===e.byteLength}},2127:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.numToUint8=void 0,K.numToUint8=function u(e){return new Uint8Array([(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])}},2768:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.uint32ArrayFrom=void 0,K.uint32ArrayFrom=function u(e){if(!Uint32Array.from){for(var n=new Uint32Array(e.length),y=0;y<e.length;)n[y]=e[y],y+=1;return n}return Uint32Array.from(e)}},1674:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0})},8645:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0})},2667:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0})},1693:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0})},9484:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.isMsWindow=void 0;var u=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];K.isMsWindow=function n(y){if(function e(y){return"MSInputMethodContext"in y&&"msCrypto"in y}(y)&&void 0!==y.msCrypto.subtle){var x=y.msCrypto,$=x.getRandomValues,c=x.subtle;return u.map(function(d){return c[d]}).concat($).every(function(d){return"function"==typeof d})}return!1}},6868:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0});var e=u(5298);(0,e.__exportStar)(u(1674),K),(0,e.__exportStar)(u(8645),K),(0,e.__exportStar)(u(2667),K),(0,e.__exportStar)(u(1693),K),(0,e.__exportStar)(u(9484),K)},1432:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.EMPTY_DATA_SHA_256=K.SHA_256_HMAC_ALGO=K.SHA_256_HASH=void 0,K.SHA_256_HASH={name:"SHA-256"},K.SHA_256_HMAC_ALGO={name:"HMAC",hash:K.SHA_256_HASH},K.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])},1602:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.Sha256=void 0;var e=u(1673),n=u(5717),y=u(9985),x=u(9696),$=u(6868),c=u(5468),d=function(){function p(z){this.hash=(0,x.supportsWebCrypto)((0,c.locateWindow)())?new n.Sha256(z):(0,$.isMsWindow)((0,c.locateWindow)())?new e.Sha256(z):new y.Sha256(z)}return p.prototype.update=function(z,S){this.hash.update(z,S)},p.prototype.digest=function(){return this.hash.digest()},p}();K.Sha256=d},1673:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.Sha256=void 0;var e=u(7778),n=u(1432),y=u(2093),x=u(5468),$=function(){function p(z){z?(this.operation=function c(p){return new Promise(function(z,S){var V=(0,x.locateWindow)().msCrypto.subtle.importKey("raw",d(p),n.SHA_256_HMAC_ALGO,!1,["sign"]);V.oncomplete=function(){V.result&&z(V.result),S(new Error("ImportKey completed without importing key."))},V.onerror=function(){S(new Error("ImportKey failed to import key."))}})}(z).then(function(S){return(0,x.locateWindow)().msCrypto.subtle.sign(n.SHA_256_HMAC_ALGO,S)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,x.locateWindow)().msCrypto.subtle.digest("SHA-256"))}return p.prototype.update=function(z){var S=this;(0,e.isEmptyData)(z)||(this.operation=this.operation.then(function(V){return V.onerror=function(){S.operation=Promise.reject(new Error("Error encountered updating hash"))},V.process(d(z)),V}),this.operation.catch(function(){}))},p.prototype.digest=function(){return this.operation.then(function(z){return new Promise(function(S,V){z.onerror=function(){V(new Error("Error encountered finalizing hash"))},z.oncomplete=function(){z.result&&S(new Uint8Array(z.result)),V(new Error("Error encountered finalizing hash"))},z.finish()})})},p}();function d(p){return"string"==typeof p?(0,y.fromUtf8)(p):ArrayBuffer.isView(p)?new Uint8Array(p.buffer,p.byteOffset,p.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(p)}K.Sha256=$},4907:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.WebCryptoSha256=K.Ie11Sha256=void 0,(0,u(9904).__exportStar)(u(1602),K);var n=u(1673);Object.defineProperty(K,"Ie11Sha256",{enumerable:!0,get:function(){return n.Sha256}});var y=u(5717);Object.defineProperty(K,"WebCryptoSha256",{enumerable:!0,get:function(){return y.Sha256}})},7778:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.isEmptyData=void 0,K.isEmptyData=function u(e){return"string"==typeof e?0===e.length:0===e.byteLength}},5717:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.Sha256=void 0;var e=u(9248),n=u(1432),y=u(5468),x=function(){function $(c){this.toHash=new Uint8Array(0),void 0!==c&&(this.key=new Promise(function(d,p){(0,y.locateWindow)().crypto.subtle.importKey("raw",(0,e.convertToBuffer)(c),n.SHA_256_HMAC_ALGO,!1,["sign"]).then(d,p)}),this.key.catch(function(){}))}return $.prototype.update=function(c){if(!(0,e.isEmptyData)(c)){var d=(0,e.convertToBuffer)(c),p=new Uint8Array(this.toHash.byteLength+d.byteLength);p.set(this.toHash,0),p.set(d,this.toHash.byteLength),this.toHash=p}},$.prototype.digest=function(){var c=this;return this.key?this.key.then(function(d){return(0,y.locateWindow)().crypto.subtle.sign(n.SHA_256_HMAC_ALGO,d,c.toHash).then(function(p){return new Uint8Array(p)})}):(0,e.isEmptyData)(this.toHash)?Promise.resolve(n.EMPTY_DATA_SHA_256):Promise.resolve().then(function(){return(0,y.locateWindow)().crypto.subtle.digest(n.SHA_256_HASH,c.toHash)}).then(function(d){return Promise.resolve(new Uint8Array(d))})},$}();K.Sha256=x},6643:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.RawSha256=void 0;var e=u(9210),n=function(){function y(){this.state=Int32Array.from(e.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return y.prototype.update=function(x){if(this.finished)throw new Error("Attempted to update an already finished hash.");var $=0,c=x.byteLength;if(this.bytesHashed+=c,8*this.bytesHashed>e.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;c>0;)this.buffer[this.bufferLength++]=x[$++],c--,this.bufferLength===e.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},y.prototype.digest=function(){if(!this.finished){var x=8*this.bytesHashed,$=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),c=this.bufferLength;if($.setUint8(this.bufferLength++,128),c%e.BLOCK_SIZE>=e.BLOCK_SIZE-8){for(var d=this.bufferLength;d<e.BLOCK_SIZE;d++)$.setUint8(d,0);this.hashBuffer(),this.bufferLength=0}for(d=this.bufferLength;d<e.BLOCK_SIZE-8;d++)$.setUint8(d,0);$.setUint32(e.BLOCK_SIZE-8,Math.floor(x/4294967296),!0),$.setUint32(e.BLOCK_SIZE-4,x),this.hashBuffer(),this.finished=!0}var p=new Uint8Array(e.DIGEST_LENGTH);for(d=0;d<8;d++)p[4*d]=this.state[d]>>>24&255,p[4*d+1]=this.state[d]>>>16&255,p[4*d+2]=this.state[d]>>>8&255,p[4*d+3]=this.state[d]>>>0&255;return p},y.prototype.hashBuffer=function(){for(var $=this.buffer,c=this.state,d=c[0],p=c[1],z=c[2],S=c[3],V=c[4],N=c[5],U=c[6],H=c[7],Q=0;Q<e.BLOCK_SIZE;Q++){if(Q<16)this.temp[Q]=(255&$[4*Q])<<24|(255&$[4*Q+1])<<16|(255&$[4*Q+2])<<8|255&$[4*Q+3];else{var Z=this.temp[Q-2];this.temp[Q]=(((Z>>>17|Z<<15)^(Z>>>19|Z<<13)^Z>>>10)+this.temp[Q-7]|0)+((((Z=this.temp[Q-15])>>>7|Z<<25)^(Z>>>18|Z<<14)^Z>>>3)+this.temp[Q-16]|0)}var X=(((V>>>6|V<<26)^(V>>>11|V<<21)^(V>>>25|V<<7))+(V&N^~V&U)|0)+(H+(e.KEY[Q]+this.temp[Q]|0)|0)|0,ee=((d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10))+(d&p^d&z^p&z)|0;H=U,U=N,N=V,V=S+X|0,S=z,z=p,p=d,d=X+ee|0}c[0]+=d,c[1]+=p,c[2]+=z,c[3]+=S,c[4]+=V,c[5]+=N,c[6]+=U,c[7]+=H},y}();K.RawSha256=n},9210:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.MAX_HASHABLE_LENGTH=K.INIT=K.KEY=K.DIGEST_LENGTH=K.BLOCK_SIZE=void 0,K.BLOCK_SIZE=64,K.DIGEST_LENGTH=32,K.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),K.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],K.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},9985:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),(0,u(7716).__exportStar)(u(769),K)},769:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.Sha256=void 0;var e=u(7716),n=u(9210),y=u(6643),x=u(9248),$=function(){function d(p){if(this.hash=new y.RawSha256,p){this.outer=new y.RawSha256;var z=function c(d){var p=(0,x.convertToBuffer)(d);if(p.byteLength>n.BLOCK_SIZE){var z=new y.RawSha256;z.update(p),p=z.digest()}var S=new Uint8Array(n.BLOCK_SIZE);return S.set(p),S}(p),S=new Uint8Array(n.BLOCK_SIZE);S.set(z);for(var V=0;V<n.BLOCK_SIZE;V++)z[V]^=54,S[V]^=92;for(this.hash.update(z),this.outer.update(S),V=0;V<z.byteLength;V++)z[V]=0}}return d.prototype.update=function(p){if(!(0,x.isEmptyData)(p)&&!this.error)try{this.hash.update((0,x.convertToBuffer)(p))}catch(z){this.error=z}},d.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},d.prototype.digest=function(){return(0,e.__awaiter)(this,void 0,void 0,function(){return(0,e.__generator)(this,function(p){return[2,this.digestSync()]})})},d}();K.Sha256=$},9696:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),(0,u(6187).__exportStar)(u(8022),K)},8022:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.supportsZeroByteGCM=K.supportsSubtleCrypto=K.supportsSecureRandom=K.supportsWebCrypto=void 0;var e=u(6187),n=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function x(d){return"object"==typeof d&&"object"==typeof d.crypto&&"function"==typeof d.crypto.getRandomValues}function $(d){return d&&n.every(function(p){return"function"==typeof d[p]})}K.supportsWebCrypto=function y(d){return!(!x(d)||"object"!=typeof d.crypto.subtle)&&$(d.crypto.subtle)},K.supportsSecureRandom=x,K.supportsSubtleCrypto=$,K.supportsZeroByteGCM=function c(d){return(0,e.__awaiter)(this,void 0,void 0,function(){var p;return(0,e.__generator)(this,function(V){switch(V.label){case 0:if(!$(d))return[2,!1];V.label=1;case 1:return V.trys.push([1,4,,5]),[4,d.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return p=V.sent(),[4,d.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},p,new Uint8Array(0))];case 3:return[2,16===V.sent().byteLength];case 4:return V.sent(),[2,!1];case 5:return[2]}})})}},7388:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.convertToBuffer=void 0;var e=u(2093),n="undefined"!=typeof Buffer&&Buffer.from?function(x){return Buffer.from(x,"utf8")}:e.fromUtf8;K.convertToBuffer=function y(x){return x instanceof Uint8Array?x:"string"==typeof x?n(x):ArrayBuffer.isView(x)?new Uint8Array(x.buffer,x.byteOffset,x.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(x)}},9248:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.uint32ArrayFrom=K.numToUint8=K.isEmptyData=K.convertToBuffer=void 0;var e=u(7388);Object.defineProperty(K,"convertToBuffer",{enumerable:!0,get:function(){return e.convertToBuffer}});var n=u(2885);Object.defineProperty(K,"isEmptyData",{enumerable:!0,get:function(){return n.isEmptyData}});var y=u(7477);Object.defineProperty(K,"numToUint8",{enumerable:!0,get:function(){return y.numToUint8}});var x=u(7476);Object.defineProperty(K,"uint32ArrayFrom",{enumerable:!0,get:function(){return x.uint32ArrayFrom}})},2885:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.isEmptyData=void 0,K.isEmptyData=function u(e){return"string"==typeof e?0===e.length:0===e.byteLength}},7477:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.numToUint8=void 0,K.numToUint8=function u(e){return new Uint8Array([(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])}},7476:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.uint32ArrayFrom=void 0,K.uint32ArrayFrom=function u(e){if(!Uint32Array.from){for(var n=new Uint32Array(e.length),y=0;y<e.length;)n[y]=e[y],y+=1;return n}return Uint32Array.from(e)}},9653:function(it,K,u){var e=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(K,"__esModule",{value:!0}),K.decodeHTML=K.decodeHTMLStrict=K.decodeXML=void 0;var n=e(u(6086)),y=e(u(2453)),x=e(u(8161)),$=e(u(1653)),c=/&(?:[a-zA-Z0-9]+|#[xX][\da-fA-F]+|#\d+);/g;function d(S){var V=z(S);return function(N){return String(N).replace(c,V)}}K.decodeXML=d(x.default),K.decodeHTMLStrict=d(n.default);var p=function(S,V){return S<V?1:-1};function z(S){return function(N){if("#"===N.charAt(1)){var U=N.charAt(2);return $.default("X"===U||"x"===U?parseInt(N.substr(3),16):parseInt(N.substr(2),10))}return S[N.slice(1,-1)]||N}}K.decodeHTML=function(){for(var S=Object.keys(y.default).sort(p),V=Object.keys(n.default).sort(p),N=0,U=0;N<V.length;N++)S[U]===V[N]?(V[N]+=";?",U++):V[N]+=";";var H=new RegExp("&(?:"+V.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),Q=z(n.default);function Z(ue){return";"!==ue.substr(-1)&&(ue+=";"),Q(ue)}return function(ue){return String(ue).replace(H,Z)}}()},1653:function(it,K,u){var e=this&&this.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(K,"__esModule",{value:!0});var n=e(u(2148)),y=String.fromCodePoint||function($){var c="";return $>65535&&($-=65536,c+=String.fromCharCode($>>>10&1023|55296),$=56320|1023&$),c+String.fromCharCode($)};K.default=function x($){return $>=55296&&$<=57343||$>1114111?"\ufffd":($ in n.default&&($=n.default[$]),y($))}},5771:function(it,K,u){var e=this&&this.__importDefault||function(G){return G&&G.__esModule?G:{default:G}};Object.defineProperty(K,"__esModule",{value:!0}),K.escapeUTF8=K.escape=K.encodeNonAsciiHTML=K.encodeHTML=K.encodeXML=void 0;var y=p(e(u(8161)).default),x=z(y);K.encodeXML=ue(y);var c=p(e(u(6086)).default),d=z(c);function p(G){return Object.keys(G).sort().reduce(function(X,ee){return X[G[ee]]="&"+ee+";",X},{})}function z(G){for(var X=[],ee=[],ve=0,Oe=Object.keys(G);ve<Oe.length;ve++){var Le=Oe[ve];1===Le.length?X.push("\\"+Le):ee.push(Le)}X.sort();for(var be=0;be<X.length-1;be++){for(var m=be;m<X.length-1&&X[m].charCodeAt(1)+1===X[m+1].charCodeAt(1);)m+=1;var P=1+m-be;P<3||X.splice(be,P,X[be]+"-"+X[m])}return ee.unshift("["+X.join("")+"]"),new RegExp(ee.join("|"),"g")}K.encodeHTML=function U(G,X){return function(ee){return ee.replace(X,function(ve){return G[ve]}).replace(S,N)}}(c,d),K.encodeNonAsciiHTML=ue(c);var S=/(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,V=null!=String.prototype.codePointAt?function(G){return G.codePointAt(0)}:function(G){return 1024*(G.charCodeAt(0)-55296)+G.charCodeAt(1)-56320+65536};function N(G){return"&#x"+(G.length>1?V(G):G.charCodeAt(0)).toString(16).toUpperCase()+";"}var H=new RegExp(x.source+"|"+S.source,"g");function ue(G){return function(X){return X.replace(H,function(ee){return G[ee]||N(ee)})}}K.escape=function Q(G){return G.replace(H,N)},K.escapeUTF8=function Z(G){return G.replace(x,N)}},1945:(it,K,u)=>{K.p1=void 0;u(9653),u(5771),u(5771);var p=u(9653);Object.defineProperty(K,"p1",{enumerable:!0,get:function(){return p.decodeHTML}})},5730:(it,K,u)=>{const e=u(9628).buildOptions,n={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(H){return H},attrValueProcessor:function(H){return H}},y=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor"];function x(H){this.options=e(H,n,y),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=N),this.isCDATA=this.options.cdataTagName?U:function(){return!1},this.replaceCDATAstr=$,this.replaceCDATAarr=c,this.options.format?(this.indentate=V,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=S,this.buildObjNode=p):(this.buildTextNode=z,this.buildObjNode=d),this.buildTextValNode=z,this.buildObjectNode=d}function $(H,Q){return H=this.options.tagValueProcessor(""+H),""===this.options.cdataPositionChar||""===H?H+"<![CDATA["+Q+"]]"+this.tagEndChar:H.replace(this.options.cdataPositionChar,"<![CDATA["+Q+"]]"+this.tagEndChar)}function c(H,Q){if(H=this.options.tagValueProcessor(""+H),""===this.options.cdataPositionChar||""===H)return H+"<![CDATA["+Q.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(let Z in Q)H=H.replace(this.options.cdataPositionChar,"<![CDATA["+Q[Z]+"]]>");return H+this.newLine}function d(H,Q,Z,ue){return Z&&!H.includes("<")?this.indentate(ue)+"<"+Q+Z+">"+H+"</"+Q+this.tagEndChar:this.indentate(ue)+"<"+Q+Z+this.tagEndChar+H+this.indentate(ue)+"</"+Q+this.tagEndChar}function p(H,Q,Z,ue){return""!==H?this.buildObjectNode(H,Q,Z,ue):this.indentate(ue)+"<"+Q+Z+"/"+this.tagEndChar}function z(H,Q,Z,ue){return this.indentate(ue)+"<"+Q+Z+">"+this.options.tagValueProcessor(H)+"</"+Q+this.tagEndChar}function S(H,Q,Z,ue){return""!==H?this.buildTextValNode(H,Q,Z,ue):this.indentate(ue)+"<"+Q+Z+"/"+this.tagEndChar}function V(H){return this.options.indentBy.repeat(H)}function N(H){return!!H.startsWith(this.options.attributeNamePrefix)&&H.substr(this.attrPrefixLen)}function U(H){return H===this.options.cdataTagName}x.prototype.parse=function(H){return this.j2x(H,0).val},x.prototype.j2x=function(H,Q){let Z="",ue="";const G=Object.keys(H),X=G.length;for(let ee=0;ee<X;ee++){const ve=G[ee];if(void 0!==H[ve])if(null===H[ve])ue+=this.indentate(Q)+"<"+ve+"/"+this.tagEndChar;else if(H[ve]instanceof Date)ue+=this.buildTextNode(H[ve],ve,"",Q);else if("object"!=typeof H[ve]){const Oe=this.isAttribute(ve);Oe?Z+=" "+Oe+'="'+this.options.attrValueProcessor(""+H[ve])+'"':this.isCDATA(ve)?ue+=this.replaceCDATAstr(H[this.options.textNodeName]?H[this.options.textNodeName]:"",H[ve]):ve===this.options.textNodeName?H[this.options.cdataTagName]||(ue+=this.options.tagValueProcessor(""+H[ve])):ue+=this.buildTextNode(H[ve],ve,"",Q)}else if(Array.isArray(H[ve]))if(this.isCDATA(ve))ue+=this.indentate(Q),ue+=this.replaceCDATAarr(H[this.options.textNodeName]?H[this.options.textNodeName]:"",H[ve]);else{const Oe=H[ve].length;for(let Le=0;Le<Oe;Le++){const be=H[ve][Le];if(void 0!==be)if(null===be)ue+=this.indentate(Q)+"<"+ve+"/"+this.tagEndChar;else if("object"==typeof be){const m=this.j2x(be,Q+1);ue+=this.buildObjNode(m.val,ve,m.attrStr,Q)}else ue+=this.buildTextNode(be,ve,"",Q)}}else if(this.options.attrNodeName&&ve===this.options.attrNodeName){const Oe=Object.keys(H[ve]),Le=Oe.length;for(let be=0;be<Le;be++)Z+=" "+Oe[be]+'="'+this.options.attrValueProcessor(""+H[ve][Oe[be]])+'"'}else{const Oe=this.j2x(H[ve],Q+1);ue+=this.buildObjNode(Oe.val,ve,Oe.attrStr,Q)}}return{attrStr:Z,val:ue}},it.exports=x},6380:(it,K,u)=>{const e=function(N){return String.fromCharCode(N)},n={nilChar:e(176),missingChar:e(201),nilPremitive:e(175),missingPremitive:e(200),emptyChar:e(178),emptyValue:e(177),boundryChar:e(179),objStart:e(198),arrStart:e(204),arrayEnd:e(185)},y=[n.nilChar,n.nilPremitive,n.missingChar,n.missingPremitive,n.boundryChar,n.emptyChar,n.emptyValue,n.arrayEnd,n.objStart,n.arrStart],x=function(N,U,H){if("string"==typeof U)return $(N&&N[0]&&void 0!==N[0].val?N[0].val:N,U);{const Q=function p(N){return void 0===N?n.missingChar:null===N?n.nilChar:!(N.child&&0===Object.keys(N.child).length&&(!N.attrsMap||0===Object.keys(N.attrsMap).length))||n.emptyChar}(N);if(!0===Q){let Z="";if(Array.isArray(U)){Z+=n.arrStart;const ue=U[0],G=N.length;if("string"==typeof ue)for(let X=0;X<G;X++){const ee=$(N[X].val,ue);Z=c(Z,ee)}else for(let X=0;X<G;X++){const ee=x(N[X],ue,H);Z=c(Z,ee)}Z+=n.arrayEnd}else{Z+=n.objStart;const ue=Object.keys(U);Array.isArray(N)&&(N=N[0]);for(let G in ue){const X=ue[G];let ee;ee=x(!H.ignoreAttributes&&N.attrsMap&&N.attrsMap[X]?N.attrsMap[X]:X===H.textNodeName?N.val:N.child[X],U[X],H),Z=c(Z,ee)}}return Z}return Q}},$=function(N){switch(N){case void 0:return n.missingPremitive;case null:return n.nilPremitive;case"":return n.emptyValue;default:return N}},c=function(N,U){return!d(U[0])&&!d(N[N.length-1])&&(N+=n.boundryChar),N+U},d=function(N){return-1!==y.indexOf(N)},z=u(8712),S=u(9628).buildOptions;K.convert2nimn=function(N,U,H){return H=S(H,z.defaultOptions,z.props),x(N,U,H)}},4376:(it,K,u)=>{const e=u(9628),n=function(y,x,$){const c={};if((!y.child||e.isEmptyObject(y.child))&&(!y.attrsMap||e.isEmptyObject(y.attrsMap)))return e.isExist(y.val)?y.val:"";if(e.isExist(y.val)&&("string"!=typeof y.val||""!==y.val&&y.val!==x.cdataPositionChar)){const p=e.isTagNameInArrayMode(y.tagname,x.arrayMode,$);c[x.textNodeName]=p?[y.val]:y.val}e.merge(c,y.attrsMap,x.arrayMode);const d=Object.keys(y.child);for(let p=0;p<d.length;p++){const z=d[p];if(y.child[z]&&y.child[z].length>1){c[z]=[];for(let S in y.child[z])y.child[z].hasOwnProperty(S)&&c[z].push(n(y.child[z][S],x,z))}else{const S=n(y.child[z][0],x,z),V=!0===x.arrayMode&&"object"==typeof S||e.isTagNameInArrayMode(z,x.arrayMode,$);c[z]=V?[S]:S}}return c};K.convertToJson=n},3724:(it,K,u)=>{const e=u(9628),n=u(9628).buildOptions,y=u(8712),$=function(p,z,S){let V="{";const N=Object.keys(p.child);for(let Q=0;Q<N.length;Q++){var U=N[Q];if(p.child[U]&&p.child[U].length>1){for(var H in V+='"'+U+'" : [ ',p.child[U])V+=$(p.child[U][H],z)+" , ";V=V.substr(0,V.length-1)+" ] "}else V+='"'+U+'" : '+$(p.child[U][0],z)+" ,"}return e.merge(V,p.attrsMap),e.isEmptyObject(V)?e.isExist(p.val)?p.val:"":(e.isExist(p.val)&&("string"==typeof p.val&&(""===p.val||p.val===z.cdataPositionChar)||(V+='"'+z.textNodeName+'" : '+function c(p){return!0!==p&&!1!==p&&isNaN(p)?'"'+p+'"':p}(p.val))),","===V[V.length-1]&&(V=V.substr(0,V.length-2)),V+"}")};K.convertToJsonString=function(p,z){return(z=n(z,y.defaultOptions,y.props)).indentBy=z.indentBy||"",$(p,z,0)}},9083:(it,K,u)=>{const e=u(4376),n=u(8712),y=u(8712),x=u(9628).buildOptions,$=u(4572);K.parse=function(d,p,z){if(z){!0===z&&(z={});const V=$.validate(d,z);if(!0!==V)throw Error(V.err.msg)}p=x(p,y.defaultOptions,y.props);const S=n.getTraversalObj(d,p);return e.convertToJson(S,p)},K.convertTonimn=u(6380).convert2nimn,K.getTraversalObj=n.getTraversalObj,K.convertToJson=e.convertToJson,K.convertToJsonString=u(3724).convertToJsonString,K.validate=$.validate,K.j2xParser=u(5730),K.parseToNimn=function(d,p,z){return K.convertTonimn(K.getTraversalObj(d,z),p,z)}},9628:(it,K)=>{const n="[:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",y=new RegExp("^"+n+"$");K.isExist=function(c){return void 0!==c},K.isEmptyObject=function(c){return 0===Object.keys(c).length},K.merge=function(c,d,p){if(d){const z=Object.keys(d),S=z.length;for(let V=0;V<S;V++)c[z[V]]="strict"===p?[d[z[V]]]:d[z[V]]}},K.getValue=function(c){return K.isExist(c)?c:""},K.buildOptions=function(c,d,p){var z={};if(!c)return d;for(let S=0;S<p.length;S++)z[p[S]]=void 0!==c[p[S]]?c[p[S]]:d[p[S]];return z},K.isTagNameInArrayMode=function(c,d,p){return!1!==d&&(d instanceof RegExp?d.test(c):"function"==typeof d?!!d(c,p):"strict"===d)},K.isName=function(c){return!(null==y.exec(c))},K.getAllMatches=function(c,d){const p=[];let z=d.exec(c);for(;z;){const S=[],V=z.length;for(let N=0;N<V;N++)S.push(z[N]);p.push(S),z=d.exec(c)}return p},K.nameRegexp=n},4572:(it,K,u)=>{const e=u(9628),n={allowBooleanAttributes:!1},y=["allowBooleanAttributes"];function x(G,X){for(var ee=X;X<G.length;X++)if("?"==G[X]||" "==G[X]){var ve=G.substr(ee,X-ee);if(X>5&&"xml"===ve)return U("InvalidXml","XML declaration allowed only at the start of the document.",Z(G,X));if("?"==G[X]&&">"==G[X+1]){X++;break}continue}return X}function $(G,X){if(G.length>X+5&&"-"===G[X+1]&&"-"===G[X+2]){for(X+=3;X<G.length;X++)if("-"===G[X]&&"-"===G[X+1]&&">"===G[X+2]){X+=2;break}}else if(G.length>X+8&&"D"===G[X+1]&&"O"===G[X+2]&&"C"===G[X+3]&&"T"===G[X+4]&&"Y"===G[X+5]&&"P"===G[X+6]&&"E"===G[X+7]){let ee=1;for(X+=8;X<G.length;X++)if("<"===G[X])ee++;else if(">"===G[X]&&(ee--,0===ee))break}else if(G.length>X+9&&"["===G[X+1]&&"C"===G[X+2]&&"D"===G[X+3]&&"A"===G[X+4]&&"T"===G[X+5]&&"A"===G[X+6]&&"["===G[X+7])for(X+=8;X<G.length;X++)if("]"===G[X]&&"]"===G[X+1]&&">"===G[X+2]){X+=2;break}return X}function p(G,X){let ee="",ve="",Oe=!1;for(;X<G.length;X++){if('"'===G[X]||"'"===G[X])if(""===ve)ve=G[X];else{if(ve!==G[X])continue;ve=""}else if(">"===G[X]&&""===ve){Oe=!0;break}ee+=G[X]}return""===ve&&{value:ee,index:X,tagClosed:Oe}}K.validate=function(G,X){X=e.buildOptions(X,n,y);const ee=[];let ve=!1,Oe=!1;"\ufeff"===G[0]&&(G=G.substr(1));for(let Le=0;Le<G.length;Le++)if("<"===G[Le]&&"?"===G[Le+1]){if(Le+=2,Le=x(G,Le),Le.err)return Le}else{if("<"!==G[Le]){if(" "===G[Le]||"\t"===G[Le]||"\n"===G[Le]||"\r"===G[Le])continue;return U("InvalidChar","char '"+G[Le]+"' is not expected.",Z(G,Le))}if(Le++,"!"===G[Le]){Le=$(G,Le);continue}{let be=!1;"/"===G[Le]&&(be=!0,Le++);let m="";for(;Le<G.length&&">"!==G[Le]&&" "!==G[Le]&&"\t"!==G[Le]&&"\n"!==G[Le]&&"\r"!==G[Le];Le++)m+=G[Le];if(m=m.trim(),"/"===m[m.length-1]&&(m=m.substring(0,m.length-1),Le--),!Q(m)){let _;return _=0===m.trim().length?"There is an unnecessary space between tag name and backward slash '</ ..'.":"Tag '"+m+"' is an invalid name.",U("InvalidTag",_,Z(G,Le))}const P=p(G,Le);if(!1===P)return U("InvalidAttr","Attributes for '"+m+"' have open quote.",Z(G,Le));let b=P.value;if(Le=P.index,"/"===b[b.length-1]){b=b.substring(0,b.length-1);const _=S(b,X);if(!0!==_)return U(_.err.code,_.err.msg,Z(G,Le-b.length+_.err.line));ve=!0}else if(be){if(!P.tagClosed)return U("InvalidTag","Closing tag '"+m+"' doesn't have proper closing.",Z(G,Le));if(b.trim().length>0)return U("InvalidTag","Closing tag '"+m+"' can't have attributes or invalid starting.",Z(G,Le));{const _=ee.pop();if(m!==_)return U("InvalidTag","Closing tag '"+_+"' is expected inplace of '"+m+"'.",Z(G,Le));0==ee.length&&(Oe=!0)}}else{const _=S(b,X);if(!0!==_)return U(_.err.code,_.err.msg,Z(G,Le-b.length+_.err.line));if(!0===Oe)return U("InvalidXml","Multiple possible root nodes found.",Z(G,Le));ee.push(m),ve=!0}for(Le++;Le<G.length;Le++)if("<"===G[Le]){if("!"===G[Le+1]){Le++,Le=$(G,Le);continue}if("?"!==G[Le+1])break;if(Le=x(G,++Le),Le.err)return Le}else if("&"===G[Le]){const _=N(G,Le);if(-1==_)return U("InvalidChar","char '&' is not expected.",Z(G,Le));Le=_}"<"===G[Le]&&Le--}}return ve?!(ee.length>0)||U("InvalidXml","Invalid '"+JSON.stringify(ee,null,4).replace(/\r?\n/g,"")+"' found.",1):U("InvalidXml","Start tag expected.",1)};const z=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function S(G,X){const ee=e.getAllMatches(G,z),ve={};for(let Oe=0;Oe<ee.length;Oe++){if(0===ee[Oe][1].length)return U("InvalidAttr","Attribute '"+ee[Oe][2]+"' has no space in starting.",ue(G,ee[Oe][0]));if(void 0===ee[Oe][3]&&!X.allowBooleanAttributes)return U("InvalidAttr","boolean attribute '"+ee[Oe][2]+"' is not allowed.",ue(G,ee[Oe][0]));const Le=ee[Oe][2];if(!H(Le))return U("InvalidAttr","Attribute '"+Le+"' is an invalid name.",ue(G,ee[Oe][0]));if(ve.hasOwnProperty(Le))return U("InvalidAttr","Attribute '"+Le+"' is repeated.",ue(G,ee[Oe][0]));ve[Le]=1}return!0}function N(G,X){if(";"===G[++X])return-1;if("#"===G[X])return function V(G,X){let ee=/\d/;for("x"===G[X]&&(X++,ee=/[\da-fA-F]/);X<G.length;X++){if(";"===G[X])return X;if(!G[X].match(ee))break}return-1}(G,++X);let ee=0;for(;X<G.length;X++,ee++)if(!(G[X].match(/\w/)&&ee<20)){if(";"===G[X])break;return-1}return X}function U(G,X,ee){return{err:{code:G,msg:X,line:ee}}}function H(G){return e.isName(G)}function Q(G){return e.isName(G)}function Z(G,X){return G.substring(0,X).split(/\r?\n/).length}function ue(G,X){return G.indexOf(X)+X.length}},2661:it=>{it.exports=function(K,u,e){this.tagname=K,this.parent=u,this.child={},this.attrsMap={},this.val=e,this.addChild=function(n){Array.isArray(this.child[n.tagname])?this.child[n.tagname].push(n):this.child[n.tagname]=[n]}}},8712:(it,K,u)=>{const e=u(9628),n=u(9628).buildOptions,y=u(2661);"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,e.nameRegexp),!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const $={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",tagValueProcessor:function(Q,Z){return Q},attrValueProcessor:function(Q,Z){return Q},stopNodes:[]};K.defaultOptions=$;const c=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","stopNodes"];function d(Q,Z,ue){return Z&&(ue.trimValues&&(Z=Z.trim()),Z=z(Z=ue.tagValueProcessor(Z,Q),ue.parseNodeValue,ue.parseTrueNumberOnly)),Z}function p(Q,Z){if(Z.ignoreNameSpace){const ue=Q.split(":"),G="/"===Q.charAt(0)?"/":"";if("xmlns"===ue[0])return"";2===ue.length&&(Q=G+ue[1])}return Q}function z(Q,Z,ue){if(Z&&"string"==typeof Q){let G;return""===Q.trim()||isNaN(Q)?G="true"===Q||"false"!==Q&&Q:(-1!==Q.indexOf("0x")?G=Number.parseInt(Q,16):-1!==Q.indexOf(".")?(G=Number.parseFloat(Q),Q=Q.replace(/\.?0+$/,"")):G=Number.parseInt(Q,10),ue&&(G=String(G)===Q?G:Q)),G}return e.isExist(Q)?Q:""}K.props=c;const S=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function V(Q,Z){if(!Z.ignoreAttributes&&"string"==typeof Q){Q=Q.replace(/\r?\n/g," ");const ue=e.getAllMatches(Q,S),G=ue.length,X={};for(let ee=0;ee<G;ee++){const ve=p(ue[ee][1],Z);ve.length&&(void 0!==ue[ee][4]?(Z.trimValues&&(ue[ee][4]=ue[ee][4].trim()),ue[ee][4]=Z.attrValueProcessor(ue[ee][4],ve),X[Z.attributeNamePrefix+ve]=z(ue[ee][4],Z.parseAttributeValue,Z.parseTrueNumberOnly)):Z.allowBooleanAttributes&&(X[Z.attributeNamePrefix+ve]=!0))}if(!Object.keys(X).length)return;if(Z.attrNodeName){const ee={};return ee[Z.attrNodeName]=X,ee}return X}}function U(Q,Z){let ue,G="";for(let X=Z;X<Q.length;X++){let ee=Q[X];if(ue)ee===ue&&(ue="");else if('"'===ee||"'"===ee)ue=ee;else{if(">"===ee)return{data:G,index:X};"\t"===ee&&(ee=" ")}G+=ee}}function H(Q,Z,ue,G){const X=Q.indexOf(Z,ue);if(-1===X)throw new Error(G);return X+Z.length-1}K.getTraversalObj=function(Q,Z){Q=Q.replace(/\r\n?/g,"\n"),Z=n(Z,$,c);const ue=new y("!xml");let G=ue,X="";for(let ee=0;ee<Q.length;ee++)if("<"===Q[ee])if("/"===Q[ee+1]){const Oe=H(Q,">",ee,"Closing Tag is not closed.");let Le=Q.substring(ee+2,Oe).trim();if(Z.ignoreNameSpace){const be=Le.indexOf(":");-1!==be&&(Le=Le.substr(be+1))}G&&(G.val=G.val?e.getValue(G.val)+""+d(Le,X,Z):d(Le,X,Z)),Z.stopNodes.length&&Z.stopNodes.includes(G.tagname)&&(G.child=[],null==G.attrsMap&&(G.attrsMap={}),G.val=Q.substr(G.startIndex+1,ee-G.startIndex-1)),G=G.parent,X="",ee=Oe}else if("?"===Q[ee+1])ee=H(Q,"?>",ee,"Pi Tag is not closed.");else if("!--"===Q.substr(ee+1,3))ee=H(Q,"--\x3e",ee,"Comment is not closed.");else if("!D"===Q.substr(ee+1,2)){const Oe=H(Q,">",ee,"DOCTYPE is not closed.");ee=Q.substring(ee,Oe).indexOf("[")>=0?Q.indexOf("]>",ee)+1:Oe}else if("!["===Q.substr(ee+1,2)){const Oe=H(Q,"]]>",ee,"CDATA is not closed.")-2,Le=Q.substring(ee+9,Oe);if(X&&(G.val=e.getValue(G.val)+""+d(G.tagname,X,Z),X=""),Z.cdataTagName){const be=new y(Z.cdataTagName,G,Le);G.addChild(be),G.val=e.getValue(G.val)+Z.cdataPositionChar,Le&&(be.val=Le)}else G.val=(G.val||"")+(Le||"");ee=Oe+2}else{const Oe=U(Q,ee+1);let Le=Oe.data;const be=Oe.index,m=Le.indexOf(" ");let P=Le,b=!0;if(-1!==m&&(P=Le.substr(0,m).replace(/\s\s*$/,""),Le=Le.substr(m+1)),Z.ignoreNameSpace){const _=P.indexOf(":");-1!==_&&(P=P.substr(_+1),b=P!==Oe.data.substr(_+1))}if(G&&X&&"!xml"!==G.tagname&&(G.val=e.getValue(G.val)+""+d(G.tagname,X,Z)),Le.length>0&&Le.lastIndexOf("/")===Le.length-1){"/"===P[P.length-1]?(P=P.substr(0,P.length-1),Le=P):Le=Le.substr(0,Le.length-1);const _=new y(P,G,"");P!==Le&&(_.attrsMap=V(Le,Z)),G.addChild(_)}else{const _=new y(P,G);Z.stopNodes.length&&Z.stopNodes.includes(_.tagname)&&(_.startIndex=be),P!==Le&&b&&(_.attrsMap=V(Le,Z)),G.addChild(_),G=_}X="",ee=be}else X+=Q[ee];return ue}},6683:(it,K,u)=>{u.d(K,{JY:()=>x,Fh:()=>p,iF:()=>P,g4:()=>H,Xb:()=>ve}),u(9709);var x=!1,p=!1,S=u(4929),U=function(b){var _=b.endpoint;if("string"==typeof _){var E=Promise.resolve((0,b.urlParser)(_));return function(){return E}}if("object"==typeof _){var ne=Promise.resolve(_);return function(){return ne}}return _},H=function(b){var _,R=function(b){if("boolean"==typeof b){var _=Promise.resolve(b);return function(){return _}}return b}(b.useDualstackEndpoint),E=b.endpoint,ne=b.useFipsEndpoint;return(0,S.pi)((0,S.pi)({},b),{tls:null===(_=b.tls)||void 0===_||_,endpoint:E?U((0,S.pi)((0,S.pi)({},b),{endpoint:E})):function(){return function(b){return(0,S.mG)(void 0,void 0,void 0,function(){var _,R,E,me,Ee,se,ze;return(0,S.Jh)(this,function(Ge){switch(Ge.label){case 0:return R=void 0===(_=b.tls)||_,[4,b.region()];case 1:if(E=Ge.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(E))throw new Error("Invalid region in client config");return[4,b.useDualstackEndpoint()];case 2:return me=Ge.sent(),[4,b.useFipsEndpoint()];case 3:return Ee=Ge.sent(),[4,b.regionInfoProvider(E,{useDualstackEndpoint:me,useFipsEndpoint:Ee})];case 4:if(!(se=(null!==(ze=Ge.sent())&&void 0!==ze?ze:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,b.urlParser((R?"https:":"http:")+"//"+se)]}})})}((0,S.pi)((0,S.pi)({},b),{useDualstackEndpoint:R,useFipsEndpoint:ne}))},isCustomEndpoint:!!E,useDualstackEndpoint:R})},X=function(b){return"string"==typeof b&&(b.startsWith("fips-")||b.endsWith("-fips"))},ee=function(b){return X(b)?["fips-aws-global","aws-fips"].includes(b)?"us-east-1":b.replace(/fips-(dkr-|prod-)?|-fips/,""):b},ve=function(b){var _=b.region,R=b.useFipsEndpoint;if(!_)throw new Error("Region is missing");return(0,S.pi)((0,S.pi)({},b),{region:function(){return(0,S.mG)(void 0,void 0,void 0,function(){var E;return(0,S.Jh)(this,function(ne){switch(ne.label){case 0:return"string"==typeof _?[2,ee(_)]:[4,_()];case 1:return E=ne.sent(),[2,ee(E)]}})})},useFipsEndpoint:function(){return(0,S.mG)(void 0,void 0,void 0,function(){var ne;return(0,S.Jh)(this,function(me){switch(me.label){case 0:return"string"!=typeof _?[3,1]:(ne=_,[3,3]);case 1:return[4,_()];case 2:ne=me.sent(),me.label=3;case 3:return X(ne)?[2,!0]:[2,"boolean"==typeof R?Promise.resolve(R):R()]}})})}})},Oe=function(b,_){var R;void 0===b&&(b=[]);var E=_.useFipsEndpoint,ne=_.useDualstackEndpoint;return null===(R=b.find(function(me){var Ee=me.tags;return E===Ee.includes("fips")&&ne===Ee.includes("dualstack")}))||void 0===R?void 0:R.hostname},P=function(b,_){var R,E,ne,me,Ee,se,ze=_.useFipsEndpoint,Ge=void 0!==ze&&ze,xe=_.useDualstackEndpoint,qe=void 0!==xe&&xe,Xe=_.signingService,lt=_.regionHash,He=_.partitionHash,Ye=function(b,_){var R,E=_.partitionHash;return null!==(R=Object.keys(E||{}).find(function(ne){return E[ne].regions.includes(b)}))&&void 0!==R?R:"aws"}(b,{partitionHash:He}),ht=b in lt?b:null!==(E=null===(R=He[Ye])||void 0===R?void 0:R.endpoint)&&void 0!==E?E:b,Se={useFipsEndpoint:Ge,useDualstackEndpoint:qe},Fe=function(b,_){var E=_.partitionHostname;return _.regionHostname||(E?E.replace("{region}",b):void 0)}(ht,{regionHostname:Oe(null===(ne=lt[ht])||void 0===ne?void 0:ne.variants,Se),partitionHostname:Oe(null===(me=He[Ye])||void 0===me?void 0:me.variants,Se)});if(void 0===Fe)throw new Error("Endpoint resolution failed for: "+{resolvedRegion:ht,useFipsEndpoint:Ge,useDualstackEndpoint:qe});var Je=function(b,_){var R=_.signingRegion;if(R)return R;if(_.useFipsEndpoint){var me=_.regionRegex.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),Ee=b.match(me);if(Ee)return Ee[0].slice(1,-1)}}(Fe,{signingRegion:null===(Ee=lt[ht])||void 0===Ee?void 0:Ee.signingRegion,regionRegex:He[Ye].regionRegex,useFipsEndpoint:Ge});return(0,S.pi)((0,S.pi)({partition:Ye,signingService:Xe,hostname:Fe},Je&&{signingRegion:Je}),(null===(se=lt[ht])||void 0===se?void 0:se.signingService)&&{signingService:lt[ht].signingService})}},7878:(it,K,u)=>{u.d(K,{s:()=>Uo});var ae,e=u(4929),n=u(9266),y=u(4198),x=function(ae){function Ae(Ne){var ot=ae.call(this,Ne)||this;return Object.setPrototypeOf(ot,Ae.prototype),ot}return(0,e.ZT)(Ae,ae),Ae}(y.sI),z=function(ae){function Ae(Ne){var ot=ae.call(this,(0,e.pi)({name:"InternalErrorException",$fault:"server"},Ne))||this;return ot.name="InternalErrorException",ot.$fault="server",Object.setPrototypeOf(ot,Ae.prototype),ot}return(0,e.ZT)(Ae,ae),Ae}(x),S=function(ae){function Ae(Ne){var ot=ae.call(this,(0,e.pi)({name:"InvalidParameterException",$fault:"client"},Ne))||this;return ot.name="InvalidParameterException",ot.$fault="client",Object.setPrototypeOf(ot,Ae.prototype),ot}return(0,e.ZT)(Ae,ae),Ae}(x),V=function(ae){function Ae(Ne){var ot=ae.call(this,(0,e.pi)({name:"LimitExceededException",$fault:"client"},Ne))||this;return ot.name="LimitExceededException",ot.$fault="client",Object.setPrototypeOf(ot,Ae.prototype),ot}return(0,e.ZT)(Ae,ae),Ae}(x),N=function(ae){function Ae(Ne){var ot=ae.call(this,(0,e.pi)({name:"NotAuthorizedException",$fault:"client"},Ne))||this;return ot.name="NotAuthorizedException",ot.$fault="client",Object.setPrototypeOf(ot,Ae.prototype),ot}return(0,e.ZT)(Ae,ae),Ae}(x),U=function(ae){function Ae(Ne){var ot=ae.call(this,(0,e.pi)({name:"ResourceConflictException",$fault:"client"},Ne))||this;return ot.name="ResourceConflictException",ot.$fault="client",Object.setPrototypeOf(ot,Ae.prototype),ot}return(0,e.ZT)(Ae,ae),Ae}(x),H=function(ae){function Ae(Ne){var ot=ae.call(this,(0,e.pi)({name:"TooManyRequestsException",$fault:"client"},Ne))||this;return ot.name="TooManyRequestsException",ot.$fault="client",Object.setPrototypeOf(ot,Ae.prototype),ot}return(0,e.ZT)(Ae,ae),Ae}(x),ee=function(ae){function Ae(Ne){var ot=ae.call(this,(0,e.pi)({name:"ResourceNotFoundException",$fault:"client"},Ne))||this;return ot.name="ResourceNotFoundException",ot.$fault="client",Object.setPrototypeOf(ot,Ae.prototype),ot}return(0,e.ZT)(Ae,ae),Ae}(x),be=function(ae){function Ae(Ne){var ot=ae.call(this,(0,e.pi)({name:"ExternalServiceException",$fault:"client"},Ne))||this;return ot.name="ExternalServiceException",ot.$fault="client",Object.setPrototypeOf(ot,Ae.prototype),ot}return(0,e.ZT)(Ae,ae),Ae}(x),m=(()=>((m||(m={})).filterSensitiveLog=function(Ae){return(0,e.pi)({},Ae)},m))(),b=(()=>((b||(b={})).filterSensitiveLog=function(Ae){return(0,e.pi)({},Ae)},b))(),_=function(ae){function Ae(Ne){var ot=ae.call(this,(0,e.pi)({name:"InvalidIdentityPoolConfigurationException",$fault:"client"},Ne))||this;return ot.name="InvalidIdentityPoolConfigurationException",ot.$fault="client",Object.setPrototypeOf(ot,Ae.prototype),ot}return(0,e.ZT)(Ae,ae),Ae}(x),R=(()=>((R||(R={})).filterSensitiveLog=function(Ae){return(0,e.pi)({},Ae)},R))(),E=(()=>((E||(E={})).filterSensitiveLog=function(Ae){return(0,e.pi)({},Ae)},E))(),zt=((0,e.ZT)(function Ae(Ne){var ot=ae.call(this,(0,e.pi)({name:"DeveloperUserAlreadyRegisteredException",$fault:"client"},Ne))||this;return ot.name="DeveloperUserAlreadyRegisteredException",ot.$fault="client",Object.setPrototypeOf(ot,Ae.prototype),ot},ae=x),function(ae){(0,e.ZT)(function Ae(Ne){var ot=ae.call(this,(0,e.pi)({name:"ConcurrentModificationException",$fault:"client"},Ne))||this;return ot.name="ConcurrentModificationException",ot.$fault="client",Object.setPrototypeOf(ot,Ae.prototype),ot},ae)}(x),u(6510)),Zn=function(ae,Ae){return(0,e.mG)(void 0,void 0,void 0,function(){var Ne,ot,Gt,Kt,hn,Fn;return(0,e.Jh)(this,function(Zt){switch(Zt.label){case 0:return ot=[(0,e.pi)({},ae)],Fn={},[4,_r(ae.body,Ae)];case 1:switch(Ne=e.pi.apply(void 0,ot.concat([(Fn.body=Zt.sent(),Fn)])),Kt="UnknownError",Kt=ti(ae,Ne.body)){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":return[3,6];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,8];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,10];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,12];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,16]}return[3,18];case 2:return[4,vn(Ne,Ae)];case 3:case 5:case 7:case 9:case 11:case 13:case 15:case 17:throw Zt.sent();case 4:return[4,Ht(Ne,Ae)];case 6:return[4,Jn(Ne,Ae)];case 8:return[4,er(Ne,Ae)];case 10:return[4,Ln(Ne,Ae)];case 12:return[4,Nn(Ne,Ae)];case 14:return[4,Mn(Ne,Ae)];case 16:return[4,kn(Ne,Ae)];case 18:throw Gt=new x({name:(hn=Ne.body).code||hn.Code||Kt,$fault:"client",$metadata:lr(ae)}),(0,y.to)(Gt,hn)}})})},kr=function(ae,Ae){return(0,e.mG)(void 0,void 0,void 0,function(){var Ne,ot,Gt,Kt,hn,Fn;return(0,e.Jh)(this,function(Zt){switch(Zt.label){case 0:return ot=[(0,e.pi)({},ae)],Fn={},[4,_r(ae.body,Ae)];case 1:switch(Ne=e.pi.apply(void 0,ot.concat([(Fn.body=Zt.sent(),Fn)])),Kt="UnknownError",Kt=ti(ae,Ne.body)){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,6];case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":return[3,8];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,10];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,12];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,16]}return[3,18];case 2:return[4,vn(Ne,Ae)];case 3:case 5:case 7:case 9:case 11:case 13:case 15:case 17:throw Zt.sent();case 4:return[4,Ht(Ne,Ae)];case 6:return[4,er(Ne,Ae)];case 8:return[4,rr(Ne,Ae)];case 10:return[4,Ln(Ne,Ae)];case 12:return[4,Nn(Ne,Ae)];case 14:return[4,Mn(Ne,Ae)];case 16:return[4,kn(Ne,Ae)];case 18:throw Gt=new x({name:(hn=Ne.body).code||hn.Code||Kt,$fault:"client",$metadata:lr(ae)}),(0,y.to)(Gt,hn)}})})},vn=function(ae,Ae){return(0,e.mG)(void 0,void 0,void 0,function(){var Ne,ot,Gt;return(0,e.Jh)(this,function(Kt){return ot=il(Ne=ae.body,Ae),Gt=new be((0,e.pi)({$metadata:lr(ae)},ot)),[2,(0,y.to)(Gt,Ne)]})})},Ht=function(ae,Ae){return(0,e.mG)(void 0,void 0,void 0,function(){var Ne,ot,Gt;return(0,e.Jh)(this,function(Kt){return ot=Zo(Ne=ae.body,Ae),Gt=new z((0,e.pi)({$metadata:lr(ae)},ot)),[2,(0,y.to)(Gt,Ne)]})})},Jn=function(ae,Ae){return(0,e.mG)(void 0,void 0,void 0,function(){var Ne,ot,Gt;return(0,e.Jh)(this,function(Kt){return ot=zi(Ne=ae.body,Ae),Gt=new _((0,e.pi)({$metadata:lr(ae)},ot)),[2,(0,y.to)(Gt,Ne)]})})},er=function(ae,Ae){return(0,e.mG)(void 0,void 0,void 0,function(){var Ne,ot,Gt;return(0,e.Jh)(this,function(Kt){return ot=ol(Ne=ae.body,Ae),Gt=new S((0,e.pi)({$metadata:lr(ae)},ot)),[2,(0,y.to)(Gt,Ne)]})})},rr=function(ae,Ae){return(0,e.mG)(void 0,void 0,void 0,function(){var Ne,ot,Gt;return(0,e.Jh)(this,function(Kt){return ot=Co(Ne=ae.body,Ae),Gt=new V((0,e.pi)({$metadata:lr(ae)},ot)),[2,(0,y.to)(Gt,Ne)]})})},Ln=function(ae,Ae){return(0,e.mG)(void 0,void 0,void 0,function(){var Ne,ot,Gt;return(0,e.Jh)(this,function(Kt){return ot=al(Ne=ae.body,Ae),Gt=new N((0,e.pi)({$metadata:lr(ae)},ot)),[2,(0,y.to)(Gt,Ne)]})})},Nn=function(ae,Ae){return(0,e.mG)(void 0,void 0,void 0,function(){var Ne,ot,Gt;return(0,e.Jh)(this,function(Kt){return ot=ll(Ne=ae.body,Ae),Gt=new U((0,e.pi)({$metadata:lr(ae)},ot)),[2,(0,y.to)(Gt,Ne)]})})},Mn=function(ae,Ae){return(0,e.mG)(void 0,void 0,void 0,function(){var Ne,ot,Gt;return(0,e.Jh)(this,function(Kt){return ot=ul(Ne=ae.body,Ae),Gt=new ee((0,e.pi)({$metadata:lr(ae)},ot)),[2,(0,y.to)(Gt,Ne)]})})},kn=function(ae,Ae){return(0,e.mG)(void 0,void 0,void 0,function(){var Ne,ot,Gt;return(0,e.Jh)(this,function(Kt){return ot=Ia(Ne=ae.body,Ae),Gt=new H((0,e.pi)({$metadata:lr(ae)},ot)),[2,(0,y.to)(Gt,Ne)]})})},ai=function(ae,Ae){return Object.entries(ae).reduce(function(Ne,ot){var Gt,Kt=(0,e.CR)(ot,2),Tn=Kt[0],hn=Kt[1];return null===hn?Ne:(0,e.pi)((0,e.pi)({},Ne),((Gt={})[Tn]=hn,Gt))},{})},Ks=function(ae,Ae){return{AccessKeyId:(0,y.pY)(ae.AccessKeyId),Expiration:null!=ae.Expiration?(0,y.CE)((0,y.KX)((0,y.Fx)(ae.Expiration))):void 0,SecretKey:(0,y.pY)(ae.SecretKey),SessionToken:(0,y.pY)(ae.SessionToken)}},il=function(ae,Ae){return{message:(0,y.pY)(ae.message)}},Zo=function(ae,Ae){return{message:(0,y.pY)(ae.message)}},zi=function(ae,Ae){return{message:(0,y.pY)(ae.message)}},ol=function(ae,Ae){return{message:(0,y.pY)(ae.message)}},Co=function(ae,Ae){return{message:(0,y.pY)(ae.message)}},al=function(ae,Ae){return{message:(0,y.pY)(ae.message)}},ll=function(ae,Ae){return{message:(0,y.pY)(ae.message)}},ul=function(ae,Ae){return{message:(0,y.pY)(ae.message)}},Ia=function(ae,Ae){return{message:(0,y.pY)(ae.message)}},lr=function(ae){var Ae;return{httpStatusCode:ae.statusCode,requestId:null!==(Ae=ae.headers["x-amzn-requestid"])&&void 0!==Ae?Ae:ae.headers["x-amzn-request-id"],extendedRequestId:ae.headers["x-amz-id-2"],cfId:ae.headers["x-amz-cf-id"]}},Jr=function(ae,Ae,Ne,ot,Gt){return(0,e.mG)(void 0,void 0,void 0,function(){var Kt,hn,bi,ri;return(0,e.Jh)(this,function(oo){switch(oo.label){case 0:return[4,ae.endpoint()];case 1:return Kt=oo.sent(),ri={protocol:void 0===(hn=Kt.protocol)?"https":hn,hostname:Kt.hostname,port:Kt.port,method:"POST",path:(bi=Kt.path).endsWith("/")?bi.slice(0,-1)+Ne:bi+Ne,headers:Ae},void 0!==ot&&(ri.hostname=ot),void 0!==Gt&&(ri.body=Gt),[2,new zt.aW(ri)]}})})},_r=function(ae,Ae){return function(ae,Ae){return function(ae,Ae){return void 0===ae&&(ae=new Uint8Array),ae instanceof Uint8Array?Promise.resolve(ae):Ae.streamCollector(ae)||Promise.resolve(new Uint8Array)}(ae,Ae).then(function(Ne){return Ae.utf8Encoder(Ne)})}(ae,Ae).then(function(Ne){return Ne.length?JSON.parse(Ne):{}})},ti=function(ae,Ae){var ot=function(Kt){var Tn=Kt;return Tn.indexOf(":")>=0&&(Tn=Tn.split(":")[0]),Tn.indexOf("#")>=0&&(Tn=Tn.split("#")[1]),Tn},Gt=("x-amzn-errortype",Object.keys(ae.headers).find(function(hn){return hn.toLowerCase()==="x-amzn-errortype".toLowerCase()}));return void 0!==Gt?ot(ae.headers[Gt]):void 0!==Ae.code?ot(Ae.code):void 0!==Ae.__type?ot(Ae.__type):""},Eo=function(ae){function Ae(Ne){var ot=ae.call(this)||this;return ot.input=Ne,ot}return(0,e.ZT)(Ae,ae),Ae.prototype.resolveMiddleware=function(Ne,ot,Gt){this.middlewareStack.use((0,n.p2)(ot,this.serialize,this.deserialize));var Kt=Ne.concat(this.middlewareStack),bi=ot.requestHandler;return Kt.resolve(function(ri){return bi.handle(ri.request,Gt||{})},{logger:ot.logger,clientName:"CognitoIdentityClient",commandName:"GetIdCommand",inputFilterSensitiveLog:R.filterSensitiveLog,outputFilterSensitiveLog:E.filterSensitiveLog})},Ae.prototype.serialize=function(Ne,ot){return function(ae,Ae){return(0,e.mG)(void 0,void 0,void 0,function(){var Ne,ot;return(0,e.Jh)(this,function(Gt){return Ne={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetId"},ot=JSON.stringify(function(ae,Ae){return(0,e.pi)((0,e.pi)((0,e.pi)({},null!=ae.AccountId&&{AccountId:ae.AccountId}),null!=ae.IdentityPoolId&&{IdentityPoolId:ae.IdentityPoolId}),null!=ae.Logins&&{Logins:ai(ae.Logins,Ae)})}(ae,Ae)),[2,Jr(Ae,Ne,"/",void 0,ot)]})})}(Ne,ot)},Ae.prototype.deserialize=function(Ne,ot){return function(ae,Ae){return(0,e.mG)(void 0,void 0,void 0,function(){var Ne,ot,Gt;return(0,e.Jh)(this,function(Kt){switch(Kt.label){case 0:return ae.statusCode>=300?[2,kr(ae,Ae)]:[4,_r(ae.body,Ae)];case 1:return Ne=Kt.sent(),ot=function(ae,Ae){return{IdentityId:(0,y.pY)(ae.IdentityId)}}(Ne),Gt=(0,e.pi)({$metadata:lr(ae)},ot),[2,Promise.resolve(Gt)]}})})}(Ne,ot)},Ae}(y.mY),vo=u(114),Ra=function(ae){function Ae(Ne){var ot=ae.call(this)||this;return ot.input=Ne,ot}return(0,e.ZT)(Ae,ae),Ae.prototype.resolveMiddleware=function(Ne,ot,Gt){this.middlewareStack.use((0,n.p2)(ot,this.serialize,this.deserialize));var Kt=Ne.concat(this.middlewareStack),bi=ot.requestHandler;return Kt.resolve(function(ri){return bi.handle(ri.request,Gt||{})},{logger:ot.logger,clientName:"CognitoIdentityClient",commandName:"GetCredentialsForIdentityCommand",inputFilterSensitiveLog:m.filterSensitiveLog,outputFilterSensitiveLog:b.filterSensitiveLog})},Ae.prototype.serialize=function(Ne,ot){return function(ae,Ae){return(0,e.mG)(void 0,void 0,void 0,function(){var Ne,ot;return(0,e.Jh)(this,function(Gt){return Ne={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetCredentialsForIdentity"},ot=JSON.stringify(function(ae,Ae){return(0,e.pi)((0,e.pi)((0,e.pi)({},null!=ae.CustomRoleArn&&{CustomRoleArn:ae.CustomRoleArn}),null!=ae.IdentityId&&{IdentityId:ae.IdentityId}),null!=ae.Logins&&{Logins:ai(ae.Logins,Ae)})}(ae,Ae)),[2,Jr(Ae,Ne,"/",void 0,ot)]})})}(Ne,ot)},Ae.prototype.deserialize=function(Ne,ot){return function(ae,Ae){return(0,e.mG)(void 0,void 0,void 0,function(){var Ne,ot,Gt;return(0,e.Jh)(this,function(Kt){switch(Kt.label){case 0:return ae.statusCode>=300?[2,Zn(ae,Ae)]:[4,_r(ae.body,Ae)];case 1:return Ne=Kt.sent(),ot=function(ae,Ae){return{Credentials:null!=ae.Credentials?Ks(ae.Credentials):void 0,IdentityId:(0,y.pY)(ae.IdentityId)}}(Ne),Gt=(0,e.pi)({$metadata:lr(ae)},ot),[2,Promise.resolve(Gt)]}})})}(Ne,ot)},Ae}(y.mY);function rs(ae){return Promise.all(Object.keys(ae).reduce(function(Ae,Ne){var ot=ae[Ne];return Ae.push("string"==typeof ot?[Ne,ot]:ot().then(function(Gt){return[Ne,Gt]})),Ae},[])).then(function(Ae){return Ae.reduce(function(Ne,ot){var Gt=(0,e.CR)(ot,2);return Ne[Gt[0]]=Gt[1],Ne},{})})}function pl(ae){var Ae=this;return function(){return(0,e.mG)(Ae,void 0,void 0,function(){var Ne,ot,Gt,Kt,Tn,hn,Fn,bi,ri,oo,qr,ki;return(0,e.Jh)(this,function(Hi){switch(Hi.label){case 0:return ri=(bi=ae.client).send,oo=Ra.bind,ki={CustomRoleArn:ae.customRoleArn,IdentityId:ae.identityId},ae.logins?[4,rs(ae.logins)]:[3,2];case 1:return qr=Hi.sent(),[3,3];case 2:qr=void 0,Hi.label=3;case 3:return[4,ri.apply(bi,[new(oo.apply(Ra,[void 0,(ki.Logins=qr,ki)]))])];case 4:return Ne=Hi.sent().Credentials,ot=void 0===Ne?function Oa(){throw new vo.mV("Response from Amazon Cognito contained no credentials")}():Ne,Kt=void 0===(Gt=ot.AccessKeyId)?function Lo(){throw new vo.mV("Response from Amazon Cognito contained no access key ID")}():Gt,Tn=ot.Expiration,Fn=void 0===(hn=ot.SecretKey)?function yo(){throw new vo.mV("Response from Amazon Cognito contained no secret key")}():hn,[2,{identityId:ae.identityId,accessKeyId:Kt,secretAccessKey:Fn,sessionToken:ot.SessionToken,expiration:Tn}]}})})}}var Ss="IdentityIds",So=function(){function ae(Ae){void 0===Ae&&(Ae="aws:cognito-identity-ids"),this.dbName=Ae}return ae.prototype.getItem=function(Ae){return this.withObjectStore("readonly",function(Ne){var ot=Ne.get(Ae);return new Promise(function(Gt){ot.onerror=function(){return Gt(null)},ot.onsuccess=function(){return Gt(ot.result?ot.result.value:null)}})}).catch(function(){return null})},ae.prototype.removeItem=function(Ae){return this.withObjectStore("readwrite",function(Ne){var ot=Ne.delete(Ae);return new Promise(function(Gt,Kt){ot.onerror=function(){return Kt(ot.error)},ot.onsuccess=function(){return Gt()}})})},ae.prototype.setItem=function(Ae,Ne){return this.withObjectStore("readwrite",function(ot){var Gt=ot.put({id:Ae,value:Ne});return new Promise(function(Kt,Tn){Gt.onerror=function(){return Tn(Gt.error)},Gt.onsuccess=function(){return Kt()}})})},ae.prototype.getDb=function(){var Ae=self.indexedDB.open(this.dbName,1);return new Promise(function(Ne,ot){Ae.onsuccess=function(){Ne(Ae.result)},Ae.onerror=function(){ot(Ae.error)},Ae.onblocked=function(){ot(new Error("Unable to access DB"))},Ae.onupgradeneeded=function(){var Gt=Ae.result;Gt.onerror=function(){ot(new Error("Failed to create object store"))},Gt.createObjectStore(Ss,{keyPath:"id"})}})},ae.prototype.withObjectStore=function(Ae,Ne){return this.getDb().then(function(ot){var Gt=ot.transaction(Ss,Ae);return Gt.oncomplete=function(){return ot.close()},new Promise(function(Kt,Tn){Gt.onerror=function(){return Tn(Gt.error)},Kt(Ne(Gt.objectStore(Ss)))}).catch(function(Kt){throw ot.close(),Kt})})},ae}(),ml=new(function(){function ae(Ae){void 0===Ae&&(Ae={}),this.store=Ae}return ae.prototype.getItem=function(Ae){return Ae in this.store?this.store[Ae]:null},ae.prototype.removeItem=function(Ae){delete this.store[Ae]},ae.prototype.setItem=function(Ae,Ne){this.store[Ae]=Ne},ae}());function Uo(ae){var Ae=this,Ne=ae.accountId,ot=ae.cache,Gt=void 0===ot?function is(){return"object"==typeof self&&self.indexedDB?new So:"object"==typeof window&&window.localStorage?window.localStorage:ml}():ot,Kt=ae.client,Tn=ae.customRoleArn,hn=ae.identityPoolId,Fn=ae.logins,Zt=ae.userIdentifier,bi=void 0===Zt?Fn&&0!==Object.keys(Fn).length?void 0:"ANONYMOUS":Zt,ri=bi?"aws:cognito-identity-credentials:"+hn+":"+bi:void 0,oo=function(){return(0,e.mG)(Ae,void 0,void 0,function(){var qr,ki,Hi,_i,Ao,Po,Js,As,ka;return(0,e.Jh)(this,function(so){switch(so.label){case 0:return(ki=ri)?[4,Gt.getItem(ri)]:[3,2];case 1:ki=so.sent(),so.label=2;case 2:return(qr=ki)?[3,7]:(Po=(Ao=Kt).send,Js=Eo.bind,ka={AccountId:Ne,IdentityPoolId:hn},Fn?[4,rs(Fn)]:[3,4]);case 3:return As=so.sent(),[3,5];case 4:As=void 0,so.label=5;case 5:return[4,Po.apply(Ao,[new(Js.apply(Eo,[void 0,(ka.Logins=As,ka)]))])];case 6:Hi=so.sent().IdentityId,_i=void 0===Hi?function Ma(){throw new vo.mV("Response from Amazon Cognito contained no identity ID")}():Hi,qr=_i,ri&&Promise.resolve(Gt.setItem(ri,qr)).catch(function(){}),so.label=7;case 7:return[2,(oo=pl({client:Kt,customRoleArn:Tn,logins:Fn,identityId:qr}))()]}})})};return function(){return oo().catch(function(qr){return(0,e.mG)(Ae,void 0,void 0,function(){return(0,e.Jh)(this,function(ki){throw ri&&Promise.resolve(Gt.removeItem(ri)).catch(function(){}),qr})})})}}},325:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.AwsCrc32=void 0;var e=u(9622),n=u(3231),y=u(7502),x=function(){function $(){this.crc32=new y.Crc32}return $.prototype.update=function(c){(0,n.isEmptyData)(c)||this.crc32.update((0,n.convertToBuffer)(c))},$.prototype.digest=function(){return(0,e.__awaiter)(this,void 0,void 0,function(){return(0,e.__generator)(this,function(c){return[2,(0,n.numToUint8)(this.crc32.digest())]})})},$}();K.AwsCrc32=x},7502:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.AwsCrc32=K.Crc32=K.crc32=void 0;var e=u(9622),n=u(3231);K.crc32=function y(p){return(new x).update(p).digest()};var x=function(){function p(){this.checksum=4294967295}return p.prototype.update=function(z){var S,V;try{for(var N=(0,e.__values)(z),U=N.next();!U.done;U=N.next())this.checksum=this.checksum>>>8^c[255&(this.checksum^U.value)]}catch(Q){S={error:Q}}finally{try{U&&!U.done&&(V=N.return)&&V.call(N)}finally{if(S)throw S.error}}return this},p.prototype.digest=function(){return(4294967295^this.checksum)>>>0},p}();K.Crc32=x;var c=(0,n.uint32ArrayFrom)([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),d=u(325);Object.defineProperty(K,"AwsCrc32",{enumerable:!0,get:function(){return d.AwsCrc32}})},927:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.convertToBuffer=void 0;var e=u(2093),n="undefined"!=typeof Buffer&&Buffer.from?function(x){return Buffer.from(x,"utf8")}:e.fromUtf8;K.convertToBuffer=function y(x){return x instanceof Uint8Array?x:"string"==typeof x?n(x):ArrayBuffer.isView(x)?new Uint8Array(x.buffer,x.byteOffset,x.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(x)}},3231:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.uint32ArrayFrom=K.numToUint8=K.isEmptyData=K.convertToBuffer=void 0;var e=u(927);Object.defineProperty(K,"convertToBuffer",{enumerable:!0,get:function(){return e.convertToBuffer}});var n=u(3526);Object.defineProperty(K,"isEmptyData",{enumerable:!0,get:function(){return n.isEmptyData}});var y=u(1872);Object.defineProperty(K,"numToUint8",{enumerable:!0,get:function(){return y.numToUint8}});var x=u(6236);Object.defineProperty(K,"uint32ArrayFrom",{enumerable:!0,get:function(){return x.uint32ArrayFrom}})},3526:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.isEmptyData=void 0,K.isEmptyData=function u(e){return"string"==typeof e?0===e.length:0===e.byteLength}},1872:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.numToUint8=void 0,K.numToUint8=function u(e){return new Uint8Array([(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])}},6236:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.uint32ArrayFrom=void 0,K.uint32ArrayFrom=function u(e){if(!Uint32Array.from){for(var n=new Uint32Array(e.length),y=0;y<e.length;)n[y]=e[y],y+=1;return n}return Uint32Array.from(e)}},1237:(it,K,u)=>{u.d(K,{B:()=>$,C:()=>d});var e=u(4929),n=u(6510),y=u(2107);function x(V){return void 0===V&&(V=0),new Promise(function(N,U){V&&setTimeout(function(){var H=new Error("Request did not complete within "+V+" ms");H.name="TimeoutError",U(H)},V)})}var $=function(){function V(N){var U=this;"function"==typeof N?this.configProvider=function(){return(0,e.mG)(U,void 0,void 0,function(){return(0,e.Jh)(this,function(H){switch(H.label){case 0:return[4,N()];case 1:return[2,H.sent()||{}]}})})}:this.config=N??{}}return V.prototype.destroy=function(){},V.prototype.handle=function(N,U){var Q=(void 0===U?{}:U).abortSignal;return(0,e.mG)(this,void 0,void 0,function(){var Z,ue,G,X,ee,ve,Oe,Le,m,P,b;return(0,e.Jh)(this,function(_){switch(_.label){case 0:return!this.config&&this.configProvider?(Z=this,[4,this.configProvider()]):[3,2];case 1:Z.config=_.sent(),_.label=2;case 2:return ue=this.config.requestTimeout,(null==Q?void 0:Q.aborted)?((G=new Error("Request aborted")).name="AbortError",[2,Promise.reject(G)]):(X=N.path,N.query&&(ee=(0,y.I)(N.query))&&(X+="?"+ee),Le=N.protocol+"//"+N.hostname+((ve=N.port)?":"+ve:"")+X,m={body:"GET"===(Oe=N.method)||"HEAD"===Oe?void 0:N.body,headers:new Headers(N.headers),method:Oe},"undefined"!=typeof AbortController&&(m.signal=Q),P=new Request(Le,m),b=[fetch(P).then(function(R){var E,ne,me=R.headers,Ee={};try{for(var se=(0,e.XA)(me.entries()),ze=se.next();!ze.done;ze=se.next()){var Ge=ze.value;Ee[Ge[0]]=Ge[1]}}catch(qe){E={error:qe}}finally{try{ze&&!ze.done&&(ne=se.return)&&ne.call(se)}finally{if(E)throw E.error}}return void 0!==R.body?{response:new n.Zn({headers:Ee,statusCode:R.status,body:R.body})}:R.blob().then(function(qe){return{response:new n.Zn({headers:Ee,statusCode:R.status,body:qe})}})}),x(ue)],Q&&b.push(new Promise(function(R,E){Q.onabort=function(){var ne=new Error("Request aborted");ne.name="AbortError",E(ne)}})),[2,Promise.race(b)])}})})},V}(),c=u(1187),d=function(V){return"function"==typeof Blob&&V instanceof Blob?function p(V){return(0,e.mG)(this,void 0,void 0,function(){var N,U;return(0,e.Jh)(this,function(H){switch(H.label){case 0:return[4,S(V)];case 1:return N=H.sent(),U=(0,c.G)(N),[2,new Uint8Array(U)]}})})}(V):function z(V){return(0,e.mG)(this,void 0,void 0,function(){var N,U,H,Q,Z,ue,G;return(0,e.Jh)(this,function(X){switch(X.label){case 0:N=new Uint8Array(0),U=V.getReader(),H=!1,X.label=1;case 1:return H?[3,3]:[4,U.read()];case 2:return Q=X.sent(),Z=Q.done,(ue=Q.value)&&(G=N,(N=new Uint8Array(G.length+ue.length)).set(G),N.set(ue,G.length)),H=Z,[3,1];case 3:return[2,N]}})})}(V)};function S(V){return new Promise(function(N,U){var H=new FileReader;H.onloadend=function(){var Q;if(2!==H.readyState)return U(new Error("Reader aborted too early"));var Z=null!==(Q=H.result)&&void 0!==Q?Q:"",ue=Z.indexOf(",");N(Z.substring(ue>-1?ue+1:Z.length))},H.onabort=function(){return U(new Error("Read aborted"))},H.onerror=function(){return U(H.error)},H.readAsDataURL(V)})}},6752:(it,K,u)=>{u.d(K,{n:()=>e});var e=function(n){return function(){return Promise.reject(n)}}},5068:(it,K,u)=>{u.d(K,{e:()=>e});var e=function(n){return"function"==typeof ArrayBuffer&&n instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(n)}},5603:(it,K,u)=>{var n=u(2173),y=u(4920),x="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;K.lW=p,K.h2=50;var $=2147483647;function d(D){if(D>$)throw new RangeError('The value "'+D+'" is invalid for option "size"');var C=new Uint8Array(D);return Object.setPrototypeOf(C,p.prototype),C}function p(D,C,g){if("number"==typeof D){if("string"==typeof C)throw new TypeError('The "string" argument must be of type string. Received type number');return N(D)}return z(D,C,g)}function z(D,C,g){if("string"==typeof D)return function U(D,C){if(("string"!=typeof C||""===C)&&(C="utf8"),!p.isEncoding(C))throw new TypeError("Unknown encoding: "+C);var g=0|X(D,C),B=d(g),de=B.write(D,C);return de!==g&&(B=B.slice(0,de)),B}(D,C);if(ArrayBuffer.isView(D))return H(D);if(null==D)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof D);if(De(D,ArrayBuffer)||D&&De(D.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(De(D,SharedArrayBuffer)||D&&De(D.buffer,SharedArrayBuffer)))return function Q(D,C,g){if(C<0||D.byteLength<C)throw new RangeError('"offset" is outside of buffer bounds');if(D.byteLength<C+(g||0))throw new RangeError('"length" is outside of buffer bounds');var B;return B=void 0===C&&void 0===g?new Uint8Array(D):void 0===g?new Uint8Array(D,C):new Uint8Array(D,C,g),Object.setPrototypeOf(B,p.prototype),B}(D,C,g);if("number"==typeof D)throw new TypeError('The "value" argument must not be of type number. Received type number');var B=D.valueOf&&D.valueOf();if(null!=B&&B!==D)return p.from(B,C,g);var de=function Z(D){if(p.isBuffer(D)){var C=0|ue(D.length),g=d(C);return 0===g.length||D.copy(g,0,0,C),g}return void 0!==D.length?"number"!=typeof D.length||ut(D.length)?d(0):H(D):"Buffer"===D.type&&Array.isArray(D.data)?H(D.data):void 0}(D);if(de)return de;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof D[Symbol.toPrimitive])return p.from(D[Symbol.toPrimitive]("string"),C,g);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof D)}function S(D){if("number"!=typeof D)throw new TypeError('"size" argument must be of type number');if(D<0)throw new RangeError('The value "'+D+'" is invalid for option "size"')}function N(D){return S(D),d(D<0?0:0|ue(D))}function H(D){for(var C=D.length<0?0:0|ue(D.length),g=d(C),B=0;B<C;B+=1)g[B]=255&D[B];return g}function ue(D){if(D>=$)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+$.toString(16)+" bytes");return 0|D}function X(D,C){if(p.isBuffer(D))return D.length;if(ArrayBuffer.isView(D)||De(D,ArrayBuffer))return D.byteLength;if("string"!=typeof D)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof D);var g=D.length,B=arguments.length>2&&!0===arguments[2];if(!B&&0===g)return 0;for(var de=!1;;)switch(C){case"ascii":case"latin1":case"binary":return g;case"utf8":case"utf-8":return he(D).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*g;case"hex":return g>>>1;case"base64":return Je(D).length;default:if(de)return B?-1:he(D).length;C=(""+C).toLowerCase(),de=!0}}function ee(D,C,g){var B=!1;if((void 0===C||C<0)&&(C=0),C>this.length||((void 0===g||g>this.length)&&(g=this.length),g<=0)||(g>>>=0)<=(C>>>=0))return"";for(D||(D="utf8");;)switch(D){case"hex":return Ge(this,C,g);case"utf8":case"utf-8":return ne(this,C,g);case"ascii":return se(this,C,g);case"latin1":case"binary":return ze(this,C,g);case"base64":return E(this,C,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xe(this,C,g);default:if(B)throw new TypeError("Unknown encoding: "+D);D=(D+"").toLowerCase(),B=!0}}function ve(D,C,g){var B=D[C];D[C]=D[g],D[g]=B}function Oe(D,C,g,B,de){if(0===D.length)return-1;if("string"==typeof g?(B=g,g=0):g>2147483647?g=2147483647:g<-2147483648&&(g=-2147483648),ut(g=+g)&&(g=de?0:D.length-1),g<0&&(g=D.length+g),g>=D.length){if(de)return-1;g=D.length-1}else if(g<0){if(!de)return-1;g=0}if("string"==typeof C&&(C=p.from(C,B)),p.isBuffer(C))return 0===C.length?-1:Le(D,C,g,B,de);if("number"==typeof C)return C&=255,"function"==typeof Uint8Array.prototype.indexOf?de?Uint8Array.prototype.indexOf.call(D,C,g):Uint8Array.prototype.lastIndexOf.call(D,C,g):Le(D,[C],g,B,de);throw new TypeError("val must be string, number or Buffer")}function Le(D,C,g,B,de){var Ut,ye=1,Me=D.length,Qe=C.length;if(void 0!==B&&("ucs2"===(B=String(B).toLowerCase())||"ucs-2"===B||"utf16le"===B||"utf-16le"===B)){if(D.length<2||C.length<2)return-1;ye=2,Me/=2,Qe/=2,g/=2}function st(zt,$e){return 1===ye?zt[$e]:zt.readUInt16BE($e*ye)}if(de){var qt=-1;for(Ut=g;Ut<Me;Ut++)if(st(D,Ut)===st(C,-1===qt?0:Ut-qt)){if(-1===qt&&(qt=Ut),Ut-qt+1===Qe)return qt*ye}else-1!==qt&&(Ut-=Ut-qt),qt=-1}else for(g+Qe>Me&&(g=Me-Qe),Ut=g;Ut>=0;Ut--){for(var Ue=!0,Lt=0;Lt<Qe;Lt++)if(st(D,Ut+Lt)!==st(C,Lt)){Ue=!1;break}if(Ue)return Ut}return-1}function be(D,C,g,B){g=Number(g)||0;var de=D.length-g;B?(B=Number(B))>de&&(B=de):B=de;var ye=C.length;B>ye/2&&(B=ye/2);for(var Me=0;Me<B;++Me){var Qe=parseInt(C.substr(2*Me,2),16);if(ut(Qe))return Me;D[g+Me]=Qe}return Me}function m(D,C,g,B){return we(he(C,D.length-g),D,g,B)}function P(D,C,g,B){return we(function pe(D){for(var C=[],g=0;g<D.length;++g)C.push(255&D.charCodeAt(g));return C}(C),D,g,B)}function b(D,C,g,B){return P(D,C,g,B)}function _(D,C,g,B){return we(Je(C),D,g,B)}function R(D,C,g,B){return we(function Fe(D,C){for(var g,B,ye=[],Me=0;Me<D.length&&!((C-=2)<0);++Me)B=(g=D.charCodeAt(Me))>>8,ye.push(g%256),ye.push(B);return ye}(C,D.length-g),D,g,B)}function E(D,C,g){return n.fromByteArray(0===C&&g===D.length?D:D.slice(C,g))}function ne(D,C,g){g=Math.min(D.length,g);for(var B=[],de=C;de<g;){var st,Ut,qt,Ue,ye=D[de],Me=null,Qe=ye>239?4:ye>223?3:ye>191?2:1;if(de+Qe<=g)switch(Qe){case 1:ye<128&&(Me=ye);break;case 2:128==(192&(st=D[de+1]))&&(Ue=(31&ye)<<6|63&st)>127&&(Me=Ue);break;case 3:Ut=D[de+2],128==(192&(st=D[de+1]))&&128==(192&Ut)&&(Ue=(15&ye)<<12|(63&st)<<6|63&Ut)>2047&&(Ue<55296||Ue>57343)&&(Me=Ue);break;case 4:Ut=D[de+2],qt=D[de+3],128==(192&(st=D[de+1]))&&128==(192&Ut)&&128==(192&qt)&&(Ue=(15&ye)<<18|(63&st)<<12|(63&Ut)<<6|63&qt)>65535&&Ue<1114112&&(Me=Ue)}null===Me?(Me=65533,Qe=1):Me>65535&&(B.push((Me-=65536)>>>10&1023|55296),Me=56320|1023&Me),B.push(Me),de+=Qe}return function Ee(D){var C=D.length;if(C<=4096)return String.fromCharCode.apply(String,D);for(var g="",B=0;B<C;)g+=String.fromCharCode.apply(String,D.slice(B,B+=4096));return g}(B)}function se(D,C,g){var B="";g=Math.min(D.length,g);for(var de=C;de<g;++de)B+=String.fromCharCode(127&D[de]);return B}function ze(D,C,g){var B="";g=Math.min(D.length,g);for(var de=C;de<g;++de)B+=String.fromCharCode(D[de]);return B}function Ge(D,C,g){var B=D.length;(!C||C<0)&&(C=0),(!g||g<0||g>B)&&(g=B);for(var de="",ye=C;ye<g;++ye)de+=le[D[ye]];return de}function xe(D,C,g){for(var B=D.slice(C,g),de="",ye=0;ye<B.length;ye+=2)de+=String.fromCharCode(B[ye]+256*B[ye+1]);return de}function qe(D,C,g){if(D%1!=0||D<0)throw new RangeError("offset is not uint");if(D+C>g)throw new RangeError("Trying to access beyond buffer length")}function Xe(D,C,g,B,de,ye){if(!p.isBuffer(D))throw new TypeError('"buffer" argument must be a Buffer instance');if(C>de||C<ye)throw new RangeError('"value" argument is out of bounds');if(g+B>D.length)throw new RangeError("Index out of range")}function lt(D,C,g,B,de,ye){if(g+B>D.length)throw new RangeError("Index out of range");if(g<0)throw new RangeError("Index out of range")}function He(D,C,g,B,de){return C=+C,g>>>=0,de||lt(D,0,g,4),y.write(D,C,g,B,23,4),g+4}function Ye(D,C,g,B,de){return C=+C,g>>>=0,de||lt(D,0,g,8),y.write(D,C,g,B,52,8),g+8}!(p.TYPED_ARRAY_SUPPORT=function c(){try{var D=new Uint8Array(1),C={foo:function(){return 42}};return Object.setPrototypeOf(C,Uint8Array.prototype),Object.setPrototypeOf(D,C),42===D.foo()}catch{return!1}}())&&"undefined"!=typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),p.poolSize=8192,p.from=function(D,C,g){return z(D,C,g)},Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array),p.alloc=function(D,C,g){return function V(D,C,g){return S(D),D<=0?d(D):void 0!==C?"string"==typeof g?d(D).fill(C,g):d(D).fill(C):d(D)}(D,C,g)},p.allocUnsafe=function(D){return N(D)},p.allocUnsafeSlow=function(D){return N(D)},p.isBuffer=function(C){return null!=C&&!0===C._isBuffer&&C!==p.prototype},p.compare=function(C,g){if(De(C,Uint8Array)&&(C=p.from(C,C.offset,C.byteLength)),De(g,Uint8Array)&&(g=p.from(g,g.offset,g.byteLength)),!p.isBuffer(C)||!p.isBuffer(g))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(C===g)return 0;for(var B=C.length,de=g.length,ye=0,Me=Math.min(B,de);ye<Me;++ye)if(C[ye]!==g[ye]){B=C[ye],de=g[ye];break}return B<de?-1:de<B?1:0},p.isEncoding=function(C){switch(String(C).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(C,g){if(!Array.isArray(C))throw new TypeError('"list" argument must be an Array of Buffers');if(0===C.length)return p.alloc(0);var B;if(void 0===g)for(g=0,B=0;B<C.length;++B)g+=C[B].length;var de=p.allocUnsafe(g),ye=0;for(B=0;B<C.length;++B){var Me=C[B];if(De(Me,Uint8Array)&&(Me=p.from(Me)),!p.isBuffer(Me))throw new TypeError('"list" argument must be an Array of Buffers');Me.copy(de,ye),ye+=Me.length}return de},p.byteLength=X,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var C=this.length;if(C%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var g=0;g<C;g+=2)ve(this,g,g+1);return this},p.prototype.swap32=function(){var C=this.length;if(C%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var g=0;g<C;g+=4)ve(this,g,g+3),ve(this,g+1,g+2);return this},p.prototype.swap64=function(){var C=this.length;if(C%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var g=0;g<C;g+=8)ve(this,g,g+7),ve(this,g+1,g+6),ve(this,g+2,g+5),ve(this,g+3,g+4);return this},p.prototype.toLocaleString=p.prototype.toString=function(){var C=this.length;return 0===C?"":0===arguments.length?ne(this,0,C):ee.apply(this,arguments)},p.prototype.equals=function(C){if(!p.isBuffer(C))throw new TypeError("Argument must be a Buffer");return this===C||0===p.compare(this,C)},p.prototype.inspect=function(){var C="",g=K.h2;return C=this.toString("hex",0,g).replace(/(.{2})/g,"$1 ").trim(),this.length>g&&(C+=" ... "),"<Buffer "+C+">"},x&&(p.prototype[x]=p.prototype.inspect),p.prototype.compare=function(C,g,B,de,ye){if(De(C,Uint8Array)&&(C=p.from(C,C.offset,C.byteLength)),!p.isBuffer(C))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof C);if(void 0===g&&(g=0),void 0===B&&(B=C?C.length:0),void 0===de&&(de=0),void 0===ye&&(ye=this.length),g<0||B>C.length||de<0||ye>this.length)throw new RangeError("out of range index");if(de>=ye&&g>=B)return 0;if(de>=ye)return-1;if(g>=B)return 1;if(this===C)return 0;for(var Me=(ye>>>=0)-(de>>>=0),Qe=(B>>>=0)-(g>>>=0),st=Math.min(Me,Qe),Ut=this.slice(de,ye),qt=C.slice(g,B),Ue=0;Ue<st;++Ue)if(Ut[Ue]!==qt[Ue]){Me=Ut[Ue],Qe=qt[Ue];break}return Me<Qe?-1:Qe<Me?1:0},p.prototype.includes=function(C,g,B){return-1!==this.indexOf(C,g,B)},p.prototype.indexOf=function(C,g,B){return Oe(this,C,g,B,!0)},p.prototype.lastIndexOf=function(C,g,B){return Oe(this,C,g,B,!1)},p.prototype.write=function(C,g,B,de){if(void 0===g)de="utf8",B=this.length,g=0;else if(void 0===B&&"string"==typeof g)de=g,B=this.length,g=0;else{if(!isFinite(g))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");g>>>=0,isFinite(B)?(B>>>=0,void 0===de&&(de="utf8")):(de=B,B=void 0)}var ye=this.length-g;if((void 0===B||B>ye)&&(B=ye),C.length>0&&(B<0||g<0)||g>this.length)throw new RangeError("Attempt to write outside buffer bounds");de||(de="utf8");for(var Me=!1;;)switch(de){case"hex":return be(this,C,g,B);case"utf8":case"utf-8":return m(this,C,g,B);case"ascii":return P(this,C,g,B);case"latin1":case"binary":return b(this,C,g,B);case"base64":return _(this,C,g,B);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,C,g,B);default:if(Me)throw new TypeError("Unknown encoding: "+de);de=(""+de).toLowerCase(),Me=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},p.prototype.slice=function(C,g){var B=this.length;(C=~~C)<0?(C+=B)<0&&(C=0):C>B&&(C=B),(g=void 0===g?B:~~g)<0?(g+=B)<0&&(g=0):g>B&&(g=B),g<C&&(g=C);var de=this.subarray(C,g);return Object.setPrototypeOf(de,p.prototype),de},p.prototype.readUIntLE=function(C,g,B){C>>>=0,g>>>=0,B||qe(C,g,this.length);for(var de=this[C],ye=1,Me=0;++Me<g&&(ye*=256);)de+=this[C+Me]*ye;return de},p.prototype.readUIntBE=function(C,g,B){C>>>=0,g>>>=0,B||qe(C,g,this.length);for(var de=this[C+--g],ye=1;g>0&&(ye*=256);)de+=this[C+--g]*ye;return de},p.prototype.readUInt8=function(C,g){return C>>>=0,g||qe(C,1,this.length),this[C]},p.prototype.readUInt16LE=function(C,g){return C>>>=0,g||qe(C,2,this.length),this[C]|this[C+1]<<8},p.prototype.readUInt16BE=function(C,g){return C>>>=0,g||qe(C,2,this.length),this[C]<<8|this[C+1]},p.prototype.readUInt32LE=function(C,g){return C>>>=0,g||qe(C,4,this.length),(this[C]|this[C+1]<<8|this[C+2]<<16)+16777216*this[C+3]},p.prototype.readUInt32BE=function(C,g){return C>>>=0,g||qe(C,4,this.length),16777216*this[C]+(this[C+1]<<16|this[C+2]<<8|this[C+3])},p.prototype.readIntLE=function(C,g,B){C>>>=0,g>>>=0,B||qe(C,g,this.length);for(var de=this[C],ye=1,Me=0;++Me<g&&(ye*=256);)de+=this[C+Me]*ye;return de>=(ye*=128)&&(de-=Math.pow(2,8*g)),de},p.prototype.readIntBE=function(C,g,B){C>>>=0,g>>>=0,B||qe(C,g,this.length);for(var de=g,ye=1,Me=this[C+--de];de>0&&(ye*=256);)Me+=this[C+--de]*ye;return Me>=(ye*=128)&&(Me-=Math.pow(2,8*g)),Me},p.prototype.readInt8=function(C,g){return C>>>=0,g||qe(C,1,this.length),128&this[C]?-1*(255-this[C]+1):this[C]},p.prototype.readInt16LE=function(C,g){C>>>=0,g||qe(C,2,this.length);var B=this[C]|this[C+1]<<8;return 32768&B?4294901760|B:B},p.prototype.readInt16BE=function(C,g){C>>>=0,g||qe(C,2,this.length);var B=this[C+1]|this[C]<<8;return 32768&B?4294901760|B:B},p.prototype.readInt32LE=function(C,g){return C>>>=0,g||qe(C,4,this.length),this[C]|this[C+1]<<8|this[C+2]<<16|this[C+3]<<24},p.prototype.readInt32BE=function(C,g){return C>>>=0,g||qe(C,4,this.length),this[C]<<24|this[C+1]<<16|this[C+2]<<8|this[C+3]},p.prototype.readFloatLE=function(C,g){return C>>>=0,g||qe(C,4,this.length),y.read(this,C,!0,23,4)},p.prototype.readFloatBE=function(C,g){return C>>>=0,g||qe(C,4,this.length),y.read(this,C,!1,23,4)},p.prototype.readDoubleLE=function(C,g){return C>>>=0,g||qe(C,8,this.length),y.read(this,C,!0,52,8)},p.prototype.readDoubleBE=function(C,g){return C>>>=0,g||qe(C,8,this.length),y.read(this,C,!1,52,8)},p.prototype.writeUIntLE=function(C,g,B,de){C=+C,g>>>=0,B>>>=0,de||Xe(this,C,g,B,Math.pow(2,8*B)-1,0);var Me=1,Qe=0;for(this[g]=255&C;++Qe<B&&(Me*=256);)this[g+Qe]=C/Me&255;return g+B},p.prototype.writeUIntBE=function(C,g,B,de){C=+C,g>>>=0,B>>>=0,de||Xe(this,C,g,B,Math.pow(2,8*B)-1,0);var Me=B-1,Qe=1;for(this[g+Me]=255&C;--Me>=0&&(Qe*=256);)this[g+Me]=C/Qe&255;return g+B},p.prototype.writeUInt8=function(C,g,B){return C=+C,g>>>=0,B||Xe(this,C,g,1,255,0),this[g]=255&C,g+1},p.prototype.writeUInt16LE=function(C,g,B){return C=+C,g>>>=0,B||Xe(this,C,g,2,65535,0),this[g]=255&C,this[g+1]=C>>>8,g+2},p.prototype.writeUInt16BE=function(C,g,B){return C=+C,g>>>=0,B||Xe(this,C,g,2,65535,0),this[g]=C>>>8,this[g+1]=255&C,g+2},p.prototype.writeUInt32LE=function(C,g,B){return C=+C,g>>>=0,B||Xe(this,C,g,4,4294967295,0),this[g+3]=C>>>24,this[g+2]=C>>>16,this[g+1]=C>>>8,this[g]=255&C,g+4},p.prototype.writeUInt32BE=function(C,g,B){return C=+C,g>>>=0,B||Xe(this,C,g,4,4294967295,0),this[g]=C>>>24,this[g+1]=C>>>16,this[g+2]=C>>>8,this[g+3]=255&C,g+4},p.prototype.writeIntLE=function(C,g,B,de){if(C=+C,g>>>=0,!de){var ye=Math.pow(2,8*B-1);Xe(this,C,g,B,ye-1,-ye)}var Me=0,Qe=1,st=0;for(this[g]=255&C;++Me<B&&(Qe*=256);)C<0&&0===st&&0!==this[g+Me-1]&&(st=1),this[g+Me]=(C/Qe>>0)-st&255;return g+B},p.prototype.writeIntBE=function(C,g,B,de){if(C=+C,g>>>=0,!de){var ye=Math.pow(2,8*B-1);Xe(this,C,g,B,ye-1,-ye)}var Me=B-1,Qe=1,st=0;for(this[g+Me]=255&C;--Me>=0&&(Qe*=256);)C<0&&0===st&&0!==this[g+Me+1]&&(st=1),this[g+Me]=(C/Qe>>0)-st&255;return g+B},p.prototype.writeInt8=function(C,g,B){return C=+C,g>>>=0,B||Xe(this,C,g,1,127,-128),C<0&&(C=255+C+1),this[g]=255&C,g+1},p.prototype.writeInt16LE=function(C,g,B){return C=+C,g>>>=0,B||Xe(this,C,g,2,32767,-32768),this[g]=255&C,this[g+1]=C>>>8,g+2},p.prototype.writeInt16BE=function(C,g,B){return C=+C,g>>>=0,B||Xe(this,C,g,2,32767,-32768),this[g]=C>>>8,this[g+1]=255&C,g+2},p.prototype.writeInt32LE=function(C,g,B){return C=+C,g>>>=0,B||Xe(this,C,g,4,2147483647,-2147483648),this[g]=255&C,this[g+1]=C>>>8,this[g+2]=C>>>16,this[g+3]=C>>>24,g+4},p.prototype.writeInt32BE=function(C,g,B){return C=+C,g>>>=0,B||Xe(this,C,g,4,2147483647,-2147483648),C<0&&(C=4294967295+C+1),this[g]=C>>>24,this[g+1]=C>>>16,this[g+2]=C>>>8,this[g+3]=255&C,g+4},p.prototype.writeFloatLE=function(C,g,B){return He(this,C,g,!0,B)},p.prototype.writeFloatBE=function(C,g,B){return He(this,C,g,!1,B)},p.prototype.writeDoubleLE=function(C,g,B){return Ye(this,C,g,!0,B)},p.prototype.writeDoubleBE=function(C,g,B){return Ye(this,C,g,!1,B)},p.prototype.copy=function(C,g,B,de){if(!p.isBuffer(C))throw new TypeError("argument should be a Buffer");if(B||(B=0),!de&&0!==de&&(de=this.length),g>=C.length&&(g=C.length),g||(g=0),de>0&&de<B&&(de=B),de===B||0===C.length||0===this.length)return 0;if(g<0)throw new RangeError("targetStart out of bounds");if(B<0||B>=this.length)throw new RangeError("Index out of range");if(de<0)throw new RangeError("sourceEnd out of bounds");de>this.length&&(de=this.length),C.length-g<de-B&&(de=C.length-g+B);var ye=de-B;if(this===C&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(g,B,de);else if(this===C&&B<g&&g<de)for(var Me=ye-1;Me>=0;--Me)C[Me+g]=this[Me+B];else Uint8Array.prototype.set.call(C,this.subarray(B,de),g);return ye},p.prototype.fill=function(C,g,B,de){if("string"==typeof C){if("string"==typeof g?(de=g,g=0,B=this.length):"string"==typeof B&&(de=B,B=this.length),void 0!==de&&"string"!=typeof de)throw new TypeError("encoding must be a string");if("string"==typeof de&&!p.isEncoding(de))throw new TypeError("Unknown encoding: "+de);if(1===C.length){var ye=C.charCodeAt(0);("utf8"===de&&ye<128||"latin1"===de)&&(C=ye)}}else"number"==typeof C?C&=255:"boolean"==typeof C&&(C=Number(C));if(g<0||this.length<g||this.length<B)throw new RangeError("Out of range index");if(B<=g)return this;var Me;if(g>>>=0,B=void 0===B?this.length:B>>>0,C||(C=0),"number"==typeof C)for(Me=g;Me<B;++Me)this[Me]=C;else{var Qe=p.isBuffer(C)?C:p.from(C,de),st=Qe.length;if(0===st)throw new TypeError('The value "'+C+'" is invalid for argument "value"');for(Me=0;Me<B-g;++Me)this[Me+g]=Qe[Me%st]}return this};var ht=/[^+/0-9A-Za-z-_]/g;function he(D,C){C=C||1/0;for(var g,B=D.length,de=null,ye=[],Me=0;Me<B;++Me){if((g=D.charCodeAt(Me))>55295&&g<57344){if(!de){if(g>56319){(C-=3)>-1&&ye.push(239,191,189);continue}if(Me+1===B){(C-=3)>-1&&ye.push(239,191,189);continue}de=g;continue}if(g<56320){(C-=3)>-1&&ye.push(239,191,189),de=g;continue}g=65536+(de-55296<<10|g-56320)}else de&&(C-=3)>-1&&ye.push(239,191,189);if(de=null,g<128){if((C-=1)<0)break;ye.push(g)}else if(g<2048){if((C-=2)<0)break;ye.push(g>>6|192,63&g|128)}else if(g<65536){if((C-=3)<0)break;ye.push(g>>12|224,g>>6&63|128,63&g|128)}else{if(!(g<1114112))throw new Error("Invalid code point");if((C-=4)<0)break;ye.push(g>>18|240,g>>12&63|128,g>>6&63|128,63&g|128)}}return ye}function Je(D){return n.toByteArray(function Se(D){if((D=(D=D.split("=")[0]).trim().replace(ht,"")).length<2)return"";for(;D.length%4!=0;)D+="=";return D}(D))}function we(D,C,g,B){for(var de=0;de<B&&!(de+g>=C.length||de>=D.length);++de)C[de+g]=D[de];return de}function De(D,C){return D instanceof C||null!=D&&null!=D.constructor&&null!=D.constructor.name&&D.constructor.name===C.name}function ut(D){return D!=D}var le=function(){for(var D="0123456789abcdef",C=new Array(256),g=0;g<16;++g)for(var B=16*g,de=0;de<16;++de)C[B+de]=D[g]+D[de];return C}()},6467:(it,K,u)=>{u.d(K,{VG:()=>d});var e=u(4929),n=u(6510),y="content-length",c={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},d=function(p){return{applyToStack:function(z){z.add(function $(p){var z=this;return function(S){return function(V){return(0,e.mG)(z,void 0,void 0,function(){var N,U,H,Q,Z,ue;return(0,e.Jh)(this,function(G){if(n.aW.isInstance(N=V.request)&&(H=N.headers,(U=N.body)&&-1===Object.keys(H).map(function(X){return X.toLowerCase()}).indexOf(y)))try{Q=p(U),N.headers=(0,e.pi)((0,e.pi)({},N.headers),((Z={})[y]=String(Q),Z))}catch{N.headers=(0,e.pi)((0,e.pi)({},N.headers),((ue={})["transfer-encoding"]="chunked",ue))}return[2,S((0,e.pi)((0,e.pi)({},V),{request:N}))]})})}}}(p.bodyLengthChecker),c)}}}},7086:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.AwsCrc32=void 0;var e=u(2220),n=u(2670),y=u(2562),x=function(){function $(){this.crc32=new y.Crc32}return $.prototype.update=function(c){(0,n.isEmptyData)(c)||this.crc32.update((0,n.convertToBuffer)(c))},$.prototype.digest=function(){return(0,e.__awaiter)(this,void 0,void 0,function(){return(0,e.__generator)(this,function(c){return[2,(0,n.numToUint8)(this.crc32.digest())]})})},$}();K.AwsCrc32=x},2562:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.AwsCrc32=K.Crc32=K.crc32=void 0;var e=u(2220),n=u(2670);K.crc32=function y(p){return(new x).update(p).digest()};var x=function(){function p(){this.checksum=4294967295}return p.prototype.update=function(z){var S,V;try{for(var N=(0,e.__values)(z),U=N.next();!U.done;U=N.next())this.checksum=this.checksum>>>8^c[255&(this.checksum^U.value)]}catch(Q){S={error:Q}}finally{try{U&&!U.done&&(V=N.return)&&V.call(N)}finally{if(S)throw S.error}}return this},p.prototype.digest=function(){return(4294967295^this.checksum)>>>0},p}();K.Crc32=x;var c=(0,n.uint32ArrayFrom)([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),d=u(7086);Object.defineProperty(K,"AwsCrc32",{enumerable:!0,get:function(){return d.AwsCrc32}})},6137:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.convertToBuffer=void 0;var e=u(2093),n="undefined"!=typeof Buffer&&Buffer.from?function(x){return Buffer.from(x,"utf8")}:e.fromUtf8;K.convertToBuffer=function y(x){return x instanceof Uint8Array?x:"string"==typeof x?n(x):ArrayBuffer.isView(x)?new Uint8Array(x.buffer,x.byteOffset,x.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(x)}},2670:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.uint32ArrayFrom=K.numToUint8=K.isEmptyData=K.convertToBuffer=void 0;var e=u(6137);Object.defineProperty(K,"convertToBuffer",{enumerable:!0,get:function(){return e.convertToBuffer}});var n=u(5411);Object.defineProperty(K,"isEmptyData",{enumerable:!0,get:function(){return n.isEmptyData}});var y=u(7186);Object.defineProperty(K,"numToUint8",{enumerable:!0,get:function(){return y.numToUint8}});var x=u(3823);Object.defineProperty(K,"uint32ArrayFrom",{enumerable:!0,get:function(){return x.uint32ArrayFrom}})},5411:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.isEmptyData=void 0,K.isEmptyData=function u(e){return"string"==typeof e?0===e.length:0===e.byteLength}},7186:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.numToUint8=void 0,K.numToUint8=function u(e){return new Uint8Array([(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])}},3823:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.uint32ArrayFrom=void 0,K.uint32ArrayFrom=function u(e){if(!Uint32Array.from){for(var n=new Uint32Array(e.length),y=0;y<e.length;)n[y]=e[y],y+=1;return n}return Uint32Array.from(e)}},5147:(it,K,u)=>{u.d(K,{S8:()=>y,G2:()=>c});var e=u(4929),n=u(6510);function y(d){return d}var $={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},c=function(d){return{applyToStack:function(p){p.add(function(d){return function(p){return function(z){return(0,e.mG)(void 0,void 0,void 0,function(){var S,V;return(0,e.Jh)(this,function(U){return n.aW.isInstance(z.request)?(S=z.request,(void 0===(V=(d.requestHandler.metadata||{}).handlerProtocol)?"":V).indexOf("h2")>=0&&!S.headers[":authority"]?(delete S.headers.host,S.headers[":authority"]=""):S.headers.host||(S.headers.host=S.hostname),[2,p(z)]):[2,p(z)]})})}}}(d),$)}}}},9014:(it,K,u)=>{u.d(K,{cV:()=>x});var e=u(4929),y={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},x=function($){return{applyToStack:function(c){c.add(function($,c){return function(d){return(0,e.mG)(void 0,void 0,void 0,function(){var p,z,S,V,N,U,H,Q,Z;return(0,e.Jh)(this,function(ue){switch(ue.label){case 0:return p=c.clientName,z=c.commandName,S=c.inputFilterSensitiveLog,V=c.logger,N=c.outputFilterSensitiveLog,[4,$(d)];case 1:return U=ue.sent(),V?("function"==typeof V.info&&(Q=(H=U.output).$metadata,Z=(0,e._T)(H,["$metadata"]),V.info({clientName:p,commandName:z,input:S(d.input),output:N(Z),metadata:Q})),[2,U]):[2,U]}})})}},y)}}}},9972:(it,K,u)=>{u.d(K,{J:()=>y,CA:()=>x,NQ:()=>he,BC:()=>se});var e=u(4929),n=(()=>{return(pe=n||(n={})).STANDARD="standard",pe.ADAPTIVE="adaptive",n;var pe})(),y=3,x=n.STANDARD,$=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],c=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],d=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],p=[500,502,503,504],V=function(pe){var Fe,Je;return 429===(null===(Fe=pe.$metadata)||void 0===Fe?void 0:Fe.httpStatusCode)||c.includes(pe.name)||1==(null===(Je=pe.$retryable)||void 0===Je?void 0:Je.throttling)},U=function(){function pe(Fe){var Je,we,De,ut,le;this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=null!==(Je=null==Fe?void 0:Fe.beta)&&void 0!==Je?Je:.7,this.minCapacity=null!==(we=null==Fe?void 0:Fe.minCapacity)&&void 0!==we?we:1,this.minFillRate=null!==(De=null==Fe?void 0:Fe.minFillRate)&&void 0!==De?De:.5,this.scaleConstant=null!==(ut=null==Fe?void 0:Fe.scaleConstant)&&void 0!==ut?ut:.4,this.smooth=null!==(le=null==Fe?void 0:Fe.smooth)&&void 0!==le?le:.8;var D=this.getCurrentTimeInSeconds();this.lastThrottleTime=D,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}return pe.prototype.getCurrentTimeInSeconds=function(){return Date.now()/1e3},pe.prototype.getSendToken=function(){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(Fe){return[2,this.acquireTokenBucket(1)]})})},pe.prototype.acquireTokenBucket=function(Fe){return(0,e.mG)(this,void 0,void 0,function(){var Je;return(0,e.Jh)(this,function(we){switch(we.label){case 0:return this.enabled?(this.refillTokenBucket(),Fe>this.currentCapacity?(Je=(Fe-this.currentCapacity)/this.fillRate*1e3,[4,new Promise(function(De){return setTimeout(De,Je)})]):[3,2]):[2];case 1:we.sent(),we.label=2;case 2:return this.currentCapacity=this.currentCapacity-Fe,[2]}})})},pe.prototype.refillTokenBucket=function(){var Fe=this.getCurrentTimeInSeconds();this.lastTimestamp?(this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+(Fe-this.lastTimestamp)*this.fillRate),this.lastTimestamp=Fe):this.lastTimestamp=Fe},pe.prototype.updateClientSendingRate=function(Fe){var Je;if(this.updateMeasuredRate(),V(Fe)){var we=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=we,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),Je=this.cubicThrottle(we),this.enableTokenBucket()}else this.calculateTimeWindow(),Je=this.cubicSuccess(this.getCurrentTimeInSeconds());var De=Math.min(Je,2*this.measuredTxRate);this.updateTokenBucketRate(De)},pe.prototype.calculateTimeWindow=function(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))},pe.prototype.cubicThrottle=function(Fe){return this.getPrecise(Fe*this.beta)},pe.prototype.cubicSuccess=function(Fe){return this.getPrecise(this.scaleConstant*Math.pow(Fe-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)},pe.prototype.enableTokenBucket=function(){this.enabled=!0},pe.prototype.updateTokenBucketRate=function(Fe){this.refillTokenBucket(),this.fillRate=Math.max(Fe,this.minFillRate),this.maxCapacity=Math.max(Fe,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)},pe.prototype.updateMeasuredRate=function(){var Fe=this.getCurrentTimeInSeconds(),Je=Math.floor(2*Fe)/2;this.requestCount++,Je>this.lastTxRateBucket&&(this.measuredTxRate=this.getPrecise(this.requestCount/(Je-this.lastTxRateBucket)*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=Je)},pe.prototype.getPrecise=function(Fe){return parseFloat(Fe.toFixed(8))},pe}(),H=u(6510),Q=u(6102),P=function(pe,Fe){return Math.floor(Math.min(2e4,Math.random()*Math.pow(2,Fe)*pe))},b=function(pe){return!!pe&&(function(pe){return void 0!==pe.$retryable}(pe)||function(pe){return $.includes(pe.name)}(pe)||V(pe)||function(pe){var Fe;return d.includes(pe.name)||p.includes((null===(Fe=pe.$metadata)||void 0===Fe?void 0:Fe.httpStatusCode)||0)}(pe))},_=function(){function pe(Fe,Je){var we,De,ut,le,D,C,g,B,de;this.maxAttemptsProvider=Fe,this.mode=n.STANDARD,this.retryDecider=null!==(we=null==Je?void 0:Je.retryDecider)&&void 0!==we?we:b,this.delayDecider=null!==(De=null==Je?void 0:Je.delayDecider)&&void 0!==De?De:P,this.retryQuota=null!==(ut=null==Je?void 0:Je.retryQuota)&&void 0!==ut?ut:(le=1,D=5,C=10,g=500,B=function(Qe){return"TimeoutError"===Qe.name?C:D},de=function(Qe){return B(Qe)<=g},Object.freeze({hasRetryTokens:de,retrieveRetryTokens:function(Qe){if(!de(Qe))throw new Error("No retry token available");var st=B(Qe);return g-=st,st},releaseRetryTokens:function(Qe){g+=Qe??le,g=Math.min(g,500)}}))}return pe.prototype.shouldRetry=function(Fe,Je,we){return Je<we&&this.retryDecider(Fe)&&this.retryQuota.hasRetryTokens(Fe)},pe.prototype.getMaxAttempts=function(){return(0,e.mG)(this,void 0,void 0,function(){var Fe;return(0,e.Jh)(this,function(we){switch(we.label){case 0:return we.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return Fe=we.sent(),[3,3];case 2:return we.sent(),Fe=y,[3,3];case 3:return[2,Fe]}})})},pe.prototype.retry=function(Fe,Je,we){return(0,e.mG)(this,void 0,void 0,function(){var De,ut,le,D,C,g,B,de;return(0,e.Jh)(this,function(ye){switch(ye.label){case 0:return ut=0,le=0,[4,this.getMaxAttempts()];case 1:D=ye.sent(),H.aW.isInstance(C=Je.request)&&(C.headers["amz-sdk-invocation-id"]=(0,Q.Z)()),g=function(){var Me,Qe,st,Ut,qt,Ue;return(0,e.Jh)(this,function(Lt){switch(Lt.label){case 0:return Lt.trys.push([0,4,,7]),H.aW.isInstance(C)&&(C.headers["amz-sdk-request"]="attempt="+(ut+1)+"; max="+D),(null==we?void 0:we.beforeRequest)?[4,we.beforeRequest()]:[3,2];case 1:Lt.sent(),Lt.label=2;case 2:return[4,Fe(Je)];case 3:return Me=Lt.sent(),Qe=Me.response,st=Me.output,(null==we?void 0:we.afterRequest)&&we.afterRequest(Qe),B.retryQuota.releaseRetryTokens(De),st.$metadata.attempts=ut+1,st.$metadata.totalRetryDelay=le,[2,{value:{response:Qe,output:st}}];case 4:return Ut=Lt.sent(),qt=R(Ut),ut++,B.shouldRetry(qt,ut,D)?(De=B.retryQuota.retrieveRetryTokens(qt),Ue=B.delayDecider(V(qt)?500:100,ut),le+=Ue,[4,new Promise(function(zt){return setTimeout(zt,Ue)})]):[3,6];case 5:return Lt.sent(),[2,"continue"];case 6:throw qt.$metadata||(qt.$metadata={}),qt.$metadata.attempts=ut,qt.$metadata.totalRetryDelay=le,qt;case 7:return[2]}})},B=this,ye.label=2;case 2:return[5,g()];case 3:return"object"==typeof(de=ye.sent())?[2,de.value]:[3,2];case 4:return[2]}})})},pe}(),R=function(pe){return pe instanceof Error?pe:pe instanceof Object?Object.assign(new Error,pe):"string"==typeof pe?new Error(pe):new Error("AWS SDK error wrapper for "+pe)},E=function(pe){function Fe(Je,we){var De=this,ut=we??{},le=ut.rateLimiter,D=(0,e._T)(ut,["rateLimiter"]);return(De=pe.call(this,Je,D)||this).rateLimiter=le??new U,De.mode=n.ADAPTIVE,De}return(0,e.ZT)(Fe,pe),Fe.prototype.retry=function(Je,we){return(0,e.mG)(this,void 0,void 0,function(){var De=this;return(0,e.Jh)(this,function(ut){return[2,pe.prototype.retry.call(this,Je,we,{beforeRequest:function(){return(0,e.mG)(De,void 0,void 0,function(){return(0,e.Jh)(this,function(le){return[2,this.rateLimiter.getSendToken()]})})},afterRequest:function(le){De.rateLimiter.updateClientSendingRate(le)}})]})})},Fe}(_),se=function(pe){var Fe=Ge(pe.maxAttempts);return(0,e.pi)((0,e.pi)({},pe),{maxAttempts:Fe,retryStrategy:function(){return(0,e.mG)(void 0,void 0,void 0,function(){return(0,e.Jh)(this,function(we){switch(we.label){case 0:return pe.retryStrategy?[2,pe.retryStrategy]:[4,ze(pe.retryMode)];case 1:return we.sent()===n.ADAPTIVE?[2,new E(Fe)]:[2,new _(Fe)]}})})}})},ze=function(pe){return(0,e.mG)(void 0,void 0,void 0,function(){return(0,e.Jh)(this,function(Fe){switch(Fe.label){case 0:return"string"==typeof pe?[2,pe]:[4,pe()];case 1:return[2,Fe.sent()]}})})},Ge=function(pe){if(void 0===pe&&(pe=y),"number"==typeof pe){var Fe=Promise.resolve(pe);return function(){return Fe}}return pe},Se={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},he=function(pe){return{applyToStack:function(Fe){Fe.add(function(pe){return function(Fe,Je){return function(we){return(0,e.mG)(void 0,void 0,void 0,function(){var De;return(0,e.Jh)(this,function(ut){switch(ut.label){case 0:return[4,pe.retryStrategy()];case 1:return(null==(De=ut.sent())?void 0:De.mode)&&(Je.userAgent=(0,e.ev)((0,e.ev)([],(0,e.CR)(Je.userAgent||[])),[["cfg/retry-mode",De.mode]])),[2,De.retry(Fe,we)]}})})}}}(pe),Se)}}}},9266:(it,K,u)=>{u.d(K,{p2:()=>c});var e=u(4929),x={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},$={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function c(d,p,z){return{applyToStack:function(S){S.add(function(d,p){return function(z,S){return function(V){return(0,e.mG)(void 0,void 0,void 0,function(){var N,U,H;return(0,e.Jh)(this,function(Q){switch(Q.label){case 0:return[4,z(V)];case 1:N=Q.sent().response,Q.label=2;case 2:return Q.trys.push([2,4,,5]),[4,p(N,d)];case 3:return U=Q.sent(),[2,{response:N,output:U}];case 4:throw H=Q.sent(),Object.assign(H,{$response:N});case 5:return[2]}})})}}}(d,z),x),S.add(function(d,p){return function(z,S){return function(V){return(0,e.mG)(void 0,void 0,void 0,function(){var N;return(0,e.Jh)(this,function(U){switch(U.label){case 0:return[4,p(V.input,d)];case 1:return N=U.sent(),[2,z((0,e.pi)((0,e.pi)({},V),{request:N}))]}})})}}}(d,p),$)}}}},2356:(it,K,u)=>{u.d(K,{yt:()=>Z,A$:()=>$});var e=u(4929),n=u(114),y=u(7193),$=function(G){var m,X=G.credentials?p(G.credentials):G.credentialDefaultProvider(G),ee=G.signingEscapePath,ve=void 0===ee||ee,Oe=G.systemClockOffset,Le=void 0===Oe?G.systemClockOffset||0:Oe,be=G.sha256;return m=G.signer?d(G.signer):function(){return d(G.region)().then(function(P){return(0,e.mG)(void 0,void 0,void 0,function(){var b,_,R,E;return(0,e.Jh)(this,function(ne){switch(ne.label){case 0:return _=(b=G).regionInfoProvider,R=[P],E={},[4,G.useFipsEndpoint()];case 1:return E.useFipsEndpoint=ne.sent(),[4,G.useDualstackEndpoint()];case 2:return[4,_.apply(b,R.concat([(E.useDualstackEndpoint=ne.sent(),E)]))];case 3:return[2,[ne.sent()||{},P]]}})})}).then(function(P){var b=(0,e.CR)(P,2),_=b[0],ne=_.signingService;G.signingRegion=G.signingRegion||_.signingRegion||b[1],G.signingName=G.signingName||ne||G.serviceId;var me=(0,e.pi)((0,e.pi)({},G),{credentials:X,region:G.signingRegion,service:G.signingName,sha256:be,uriEscapePath:ve});return new(G.signerConstructor||y.L1)(me)})},(0,e.pi)((0,e.pi)({},G),{systemClockOffset:Le,signingEscapePath:ve,credentials:X,signer:m})},d=function(G){if("object"==typeof G){var X=Promise.resolve(G);return function(){return X}}return G},p=function(G){return"function"==typeof G?(0,n.HP)(G,function(X){return void 0!==X.expiration&&X.expiration.getTime()-Date.now()<3e5},function(X){return void 0!==X.expiration}):d(G)},z=u(6510),S=function(G){return new Date(Date.now()+G)},N=function(G,X){var ee=Date.parse(G);return function(G,X){return Math.abs(S(X).getTime()-G)>=3e5}(ee,X)?ee-Date.now():X},H=function(G){var X,ee,ve;return z.Zn.isInstance(G)?null!==(ee=null===(X=G.headers)||void 0===X?void 0:X.date)&&void 0!==ee?ee:null===(ve=G.headers)||void 0===ve?void 0:ve.Date:void 0},Q={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},Z=function(G){return{applyToStack:function(X){X.addRelativeTo(function(G){return function(X,ee){return function(ve){return(0,e.mG)(this,void 0,void 0,function(){var Oe,Le,be,m,P,b;return(0,e.Jh)(this,function(_){switch(_.label){case 0:return z.aW.isInstance(ve.request)?[4,G.signer()]:[2,X(ve)];case 1:return Oe=_.sent(),be=X,m=[(0,e.pi)({},ve)],b={},[4,Oe.sign(ve.request,{signingDate:S(G.systemClockOffset),signingRegion:ee.signing_region,signingService:ee.signing_service})];case 2:return[4,be.apply(void 0,[e.pi.apply(void 0,m.concat([(b.request=_.sent(),b)]))]).catch(function(R){var E,ne=null!==(E=R.ServerTime)&&void 0!==E?E:H(R.$response);throw ne&&(G.systemClockOffset=N(ne,G.systemClockOffset)),R})];case 3:return Le=_.sent(),(P=H(Le.response))&&(G.systemClockOffset=N(P,G.systemClockOffset)),[2,Le]}})})}}}(G),Q)}}}},1703:(it,K,u)=>{u.d(K,{XJ:()=>V,er:()=>n});var e=u(4929);function n(N){return(0,e.pi)((0,e.pi)({},N),{customUserAgent:"string"==typeof N.customUserAgent?[[N.customUserAgent]]:N.customUserAgent})}var y=u(6510),x="user-agent",$="x-amz-user-agent",d=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,z=function(N){var U=(0,e.CR)(N,2),H=U[0],Q=U[1],Z=H.indexOf("/"),ue=H.substring(0,Z),G=H.substring(Z+1);return"api"===ue&&(G=G.toLowerCase()),[ue,G,Q].filter(function(X){return X&&X.length>0}).map(function(X){return null==X?void 0:X.replace(d,"_")}).join("/")},S={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},V=function(N){return{applyToStack:function(U){U.add(function(N){return function(U,H){return function(Q){return(0,e.mG)(void 0,void 0,void 0,function(){var Z,ue,G,X,ee,ve,Oe,Le,be;return(0,e.Jh)(this,function(m){switch(m.label){case 0:return y.aW.isInstance(Z=Q.request)?(ue=Z.headers,G=(null===(Le=null==H?void 0:H.userAgent)||void 0===Le?void 0:Le.map(z))||[],[4,N.defaultUserAgentProvider()]):[2,U(Q)];case 1:return X=m.sent().map(z),ee=(null===(be=null==N?void 0:N.customUserAgent)||void 0===be?void 0:be.map(z))||[],ve=(0,e.ev)((0,e.ev)((0,e.ev)([],(0,e.CR)(X)),(0,e.CR)(G)),(0,e.CR)(ee)).join(" "),Oe=(0,e.ev)((0,e.ev)([],(0,e.CR)(X.filter(function(P){return P.startsWith("aws-sdk-")}))),(0,e.CR)(ee)).join(" "),"browser"!==N.runtime?(Oe&&(ue[$]=ue[$]?ue[x]+" "+Oe:Oe),ue[x]=ve):ue[$]=ve,[2,U((0,e.pi)((0,e.pi)({},Q),{request:Z}))]}})})}}}(N),S)}}}},114:(it,K,u)=>{u.d(K,{mV:()=>y,HP:()=>$});var e=u(4929),y=(function(c){function d(p,z){void 0===z&&(z=!0);var S=c.call(this,p)||this;return S.tryNextLink=z,S}(0,e.ZT)(d,c),d.from=function(p,z){return void 0===z&&(z=!0),Object.defineProperty(p,"tryNextLink",{value:z,configurable:!1,enumerable:!1,writable:!1}),p}}(Error),function(c){function d(p,z){void 0===z&&(z=!0);var S=c.call(this,p)||this;return S.tryNextLink=z,S.name="CredentialsProviderError",S}return(0,e.ZT)(d,c),d.from=function(p,z){return void 0===z&&(z=!0),Object.defineProperty(p,"tryNextLink",{value:z,configurable:!1,enumerable:!1,writable:!1}),p},d}(Error)),$=function(c,d,p){var z,S,V,N=function(){return(0,e.mG)(void 0,void 0,void 0,function(){return(0,e.Jh)(this,function(H){switch(H.label){case 0:S||(S=c()),H.label=1;case 1:return H.trys.push([1,,3,4]),[4,S];case 2:return z=H.sent(),V=!0,[3,4];case 3:return S=void 0,[7];case 4:return[2,z]}})})};if(void 0===d)return function(){return(0,e.mG)(void 0,void 0,void 0,function(){return(0,e.Jh)(this,function(H){switch(H.label){case 0:return V?[3,2]:[4,N()];case 1:z=H.sent(),H.label=2;case 2:return[2,z]}})})};var U=!1;return function(){return(0,e.mG)(void 0,void 0,void 0,function(){return(0,e.Jh)(this,function(H){switch(H.label){case 0:return V?[3,2]:[4,N()];case 1:z=H.sent(),H.label=2;case 2:return U?[2,z]:p&&!p(z)?(U=!0,[2,z]):d(z)?[4,N()]:[3,4];case 3:return H.sent(),[2,z];case 4:return[2,z]}})})}}},6510:(it,K,u)=>{u.d(K,{aW:()=>n,Zn:()=>x});var e=u(4929),n=function(){function $(c){this.method=c.method||"GET",this.hostname=c.hostname||"localhost",this.port=c.port,this.query=c.query||{},this.headers=c.headers||{},this.body=c.body,this.protocol=c.protocol?":"!==c.protocol.substr(-1)?c.protocol+":":c.protocol:"https:",this.path=c.path?"/"!==c.path.charAt(0)?"/"+c.path:c.path:"/"}return $.isInstance=function(c){return!!c&&("method"in c&&"protocol"in c&&"hostname"in c&&"path"in c&&"object"==typeof c.query&&"object"==typeof c.headers)},$.prototype.clone=function(){var c=new $((0,e.pi)((0,e.pi)({},this),{headers:(0,e.pi)({},this.headers)}));return c.query&&(c.query=function y($){return Object.keys($).reduce(function(c,d){var p,z=$[d];return(0,e.pi)((0,e.pi)({},c),((p={})[d]=Array.isArray(z)?(0,e.ev)([],(0,e.CR)(z)):z,p))},{})}(c.query)),c},$}(),x=function(){function $(c){this.statusCode=c.statusCode,this.headers=c.headers||{},this.body=c.body}return $.isInstance=function(c){return!!c&&("number"==typeof c.statusCode&&"object"==typeof c.headers)},$}()},2107:(it,K,u)=>{u.d(K,{I:()=>y});var e=u(4929),n=u(2864);function y(x){var $,c,d=[];try{for(var p=(0,e.XA)(Object.keys(x).sort()),z=p.next();!z.done;z=p.next()){var S=z.value,V=x[S];if(S=(0,n.i)(S),Array.isArray(V))for(var N=0,U=V.length;N<U;N++)d.push(S+"="+(0,n.i)(V[N]));else{var H=S;(V||"string"==typeof V)&&(H+="="+(0,n.i)(V)),d.push(H)}}}catch(Q){$={error:Q}}finally{try{z&&!z.done&&(c=p.return)&&c.call(p)}finally{if($)throw $.error}}return d.join("&")}},7193:(it,K,u)=>{u.d(K,{L1:()=>le});var e=u(4929),n=u(9775),$="X-Amz-Date",p="X-Amz-Signature",z="X-Amz-Security-Token",V="authorization",N=$.toLowerCase(),H=[V,N,"date"],Q=p.toLowerCase(),Z="x-amz-content-sha256",ue=z.toLowerCase(),X={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},ee=/^proxy-/,ve=/^sec-/,Le="AWS4-HMAC-SHA256",m="AWS4-HMAC-SHA256-PAYLOAD",_="aws4_request",E={},ne=[],me=function(g,B,de){return g+"/"+B+"/"+de+"/"+_},ze=function(g,B,de){var ye=new g(B);return ye.update(de),ye.digest()},Ge=function(g,B,de){var ye,Me,Qe=g.headers,st={};try{for(var Ut=(0,e.XA)(Object.keys(Qe).sort()),qt=Ut.next();!qt.done;qt=Ut.next()){var Ue=qt.value,Lt=Ue.toLowerCase();(Lt in X||(null==B?void 0:B.has(Lt))||ee.test(Lt)||ve.test(Lt))&&(!de||de&&!de.has(Lt))||(st[Lt]=Qe[Ue].trim().replace(/\s+/g," "))}}catch(zt){ye={error:zt}}finally{try{qt&&!qt.done&&(Me=Ut.return)&&Me.call(Ut)}finally{if(ye)throw ye.error}}return st},xe=u(2864),Xe=u(5068),lt=function(g,B){var de=g.headers,ye=g.body;return(0,e.mG)(void 0,void 0,void 0,function(){var Me,Qe,st,Ut,qt,Ue,Lt;return(0,e.Jh)(this,function(zt){switch(zt.label){case 0:try{for(Me=(0,e.XA)(Object.keys(de)),Qe=Me.next();!Qe.done;Qe=Me.next())if((st=Qe.value).toLowerCase()===Z)return[2,de[st]]}catch($e){Ue={error:$e}}finally{try{Qe&&!Qe.done&&(Lt=Me.return)&&Lt.call(Me)}finally{if(Ue)throw Ue.error}}return null!=ye?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof ye||ArrayBuffer.isView(ye)||(0,Xe.e)(ye)?((Ut=new B).update(ye),qt=n.N,[4,Ut.digest()]):[3,3];case 2:return[2,qt.apply(void 0,[zt.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}})})},Se=function(g){var B=g.headers,de=g.query,ye=(0,e._T)(g,["headers","query"]);return(0,e.pi)((0,e.pi)({},ye),{headers:(0,e.pi)({},B),query:de?he(de):void 0})},he=function(g){return Object.keys(g).reduce(function(B,de){var ye,Me=g[de];return(0,e.pi)((0,e.pi)({},B),((ye={})[de]=Array.isArray(Me)?(0,e.ev)([],(0,e.CR)(Me)):Me,ye))},{})},we=function(g){var B,de;g="function"==typeof g.clone?g.clone():Se(g);try{for(var ye=(0,e.XA)(Object.keys(g.headers)),Me=ye.next();!Me.done;Me=ye.next()){var Qe=Me.value;H.indexOf(Qe.toLowerCase())>-1&&delete g.headers[Qe]}}catch(st){B={error:st}}finally{try{Me&&!Me.done&&(de=ye.return)&&de.call(ye)}finally{if(B)throw B.error}}return g},le=function(){function g(B){var de=B.applyChecksum,ye=B.credentials,Me=B.region,st=B.sha256,Ut=B.uriEscapePath,qt=void 0===Ut||Ut;this.service=B.service,this.sha256=st,this.uriEscapePath=qt,this.applyChecksum="boolean"!=typeof de||de,this.regionProvider=function(g){if("string"==typeof g){var B=Promise.resolve(g);return function(){return B}}return g}(Me),this.credentialProvider=function(g){if("object"==typeof g){var B=Promise.resolve(g);return function(){return B}}return g}(ye)}return g.prototype.presign=function(B,de){return void 0===de&&(de={}),(0,e.mG)(this,void 0,void 0,function(){var ye,Me,Qe,st,Ut,qt,Ue,Lt,zt,$e,Ot,Ke,rt,Be,et,wt,Ft,dn,Vt,ct,kt,Pt,Yt,Bt;return(0,e.Jh)(this,function(pn){switch(pn.label){case 0:return Me=void 0===(ye=de.signingDate)?new Date:ye,st=void 0===(Qe=de.expiresIn)?3600:Qe,Ut=de.unsignableHeaders,qt=de.unhoistableHeaders,Ue=de.signableHeaders,Lt=de.signingRegion,zt=de.signingService,[4,this.credentialProvider()];case 1:return $e=pn.sent(),null==Lt?[3,2]:(Ke=Lt,[3,4]);case 2:return[4,this.regionProvider()];case 3:Ke=pn.sent(),pn.label=4;case 4:return Ot=Ke,rt=D(Me),Be=rt.longDate,et=rt.shortDate,st>604800?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(wt=me(et,Ot,zt??this.service),Ft=function(g,B){var de,ye,Me;void 0===B&&(B={});var Qe="function"==typeof g.clone?g.clone():Se(g),st=Qe.headers,Ut=Qe.query,qt=void 0===Ut?{}:Ut;try{for(var Ue=(0,e.XA)(Object.keys(st)),Lt=Ue.next();!Lt.done;Lt=Ue.next()){var zt=Lt.value,$e=zt.toLowerCase();"x-amz-"===$e.substr(0,6)&&!(null===(Me=B.unhoistableHeaders)||void 0===Me?void 0:Me.has($e))&&(qt[zt]=st[zt],delete st[zt])}}catch(Ot){de={error:Ot}}finally{try{Lt&&!Lt.done&&(ye=Ue.return)&&ye.call(Ue)}finally{if(de)throw de.error}}return(0,e.pi)((0,e.pi)({},g),{headers:st,query:qt})}(we(B),{unhoistableHeaders:qt}),$e.sessionToken&&(Ft.query[z]=$e.sessionToken),Ft.query["X-Amz-Algorithm"]=Le,Ft.query["X-Amz-Credential"]=$e.accessKeyId+"/"+wt,Ft.query[$]=Be,Ft.query["X-Amz-Expires"]=st.toString(10),dn=Ge(Ft,Ut,Ue),Ft.query["X-Amz-SignedHeaders"]=C(dn),Vt=Ft.query,ct=p,kt=this.getSignature,Pt=[Be,wt,this.getSigningKey($e,Ot,et,zt)],Yt=this.createCanonicalRequest,Bt=[Ft,dn],[4,lt(B,this.sha256)]);case 5:return[4,kt.apply(this,Pt.concat([Yt.apply(this,Bt.concat([pn.sent()]))]))];case 6:return Vt[ct]=pn.sent(),[2,Ft]}})})},g.prototype.sign=function(B,de){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(ye){return"string"==typeof B?[2,this.signString(B,de)]:B.headers&&B.payload?[2,this.signEvent(B,de)]:[2,this.signRequest(B,de)]})})},g.prototype.signEvent=function(B,de){var ye=B.headers,Me=B.payload,Qe=de.signingDate,st=void 0===Qe?new Date:Qe,Ut=de.priorSignature,qt=de.signingRegion,Ue=de.signingService;return(0,e.mG)(this,void 0,void 0,function(){var Lt,zt,$e,Ke,rt,Be,et,wt,Ft,dn;return(0,e.Jh)(this,function(Vt){switch(Vt.label){case 0:return null==qt?[3,1]:(zt=qt,[3,3]);case 1:return[4,this.regionProvider()];case 2:zt=Vt.sent(),Vt.label=3;case 3:return Lt=zt,$e=D(st),Ke=$e.longDate,rt=me($e.shortDate,Lt,Ue??this.service),[4,lt({headers:{},body:Me},this.sha256)];case 4:return Be=Vt.sent(),(et=new this.sha256).update(ye),Ft=n.N,[4,et.digest()];case 5:return wt=Ft.apply(void 0,[Vt.sent()]),dn=[m,Ke,rt,Ut,wt,Be].join("\n"),[2,this.signString(dn,{signingDate:st,signingRegion:Lt,signingService:Ue})]}})})},g.prototype.signString=function(B,de){var ye=void 0===de?{}:de,Me=ye.signingDate,Qe=void 0===Me?new Date:Me,st=ye.signingRegion,Ut=ye.signingService;return(0,e.mG)(this,void 0,void 0,function(){var qt,Ue,Lt,zt,$e,Ot,Ke,rt;return(0,e.Jh)(this,function(Be){switch(Be.label){case 0:return[4,this.credentialProvider()];case 1:return qt=Be.sent(),null==st?[3,2]:(Lt=st,[3,4]);case 2:return[4,this.regionProvider()];case 3:Lt=Be.sent(),Be.label=4;case 4:return Ue=Lt,zt=D(Qe).shortDate,Ke=(Ot=this.sha256).bind,[4,this.getSigningKey(qt,Ue,zt,Ut)];case 5:return($e=new(Ke.apply(Ot,[void 0,Be.sent()]))).update(B),rt=n.N,[4,$e.digest()];case 6:return[2,rt.apply(void 0,[Be.sent()])]}})})},g.prototype.signRequest=function(B,de){var ye=void 0===de?{}:de,Me=ye.signingDate,Qe=void 0===Me?new Date:Me,st=ye.signableHeaders,Ut=ye.unsignableHeaders,qt=ye.signingRegion,Ue=ye.signingService;return(0,e.mG)(this,void 0,void 0,function(){var Lt,zt,$e,Ot,Ke,rt,Be,et,wt,Ft,dn;return(0,e.Jh)(this,function(Vt){switch(Vt.label){case 0:return[4,this.credentialProvider()];case 1:return Lt=Vt.sent(),null==qt?[3,2]:($e=qt,[3,4]);case 2:return[4,this.regionProvider()];case 3:$e=Vt.sent(),Vt.label=4;case 4:return zt=$e,Ot=we(B),Ke=D(Qe),rt=Ke.longDate,et=me(Be=Ke.shortDate,zt,Ue??this.service),Ot.headers[N]=rt,Lt.sessionToken&&(Ot.headers[ue]=Lt.sessionToken),[4,lt(Ot,this.sha256)];case 5:return wt=Vt.sent(),!function(g,B){var de,ye;g=g.toLowerCase();try{for(var Me=(0,e.XA)(Object.keys(B)),Qe=Me.next();!Qe.done;Qe=Me.next())if(g===Qe.value.toLowerCase())return!0}catch(Ut){de={error:Ut}}finally{try{Qe&&!Qe.done&&(ye=Me.return)&&ye.call(Me)}finally{if(de)throw de.error}}return!1}(Z,Ot.headers)&&this.applyChecksum&&(Ot.headers[Z]=wt),Ft=Ge(Ot,Ut,st),[4,this.getSignature(rt,et,this.getSigningKey(Lt,zt,Be,Ue),this.createCanonicalRequest(Ot,Ft,wt))];case 6:return dn=Vt.sent(),Ot.headers[V]=Le+" Credential="+Lt.accessKeyId+"/"+et+", SignedHeaders="+C(Ft)+", Signature="+dn,[2,Ot]}})})},g.prototype.createCanonicalRequest=function(B,de,ye){var Me=Object.keys(de).sort();return B.method+"\n"+this.getCanonicalPath(B)+"\n"+function(g){var B,de,ye=g.query,Me=void 0===ye?{}:ye,Qe=[],st={},Ut=function(zt){if(zt.toLowerCase()===Q)return"continue";Qe.push(zt);var $e=Me[zt];"string"==typeof $e?st[zt]=(0,xe.i)(zt)+"="+(0,xe.i)($e):Array.isArray($e)&&(st[zt]=$e.slice(0).sort().reduce(function(Ot,Ke){return Ot.concat([(0,xe.i)(zt)+"="+(0,xe.i)(Ke)])},[]).join("&"))};try{for(var qt=(0,e.XA)(Object.keys(Me).sort()),Ue=qt.next();!Ue.done;Ue=qt.next())Ut(Ue.value)}catch(zt){B={error:zt}}finally{try{Ue&&!Ue.done&&(de=qt.return)&&de.call(qt)}finally{if(B)throw B.error}}return Qe.map(function(zt){return st[zt]}).filter(function(zt){return zt}).join("&")}(B)+"\n"+Me.map(function(Qe){return Qe+":"+de[Qe]}).join("\n")+"\n\n"+Me.join(";")+"\n"+ye},g.prototype.createStringToSign=function(B,de,ye){return(0,e.mG)(this,void 0,void 0,function(){var Me,Qe;return(0,e.Jh)(this,function(st){switch(st.label){case 0:return(Me=new this.sha256).update(ye),[4,Me.digest()];case 1:return Qe=st.sent(),[2,Le+"\n"+B+"\n"+de+"\n"+(0,n.N)(Qe)]}})})},g.prototype.getCanonicalPath=function(B){var de,ye,Me=B.path;if(this.uriEscapePath){var Qe=[];try{for(var st=(0,e.XA)(Me.split("/")),Ut=st.next();!Ut.done;Ut=st.next()){var qt=Ut.value;0!==(null==qt?void 0:qt.length)&&"."!==qt&&(".."===qt?Qe.pop():Qe.push(qt))}}catch(zt){de={error:zt}}finally{try{Ut&&!Ut.done&&(ye=st.return)&&ye.call(st)}finally{if(de)throw de.error}}var Ue=((null==Me?void 0:Me.startsWith("/"))?"/":"")+Qe.join("/")+(Qe.length>0&&(null==Me?void 0:Me.endsWith("/"))?"/":"");return encodeURIComponent(Ue).replace(/%2F/g,"/")}return Me},g.prototype.getSignature=function(B,de,ye,Me){return(0,e.mG)(this,void 0,void 0,function(){var Qe,st,Ut,qt,Ue;return(0,e.Jh)(this,function(Lt){switch(Lt.label){case 0:return[4,this.createStringToSign(B,de,Me)];case 1:return Qe=Lt.sent(),qt=(Ut=this.sha256).bind,[4,ye];case 2:return(st=new(qt.apply(Ut,[void 0,Lt.sent()]))).update(Qe),Ue=n.N,[4,st.digest()];case 3:return[2,Ue.apply(void 0,[Lt.sent()])]}})})},g.prototype.getSigningKey=function(B,de,ye,Me){return function(g,B,de,ye,Me){return(0,e.mG)(void 0,void 0,void 0,function(){var Qe,st,Ut,qt,Ue,zt,$e,Ot;return(0,e.Jh)(this,function(Ke){switch(Ke.label){case 0:return[4,ze(g,B.secretAccessKey,B.accessKeyId)];case 1:if(Qe=Ke.sent(),(st=de+":"+ye+":"+Me+":"+(0,n.N)(Qe)+":"+B.sessionToken)in E)return[2,E[st]];for(ne.push(st);ne.length>50;)delete E[ne.shift()];Ut="AWS4"+B.secretAccessKey,Ke.label=2;case 2:Ke.trys.push([2,7,8,9]),qt=(0,e.XA)([de,ye,Me,_]),Ue=qt.next(),Ke.label=3;case 3:return Ue.done?[3,6]:[4,ze(g,Ut,Ue.value)];case 4:Ut=Ke.sent(),Ke.label=5;case 5:return Ue=qt.next(),[3,3];case 6:return[3,9];case 7:return zt=Ke.sent(),$e={error:zt},[3,9];case 8:try{Ue&&!Ue.done&&(Ot=qt.return)&&Ot.call(qt)}finally{if($e)throw $e.error}return[7];case 9:return[2,E[st]=Ut]}})})}(this.sha256,B,ye,de,Me||this.service)},g}(),D=function(g){var B=function(g){return function(g){return"number"==typeof g?new Date(1e3*g):"string"==typeof g?Number(g)?new Date(1e3*Number(g)):new Date(g):g}(g).toISOString().replace(/\.\d{3}Z$/,"Z")}(g).replace(/[\-:]/g,"");return{longDate:B,shortDate:B.substr(0,8)}},C=function(g){return Object.keys(g).sort().join(";")}},4198:(it,K,u)=>{u.d(K,{KU:()=>$,mY:()=>c,oc:()=>d,sI:()=>st,_w:()=>He,to:()=>Ut,CE:()=>ee,Fx:()=>S,Wh:()=>ve,pY:()=>Oe,jc:()=>qt,sT:()=>Ue,jv:()=>Qe,gx:()=>p,KX:()=>Je,oT:()=>Fe});var e=u(4929),n=function(){var $e=[],Ot=[],Ke=new Set,wt=function(ct){return $e.forEach(function(kt){ct.add(kt.middleware,(0,e.pi)({},kt))}),Ot.forEach(function(kt){ct.addRelativeTo(kt.middleware,(0,e.pi)({},kt))}),ct},Ft=function(ct){var kt=[];return ct.before.forEach(function(Pt){0===Pt.before.length&&0===Pt.after.length?kt.push(Pt):kt.push.apply(kt,(0,e.ev)([],(0,e.CR)(Ft(Pt))))}),kt.push(ct),ct.after.reverse().forEach(function(Pt){0===Pt.before.length&&0===Pt.after.length?kt.push(Pt):kt.push.apply(kt,(0,e.ev)([],(0,e.CR)(Ft(Pt))))}),kt},Vt={add:function(ct,kt){void 0===kt&&(kt={});var Pt=kt.name,Yt=kt.override,Bt=(0,e.pi)({step:"initialize",priority:"normal",middleware:ct},kt);if(Pt){if(Ke.has(Pt)){if(!Yt)throw new Error("Duplicate middleware name '"+Pt+"'");var pn=$e.findIndex(function(Cn){return Cn.name===Pt}),_n=$e[pn];if(_n.step!==Bt.step||_n.priority!==Bt.priority)throw new Error('"'+Pt+'" middleware with '+_n.priority+" priority in "+_n.step+" step cannot be overridden by same-name middleware with "+Bt.priority+" priority in "+Bt.step+" step.");$e.splice(pn,1)}Ke.add(Pt)}$e.push(Bt)},addRelativeTo:function(ct,kt){var Pt=kt.name,Yt=kt.override,Bt=(0,e.pi)({middleware:ct},kt);if(Pt){if(Ke.has(Pt)){if(!Yt)throw new Error("Duplicate middleware name '"+Pt+"'");var pn=Ot.findIndex(function(Cn){return Cn.name===Pt}),_n=Ot[pn];if(_n.toMiddleware!==Bt.toMiddleware||_n.relation!==Bt.relation)throw new Error('"'+Pt+'" middleware '+_n.relation+' "'+_n.toMiddleware+'" middleware cannot be overridden by same-name middleware '+Bt.relation+' "'+Bt.toMiddleware+'" middleware.');Ot.splice(pn,1)}Ke.add(Pt)}Ot.push(Bt)},clone:function(){return wt(n())},use:function(ct){ct.applyToStack(Vt)},remove:function(ct){return"string"==typeof ct?function(ct){var kt=!1,Pt=function(Yt){return!Yt.name||Yt.name!==ct||(kt=!0,Ke.delete(ct),!1)};return $e=$e.filter(Pt),Ot=Ot.filter(Pt),kt}(ct):function(ct){var kt=!1,Pt=function(Yt){return Yt.middleware!==ct||(kt=!0,Yt.name&&Ke.delete(Yt.name),!1)};return $e=$e.filter(Pt),Ot=Ot.filter(Pt),kt}(ct)},removeByTag:function(ct){var kt=!1,Pt=function(Yt){var Bt=Yt.tags,pn=Yt.name;return!Bt||!Bt.includes(ct)||(pn&&Ke.delete(pn),kt=!0,!1)};return $e=$e.filter(Pt),Ot=Ot.filter(Pt),kt},concat:function(ct){var kt=wt(n());return kt.use(ct),kt},applyToStack:wt,resolve:function(ct,kt){var Pt,Yt;try{for(var Bt=(0,e.XA)(function(){var ct=[],kt=[],Pt={};$e.forEach(function(Bt){var pn=(0,e.pi)((0,e.pi)({},Bt),{before:[],after:[]});pn.name&&(Pt[pn.name]=pn),ct.push(pn)}),Ot.forEach(function(Bt){var pn=(0,e.pi)((0,e.pi)({},Bt),{before:[],after:[]});pn.name&&(Pt[pn.name]=pn),kt.push(pn)}),kt.forEach(function(Bt){if(Bt.toMiddleware){var pn=Pt[Bt.toMiddleware];if(void 0===pn)throw new Error(Bt.toMiddleware+" is not found when adding "+(Bt.name||"anonymous")+" middleware "+Bt.relation+" "+Bt.toMiddleware);"after"===Bt.relation&&pn.after.push(Bt),"before"===Bt.relation&&pn.before.push(Bt)}});var Yt=function(ct){return ct.sort(function(kt,Pt){return y[Pt.step]-y[kt.step]||x[Pt.priority||"normal"]-x[kt.priority||"normal"]})}(ct).map(Ft).reduce(function(Bt,pn){return Bt.push.apply(Bt,(0,e.ev)([],(0,e.CR)(pn))),Bt},[]);return Yt.map(function(Bt){return Bt.middleware})}().reverse()),pn=Bt.next();!pn.done;pn=Bt.next())ct=(0,pn.value)(ct,kt)}catch(Cn){Pt={error:Cn}}finally{try{pn&&!pn.done&&(Yt=Bt.return)&&Yt.call(Bt)}finally{if(Pt)throw Pt.error}}return ct}};return Vt},y={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},x={high:3,normal:2,low:1},$=function(){function $e(Ot){this.middlewareStack=n(),this.config=Ot}return $e.prototype.send=function(Ot,Ke,rt){var et="function"==typeof Ke?Ke:rt,wt=Ot.resolveMiddleware(this.middlewareStack,this.config,"function"!=typeof Ke?Ke:void 0);if(!et)return wt(Ot).then(function(Ft){return Ft.output});wt(Ot).then(function(Ft){return et(null,Ft.output)},function(Ft){return et(Ft)}).catch(function(){})},$e.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},$e}(),c=function $e(){this.middlewareStack=n()},d="***SensitiveInformation***",p=function($e){switch($e){case"true":return!0;case"false":return!1;default:throw new Error('Unable to parse boolean value "'+$e+'"')}},S=function($e){if(null!=$e){if("number"==typeof $e)return $e;throw new TypeError("Expected number, got "+typeof $e)}},V=Math.ceil(Math.pow(2,127)*(2-Math.pow(2,-23))),G=function($e,Ot){var Ke=function($e){if(null!=$e){if(Number.isInteger($e)&&!Number.isNaN($e))return $e;throw new TypeError("Expected integer, got "+typeof $e)}}($e);if(void 0!==Ke&&X(Ke,Ot)!==Ke)throw new TypeError("Expected "+Ot+"-bit integer, got "+$e);return Ke},X=function($e,Ot){switch(Ot){case 32:return Int32Array.of($e)[0];case 16:return Int16Array.of($e)[0];case 8:return Int8Array.of($e)[0]}},ee=function($e,Ot){if(null==$e)throw Ot?new TypeError("Expected a non-null value for "+Ot):new TypeError("Expected a non-null value");return $e},ve=function($e){if(null!=$e){if("object"==typeof $e&&!Array.isArray($e))return $e;throw new TypeError("Expected object, got "+typeof $e)}},Oe=function($e){if(null!=$e){if("string"==typeof $e)return $e;throw new TypeError("Expected string, got "+typeof $e)}},b=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,_=function($e){var Ot=$e.match(b);if(null===Ot||Ot[0].length!==$e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat($e)},xe=function($e){return function($e){return G($e,16)}("string"==typeof $e?_($e):$e)},Xe=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],lt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function He($e){var Ot=$e.getUTCFullYear(),Ke=$e.getUTCMonth(),rt=$e.getUTCDay(),Be=$e.getUTCDate(),et=$e.getUTCHours(),wt=$e.getUTCMinutes(),Ft=$e.getUTCSeconds();return Xe[rt]+", "+(Be<10?"0"+Be:""+Be)+" "+lt[Ke]+" "+Ot+" "+(et<10?"0"+et:""+et)+":"+(wt<10?"0"+wt:""+wt)+":"+(Ft<10?"0"+Ft:""+Ft)+" GMT"}var Se=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),he=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),pe=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),Fe=function($e){if(null!=$e){if("string"!=typeof $e)throw new TypeError("RFC-7231 date-times must be expressed as strings");var Ot=Se.exec($e);if(Ot){var Ke=(0,e.CR)(Ot,8),Be=Ke[1],et=Ke[2],Ft=Ke[4],dn=Ke[5],Vt=Ke[6],ct=Ke[7];return we(xe(Me(Ke[3])),D(et),de(Be,"day",1,31),{hours:Ft,minutes:dn,seconds:Vt,fractionalMilliseconds:ct})}if(Ot=he.exec($e)){var kt=(0,e.CR)(Ot,8);return Be=kt[1],et=kt[2],Ft=kt[4],dn=kt[5],Vt=kt[6],ct=kt[7],le(we(De(kt[3]),D(et),de(Be,"day",1,31),{hours:Ft,minutes:dn,seconds:Vt,fractionalMilliseconds:ct}))}if(Ot=pe.exec($e)){var Yt=(0,e.CR)(Ot,8);return et=Yt[1],Be=Yt[2],Ft=Yt[3],dn=Yt[4],Vt=Yt[5],ct=Yt[6],we(xe(Me(Yt[7])),D(et),de(Be.trimLeft(),"day",1,31),{hours:Ft,minutes:dn,seconds:Vt,fractionalMilliseconds:ct})}throw new TypeError("Invalid RFC-7231 date-time value")}},Je=function($e){if(null!=$e){var Ot;if("number"==typeof $e)Ot=$e;else{if("string"!=typeof $e)throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");Ot=function($e){return S("string"==typeof $e?_($e):$e)}($e)}if(Number.isNaN(Ot)||Ot===1/0||Ot===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(1e3*Ot))}},we=function($e,Ot,Ke,rt){var Be=Ot-1;return g($e,Be,Ke),new Date(Date.UTC($e,Be,Ke,de(rt.hours,"hour",0,23),de(rt.minutes,"minute",0,59),de(rt.seconds,"seconds",0,60),ye(rt.fractionalMilliseconds)))},De=function($e){var Ot=(new Date).getUTCFullYear(),Ke=100*Math.floor(Ot/100)+xe(Me($e));return Ke<Ot?Ke+100:Ke},le=function($e){return $e.getTime()-(new Date).getTime()>15768e8?new Date(Date.UTC($e.getUTCFullYear()-100,$e.getUTCMonth(),$e.getUTCDate(),$e.getUTCHours(),$e.getUTCMinutes(),$e.getUTCSeconds(),$e.getUTCMilliseconds())):$e},D=function($e){var Ot=lt.indexOf($e);if(Ot<0)throw new TypeError("Invalid month: "+$e);return Ot+1},C=[31,28,31,30,31,30,31,31,30,31,30,31],g=function($e,Ot,Ke){var rt=C[Ot];if(1===Ot&&B($e)&&(rt=29),Ke>rt)throw new TypeError("Invalid day for "+lt[Ot]+" in "+$e+": "+Ke)},B=function($e){return $e%4==0&&($e%100!=0||$e%400==0)},de=function($e,Ot,Ke,rt){var Be=function($e){return function($e){return G($e,8)}("string"==typeof $e?_($e):$e)}(Me($e));if(Be<Ke||Be>rt)throw new TypeError(Ot+" must be between "+Ke+" and "+rt+", inclusive");return Be},ye=function($e){return null==$e?0:1e3*function($e){return function($e){var Ot=S($e);if(void 0!==Ot&&!Number.isNaN(Ot)&&Ot!==1/0&&Ot!==-1/0&&Math.abs(Ot)>V)throw new TypeError("Expected 32-bit float, got "+$e);return Ot}("string"==typeof $e?_($e):$e)}("0."+$e)},Me=function($e){for(var Ot=0;Ot<$e.length-1&&"0"===$e.charAt(Ot);)Ot++;return 0===Ot?$e:$e.slice(Ot)},Qe=function($e){switch($e){case"standard":case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},st=function($e){function Ot(Ke){var rt=$e.call(this,Ke.message)||this;return Object.setPrototypeOf(rt,Ot.prototype),rt.name=Ke.name,rt.$fault=Ke.$fault,rt.$metadata=Ke.$metadata,rt}return(0,e.ZT)(Ot,$e),Ot}(Error),Ut=function($e,Ot){return void 0===Ot&&(Ot={}),Object.entries(Ot).filter(function(rt){return void 0!==(0,e.CR)(rt,2)[1]}).forEach(function(rt){var Be=(0,e.CR)(rt,2),et=Be[0];(null==$e[et]||""===$e[et])&&($e[et]=Be[1])}),$e.message=$e.message||$e.Message||"UnknownError",delete $e.Message,$e};function qt($e){return encodeURIComponent($e).replace(/[!'()*]/g,function(Ot){return"%"+Ot.charCodeAt(0).toString(16).toUpperCase()})}var Ue=function($e){for(var Ke in $e)$e.hasOwnProperty(Ke)&&void 0!==$e[Ke]["#text"]?$e[Ke]=$e[Ke]["#text"]:"object"==typeof $e[Ke]&&null!==$e[Ke]&&($e[Ke]=Ue($e[Ke]));return $e},Lt=function(){var $e=Object.getPrototypeOf(this).constructor,Ot=Function.bind.apply(String,(0,e.ev)([null],(0,e.CR)(arguments))),Ke=new Ot;return Object.setPrototypeOf(Ke,$e.prototype),Ke};Lt.prototype=Object.create(String.prototype,{constructor:{value:Lt,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(Lt,String),function($e){function Ot(){return null!==$e&&$e.apply(this,arguments)||this}(0,e.ZT)(Ot,$e),Ot.prototype.deserializeJSON=function(){return JSON.parse($e.prototype.toString.call(this))},Ot.prototype.toJSON=function(){return $e.prototype.toString.call(this)},Ot.fromObject=function(Ke){return Ke instanceof Ot?Ke:new Ot(Ke instanceof String||"string"==typeof Ke?Ke:JSON.stringify(Ke))}}(Lt)},4707:(it,K,u)=>{u.d(K,{e:()=>y});var e=u(4929),y=function(x){var V,$=new URL(x),c=$.hostname,d=$.pathname,p=$.port,z=$.protocol,S=$.search;return S&&(V=function n(x){var $,c,d={};if(x=x.replace(/^\?/,""))try{for(var p=(0,e.XA)(x.split("&")),z=p.next();!z.done;z=p.next()){var V=(0,e.CR)(z.value.split("="),2),N=V[0],U=V[1],H=void 0===U?null:U;N=decodeURIComponent(N),H&&(H=decodeURIComponent(H)),N in d?Array.isArray(d[N])?d[N].push(H):d[N]=[d[N],H]:d[N]=H}}catch(Q){$={error:Q}}finally{try{z&&!z.done&&(c=p.return)&&c.call(p)}finally{if($)throw $.error}}return d}(S)),{hostname:c,port:p?parseInt(p):void 0,protocol:z,path:d,query:V}}},1187:(it,K,u)=>{u.d(K,{G:()=>V,s:()=>N});for(var e={},n=new Array(64),y=0,x="A".charCodeAt(0),$="Z".charCodeAt(0);y+x<=$;y++){var c=String.fromCharCode(y+x);e[c]=y,n[y]=c}for(y=0,x="a".charCodeAt(0),$="z".charCodeAt(0);y+x<=$;y++)c=String.fromCharCode(y+x),e[c]=d=y+26,n[d]=c;for(y=0;y<10;y++){var d;e[y.toString(10)]=y+52,c=y.toString(10),e[c]=d=y+52,n[d]=c}function V(U){var H=U.length/4*3;"=="===U.substr(-2)?H-=2:"="===U.substr(-1)&&H--;for(var Q=new ArrayBuffer(H),Z=new DataView(Q),ue=0;ue<U.length;ue+=4){for(var G=0,X=0,ee=ue,ve=ue+3;ee<=ve;ee++)if("="!==U[ee]){if(!(U[ee]in e))throw new TypeError("Invalid character "+U[ee]+" in base64 string.");G|=e[U[ee]]<<6*(ve-ee),X+=6}else G>>=6;var Oe=ue/4*3;G>>=X%8;for(var Le=Math.floor(X/8),be=0;be<Le;be++){var m=8*(Le-be-1);Z.setUint8(Oe+be,(G&255<<m)>>m)}}return new Uint8Array(Q)}function N(U){for(var H="",Q=0;Q<U.length;Q+=3){for(var Z=0,ue=0,G=Q,X=Math.min(Q+3,U.length);G<X;G++)Z|=U[G]<<8*(X-G-1),ue+=8;var ee=Math.ceil(ue/6);Z<<=6*ee-ue;for(var ve=1;ve<=ee;ve++){var Oe=6*(ee-ve);H+=n[(Z&63<<Oe)>>Oe]}H+="==".slice(0,4-ee)}return H}e["+"]=62,n[62]="+",e["/"]=63,n[63]="/"},2845:(it,K,u)=>{u.d(K,{W:()=>e});var e=function(n){if("string"==typeof n){for(var y=n.length,x=y-1;x>=0;x--){var $=n.charCodeAt(x);$>127&&$<=2047?y++:$>2047&&$<=65535&&(y+=2)}return y}if("number"==typeof n.byteLength)return n.byteLength;if("number"==typeof n.size)return n.size;throw new Error("Body Length computation failed for "+n)}},9709:(it,K,u)=>{u.d(K,{B:()=>e,h:()=>n});var e=(()=>{return(y=e||(e={})).ENV="env",y.CONFIG="shared config entry",e;var y})(),n=function(y,x,$){if(x in y){if("true"===y[x])return!0;if("false"===y[x])return!1;throw new Error("Cannot load "+$+' "'+x+'". Expected "true" or "false", got '+y[x]+".")}}},8959:(it,K,u)=>{u.d(K,{j:()=>c});var e=u(4929),n=u(114),y=u(3962),x=u.n(y),$=["in-region","cross-region","mobile","standard","legacy"],c=function(p){var S=(void 0===p?{}:p).defaultsMode;return(0,n.HP)(function(){return(0,e.mG)(void 0,void 0,void 0,function(){var V,N;return(0,e.Jh)(this,function(U){switch(U.label){case 0:return"function"!=typeof S?[3,2]:[4,S()];case 1:return N=U.sent(),[3,3];case 2:N=S,U.label=3;case 3:switch(null==(V=N)?void 0:V.toLowerCase()){case"auto":return[2,Promise.resolve(d()?"mobile":"standard")];case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return[2,Promise.resolve(null==V?void 0:V.toLocaleLowerCase())];case void 0:return[2,Promise.resolve("legacy")];default:throw new Error('Invalid parameter for "defaultsMode", expect '+$.join(", ")+", got "+V)}return[2]}})})})},d=function(){var p,z,S="undefined"!=typeof window&&(null===(p=null==window?void 0:window.navigator)||void 0===p?void 0:p.userAgent)?x().parse(window.navigator.userAgent):void 0,V=null===(z=null==S?void 0:S.platform)||void 0===z?void 0:z.type;return"tablet"===V||"mobile"===V}},9775:(it,K,u)=>{u.d(K,{H:()=>$,N:()=>c});for(var e={},n={},y=0;y<256;y++){var x=y.toString(16).toLowerCase();1===x.length&&(x="0"+x),e[y]=x,n[x]=y}function $(d){if(d.length%2!=0)throw new Error("Hex encoded strings must have an even number length");for(var p=new Uint8Array(d.length/2),z=0;z<d.length;z+=2){var S=d.substr(z,2).toLowerCase();if(!(S in n))throw new Error("Cannot decode unrecognized sequence "+S+" as hexadecimal");p[z/2]=n[S]}return p}function c(d){for(var p="",z=0;z<d.byteLength;z++)p+=e[d[z]];return p}},5468:(it,K,u)=>{u.r(K),u.d(K,{locateWindow:()=>n});var e={};function n(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:e}},2864:(it,K,u)=>{u.d(K,{i:()=>e});var e=function(y){return encodeURIComponent(y).replace(/[!'()*]/g,n)},n=function(y){return"%"+y.charCodeAt(0).toString(16).toUpperCase()}},3018:(it,K,u)=>{u.d(K,{f:()=>x});var e=u(4929),n=u(3962),y=u.n(n),x=function($){var c=$.serviceId,d=$.clientVersion;return function(){return(0,e.mG)(void 0,void 0,void 0,function(){var p,z,S,V,N,U,H,Q,Z;return(0,e.Jh)(this,function(ue){return p="undefined"!=typeof window&&(null===(S=null==window?void 0:window.navigator)||void 0===S?void 0:S.userAgent)?y().parse(window.navigator.userAgent):void 0,z=[["aws-sdk-js",d],["os/"+((null===(V=null==p?void 0:p.os)||void 0===V?void 0:V.name)||"other"),null===(N=null==p?void 0:p.os)||void 0===N?void 0:N.version],["lang/js"],["md/browser",(null!==(H=null===(U=null==p?void 0:p.browser)||void 0===U?void 0:U.name)&&void 0!==H?H:"unknown")+"_"+(null!==(Z=null===(Q=null==p?void 0:p.browser)||void 0===Q?void 0:Q.version)&&void 0!==Z?Z:"unknown")]],c&&z.push(["api/"+c,d]),[2,z]})})}}},2093:(it,K,u)=>{u.r(K),u.d(K,{fromUtf8:()=>$,toUtf8:()=>c});var $=function(d){return"function"==typeof TextEncoder?function y(d){return(new TextEncoder).encode(d)}(d):function(d){for(var p=[],z=0,S=d.length;z<S;z++){var V=d.charCodeAt(z);if(V<128)p.push(V);else if(V<2048)p.push(V>>6|192,63&V|128);else if(z+1<d.length&&55296==(64512&V)&&56320==(64512&d.charCodeAt(z+1))){var N=65536+((1023&V)<<10)+(1023&d.charCodeAt(++z));p.push(N>>18|240,N>>12&63|128,N>>6&63|128,63&N|128)}else p.push(V>>12|224,V>>6&63|128,63&V|128)}return Uint8Array.from(p)}(d)},c=function(d){return"function"==typeof TextDecoder?function x(d){return new TextDecoder("utf-8").decode(d)}(d):function(d){for(var p="",z=0,S=d.length;z<S;z++){var V=d[z];if(V<128)p+=String.fromCharCode(V);else if(192<=V&&V<224){var N=d[++z];p+=String.fromCharCode((31&V)<<6|63&N)}else if(240<=V&&V<365){var H="%"+[V,d[++z],d[++z],d[++z]].map(function(Q){return Q.toString(16)}).join("%");p+=decodeURIComponent(H)}else p+=String.fromCharCode((15&V)<<12|(63&d[++z])<<6|63&d[++z])}return p}(d)}},7006:function(it,K,u){var e;!function(n,y){"use strict";var d="function",p="undefined",z="object",S="string",N="model",U="name",H="type",Q="vendor",Z="version",ue="architecture",G="console",X="mobile",ee="tablet",ve="smarttv",Oe="wearable",Le="embedded",m="Amazon",P="Apple",b="ASUS",_="BlackBerry",R="Browser",E="Chrome",me="Firefox",Ee="Google",Ge="Microsoft",xe="Motorola",qe="Opera",Xe="Samsung",lt="Sony",Ye="Zebra",ht="Facebook",he=function(ye){for(var Me={},Qe=0;Qe<ye.length;Qe++)Me[ye[Qe].toUpperCase()]=ye[Qe];return Me},pe=function(ye,Me){return typeof ye===S&&-1!==Fe(Me).indexOf(Fe(ye))},Fe=function(ye){return ye.toLowerCase()},we=function(ye,Me){if(typeof ye===S)return ye=ye.replace(/^\s\s*/,"").replace(/\s\s*$/,""),typeof Me===p?ye:ye.substring(0,255)},De=function(ye,Me){for(var st,Ut,qt,Ue,Lt,zt,Qe=0;Qe<Me.length&&!Lt;){var $e=Me[Qe],Ot=Me[Qe+1];for(st=Ut=0;st<$e.length&&!Lt;)if(Lt=$e[st++].exec(ye))for(qt=0;qt<Ot.length;qt++)zt=Lt[++Ut],typeof(Ue=Ot[qt])===z&&Ue.length>0?2===Ue.length?this[Ue[0]]=typeof Ue[1]==d?Ue[1].call(this,zt):Ue[1]:3===Ue.length?this[Ue[0]]=typeof Ue[1]!==d||Ue[1].exec&&Ue[1].test?zt?zt.replace(Ue[1],Ue[2]):y:zt?Ue[1].call(this,zt,Ue[2]):y:4===Ue.length&&(this[Ue[0]]=zt?Ue[3].call(this,zt.replace(Ue[1],Ue[2])):y):this[Ue]=zt||y;Qe+=2}},ut=function(ye,Me){for(var Qe in Me)if(typeof Me[Qe]===z&&Me[Qe].length>0){for(var st=0;st<Me[Qe].length;st++)if(pe(Me[Qe][st],ye))return"?"===Qe?y:Qe}else if(pe(Me[Qe],ye))return"?"===Qe?y:Qe;return ye},D={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},C={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[Z,[U,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[Z,[U,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[U,Z],[/opios[\/ ]+([\w\.]+)/i],[Z,[U,qe+" Mini"]],[/\bopr\/([\w\.]+)/i],[Z,[U,qe]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[U,Z],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[Z,[U,"UC"+R]],[/\bqbcore\/([\w\.]+)/i],[Z,[U,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[Z,[U,"WeChat"]],[/konqueror\/([\w\.]+)/i],[Z,[U,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[Z,[U,"IE"]],[/yabrowser\/([\w\.]+)/i],[Z,[U,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[U,/(.+)/,"$1 Secure "+R],Z],[/\bfocus\/([\w\.]+)/i],[Z,[U,me+" Focus"]],[/\bopt\/([\w\.]+)/i],[Z,[U,qe+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[Z,[U,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[Z,[U,"Dolphin"]],[/coast\/([\w\.]+)/i],[Z,[U,qe+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[Z,[U,"MIUI "+R]],[/fxios\/([-\w\.]+)/i],[Z,[U,me]],[/\bqihu|(qi?ho?o?|360)browser/i],[[U,"360 "+R]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[U,/(.+)/,"$1 "+R],Z],[/(comodo_dragon)\/([\w\.]+)/i],[[U,/_/g," "],Z],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[U,Z],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[U],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[U,ht],Z],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[U,Z],[/\bgsa\/([\w\.]+) .*safari\//i],[Z,[U,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[Z,[U,E+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[U,E+" WebView"],Z],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[Z,[U,"Android "+R]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[U,Z],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[Z,[U,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[Z,U],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[U,[Z,ut,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[U,Z],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[U,"Netscape"],Z],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[Z,[U,me+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[U,Z]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[ue,"amd64"]],[/(ia32(?=;))/i],[[ue,Fe]],[/((?:i[346]|x)86)[;\)]/i],[[ue,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[ue,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[ue,"armhf"]],[/windows (ce|mobile); ppc;/i],[[ue,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[ue,/ower/,"",Fe]],[/(sun4\w)[;\)]/i],[[ue,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[ue,Fe]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[N,[Q,Xe],[H,ee]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[N,[Q,Xe],[H,X]],[/\((ip(?:hone|od)[\w ]*);/i],[N,[Q,P],[H,X]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[N,[Q,P],[H,ee]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[N,[Q,"Huawei"],[H,ee]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[N,[Q,"Huawei"],[H,X]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[N,/_/g," "],[Q,"Xiaomi"],[H,X]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[N,/_/g," "],[Q,"Xiaomi"],[H,ee]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[N,[Q,"OPPO"],[H,X]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[N,[Q,"Vivo"],[H,X]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[N,[Q,"Realme"],[H,X]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[N,[Q,xe],[H,X]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[N,[Q,xe],[H,ee]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[N,[Q,"LG"],[H,ee]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[N,[Q,"LG"],[H,X]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[N,[Q,"Lenovo"],[H,ee]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[N,/_/g," "],[Q,"Nokia"],[H,X]],[/(pixel c)\b/i],[N,[Q,Ee],[H,ee]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[N,[Q,Ee],[H,X]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[N,[Q,lt],[H,X]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[N,"Xperia Tablet"],[Q,lt],[H,ee]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[N,[Q,"OnePlus"],[H,X]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[N,[Q,m],[H,ee]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[N,/(.+)/g,"Fire Phone $1"],[Q,m],[H,X]],[/(playbook);[-\w\),; ]+(rim)/i],[N,Q,[H,ee]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[N,[Q,_],[H,X]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[N,[Q,b],[H,ee]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[N,[Q,b],[H,X]],[/(nexus 9)/i],[N,[Q,"HTC"],[H,ee]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[Q,[N,/_/g," "],[H,X]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[N,[Q,"Acer"],[H,ee]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[N,[Q,"Meizu"],[H,X]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[N,[Q,"Sharp"],[H,X]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[Q,N,[H,X]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[Q,N,[H,ee]],[/(surface duo)/i],[N,[Q,Ge],[H,ee]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[N,[Q,"Fairphone"],[H,X]],[/(u304aa)/i],[N,[Q,"AT&T"],[H,X]],[/\bsie-(\w*)/i],[N,[Q,"Siemens"],[H,X]],[/\b(rct\w+) b/i],[N,[Q,"RCA"],[H,ee]],[/\b(venue[\d ]{2,7}) b/i],[N,[Q,"Dell"],[H,ee]],[/\b(q(?:mv|ta)\w+) b/i],[N,[Q,"Verizon"],[H,ee]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[N,[Q,"Barnes & Noble"],[H,ee]],[/\b(tm\d{3}\w+) b/i],[N,[Q,"NuVision"],[H,ee]],[/\b(k88) b/i],[N,[Q,"ZTE"],[H,ee]],[/\b(nx\d{3}j) b/i],[N,[Q,"ZTE"],[H,X]],[/\b(gen\d{3}) b.+49h/i],[N,[Q,"Swiss"],[H,X]],[/\b(zur\d{3}) b/i],[N,[Q,"Swiss"],[H,ee]],[/\b((zeki)?tb.*\b) b/i],[N,[Q,"Zeki"],[H,ee]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[Q,"Dragon Touch"],N,[H,ee]],[/\b(ns-?\w{0,9}) b/i],[N,[Q,"Insignia"],[H,ee]],[/\b((nxa|next)-?\w{0,9}) b/i],[N,[Q,"NextBook"],[H,ee]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[Q,"Voice"],N,[H,X]],[/\b(lvtel\-)?(v1[12]) b/i],[[Q,"LvTel"],N,[H,X]],[/\b(ph-1) /i],[N,[Q,"Essential"],[H,X]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[N,[Q,"Envizen"],[H,ee]],[/\b(trio[-\w\. ]+) b/i],[N,[Q,"MachSpeed"],[H,ee]],[/\btu_(1491) b/i],[N,[Q,"Rotor"],[H,ee]],[/(shield[\w ]+) b/i],[N,[Q,"Nvidia"],[H,ee]],[/(sprint) (\w+)/i],[Q,N,[H,X]],[/(kin\.[onetw]{3})/i],[[N,/\./g," "],[Q,Ge],[H,X]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[N,[Q,Ye],[H,ee]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[N,[Q,Ye],[H,X]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[Q,N,[H,G]],[/droid.+; (shield) bui/i],[N,[Q,"Nvidia"],[H,G]],[/(playstation [345portablevi]+)/i],[N,[Q,lt],[H,G]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[N,[Q,Ge],[H,G]],[/smart-tv.+(samsung)/i],[Q,[H,ve]],[/hbbtv.+maple;(\d+)/i],[[N,/^/,"SmartTV"],[Q,Xe],[H,ve]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[Q,"LG"],[H,ve]],[/(apple) ?tv/i],[Q,[N,P+" TV"],[H,ve]],[/crkey/i],[[N,E+"cast"],[Q,Ee],[H,ve]],[/droid.+aft(\w)( bui|\))/i],[N,[Q,m],[H,ve]],[/\(dtv[\);].+(aquos)/i],[N,[Q,"Sharp"],[H,ve]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[Q,we],[N,we],[H,ve]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[H,ve]],[/((pebble))app/i],[Q,N,[H,Oe]],[/droid.+; (glass) \d/i],[N,[Q,Ee],[H,Oe]],[/droid.+; (wt63?0{2,3})\)/i],[N,[Q,Ye],[H,Oe]],[/(quest( 2)?)/i],[N,[Q,ht],[H,Oe]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[Q,[H,Le]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[N,[H,X]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[N,[H,ee]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[H,ee]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[H,X]],[/(android[-\w\. ]{0,9});.+buil/i],[N,[Q,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[Z,[U,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[Z,[U,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[U,Z],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[Z,U]],os:[[/microsoft (windows) (vista|xp)/i],[U,Z],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[U,[Z,ut,D]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[U,"Windows"],[Z,ut,D]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[Z,/_/g,"."],[U,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[U,"Mac OS"],[Z,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[Z,U],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[U,Z],[/\(bb(10);/i],[Z,[U,_]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[Z,[U,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[Z,[U,me+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[Z,[U,"webOS"]],[/crkey\/([\d\.]+)/i],[Z,[U,E+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[U,"Chromium OS"],Z],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[U,Z],[/(sunos) ?([\w\.\d]*)/i],[[U,"Solaris"],Z],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[U,Z]]},g=function(ye,Me){if(typeof ye===z&&(Me=ye,ye=y),!(this instanceof g))return new g(ye,Me).getResult();var Qe=ye||(typeof n!==p&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:""),st=Me?function(ye,Me){var Qe={};for(var st in ye)Qe[st]=Me[st]&&Me[st].length%2==0?Me[st].concat(ye[st]):ye[st];return Qe}(C,Me):C;return this.getBrowser=function(){var Ut={};return Ut[U]=y,Ut[Z]=y,De.call(Ut,Qe,st.browser),Ut.major=function(ye){return typeof ye===S?ye.replace(/[^\d\.]/g,"").split(".")[0]:y}(Ut.version),Ut},this.getCPU=function(){var Ut={};return Ut[ue]=y,De.call(Ut,Qe,st.cpu),Ut},this.getDevice=function(){var Ut={};return Ut[Q]=y,Ut[N]=y,Ut[H]=y,De.call(Ut,Qe,st.device),Ut},this.getEngine=function(){var Ut={};return Ut[U]=y,Ut[Z]=y,De.call(Ut,Qe,st.engine),Ut},this.getOS=function(){var Ut={};return Ut[U]=y,Ut[Z]=y,De.call(Ut,Qe,st.os),Ut},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Qe},this.setUA=function(Ut){return Qe=typeof Ut===S&&Ut.length>255?we(Ut,255):Ut,this},this.setUA(Qe),this};g.VERSION="0.7.31",g.BROWSER=he([U,Z,"major"]),g.CPU=he([ue]),g.DEVICE=he([N,Q,H,G,X,ve,ee,Oe,Le]),g.ENGINE=g.OS=he([U,Z]),typeof K!==p?(it.exports&&(K=it.exports=g),K.UAParser=g):u.amdO?(e=function(){return g}.call(K,u,K,it))!==y&&(it.exports=e):typeof n!==p&&(n.UAParser=g);var B=typeof n!==p&&(n.jQuery||n.Zepto);if(B&&!B.ua){var de=new g;B.ua=de.getResult(),B.ua.get=function(){return de.getUA()},B.ua.set=function(ye){de.setUA(ye);var Me=de.getResult();for(var Qe in Me)B.ua[Qe]=Me[Qe]}}}("object"==typeof window?window:this)},2173:(it,K)=>{K.byteLength=function d(U){var H=c(U),Z=H[1];return 3*(H[0]+Z)/4-Z},K.toByteArray=function z(U){var H,ve,Q=c(U),Z=Q[0],ue=Q[1],G=new n(function p(U,H,Q){return 3*(H+Q)/4-Q}(0,Z,ue)),X=0,ee=ue>0?Z-4:Z;for(ve=0;ve<ee;ve+=4)H=e[U.charCodeAt(ve)]<<18|e[U.charCodeAt(ve+1)]<<12|e[U.charCodeAt(ve+2)]<<6|e[U.charCodeAt(ve+3)],G[X++]=H>>16&255,G[X++]=H>>8&255,G[X++]=255&H;return 2===ue&&(H=e[U.charCodeAt(ve)]<<2|e[U.charCodeAt(ve+1)]>>4,G[X++]=255&H),1===ue&&(H=e[U.charCodeAt(ve)]<<10|e[U.charCodeAt(ve+1)]<<4|e[U.charCodeAt(ve+2)]>>2,G[X++]=H>>8&255,G[X++]=255&H),G},K.fromByteArray=function N(U){for(var H,Q=U.length,Z=Q%3,ue=[],G=16383,X=0,ee=Q-Z;X<ee;X+=G)ue.push(V(U,X,X+G>ee?ee:X+G));return 1===Z?ue.push(u[(H=U[Q-1])>>2]+u[H<<4&63]+"=="):2===Z&&ue.push(u[(H=(U[Q-2]<<8)+U[Q-1])>>10]+u[H>>4&63]+u[H<<2&63]+"="),ue.join("")};for(var u=[],e=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",x=0,$=y.length;x<$;++x)u[x]=y[x],e[y.charCodeAt(x)]=x;function c(U){var H=U.length;if(H%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var Q=U.indexOf("=");return-1===Q&&(Q=H),[Q,Q===H?0:4-Q%4]}function S(U){return u[U>>18&63]+u[U>>12&63]+u[U>>6&63]+u[63&U]}function V(U,H,Q){for(var ue=[],G=H;G<Q;G+=3)ue.push(S((U[G]<<16&16711680)+(U[G+1]<<8&65280)+(255&U[G+2])));return ue.join("")}e["-".charCodeAt(0)]=62,e["_".charCodeAt(0)]=63},3962:function(it){it.exports=function(K){var u={};function e(n){if(u[n])return u[n].exports;var y=u[n]={i:n,l:!1,exports:{}};return K[n].call(y.exports,y,y.exports,e),y.l=!0,y.exports}return e.m=K,e.c=u,e.d=function(n,y,x){e.o(n,y)||Object.defineProperty(n,y,{enumerable:!0,get:x})},e.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,y){if(1&y&&(n=e(n)),8&y||4&y&&"object"==typeof n&&n&&n.__esModule)return n;var x=Object.create(null);if(e.r(x),Object.defineProperty(x,"default",{enumerable:!0,value:n}),2&y&&"string"!=typeof n)for(var $ in n)e.d(x,$,function(c){return n[c]}.bind(null,$));return x},e.n=function(n){var y=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(y,"a",y),y},e.o=function(n,y){return Object.prototype.hasOwnProperty.call(n,y)},e.p="",e(e.s=90)}({17:function(K,u,e){"use strict";u.__esModule=!0,u.default=void 0;var n=e(18),y=function(){function x(){}return x.getFirstMatch=function($,c){var d=c.match($);return d&&d.length>0&&d[1]||""},x.getSecondMatch=function($,c){var d=c.match($);return d&&d.length>1&&d[2]||""},x.matchAndReturnConst=function($,c,d){if($.test(c))return d},x.getWindowsVersionName=function($){switch($){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},x.getMacOSVersionName=function($){var c=$.split(".").splice(0,2).map(function(d){return parseInt(d,10)||0});if(c.push(0),10===c[0])switch(c[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},x.getAndroidVersionName=function($){var c=$.split(".").splice(0,2).map(function(d){return parseInt(d,10)||0});if(c.push(0),!(1===c[0]&&c[1]<5))return 1===c[0]&&c[1]<6?"Cupcake":1===c[0]&&c[1]>=6?"Donut":2===c[0]&&c[1]<2?"Eclair":2===c[0]&&2===c[1]?"Froyo":2===c[0]&&c[1]>2?"Gingerbread":3===c[0]?"Honeycomb":4===c[0]&&c[1]<1?"Ice Cream Sandwich":4===c[0]&&c[1]<4?"Jelly Bean":4===c[0]&&c[1]>=4?"KitKat":5===c[0]?"Lollipop":6===c[0]?"Marshmallow":7===c[0]?"Nougat":8===c[0]?"Oreo":9===c[0]?"Pie":void 0},x.getVersionPrecision=function($){return $.split(".").length},x.compareVersions=function($,c,d){void 0===d&&(d=!1);var p=x.getVersionPrecision($),z=x.getVersionPrecision(c),S=Math.max(p,z),V=0,N=x.map([$,c],function(U){var H=S-x.getVersionPrecision(U),Q=U+new Array(H+1).join(".0");return x.map(Q.split("."),function(Z){return new Array(20-Z.length).join("0")+Z}).reverse()});for(d&&(V=S-Math.min(p,z)),S-=1;S>=V;){if(N[0][S]>N[1][S])return 1;if(N[0][S]===N[1][S]){if(S===V)return 0;S-=1}else if(N[0][S]<N[1][S])return-1}},x.map=function($,c){var d,p=[];if(Array.prototype.map)return Array.prototype.map.call($,c);for(d=0;d<$.length;d+=1)p.push(c($[d]));return p},x.find=function($,c){var d,p;if(Array.prototype.find)return Array.prototype.find.call($,c);for(d=0,p=$.length;d<p;d+=1){var z=$[d];if(c(z,d))return z}},x.assign=function($){for(var c,d,p=$,z=arguments.length,S=new Array(z>1?z-1:0),V=1;V<z;V++)S[V-1]=arguments[V];if(Object.assign)return Object.assign.apply(Object,[$].concat(S));var N=function(){var U=S[c];"object"==typeof U&&null!==U&&Object.keys(U).forEach(function(H){p[H]=U[H]})};for(c=0,d=S.length;c<d;c+=1)N();return $},x.getBrowserAlias=function($){return n.BROWSER_ALIASES_MAP[$]},x.getBrowserTypeByAlias=function($){return n.BROWSER_MAP[$]||""},x}();u.default=y,K.exports=u.default},18:function(K,u,e){"use strict";u.__esModule=!0,u.ENGINE_MAP=u.OS_MAP=u.PLATFORMS_MAP=u.BROWSER_MAP=u.BROWSER_ALIASES_MAP=void 0,u.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},u.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},u.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},u.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},u.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(K,u,e){"use strict";u.__esModule=!0,u.default=void 0;var n,y=(n=e(91))&&n.__esModule?n:{default:n},x=e(18);function $(d,p){for(var z=0;z<p.length;z++){var S=p[z];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(d,S.key,S)}}var c=function(){function d(){}var p,S;return d.getParser=function(V,N){if(void 0===N&&(N=!1),"string"!=typeof V)throw new Error("UserAgent should be a string");return new y.default(V,N)},d.parse=function(V){return new y.default(V).getResult()},p=d,S=[{key:"BROWSER_MAP",get:function(){return x.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return x.ENGINE_MAP}},{key:"OS_MAP",get:function(){return x.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return x.PLATFORMS_MAP}}],null&&$(p.prototype,null),S&&$(p,S),d}();u.default=c,K.exports=u.default},91:function(K,u,e){"use strict";u.__esModule=!0,u.default=void 0;var n=d(e(92)),y=d(e(93)),x=d(e(94)),$=d(e(95)),c=d(e(17));function d(z){return z&&z.__esModule?z:{default:z}}var p=function(){function z(V,N){if(void 0===N&&(N=!1),null==V||""===V)throw new Error("UserAgent parameter can't be empty");this._ua=V,this.parsedResult={},!0!==N&&this.parse()}var S=z.prototype;return S.getUA=function(){return this._ua},S.test=function(V){return V.test(this._ua)},S.parseBrowser=function(){var V=this;this.parsedResult.browser={};var N=c.default.find(n.default,function(U){if("function"==typeof U.test)return U.test(V);if(U.test instanceof Array)return U.test.some(function(H){return V.test(H)});throw new Error("Browser's test function is not valid")});return N&&(this.parsedResult.browser=N.describe(this.getUA())),this.parsedResult.browser},S.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},S.getBrowserName=function(V){return V?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},S.getBrowserVersion=function(){return this.getBrowser().version},S.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},S.parseOS=function(){var V=this;this.parsedResult.os={};var N=c.default.find(y.default,function(U){if("function"==typeof U.test)return U.test(V);if(U.test instanceof Array)return U.test.some(function(H){return V.test(H)});throw new Error("Browser's test function is not valid")});return N&&(this.parsedResult.os=N.describe(this.getUA())),this.parsedResult.os},S.getOSName=function(V){var N=this.getOS().name;return V?String(N).toLowerCase()||"":N||""},S.getOSVersion=function(){return this.getOS().version},S.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},S.getPlatformType=function(V){void 0===V&&(V=!1);var N=this.getPlatform().type;return V?String(N).toLowerCase()||"":N||""},S.parsePlatform=function(){var V=this;this.parsedResult.platform={};var N=c.default.find(x.default,function(U){if("function"==typeof U.test)return U.test(V);if(U.test instanceof Array)return U.test.some(function(H){return V.test(H)});throw new Error("Browser's test function is not valid")});return N&&(this.parsedResult.platform=N.describe(this.getUA())),this.parsedResult.platform},S.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},S.getEngineName=function(V){return V?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},S.parseEngine=function(){var V=this;this.parsedResult.engine={};var N=c.default.find($.default,function(U){if("function"==typeof U.test)return U.test(V);if(U.test instanceof Array)return U.test.some(function(H){return V.test(H)});throw new Error("Browser's test function is not valid")});return N&&(this.parsedResult.engine=N.describe(this.getUA())),this.parsedResult.engine},S.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},S.getResult=function(){return c.default.assign({},this.parsedResult)},S.satisfies=function(V){var N=this,U={},H=0,Q={},Z=0;if(Object.keys(V).forEach(function(be){var m=V[be];"string"==typeof m?(Q[be]=m,Z+=1):"object"==typeof m&&(U[be]=m,H+=1)}),H>0){var ue=Object.keys(U),G=c.default.find(ue,function(be){return N.isOS(be)});if(G){var X=this.satisfies(U[G]);if(void 0!==X)return X}var ee=c.default.find(ue,function(be){return N.isPlatform(be)});if(ee){var ve=this.satisfies(U[ee]);if(void 0!==ve)return ve}}if(Z>0){var Oe=Object.keys(Q),Le=c.default.find(Oe,function(be){return N.isBrowser(be,!0)});if(void 0!==Le)return this.compareVersion(Q[Le])}},S.isBrowser=function(V,N){void 0===N&&(N=!1);var U=this.getBrowserName().toLowerCase(),H=V.toLowerCase(),Q=c.default.getBrowserTypeByAlias(H);return N&&Q&&(H=Q.toLowerCase()),H===U},S.compareVersion=function(V){var N=[0],U=V,H=!1,Q=this.getBrowserVersion();if("string"==typeof Q)return">"===V[0]||"<"===V[0]?(U=V.substr(1),"="===V[1]?(H=!0,U=V.substr(2)):N=[],N.push(">"===V[0]?1:-1)):"="===V[0]?U=V.substr(1):"~"===V[0]&&(H=!0,U=V.substr(1)),N.indexOf(c.default.compareVersions(Q,U,H))>-1},S.isOS=function(V){return this.getOSName(!0)===String(V).toLowerCase()},S.isPlatform=function(V){return this.getPlatformType(!0)===String(V).toLowerCase()},S.isEngine=function(V){return this.getEngineName(!0)===String(V).toLowerCase()},S.is=function(V,N){return void 0===N&&(N=!1),this.isBrowser(V,N)||this.isOS(V)||this.isPlatform(V)},S.some=function(V){var N=this;return void 0===V&&(V=[]),V.some(function(U){return N.is(U)})},z}();u.default=p,K.exports=u.default},92:function(K,u,e){"use strict";u.__esModule=!0,u.default=void 0;var n,y=(n=e(17))&&n.__esModule?n:{default:n},x=/version\/(\d+(\.?_?\d+)+)/i;u.default=[{test:[/googlebot/i],describe:function(c){var d={name:"Googlebot"},p=y.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,c)||y.default.getFirstMatch(x,c);return p&&(d.version=p),d}},{test:[/opera/i],describe:function(c){var d={name:"Opera"},p=y.default.getFirstMatch(x,c)||y.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,c);return p&&(d.version=p),d}},{test:[/opr\/|opios/i],describe:function(c){var d={name:"Opera"},p=y.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,c)||y.default.getFirstMatch(x,c);return p&&(d.version=p),d}},{test:[/SamsungBrowser/i],describe:function(c){var d={name:"Samsung Internet for Android"},p=y.default.getFirstMatch(x,c)||y.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,c);return p&&(d.version=p),d}},{test:[/Whale/i],describe:function(c){var d={name:"NAVER Whale Browser"},p=y.default.getFirstMatch(x,c)||y.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,c);return p&&(d.version=p),d}},{test:[/MZBrowser/i],describe:function(c){var d={name:"MZ Browser"},p=y.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,c)||y.default.getFirstMatch(x,c);return p&&(d.version=p),d}},{test:[/focus/i],describe:function(c){var d={name:"Focus"},p=y.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,c)||y.default.getFirstMatch(x,c);return p&&(d.version=p),d}},{test:[/swing/i],describe:function(c){var d={name:"Swing"},p=y.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,c)||y.default.getFirstMatch(x,c);return p&&(d.version=p),d}},{test:[/coast/i],describe:function(c){var d={name:"Opera Coast"},p=y.default.getFirstMatch(x,c)||y.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,c);return p&&(d.version=p),d}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(c){var d={name:"Opera Touch"},p=y.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,c)||y.default.getFirstMatch(x,c);return p&&(d.version=p),d}},{test:[/yabrowser/i],describe:function(c){var d={name:"Yandex Browser"},p=y.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,c)||y.default.getFirstMatch(x,c);return p&&(d.version=p),d}},{test:[/ucbrowser/i],describe:function(c){var d={name:"UC Browser"},p=y.default.getFirstMatch(x,c)||y.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,c);return p&&(d.version=p),d}},{test:[/Maxthon|mxios/i],describe:function(c){var d={name:"Maxthon"},p=y.default.getFirstMatch(x,c)||y.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,c);return p&&(d.version=p),d}},{test:[/epiphany/i],describe:function(c){var d={name:"Epiphany"},p=y.default.getFirstMatch(x,c)||y.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,c);return p&&(d.version=p),d}},{test:[/puffin/i],describe:function(c){var d={name:"Puffin"},p=y.default.getFirstMatch(x,c)||y.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,c);return p&&(d.version=p),d}},{test:[/sleipnir/i],describe:function(c){var d={name:"Sleipnir"},p=y.default.getFirstMatch(x,c)||y.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,c);return p&&(d.version=p),d}},{test:[/k-meleon/i],describe:function(c){var d={name:"K-Meleon"},p=y.default.getFirstMatch(x,c)||y.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,c);return p&&(d.version=p),d}},{test:[/micromessenger/i],describe:function(c){var d={name:"WeChat"},p=y.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,c)||y.default.getFirstMatch(x,c);return p&&(d.version=p),d}},{test:[/qqbrowser/i],describe:function(c){var d={name:/qqbrowserlite/i.test(c)?"QQ Browser Lite":"QQ Browser"},p=y.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,c)||y.default.getFirstMatch(x,c);return p&&(d.version=p),d}},{test:[/msie|trident/i],describe:function(c){var d={name:"Internet Explorer"},p=y.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,c);return p&&(d.version=p),d}},{test:[/\sedg\//i],describe:function(c){var d={name:"Microsoft Edge"},p=y.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,c);return p&&(d.version=p),d}},{test:[/edg([ea]|ios)/i],describe:function(c){var d={name:"Microsoft Edge"},p=y.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,c);return p&&(d.version=p),d}},{test:[/vivaldi/i],describe:function(c){var d={name:"Vivaldi"},p=y.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,c);return p&&(d.version=p),d}},{test:[/seamonkey/i],describe:function(c){var d={name:"SeaMonkey"},p=y.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,c);return p&&(d.version=p),d}},{test:[/sailfish/i],describe:function(c){var d={name:"Sailfish"},p=y.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,c);return p&&(d.version=p),d}},{test:[/silk/i],describe:function(c){var d={name:"Amazon Silk"},p=y.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,c);return p&&(d.version=p),d}},{test:[/phantom/i],describe:function(c){var d={name:"PhantomJS"},p=y.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,c);return p&&(d.version=p),d}},{test:[/slimerjs/i],describe:function(c){var d={name:"SlimerJS"},p=y.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,c);return p&&(d.version=p),d}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(c){var d={name:"BlackBerry"},p=y.default.getFirstMatch(x,c)||y.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,c);return p&&(d.version=p),d}},{test:[/(web|hpw)[o0]s/i],describe:function(c){var d={name:"WebOS Browser"},p=y.default.getFirstMatch(x,c)||y.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,c);return p&&(d.version=p),d}},{test:[/bada/i],describe:function(c){var d={name:"Bada"},p=y.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,c);return p&&(d.version=p),d}},{test:[/tizen/i],describe:function(c){var d={name:"Tizen"},p=y.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,c)||y.default.getFirstMatch(x,c);return p&&(d.version=p),d}},{test:[/qupzilla/i],describe:function(c){var d={name:"QupZilla"},p=y.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,c)||y.default.getFirstMatch(x,c);return p&&(d.version=p),d}},{test:[/firefox|iceweasel|fxios/i],describe:function(c){var d={name:"Firefox"},p=y.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,c);return p&&(d.version=p),d}},{test:[/electron/i],describe:function(c){var d={name:"Electron"},p=y.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,c);return p&&(d.version=p),d}},{test:[/MiuiBrowser/i],describe:function(c){var d={name:"Miui"},p=y.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,c);return p&&(d.version=p),d}},{test:[/chromium/i],describe:function(c){var d={name:"Chromium"},p=y.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,c)||y.default.getFirstMatch(x,c);return p&&(d.version=p),d}},{test:[/chrome|crios|crmo/i],describe:function(c){var d={name:"Chrome"},p=y.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,c);return p&&(d.version=p),d}},{test:[/GSA/i],describe:function(c){var d={name:"Google Search"},p=y.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,c);return p&&(d.version=p),d}},{test:function(c){var d=!c.test(/like android/i),p=c.test(/android/i);return d&&p},describe:function(c){var d={name:"Android Browser"},p=y.default.getFirstMatch(x,c);return p&&(d.version=p),d}},{test:[/playstation 4/i],describe:function(c){var d={name:"PlayStation 4"},p=y.default.getFirstMatch(x,c);return p&&(d.version=p),d}},{test:[/safari|applewebkit/i],describe:function(c){var d={name:"Safari"},p=y.default.getFirstMatch(x,c);return p&&(d.version=p),d}},{test:[/.*/i],describe:function(c){var d=-1!==c.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:y.default.getFirstMatch(d,c),version:y.default.getSecondMatch(d,c)}}}],K.exports=u.default},93:function(K,u,e){"use strict";u.__esModule=!0,u.default=void 0;var n,y=(n=e(17))&&n.__esModule?n:{default:n},x=e(18);u.default=[{test:[/Roku\/DVP/],describe:function(c){var d=y.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,c);return{name:x.OS_MAP.Roku,version:d}}},{test:[/windows phone/i],describe:function(c){var d=y.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,c);return{name:x.OS_MAP.WindowsPhone,version:d}}},{test:[/windows /i],describe:function(c){var d=y.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,c),p=y.default.getWindowsVersionName(d);return{name:x.OS_MAP.Windows,version:d,versionName:p}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(c){var d={name:x.OS_MAP.iOS},p=y.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,c);return p&&(d.version=p),d}},{test:[/macintosh/i],describe:function(c){var d=y.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,c).replace(/[_\s]/g,"."),p=y.default.getMacOSVersionName(d),z={name:x.OS_MAP.MacOS,version:d};return p&&(z.versionName=p),z}},{test:[/(ipod|iphone|ipad)/i],describe:function(c){var d=y.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,c).replace(/[_\s]/g,".");return{name:x.OS_MAP.iOS,version:d}}},{test:function(c){var d=!c.test(/like android/i),p=c.test(/android/i);return d&&p},describe:function(c){var d=y.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,c),p=y.default.getAndroidVersionName(d),z={name:x.OS_MAP.Android,version:d};return p&&(z.versionName=p),z}},{test:[/(web|hpw)[o0]s/i],describe:function(c){var d=y.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,c),p={name:x.OS_MAP.WebOS};return d&&d.length&&(p.version=d),p}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(c){var d=y.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,c)||y.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,c)||y.default.getFirstMatch(/\bbb(\d+)/i,c);return{name:x.OS_MAP.BlackBerry,version:d}}},{test:[/bada/i],describe:function(c){var d=y.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,c);return{name:x.OS_MAP.Bada,version:d}}},{test:[/tizen/i],describe:function(c){var d=y.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,c);return{name:x.OS_MAP.Tizen,version:d}}},{test:[/linux/i],describe:function(){return{name:x.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:x.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(c){var d=y.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,c);return{name:x.OS_MAP.PlayStation4,version:d}}}],K.exports=u.default},94:function(K,u,e){"use strict";u.__esModule=!0,u.default=void 0;var n,y=(n=e(17))&&n.__esModule?n:{default:n},x=e(18);u.default=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(c){var d=y.default.getFirstMatch(/(can-l01)/i,c)&&"Nova",p={type:x.PLATFORMS_MAP.mobile,vendor:"Huawei"};return d&&(p.model=d),p}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:x.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:x.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:x.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:x.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:x.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:x.PLATFORMS_MAP.tablet}}},{test:function(c){var d=c.test(/ipod|iphone/i),p=c.test(/like (ipod|iphone)/i);return d&&!p},describe:function(c){var d=y.default.getFirstMatch(/(ipod|iphone)/i,c);return{type:x.PLATFORMS_MAP.mobile,vendor:"Apple",model:d}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:x.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:x.PLATFORMS_MAP.mobile}}},{test:function(c){return"blackberry"===c.getBrowserName(!0)},describe:function(){return{type:x.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(c){return"bada"===c.getBrowserName(!0)},describe:function(){return{type:x.PLATFORMS_MAP.mobile}}},{test:function(c){return"windows phone"===c.getBrowserName()},describe:function(){return{type:x.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(c){var d=Number(String(c.getOSVersion()).split(".")[0]);return"android"===c.getOSName(!0)&&d>=3},describe:function(){return{type:x.PLATFORMS_MAP.tablet}}},{test:function(c){return"android"===c.getOSName(!0)},describe:function(){return{type:x.PLATFORMS_MAP.mobile}}},{test:function(c){return"macos"===c.getOSName(!0)},describe:function(){return{type:x.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(c){return"windows"===c.getOSName(!0)},describe:function(){return{type:x.PLATFORMS_MAP.desktop}}},{test:function(c){return"linux"===c.getOSName(!0)},describe:function(){return{type:x.PLATFORMS_MAP.desktop}}},{test:function(c){return"playstation 4"===c.getOSName(!0)},describe:function(){return{type:x.PLATFORMS_MAP.tv}}},{test:function(c){return"roku"===c.getOSName(!0)},describe:function(){return{type:x.PLATFORMS_MAP.tv}}}],K.exports=u.default},95:function(K,u,e){"use strict";u.__esModule=!0,u.default=void 0;var n,y=(n=e(17))&&n.__esModule?n:{default:n},x=e(18);u.default=[{test:function(c){return"microsoft edge"===c.getBrowserName(!0)},describe:function(c){if(/\sedg\//i.test(c))return{name:x.ENGINE_MAP.Blink};var d=y.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,c);return{name:x.ENGINE_MAP.EdgeHTML,version:d}}},{test:[/trident/i],describe:function(c){var d={name:x.ENGINE_MAP.Trident},p=y.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,c);return p&&(d.version=p),d}},{test:function(c){return c.test(/presto/i)},describe:function(c){var d={name:x.ENGINE_MAP.Presto},p=y.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,c);return p&&(d.version=p),d}},{test:function(c){var d=c.test(/gecko/i),p=c.test(/like gecko/i);return d&&!p},describe:function(c){var d={name:x.ENGINE_MAP.Gecko},p=y.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,c);return p&&(d.version=p),d}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:x.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(c){var d={name:x.ENGINE_MAP.WebKit},p=y.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,c);return p&&(d.version=p),d}}],K.exports=u.default}})},5979:it=>{it.exports=function e(n){return"[object String]"=={}.toString.call(n)?n.replace(K,".$1").replace(u,""):""};var K=/\[([^\[\]]+)\]/g,u=/^[.]*|[.]*$/g},3195:(it,K,u)=>{var e=u(2173),n=u(4920),y="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;K.Buffer=d,K.SlowBuffer=function G(le){return+le!=le&&(le=0),d.alloc(+le)},K.INSPECT_MAX_BYTES=50;var x=2147483647;function c(le){if(le>x)throw new RangeError('The value "'+le+'" is invalid for option "size"');var D=new Uint8Array(le);return Object.setPrototypeOf(D,d.prototype),D}function d(le,D,C){if("number"==typeof le){if("string"==typeof D)throw new TypeError('The "string" argument must be of type string. Received type number');return V(le)}return p(le,D,C)}function p(le,D,C){if("string"==typeof le)return function N(le,D){if(("string"!=typeof D||""===D)&&(D="utf8"),!d.isEncoding(D))throw new TypeError("Unknown encoding: "+D);var C=0|X(le,D),g=c(C),B=g.write(le,D);return B!==C&&(g=g.slice(0,B)),g}(le,D);if(ArrayBuffer.isView(le))return function H(le){if(we(le,Uint8Array)){var D=new Uint8Array(le);return Q(D.buffer,D.byteOffset,D.byteLength)}return U(le)}(le);if(null==le)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof le);if(we(le,ArrayBuffer)||le&&we(le.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(we(le,SharedArrayBuffer)||le&&we(le.buffer,SharedArrayBuffer)))return Q(le,D,C);if("number"==typeof le)throw new TypeError('The "value" argument must not be of type number. Received type number');var g=le.valueOf&&le.valueOf();if(null!=g&&g!==le)return d.from(g,D,C);var B=function Z(le){if(d.isBuffer(le)){var D=0|ue(le.length),C=c(D);return 0===C.length||le.copy(C,0,0,D),C}return void 0!==le.length?"number"!=typeof le.length||De(le.length)?c(0):U(le):"Buffer"===le.type&&Array.isArray(le.data)?U(le.data):void 0}(le);if(B)return B;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof le[Symbol.toPrimitive])return d.from(le[Symbol.toPrimitive]("string"),D,C);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof le)}function z(le){if("number"!=typeof le)throw new TypeError('"size" argument must be of type number');if(le<0)throw new RangeError('The value "'+le+'" is invalid for option "size"')}function V(le){return z(le),c(le<0?0:0|ue(le))}function U(le){for(var D=le.length<0?0:0|ue(le.length),C=c(D),g=0;g<D;g+=1)C[g]=255&le[g];return C}function Q(le,D,C){if(D<0||le.byteLength<D)throw new RangeError('"offset" is outside of buffer bounds');if(le.byteLength<D+(C||0))throw new RangeError('"length" is outside of buffer bounds');var g;return g=void 0===D&&void 0===C?new Uint8Array(le):void 0===C?new Uint8Array(le,D):new Uint8Array(le,D,C),Object.setPrototypeOf(g,d.prototype),g}function ue(le){if(le>=x)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+x.toString(16)+" bytes");return 0|le}function X(le,D){if(d.isBuffer(le))return le.length;if(ArrayBuffer.isView(le)||we(le,ArrayBuffer))return le.byteLength;if("string"!=typeof le)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof le);var C=le.length,g=arguments.length>2&&!0===arguments[2];if(!g&&0===C)return 0;for(var B=!1;;)switch(D){case"ascii":case"latin1":case"binary":return C;case"utf8":case"utf-8":return Se(le).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*C;case"hex":return C>>>1;case"base64":return Fe(le).length;default:if(B)return g?-1:Se(le).length;D=(""+D).toLowerCase(),B=!0}}function ee(le,D,C){var g=!1;if((void 0===D||D<0)&&(D=0),D>this.length||((void 0===C||C>this.length)&&(C=this.length),C<=0)||(C>>>=0)<=(D>>>=0))return"";for(le||(le="utf8");;)switch(le){case"hex":return ze(this,D,C);case"utf8":case"utf-8":return E(this,D,C);case"ascii":return Ee(this,D,C);case"latin1":case"binary":return se(this,D,C);case"base64":return R(this,D,C);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ge(this,D,C);default:if(g)throw new TypeError("Unknown encoding: "+le);le=(le+"").toLowerCase(),g=!0}}function ve(le,D,C){var g=le[D];le[D]=le[C],le[C]=g}function Oe(le,D,C,g,B){if(0===le.length)return-1;if("string"==typeof C?(g=C,C=0):C>2147483647?C=2147483647:C<-2147483648&&(C=-2147483648),De(C=+C)&&(C=B?0:le.length-1),C<0&&(C=le.length+C),C>=le.length){if(B)return-1;C=le.length-1}else if(C<0){if(!B)return-1;C=0}if("string"==typeof D&&(D=d.from(D,g)),d.isBuffer(D))return 0===D.length?-1:Le(le,D,C,g,B);if("number"==typeof D)return D&=255,"function"==typeof Uint8Array.prototype.indexOf?B?Uint8Array.prototype.indexOf.call(le,D,C):Uint8Array.prototype.lastIndexOf.call(le,D,C):Le(le,[D],C,g,B);throw new TypeError("val must be string, number or Buffer")}function Le(le,D,C,g,B){var st,de=1,ye=le.length,Me=D.length;if(void 0!==g&&("ucs2"===(g=String(g).toLowerCase())||"ucs-2"===g||"utf16le"===g||"utf-16le"===g)){if(le.length<2||D.length<2)return-1;de=2,ye/=2,Me/=2,C/=2}function Qe(Lt,zt){return 1===de?Lt[zt]:Lt.readUInt16BE(zt*de)}if(B){var Ut=-1;for(st=C;st<ye;st++)if(Qe(le,st)===Qe(D,-1===Ut?0:st-Ut)){if(-1===Ut&&(Ut=st),st-Ut+1===Me)return Ut*de}else-1!==Ut&&(st-=st-Ut),Ut=-1}else for(C+Me>ye&&(C=ye-Me),st=C;st>=0;st--){for(var qt=!0,Ue=0;Ue<Me;Ue++)if(Qe(le,st+Ue)!==Qe(D,Ue)){qt=!1;break}if(qt)return st}return-1}function be(le,D,C,g){C=Number(C)||0;var B=le.length-C;g?(g=Number(g))>B&&(g=B):g=B;var de=D.length;g>de/2&&(g=de/2);for(var ye=0;ye<g;++ye){var Me=parseInt(D.substr(2*ye,2),16);if(De(Me))return ye;le[C+ye]=Me}return ye}function m(le,D,C,g){return Je(Se(D,le.length-C),le,C,g)}function P(le,D,C,g){return Je(function he(le){for(var D=[],C=0;C<le.length;++C)D.push(255&le.charCodeAt(C));return D}(D),le,C,g)}function b(le,D,C,g){return Je(Fe(D),le,C,g)}function _(le,D,C,g){return Je(function pe(le,D){for(var C,g,de=[],ye=0;ye<le.length&&!((D-=2)<0);++ye)g=(C=le.charCodeAt(ye))>>8,de.push(C%256),de.push(g);return de}(D,le.length-C),le,C,g)}function R(le,D,C){return e.fromByteArray(0===D&&C===le.length?le:le.slice(D,C))}function E(le,D,C){C=Math.min(le.length,C);for(var g=[],B=D;B<C;){var Qe,st,Ut,qt,de=le[B],ye=null,Me=de>239?4:de>223?3:de>191?2:1;if(B+Me<=C)switch(Me){case 1:de<128&&(ye=de);break;case 2:128==(192&(Qe=le[B+1]))&&(qt=(31&de)<<6|63&Qe)>127&&(ye=qt);break;case 3:st=le[B+2],128==(192&(Qe=le[B+1]))&&128==(192&st)&&(qt=(15&de)<<12|(63&Qe)<<6|63&st)>2047&&(qt<55296||qt>57343)&&(ye=qt);break;case 4:st=le[B+2],Ut=le[B+3],128==(192&(Qe=le[B+1]))&&128==(192&st)&&128==(192&Ut)&&(qt=(15&de)<<18|(63&Qe)<<12|(63&st)<<6|63&Ut)>65535&&qt<1114112&&(ye=qt)}null===ye?(ye=65533,Me=1):ye>65535&&(g.push((ye-=65536)>>>10&1023|55296),ye=56320|1023&ye),g.push(ye),B+=Me}return function me(le){var D=le.length;if(D<=4096)return String.fromCharCode.apply(String,le);for(var C="",g=0;g<D;)C+=String.fromCharCode.apply(String,le.slice(g,g+=4096));return C}(g)}function Ee(le,D,C){var g="";C=Math.min(le.length,C);for(var B=D;B<C;++B)g+=String.fromCharCode(127&le[B]);return g}function se(le,D,C){var g="";C=Math.min(le.length,C);for(var B=D;B<C;++B)g+=String.fromCharCode(le[B]);return g}function ze(le,D,C){var g=le.length;(!D||D<0)&&(D=0),(!C||C<0||C>g)&&(C=g);for(var B="",de=D;de<C;++de)B+=ut[le[de]];return B}function Ge(le,D,C){for(var g=le.slice(D,C),B="",de=0;de<g.length-1;de+=2)B+=String.fromCharCode(g[de]+256*g[de+1]);return B}function xe(le,D,C){if(le%1!=0||le<0)throw new RangeError("offset is not uint");if(le+D>C)throw new RangeError("Trying to access beyond buffer length")}function qe(le,D,C,g,B,de){if(!d.isBuffer(le))throw new TypeError('"buffer" argument must be a Buffer instance');if(D>B||D<de)throw new RangeError('"value" argument is out of bounds');if(C+g>le.length)throw new RangeError("Index out of range")}function Xe(le,D,C,g,B,de){if(C+g>le.length)throw new RangeError("Index out of range");if(C<0)throw new RangeError("Index out of range")}function lt(le,D,C,g,B){return D=+D,C>>>=0,B||Xe(le,0,C,4),n.write(le,D,C,g,23,4),C+4}function He(le,D,C,g,B){return D=+D,C>>>=0,B||Xe(le,0,C,8),n.write(le,D,C,g,52,8),C+8}K.kMaxLength=x,!(d.TYPED_ARRAY_SUPPORT=function $(){try{var le=new Uint8Array(1),D={foo:function(){return 42}};return Object.setPrototypeOf(D,Uint8Array.prototype),Object.setPrototypeOf(le,D),42===le.foo()}catch{return!1}}())&&"undefined"!=typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),d.poolSize=8192,d.from=function(le,D,C){return p(le,D,C)},Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array),d.alloc=function(le,D,C){return function S(le,D,C){return z(le),le<=0?c(le):void 0!==D?"string"==typeof C?c(le).fill(D,C):c(le).fill(D):c(le)}(le,D,C)},d.allocUnsafe=function(le){return V(le)},d.allocUnsafeSlow=function(le){return V(le)},d.isBuffer=function(D){return null!=D&&!0===D._isBuffer&&D!==d.prototype},d.compare=function(D,C){if(we(D,Uint8Array)&&(D=d.from(D,D.offset,D.byteLength)),we(C,Uint8Array)&&(C=d.from(C,C.offset,C.byteLength)),!d.isBuffer(D)||!d.isBuffer(C))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(D===C)return 0;for(var g=D.length,B=C.length,de=0,ye=Math.min(g,B);de<ye;++de)if(D[de]!==C[de]){g=D[de],B=C[de];break}return g<B?-1:B<g?1:0},d.isEncoding=function(D){switch(String(D).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(D,C){if(!Array.isArray(D))throw new TypeError('"list" argument must be an Array of Buffers');if(0===D.length)return d.alloc(0);var g;if(void 0===C)for(C=0,g=0;g<D.length;++g)C+=D[g].length;var B=d.allocUnsafe(C),de=0;for(g=0;g<D.length;++g){var ye=D[g];if(we(ye,Uint8Array))de+ye.length>B.length?d.from(ye).copy(B,de):Uint8Array.prototype.set.call(B,ye,de);else{if(!d.isBuffer(ye))throw new TypeError('"list" argument must be an Array of Buffers');ye.copy(B,de)}de+=ye.length}return B},d.byteLength=X,d.prototype._isBuffer=!0,d.prototype.swap16=function(){var D=this.length;if(D%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var C=0;C<D;C+=2)ve(this,C,C+1);return this},d.prototype.swap32=function(){var D=this.length;if(D%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var C=0;C<D;C+=4)ve(this,C,C+3),ve(this,C+1,C+2);return this},d.prototype.swap64=function(){var D=this.length;if(D%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var C=0;C<D;C+=8)ve(this,C,C+7),ve(this,C+1,C+6),ve(this,C+2,C+5),ve(this,C+3,C+4);return this},d.prototype.toLocaleString=d.prototype.toString=function(){var D=this.length;return 0===D?"":0===arguments.length?E(this,0,D):ee.apply(this,arguments)},d.prototype.equals=function(D){if(!d.isBuffer(D))throw new TypeError("Argument must be a Buffer");return this===D||0===d.compare(this,D)},d.prototype.inspect=function(){var D="",C=K.INSPECT_MAX_BYTES;return D=this.toString("hex",0,C).replace(/(.{2})/g,"$1 ").trim(),this.length>C&&(D+=" ... "),"<Buffer "+D+">"},y&&(d.prototype[y]=d.prototype.inspect),d.prototype.compare=function(D,C,g,B,de){if(we(D,Uint8Array)&&(D=d.from(D,D.offset,D.byteLength)),!d.isBuffer(D))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof D);if(void 0===C&&(C=0),void 0===g&&(g=D?D.length:0),void 0===B&&(B=0),void 0===de&&(de=this.length),C<0||g>D.length||B<0||de>this.length)throw new RangeError("out of range index");if(B>=de&&C>=g)return 0;if(B>=de)return-1;if(C>=g)return 1;if(this===D)return 0;for(var ye=(de>>>=0)-(B>>>=0),Me=(g>>>=0)-(C>>>=0),Qe=Math.min(ye,Me),st=this.slice(B,de),Ut=D.slice(C,g),qt=0;qt<Qe;++qt)if(st[qt]!==Ut[qt]){ye=st[qt],Me=Ut[qt];break}return ye<Me?-1:Me<ye?1:0},d.prototype.includes=function(D,C,g){return-1!==this.indexOf(D,C,g)},d.prototype.indexOf=function(D,C,g){return Oe(this,D,C,g,!0)},d.prototype.lastIndexOf=function(D,C,g){return Oe(this,D,C,g,!1)},d.prototype.write=function(D,C,g,B){if(void 0===C)B="utf8",g=this.length,C=0;else if(void 0===g&&"string"==typeof C)B=C,g=this.length,C=0;else{if(!isFinite(C))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");C>>>=0,isFinite(g)?(g>>>=0,void 0===B&&(B="utf8")):(B=g,g=void 0)}var de=this.length-C;if((void 0===g||g>de)&&(g=de),D.length>0&&(g<0||C<0)||C>this.length)throw new RangeError("Attempt to write outside buffer bounds");B||(B="utf8");for(var ye=!1;;)switch(B){case"hex":return be(this,D,C,g);case"utf8":case"utf-8":return m(this,D,C,g);case"ascii":case"latin1":case"binary":return P(this,D,C,g);case"base64":return b(this,D,C,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,D,C,g);default:if(ye)throw new TypeError("Unknown encoding: "+B);B=(""+B).toLowerCase(),ye=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},d.prototype.slice=function(D,C){var g=this.length;(D=~~D)<0?(D+=g)<0&&(D=0):D>g&&(D=g),(C=void 0===C?g:~~C)<0?(C+=g)<0&&(C=0):C>g&&(C=g),C<D&&(C=D);var B=this.subarray(D,C);return Object.setPrototypeOf(B,d.prototype),B},d.prototype.readUintLE=d.prototype.readUIntLE=function(D,C,g){D>>>=0,C>>>=0,g||xe(D,C,this.length);for(var B=this[D],de=1,ye=0;++ye<C&&(de*=256);)B+=this[D+ye]*de;return B},d.prototype.readUintBE=d.prototype.readUIntBE=function(D,C,g){D>>>=0,C>>>=0,g||xe(D,C,this.length);for(var B=this[D+--C],de=1;C>0&&(de*=256);)B+=this[D+--C]*de;return B},d.prototype.readUint8=d.prototype.readUInt8=function(D,C){return D>>>=0,C||xe(D,1,this.length),this[D]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(D,C){return D>>>=0,C||xe(D,2,this.length),this[D]|this[D+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(D,C){return D>>>=0,C||xe(D,2,this.length),this[D]<<8|this[D+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(D,C){return D>>>=0,C||xe(D,4,this.length),(this[D]|this[D+1]<<8|this[D+2]<<16)+16777216*this[D+3]},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(D,C){return D>>>=0,C||xe(D,4,this.length),16777216*this[D]+(this[D+1]<<16|this[D+2]<<8|this[D+3])},d.prototype.readIntLE=function(D,C,g){D>>>=0,C>>>=0,g||xe(D,C,this.length);for(var B=this[D],de=1,ye=0;++ye<C&&(de*=256);)B+=this[D+ye]*de;return B>=(de*=128)&&(B-=Math.pow(2,8*C)),B},d.prototype.readIntBE=function(D,C,g){D>>>=0,C>>>=0,g||xe(D,C,this.length);for(var B=C,de=1,ye=this[D+--B];B>0&&(de*=256);)ye+=this[D+--B]*de;return ye>=(de*=128)&&(ye-=Math.pow(2,8*C)),ye},d.prototype.readInt8=function(D,C){return D>>>=0,C||xe(D,1,this.length),128&this[D]?-1*(255-this[D]+1):this[D]},d.prototype.readInt16LE=function(D,C){D>>>=0,C||xe(D,2,this.length);var g=this[D]|this[D+1]<<8;return 32768&g?4294901760|g:g},d.prototype.readInt16BE=function(D,C){D>>>=0,C||xe(D,2,this.length);var g=this[D+1]|this[D]<<8;return 32768&g?4294901760|g:g},d.prototype.readInt32LE=function(D,C){return D>>>=0,C||xe(D,4,this.length),this[D]|this[D+1]<<8|this[D+2]<<16|this[D+3]<<24},d.prototype.readInt32BE=function(D,C){return D>>>=0,C||xe(D,4,this.length),this[D]<<24|this[D+1]<<16|this[D+2]<<8|this[D+3]},d.prototype.readFloatLE=function(D,C){return D>>>=0,C||xe(D,4,this.length),n.read(this,D,!0,23,4)},d.prototype.readFloatBE=function(D,C){return D>>>=0,C||xe(D,4,this.length),n.read(this,D,!1,23,4)},d.prototype.readDoubleLE=function(D,C){return D>>>=0,C||xe(D,8,this.length),n.read(this,D,!0,52,8)},d.prototype.readDoubleBE=function(D,C){return D>>>=0,C||xe(D,8,this.length),n.read(this,D,!1,52,8)},d.prototype.writeUintLE=d.prototype.writeUIntLE=function(D,C,g,B){D=+D,C>>>=0,g>>>=0,B||qe(this,D,C,g,Math.pow(2,8*g)-1,0);var ye=1,Me=0;for(this[C]=255&D;++Me<g&&(ye*=256);)this[C+Me]=D/ye&255;return C+g},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(D,C,g,B){D=+D,C>>>=0,g>>>=0,B||qe(this,D,C,g,Math.pow(2,8*g)-1,0);var ye=g-1,Me=1;for(this[C+ye]=255&D;--ye>=0&&(Me*=256);)this[C+ye]=D/Me&255;return C+g},d.prototype.writeUint8=d.prototype.writeUInt8=function(D,C,g){return D=+D,C>>>=0,g||qe(this,D,C,1,255,0),this[C]=255&D,C+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(D,C,g){return D=+D,C>>>=0,g||qe(this,D,C,2,65535,0),this[C]=255&D,this[C+1]=D>>>8,C+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(D,C,g){return D=+D,C>>>=0,g||qe(this,D,C,2,65535,0),this[C]=D>>>8,this[C+1]=255&D,C+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(D,C,g){return D=+D,C>>>=0,g||qe(this,D,C,4,4294967295,0),this[C+3]=D>>>24,this[C+2]=D>>>16,this[C+1]=D>>>8,this[C]=255&D,C+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(D,C,g){return D=+D,C>>>=0,g||qe(this,D,C,4,4294967295,0),this[C]=D>>>24,this[C+1]=D>>>16,this[C+2]=D>>>8,this[C+3]=255&D,C+4},d.prototype.writeIntLE=function(D,C,g,B){if(D=+D,C>>>=0,!B){var de=Math.pow(2,8*g-1);qe(this,D,C,g,de-1,-de)}var ye=0,Me=1,Qe=0;for(this[C]=255&D;++ye<g&&(Me*=256);)D<0&&0===Qe&&0!==this[C+ye-1]&&(Qe=1),this[C+ye]=(D/Me>>0)-Qe&255;return C+g},d.prototype.writeIntBE=function(D,C,g,B){if(D=+D,C>>>=0,!B){var de=Math.pow(2,8*g-1);qe(this,D,C,g,de-1,-de)}var ye=g-1,Me=1,Qe=0;for(this[C+ye]=255&D;--ye>=0&&(Me*=256);)D<0&&0===Qe&&0!==this[C+ye+1]&&(Qe=1),this[C+ye]=(D/Me>>0)-Qe&255;return C+g},d.prototype.writeInt8=function(D,C,g){return D=+D,C>>>=0,g||qe(this,D,C,1,127,-128),D<0&&(D=255+D+1),this[C]=255&D,C+1},d.prototype.writeInt16LE=function(D,C,g){return D=+D,C>>>=0,g||qe(this,D,C,2,32767,-32768),this[C]=255&D,this[C+1]=D>>>8,C+2},d.prototype.writeInt16BE=function(D,C,g){return D=+D,C>>>=0,g||qe(this,D,C,2,32767,-32768),this[C]=D>>>8,this[C+1]=255&D,C+2},d.prototype.writeInt32LE=function(D,C,g){return D=+D,C>>>=0,g||qe(this,D,C,4,2147483647,-2147483648),this[C]=255&D,this[C+1]=D>>>8,this[C+2]=D>>>16,this[C+3]=D>>>24,C+4},d.prototype.writeInt32BE=function(D,C,g){return D=+D,C>>>=0,g||qe(this,D,C,4,2147483647,-2147483648),D<0&&(D=4294967295+D+1),this[C]=D>>>24,this[C+1]=D>>>16,this[C+2]=D>>>8,this[C+3]=255&D,C+4},d.prototype.writeFloatLE=function(D,C,g){return lt(this,D,C,!0,g)},d.prototype.writeFloatBE=function(D,C,g){return lt(this,D,C,!1,g)},d.prototype.writeDoubleLE=function(D,C,g){return He(this,D,C,!0,g)},d.prototype.writeDoubleBE=function(D,C,g){return He(this,D,C,!1,g)},d.prototype.copy=function(D,C,g,B){if(!d.isBuffer(D))throw new TypeError("argument should be a Buffer");if(g||(g=0),!B&&0!==B&&(B=this.length),C>=D.length&&(C=D.length),C||(C=0),B>0&&B<g&&(B=g),B===g||0===D.length||0===this.length)return 0;if(C<0)throw new RangeError("targetStart out of bounds");if(g<0||g>=this.length)throw new RangeError("Index out of range");if(B<0)throw new RangeError("sourceEnd out of bounds");B>this.length&&(B=this.length),D.length-C<B-g&&(B=D.length-C+g);var de=B-g;return this===D&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(C,g,B):Uint8Array.prototype.set.call(D,this.subarray(g,B),C),de},d.prototype.fill=function(D,C,g,B){if("string"==typeof D){if("string"==typeof C?(B=C,C=0,g=this.length):"string"==typeof g&&(B=g,g=this.length),void 0!==B&&"string"!=typeof B)throw new TypeError("encoding must be a string");if("string"==typeof B&&!d.isEncoding(B))throw new TypeError("Unknown encoding: "+B);if(1===D.length){var de=D.charCodeAt(0);("utf8"===B&&de<128||"latin1"===B)&&(D=de)}}else"number"==typeof D?D&=255:"boolean"==typeof D&&(D=Number(D));if(C<0||this.length<C||this.length<g)throw new RangeError("Out of range index");if(g<=C)return this;var ye;if(C>>>=0,g=void 0===g?this.length:g>>>0,D||(D=0),"number"==typeof D)for(ye=C;ye<g;++ye)this[ye]=D;else{var Me=d.isBuffer(D)?D:d.from(D,B),Qe=Me.length;if(0===Qe)throw new TypeError('The value "'+D+'" is invalid for argument "value"');for(ye=0;ye<g-C;++ye)this[ye+C]=Me[ye%Qe]}return this};var Ye=/[^+/0-9A-Za-z-_]/g;function Se(le,D){D=D||1/0;for(var C,g=le.length,B=null,de=[],ye=0;ye<g;++ye){if((C=le.charCodeAt(ye))>55295&&C<57344){if(!B){if(C>56319){(D-=3)>-1&&de.push(239,191,189);continue}if(ye+1===g){(D-=3)>-1&&de.push(239,191,189);continue}B=C;continue}if(C<56320){(D-=3)>-1&&de.push(239,191,189),B=C;continue}C=65536+(B-55296<<10|C-56320)}else B&&(D-=3)>-1&&de.push(239,191,189);if(B=null,C<128){if((D-=1)<0)break;de.push(C)}else if(C<2048){if((D-=2)<0)break;de.push(C>>6|192,63&C|128)}else if(C<65536){if((D-=3)<0)break;de.push(C>>12|224,C>>6&63|128,63&C|128)}else{if(!(C<1114112))throw new Error("Invalid code point");if((D-=4)<0)break;de.push(C>>18|240,C>>12&63|128,C>>6&63|128,63&C|128)}}return de}function Fe(le){return e.toByteArray(function ht(le){if((le=(le=le.split("=")[0]).trim().replace(Ye,"")).length<2)return"";for(;le.length%4!=0;)le+="=";return le}(le))}function Je(le,D,C,g){for(var B=0;B<g&&!(B+C>=D.length||B>=le.length);++B)D[B+C]=le[B];return B}function we(le,D){return le instanceof D||null!=le&&null!=le.constructor&&null!=le.constructor.name&&le.constructor.name===D.name}function De(le){return le!=le}var ut=function(){for(var le="0123456789abcdef",D=new Array(256),C=0;C<16;++C)for(var g=16*C,B=0;B<16;++B)D[g+B]=le[C]+le[B];return D}()},4263:(it,K,u)=>{var e=u(9903),n=u(3855),y=n(e("String.prototype.indexOf"));it.exports=function($,c){var d=e($,!!c);return"function"==typeof d&&y($,".prototype.")>-1?n(d):d}},3855:(it,K,u)=>{var e=u(224),n=u(9903),y=n("%Function.prototype.apply%"),x=n("%Function.prototype.call%"),$=n("%Reflect.apply%",!0)||e.call(x,y),c=n("%Object.getOwnPropertyDescriptor%",!0),d=n("%Object.defineProperty%",!0),p=n("%Math.max%");if(d)try{d({},"a",{value:1})}catch{d=null}it.exports=function(V){var N=$(e,x,arguments);if(c&&d){var U=c(N,"length");U.configurable&&d(N,"length",{value:1+p(0,V.length-(arguments.length-1))})}return N};var z=function(){return $(e,y,arguments)};d?d(it.exports,"apply",{value:z}):it.exports.apply=z},1562:function(it,K){var n;void 0!==(n=function(){return new function(){var x=this;x.init=function(){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")},String.prototype.repeat=function(G){return new Array(1+G).join(this)}},x.init();var p=/\/\*[\s\S]*?\*\//g,z=/([^\:]+):([^\;]*);/,S=/(\/\*[\s\S]*?\*\/)|([^\s\;\{\}][^\;\{\}]*(?=\{))|(\})|([^\;\{\}]+\;(?!\s*\*\/))/gim,Q=function(G){return void 0===G||0==G.length||null==G};x.toJSON=function(G,X){var ee={children:{},attributes:{}},ve=null,Oe=0;for(void 0===X&&(X={ordered:!1,comments:!1,stripComments:!1,split:!1}),X.stripComments&&(X.comments=!1,G=G.replace(p,""));null!=(ve=S.exec(G));)if(!Q(ve[1])&&X.comments){var Le=ve[1].trim();ee[Oe++]=Le}else if(Q(ve[2])){if(!Q(ve[3]))return ee;if(!Q(ve[4])){var E=ve[4].trim(),ne=z.exec(E);if(ne){var be=ne[1].trim(),me=ne[2].trim();if(X.ordered)(P={}).name=be,P.value=me,P.type="attr",ee[Oe++]=P;else if(be in ee.attributes){var Ee=ee.attributes[be];Ee instanceof Array||(ee.attributes[be]=[Ee]),ee.attributes[be].push(me)}else ee.attributes[be]=me}else ee[Oe++]=E}}else{be=ve[2].trim();var m=x.toJSON(G,X);if(X.ordered){var P;(P={}).name=be,P.value=m,P.type="rule",ee[Oe++]=P}else{if(X.split)var b=be.split(",");else b=[be];for(i in b){var _=b[i].trim();if(_ in ee.children)for(var R in m.attributes)ee.children[_].attributes[R]=m.attributes[R];else ee.children[_]=m}}}return ee},x.toCSS=function(G,X,ee){var ve="";if(void 0===X&&(X=0),void 0===ee&&(ee=!1),G.attributes)for(i in G.attributes){var Oe=G.attributes[i];if(Oe instanceof Array)for(var Le=0;Le<Oe.length;Le++)ve+=Z(i,Oe[Le],X);else ve+=Z(i,Oe,X)}if(G.children){var be=!0;for(i in G.children)ee&&!be?ve+="\n":be=!1,ve+=ue(i,G.children[i],X)}return ve};var Z=function(G,X,ee){return"\t".repeat(ee)+G+": "+X+";\n"},ue=function(G,X,ee){var ve="\t".repeat(ee)+G+" {\n";return(ve+=x.toCSS(X,ee+1))+("\t".repeat(ee)+"}\n")}}}.apply(K,[]))&&(it.exports=n)},6929:function(it,K){!function(u){"use strict";var e="function"==typeof Symbol?Symbol("curriable placeholder"):60881;function y(c,d){var p="number"==typeof d?d:c.length,z=function n(c,d){return function p(z){return function(){var Z,S=z.length,V=arguments,N=V.length,U=[],H=0,Q=d;if(S)for(var ue=-1;++ue<S;)U[ue]=Z=z[ue]===e&&H<N?V[H++]:z[ue],Z!==e&&--Q;if(H<N)for(;H<N;)U[U.length]=Z=V[H],Z!==e&&H<d&&--Q,++H;return Q>0?p(U):c.apply(this,U)}}([])}(c,p);return z.arity=p,z.fn=c,z}function x(c){return c===e}function $(c){return c.fn}y.__=e,y.isPlaceholder=x,y.uncurry=$,u.__=e,u.curry=y,u.default=y,u.isPlaceholder=x,u.uncurry=$,Object.defineProperty(u,"__esModule",{value:!0})}(K)},3974:(it,K,u)=>{var e=Function.prototype.bind||u(9683);it.exports=function n(y,x){var $=function(){return 0===arguments.length?$:arguments.length>1?y.apply(x,arguments):e.call(y,x,arguments[0])};return $.uncurry=function(){return y},$}},2375:function(it){it.exports=function(){"use strict";const K=(S,V)=>V,u=(S,V)=>Object.assign({},V),e=(S,V)=>V.slice(),d={$push:(S,V)=>S.concat(V),$append:(S,V)=>S.concat(V),$prepend:(S,V)=>V.concat(S),$replace:function(S,V){let N;return S=S.slice(),Object.keys(V).forEach(U=>{if(N=Number.parseInt(U),N<0||Number.isNaN(N))throw Error(`Invalid index for $replace: ${U}`);S[N]=z(S[N],V[U])}),S},$insert:function(S,V){let N;return S=S.slice(),Object.keys(V).forEach(U=>{if(N=Number.parseInt(U),Number.isNaN(N))throw Error(`Invalid index for $insert: ${U}`);S.splice(N,0,V[U])}),S},$set:e},p={oo:function(S,V){return S=Object.assign({},S),Object.keys(V).forEach(N=>S[N]=z(S[N],V[N])),S},oa:u,ob:K,aa:function(S,V){return S=S.slice(),V.forEach((N,U)=>S[U]=z(S[U],N)),S},ao:function(S,V){const N=Object.keys(V)[0];return N in d?d[N](S.slice(),V[N]):V},ab:K,bb:K,bo:u,ba:e};function z(S,V){if(!V)return V;const N=Array.isArray(S)?"a":"object"==typeof S?"o":"b",U=Array.isArray(V)?"a":"object"==typeof V?"o":"b";return p[N+U](S,V)}return z}()},6607:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.default=K.nthElement=K.parentElements=void 0;var u=function(d){for(var p=[];d;){var z=d.nodeName.toLowerCase(),S=d.id?"#".concat(d.id):"",V="";d.className&&"string"==typeof d.className&&(V=".".concat(d.className.replace(/\s+/g,".").replace(/[:*+?^${}()|[\]\\]/gi,"\\$&"))),p.unshift({element:d,selector:z+S+V}),d=d.parentNode!==document&&d.parentNode}return p};K.parentElements=u;var e=function(d){for(var p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],z=d,S=1;null!==z.previousElementSibling;)(!p||z.previousElementSibling.nodeName===d.nodeName)&&S++,z=z.previousElementSibling;return S};K.nthElement=e;K.default=function(d){if(!(d instanceof HTMLElement))throw new Error("element must be of type `HTMLElement`.");return function(d){var p=[];return d.forEach(function(z){(function(d,p){var z=""===p?d:"".concat(p," > ").concat(d);return document.querySelectorAll(z).length>1})(z.selector,p.join(" > "))&&(z.selector+=":nth-of-type(".concat(e(z.element),")")),p.push(z.selector)}),p.join(" > ")}(u(d))}},1934:it=>{var K=Object.prototype.toString;function y(x){return x.replace(/\uffff/g,".")}it.exports=function u(x){for(var $=-1,c=function n(x){for(var $=-1,c=x.length,d=[];++$<c;)x[$]&&d.push(x[$]);return d}(function e(x){return("[object String]"===K.call(x)?x:"").replace(/\\\./g,"\uffff")}(x).split(".")),d=c.length,p=[];++$<d;)p.push(y(c[$]));return p}},3358:it=>{var e,K="object"==typeof Reflect?Reflect:null,u=K&&"function"==typeof K.apply?K.apply:function(ee,ve,Oe){return Function.prototype.apply.call(ee,ve,Oe)};e=K&&"function"==typeof K.ownKeys?K.ownKeys:Object.getOwnPropertySymbols?function(ee){return Object.getOwnPropertyNames(ee).concat(Object.getOwnPropertySymbols(ee))}:function(ee){return Object.getOwnPropertyNames(ee)};var y=Number.isNaN||function(ee){return ee!=ee};function x(){x.init.call(this)}it.exports=x,it.exports.once=function Z(X,ee){return new Promise(function(ve,Oe){function Le(m){X.removeListener(ee,be),Oe(m)}function be(){"function"==typeof X.removeListener&&X.removeListener("error",Le),ve([].slice.call(arguments))}G(X,ee,be,{once:!0}),"error"!==ee&&function ue(X,ee,ve){"function"==typeof X.on&&G(X,"error",ee,ve)}(X,Le,{once:!0})})},x.EventEmitter=x,x.prototype._events=void 0,x.prototype._eventsCount=0,x.prototype._maxListeners=void 0;var $=10;function c(X){if("function"!=typeof X)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof X)}function d(X){return void 0===X._maxListeners?x.defaultMaxListeners:X._maxListeners}function p(X,ee,ve,Oe){var Le,be,m;if(c(ve),void 0===(be=X._events)?(be=X._events=Object.create(null),X._eventsCount=0):(void 0!==be.newListener&&(X.emit("newListener",ee,ve.listener?ve.listener:ve),be=X._events),m=be[ee]),void 0===m)m=be[ee]=ve,++X._eventsCount;else if("function"==typeof m?m=be[ee]=Oe?[ve,m]:[m,ve]:Oe?m.unshift(ve):m.push(ve),(Le=d(X))>0&&m.length>Le&&!m.warned){m.warned=!0;var P=new Error("Possible EventEmitter memory leak detected. "+m.length+" "+String(ee)+" listeners added. Use emitter.setMaxListeners() to increase limit");P.name="MaxListenersExceededWarning",P.emitter=X,P.type=ee,P.count=m.length,function n(X){console&&console.warn&&console.warn(X)}(P)}return X}function z(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function S(X,ee,ve){var Oe={fired:!1,wrapFn:void 0,target:X,type:ee,listener:ve},Le=z.bind(Oe);return Le.listener=ve,Oe.wrapFn=Le,Le}function V(X,ee,ve){var Oe=X._events;if(void 0===Oe)return[];var Le=Oe[ee];return void 0===Le?[]:"function"==typeof Le?ve?[Le.listener||Le]:[Le]:ve?function Q(X){for(var ee=new Array(X.length),ve=0;ve<ee.length;++ve)ee[ve]=X[ve].listener||X[ve];return ee}(Le):U(Le,Le.length)}function N(X){var ee=this._events;if(void 0!==ee){var ve=ee[X];if("function"==typeof ve)return 1;if(void 0!==ve)return ve.length}return 0}function U(X,ee){for(var ve=new Array(ee),Oe=0;Oe<ee;++Oe)ve[Oe]=X[Oe];return ve}function G(X,ee,ve,Oe){if("function"==typeof X.on)Oe.once?X.once(ee,ve):X.on(ee,ve);else{if("function"!=typeof X.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof X);X.addEventListener(ee,function Le(be){Oe.once&&X.removeEventListener(ee,Le),ve(be)})}}Object.defineProperty(x,"defaultMaxListeners",{enumerable:!0,get:function(){return $},set:function(X){if("number"!=typeof X||X<0||y(X))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+X+".");$=X}}),x.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},x.prototype.setMaxListeners=function(ee){if("number"!=typeof ee||ee<0||y(ee))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+ee+".");return this._maxListeners=ee,this},x.prototype.getMaxListeners=function(){return d(this)},x.prototype.emit=function(ee){for(var ve=[],Oe=1;Oe<arguments.length;Oe++)ve.push(arguments[Oe]);var Le="error"===ee,be=this._events;if(void 0!==be)Le=Le&&void 0===be.error;else if(!Le)return!1;if(Le){var m;if(ve.length>0&&(m=ve[0]),m instanceof Error)throw m;var P=new Error("Unhandled error."+(m?" ("+m.message+")":""));throw P.context=m,P}var b=be[ee];if(void 0===b)return!1;if("function"==typeof b)u(b,this,ve);else{var _=b.length,R=U(b,_);for(Oe=0;Oe<_;++Oe)u(R[Oe],this,ve)}return!0},x.prototype.on=x.prototype.addListener=function(ee,ve){return p(this,ee,ve,!1)},x.prototype.prependListener=function(ee,ve){return p(this,ee,ve,!0)},x.prototype.once=function(ee,ve){return c(ve),this.on(ee,S(this,ee,ve)),this},x.prototype.prependOnceListener=function(ee,ve){return c(ve),this.prependListener(ee,S(this,ee,ve)),this},x.prototype.off=x.prototype.removeListener=function(ee,ve){var Oe,Le,be,m,P;if(c(ve),void 0===(Le=this._events))return this;if(void 0===(Oe=Le[ee]))return this;if(Oe===ve||Oe.listener===ve)0==--this._eventsCount?this._events=Object.create(null):(delete Le[ee],Le.removeListener&&this.emit("removeListener",ee,Oe.listener||ve));else if("function"!=typeof Oe){for(be=-1,m=Oe.length-1;m>=0;m--)if(Oe[m]===ve||Oe[m].listener===ve){P=Oe[m].listener,be=m;break}if(be<0)return this;0===be?Oe.shift():function H(X,ee){for(;ee+1<X.length;ee++)X[ee]=X[ee+1];X.pop()}(Oe,be),1===Oe.length&&(Le[ee]=Oe[0]),void 0!==Le.removeListener&&this.emit("removeListener",ee,P||ve)}return this},x.prototype.removeAllListeners=function(ee){var ve,Oe,Le;if(void 0===(Oe=this._events))return this;if(void 0===Oe.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==Oe[ee]&&(0==--this._eventsCount?this._events=Object.create(null):delete Oe[ee]),this;if(0===arguments.length){var m,be=Object.keys(Oe);for(Le=0;Le<be.length;++Le)"removeListener"!==(m=be[Le])&&this.removeAllListeners(m);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(ve=Oe[ee]))this.removeListener(ee,ve);else if(void 0!==ve)for(Le=ve.length-1;Le>=0;Le--)this.removeListener(ee,ve[Le]);return this},x.prototype.listeners=function(ee){return V(this,ee,!0)},x.prototype.rawListeners=function(ee){return V(this,ee,!1)},x.listenerCount=function(X,ee){return"function"==typeof X.listenerCount?X.listenerCount(ee):N.call(X,ee)},x.prototype.listenerCount=N,x.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},9683:it=>{it.exports=function(K){var e,u=this;if(arguments.length<2)e=function(){if(this instanceof e){var x=u.apply(this,arguments);return Object(x)===x?x:this}return u.apply(K,arguments)};else{for(var n=new Array(arguments.length-1),y=1;y<arguments.length;y++)n[y-1]=arguments[y];e=function(){var c,x=n.length,$=new Array(x+arguments.length);for(c=0;c<x;c++)$[c]=n[c];for(c=0;c<arguments.length;c++)$[x+c]=arguments[c];if(this instanceof e){var d=u.apply(this,$);return Object(d)===d?d:this}return u.apply(K,$)}}return e.prototype=u.prototype,e}},2199:it=>{var K="Function.prototype.bind called on incompatible ",u=Array.prototype.slice,e=Object.prototype.toString,n="[object Function]";it.exports=function(x){var $=this;if("function"!=typeof $||e.call($)!==n)throw new TypeError(K+$);for(var d,c=u.call(arguments,1),p=function(){if(this instanceof d){var U=$.apply(this,c.concat(u.call(arguments)));return Object(U)===U?U:this}return $.apply(x,c.concat(u.call(arguments)))},z=Math.max(0,$.length-c.length),S=[],V=0;V<z;V++)S.push("$"+V);if(d=Function("binder","return function ("+S.join(",")+"){ return binder.apply(this,arguments); }")(p),$.prototype){var N=function(){};N.prototype=$.prototype,d.prototype=new N,N.prototype=null}return d}},224:(it,K,u)=>{var e=u(2199);it.exports=Function.prototype.bind||e},9903:(it,K,u)=>{var e,n=SyntaxError,y=Function,x=TypeError,$=function(P){try{return y('"use strict"; return ('+P+").constructor;")()}catch{}},c=Object.getOwnPropertyDescriptor;if(c)try{c({},"")}catch{c=null}var d=function(){throw new x},p=c?function(){try{return d}catch{try{return c(arguments,"callee").get}catch{return d}}}():d,z=u(524)(),S=Object.getPrototypeOf||function(P){return P.__proto__},V={},N="undefined"==typeof Uint8Array?e:S(Uint8Array),U={"%AggregateError%":"undefined"==typeof AggregateError?e:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?e:ArrayBuffer,"%ArrayIteratorPrototype%":z?S([][Symbol.iterator]()):e,"%AsyncFromSyncIteratorPrototype%":e,"%AsyncFunction%":V,"%AsyncGenerator%":V,"%AsyncGeneratorFunction%":V,"%AsyncIteratorPrototype%":V,"%Atomics%":"undefined"==typeof Atomics?e:Atomics,"%BigInt%":"undefined"==typeof BigInt?e:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?e:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?e:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?e:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?e:FinalizationRegistry,"%Function%":y,"%GeneratorFunction%":V,"%Int8Array%":"undefined"==typeof Int8Array?e:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?e:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?e:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":z?S(S([][Symbol.iterator]())):e,"%JSON%":"object"==typeof JSON?JSON:e,"%Map%":"undefined"==typeof Map?e:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&z?S((new Map)[Symbol.iterator]()):e,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?e:Promise,"%Proxy%":"undefined"==typeof Proxy?e:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?e:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?e:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&z?S((new Set)[Symbol.iterator]()):e,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?e:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":z?S(""[Symbol.iterator]()):e,"%Symbol%":z?Symbol:e,"%SyntaxError%":n,"%ThrowTypeError%":p,"%TypedArray%":N,"%TypeError%":x,"%Uint8Array%":"undefined"==typeof Uint8Array?e:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?e:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?e:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?e:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?e:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?e:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?e:WeakSet},H=function P(b){var _;if("%AsyncFunction%"===b)_=$("async function () {}");else if("%GeneratorFunction%"===b)_=$("function* () {}");else if("%AsyncGeneratorFunction%"===b)_=$("async function* () {}");else if("%AsyncGenerator%"===b){var R=P("%AsyncGeneratorFunction%");R&&(_=R.prototype)}else if("%AsyncIteratorPrototype%"===b){var E=P("%AsyncGenerator%");E&&(_=S(E.prototype))}return U[b]=_,_},Q={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Z=u(224),ue=u(4031),G=Z.call(Function.call,Array.prototype.concat),X=Z.call(Function.apply,Array.prototype.splice),ee=Z.call(Function.call,String.prototype.replace),ve=Z.call(Function.call,String.prototype.slice),Oe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Le=/\\(\\)?/g,be=function(b){var _=ve(b,0,1),R=ve(b,-1);if("%"===_&&"%"!==R)throw new n("invalid intrinsic syntax, expected closing `%`");if("%"===R&&"%"!==_)throw new n("invalid intrinsic syntax, expected opening `%`");var E=[];return ee(b,Oe,function(ne,me,Ee,se){E[E.length]=Ee?ee(se,Le,"$1"):me||ne}),E},m=function(b,_){var E,R=b;if(ue(Q,R)&&(R="%"+(E=Q[R])[0]+"%"),ue(U,R)){var ne=U[R];if(ne===V&&(ne=H(R)),void 0===ne&&!_)throw new x("intrinsic "+b+" exists, but is not available. Please file an issue!");return{alias:E,name:R,value:ne}}throw new n("intrinsic "+b+" does not exist!")};it.exports=function(b,_){if("string"!=typeof b||0===b.length)throw new x("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof _)throw new x('"allowMissing" argument must be a boolean');var R=be(b),E=R.length>0?R[0]:"",ne=m("%"+E+"%",_),me=ne.name,Ee=ne.value,se=!1,ze=ne.alias;ze&&(E=ze[0],X(R,G([0,1],ze)));for(var Ge=1,xe=!0;Ge<R.length;Ge+=1){var qe=R[Ge],Xe=ve(qe,0,1),lt=ve(qe,-1);if(('"'===Xe||"'"===Xe||"`"===Xe||'"'===lt||"'"===lt||"`"===lt)&&Xe!==lt)throw new n("property names with quotes must have matching quotes");if(("constructor"===qe||!xe)&&(se=!0),ue(U,me="%"+(E+="."+qe)+"%"))Ee=U[me];else if(null!=Ee){if(!(qe in Ee)){if(!_)throw new x("base intrinsic for "+b+" exists, but the property is not available.");return}if(c&&Ge+1>=R.length){var He=c(Ee,qe);Ee=(xe=!!He)&&"get"in He&&!("originalValue"in He.get)?He.get:Ee[qe]}else xe=ue(Ee,qe),Ee=Ee[qe];xe&&!se&&(U[me]=Ee)}}return Ee}},524:(it,K,u)=>{var e="undefined"!=typeof Symbol&&Symbol,n=u(6858);it.exports=function(){return"function"==typeof e&&"function"==typeof Symbol&&"symbol"==typeof e("foo")&&"symbol"==typeof Symbol("bar")&&n()}},6858:it=>{it.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var u={},e=Symbol("test"),n=Object(e);if("string"==typeof e||"[object Symbol]"!==Object.prototype.toString.call(e)||"[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(e in u[e]=42,u)return!1;if("function"==typeof Object.keys&&0!==Object.keys(u).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(u).length)return!1;var x=Object.getOwnPropertySymbols(u);if(1!==x.length||x[0]!==e||!Object.prototype.propertyIsEnumerable.call(u,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var $=Object.getOwnPropertyDescriptor(u,e);if(42!==$.value||!0!==$.enumerable)return!1}return!0}},4031:(it,K,u)=>{var e=u(224);it.exports=e.call(Function.call,Object.prototype.hasOwnProperty)},8288:(it,K,u)=>{u.r(K),u.d(K,{default:()=>lt,hash:()=>Xe});var n,y,x,$,e=u(6929),c="undefined"!=typeof Buffer&&"function"==typeof Buffer.from,d="function"==typeof Uint16Array,p=/\[object (HTML(.*)Element)\]/,z=/\[object (SVG(.*)Element)\]/,V=["Arguments","Array","ArrayBuffer","Boolean","DataView","Date","DocumentFragment","Error","Event","Float32Array","Float64Array","Function","Generator","GeneratorFunction","HTMLElement","Int8Array","Int16Array","Int32Array","Map","Null","Number","Object","Promise","RegExp","Set","String","Symbol","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","Undefined","WeakMap","WeakSet","Window"].reduce(function(He,Ye){return He["[object "+Ye+"]"]=Ye,He},{}),N=Object.keys(V).reduce(function(He,Ye){return He[V[Ye].toUpperCase()]=Ye,He},{}),U={"[object Map]":!0,"[object Set]":!0},H={boolean:!0,function:!0,number:!0,string:!0,undefined:!0},Q=((n={})[N.ARGUMENTS]=!0,n[N.ARRAY]=!0,n),Z=((y={})[N.REGEXP]=!0,y[N.SYMBOL]=!0,y),ue=((x={})[N.FLOAT32ARRAY]=!0,x[N.FLOAT64ARRAY]=!0,x[N.INT8ARRAY]=!0,x[N.INT16ARRAY]=!0,x[N.INT32ARRAY]=!0,x[N.UINT8ARRAY]=!0,x[N.UINT8CLAMPEDARRAY]=!0,x[N.UINT16ARRAY]=!0,x[N.UINT32ARRAY]=!0,x),G=(($={})[N.GENERATOR]=!0,$[N.PROMISE]=!0,$[N.WEAKMAP]=!0,$[N.WEAKSET]=!0,$),X=/^\s*function\s*([^(]*)/i,ee=Object.prototype.toString,ve=Object.keys;function m(He,Ye){return He>Ye}function P(He,Ye){return He[0]>Ye[0]}function b(He,Ye){for(var ht,Se,he=0;he<He.length;++he){for(Se=He[he],ht=he-1;~ht&&Ye(He[ht],Se);--ht)He[ht+1]=He[ht];He[ht+1]=Se}return He}var Ee=c?function ne(He){return Buffer.from(He).toString("utf8")}:d?function E(He){return String.fromCharCode.apply(null,new Uint16Array(He))}:function me(){return""};function ze(He,Ye){for(var ht=0;ht<He.length;++ht)if(He[ht]===Ye)return ht+1;return 0}function Ge(He,Ye,ht,Se){if(void 0===Se){var he=typeof He;if("string"===he||H[he])return he+"|"+He;if(null===He)return"null|"+He}var pe=Se||ee.call(He);return Q[pe]?He:pe===N.OBJECT?function R(He){for(var Se,Ye=b(ve(He),m),ht={},he=0;he<Ye.length;++he)ht[Se=Ye[he]]=He[Se];return ht}(He):Z[pe]?V[pe]+"|"+He.toString():U[pe]?function _(He,Ye,ht){var Se="function"==typeof He.get,he=[];Se?(He.forEach(function(De,ut){he.push([qe(ut,Ye,ht),qe(De,Ye,ht)])}),b(he,P)):(He.forEach(function(De){he.push(qe(De,Ye,ht))}),b(he,m));for(var we,pe=function Oe(He){return He.name||(He.toString().match(X)||[])[1]||"anonymous"}(He.constructor)+"|[",Fe=0,Je=he.length;Fe<Je;++Fe)we=he[Fe],pe+=(Fe?",":"")+(Se?"["+we[0]+","+we[1]+"]":we);return pe+"]"}(He,Ye,ht):pe===N.DATE?V[pe]+"|"+He.getTime():pe===N.ERROR?V[pe]+"|"+He.stack:pe===N.EVENT?function be(He){return{bubbles:He.bubbles,cancelBubble:He.cancelBubble,cancelable:He.cancelable,composed:He.composed,currentTarget:He.currentTarget,defaultPrevented:He.defaultPrevented,eventPhase:He.eventPhase,isTrusted:He.isTrusted,returnValue:He.returnValue,target:He.target,type:He.type}}(He):G[pe]?V[pe]+"|NOT_ENUMERABLE":p.test(pe)||z.test(pe)?pe.slice(8,-1)+"|"+He.outerHTML:pe===N.DOCUMENTFRAGMENT?V[pe]+"|"+function se(He){for(var Ye=He.children,ht="",Se=0;Se<Ye.length;++Se)ht+=Ye[Se].outerHTML;return ht}(He):ue[pe]?V[pe]+"|"+He.join(","):pe===N.ARRAYBUFFER?V[pe]+"|"+Ee(He):pe===N.DATAVIEW?V[pe]+"|"+Ee(He.buffer):He}function qe(He,Ye,ht){if(!He||"object"!=typeof He)return Ge(He,Ye,ht);var Se=ee.call(He);return Se===N.DATE||Se===N.REGEXP?Ge(He,Ye,ht,Se):JSON.stringify(He,function xe(He,Ye){return void 0===He&&(He=[]),void 0===Ye&&(Ye=[]),function(ht,Se){if("object"==typeof Se)if(He.length){var he=ze(He,this);0===he?He.push(this):(He.splice(he),Ye.splice(he)),Ye.push(ht);var pe=ze(He,Se);if(0!==pe)return"[~"+(Ye.slice(0,pe).join(".")||".")+"]";He.push(Se)}else He[0]=Se,Ye[0]=ht;return ht&&this[ht]instanceof Date?Ge(this[ht],He,Ye,N.DATE):Ge(Se,He,Ye)}}(Ye,ht))}function Xe(He){return function Le(He){for(var he,Ye=He.length,ht=5381,Se=52711;Ye--;)ht=33*ht^(he=He.charCodeAt(Ye)),Se=33*Se^he;return 4096*(ht>>>0)+(Se>>>0)}(qe(He))}(Xe.is=(0,e.curry)(function(He,Ye){return Xe(He)===Xe(Ye)})).all=(0,e.curry)(function(He){for(var Ye=Xe.is(He),ht=1;ht<arguments.length;++ht)if(!Ye(arguments[ht]))return!1;return!0},2),Xe.is.any=(0,e.curry)(function(He){for(var Ye=Xe.is(He),ht=1;ht<arguments.length;ht++)if(Ye(arguments[ht]))return!0;return!1},2),Xe.is.not=(0,e.curry)(function(He,Ye){return Xe(He)!==Xe(Ye)});const lt=Xe},4920:(it,K)=>{K.read=function(u,e,n,y,x){var $,c,d=8*x-y-1,p=(1<<d)-1,z=p>>1,S=-7,V=n?x-1:0,N=n?-1:1,U=u[e+V];for(V+=N,$=U&(1<<-S)-1,U>>=-S,S+=d;S>0;$=256*$+u[e+V],V+=N,S-=8);for(c=$&(1<<-S)-1,$>>=-S,S+=y;S>0;c=256*c+u[e+V],V+=N,S-=8);if(0===$)$=1-z;else{if($===p)return c?NaN:1/0*(U?-1:1);c+=Math.pow(2,y),$-=z}return(U?-1:1)*c*Math.pow(2,$-y)},K.write=function(u,e,n,y,x,$){var c,d,p,z=8*$-x-1,S=(1<<z)-1,V=S>>1,N=23===x?Math.pow(2,-24)-Math.pow(2,-77):0,U=y?0:$-1,H=y?1:-1,Q=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(d=isNaN(e)?1:0,c=S):(c=Math.floor(Math.log(e)/Math.LN2),e*(p=Math.pow(2,-c))<1&&(c--,p*=2),(e+=c+V>=1?N/p:N*Math.pow(2,1-V))*p>=2&&(c++,p/=2),c+V>=S?(d=0,c=S):c+V>=1?(d=(e*p-1)*Math.pow(2,x),c+=V):(d=e*Math.pow(2,V-1)*Math.pow(2,x),c=0));x>=8;u[n+U]=255&d,U+=H,d/=256,x-=8);for(c=c<<x|d,z+=x;z>0;u[n+U]=255&c,U+=H,c/=256,z-=8);u[n+U-H]|=128*Q}},9066:(it,K,u)=>{u.d(K,{_6:()=>Q,_A:()=>G,It:()=>X,H0:()=>be});var e=Object.prototype.toString;var y=function(Ge,xe){if(!(Ge instanceof xe))throw new TypeError("Cannot call a class as a function")},x=function(){function Ge(xe,qe){for(var Xe=0;Xe<qe.length;Xe++){var lt=qe[Xe];lt.enumerable=lt.enumerable||!1,lt.configurable=!0,"value"in lt&&(lt.writable=!0),Object.defineProperty(xe,lt.key,lt)}}return function(xe,qe,Xe){return qe&&Ge(xe.prototype,qe),Xe&&Ge(xe,Xe),xe}}();function $(Ge){return Ge.split("").map(function(xe){return"(?:"+xe.toUpperCase()+"|"+xe.toLowerCase()+")"}).join("")}function c(Ge,xe){for(var qe=Ge.length-1;qe>=0;qe--)Ge[qe]===xe&&Array.prototype.splice.call(Ge,qe,1)}function d(Ge,xe){return Object.prototype.hasOwnProperty.call(Ge,xe)}var p={},z=function(){function Ge(){y(this,Ge),this.plurals=[],this.singulars=[],this.uncountables=[],this.humans=[],this.acronyms={},this.acronymRegex=/(?=a)b/}return x(Ge,null,[{key:"getInstance",value:function(qe){return p[qe]=p[qe]||new Ge,p[qe]}}]),x(Ge,[{key:"acronym",value:function(qe){this.acronyms[qe.toLowerCase()]=qe;var Xe=[];for(var lt in this.acronyms)d(this.acronyms,lt)&&Xe.push(this.acronyms[lt]);this.acronymRegex=new RegExp(Xe.join("|"))}},{key:"plural",value:function(qe,Xe){"string"==typeof qe&&c(this.uncountables,qe),c(this.uncountables,Xe),this.plurals.unshift([qe,Xe])}},{key:"singular",value:function(qe,Xe){"string"==typeof qe&&c(this.uncountables,qe),c(this.uncountables,Xe),this.singulars.unshift([qe,Xe])}},{key:"irregular",value:function(qe,Xe){c(this.uncountables,qe),c(this.uncountables,Xe);var lt=qe[0],He=qe.substr(1),Ye=Xe[0],ht=Xe.substr(1);if(lt.toUpperCase()===Ye.toUpperCase())this.plural(new RegExp("("+lt+")"+He+"$","i"),"$1"+ht),this.plural(new RegExp("("+Ye+")"+ht+"$","i"),"$1"+ht),this.singular(new RegExp("("+lt+")"+He+"$","i"),"$1"+He),this.singular(new RegExp("("+Ye+")"+ht+"$","i"),"$1"+He);else{var Se=$(He),he=$(ht);this.plural(new RegExp(lt.toUpperCase()+Se+"$"),Ye.toUpperCase()+ht),this.plural(new RegExp(lt.toLowerCase()+Se+"$"),Ye.toLowerCase()+ht),this.plural(new RegExp(Ye.toUpperCase()+he+"$"),Ye.toUpperCase()+ht),this.plural(new RegExp(Ye.toLowerCase()+he+"$"),Ye.toLowerCase()+ht),this.singular(new RegExp(lt.toUpperCase()+Se+"$"),lt.toUpperCase()+He),this.singular(new RegExp(lt.toLowerCase()+Se+"$"),lt.toLowerCase()+He),this.singular(new RegExp(Ye.toUpperCase()+he+"$"),lt.toUpperCase()+He),this.singular(new RegExp(Ye.toLowerCase()+he+"$"),lt.toLowerCase()+He)}}},{key:"uncountable",value:function(){for(var qe=arguments.length,Xe=Array(qe),lt=0;lt<qe;lt++)Xe[lt]=arguments[lt];this.uncountables=this.uncountables.concat(Xe)}},{key:"human",value:function(qe,Xe){this.humans.unshift([qe,Xe])}},{key:"clear",value:function(){var qe=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";"all"===qe?(this.plurals=[],this.singulars=[],this.uncountables=[],this.humans=[]):this[qe]=[]}}]),Ge}(),V={en:function S(Ge){Ge.plural(/$/,"s"),Ge.plural(/s$/i,"s"),Ge.plural(/^(ax|test)is$/i,"$1es"),Ge.plural(/(octop|vir)us$/i,"$1i"),Ge.plural(/(octop|vir)i$/i,"$1i"),Ge.plural(/(alias|status)$/i,"$1es"),Ge.plural(/(bu)s$/i,"$1ses"),Ge.plural(/(buffal|tomat)o$/i,"$1oes"),Ge.plural(/([ti])um$/i,"$1a"),Ge.plural(/([ti])a$/i,"$1a"),Ge.plural(/sis$/i,"ses"),Ge.plural(/(?:([^f])fe|([lr])f)$/i,"$1$2ves"),Ge.plural(/(hive)$/i,"$1s"),Ge.plural(/([^aeiouy]|qu)y$/i,"$1ies"),Ge.plural(/(x|ch|ss|sh)$/i,"$1es"),Ge.plural(/(matr|vert|ind)(?:ix|ex)$/i,"$1ices"),Ge.plural(/^(m|l)ouse$/i,"$1ice"),Ge.plural(/^(m|l)ice$/i,"$1ice"),Ge.plural(/^(ox)$/i,"$1en"),Ge.plural(/^(oxen)$/i,"$1"),Ge.plural(/(quiz)$/i,"$1zes"),Ge.singular(/s$/i,""),Ge.singular(/(ss)$/i,"$1"),Ge.singular(/(n)ews$/i,"$1ews"),Ge.singular(/([ti])a$/i,"$1um"),Ge.singular(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)(sis|ses)$/i,"$1sis"),Ge.singular(/(^analy)(sis|ses)$/i,"$1sis"),Ge.singular(/([^f])ves$/i,"$1fe"),Ge.singular(/(hive)s$/i,"$1"),Ge.singular(/(tive)s$/i,"$1"),Ge.singular(/([lr])ves$/i,"$1f"),Ge.singular(/([^aeiouy]|qu)ies$/i,"$1y"),Ge.singular(/(s)eries$/i,"$1eries"),Ge.singular(/(m)ovies$/i,"$1ovie"),Ge.singular(/(x|ch|ss|sh)es$/i,"$1"),Ge.singular(/^(m|l)ice$/i,"$1ouse"),Ge.singular(/(bus)(es)?$/i,"$1"),Ge.singular(/(o)es$/i,"$1"),Ge.singular(/(shoe)s$/i,"$1"),Ge.singular(/(cris|test)(is|es)$/i,"$1is"),Ge.singular(/^(a)x[ie]s$/i,"$1xis"),Ge.singular(/(octop|vir)(us|i)$/i,"$1us"),Ge.singular(/(alias|status)(es)?$/i,"$1"),Ge.singular(/^(ox)en/i,"$1"),Ge.singular(/(vert|ind)ices$/i,"$1ex"),Ge.singular(/(matr)ices$/i,"$1ix"),Ge.singular(/(quiz)zes$/i,"$1"),Ge.singular(/(database)s$/i,"$1"),Ge.irregular("person","people"),Ge.irregular("man","men"),Ge.irregular("child","children"),Ge.irregular("sex","sexes"),Ge.irregular("move","moves"),Ge.irregular("zombie","zombies"),Ge.uncountable("equipment","information","rice","money","species","series","fish","sheep","jeans","police")}};function N(Ge,xe){if(function n(Ge){return"[object Function]"===e.call(Ge)}(Ge)&&(xe=Ge,Ge=null),Ge=Ge||"en",!xe)return z.getInstance(Ge);xe(z.getInstance(Ge))}for(var U in V)N(U,V[U]);function H(Ge,xe){var Xe,lt,He,qe=""+Ge;if(0===qe.length)return qe;var Ye=qe.toLowerCase().match(/\b\w+$/);if(Ye&&N().uncountables.indexOf(Ye[0])>-1)return qe;for(var ht=0,Se=xe.length;ht<Se;ht++)if(He=(Xe=xe[ht])[1],qe.match(lt=Xe[0])){qe=qe.replace(lt,He);break}return qe}function Q(Ge){var xe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en";return H(Ge,N(xe).plurals)}function ue(Ge){var xe=null==Ge?"":String(Ge);return xe.charAt(0).toUpperCase()+xe.slice(1)}function G(Ge,xe){null==xe&&(xe=!0);var qe=""+Ge;return(qe=xe?qe.replace(/^[a-z\d]*/,function(Xe){return N().acronyms[Xe]||ue(Xe)}):qe.replace(new RegExp("^(?:"+N().acronymRegex.source+"(?=\\b|[A-Z_])|\\w)"),function(Xe){return Xe.toLowerCase()})).replace(/(?:_|(\/))([a-z\d]*)/gi,function(Xe,lt,He,Ye,ht){return lt||(lt=""),""+lt+(N().acronyms[He]||ue(He))})}function X(Ge){var xe=""+Ge;return(xe=(xe=(xe=(xe=xe.replace(new RegExp("(?:([A-Za-z\\d])|^)("+N().acronymRegex.source+")(?=\\b|[^a-z])","g"),function(qe,Xe,lt){return(Xe||"")+(Xe?"_":"")+lt.toLowerCase()})).replace(/([A-Z\d]+)([A-Z][a-z])/g,"$1_$2")).replace(/([a-z\d])([A-Z])/g,"$1_$2")).replace(/-/g,"_")).toLowerCase()}function be(Ge){return Ge.replace(/_/g,"-")}var _={\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00c6:"AE",\u00c7:"C",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00d0:"D",\u00d1:"N",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O","\xd7":"x",\u00d8:"O",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00dd:"Y",\u00de:"Th",\u00df:"ss",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00e6:"ae",\u00e7:"c",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00f0:"d",\u00f1:"n",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00fd:"y",\u00fe:"th",\u00ff:"y",\u0100:"A",\u0101:"a",\u0102:"A",\u0103:"a",\u0104:"A",\u0105:"a",\u0106:"C",\u0107:"c",\u0108:"C",\u0109:"c",\u010a:"C",\u010b:"c",\u010c:"C",\u010d:"c",\u010e:"D",\u010f:"d",\u0110:"D",\u0111:"d",\u0112:"E",\u0113:"e",\u0114:"E",\u0115:"e",\u0116:"E",\u0117:"e",\u0118:"E",\u0119:"e",\u011a:"E",\u011b:"e",\u011c:"G",\u011d:"g",\u011e:"G",\u011f:"g",\u0120:"G",\u0121:"g",\u0122:"G",\u0123:"g",\u0124:"H",\u0125:"h",\u0126:"H",\u0127:"h",\u0128:"I",\u0129:"i",\u012a:"I",\u012b:"i",\u012c:"I",\u012d:"i",\u012e:"I",\u012f:"i",\u0130:"I",\u0131:"i",\u0132:"IJ",\u0133:"ij",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013a:"l",\u013b:"L",\u013c:"l",\u013d:"L",\u013e:"l",\u013f:"L",\u0140:"l",\u0141:"L",\u0142:"l",\u0143:"N",\u0144:"n",\u0145:"N",\u0146:"n",\u0147:"N",\u0148:"n",\u0149:"'n",\u014a:"NG",\u014b:"ng",\u014c:"O",\u014d:"o",\u014e:"O",\u014f:"o",\u0150:"O",\u0151:"o",\u0152:"OE",\u0153:"oe",\u0154:"R",\u0155:"r",\u0156:"R",\u0157:"r",\u0158:"R",\u0159:"r",\u015a:"S",\u015b:"s",\u015c:"S",\u015d:"s",\u015e:"S",\u015f:"s",\u0160:"S",\u0161:"s",\u0162:"T",\u0163:"t",\u0164:"T",\u0165:"t",\u0166:"T",\u0167:"t",\u0168:"U",\u0169:"u",\u016a:"U",\u016b:"u",\u016c:"U",\u016d:"u",\u016e:"U",\u016f:"u",\u0170:"U",\u0171:"u",\u0172:"U",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017a:"z",\u017b:"Z",\u017c:"z",\u017d:"Z",\u017e:"z",\u0410:"A",\u0411:"B",\u0412:"V",\u0413:"G",\u0414:"D",\u0415:"E",\u0401:"E",\u0416:"ZH",\u0417:"Z",\u0418:"I",\u0419:"J",\u041a:"K",\u041b:"L",\u041c:"M",\u041d:"N",\u041e:"O",\u041f:"P",\u0420:"R",\u0421:"S",\u0422:"T",\u0423:"U",\u0424:"F",\u0425:"KH",\u0426:"C",\u0427:"CH",\u0428:"SH",\u0429:"SHCH",\u042a:"",\u042b:"Y",\u042c:"",\u042d:"E",\u042e:"YU",\u042f:"YA",\u0430:"a",\u0431:"b",\u0432:"v",\u0433:"g",\u0434:"d",\u0435:"e",\u0451:"e",\u0436:"zh",\u0437:"z",\u0438:"i",\u0439:"j",\u043a:"k",\u043b:"l",\u043c:"m",\u043d:"n",\u043e:"o",\u043f:"p",\u0440:"r",\u0441:"s",\u0442:"t",\u0443:"u",\u0444:"f",\u0445:"kh",\u0446:"c",\u0447:"ch",\u0448:"sh",\u0449:"shch",\u044a:"",\u044b:"y",\u044c:"",\u044d:"e",\u044e:"yu",\u044f:"ya"},E={};!function(){function Ge(){for(var xe in y(this,Ge),this.approximations={},_)this.approximate(xe,_[xe])}x(Ge,null,[{key:"getInstance",value:function(qe){return E[qe]=E[qe]||new Ge,E[qe]}}]),x(Ge,[{key:"approximate",value:function(qe,Xe){this.approximations[qe]=Xe}},{key:"transliterate",value:function(qe,Xe){var lt=this;return qe.replace(/[^\u0000-\u007f]/g,function(He){return lt.approximations[He]||Xe||"?"})}}])}()},5035:it=>{it.exports="function"==typeof Object.create?function(u,e){e&&(u.super_=e,u.prototype=Object.create(e.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}))}:function(u,e){if(e){u.super_=e;var n=function(){};n.prototype=e.prototype,u.prototype=new n,u.prototype.constructor=u}}},7478:(it,K,u)=>{var e,n,y;void 0!==(n="function"==typeof(e=y=function(){function y(){for(var c=0,d={};c<arguments.length;c++){var p=arguments[c];for(var z in p)d[z]=p[z]}return d}function x(c){return c.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function $(c){function d(){}function p(S,V,N){if("undefined"!=typeof document){"number"==typeof(N=y({path:"/"},d.defaults,N)).expires&&(N.expires=new Date(1*new Date+864e5*N.expires)),N.expires=N.expires?N.expires.toUTCString():"";try{var U=JSON.stringify(V);/^[\{\[]/.test(U)&&(V=U)}catch{}V=c.write?c.write(V,S):encodeURIComponent(String(V)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),S=encodeURIComponent(String(S)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var H="";for(var Q in N)!N[Q]||(H+="; "+Q,!0!==N[Q]&&(H+="="+N[Q].split(";")[0]));return document.cookie=S+"="+V+H}}function z(S,V){if("undefined"!=typeof document){for(var N={},U=document.cookie?document.cookie.split("; "):[],H=0;H<U.length;H++){var Q=U[H].split("="),Z=Q.slice(1).join("=");!V&&'"'===Z.charAt(0)&&(Z=Z.slice(1,-1));try{var ue=x(Q[0]);if(Z=(c.read||c)(Z,ue)||x(Z),V)try{Z=JSON.parse(Z)}catch{}if(N[ue]=Z,S===ue)break}catch{}}return S?N[S]:N}}return d.set=p,d.get=function(S){return z(S,!1)},d.getJSON=function(S){return z(S,!0)},d.remove=function(S,V){p(S,"",y(V,{expires:-1}))},d.defaults={},d.withConverter=$,d}(function(){})})?e.call(K,u,K,it):e)&&(it.exports=n),it.exports=y()},3909:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0});var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(H){return typeof H}:function(H){return H&&"function"==typeof Symbol&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},n=function(){function H(Q,Z){for(var ue=0;ue<Z.length;ue++){var G=Z[ue];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(Q,G.key,G)}}return function(Q,Z,ue){return Z&&H(Q.prototype,Z),ue&&H(Q,ue),Q}}(),x=V(u(1035)),$=u(9492),d=V(u(7416)),p=u(4567),S=V(u(7726));function V(H){return H&&H.__esModule?H:{default:H}}function N(H,Q){if(!(H instanceof Q))throw new TypeError("Cannot call a class as a function")}var U=function(){function H(Q){var Z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},ue=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var G in N(this,H),this.factMap=new Map(Q),this.factResultsCache=new Map,this.allowUndefinedFacts=Boolean(ue.allowUndefinedFacts),Z){var X=void 0;X=Z[G]instanceof x.default?Z[G]:new x.default(G,Z[G]),this._addConstantFact(X),(0,d.default)("almanac::constructor initialized runtime fact:"+X.id+" with "+X.value+"<"+e(X.value)+">")}}return n(H,[{key:"_getFact",value:function(Z){return this.factMap.get(Z)}},{key:"_addConstantFact",value:function(Z){this.factMap.set(Z.id,Z),this._setFactValue(Z,{},Z.value)}},{key:"_setFactValue",value:function(Z,ue,G){var X=Z.getCacheKey(ue),ee=Promise.resolve(G);return X&&this.factResultsCache.set(X,ee),ee}},{key:"addRuntimeFact",value:function(Z,ue){(0,d.default)("almanac::addRuntimeFact id:"+Z);var G=new x.default(Z,ue);return this._addConstantFact(G)}},{key:"factValue",value:function(Z){var ue=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},G=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",X=void 0,ee=this._getFact(Z);if(void 0===ee)return this.allowUndefinedFacts?Promise.resolve(void 0):Promise.reject(new $.UndefinedFactError("Undefined fact: "+Z));if(ee.isConstant())X=Promise.resolve(ee.calculate(ue,this));else{var ve=ee.getCacheKey(ue),Oe=ve&&this.factResultsCache.get(ve);Oe?(X=Promise.resolve(Oe),(0,d.default)("almanac::factValue cache hit for fact:"+Z)):((0,d.default)("almanac::factValue cache miss for fact:"+Z+"; calculating"),X=this._setFactValue(ee,ue,ee.calculate(ue,this)))}if(G){if("string"==typeof G&&G.startsWith("$"))return(0,d.default)("condition::evaluate extracting object property "+G),X.then(function(be){if((0,S.default)(be)){var m=(0,p.JSONPath)({path:G,json:be,wrap:!1});return(0,d.default)("condition::evaluate extracting object property "+G+", received: "+m),m}return(0,d.default)("condition::evaluate could not compute object path("+G+") of non-object: "+be+" <"+(void 0===be?"undefined":e(be))+">; continuing with "+be),be});var Le=void 0;try{Le=u(7559)}catch{throw console.error('Oops! Looks like you\'re trying to use the deprecated syntax for the ".path" property.'),console.error('Please convert your "path" properties to JsonPath syntax (ensure your path starts with "$")'),console.error('Alternatively, if you wish to continue using old syntax (provided by selectn), you may "npm install selectn" as a direct dependency.'),console.error("See https://github.com/CacheControl/json-rules-engine/blob/master/CHANGELOG.md#500--2019-10-27 for more information."),new Error('json-rules-engine: Unmet peer dependency "selectn" required for use of deprecated ".path" syntax. please "npm install selectn" or convert to json-path syntax')}return X.then(function(be){if((0,S.default)(be)){var m=Le(G)(be);return(0,d.default)("condition::evaluate extracting object property "+G+", received: "+m),m}return(0,d.default)("condition::evaluate could not compute object path("+G+") of non-object: "+be+" <"+(void 0===be?"undefined":e(be))+">; continuing with "+be),be})}return X}}]),H}();K.default=U},7396:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0});var e=function(){function z(S,V){for(var N=0;N<V.length;N++){var U=V[N];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(S,U.key,U)}}return function(S,V,N){return V&&z(S.prototype,V),N&&z(S,N),S}}(),y=c(u(7416)),$=c(u(7726));function c(z){return z&&z.__esModule?z:{default:z}}var p=function(){function z(S){if(function d(z,S){if(!(z instanceof S))throw new TypeError("Cannot call a class as a function")}(this,z),!S)throw new Error("Condition: constructor options required");var V=z.booleanOperator(S);if(Object.assign(this,S),V){var N=S[V];if(!Array.isArray(N))throw new Error('"'+V+'" must be an array');this.operator=V,this.priority=parseInt(S.priority,10)||1,this[V]=N.map(function(U){return new z(U)})}else{if(!Object.prototype.hasOwnProperty.call(S,"fact"))throw new Error('Condition: constructor "fact" property required');if(!Object.prototype.hasOwnProperty.call(S,"operator"))throw new Error('Condition: constructor "operator" property required');if(!Object.prototype.hasOwnProperty.call(S,"value"))throw new Error('Condition: constructor "value" property required');Object.prototype.hasOwnProperty.call(S,"priority")&&(S.priority=parseInt(S.priority,10))}}return e(z,[{key:"toJSON",value:function(){var V=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],N={};this.priority&&(N.priority=this.priority);var U=z.booleanOperator(this);return U?N[U]=this[U].map(function(H){return H.toJSON(V)}):(N.operator=this.operator,N.value=this.value,N.fact=this.fact,void 0!==this.factResult&&(N.factResult=this.factResult),void 0!==this.result&&(N.result=this.result),this.params&&(N.params=this.params),this.path&&(N.path=this.path)),V?JSON.stringify(N):N}},{key:"_getValue",value:function(V){var N=this.value;return(0,$.default)(N)&&Object.prototype.hasOwnProperty.call(N,"fact")?V.factValue(N.fact,N.params,N.path):Promise.resolve(N)}},{key:"evaluate",value:function(V,N){var U=this;if(!V)return Promise.reject(new Error("almanac required"));if(!N)return Promise.reject(new Error("operatorMap required"));if(this.isBooleanOperator())return Promise.reject(new Error("Cannot evaluate() a boolean condition"));var H=N.get(this.operator);return H?this._getValue(V).then(function(Q){return V.factValue(U.fact,U.params,U.path).then(function(Z){var ue=H.evaluate(Z,Q);return(0,y.default)("condition::evaluate <"+Z+" "+U.operator+" "+Q+"?> ("+ue+")"),{result:ue,leftHandSideValue:Z,rightHandSideValue:Q,operator:U.operator}})}):Promise.reject(new Error("Unknown operator: "+this.operator))}},{key:"booleanOperator",value:function(){return z.booleanOperator(this)}},{key:"isBooleanOperator",value:function(){return void 0!==z.booleanOperator(this)}}],[{key:"booleanOperator",value:function(V){return Object.prototype.hasOwnProperty.call(V,"any")?"any":Object.prototype.hasOwnProperty.call(V,"all")?"all":void 0}}]),z}();K.default=p},7416:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.default=function u(e){try{("undefined"!=typeof process&&process.env&&process.env.DEBUG&&process.env.DEBUG.match(/json-rules-engine/)||"undefined"!=typeof window&&window.localStorage&&window.localStorage.debug&&window.localStorage.debug.match(/json-rules-engine/))&&console.log(e)}catch{}}},4934:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0});var n=function y(c){return c&&c.__esModule?c:{default:c}}(u(8640)),x=[];function $(c){return"NaN"!==Number.parseFloat(c).toString()}x.push(new n.default("equal",function(c,d){return c===d})),x.push(new n.default("notEqual",function(c,d){return c!==d})),x.push(new n.default("in",function(c,d){return d.indexOf(c)>-1})),x.push(new n.default("notIn",function(c,d){return-1===d.indexOf(c)})),x.push(new n.default("contains",function(c,d){return c.indexOf(d)>-1},Array.isArray)),x.push(new n.default("doesNotContain",function(c,d){return-1===c.indexOf(d)},Array.isArray)),x.push(new n.default("lessThan",function(c,d){return c<d},$)),x.push(new n.default("lessThanInclusive",function(c,d){return c<=d},$)),x.push(new n.default("greaterThan",function(c,d){return c>d},$)),x.push(new n.default("greaterThanInclusive",function(c,d){return c>=d},$)),K.default=x},4307:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.SuccessEventFact=function(){var n=[];return function(){var y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y.event&&n.push(y.event),n}}},7386:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0}),K.FINISHED=K.RUNNING=K.READY=void 0;var e=function(){function be(m,P){for(var b=0;b<P.length;b++){var _=P[b];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(m,_.key,_)}}return function(m,P,b){return P&&be(m.prototype,P),b&&be(m,b),m}}(),y=Z(u(1035)),$=Z(u(8847)),d=Z(u(8640)),z=Z(u(3909)),S=u(3358),V=u(4307),U=Z(u(4934)),Q=Z(u(7416));function Z(be){return be&&be.__esModule?be:{default:be}}function ue(be,m){if(!(be instanceof m))throw new TypeError("Cannot call a class as a function")}function G(be,m){if(!be)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!m||"object"!=typeof m&&"function"!=typeof m?be:m}var ee=K.READY="READY",ve=K.RUNNING="RUNNING",Oe=K.FINISHED="FINISHED",Le=function(be){function m(){var P=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ue(this,m);var _=G(this,(m.__proto__||Object.getPrototypeOf(m)).call(this));return _.rules=[],_.allowUndefinedFacts=b.allowUndefinedFacts||!1,_.operators=new Map,_.facts=new Map,_.status=ee,P.map(function(R){return _.addRule(R)}),U.default.map(function(R){return _.addOperator(R)}),_}return function X(be,m){if("function"!=typeof m&&null!==m)throw new TypeError("Super expression must either be null or a function, not "+typeof m);be.prototype=Object.create(m&&m.prototype,{constructor:{value:be,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(be,m):be.__proto__=m)}(m,be),e(m,[{key:"addRule",value:function(b){if(!b)throw new Error("Engine: addRule() requires options");if(!Object.prototype.hasOwnProperty.call(b,"conditions"))throw new Error('Engine: addRule() argument requires "conditions" property');if(!Object.prototype.hasOwnProperty.call(b,"event"))throw new Error('Engine: addRule() argument requires "event" property');var _=void 0;return(_=b instanceof $.default?b:new $.default(b)).setEngine(this),this.rules.push(_),this.prioritizedRules=null,this}},{key:"removeRule",value:function(b){if(!(b instanceof $.default))throw new Error("Engine: removeRule() rule must be a instance of Rule");var _=this.rules.indexOf(b);return-1!==_&&(this.prioritizedRules=null,Boolean(this.rules.splice(_,1).length))}},{key:"addOperator",value:function(b,_){var R;R=b instanceof d.default?b:new d.default(b,_),(0,Q.default)("engine::addOperator name:"+R.name),this.operators.set(R.name,R)}},{key:"removeOperator",value:function(b){return this.operators.delete(b instanceof d.default?b.name:b)}},{key:"addFact",value:function(b,_,R){var E=b,ne=void 0;return b instanceof y.default?(E=b.id,ne=b):ne=new y.default(b,_,R),(0,Q.default)("engine::addFact id:"+E),this.facts.set(E,ne),this}},{key:"removeFact",value:function(b){return this.facts.delete(b instanceof y.default?b.id:b)}},{key:"prioritizeRules",value:function(){if(!this.prioritizedRules){var b=this.rules.reduce(function(_,R){var E=R.priority;return _[E]||(_[E]=[]),_[E].push(R),_},{});this.prioritizedRules=Object.keys(b).sort(function(_,R){return Number(_)>Number(R)?-1:1}).map(function(_){return b[_]})}return this.prioritizedRules}},{key:"stop",value:function(){return this.status=Oe,this}},{key:"getFact",value:function(b){return this.facts.get(b)}},{key:"evaluateRules",value:function(b,_){var R=this;return Promise.all(b.map(function(E){if(R.status===ve)return E.evaluate(_).then(function(ne){(0,Q.default)("engine::run ruleResult:"+ne.result),ne.result?(R.emit("success",E.event,_,ne),R.emit(E.event.type,E.event.params,_,ne),_.factValue("success-events",{event:E.event})):R.emit("failure",E.event,_,ne)});(0,Q.default)("engine::run status:"+R.status+"; skipping remaining rules")}))}},{key:"run",value:function(){var b=this,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,Q.default)("engine::run started"),(0,Q.default)("engine::run runtimeFacts:",_),_["success-events"]=new y.default("success-events",(0,V.SuccessEventFact)(),{cache:!1}),this.status=ve;var R=new z.default(this.facts,_,{allowUndefinedFacts:this.allowUndefinedFacts}),E=this.prioritizeRules(),ne=Promise.resolve();return new Promise(function(me,Ee){E.map(function(se){return ne=ne.then(function(){return b.evaluateRules(se,R)}).catch(Ee)}),ne.then(function(){return b.status=Oe,(0,Q.default)("engine::run completed"),R.factValue("success-events")}).then(function(se){me({events:se,almanac:R})}).catch(Ee)})}}]),m}(S.EventEmitter);K.default=Le},9492:(it,K)=>{function u(x,$){if(!(x instanceof $))throw new TypeError("Cannot call a class as a function")}function e(x,$){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!$||"object"!=typeof $&&"function"!=typeof $?x:$}Object.defineProperty(K,"__esModule",{value:!0}),K.UndefinedFactError=function(x){function $(){var c;u(this,$);for(var d=arguments.length,p=Array(d),z=0;z<d;z++)p[z]=arguments[z];var S=e(this,(c=$.__proto__||Object.getPrototypeOf($)).call.apply(c,[this].concat(p)));return S.code="UNDEFINED_FACT",S}return function n(x,$){if("function"!=typeof $&&null!==$)throw new TypeError("Super expression must either be null or a function, not "+typeof $);x.prototype=Object.create($&&$.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),$&&(Object.setPrototypeOf?Object.setPrototypeOf(x,$):x.__proto__=$)}($,Error),$}()},1035:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0});var e=function(){function d(p,z){for(var S=0;S<z.length;S++){var V=z[S];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(p,V.key,V)}}return function(p,z,S){return z&&d(p.prototype,z),S&&d(p,S),p}}(),y=function x(d){return d&&d.__esModule?d:{default:d}}(u(8288)),c=function(){function d(p,z,S){(function $(d,p){if(!(d instanceof p))throw new TypeError("Cannot call a class as a function")})(this,d),this.id=p;var V={cache:!0};if(void 0===S&&(S=V),"function"!=typeof z?(this.value=z,this.type=this.constructor.CONSTANT):(this.calculationMethod=z,this.type=this.constructor.DYNAMIC),!this.id)throw new Error("factId required");return this.priority=parseInt(S.priority||1,10),this.options=Object.assign({},V,S),this.cacheKeyMethod=this.defaultCacheKeys,this}return e(d,[{key:"isConstant",value:function(){return this.type===this.constructor.CONSTANT}},{key:"isDynamic",value:function(){return this.type===this.constructor.DYNAMIC}},{key:"calculate",value:function(z,S){return Object.prototype.hasOwnProperty.call(this,"value")?this.value:this.calculationMethod(z,S)}},{key:"defaultCacheKeys",value:function(z,S){return{params:S,id:z}}},{key:"getCacheKey",value:function(z){if(!0===this.options.cache){var S=this.cacheKeyMethod(this.id,z);return d.hashFromObject(S)}}}],[{key:"hashFromObject",value:function(z){return(0,y.default)(z)}}]),d}();c.CONSTANT="CONSTANT",c.DYNAMIC="DYNAMIC",K.default=c},78:(it,K,u)=>{it.exports=u(1412)},1412:(it,K,u)=>{K.Engine=K.Rule=void 0;var y=S(u(7386)),d=(S(u(1035)),S(u(8847)));S(u(8640));function S(V){return V&&V.__esModule?V:{default:V}}K.Rule=d.default,K.Engine=y.default},8640:(it,K)=>{Object.defineProperty(K,"__esModule",{value:!0});var u=function(){function y(x,$){for(var c=0;c<$.length;c++){var d=$[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(x,d.key,d)}}return function(x,$,c){return $&&y(x.prototype,$),c&&y(x,c),x}}(),n=function(){function y(x,$,c){if(function e(y,x){if(!(y instanceof x))throw new TypeError("Cannot call a class as a function")}(this,y),this.name=String(x),!x)throw new Error("Missing operator name");if("function"!=typeof $)throw new Error("Missing operator callback");this.cb=$,this.factValueValidator=c,this.factValueValidator||(this.factValueValidator=function(){return!0})}return u(y,[{key:"evaluate",value:function($,c){return this.factValueValidator($)&&this.cb($,c)}}]),y}();K.default=n},2747:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0});var e=function(){function d(p,z){for(var S=0;S<z.length;S++){var V=z[S];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(p,V.key,V)}}return function(p,z,S){return z&&d(p.prototype,z),S&&d(p,S),p}}(),y=function x(d){return d&&d.__esModule?d:{default:d}}(u(741)),c=function(){function d(p,z,S,V){(function $(d,p){if(!(d instanceof p))throw new TypeError("Cannot call a class as a function")})(this,d),this.conditions=(0,y.default)(p),this.event=(0,y.default)(z),this.priority=(0,y.default)(S),this.name=(0,y.default)(V),this.result=null}return e(d,[{key:"setResult",value:function(z){this.result=z}},{key:"toJSON",value:function(){var z=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],S={conditions:this.conditions.toJSON(!1),event:this.event,priority:this.priority,name:this.name,result:this.result};return z?JSON.stringify(S):S}}]),d}();K.default=c},8847:(it,K,u)=>{Object.defineProperty(K,"__esModule",{value:!0});var e=function(){function H(Q,Z){for(var ue=0;ue<Z.length;ue++){var G=Z[ue];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(Q,G.key,G)}}return function(Q,Z,ue){return Z&&H(Q.prototype,Z),ue&&H(Q,ue),Q}}(),y=z(u(7396)),$=z(u(2747)),c=u(3358),p=z(u(7416));function z(H){return H&&H.__esModule?H:{default:H}}var U=function(H){function Q(Z){!function S(H,Q){if(!(H instanceof Q))throw new TypeError("Cannot call a class as a function")}(this,Q);var ue=function V(H,Q){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!Q||"object"!=typeof Q&&"function"!=typeof Q?H:Q}(this,(Q.__proto__||Object.getPrototypeOf(Q)).call(this));return"string"==typeof Z&&(Z=JSON.parse(Z)),Z&&Z.conditions&&ue.setConditions(Z.conditions),Z&&Z.onSuccess&&ue.on("success",Z.onSuccess),Z&&Z.onFailure&&ue.on("failure",Z.onFailure),Z&&(Z.name||0===Z.name)&&ue.setName(Z.name),ue.setPriority(Z&&Z.priority||1),ue.setEvent(Z&&Z.event||{type:"unknown"}),ue}return function N(H,Q){if("function"!=typeof Q&&null!==Q)throw new TypeError("Super expression must either be null or a function, not "+typeof Q);H.prototype=Object.create(Q&&Q.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),Q&&(Object.setPrototypeOf?Object.setPrototypeOf(H,Q):H.__proto__=Q)}(Q,H),e(Q,[{key:"setPriority",value:function(ue){if((ue=parseInt(ue,10))<=0)throw new Error("Priority must be greater than zero");return this.priority=ue,this}},{key:"setName",value:function(ue){if(!ue&&0!==ue)throw new Error('Rule "name" must be defined');return this.name=ue,this}},{key:"setConditions",value:function(ue){if(!Object.prototype.hasOwnProperty.call(ue,"all")&&!Object.prototype.hasOwnProperty.call(ue,"any"))throw new Error('"conditions" root must contain a single instance of "all" or "any"');return this.conditions=new y.default(ue),this}},{key:"setEvent",value:function(ue){if(!ue)throw new Error("Rule: setEvent() requires event object");if(!Object.prototype.hasOwnProperty.call(ue,"type"))throw new Error('Rule: setEvent() requires event object with "type" property');return this.event={type:ue.type},ue.params&&(this.event.params=ue.params),this}},{key:"setEngine",value:function(ue){return this.engine=ue,this}},{key:"toJSON",value:function(){var ue=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],G={conditions:this.conditions.toJSON(!1),priority:this.priority,event:this.event,name:this.name};return ue?JSON.stringify(G):G}},{key:"prioritizeConditions",value:function(ue){var G=this,X=ue.reduce(function(ee,ve){var Oe=ve.priority;if(!Oe){var Le=G.engine.getFact(ve.fact);Oe=Le&&Le.priority||1}return ee[Oe]||(ee[Oe]=[]),ee[Oe].push(ve),ee},{});return Object.keys(X).sort(function(ee,ve){return Number(ee)>Number(ve)?-1:1}).map(function(ee){return X[ee]})}},{key:"evaluate",value:function(ue){var G=this,X=new $.default(this.conditions,this.event,this.priority,this.name),Oe=function(b,_){if(0===b.length)return Promise.resolve(!0);var R=Array.prototype.some;"all"===_&&(R=Array.prototype.every);for(var E=G.prioritizeConditions(b),ne=Promise.resolve(),me=function(ze){var Ge=E[ze],xe=!1;ne=ne.then(function(qe){return"any"===_&&!0===qe||xe?((0,p.default)("prioritizeAndRun::detected truthy result; skipping remaining conditions"),xe=!0,!0):"all"===_&&!1===qe||xe?((0,p.default)("prioritizeAndRun::detected falsey result; skipping remaining conditions"),xe=!0,!1):function(b,_){return Array.isArray(b)||(b=[b]),Promise.all(b.map(function(R){return function(b){if(b.isBooleanOperator()){var _=b[b.operator];return("all"===b.operator?be(_):Le(_)).then(function(E){var ne=!0===E;return b.result=ne,ne})}return b.evaluate(ue,G.engine.operators).then(function(E){var ne=E.result;return b.factResult=E.leftHandSideValue,b.result=ne,ne})}(R)})).then(function(R){return(0,p.default)("rule::evaluateConditions results",R),_.call(R,function(E){return!0===E})})}(Ge,R)})},Ee=0;Ee<E.length;Ee++)me(Ee);return ne},Le=function(b){return Oe(b,"any")},be=function(b){return Oe(b,"all")},m=function(b){return X.setResult(b),G.emit(b?"success":"failure",X.event,ue,X),X};return X.conditions.any?Le(X.conditions.any).then(function(P){return m(P)}):be(X.conditions.all).then(function(P){return m(P)})}}]),Q}(c.EventEmitter);K.default=U},741:it=>{var K=function(){"use strict";function u(S,V){return null!=V&&S instanceof V}var e,n,y;try{e=Map}catch{e=function(){}}try{n=Set}catch{n=function(){}}try{y=Promise}catch{y=function(){}}function x(S,V,N,U,H){"object"==typeof V&&(N=V.depth,U=V.prototype,H=V.includeNonEnumerable,V=V.circular);var Q=[],Z=[],ue="undefined"!=typeof Buffer;return void 0===V&&(V=!0),void 0===N&&(N=1/0),function G(X,ee){if(null===X)return null;if(0===ee)return X;var ve,Oe;if("object"!=typeof X)return X;if(u(X,e))ve=new e;else if(u(X,n))ve=new n;else if(u(X,y))ve=new y(function(ne,me){X.then(function(Ee){ne(G(Ee,ee-1))},function(Ee){me(G(Ee,ee-1))})});else if(x.__isArray(X))ve=[];else if(x.__isRegExp(X))ve=new RegExp(X.source,z(X)),X.lastIndex&&(ve.lastIndex=X.lastIndex);else if(x.__isDate(X))ve=new Date(X.getTime());else{if(ue&&Buffer.isBuffer(X))return ve=Buffer.allocUnsafe?Buffer.allocUnsafe(X.length):new Buffer(X.length),X.copy(ve),ve;u(X,Error)?ve=Object.create(X):void 0===U?(Oe=Object.getPrototypeOf(X),ve=Object.create(Oe)):(ve=Object.create(U),Oe=U)}if(V){var Le=Q.indexOf(X);if(-1!=Le)return Z[Le];Q.push(X),Z.push(ve)}for(var be in u(X,e)&&X.forEach(function(ne,me){var Ee=G(me,ee-1),se=G(ne,ee-1);ve.set(Ee,se)}),u(X,n)&&X.forEach(function(ne){var me=G(ne,ee-1);ve.add(me)}),X){var m;Oe&&(m=Object.getOwnPropertyDescriptor(Oe,be)),(!m||null!=m.set)&&(ve[be]=G(X[be],ee-1))}if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(X);for(be=0;be<P.length;be++){var b=P[be];(_=Object.getOwnPropertyDescriptor(X,b))&&!_.enumerable&&!H||(ve[b]=G(X[b],ee-1),_.enumerable||Object.defineProperty(ve,b,{enumerable:!1}))}}if(H){var R=Object.getOwnPropertyNames(X);for(be=0;be<R.length;be++){var _,E=R[be];(_=Object.getOwnPropertyDescriptor(X,E))&&_.enumerable||(ve[E]=G(X[E],ee-1),Object.defineProperty(ve,E,{enumerable:!1}))}}return ve}(S,N)}function $(S){return Object.prototype.toString.call(S)}function z(S){var V="";return S.global&&(V+="g"),S.ignoreCase&&(V+="i"),S.multiline&&(V+="m"),V}return x.clonePrototype=function(V){if(null===V)return null;var N=function(){};return N.prototype=V,new N},x.__objToStr=$,x.__isDate=function c(S){return"object"==typeof S&&"[object Date]"===$(S)},x.__isArray=function d(S){return"object"==typeof S&&"[object Array]"===$(S)},x.__isRegExp=function p(S){return"object"==typeof S&&"[object RegExp]"===$(S)},x.__getRegExpFlags=z,x}();it.exports&&(it.exports=K)},4567:(it,K,u)=>{function e(_){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(R){return typeof R}:function(R){return R&&"function"==typeof Symbol&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R})(_)}function x(_){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(E){return E.__proto__||Object.getPrototypeOf(E)})(_)}function $(_,R){return($=Object.setPrototypeOf||function(ne,me){return ne.__proto__=me,ne})(_,R)}function c(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function d(_,R,E){return(d=c()?Reflect.construct:function(me,Ee,se){var ze=[null];ze.push.apply(ze,Ee);var xe=new(Function.bind.apply(me,ze));return se&&$(xe,se.prototype),xe}).apply(null,arguments)}function z(_){var R="function"==typeof Map?new Map:void 0;return z=function(ne){if(null===ne||!function p(_){return-1!==Function.toString.call(_).indexOf("[native code]")}(ne))return ne;if("function"!=typeof ne)throw new TypeError("Super expression must either be null or a function");if(void 0!==R){if(R.has(ne))return R.get(ne);R.set(ne,me)}function me(){return d(ne,arguments,x(this).constructor)}return me.prototype=Object.create(ne.prototype,{constructor:{value:me,enumerable:!1,writable:!0,configurable:!0}}),$(me,ne)},z(_)}function V(_,R){return!R||"object"!=typeof R&&"function"!=typeof R?function S(_){if(void 0===_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}(_):R}function U(_){return function H(_){if(Array.isArray(_))return ue(_)}(_)||function Q(_){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(_))return Array.from(_)}(_)||Z(_)||function G(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(_,R){if(_){if("string"==typeof _)return ue(_,R);var E=Object.prototype.toString.call(_).slice(8,-1);if("Object"===E&&_.constructor&&(E=_.constructor.name),"Map"===E||"Set"===E)return Array.from(E);if("Arguments"===E||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E))return ue(_,R)}}function ue(_,R){(null==R||R>_.length)&&(R=_.length);for(var E=0,ne=new Array(R);E<R;E++)ne[E]=_[E];return ne}u.r(K),u.d(K,{JSONPath:()=>b});var ve=Object.prototype.hasOwnProperty,Le=(b.nodeVMSupported=function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}())?u(6989):{runInNewContext:function(R,E){var ne=Object.keys(E),me=[];!function(R,E,ne){for(var me=R.length,Ee=0;Ee<me;Ee++)ne(R[Ee])&&E.push(R.splice(Ee--,1)[0])}(ne,me,function(xe){return"function"==typeof E[xe]});var Ee=ne.map(function(xe,qe){return E[xe]});!(R=me.reduce(function(xe,qe){var Xe=E[qe].toString();return/function/.test(Xe)||(Xe="function "+Xe),"var "+qe+"="+Xe+";"+xe},"")+R).match(/(["'])use strict\1/)&&!ne.includes("arguments")&&(R="var arguments = undefined;"+R);var ze=(R=R.replace(/;[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*$/,"")).lastIndexOf(";"),Ge=ze>-1?R.slice(0,ze+1)+" return "+R.slice(ze+1):" return "+R;return d(Function,U(ne).concat([Ge])).apply(void 0,U(Ee))}};function be(_,R){return(_=_.slice()).push(R),_}function m(_,R){return(R=R.slice()).unshift(_),R}var P=function(_){!function y(_,R){if("function"!=typeof R&&null!==R)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(R&&R.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),R&&$(_,R)}(E,_);var R=function N(_){return function(){var E,R=x(_);if(c()){var ne=x(this).constructor;E=Reflect.construct(R,arguments,ne)}else E=R.apply(this,arguments);return V(this,E)}}(E);function E(ne){var me;return function n(_,R){if(!(_ instanceof R))throw new TypeError("Cannot call a class as a function")}(this,E),(me=R.call(this,'JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)')).avoidNew=!0,me.value=ne,me.name="NewError",me}return E}(z(Error));function b(_,R,E,ne,me){if(!(this instanceof b))try{return new b(_,R,E,ne,me)}catch(Ge){if(!Ge.avoidNew)throw Ge;return Ge.value}"string"==typeof _&&(me=ne,ne=E,E=R,R=_,_=null);var Ee=_&&"object"===e(_);if(this.json=(_=_||{}).json||E,this.path=_.path||R,this.resultType=_.resultType||"value",this.flatten=_.flatten||!1,this.wrap=!ve.call(_,"wrap")||_.wrap,this.sandbox=_.sandbox||{},this.preventEval=_.preventEval||!1,this.parent=_.parent||null,this.parentProperty=_.parentProperty||null,this.callback=_.callback||ne||null,this.otherTypeCallback=_.otherTypeCallback||me||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},!1!==_.autostart){var se={path:Ee?_.path:R};Ee?"json"in _&&(se.json=_.json):se.json=E;var ze=this.evaluate(se);if(!ze||"object"!==e(ze))throw new P(ze);return ze}}b.prototype.evaluate=function(_,R,E,ne){var me=this,Ee=this.parent,se=this.parentProperty,ze=this.flatten,Ge=this.wrap;if(this.currResultType=this.resultType,this.currPreventEval=this.preventEval,this.currSandbox=this.sandbox,E=E||this.callback,this.currOtherTypeCallback=ne||this.otherTypeCallback,R=R||this.json,(_=_||this.path)&&"object"===e(_)&&!Array.isArray(_)){if(!_.path&&""!==_.path)throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!ve.call(_,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');R=_.json,ze=ve.call(_,"flatten")?_.flatten:ze,this.currResultType=ve.call(_,"resultType")?_.resultType:this.currResultType,this.currSandbox=ve.call(_,"sandbox")?_.sandbox:this.currSandbox,Ge=ve.call(_,"wrap")?_.wrap:Ge,this.currPreventEval=ve.call(_,"preventEval")?_.preventEval:this.currPreventEval,E=ve.call(_,"callback")?_.callback:E,this.currOtherTypeCallback=ve.call(_,"otherTypeCallback")?_.otherTypeCallback:this.currOtherTypeCallback,Ee=ve.call(_,"parent")?_.parent:Ee,se=ve.call(_,"parentProperty")?_.parentProperty:se,_=_.path}if(Ee=Ee||null,se=se||null,Array.isArray(_)&&(_=b.toPathString(_)),(_||""===_)&&R){this._obj=R;var qe=b.toPathArray(_);"$"===qe[0]&&qe.length>1&&qe.shift(),this._hasParentSelector=null;var Xe=this._trace(qe,R,["$"],Ee,se,E).filter(function(lt){return lt&&!lt.isParentSelector});return Xe.length?Ge||1!==Xe.length||Xe[0].hasArrExpr?Xe.reduce(function(lt,He){var Ye=me._getPreferredOutput(He);return ze&&Array.isArray(Ye)?lt=lt.concat(Ye):lt.push(Ye),lt},[]):this._getPreferredOutput(Xe[0]):Ge?[]:void 0}},b.prototype._getPreferredOutput=function(_){var R=this.currResultType;switch(R){default:throw new TypeError("Unknown result type");case"all":var E=Array.isArray(_.path)?_.path:b.toPathArray(_.path);return _.pointer=b.toPointer(E),_.path="string"==typeof _.path?_.path:b.toPathString(_.path),_;case"value":case"parent":case"parentProperty":return _[R];case"path":return b.toPathString(_[R]);case"pointer":return b.toPointer(_.path)}},b.prototype._handleCallback=function(_,R,E){if(R){var ne=this._getPreferredOutput(_);_.path="string"==typeof _.path?_.path:b.toPathString(_.path),R(ne,E,_)}},b.prototype._trace=function(_,R,E,ne,me,Ee,se,ze){var Ge,xe=this;if(!_.length)return this._handleCallback(Ge={path:E,value:R,parent:ne,parentProperty:me,hasArrExpr:se},Ee,"value"),Ge;var qe=_[0],Xe=_.slice(1),lt=[];function He(C){Array.isArray(C)?C.forEach(function(g){lt.push(g)}):lt.push(C)}if(("string"!=typeof qe||ze)&&R&&ve.call(R,qe))He(this._trace(Xe,R[qe],be(E,qe),R,qe,Ee,se));else if("*"===qe)this._walk(qe,Xe,R,E,ne,me,Ee,function(C,g,B,de,ye,Me,Qe,st){He(xe._trace(m(C,B),de,ye,Me,Qe,st,!0,!0))});else if(".."===qe)He(this._trace(Xe,R,E,ne,me,Ee,se)),this._walk(qe,Xe,R,E,ne,me,Ee,function(C,g,B,de,ye,Me,Qe,st){"object"===e(de[C])&&He(xe._trace(m(g,B),de[C],be(ye,C),de,C,st,!0))});else{if("^"===qe)return this._hasParentSelector=!0,{path:E.slice(0,-1),expr:Xe,isParentSelector:!0};if("~"===qe)return Ge={path:be(E,qe),value:me,parent:ne,parentProperty:null},this._handleCallback(Ge,Ee,"property"),Ge;if("$"===qe)He(this._trace(Xe,R,E,null,null,Ee,se));else if(/^(\x2D?[0-9]*):(\x2D?[0-9]*):?([0-9]*)$/.test(qe))He(this._slice(qe,Xe,R,E,ne,me,Ee));else if(0===qe.indexOf("?(")){if(this.currPreventEval)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");this._walk(qe,Xe,R,E,ne,me,Ee,function(C,g,B,de,ye,Me,Qe,st){xe._eval(g.replace(/^\?\(((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?)\)$/,"$1"),de[C],C,ye,Me,Qe)&&He(xe._trace(m(C,B),de,ye,Me,Qe,st,!0))})}else if("("===qe[0]){if(this.currPreventEval)throw new Error("Eval [(expr)] prevented in JSONPath expression.");He(this._trace(m(this._eval(qe,R,E[E.length-1],E.slice(0,-1),ne,me),Xe),R,E,ne,me,Ee,se))}else if("@"===qe[0]){var Ye=!1,ht=qe.slice(1,-2);switch(ht){default:throw new TypeError("Unknown value type "+ht);case"scalar":(!R||!["object","function"].includes(e(R)))&&(Ye=!0);break;case"boolean":case"string":case"undefined":case"function":e(R)===ht&&(Ye=!0);break;case"integer":Number.isFinite(R)&&!(R%1)&&(Ye=!0);break;case"number":Number.isFinite(R)&&(Ye=!0);break;case"nonFinite":"number"==typeof R&&!Number.isFinite(R)&&(Ye=!0);break;case"object":R&&e(R)===ht&&(Ye=!0);break;case"array":Array.isArray(R)&&(Ye=!0);break;case"other":Ye=this.currOtherTypeCallback(R,E,ne,me);break;case"null":null===R&&(Ye=!0)}if(Ye)return this._handleCallback(Ge={path:E,value:R,parent:ne,parentProperty:me},Ee,"value"),Ge}else if("`"===qe[0]&&R&&ve.call(R,qe.slice(1))){var Se=qe.slice(1);He(this._trace(Xe,R[Se],be(E,Se),R,Se,Ee,se,!0))}else if(qe.includes(",")){var Fe,pe=function X(_){if("undefined"==typeof Symbol||null==_[Symbol.iterator]){if(Array.isArray(_)||(_=Z(_))){var R=0,E=function(){};return{s:E,n:function(){return R>=_.length?{done:!0}:{done:!1,value:_[R++]}},e:function(ze){throw ze},f:E}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var ne,se,me=!0,Ee=!1;return{s:function(){ne=_[Symbol.iterator]()},n:function(){var ze=ne.next();return me=ze.done,ze},e:function(ze){Ee=!0,se=ze},f:function(){try{!me&&null!=ne.return&&ne.return()}finally{if(Ee)throw se}}}}(qe.split(","));try{for(pe.s();!(Fe=pe.n()).done;)He(this._trace(m(Fe.value,Xe),R,E,ne,me,Ee,!0))}catch(C){pe.e(C)}finally{pe.f()}}else!ze&&R&&ve.call(R,qe)&&He(this._trace(Xe,R[qe],be(E,qe),R,qe,Ee,se,!0))}if(this._hasParentSelector)for(var we=0;we<lt.length;we++){var De=lt[we];if(De&&De.isParentSelector){var ut=xe._trace(De.expr,R,De.path,ne,me,Ee,se);if(Array.isArray(ut)){lt[we]=ut[0];for(var le=ut.length,D=1;D<le;D++)we++,lt.splice(we,0,ut[D])}else lt[we]=ut}}return lt},b.prototype._walk=function(_,R,E,ne,me,Ee,se,ze){if(Array.isArray(E))for(var Ge=E.length,xe=0;xe<Ge;xe++)ze(xe,_,R,E,ne,me,Ee,se);else E&&"object"===e(E)&&Object.keys(E).forEach(function(qe){ze(qe,_,R,E,ne,me,Ee,se)})},b.prototype._slice=function(_,R,E,ne,me,Ee,se){if(Array.isArray(E)){var ze=E.length,Ge=_.split(":"),xe=Ge[2]&&Number.parseInt(Ge[2])||1,qe=Ge[0]&&Number.parseInt(Ge[0])||0,Xe=Ge[1]&&Number.parseInt(Ge[1])||ze;qe=qe<0?Math.max(0,qe+ze):Math.min(ze,qe),Xe=Xe<0?Math.max(0,Xe+ze):Math.min(ze,Xe);for(var lt=[],He=qe;He<Xe;He+=xe)this._trace(m(He,R),E,ne,me,Ee,se,!0).forEach(function(ht){lt.push(ht)});return lt}},b.prototype._eval=function(_,R,E,ne,me,Ee){if(!this._obj||!R)return!1;_.includes("@parentProperty")&&(this.currSandbox._$_parentProperty=Ee,_=_.replace(/@parentProperty/g,"_$_parentProperty")),_.includes("@parent")&&(this.currSandbox._$_parent=me,_=_.replace(/@parent/g,"_$_parent")),_.includes("@property")&&(this.currSandbox._$_property=E,_=_.replace(/@property/g,"_$_property")),_.includes("@path")&&(this.currSandbox._$_path=b.toPathString(ne.concat([E])),_=_.replace(/@path/g,"_$_path")),_.includes("@root")&&(this.currSandbox._$_root=this.json,_=_.replace(/@root/g,"_$_root")),_.match(/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/)&&(this.currSandbox._$_v=R,_=_.replace(/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/g,"_$_v$1"));try{return Le.runInNewContext(_,this.currSandbox)}catch(se){throw console.log(se),new Error("jsonPath: "+se.message+": "+_)}},b.cache={},b.toPathString=function(_){for(var R=_,E=R.length,ne="$",me=1;me<E;me++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(R[me])||(ne+=/^[\*0-9]+$/.test(R[me])?"["+R[me]+"]":"['"+R[me]+"']");return ne},b.toPointer=function(_){for(var R=_,E=R.length,ne="",me=1;me<E;me++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(R[me])||(ne+="/"+R[me].toString().replace(/~/g,"~0").replace(/\//g,"~1"));return ne},b.toPathArray=function(_){var R=b.cache;if(R[_])return R[_].concat();var E=[],me=_.replace(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/g,";$&;").replace(/['\[](\??\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\))['\]]/g,function(Ee,se){return"[#"+(E.push(se)-1)+"]"}).replace(/\['((?:[\0-&\(-\\\^-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)'\]/g,function(Ee,se){return"['"+se.replace(/\./g,"%@%").replace(/~/g,"%%@@%%")+"']"}).replace(/~/g,";~;").replace(/'?\.'?(?!(?:[\0-Z\\-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*\])|\['?/g,";").replace(/%@%/g,".").replace(/%%@@%%/g,"~").replace(/(?:;)?(\^+)(?:;)?/g,function(Ee,se){return";"+se.split("").join(";")+";"}).replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,"").split(";").map(function(Ee){var se=Ee.match(/#([0-9]+)/);return se&&se[1]?E[se[1]]:Ee});return R[_]=me,R[_]}},7726:it=>{it.exports=function K(u){return!!u&&"object"==typeof u}},6124:(it,K,u)=>{u.d(K,{Y:()=>V,s:()=>N});var e=u(7451),y=u(3192);function $(U,H){1&U&&e.\u0275\u0275element(0,"div",9)}function c(U,H){if(1&U&&(e.\u0275\u0275elementStart(0,"span",10),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&U){const Q=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(Q.description)}}function d(U,H){if(1&U&&(e.\u0275\u0275elementStart(0,"section",11),e.\u0275\u0275element(1,"ngx-json-viewer",12),e.\u0275\u0275elementEnd()),2&U){const Q=e.\u0275\u0275nextContext().$implicit,Z=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("json",Q.value)("expanded",Z.expanded)("depth",Z.depth)("_currentDepth",Z._currentDepth)}}const p=function(U){return["segment",U]},z=function(U,H){return{"segment-main":!0,expandable:U,expanded:H}};function S(U,H){if(1&U){const Q=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"section",2),e.\u0275\u0275elementStart(1,"section",3),e.\u0275\u0275listener("click",function(){const G=e.\u0275\u0275restoreView(Q).$implicit;return e.\u0275\u0275nextContext().toggle(G)}),e.\u0275\u0275template(2,$,1,0,"div",4),e.\u0275\u0275elementStart(3,"span",5),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"span",6),e.\u0275\u0275text(6,": "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,c,2,1,"span",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,d,2,4,"section",8),e.\u0275\u0275elementEnd()}if(2&U){const Q=H.$implicit,Z=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(6,p,"segment-type-"+Q.type)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(8,z,Z.isExpandable(Q),Q.expanded)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",Z.isExpandable(Q)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(Q.key),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!Q.expanded||!Z.isExpandable(Q)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",Q.expanded&&Z.isExpandable(Q))}}let V=(()=>{class U{constructor(){this.expanded=!0,this.depth=-1,this._currentDepth=-1,this.segments=[]}ngOnChanges(){this.segments=[],this.json=this.decycle(this.json),this._currentDepth++,"object"==typeof this.json?Object.keys(this.json).forEach(Q=>{this.segments.push(this.parseKeyValue(Q,this.json[Q]))}):this.segments.push(this.parseKeyValue(`(${typeof this.json})`,this.json))}isExpandable(Q){return"object"===Q.type||"array"===Q.type}toggle(Q){this.isExpandable(Q)&&(Q.expanded=!Q.expanded)}parseKeyValue(Q,Z){const ue={key:Q,value:Z,type:void 0,description:""+Z,expanded:this.isExpanded()};switch(typeof ue.value){case"number":ue.type="number";break;case"boolean":ue.type="boolean";break;case"function":ue.type="function";break;case"string":ue.type="string",ue.description='"'+ue.value+'"';break;case"undefined":ue.type="undefined",ue.description="undefined";break;case"object":null===ue.value?(ue.type="null",ue.description="null"):Array.isArray(ue.value)?(ue.type="array",ue.description="Array["+ue.value.length+"] "+JSON.stringify(ue.value)):ue.value instanceof Date?ue.type="date":(ue.type="object",ue.description="Object "+JSON.stringify(ue.value))}return ue}isExpanded(){return this.expanded&&!(this.depth>-1&&this._currentDepth>=this.depth)}decycle(Q){const Z=new WeakMap;return function ue(G,X){let ee,ve;return"object"!=typeof G||null===G||G instanceof Boolean||G instanceof Date||G instanceof Number||G instanceof RegExp||G instanceof String?G:(ee=Z.get(G),void 0!==ee?{$ref:ee}:(Z.set(G,X),Array.isArray(G)?(ve=[],G.forEach(function(Oe,Le){ve[Le]=ue(Oe,X+"["+Le+"]")})):(ve={},Object.keys(G).forEach(function(Oe){ve[Oe]=ue(G[Oe],X+"["+JSON.stringify(Oe)+"]")})),ve))}(Q,"$")}}return U.\u0275fac=function(Q){return new(Q||U)},U.\u0275cmp=e.\u0275\u0275defineComponent({type:U,selectors:[["ngx-json-viewer"]],inputs:{expanded:"expanded",depth:"depth",_currentDepth:"_currentDepth",json:"json"},features:[e.\u0275\u0275NgOnChangesFeature],decls:2,vars:1,consts:[[1,"ngx-json-viewer"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[3,"ngClass","click"],["class","toggler",4,"ngIf"],[1,"segment-key"],[1,"segment-separator"],["class","segment-value",4,"ngIf"],["class","children",4,"ngIf"],[1,"toggler"],[1,"segment-value"],[1,"children"],[3,"json","expanded","depth","_currentDepth"]],template:function(Q,Z){1&Q&&(e.\u0275\u0275elementStart(0,"section",0),e.\u0275\u0275template(1,S,9,11,"section",1),e.\u0275\u0275elementEnd()),2&Q&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",Z.segments))},directives:[y.NgForOf,y.NgClass,y.NgIf,U],styles:['@charset "UTF-8";.ngx-json-viewer[_ngcontent-%COMP%]{font-family:monospace;font-size:1em;height:100%;overflow:hidden;position:relative;width:100%}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]{margin:1px 1px 1px 12px;padding:2px}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]{word-wrap:break-word}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .toggler[_ngcontent-%COMP%]{color:#787878;font-size:.8em;line-height:1.2em;margin-left:-14px;margin-top:3px;position:absolute;vertical-align:middle}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .toggler[_ngcontent-%COMP%]:after{content:"\u25ba";display:inline-block;transition:transform .1s ease-in}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .segment-key[_ngcontent-%COMP%]{color:#4e187c}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .segment-separator[_ngcontent-%COMP%]{color:#999}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .segment-value[_ngcontent-%COMP%]{color:#000}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .children[_ngcontent-%COMP%]{margin-left:12px}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-string[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:#ff6b6b}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-number[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:#009688}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-boolean[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:#b938a4}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-date[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:#05668d}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-array[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%], .ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-function[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%], .ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-object[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:#999}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-null[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%], .ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-undefined[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:#fff}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-null[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{background-color:red}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-undefined[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-key[_ngcontent-%COMP%]{color:#999}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-undefined[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{background-color:#999}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-array[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%], .ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-object[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%]{white-space:nowrap}.ngx-json-viewer[_ngcontent-%COMP%]   .expanded[_ngcontent-%COMP%] > .toggler[_ngcontent-%COMP%]:after{transform:rotate(90deg)}.ngx-json-viewer[_ngcontent-%COMP%]   .expandable[_ngcontent-%COMP%], .ngx-json-viewer[_ngcontent-%COMP%]   .expandable[_ngcontent-%COMP%] > .toggler[_ngcontent-%COMP%]{cursor:pointer}']}),U})(),N=(()=>{class U{}return U.\u0275fac=function(Q){return new(Q||U)},U.\u0275mod=e.\u0275\u0275defineNgModule({type:U}),U.\u0275inj=e.\u0275\u0275defineInjector({imports:[[y.CommonModule]]}),U})()},464:(it,K)=>{function e(d){return d.replace(/[-[\]/{}()*+?.\\^$]/g,"\\$&")}function n(d,p){var S=(void 0===p?{}:p).decimalMark,V=void 0===S?".":S;if("number"==typeof d)return d.toString();if("string"!=typeof d)return"NaN";var N=e(V),U=d.trim(),H=U.match(/^\(.*\)$|^-/),Q=new RegExp("[^\\d"+N+"]|"+N+"(?=.*"+N+")|^\\D*"+N+"\\D*$","g");return""===(U=U.replace(Q,"").replace(V,"."))?U="NaN":H&&(U="-"+U),U}K.He=void 0,K.He=function y(d,p){var S=(void 0===p?{}:p).decimalMark,N=n(d,{decimalMark:void 0===S?".":S});return"NaN"===N?NaN:Number(N)}},1856:it=>{var K=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,e=Object.prototype.propertyIsEnumerable;function n(x){if(null==x)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(x)}it.exports=function y(){try{if(!Object.assign)return!1;var x=new String("abc");if(x[5]="de","5"===Object.getOwnPropertyNames(x)[0])return!1;for(var $={},c=0;c<10;c++)$["_"+String.fromCharCode(c)]=c;if("0123456789"!==Object.getOwnPropertyNames($).map(function(z){return $[z]}).join(""))return!1;var p={};return"abcdefghijklmnopqrst".split("").forEach(function(z){p[z]=z}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},p)).join("")}catch{return!1}}()?Object.assign:function(x,$){for(var c,p,d=n(x),z=1;z<arguments.length;z++){for(var S in c=Object(arguments[z]))u.call(c,S)&&(d[S]=c[S]);if(K){p=K(c);for(var V=0;V<p.length;V++)e.call(c,p[V])&&(d[p[V]]=c[p[V]])}}return d}},8597:(it,K,u)=>{var e="function"==typeof Map&&Map.prototype,n=Object.getOwnPropertyDescriptor&&e?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,y=e&&n&&"function"==typeof n.get?n.get:null,x=e&&Map.prototype.forEach,$="function"==typeof Set&&Set.prototype,c=Object.getOwnPropertyDescriptor&&$?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,d=$&&c&&"function"==typeof c.get?c.get:null,p=$&&Set.prototype.forEach,S="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,N="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,H="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,Q=Boolean.prototype.valueOf,Z=Object.prototype.toString,ue=Function.prototype.toString,G=String.prototype.match,X=String.prototype.slice,ee=String.prototype.replace,ve=String.prototype.toUpperCase,Oe=String.prototype.toLowerCase,Le=RegExp.prototype.test,be=Array.prototype.concat,m=Array.prototype.join,P=Array.prototype.slice,b=Math.floor,_="function"==typeof BigInt?BigInt.prototype.valueOf:null,R=Object.getOwnPropertySymbols,E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,ne="function"==typeof Symbol&&"object"==typeof Symbol.iterator,me="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol,1)?Symbol.toStringTag:null,Ee=Object.prototype.propertyIsEnumerable,se=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(Ke){return Ke.__proto__}:null);function ze(Ke,rt){if(Ke===1/0||Ke===-1/0||Ke!=Ke||Ke&&Ke>-1e3&&Ke<1e3||Le.call(/e/,rt))return rt;var Be=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof Ke){var et=Ke<0?-b(-Ke):b(Ke);if(et!==Ke){var wt=String(et),Ft=X.call(rt,wt.length+1);return ee.call(wt,Be,"$&_")+"."+ee.call(ee.call(Ft,/([0-9]{3})/g,"$&_"),/_$/,"")}}return ee.call(rt,Be,"$&_")}var Ge=u(4654).custom,xe=Ge&&Fe(Ge)?Ge:null;function qe(Ke,rt,Be){var et="double"===(Be.quoteStyle||rt)?'"':"'";return et+Ke+et}function Xe(Ke){return ee.call(String(Ke),/"/g,"&quot;")}function lt(Ke){return!("[object Array]"!==ut(Ke)||me&&"object"==typeof Ke&&me in Ke)}function Fe(Ke){if(ne)return Ke&&"object"==typeof Ke&&Ke instanceof Symbol;if("symbol"==typeof Ke)return!0;if(!Ke||"object"!=typeof Ke||!E)return!1;try{return E.call(Ke),!0}catch{}return!1}it.exports=function Ke(rt,Be,et,wt){var Ft=Be||{};if(De(Ft,"quoteStyle")&&"single"!==Ft.quoteStyle&&"double"!==Ft.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(De(Ft,"maxStringLength")&&("number"==typeof Ft.maxStringLength?Ft.maxStringLength<0&&Ft.maxStringLength!==1/0:null!==Ft.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var dn=!De(Ft,"customInspect")||Ft.customInspect;if("boolean"!=typeof dn&&"symbol"!==dn)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(De(Ft,"indent")&&null!==Ft.indent&&"\t"!==Ft.indent&&!(parseInt(Ft.indent,10)===Ft.indent&&Ft.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(De(Ft,"numericSeparator")&&"boolean"!=typeof Ft.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var Vt=Ft.numericSeparator;if(void 0===rt)return"undefined";if(null===rt)return"null";if("boolean"==typeof rt)return rt?"true":"false";if("string"==typeof rt)return Qe(rt,Ft);if("number"==typeof rt){if(0===rt)return 1/0/rt>0?"0":"-0";var ct=String(rt);return Vt?ze(rt,ct):ct}if("bigint"==typeof rt){var kt=String(rt)+"n";return Vt?ze(rt,kt):kt}var Pt=void 0===Ft.depth?5:Ft.depth;if(void 0===et&&(et=0),et>=Pt&&Pt>0&&"object"==typeof rt)return lt(rt)?"[Array]":"[Object]";var Yt=function zt(Ke,rt){var Be;if("\t"===Ke.indent)Be="\t";else{if(!("number"==typeof Ke.indent&&Ke.indent>0))return null;Be=m.call(Array(Ke.indent+1)," ")}return{base:Be,prev:m.call(Array(rt+1),Be)}}(Ft,et);if(void 0===wt)wt=[];else if(D(wt,rt)>=0)return"[Circular]";function Bt(pr,Er,wr){if(Er&&(wt=P.call(wt)).push(Er),wr){var Zn={depth:Ft.depth};return De(Ft,"quoteStyle")&&(Zn.quoteStyle=Ft.quoteStyle),Ke(pr,Zn,et+1,wt)}return Ke(pr,Ft,et+1,wt)}if("function"==typeof rt){var pn=function le(Ke){if(Ke.name)return Ke.name;var rt=G.call(ue.call(Ke),/^function\s*([\w$]+)/);return rt?rt[1]:null}(rt),_n=Ot(rt,Bt);return"[Function"+(pn?": "+pn:" (anonymous)")+"]"+(_n.length>0?" { "+m.call(_n,", ")+" }":"")}if(Fe(rt)){var Cn=ne?ee.call(String(rt),/^(Symbol\(.*\))_[^)]*$/,"$1"):E.call(rt);return"object"!=typeof rt||ne?Cn:Ut(Cn)}if(function Me(Ke){return!(!Ke||"object"!=typeof Ke)&&("undefined"!=typeof HTMLElement&&Ke instanceof HTMLElement||"string"==typeof Ke.nodeName&&"function"==typeof Ke.getAttribute)}(rt)){for(var xn="<"+Oe.call(String(rt.nodeName)),Qn=rt.attributes||[],dr=0;dr<Qn.length;dr++)xn+=" "+Qn[dr].name+"="+qe(Xe(Qn[dr].value),"double",Ft);return xn+=">",rt.childNodes&&rt.childNodes.length&&(xn+="..."),xn+"</"+Oe.call(String(rt.nodeName))+">"}if(lt(rt)){if(0===rt.length)return"[]";var ur=Ot(rt,Bt);return Yt&&!function Lt(Ke){for(var rt=0;rt<Ke.length;rt++)if(D(Ke[rt],"\n")>=0)return!1;return!0}(ur)?"["+$e(ur,Yt)+"]":"[ "+m.call(ur,", ")+" ]"}if(function ht(Ke){return!("[object Error]"!==ut(Ke)||me&&"object"==typeof Ke&&me in Ke)}(rt)){var Xn=Ot(rt,Bt);return"cause"in rt&&!Ee.call(rt,"cause")?"{ ["+String(rt)+"] "+m.call(be.call("[cause]: "+Bt(rt.cause),Xn),", ")+" }":0===Xn.length?"["+String(rt)+"]":"{ ["+String(rt)+"] "+m.call(Xn,", ")+" }"}if("object"==typeof rt&&dn){if(xe&&"function"==typeof rt[xe])return rt[xe]();if("symbol"!==dn&&"function"==typeof rt.inspect)return rt.inspect()}if(function C(Ke){if(!y||!Ke||"object"!=typeof Ke)return!1;try{y.call(Ke);try{d.call(Ke)}catch{return!0}return Ke instanceof Map}catch{}return!1}(rt)){var ir=[];return x.call(rt,function(pr,Er){ir.push(Bt(Er,rt,!0)+" => "+Bt(pr,rt))}),Ue("Map",y.call(rt),ir,Yt)}if(function de(Ke){if(!d||!Ke||"object"!=typeof Ke)return!1;try{d.call(Ke);try{y.call(Ke)}catch{return!0}return Ke instanceof Set}catch{}return!1}(rt)){var mr=[];return p.call(rt,function(pr){mr.push(Bt(pr,rt))}),Ue("Set",d.call(rt),mr,Yt)}if(function g(Ke){if(!S||!Ke||"object"!=typeof Ke)return!1;try{S.call(Ke,S);try{N.call(Ke,N)}catch{return!0}return Ke instanceof WeakMap}catch{}return!1}(rt))return qt("WeakMap");if(function ye(Ke){if(!N||!Ke||"object"!=typeof Ke)return!1;try{N.call(Ke,N);try{S.call(Ke,S)}catch{return!0}return Ke instanceof WeakSet}catch{}return!1}(rt))return qt("WeakSet");if(function B(Ke){if(!H||!Ke||"object"!=typeof Ke)return!1;try{return H.call(Ke),!0}catch{}return!1}(rt))return qt("WeakRef");if(function he(Ke){return!("[object Number]"!==ut(Ke)||me&&"object"==typeof Ke&&me in Ke)}(rt))return Ut(Bt(Number(rt)));if(function Je(Ke){if(!Ke||"object"!=typeof Ke||!_)return!1;try{return _.call(Ke),!0}catch{}return!1}(rt))return Ut(Bt(_.call(rt)));if(function pe(Ke){return!("[object Boolean]"!==ut(Ke)||me&&"object"==typeof Ke&&me in Ke)}(rt))return Ut(Q.call(rt));if(function Se(Ke){return!("[object String]"!==ut(Ke)||me&&"object"==typeof Ke&&me in Ke)}(rt))return Ut(Bt(String(rt)));if(!function He(Ke){return!("[object Date]"!==ut(Ke)||me&&"object"==typeof Ke&&me in Ke)}(rt)&&!function Ye(Ke){return!("[object RegExp]"!==ut(Ke)||me&&"object"==typeof Ke&&me in Ke)}(rt)){var hr=Ot(rt,Bt),Or=se?se(rt)===Object.prototype:rt instanceof Object||rt.constructor===Object,fr=rt instanceof Object?"":"null prototype",Hr=!Or&&me&&Object(rt)===rt&&me in rt?X.call(ut(rt),8,-1):fr?"Object":"",Dn=(Or||"function"!=typeof rt.constructor?"":rt.constructor.name?rt.constructor.name+" ":"")+(Hr||fr?"["+m.call(be.call([],Hr||[],fr||[]),": ")+"] ":"");return 0===hr.length?Dn+"{}":Yt?Dn+"{"+$e(hr,Yt)+"}":Dn+"{ "+m.call(hr,", ")+" }"}return String(rt)};var we=Object.prototype.hasOwnProperty||function(Ke){return Ke in this};function De(Ke,rt){return we.call(Ke,rt)}function ut(Ke){return Z.call(Ke)}function D(Ke,rt){if(Ke.indexOf)return Ke.indexOf(rt);for(var Be=0,et=Ke.length;Be<et;Be++)if(Ke[Be]===rt)return Be;return-1}function Qe(Ke,rt){if(Ke.length>rt.maxStringLength){var Be=Ke.length-rt.maxStringLength,et="... "+Be+" more character"+(Be>1?"s":"");return Qe(X.call(Ke,0,rt.maxStringLength),rt)+et}return qe(ee.call(ee.call(Ke,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,st),"single",rt)}function st(Ke){var rt=Ke.charCodeAt(0),Be={8:"b",9:"t",10:"n",12:"f",13:"r"}[rt];return Be?"\\"+Be:"\\x"+(rt<16?"0":"")+ve.call(rt.toString(16))}function Ut(Ke){return"Object("+Ke+")"}function qt(Ke){return Ke+" { ? }"}function Ue(Ke,rt,Be,et){return Ke+" ("+rt+") {"+(et?$e(Be,et):m.call(Be,", "))+"}"}function $e(Ke,rt){if(0===Ke.length)return"";var Be="\n"+rt.prev+rt.base;return Be+m.call(Ke,","+Be)+"\n"+rt.prev}function Ot(Ke,rt){var Be=lt(Ke),et=[];if(Be){et.length=Ke.length;for(var wt=0;wt<Ke.length;wt++)et[wt]=De(Ke,wt)?rt(Ke[wt],Ke):""}var dn,Ft="function"==typeof R?R(Ke):[];if(ne){dn={};for(var Vt=0;Vt<Ft.length;Vt++)dn["$"+Ft[Vt]]=Ft[Vt]}for(var ct in Ke)!De(Ke,ct)||Be&&String(Number(ct))===ct&&ct<Ke.length||ne&&dn["$"+ct]instanceof Symbol||(Le.call(/[^\w$]/,ct)?et.push(rt(ct,Ke)+": "+rt(Ke[ct],Ke)):et.push(ct+": "+rt(Ke[ct],Ke)));if("function"==typeof R)for(var kt=0;kt<Ft.length;kt++)Ee.call(Ke,Ft[kt])&&et.push("["+rt(Ft[kt])+"]: "+rt(Ke[Ft[kt]],Ke));return et}},2578:function(it){it.exports=function(K){var u={};function e(n){if(u[n])return u[n].exports;var y=u[n]={i:n,l:!1,exports:{}};return K[n].call(y.exports,y,y.exports,e),y.l=!0,y.exports}return e.m=K,e.c=u,e.d=function(n,y,x){e.o(n,y)||Object.defineProperty(n,y,{enumerable:!0,get:x})},e.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,y){if(1&y&&(n=e(n)),8&y||4&y&&"object"==typeof n&&n&&n.__esModule)return n;var x=Object.create(null);if(e.r(x),Object.defineProperty(x,"default",{enumerable:!0,value:n}),2&y&&"string"!=typeof n)for(var $ in n)e.d(x,$,function(c){return n[c]}.bind(null,$));return x},e.n=function(n){var y=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(y,"a",y),y},e.o=function(n,y){return Object.prototype.hasOwnProperty.call(n,y)},e.p="",e(e.s=22)}([function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var n=function(){function c(d,p){for(var z=0;z<p.length;z++){var S=p[z];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(d,S.key,S)}}return function(d,p,z){return p&&c(d.prototype,p),z&&c(d,z),d}}(),y={debug:function(){},info:function(){},warn:function(){},error:function(){}},x=void 0,$=void 0;(u.Log=function(){function c(){!function(p,z){if(!(p instanceof z))throw new TypeError("Cannot call a class as a function")}(this,c)}return c.reset=function(){$=3,x=y},c.debug=function(){if($>=4){for(var p=arguments.length,z=Array(p),S=0;S<p;S++)z[S]=arguments[S];x.debug.apply(x,Array.from(z))}},c.info=function(){if($>=3){for(var p=arguments.length,z=Array(p),S=0;S<p;S++)z[S]=arguments[S];x.info.apply(x,Array.from(z))}},c.warn=function(){if($>=2){for(var p=arguments.length,z=Array(p),S=0;S<p;S++)z[S]=arguments[S];x.warn.apply(x,Array.from(z))}},c.error=function(){if($>=1){for(var p=arguments.length,z=Array(p),S=0;S<p;S++)z[S]=arguments[S];x.error.apply(x,Array.from(z))}},n(c,null,[{key:"NONE",get:function(){return 0}},{key:"ERROR",get:function(){return 1}},{key:"WARN",get:function(){return 2}},{key:"INFO",get:function(){return 3}},{key:"DEBUG",get:function(){return 4}},{key:"level",get:function(){return $},set:function(p){if(!(0<=p&&p<=4))throw new Error("Invalid log level");$=p}},{key:"logger",get:function(){return x},set:function(p){if(!p.debug&&p.info&&(p.debug=p.info),!(p.debug&&p.info&&p.warn&&p.error))throw new Error("Invalid logger");x=p}}]),c}()).reset()},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var n=function(){function c(d,p){for(var z=0;z<p.length;z++){var S=p[z];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(d,S.key,S)}}return function(d,p,z){return p&&c(d.prototype,p),z&&c(d,z),d}}(),y={setInterval:function(c){function d(p,z){return c.apply(this,arguments)}return d.toString=function(){return c.toString()},d}(function(c,d){return setInterval(c,d)}),clearInterval:function(c){function d(p){return c.apply(this,arguments)}return d.toString=function(){return c.toString()},d}(function(c){return clearInterval(c)})},x=!1,$=null;u.Global=function(){function c(){!function(p,z){if(!(p instanceof z))throw new TypeError("Cannot call a class as a function")}(this,c)}return c._testing=function(){x=!0},c.setXMLHttpRequest=function(p){$=p},n(c,null,[{key:"location",get:function(){if(!x)return location}},{key:"localStorage",get:function(){if(!x&&"undefined"!=typeof window)return localStorage}},{key:"sessionStorage",get:function(){if(!x&&"undefined"!=typeof window)return sessionStorage}},{key:"XMLHttpRequest",get:function(){if(!x&&"undefined"!=typeof window)return $||XMLHttpRequest}},{key:"timer",get:function(){if(!x)return y}}]),c}()},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.MetadataService=void 0;var n=function(){function d(p,z){for(var S=0;S<z.length;S++){var V=z[S];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(p,V.key,V)}}return function(p,z,S){return z&&d(p.prototype,z),S&&d(p,S),p}}(),y=e(0),x=e(7);function $(d,p){if(!(d instanceof p))throw new TypeError("Cannot call a class as a function")}var c=".well-known/openid-configuration";u.MetadataService=function(){function d(p){var z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.JsonService;if($(this,d),!p)throw y.Log.error("MetadataService: No settings passed to MetadataService"),new Error("settings");this._settings=p,this._jsonService=new z(["application/jwk-set+json"])}return d.prototype.resetSigningKeys=function(){this._settings=this._settings||{},this._settings.signingKeys=void 0},d.prototype.getMetadata=function(){var z=this;return this._settings.metadata?(y.Log.debug("MetadataService.getMetadata: Returning metadata from settings"),Promise.resolve(this._settings.metadata)):this.metadataUrl?(y.Log.debug("MetadataService.getMetadata: getting metadata from",this.metadataUrl),this._jsonService.getJson(this.metadataUrl).then(function(S){return y.Log.debug("MetadataService.getMetadata: json received"),z._settings.metadata=Object.assign({},z._settings.metadataSeed||{},S),z._settings.metadata})):(y.Log.error("MetadataService.getMetadata: No authority or metadataUrl configured on settings"),Promise.reject(new Error("No authority or metadataUrl configured on settings")))},d.prototype.getIssuer=function(){return this._getMetadataProperty("issuer")},d.prototype.getAuthorizationEndpoint=function(){return this._getMetadataProperty("authorization_endpoint")},d.prototype.getUserInfoEndpoint=function(){return this._getMetadataProperty("userinfo_endpoint")},d.prototype.getTokenEndpoint=function(){return this._getMetadataProperty("token_endpoint",!(arguments.length>0&&void 0!==arguments[0])||arguments[0])},d.prototype.getCheckSessionIframe=function(){return this._getMetadataProperty("check_session_iframe",!0)},d.prototype.getEndSessionEndpoint=function(){return this._getMetadataProperty("end_session_endpoint",!0)},d.prototype.getRevocationEndpoint=function(){return this._getMetadataProperty("revocation_endpoint",!0)},d.prototype.getKeysEndpoint=function(){return this._getMetadataProperty("jwks_uri",!0)},d.prototype._getMetadataProperty=function(z){var S=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return y.Log.debug("MetadataService.getMetadataProperty for: "+z),this.getMetadata().then(function(V){if(y.Log.debug("MetadataService.getMetadataProperty: metadata recieved"),void 0===V[z]){if(!0===S)return void y.Log.warn("MetadataService.getMetadataProperty: Metadata does not contain optional property "+z);throw y.Log.error("MetadataService.getMetadataProperty: Metadata does not contain property "+z),new Error("Metadata does not contain property "+z)}return V[z]})},d.prototype.getSigningKeys=function(){var z=this;return this._settings.signingKeys?(y.Log.debug("MetadataService.getSigningKeys: Returning signingKeys from settings"),Promise.resolve(this._settings.signingKeys)):this._getMetadataProperty("jwks_uri").then(function(S){return y.Log.debug("MetadataService.getSigningKeys: jwks_uri received",S),z._jsonService.getJson(S).then(function(V){if(y.Log.debug("MetadataService.getSigningKeys: key set received",V),!V.keys)throw y.Log.error("MetadataService.getSigningKeys: Missing keys on keyset"),new Error("Missing keys on keyset");return z._settings.signingKeys=V.keys,z._settings.signingKeys})})},n(d,[{key:"metadataUrl",get:function(){return this._metadataUrl||(this._settings.metadataUrl?this._metadataUrl=this._settings.metadataUrl:(this._metadataUrl=this._settings.authority,this._metadataUrl&&this._metadataUrl.indexOf(c)<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=c))),this._metadataUrl}}]),d}()},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.UrlUtility=void 0;var n=e(0),y=e(1);u.UrlUtility=function(){function x(){!function(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}(this,x)}return x.addQueryParam=function(c,d,p){return c.indexOf("?")<0&&(c+="?"),"?"!==c[c.length-1]&&(c+="&"),c+=encodeURIComponent(d),(c+="=")+encodeURIComponent(p)},x.parseUrlFragment=function(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#";"string"!=typeof c&&(c=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:y.Global).location.href);var z=c.lastIndexOf(d);z>=0&&(c=c.substr(z+1)),"?"===d&&(z=c.indexOf("#"))>=0&&(c=c.substr(0,z));for(var S,V={},N=/([^&=]+)=([^&]*)/g,U=0;S=N.exec(c);)if(V[decodeURIComponent(S[1])]=decodeURIComponent(S[2].replace(/\+/g," ")),U++>50)return n.Log.error("UrlUtility.parseUrlFragment: response exceeded expected number of parameters",c),{error:"Response exceeded expected number of parameters"};for(var H in V)return V;return{}},x}()},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.JoseUtil=void 0;var $,n=e(26),y=($=e(33))&&$.__esModule?$:{default:$};u.JoseUtil=(0,y.default)({jws:n.jws,KeyUtil:n.KeyUtil,X509:n.X509,crypto:n.crypto,hextob64u:n.hextob64u,b64tohex:n.b64tohex,AllowedSigningAlgs:n.AllowedSigningAlgs})},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.OidcClientSettings=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(H){return typeof H}:function(H){return H&&"function"==typeof Symbol&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},y=function(){function H(Q,Z){for(var ue=0;ue<Z.length;ue++){var G=Z[ue];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(Q,G.key,G)}}return function(Q,Z,ue){return Z&&H(Q.prototype,Z),ue&&H(Q,ue),Q}}(),x=e(0),$=e(23),c=e(6),d=e(24),p=e(2);function z(H,Q){if(!(H instanceof Q))throw new TypeError("Cannot call a class as a function")}var S=".well-known/openid-configuration",V="id_token",N="openid",U="client_secret_post";u.OidcClientSettings=function(){function H(){var Q=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},Z=Q.authority,ue=Q.metadataUrl,G=Q.metadata,X=Q.signingKeys,ee=Q.metadataSeed,ve=Q.client_id,Oe=Q.client_secret,Le=Q.response_type,be=void 0===Le?V:Le,m=Q.scope,P=void 0===m?N:m,b=Q.redirect_uri,_=Q.post_logout_redirect_uri,R=Q.client_authentication,E=void 0===R?U:R,ne=Q.prompt,me=Q.display,Ee=Q.max_age,se=Q.ui_locales,ze=Q.acr_values,Ge=Q.resource,xe=Q.response_mode,qe=Q.filterProtocolClaims,Xe=void 0===qe||qe,lt=Q.loadUserInfo,He=void 0===lt||lt,Ye=Q.staleStateAge,ht=void 0===Ye?900:Ye,Se=Q.clockSkew,he=void 0===Se?300:Se,pe=Q.clockService,Fe=void 0===pe?new $.ClockService:pe,Je=Q.userInfoJwtIssuer,we=void 0===Je?"OP":Je,De=Q.mergeClaims,ut=void 0!==De&&De,le=Q.stateStore,D=void 0===le?new c.WebStorageStateStore:le,C=Q.ResponseValidatorCtor,g=void 0===C?d.ResponseValidator:C,B=Q.MetadataServiceCtor,de=void 0===B?p.MetadataService:B,ye=Q.extraQueryParams,Me=void 0===ye?{}:ye,Qe=Q.extraTokenParams,st=void 0===Qe?{}:Qe;z(this,H),this._authority=Z,this._metadataUrl=ue,this._metadata=G,this._metadataSeed=ee,this._signingKeys=X,this._client_id=ve,this._client_secret=Oe,this._response_type=be,this._scope=P,this._redirect_uri=b,this._post_logout_redirect_uri=_,this._client_authentication=E,this._prompt=ne,this._display=me,this._max_age=Ee,this._ui_locales=se,this._acr_values=ze,this._resource=Ge,this._response_mode=xe,this._filterProtocolClaims=!!Xe,this._loadUserInfo=!!He,this._staleStateAge=ht,this._clockSkew=he,this._clockService=Fe,this._userInfoJwtIssuer=we,this._mergeClaims=!!ut,this._stateStore=D,this._validator=new g(this),this._metadataService=new de(this),this._extraQueryParams="object"===(void 0===Me?"undefined":n(Me))?Me:{},this._extraTokenParams="object"===(void 0===st?"undefined":n(st))?st:{}}return H.prototype.getEpochTime=function(){return this._clockService.getEpochTime()},y(H,[{key:"client_id",get:function(){return this._client_id},set:function(Z){if(this._client_id)throw x.Log.error("OidcClientSettings.set_client_id: client_id has already been assigned."),new Error("client_id has already been assigned.");this._client_id=Z}},{key:"client_secret",get:function(){return this._client_secret}},{key:"response_type",get:function(){return this._response_type}},{key:"scope",get:function(){return this._scope}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"post_logout_redirect_uri",get:function(){return this._post_logout_redirect_uri}},{key:"client_authentication",get:function(){return this._client_authentication}},{key:"prompt",get:function(){return this._prompt}},{key:"display",get:function(){return this._display}},{key:"max_age",get:function(){return this._max_age}},{key:"ui_locales",get:function(){return this._ui_locales}},{key:"acr_values",get:function(){return this._acr_values}},{key:"resource",get:function(){return this._resource}},{key:"response_mode",get:function(){return this._response_mode}},{key:"authority",get:function(){return this._authority},set:function(Z){if(this._authority)throw x.Log.error("OidcClientSettings.set_authority: authority has already been assigned."),new Error("authority has already been assigned.");this._authority=Z}},{key:"metadataUrl",get:function(){return this._metadataUrl||(this._metadataUrl=this.authority,this._metadataUrl&&this._metadataUrl.indexOf(S)<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=S)),this._metadataUrl}},{key:"metadata",get:function(){return this._metadata},set:function(Z){this._metadata=Z}},{key:"metadataSeed",get:function(){return this._metadataSeed},set:function(Z){this._metadataSeed=Z}},{key:"signingKeys",get:function(){return this._signingKeys},set:function(Z){this._signingKeys=Z}},{key:"filterProtocolClaims",get:function(){return this._filterProtocolClaims}},{key:"loadUserInfo",get:function(){return this._loadUserInfo}},{key:"staleStateAge",get:function(){return this._staleStateAge}},{key:"clockSkew",get:function(){return this._clockSkew}},{key:"userInfoJwtIssuer",get:function(){return this._userInfoJwtIssuer}},{key:"mergeClaims",get:function(){return this._mergeClaims}},{key:"stateStore",get:function(){return this._stateStore}},{key:"validator",get:function(){return this._validator}},{key:"metadataService",get:function(){return this._metadataService}},{key:"extraQueryParams",get:function(){return this._extraQueryParams},set:function(Z){this._extraQueryParams="object"===(void 0===Z?"undefined":n(Z))?Z:{}}},{key:"extraTokenParams",get:function(){return this._extraTokenParams},set:function(Z){this._extraTokenParams="object"===(void 0===Z?"undefined":n(Z))?Z:{}}}]),H}()},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.WebStorageStateStore=void 0;var n=e(0),y=e(1);function x($,c){if(!($ instanceof c))throw new TypeError("Cannot call a class as a function")}u.WebStorageStateStore=function(){function $(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=c.prefix,p=void 0===d?"oidc.":d,z=c.store,S=void 0===z?y.Global.localStorage:z;x(this,$),this._store=S,this._prefix=p}return $.prototype.set=function(d,p){return n.Log.debug("WebStorageStateStore.set",d),this._store.setItem(d=this._prefix+d,p),Promise.resolve()},$.prototype.get=function(d){n.Log.debug("WebStorageStateStore.get",d);var p=this._store.getItem(d=this._prefix+d);return Promise.resolve(p)},$.prototype.remove=function(d){n.Log.debug("WebStorageStateStore.remove",d);var p=this._store.getItem(d=this._prefix+d);return this._store.removeItem(d),Promise.resolve(p)},$.prototype.getAllKeys=function(){n.Log.debug("WebStorageStateStore.getAllKeys");for(var d=[],p=0;p<this._store.length;p++){var z=this._store.key(p);0===z.indexOf(this._prefix)&&d.push(z.substr(this._prefix.length))}return Promise.resolve(d)},$}()},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.JsonService=void 0;var n=e(0),y=e(1);function x($,c){if(!($ instanceof c))throw new TypeError("Cannot call a class as a function")}u.JsonService=function(){function $(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.Global.XMLHttpRequest,p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;x(this,$),this._contentTypes=c&&Array.isArray(c)?c.slice():[],this._contentTypes.push("application/json"),p&&this._contentTypes.push("application/jwt"),this._XMLHttpRequest=d,this._jwtHandler=p}return $.prototype.getJson=function(d,p){var z=this;if(!d)throw n.Log.error("JsonService.getJson: No url passed"),new Error("url");return n.Log.debug("JsonService.getJson, url: ",d),new Promise(function(S,V){var N=new z._XMLHttpRequest;N.open("GET",d);var U=z._contentTypes,H=z._jwtHandler;N.onload=function(){if(n.Log.debug("JsonService.getJson: HTTP response received, status",N.status),200===N.status){var Q=N.getResponseHeader("Content-Type");if(Q){var Z=U.find(function(ue){if(Q.startsWith(ue))return!0});if("application/jwt"==Z)return void H(N).then(S,V);if(Z)try{return void S(JSON.parse(N.responseText))}catch(ue){return n.Log.error("JsonService.getJson: Error parsing JSON response",ue.message),void V(ue)}}V(Error("Invalid response Content-Type: "+Q+", from URL: "+d))}else V(Error(N.statusText+" ("+N.status+")"))},N.onerror=function(){n.Log.error("JsonService.getJson: network error"),V(Error("Network Error"))},p&&(n.Log.debug("JsonService.getJson: token passed, setting Authorization header"),N.setRequestHeader("Authorization","Bearer "+p)),N.send()})},$.prototype.postForm=function(d,p,z){var S=this;if(!d)throw n.Log.error("JsonService.postForm: No url passed"),new Error("url");return n.Log.debug("JsonService.postForm, url: ",d),new Promise(function(V,N){var U=new S._XMLHttpRequest;U.open("POST",d);var H=S._contentTypes;U.onload=function(){if(n.Log.debug("JsonService.postForm: HTTP response received, status",U.status),200!==U.status){if(400===U.status&&(X=U.getResponseHeader("Content-Type"))&&H.find(function(ee){if(X.startsWith(ee))return!0}))try{var G=JSON.parse(U.responseText);if(G&&G.error)return n.Log.error("JsonService.postForm: Error from server: ",G.error),void N(new Error(G.error))}catch(ee){return n.Log.error("JsonService.postForm: Error parsing JSON response",ee.message),void N(ee)}N(Error(U.statusText+" ("+U.status+")"))}else{var X;if((X=U.getResponseHeader("Content-Type"))&&H.find(function(ee){if(X.startsWith(ee))return!0}))try{return void V(JSON.parse(U.responseText))}catch(ee){return n.Log.error("JsonService.postForm: Error parsing JSON response",ee.message),void N(ee)}N(Error("Invalid response Content-Type: "+X+", from URL: "+d))}},U.onerror=function(){n.Log.error("JsonService.postForm: network error"),N(Error("Network Error"))};var Q="";for(var Z in p){var ue=p[Z];ue&&(Q.length>0&&(Q+="&"),Q+=encodeURIComponent(Z),Q+="=",Q+=encodeURIComponent(ue))}U.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),void 0!==z&&U.setRequestHeader("Authorization","Basic "+btoa(z)),U.send(Q)})},$}()},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.SigninRequest=void 0;var n=e(0),y=e(3),x=e(13);u.SigninRequest=function(){function $(c){var d=c.url,p=c.client_id,z=c.redirect_uri,S=c.response_type,V=c.scope,N=c.authority,U=c.data,H=c.prompt,Q=c.display,Z=c.max_age,ue=c.ui_locales,G=c.id_token_hint,X=c.login_hint,ee=c.acr_values,ve=c.resource,Oe=c.response_mode,Le=c.request,be=c.request_uri,m=c.extraQueryParams,P=c.request_type,b=c.client_secret,_=c.extraTokenParams,R=c.skipUserInfo;if(function(Ge,xe){if(!(Ge instanceof xe))throw new TypeError("Cannot call a class as a function")}(this,$),!d)throw n.Log.error("SigninRequest.ctor: No url passed"),new Error("url");if(!p)throw n.Log.error("SigninRequest.ctor: No client_id passed"),new Error("client_id");if(!z)throw n.Log.error("SigninRequest.ctor: No redirect_uri passed"),new Error("redirect_uri");if(!S)throw n.Log.error("SigninRequest.ctor: No response_type passed"),new Error("response_type");if(!V)throw n.Log.error("SigninRequest.ctor: No scope passed"),new Error("scope");if(!N)throw n.Log.error("SigninRequest.ctor: No authority passed"),new Error("authority");var E=$.isOidc(S),ne=$.isCode(S);Oe||(Oe=$.isCode(S)?"query":null),this.state=new x.SigninState({nonce:E,data:U,client_id:p,authority:N,redirect_uri:z,code_verifier:ne,request_type:P,response_mode:Oe,client_secret:b,scope:V,extraTokenParams:_,skipUserInfo:R}),d=y.UrlUtility.addQueryParam(d,"client_id",p),d=y.UrlUtility.addQueryParam(d,"redirect_uri",z),d=y.UrlUtility.addQueryParam(d,"response_type",S),d=y.UrlUtility.addQueryParam(d,"scope",V),d=y.UrlUtility.addQueryParam(d,"state",this.state.id),E&&(d=y.UrlUtility.addQueryParam(d,"nonce",this.state.nonce)),ne&&(d=y.UrlUtility.addQueryParam(d,"code_challenge",this.state.code_challenge),d=y.UrlUtility.addQueryParam(d,"code_challenge_method","S256"));var me={prompt:H,display:Q,max_age:Z,ui_locales:ue,id_token_hint:G,login_hint:X,acr_values:ee,resource:ve,request:Le,request_uri:be,response_mode:Oe};for(var Ee in me)me[Ee]&&(d=y.UrlUtility.addQueryParam(d,Ee,me[Ee]));for(var se in m)d=y.UrlUtility.addQueryParam(d,se,m[se]);this.url=d}return $.isOidc=function(d){return!!d.split(/\s+/g).filter(function(p){return"id_token"===p})[0]},$.isOAuth=function(d){return!!d.split(/\s+/g).filter(function(p){return"token"===p})[0]},$.isCode=function(d){return!!d.split(/\s+/g).filter(function(p){return"code"===p})[0]},$}()},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.State=void 0;var d,n=function(){function c(d,p){for(var z=0;z<p.length;z++){var S=p[z];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(d,S.key,S)}}return function(d,p,z){return p&&c(d.prototype,p),z&&c(d,z),d}}(),y=e(0),x=(d=e(14))&&d.__esModule?d:{default:d};function $(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}u.State=function(){function c(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},p=d.id,z=d.data,S=d.created,V=d.request_type;$(this,c),this._id=p||(0,x.default)(),this._data=z,this._created="number"==typeof S&&S>0?S:parseInt(Date.now()/1e3),this._request_type=V}return c.prototype.toStorageString=function(){return y.Log.debug("State.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type})},c.fromStorageString=function(p){return y.Log.debug("State.fromStorageString"),new c(JSON.parse(p))},c.clearStaleState=function(p,z){var S=Date.now()/1e3-z;return p.getAllKeys().then(function(V){y.Log.debug("State.clearStaleState: got keys",V);for(var N=[],U=function(ue){var G=V[ue];Q=p.get(G).then(function(X){var ee=!1;if(X)try{var ve=c.fromStorageString(X);y.Log.debug("State.clearStaleState: got item from key: ",G,ve.created),ve.created<=S&&(ee=!0)}catch(Oe){y.Log.error("State.clearStaleState: Error parsing state for key",G,Oe.message),ee=!0}else y.Log.debug("State.clearStaleState: no item in storage for key: ",G),ee=!0;if(ee)return y.Log.debug("State.clearStaleState: removed item for key: ",G),p.remove(G)}),N.push(Q)},H=0;H<V.length;H++){var Q;U(H)}return y.Log.debug("State.clearStaleState: waiting on promise count:",N.length),Promise.all(N)})},n(c,[{key:"id",get:function(){return this._id}},{key:"data",get:function(){return this._data}},{key:"created",get:function(){return this._created}},{key:"request_type",get:function(){return this._request_type}}]),c}()},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.OidcClient=void 0;var n=function(){function U(H,Q){for(var Z=0;Z<Q.length;Z++){var ue=Q[Z];ue.enumerable=ue.enumerable||!1,ue.configurable=!0,"value"in ue&&(ue.writable=!0),Object.defineProperty(H,ue.key,ue)}}return function(H,Q,Z){return Q&&U(H.prototype,Q),Z&&U(H,Z),H}}(),y=e(0),x=e(5),$=e(12),c=e(8),d=e(34),p=e(35),z=e(36),S=e(13),V=e(9);function N(U,H){if(!(U instanceof H))throw new TypeError("Cannot call a class as a function")}u.OidcClient=function(){function U(){var H=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};N(this,U),this._settings=H instanceof x.OidcClientSettings?H:new x.OidcClientSettings(H)}return U.prototype.createSigninRequest=function(){var Q=this,Z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ue=Z.response_type,G=Z.scope,X=Z.redirect_uri,ee=Z.data,ve=Z.state,Oe=Z.prompt,Le=Z.display,be=Z.max_age,m=Z.ui_locales,P=Z.id_token_hint,b=Z.login_hint,_=Z.acr_values,R=Z.resource,E=Z.request,ne=Z.request_uri,me=Z.response_mode,Ee=Z.extraQueryParams,se=Z.extraTokenParams,ze=Z.request_type,Ge=Z.skipUserInfo,xe=arguments[1];y.Log.debug("OidcClient.createSigninRequest");var qe=this._settings.client_id;G=G||this._settings.scope,X=X||this._settings.redirect_uri,Oe=Oe||this._settings.prompt,Le=Le||this._settings.display,be=be||this._settings.max_age,m=m||this._settings.ui_locales,_=_||this._settings.acr_values,R=R||this._settings.resource,me=me||this._settings.response_mode,Ee=Ee||this._settings.extraQueryParams,se=se||this._settings.extraTokenParams;var Xe=this._settings.authority;return c.SigninRequest.isCode(ue=ue||this._settings.response_type)&&"code"!==ue?Promise.reject(new Error("OpenID Connect hybrid flow is not supported")):this._metadataService.getAuthorizationEndpoint().then(function(lt){y.Log.debug("OidcClient.createSigninRequest: Received authorization endpoint",lt);var He=new c.SigninRequest({url:lt,client_id:qe,redirect_uri:X,response_type:ue,scope:G,data:ee||ve,authority:Xe,prompt:Oe,display:Le,max_age:be,ui_locales:m,id_token_hint:P,login_hint:b,acr_values:_,resource:R,request:E,request_uri:ne,extraQueryParams:Ee,extraTokenParams:se,request_type:ze,response_mode:me,client_secret:Q._settings.client_secret,skipUserInfo:Ge}),Ye=He.state;return(xe=xe||Q._stateStore).set(Ye.id,Ye.toStorageString()).then(function(){return He})})},U.prototype.readSigninResponseState=function(Q,Z){var ue=arguments.length>2&&void 0!==arguments[2]&&arguments[2];y.Log.debug("OidcClient.readSigninResponseState");var G="query"===this._settings.response_mode||!this._settings.response_mode&&c.SigninRequest.isCode(this._settings.response_type),ee=new d.SigninResponse(Q,G?"?":"#");return ee.state?(Z=Z||this._stateStore,(ue?Z.remove.bind(Z):Z.get.bind(Z))(ee.state).then(function(Oe){if(!Oe)throw y.Log.error("OidcClient.readSigninResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:S.SigninState.fromStorageString(Oe),response:ee}})):(y.Log.error("OidcClient.readSigninResponseState: No state in response"),Promise.reject(new Error("No state in response")))},U.prototype.processSigninResponse=function(Q,Z){var ue=this;return y.Log.debug("OidcClient.processSigninResponse"),this.readSigninResponseState(Q,Z,!0).then(function(G){var X=G.state,ee=G.response;return y.Log.debug("OidcClient.processSigninResponse: Received state from storage; validating response"),ue._validator.validateSigninResponse(X,ee)})},U.prototype.createSignoutRequest=function(){var Q=this,Z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ue=Z.id_token_hint,G=Z.data,X=Z.state,ee=Z.post_logout_redirect_uri,ve=Z.extraQueryParams,Oe=Z.request_type,Le=arguments[1];return y.Log.debug("OidcClient.createSignoutRequest"),ee=ee||this._settings.post_logout_redirect_uri,ve=ve||this._settings.extraQueryParams,this._metadataService.getEndSessionEndpoint().then(function(be){if(!be)throw y.Log.error("OidcClient.createSignoutRequest: No end session endpoint url returned"),new Error("no end session endpoint");y.Log.debug("OidcClient.createSignoutRequest: Received end session endpoint",be);var m=new p.SignoutRequest({url:be,id_token_hint:ue,post_logout_redirect_uri:ee,data:G||X,extraQueryParams:ve,request_type:Oe}),P=m.state;return P&&(y.Log.debug("OidcClient.createSignoutRequest: Signout request has state to persist"),(Le=Le||Q._stateStore).set(P.id,P.toStorageString())),m})},U.prototype.readSignoutResponseState=function(Q,Z){var ue=arguments.length>2&&void 0!==arguments[2]&&arguments[2];y.Log.debug("OidcClient.readSignoutResponseState");var G=new z.SignoutResponse(Q);if(!G.state)return y.Log.debug("OidcClient.readSignoutResponseState: No state in response"),G.error?(y.Log.warn("OidcClient.readSignoutResponseState: Response was error: ",G.error),Promise.reject(new $.ErrorResponse(G))):Promise.resolve({state:void 0,response:G});var X=G.state;return Z=Z||this._stateStore,(ue?Z.remove.bind(Z):Z.get.bind(Z))(X).then(function(ve){if(!ve)throw y.Log.error("OidcClient.readSignoutResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:V.State.fromStorageString(ve),response:G}})},U.prototype.processSignoutResponse=function(Q,Z){var ue=this;return y.Log.debug("OidcClient.processSignoutResponse"),this.readSignoutResponseState(Q,Z,!0).then(function(G){var X=G.state,ee=G.response;return X?(y.Log.debug("OidcClient.processSignoutResponse: Received state from storage; validating response"),ue._validator.validateSignoutResponse(X,ee)):(y.Log.debug("OidcClient.processSignoutResponse: No state from storage; skipping validating response"),ee)})},U.prototype.clearStaleState=function(Q){return y.Log.debug("OidcClient.clearStaleState"),V.State.clearStaleState(Q=Q||this._stateStore,this.settings.staleStateAge)},n(U,[{key:"_stateStore",get:function(){return this.settings.stateStore}},{key:"_validator",get:function(){return this.settings.validator}},{key:"_metadataService",get:function(){return this.settings.metadataService}},{key:"settings",get:function(){return this._settings}},{key:"metadataService",get:function(){return this._metadataService}}]),U}()},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.TokenClient=void 0;var n=e(7),y=e(2),x=e(0);function $(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}u.TokenClient=function(){function c(d){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.JsonService,z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y.MetadataService;if($(this,c),!d)throw x.Log.error("TokenClient.ctor: No settings passed"),new Error("settings");this._settings=d,this._jsonService=new p,this._metadataService=new z(this._settings)}return c.prototype.exchangeCode=function(){var p=this,z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(z=Object.assign({},z)).grant_type=z.grant_type||"authorization_code",z.client_id=z.client_id||this._settings.client_id,z.client_secret=z.client_secret||this._settings.client_secret,z.redirect_uri=z.redirect_uri||this._settings.redirect_uri;var S=void 0,V=z._client_authentication||this._settings._client_authentication;return delete z._client_authentication,z.code?z.redirect_uri?z.code_verifier?z.client_id?z.client_secret||"client_secret_basic"!=V?("client_secret_basic"==V&&(S=z.client_id+":"+z.client_secret,delete z.client_id,delete z.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(N){return x.Log.debug("TokenClient.exchangeCode: Received token endpoint"),p._jsonService.postForm(N,z,S).then(function(U){return x.Log.debug("TokenClient.exchangeCode: response received"),U})})):(x.Log.error("TokenClient.exchangeCode: No client_secret passed"),Promise.reject(new Error("A client_secret is required"))):(x.Log.error("TokenClient.exchangeCode: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(x.Log.error("TokenClient.exchangeCode: No code_verifier passed"),Promise.reject(new Error("A code_verifier is required"))):(x.Log.error("TokenClient.exchangeCode: No redirect_uri passed"),Promise.reject(new Error("A redirect_uri is required"))):(x.Log.error("TokenClient.exchangeCode: No code passed"),Promise.reject(new Error("A code is required")))},c.prototype.exchangeRefreshToken=function(){var p=this,z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(z=Object.assign({},z)).grant_type=z.grant_type||"refresh_token",z.client_id=z.client_id||this._settings.client_id,z.client_secret=z.client_secret||this._settings.client_secret;var S=void 0,V=z._client_authentication||this._settings._client_authentication;return delete z._client_authentication,z.refresh_token?z.client_id?("client_secret_basic"==V&&(S=z.client_id+":"+z.client_secret,delete z.client_id,delete z.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(N){return x.Log.debug("TokenClient.exchangeRefreshToken: Received token endpoint"),p._jsonService.postForm(N,z,S).then(function(U){return x.Log.debug("TokenClient.exchangeRefreshToken: response received"),U})})):(x.Log.error("TokenClient.exchangeRefreshToken: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(x.Log.error("TokenClient.exchangeRefreshToken: No refresh_token passed"),Promise.reject(new Error("A refresh_token is required")))},c}()},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.ErrorResponse=void 0;var n=e(0);function y($,c){if(!($ instanceof c))throw new TypeError("Cannot call a class as a function")}function x($,c){if(!$)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!c||"object"!=typeof c&&"function"!=typeof c?$:c}u.ErrorResponse=function($){function c(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},p=d.error,z=d.error_description,S=d.error_uri,V=d.state,N=d.session_state;if(y(this,c),!p)throw n.Log.error("No error passed to ErrorResponse"),new Error("error");var U=x(this,$.call(this,z||p));return U.name="ErrorResponse",U.error=p,U.error_description=z,U.error_uri=S,U.state=V,U.session_state=N,U}return function(p,z){if("function"!=typeof z&&null!==z)throw new TypeError("Super expression must either be null or a function, not "+typeof z);p.prototype=Object.create(z&&z.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),z&&(Object.setPrototypeOf?Object.setPrototypeOf(p,z):p.__proto__=z)}(c,$),c}(Error)},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.SigninState=void 0;var S,n=function(){function z(S,V){for(var N=0;N<V.length;N++){var U=V[N];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(S,U.key,U)}}return function(S,V,N){return V&&z(S.prototype,V),N&&z(S,N),S}}(),y=e(0),x=e(9),$=e(4),c=(S=e(14))&&S.__esModule?S:{default:S};function d(z,S){if(!(z instanceof S))throw new TypeError("Cannot call a class as a function")}function p(z,S){if(!z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!S||"object"!=typeof S&&"function"!=typeof S?z:S}u.SigninState=function(z){function S(){var V=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},N=V.nonce,U=V.authority,H=V.client_id,Q=V.redirect_uri,Z=V.code_verifier,ue=V.response_mode,G=V.client_secret,X=V.scope,ee=V.extraTokenParams,ve=V.skipUserInfo;d(this,S);var Oe=p(this,z.call(this,arguments[0]));if(!0===N?Oe._nonce=(0,c.default)():N&&(Oe._nonce=N),!0===Z?Oe._code_verifier=(0,c.default)()+(0,c.default)()+(0,c.default)():Z&&(Oe._code_verifier=Z),Oe.code_verifier){var Le=$.JoseUtil.hashString(Oe.code_verifier,"SHA256");Oe._code_challenge=$.JoseUtil.hexToBase64Url(Le)}return Oe._redirect_uri=Q,Oe._authority=U,Oe._client_id=H,Oe._response_mode=ue,Oe._client_secret=G,Oe._scope=X,Oe._extraTokenParams=ee,Oe._skipUserInfo=ve,Oe}return function(N,U){if("function"!=typeof U&&null!==U)throw new TypeError("Super expression must either be null or a function, not "+typeof U);N.prototype=Object.create(U&&U.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(N,U):N.__proto__=U)}(S,z),S.prototype.toStorageString=function(){return y.Log.debug("SigninState.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,nonce:this.nonce,code_verifier:this.code_verifier,redirect_uri:this.redirect_uri,authority:this.authority,client_id:this.client_id,response_mode:this.response_mode,client_secret:this.client_secret,scope:this.scope,extraTokenParams:this.extraTokenParams,skipUserInfo:this.skipUserInfo})},S.fromStorageString=function(N){return y.Log.debug("SigninState.fromStorageString"),new S(JSON.parse(N))},n(S,[{key:"nonce",get:function(){return this._nonce}},{key:"authority",get:function(){return this._authority}},{key:"client_id",get:function(){return this._client_id}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"code_verifier",get:function(){return this._code_verifier}},{key:"code_challenge",get:function(){return this._code_challenge}},{key:"response_mode",get:function(){return this._response_mode}},{key:"client_secret",get:function(){return this._client_secret}},{key:"scope",get:function(){return this._scope}},{key:"extraTokenParams",get:function(){return this._extraTokenParams}},{key:"skipUserInfo",get:function(){return this._skipUserInfo}}]),S}(x.State)},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=function(){return("undefined"!=n&&null!==n&&void 0!==n.getRandomValues?y:x)().replace(/-/g,"")};var n="undefined"!=typeof window?window.crypto||window.msCrypto:null;function y(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function($){return($^n.getRandomValues(new Uint8Array(1))[0]&15>>$/4).toString(16)})}function x(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function($){return($^16*Math.random()>>$/4).toString(16)})}K.exports=u.default},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.User=void 0;var n=function(){function x($,c){for(var d=0;d<c.length;d++){var p=c[d];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty($,p.key,p)}}return function($,c,d){return c&&x($.prototype,c),d&&x($,d),$}}(),y=e(0);u.User=function(){function x($){var c=$.id_token,d=$.session_state,p=$.access_token,z=$.refresh_token,S=$.token_type,V=$.scope,N=$.profile,U=$.expires_at,H=$.state;(function(Z,ue){if(!(Z instanceof ue))throw new TypeError("Cannot call a class as a function")})(this,x),this.id_token=c,this.session_state=d,this.access_token=p,this.refresh_token=z,this.token_type=S,this.scope=V,this.profile=N,this.expires_at=U,this.state=H}return x.prototype.toStorageString=function(){return y.Log.debug("User.toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})},x.fromStorageString=function(c){return y.Log.debug("User.fromStorageString"),new x(JSON.parse(c))},n(x,[{key:"expires_in",get:function(){if(this.expires_at){var c=parseInt(Date.now()/1e3);return this.expires_at-c}},set:function(c){var d=parseInt(c);if("number"==typeof d&&d>0){var p=parseInt(Date.now()/1e3);this.expires_at=p+d}}},{key:"expired",get:function(){var c=this.expires_in;if(void 0!==c)return c<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}}]),x}()},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.AccessTokenEvents=void 0;var n=e(0),y=e(46);function x($,c){if(!($ instanceof c))throw new TypeError("Cannot call a class as a function")}u.AccessTokenEvents=function(){function $(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=c.accessTokenExpiringNotificationTime,p=void 0===d?60:d,z=c.accessTokenExpiringTimer,S=void 0===z?new y.Timer("Access token expiring"):z,V=c.accessTokenExpiredTimer,N=void 0===V?new y.Timer("Access token expired"):V;x(this,$),this._accessTokenExpiringNotificationTime=p,this._accessTokenExpiring=S,this._accessTokenExpired=N}return $.prototype.load=function(d){if(d.access_token&&void 0!==d.expires_in){var p=d.expires_in;if(n.Log.debug("AccessTokenEvents.load: access token present, remaining duration:",p),p>0){var z=p-this._accessTokenExpiringNotificationTime;z<=0&&(z=1),n.Log.debug("AccessTokenEvents.load: registering expiring timer in:",z),this._accessTokenExpiring.init(z)}else n.Log.debug("AccessTokenEvents.load: canceling existing expiring timer becase we're past expiration."),this._accessTokenExpiring.cancel();var S=p+1;n.Log.debug("AccessTokenEvents.load: registering expired timer in:",S),this._accessTokenExpired.init(S)}else this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},$.prototype.unload=function(){n.Log.debug("AccessTokenEvents.unload: canceling existing access token timers"),this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},$.prototype.addAccessTokenExpiring=function(d){this._accessTokenExpiring.addHandler(d)},$.prototype.removeAccessTokenExpiring=function(d){this._accessTokenExpiring.removeHandler(d)},$.prototype.addAccessTokenExpired=function(d){this._accessTokenExpired.addHandler(d)},$.prototype.removeAccessTokenExpired=function(d){this._accessTokenExpired.removeHandler(d)},$}()},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.Event=void 0;var n=e(0);u.Event=function(){function y(x){(function(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")})(this,y),this._name=x,this._callbacks=[]}return y.prototype.addHandler=function($){this._callbacks.push($)},y.prototype.removeHandler=function($){var c=this._callbacks.findIndex(function(d){return d===$});c>=0&&this._callbacks.splice(c,1)},y.prototype.raise=function(){n.Log.debug("Event: Raising event: "+this._name);for(var $=0;$<this._callbacks.length;$++){var c;(c=this._callbacks)[$].apply(c,arguments)}},y}()},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.SessionMonitor=void 0;var n=function(){function d(p,z){for(var S=0;S<z.length;S++){var V=z[S];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(p,V.key,V)}}return function(p,z,S){return z&&d(p.prototype,z),S&&d(p,S),p}}(),y=e(0),x=e(19),$=e(1);function c(d,p){if(!(d instanceof p))throw new TypeError("Cannot call a class as a function")}u.SessionMonitor=function(){function d(p){var z=this,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.CheckSessionIFrame,V=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$.Global.timer;if(c(this,d),!p)throw y.Log.error("SessionMonitor.ctor: No user manager passed to SessionMonitor"),new Error("userManager");this._userManager=p,this._CheckSessionIFrameCtor=S,this._timer=V,this._userManager.events.addUserLoaded(this._start.bind(this)),this._userManager.events.addUserUnloaded(this._stop.bind(this)),Promise.resolve(this._userManager.getUser().then(function(N){N?z._start(N):z._settings.monitorAnonymousSession&&z._userManager.querySessionStatus().then(function(U){var H={session_state:U.session_state};U.sub&&U.sid&&(H.profile={sub:U.sub,sid:U.sid}),z._start(H)}).catch(function(U){y.Log.error("SessionMonitor ctor: error from querySessionStatus:",U.message)})}).catch(function(N){y.Log.error("SessionMonitor ctor: error from getUser:",N.message)}))}return d.prototype._start=function(z){var S=this,V=z.session_state;V&&(z.profile?(this._sub=z.profile.sub,this._sid=z.profile.sid,y.Log.debug("SessionMonitor._start: session_state:",V,", sub:",this._sub)):(this._sub=void 0,this._sid=void 0,y.Log.debug("SessionMonitor._start: session_state:",V,", anonymous user")),this._checkSessionIFrame?this._checkSessionIFrame.start(V):this._metadataService.getCheckSessionIframe().then(function(N){if(N){y.Log.debug("SessionMonitor._start: Initializing check session iframe");var U=S._client_id,H=S._checkSessionInterval,Q=S._stopCheckSessionOnError;S._checkSessionIFrame=new S._CheckSessionIFrameCtor(S._callback.bind(S),U,N,H,Q),S._checkSessionIFrame.load().then(function(){S._checkSessionIFrame.start(V)})}else y.Log.warn("SessionMonitor._start: No check session iframe found in the metadata")}).catch(function(N){y.Log.error("SessionMonitor._start: Error from getCheckSessionIframe:",N.message)}))},d.prototype._stop=function(){var z=this;if(this._sub=void 0,this._sid=void 0,this._checkSessionIFrame&&(y.Log.debug("SessionMonitor._stop"),this._checkSessionIFrame.stop()),this._settings.monitorAnonymousSession)var S=this._timer.setInterval(function(){z._timer.clearInterval(S),z._userManager.querySessionStatus().then(function(V){var N={session_state:V.session_state};V.sub&&V.sid&&(N.profile={sub:V.sub,sid:V.sid}),z._start(N)}).catch(function(V){y.Log.error("SessionMonitor: error from querySessionStatus:",V.message)})},1e3)},d.prototype._callback=function(){var z=this;this._userManager.querySessionStatus().then(function(S){var V=!0;S?S.sub===z._sub?(V=!1,z._checkSessionIFrame.start(S.session_state),S.sid===z._sid?y.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, restarting check session iframe; session_state:",S.session_state):(y.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, session state has changed, restarting check session iframe; session_state:",S.session_state),z._userManager.events._raiseUserSessionChanged())):y.Log.debug("SessionMonitor._callback: Different subject signed into OP:",S.sub):y.Log.debug("SessionMonitor._callback: Subject no longer signed into OP"),V&&(z._sub?(y.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed out event"),z._userManager.events._raiseUserSignedOut()):(y.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed in event"),z._userManager.events._raiseUserSignedIn()))}).catch(function(S){z._sub&&(y.Log.debug("SessionMonitor._callback: Error calling queryCurrentSigninSession; raising signed out event",S.message),z._userManager.events._raiseUserSignedOut())})},n(d,[{key:"_settings",get:function(){return this._userManager.settings}},{key:"_metadataService",get:function(){return this._userManager.metadataService}},{key:"_client_id",get:function(){return this._settings.client_id}},{key:"_checkSessionInterval",get:function(){return this._settings.checkSessionInterval}},{key:"_stopCheckSessionOnError",get:function(){return this._settings.stopCheckSessionOnError}}]),d}()},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.CheckSessionIFrame=void 0;var n=e(0);function y(x,$){if(!(x instanceof $))throw new TypeError("Cannot call a class as a function")}u.CheckSessionIFrame=function(){function x($,c,d,p){var z=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];y(this,x),this._callback=$,this._client_id=c,this._url=d,this._interval=p||2e3,this._stopOnError=z;var S=d.indexOf("/",d.indexOf("//")+2);this._frame_origin=d.substr(0,S),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.style.display="none",this._frame.width=0,this._frame.height=0,this._frame.src=d}return x.prototype.load=function(){var c=this;return new Promise(function(d){c._frame.onload=function(){d()},window.document.body.appendChild(c._frame),c._boundMessageEvent=c._message.bind(c),window.addEventListener("message",c._boundMessageEvent,!1)})},x.prototype._message=function(c){c.origin===this._frame_origin&&c.source===this._frame.contentWindow&&("error"===c.data?(n.Log.error("CheckSessionIFrame: error message from check session op iframe"),this._stopOnError&&this.stop()):"changed"===c.data?(n.Log.debug("CheckSessionIFrame: changed message from check session op iframe"),this.stop(),this._callback()):n.Log.debug("CheckSessionIFrame: "+c.data+" message from check session op iframe"))},x.prototype.start=function(c){var d=this;if(this._session_state!==c){n.Log.debug("CheckSessionIFrame.start"),this.stop(),this._session_state=c;var p=function(){d._frame.contentWindow.postMessage(d._client_id+" "+d._session_state,d._frame_origin)};p(),this._timer=window.setInterval(p,this._interval)}},x.prototype.stop=function(){this._session_state=null,this._timer&&(n.Log.debug("CheckSessionIFrame.stop"),window.clearInterval(this._timer),this._timer=null)},x}()},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.TokenRevocationClient=void 0;var n=e(0),y=e(2),x=e(1);function $(p,z){if(!(p instanceof z))throw new TypeError("Cannot call a class as a function")}var c="access_token",d="refresh_token";u.TokenRevocationClient=function(){function p(z){var S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.Global.XMLHttpRequest,V=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y.MetadataService;if($(this,p),!z)throw n.Log.error("TokenRevocationClient.ctor: No settings provided"),new Error("No settings provided.");this._settings=z,this._XMLHttpRequestCtor=S,this._metadataService=new V(this._settings)}return p.prototype.revoke=function(S,V){var N=this,U=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"access_token";if(!S)throw n.Log.error("TokenRevocationClient.revoke: No token provided"),new Error("No token provided.");if(U!==c&&U!=d)throw n.Log.error("TokenRevocationClient.revoke: Invalid token type"),new Error("Invalid token type.");return this._metadataService.getRevocationEndpoint().then(function(H){if(H)return n.Log.debug("TokenRevocationClient.revoke: Revoking "+U),N._revoke(H,N._settings.client_id,N._settings.client_secret,S,U);if(V)throw n.Log.error("TokenRevocationClient.revoke: Revocation not supported"),new Error("Revocation not supported")})},p.prototype._revoke=function(S,V,N,U,H){var Q=this;return new Promise(function(Z,ue){var G=new Q._XMLHttpRequestCtor;G.open("POST",S),G.onload=function(){n.Log.debug("TokenRevocationClient.revoke: HTTP response received, status",G.status),200===G.status?Z():ue(Error(G.statusText+" ("+G.status+")"))},G.onerror=function(){n.Log.debug("TokenRevocationClient.revoke: Network Error."),ue("Network Error")};var X="client_id="+encodeURIComponent(V);N&&(X+="&client_secret="+encodeURIComponent(N)),X+="&token_type_hint="+encodeURIComponent(H),X+="&token="+encodeURIComponent(U),G.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),G.send(X)})},p}()},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.CordovaPopupWindow=void 0;var n=function(){function x($,c){for(var d=0;d<c.length;d++){var p=c[d];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty($,p.key,p)}}return function($,c,d){return c&&x($.prototype,c),d&&x($,d),$}}(),y=e(0);u.CordovaPopupWindow=function(){function x($){var c=this;(function(p,z){if(!(p instanceof z))throw new TypeError("Cannot call a class as a function")})(this,x),this._promise=new Promise(function(d,p){c._resolve=d,c._reject=p}),this.features=$.popupWindowFeatures||"location=no,toolbar=no,zoom=no",this.target=$.popupWindowTarget||"_blank",this.redirect_uri=$.startUrl,y.Log.debug("CordovaPopupWindow.ctor: redirect_uri: "+this.redirect_uri)}return x.prototype._isInAppBrowserInstalled=function(c){return["cordova-plugin-inappbrowser","cordova-plugin-inappbrowser.inappbrowser","org.apache.cordova.inappbrowser"].some(function(d){return c.hasOwnProperty(d)})},x.prototype.navigate=function(c){if(c&&c.url){if(!window.cordova)return this._error("cordova is undefined");var d=window.cordova.require("cordova/plugin_list").metadata;if(!1===this._isInAppBrowserInstalled(d))return this._error("InAppBrowser plugin not found");this._popup=cordova.InAppBrowser.open(c.url,this.target,this.features),this._popup?(y.Log.debug("CordovaPopupWindow.navigate: popup successfully created"),this._exitCallbackEvent=this._exitCallback.bind(this),this._loadStartCallbackEvent=this._loadStartCallback.bind(this),this._popup.addEventListener("exit",this._exitCallbackEvent,!1),this._popup.addEventListener("loadstart",this._loadStartCallbackEvent,!1)):this._error("Error opening popup window")}else this._error("No url provided");return this.promise},x.prototype._loadStartCallback=function(c){0===c.url.indexOf(this.redirect_uri)&&this._success({url:c.url})},x.prototype._exitCallback=function(c){this._error(c)},x.prototype._success=function(c){this._cleanup(),y.Log.debug("CordovaPopupWindow: Successful response from cordova popup window"),this._resolve(c)},x.prototype._error=function(c){this._cleanup(),y.Log.error(c),this._reject(new Error(c))},x.prototype.close=function(){this._cleanup()},x.prototype._cleanup=function(){this._popup&&(y.Log.debug("CordovaPopupWindow: cleaning up popup"),this._popup.removeEventListener("exit",this._exitCallbackEvent,!1),this._popup.removeEventListener("loadstart",this._loadStartCallbackEvent,!1),this._popup.close()),this._popup=null},n(x,[{key:"promise",get:function(){return this._promise}}]),x}()},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var n=e(0),y=e(10),x=e(5),$=e(6),c=e(37),d=e(38),p=e(16),z=e(2),S=e(48),V=e(49),N=e(19),U=e(20),H=e(18),Q=e(1),Z=e(15),ue=e(50);u.default={Version:ue.Version,Log:n.Log,OidcClient:y.OidcClient,OidcClientSettings:x.OidcClientSettings,WebStorageStateStore:$.WebStorageStateStore,InMemoryWebStorage:c.InMemoryWebStorage,UserManager:d.UserManager,AccessTokenEvents:p.AccessTokenEvents,MetadataService:z.MetadataService,CordovaPopupNavigator:S.CordovaPopupNavigator,CordovaIFrameNavigator:V.CordovaIFrameNavigator,CheckSessionIFrame:N.CheckSessionIFrame,TokenRevocationClient:U.TokenRevocationClient,SessionMonitor:H.SessionMonitor,Global:Q.Global,User:Z.User},K.exports=u.default},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.ClockService=function(){function n(){!function(x,$){if(!(x instanceof $))throw new TypeError("Cannot call a class as a function")}(this,n)}return n.prototype.getEpochTime=function(){return Promise.resolve(Date.now()/1e3|0)},n}()},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.ResponseValidator=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(V){return typeof V}:function(V){return V&&"function"==typeof Symbol&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},y=e(0),x=e(2),$=e(25),c=e(11),d=e(12),p=e(4);function z(V,N){if(!(V instanceof N))throw new TypeError("Cannot call a class as a function")}var S=["nonce","at_hash","iat","nbf","exp","aud","iss","c_hash"];u.ResponseValidator=function(){function V(N){var U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.MetadataService,H=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$.UserInfoService,Q=arguments.length>3&&void 0!==arguments[3]?arguments[3]:p.JoseUtil,Z=arguments.length>4&&void 0!==arguments[4]?arguments[4]:c.TokenClient;if(z(this,V),!N)throw y.Log.error("ResponseValidator.ctor: No settings passed to ResponseValidator"),new Error("settings");this._settings=N,this._metadataService=new U(this._settings),this._userInfoService=new H(this._settings),this._joseUtil=Q,this._tokenClient=new Z(this._settings)}return V.prototype.validateSigninResponse=function(U,H){var Q=this;return y.Log.debug("ResponseValidator.validateSigninResponse"),this._processSigninParams(U,H).then(function(Z){return y.Log.debug("ResponseValidator.validateSigninResponse: state processed"),Q._validateTokens(U,Z).then(function(ue){return y.Log.debug("ResponseValidator.validateSigninResponse: tokens validated"),Q._processClaims(U,ue).then(function(G){return y.Log.debug("ResponseValidator.validateSigninResponse: claims processed"),G})})})},V.prototype.validateSignoutResponse=function(U,H){return U.id!==H.state?(y.Log.error("ResponseValidator.validateSignoutResponse: State does not match"),Promise.reject(new Error("State does not match"))):(y.Log.debug("ResponseValidator.validateSignoutResponse: state validated"),H.state=U.data,H.error?(y.Log.warn("ResponseValidator.validateSignoutResponse: Response was error",H.error),Promise.reject(new d.ErrorResponse(H))):Promise.resolve(H))},V.prototype._processSigninParams=function(U,H){if(U.id!==H.state)return y.Log.error("ResponseValidator._processSigninParams: State does not match"),Promise.reject(new Error("State does not match"));if(!U.client_id)return y.Log.error("ResponseValidator._processSigninParams: No client_id on state"),Promise.reject(new Error("No client_id on state"));if(!U.authority)return y.Log.error("ResponseValidator._processSigninParams: No authority on state"),Promise.reject(new Error("No authority on state"));if(this._settings.authority){if(this._settings.authority&&this._settings.authority!==U.authority)return y.Log.error("ResponseValidator._processSigninParams: authority mismatch on settings vs. signin state"),Promise.reject(new Error("authority mismatch on settings vs. signin state"))}else this._settings.authority=U.authority;if(this._settings.client_id){if(this._settings.client_id&&this._settings.client_id!==U.client_id)return y.Log.error("ResponseValidator._processSigninParams: client_id mismatch on settings vs. signin state"),Promise.reject(new Error("client_id mismatch on settings vs. signin state"))}else this._settings.client_id=U.client_id;return y.Log.debug("ResponseValidator._processSigninParams: state validated"),H.state=U.data,H.error?(y.Log.warn("ResponseValidator._processSigninParams: Response was error",H.error),Promise.reject(new d.ErrorResponse(H))):U.nonce&&!H.id_token?(y.Log.error("ResponseValidator._processSigninParams: Expecting id_token in response"),Promise.reject(new Error("No id_token in response"))):!U.nonce&&H.id_token?(y.Log.error("ResponseValidator._processSigninParams: Not expecting id_token in response"),Promise.reject(new Error("Unexpected id_token in response"))):U.code_verifier&&!H.code?(y.Log.error("ResponseValidator._processSigninParams: Expecting code in response"),Promise.reject(new Error("No code in response"))):!U.code_verifier&&H.code?(y.Log.error("ResponseValidator._processSigninParams: Not expecting code in response"),Promise.reject(new Error("Unexpected code in response"))):(H.scope||(H.scope=U.scope),Promise.resolve(H))},V.prototype._processClaims=function(U,H){var Q=this;if(H.isOpenIdConnect){if(y.Log.debug("ResponseValidator._processClaims: response is OIDC, processing claims"),H.profile=this._filterProtocolClaims(H.profile),!0!==U.skipUserInfo&&this._settings.loadUserInfo&&H.access_token)return y.Log.debug("ResponseValidator._processClaims: loading user info"),this._userInfoService.getClaims(H.access_token).then(function(Z){return y.Log.debug("ResponseValidator._processClaims: user info claims received from user info endpoint"),Z.sub!==H.profile.sub?(y.Log.error("ResponseValidator._processClaims: sub from user info endpoint does not match sub in id_token"),Promise.reject(new Error("sub from user info endpoint does not match sub in id_token"))):(H.profile=Q._mergeClaims(H.profile,Z),y.Log.debug("ResponseValidator._processClaims: user info claims received, updated profile:",H.profile),H)});y.Log.debug("ResponseValidator._processClaims: not loading user info")}else y.Log.debug("ResponseValidator._processClaims: response is not OIDC, not processing claims");return Promise.resolve(H)},V.prototype._mergeClaims=function(U,H){var Q=Object.assign({},U);for(var Z in H){var ue=H[Z];Array.isArray(ue)||(ue=[ue]);for(var G=0;G<ue.length;G++){var X=ue[G];Q[Z]?Array.isArray(Q[Z])?Q[Z].indexOf(X)<0&&Q[Z].push(X):Q[Z]!==X&&(Q[Z]="object"===(void 0===X?"undefined":n(X))&&this._settings.mergeClaims?this._mergeClaims(Q[Z],X):[Q[Z],X]):Q[Z]=X}}return Q},V.prototype._filterProtocolClaims=function(U){y.Log.debug("ResponseValidator._filterProtocolClaims, incoming claims:",U);var H=Object.assign({},U);return this._settings._filterProtocolClaims?(S.forEach(function(Q){delete H[Q]}),y.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims filtered",H)):y.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims not filtered"),H},V.prototype._validateTokens=function(U,H){return H.code?(y.Log.debug("ResponseValidator._validateTokens: Validating code"),this._processCode(U,H)):H.id_token?H.access_token?(y.Log.debug("ResponseValidator._validateTokens: Validating id_token and access_token"),this._validateIdTokenAndAccessToken(U,H)):(y.Log.debug("ResponseValidator._validateTokens: Validating id_token"),this._validateIdToken(U,H)):(y.Log.debug("ResponseValidator._validateTokens: No code to process or id_token to validate"),Promise.resolve(H))},V.prototype._processCode=function(U,H){var Q=this,Z={client_id:U.client_id,client_secret:U.client_secret,code:H.code,redirect_uri:U.redirect_uri,code_verifier:U.code_verifier};return U.extraTokenParams&&"object"===n(U.extraTokenParams)&&Object.assign(Z,U.extraTokenParams),this._tokenClient.exchangeCode(Z).then(function(ue){for(var G in ue)H[G]=ue[G];return H.id_token?(y.Log.debug("ResponseValidator._processCode: token response successful, processing id_token"),Q._validateIdTokenAttributes(U,H)):(y.Log.debug("ResponseValidator._processCode: token response successful, returning response"),H)})},V.prototype._validateIdTokenAttributes=function(U,H){var Q=this;return this._metadataService.getIssuer().then(function(Z){var ue=U.client_id,G=Q._settings.clockSkew;return y.Log.debug("ResponseValidator._validateIdTokenAttributes: Validaing JWT attributes; using clock skew (in seconds) of: ",G),Q._settings.getEpochTime().then(function(X){return Q._joseUtil.validateJwtAttributes(H.id_token,Z,ue,G,X).then(function(ee){return U.nonce&&U.nonce!==ee.nonce?(y.Log.error("ResponseValidator._validateIdTokenAttributes: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):ee.sub?(H.profile=ee,H):(y.Log.error("ResponseValidator._validateIdTokenAttributes: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})})},V.prototype._validateIdTokenAndAccessToken=function(U,H){var Q=this;return this._validateIdToken(U,H).then(function(Z){return Q._validateAccessToken(Z)})},V.prototype._getSigningKeyForJwt=function(U){var H=this;return this._metadataService.getSigningKeys().then(function(Q){var Z=U.header.kid;if(!Q)return y.Log.error("ResponseValidator._validateIdToken: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));y.Log.debug("ResponseValidator._validateIdToken: Received signing keys");var ue=void 0;if(Z)ue=Q.filter(function(G){return G.kid===Z})[0];else{if((Q=H._filterByAlg(Q,U.header.alg)).length>1)return y.Log.error("ResponseValidator._validateIdToken: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));ue=Q[0]}return Promise.resolve(ue)})},V.prototype._getSigningKeyForJwtWithSingleRetry=function(U){var H=this;return this._getSigningKeyForJwt(U).then(function(Q){return Q?Promise.resolve(Q):(H._metadataService.resetSigningKeys(),H._getSigningKeyForJwt(U))})},V.prototype._validateIdToken=function(U,H){var Q=this;if(!U.nonce)return y.Log.error("ResponseValidator._validateIdToken: No nonce on state"),Promise.reject(new Error("No nonce on state"));var Z=this._joseUtil.parseJwt(H.id_token);return Z&&Z.header&&Z.payload?U.nonce!==Z.payload.nonce?(y.Log.error("ResponseValidator._validateIdToken: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):this._metadataService.getIssuer().then(function(ue){return y.Log.debug("ResponseValidator._validateIdToken: Received issuer"),Q._getSigningKeyForJwtWithSingleRetry(Z).then(function(G){if(!G)return y.Log.error("ResponseValidator._validateIdToken: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var X=U.client_id,ee=Q._settings.clockSkew;return y.Log.debug("ResponseValidator._validateIdToken: Validaing JWT; using clock skew (in seconds) of: ",ee),Q._joseUtil.validateJwt(H.id_token,G,ue,X,ee).then(function(){return y.Log.debug("ResponseValidator._validateIdToken: JWT validation successful"),Z.payload.sub?(H.profile=Z.payload,H):(y.Log.error("ResponseValidator._validateIdToken: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})}):(y.Log.error("ResponseValidator._validateIdToken: Failed to parse id_token",Z),Promise.reject(new Error("Failed to parse id_token")))},V.prototype._filterByAlg=function(U,H){var Q=null;if(H.startsWith("RS"))Q="RSA";else if(H.startsWith("PS"))Q="PS";else{if(!H.startsWith("ES"))return y.Log.debug("ResponseValidator._filterByAlg: alg not supported: ",H),[];Q="EC"}return y.Log.debug("ResponseValidator._filterByAlg: Looking for keys that match kty: ",Q),U=U.filter(function(Z){return Z.kty===Q}),y.Log.debug("ResponseValidator._filterByAlg: Number of keys that match kty: ",Q,U.length),U},V.prototype._validateAccessToken=function(U){if(!U.profile)return y.Log.error("ResponseValidator._validateAccessToken: No profile loaded from id_token"),Promise.reject(new Error("No profile loaded from id_token"));if(!U.profile.at_hash)return y.Log.error("ResponseValidator._validateAccessToken: No at_hash in id_token"),Promise.reject(new Error("No at_hash in id_token"));if(!U.id_token)return y.Log.error("ResponseValidator._validateAccessToken: No id_token"),Promise.reject(new Error("No id_token"));var H=this._joseUtil.parseJwt(U.id_token);if(!H||!H.header)return y.Log.error("ResponseValidator._validateAccessToken: Failed to parse id_token",H),Promise.reject(new Error("Failed to parse id_token"));var Q=H.header.alg;if(!Q||5!==Q.length)return y.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",Q),Promise.reject(new Error("Unsupported alg: "+Q));var Z=Q.substr(2,3);if(!Z)return y.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",Q,Z),Promise.reject(new Error("Unsupported alg: "+Q));if(256!==(Z=parseInt(Z))&&384!==Z&&512!==Z)return y.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",Q,Z),Promise.reject(new Error("Unsupported alg: "+Q));var ue="sha"+Z,G=this._joseUtil.hashString(U.access_token,ue);if(!G)return y.Log.error("ResponseValidator._validateAccessToken: access_token hash failed:",ue),Promise.reject(new Error("Failed to validate at_hash"));var X=G.substr(0,G.length/2),ee=this._joseUtil.hexToBase64Url(X);return ee!==U.profile.at_hash?(y.Log.error("ResponseValidator._validateAccessToken: Failed to validate at_hash",ee,U.profile.at_hash),Promise.reject(new Error("Failed to validate at_hash"))):(y.Log.debug("ResponseValidator._validateAccessToken: success"),Promise.resolve(U))},V}()},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.UserInfoService=void 0;var n=e(7),y=e(2),x=e(0),$=e(4);function c(d,p){if(!(d instanceof p))throw new TypeError("Cannot call a class as a function")}u.UserInfoService=function(){function d(p){var z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.JsonService,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y.MetadataService,V=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$.JoseUtil;if(c(this,d),!p)throw x.Log.error("UserInfoService.ctor: No settings passed"),new Error("settings");this._settings=p,this._jsonService=new z(void 0,void 0,this._getClaimsFromJwt.bind(this)),this._metadataService=new S(this._settings),this._joseUtil=V}return d.prototype.getClaims=function(z){var S=this;return z?this._metadataService.getUserInfoEndpoint().then(function(V){return x.Log.debug("UserInfoService.getClaims: received userinfo url",V),S._jsonService.getJson(V,z).then(function(N){return x.Log.debug("UserInfoService.getClaims: claims received",N),N})}):(x.Log.error("UserInfoService.getClaims: No token passed"),Promise.reject(new Error("A token is required")))},d.prototype._getClaimsFromJwt=function(z){var S=this;try{var V=this._joseUtil.parseJwt(z.responseText);if(!V||!V.header||!V.payload)return x.Log.error("UserInfoService._getClaimsFromJwt: Failed to parse JWT",V),Promise.reject(new Error("Failed to parse id_token"));var N=V.header.kid,U=void 0;switch(this._settings.userInfoJwtIssuer){case"OP":U=this._metadataService.getIssuer();break;case"ANY":U=Promise.resolve(V.payload.iss);break;default:U=Promise.resolve(this._settings.userInfoJwtIssuer)}return U.then(function(H){return x.Log.debug("UserInfoService._getClaimsFromJwt: Received issuer:"+H),S._metadataService.getSigningKeys().then(function(Q){if(!Q)return x.Log.error("UserInfoService._getClaimsFromJwt: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));x.Log.debug("UserInfoService._getClaimsFromJwt: Received signing keys");var Z=void 0;if(N)Z=Q.filter(function(X){return X.kid===N})[0];else{if((Q=S._filterByAlg(Q,V.header.alg)).length>1)return x.Log.error("UserInfoService._getClaimsFromJwt: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));Z=Q[0]}if(!Z)return x.Log.error("UserInfoService._getClaimsFromJwt: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var ue=S._settings.client_id,G=S._settings.clockSkew;return x.Log.debug("UserInfoService._getClaimsFromJwt: Validaing JWT; using clock skew (in seconds) of: ",G),S._joseUtil.validateJwt(z.responseText,Z,H,ue,G,void 0,!0).then(function(){return x.Log.debug("UserInfoService._getClaimsFromJwt: JWT validation successful"),V.payload})})})}catch(H){return x.Log.error("UserInfoService._getClaimsFromJwt: Error parsing JWT response",H.message),void reject(H)}},d.prototype._filterByAlg=function(z,S){var V=null;if(S.startsWith("RS"))V="RSA";else if(S.startsWith("PS"))V="PS";else{if(!S.startsWith("ES"))return x.Log.debug("UserInfoService._filterByAlg: alg not supported: ",S),[];V="EC"}return x.Log.debug("UserInfoService._filterByAlg: Looking for keys that match kty: ",V),z=z.filter(function(N){return N.kty===V}),x.Log.debug("UserInfoService._filterByAlg: Number of keys that match kty: ",V,z.length),z},d}()},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.AllowedSigningAlgs=u.b64tohex=u.hextob64u=u.crypto=u.X509=u.KeyUtil=u.jws=void 0;var n=e(27);u.jws=n.jws,u.KeyUtil=n.KEYUTIL,u.X509=n.X509,u.crypto=n.crypto,u.hextob64u=n.hextob64u,u.b64tohex=n.b64tohex,u.AllowedSigningAlgs=["RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"]},function(K,u,e){"use strict";(function(n){Object.defineProperty(u,"__esModule",{value:!0});var y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(T){return typeof T}:function(T){return T&&"function"==typeof Symbol&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},x={userAgent:!1},$={};if(void 0===c)var c={};c.lang={extend:function(M,Y,J){if(!Y||!M)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var ge=function(){};if(ge.prototype=Y.prototype,M.prototype=new ge,M.prototype.constructor=M,M.superclass=Y.prototype,Y.prototype.constructor==Object.prototype.constructor&&(Y.prototype.constructor=Y),J){var Ce;for(Ce in J)M.prototype[Ce]=J[Ce];var We=function(){},pt=["toString","valueOf"];try{/MSIE/.test(x.userAgent)&&(We=function(xt,Mt){for(Ce=0;Ce<pt.length;Ce+=1){var Nt=pt[Ce],$t=Mt[Nt];"function"==typeof $t&&$t!=Object.prototype[Nt]&&(xt[Nt]=$t)}})}catch{}We(M.prototype,J)}}};var d,p,z,S,V,N,U,H,Q,Z,ue,M,Y,J,ge,G=G||(d=Math,z=(p={}).lib={},S=z.Base=function(){function T(){}return{extend:function(Y){T.prototype=this;var J=new T;return Y&&J.mixIn(Y),J.hasOwnProperty("init")||(J.init=function(){J.$super.init.apply(this,arguments)}),J.init.prototype=J,J.$super=this,J},create:function(){var Y=this.extend();return Y.init.apply(Y,arguments),Y},init:function(){},mixIn:function(Y){for(var J in Y)Y.hasOwnProperty(J)&&(this[J]=Y[J]);Y.hasOwnProperty("toString")&&(this.toString=Y.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),V=z.WordArray=S.extend({init:function(M,Y){M=this.words=M||[],this.sigBytes=Y??4*M.length},toString:function(M){return(M||U).stringify(this)},concat:function(M){var Y=this.words,J=M.words,ge=this.sigBytes,Ce=M.sigBytes;if(this.clamp(),ge%4)for(var We=0;We<Ce;We++)Y[ge+We>>>2]|=(J[We>>>2]>>>24-We%4*8&255)<<24-(ge+We)%4*8;else for(We=0;We<Ce;We+=4)Y[ge+We>>>2]=J[We>>>2];return this.sigBytes+=Ce,this},clamp:function(){var M=this.words,Y=this.sigBytes;M[Y>>>2]&=4294967295<<32-Y%4*8,M.length=d.ceil(Y/4)},clone:function(){var M=S.clone.call(this);return M.words=this.words.slice(0),M},random:function(M){for(var Y=[],J=0;J<M;J+=4)Y.push(4294967296*d.random()|0);return new V.init(Y,M)}}),N=p.enc={},U=N.Hex={stringify:function(M){for(var Y=M.words,J=M.sigBytes,ge=[],Ce=0;Ce<J;Ce++){var We=Y[Ce>>>2]>>>24-Ce%4*8&255;ge.push((We>>>4).toString(16)),ge.push((15&We).toString(16))}return ge.join("")},parse:function(M){for(var Y=M.length,J=[],ge=0;ge<Y;ge+=2)J[ge>>>3]|=parseInt(M.substr(ge,2),16)<<24-ge%8*4;return new V.init(J,Y/2)}},H=N.Latin1={stringify:function(M){for(var Y=M.words,J=M.sigBytes,ge=[],Ce=0;Ce<J;Ce++)ge.push(String.fromCharCode(Y[Ce>>>2]>>>24-Ce%4*8&255));return ge.join("")},parse:function(M){for(var Y=M.length,J=[],ge=0;ge<Y;ge++)J[ge>>>2]|=(255&M.charCodeAt(ge))<<24-ge%4*8;return new V.init(J,Y)}},Q=N.Utf8={stringify:function(M){try{return decodeURIComponent(escape(H.stringify(M)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(M){return H.parse(unescape(encodeURIComponent(M)))}},Z=z.BufferedBlockAlgorithm=S.extend({reset:function(){this._data=new V.init,this._nDataBytes=0},_append:function(M){"string"==typeof M&&(M=Q.parse(M)),this._data.concat(M),this._nDataBytes+=M.sigBytes},_process:function(M){var Y=this._data,J=Y.words,ge=Y.sigBytes,Ce=this.blockSize,We=ge/(4*Ce),pt=(We=M?d.ceil(We):d.max((0|We)-this._minBufferSize,0))*Ce,dt=d.min(4*pt,ge);if(pt){for(var xt=0;xt<pt;xt+=Ce)this._doProcessBlock(J,xt);var Mt=J.splice(0,pt);Y.sigBytes-=dt}return new V.init(Mt,dt)},clone:function(){var M=S.clone.call(this);return M._data=this._data.clone(),M},_minBufferSize:0}),z.Hasher=Z.extend({cfg:S.extend(),init:function(M){this.cfg=this.cfg.extend(M),this.reset()},reset:function(){Z.reset.call(this),this._doReset()},update:function(M){return this._append(M),this._process(),this},finalize:function(M){return M&&this._append(M),this._doFinalize()},blockSize:16,_createHelper:function(M){return function(Y,J){return new M.init(J).finalize(Y)}},_createHmacHelper:function(M){return function(Y,J){return new ue.HMAC.init(M,J).finalize(Y)}}}),ue=p.algo={},p);Y=(M=G).lib,J=Y.Base,ge=Y.WordArray,(M=M.x64={}).Word=J.extend({init:function(We,pt){this.high=We,this.low=pt}}),M.WordArray=J.extend({init:function(We,pt){We=this.words=We||[],this.sigBytes=pt??8*We.length},toX32:function(){for(var We=this.words,pt=We.length,dt=[],xt=0;xt<pt;xt++){var Mt=We[xt];dt.push(Mt.high),dt.push(Mt.low)}return ge.create(dt,this.sigBytes)},clone:function(){for(var We=J.clone.call(this),pt=We.words=this.words.slice(0),dt=pt.length,xt=0;xt<dt;xt++)pt[xt]=pt[xt].clone();return We}}),function(){var M=G.lib.WordArray;G.enc.Base64={stringify:function(J){var ge=J.words,Ce=J.sigBytes,We=this._map;J.clamp(),J=[];for(var pt=0;pt<Ce;pt+=3)for(var dt=(ge[pt>>>2]>>>24-pt%4*8&255)<<16|(ge[pt+1>>>2]>>>24-(pt+1)%4*8&255)<<8|ge[pt+2>>>2]>>>24-(pt+2)%4*8&255,xt=0;4>xt&&pt+.75*xt<Ce;xt++)J.push(We.charAt(dt>>>6*(3-xt)&63));if(ge=We.charAt(64))for(;J.length%4;)J.push(ge);return J.join("")},parse:function(J){var ge=J.length,Ce=this._map;(We=Ce.charAt(64))&&-1!=(We=J.indexOf(We))&&(ge=We);for(var We=[],pt=0,dt=0;dt<ge;dt++)if(dt%4){var xt=Ce.indexOf(J.charAt(dt-1))<<dt%4*2,Mt=Ce.indexOf(J.charAt(dt))>>>6-dt%4*2;We[pt>>>2]|=(xt|Mt)<<24-pt%4*8,pt++}return M.create(We,pt)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(T){for(var M=G,Y=(ge=M.lib).WordArray,J=ge.Hasher,ge=M.algo,Ce=[],We=[],pt=function(At){return 4294967296*(At-(0|At))|0},dt=2,xt=0;64>xt;){var Mt;e:{for(var Nt=T.sqrt(Mt=dt),$t=2;$t<=Nt;$t++)if(!(Mt%$t)){Mt=!1;break e}Mt=!0}Mt&&(8>xt&&(Ce[xt]=pt(T.pow(dt,.5))),We[xt]=pt(T.pow(dt,1/3)),xt++),dt++}var St=[];ge=ge.SHA256=J.extend({_doReset:function(){this._hash=new Y.init(Ce.slice(0))},_doProcessBlock:function(At,oe){for(var O=this._hash.words,I=O[0],ce=O[1],Te=O[2],at=O[3],Tt=O[4],tn=O[5],on=O[6],bn=O[7],vn=0;64>vn;vn++){if(16>vn)St[vn]=0|At[oe+vn];else{var Ht=St[vn-15],Jn=St[vn-2];St[vn]=((Ht<<25|Ht>>>7)^(Ht<<14|Ht>>>18)^Ht>>>3)+St[vn-7]+((Jn<<15|Jn>>>17)^(Jn<<13|Jn>>>19)^Jn>>>10)+St[vn-16]}Ht=bn+((Tt<<26|Tt>>>6)^(Tt<<21|Tt>>>11)^(Tt<<7|Tt>>>25))+(Tt&tn^~Tt&on)+We[vn]+St[vn],Jn=((I<<30|I>>>2)^(I<<19|I>>>13)^(I<<10|I>>>22))+(I&ce^I&Te^ce&Te),bn=on,on=tn,tn=Tt,Tt=at+Ht|0,at=Te,Te=ce,ce=I,I=Ht+Jn|0}O[0]=O[0]+I|0,O[1]=O[1]+ce|0,O[2]=O[2]+Te|0,O[3]=O[3]+at|0,O[4]=O[4]+Tt|0,O[5]=O[5]+tn|0,O[6]=O[6]+on|0,O[7]=O[7]+bn|0},_doFinalize:function(){var At=this._data,oe=At.words,O=8*this._nDataBytes,I=8*At.sigBytes;return oe[I>>>5]|=128<<24-I%32,oe[14+(I+64>>>9<<4)]=T.floor(O/4294967296),oe[15+(I+64>>>9<<4)]=O,At.sigBytes=4*oe.length,this._process(),this._hash},clone:function(){var At=J.clone.call(this);return At._hash=this._hash.clone(),At}}),M.SHA256=J._createHelper(ge),M.HmacSHA256=J._createHmacHelper(ge)}(Math),function(){function T(){return J.create.apply(J,arguments)}for(var M=G,Y=M.lib.Hasher,J=(Ce=M.x64).Word,ge=Ce.WordArray,Ce=M.algo,We=[T(1116352408,3609767458),T(1899447441,602891725),T(3049323471,3964484399),T(3921009573,2173295548),T(961987163,4081628472),T(1508970993,3053834265),T(2453635748,2937671579),T(2870763221,3664609560),T(3624381080,2734883394),T(310598401,1164996542),T(607225278,1323610764),T(1426881987,3590304994),T(1925078388,4068182383),T(2162078206,991336113),T(2614888103,633803317),T(3248222580,3479774868),T(3835390401,2666613458),T(4022224774,944711139),T(264347078,2341262773),T(604807628,2007800933),T(770255983,1495990901),T(1249150122,1856431235),T(1555081692,3175218132),T(1996064986,2198950837),T(2554220882,3999719339),T(2821834349,766784016),T(2952996808,2566594879),T(3210313671,3203337956),T(3336571891,1034457026),T(3584528711,2466948901),T(113926993,3758326383),T(338241895,168717936),T(666307205,1188179964),T(773529912,1546045734),T(1294757372,1522805485),T(1396182291,2643833823),T(1695183700,2343527390),T(1986661051,1014477480),T(2177026350,1206759142),T(2456956037,344077627),T(2730485921,1290863460),T(2820302411,3158454273),T(3259730800,3505952657),T(3345764771,106217008),T(3516065817,3606008344),T(3600352804,1432725776),T(4094571909,1467031594),T(275423344,851169720),T(430227734,3100823752),T(506948616,1363258195),T(659060556,3750685593),T(883997877,3785050280),T(958139571,3318307427),T(1322822218,3812723403),T(1537002063,2003034995),T(1747873779,3602036899),T(1955562222,1575990012),T(2024104815,1125592928),T(2227730452,2716904306),T(2361852424,442776044),T(2428436474,593698344),T(2756734187,3733110249),T(3204031479,2999351573),T(3329325298,3815920427),T(3391569614,3928383900),T(3515267271,566280711),T(3940187606,3454069534),T(4118630271,4000239992),T(116418474,1914138554),T(174292421,2731055270),T(289380356,3203993006),T(460393269,320620315),T(685471733,587496836),T(852142971,1086792851),T(1017036298,365543100),T(1126000580,2618297676),T(1288033470,3409855158),T(1501505948,4234509866),T(1607167915,987167468),T(1816402316,1246189591)],pt=[],dt=0;80>dt;dt++)pt[dt]=T();Ce=Ce.SHA512=Y.extend({_doReset:function(){this._hash=new ge.init([new J.init(1779033703,4089235720),new J.init(3144134277,2227873595),new J.init(1013904242,4271175723),new J.init(2773480762,1595750129),new J.init(1359893119,2917565137),new J.init(2600822924,725511199),new J.init(528734635,4215389547),new J.init(1541459225,327033209)])},_doProcessBlock:function(Mt,Nt){for(var $t=(ce=this._hash.words)[0],St=ce[1],tt=ce[2],At=ce[3],oe=ce[4],O=ce[5],I=ce[6],ce=ce[7],Te=$t.high,at=$t.low,Tt=St.high,tn=St.low,on=tt.high,bn=tt.low,vn=At.high,Ht=At.low,Jn=oe.high,er=oe.low,rr=O.high,Ln=O.low,Nn=I.high,Mn=I.low,kn=ce.high,jn=ce.low,Gn=Te,nr=at,Sr=Tt,bt=tn,_t=on,Ze=bn,jt=vn,Jt=Ht,en=Jn,nn=er,un=rr,rn=Ln,cn=Nn,Sn=Mn,Vn=kn,tr=jn,Wr=0;80>Wr;Wr++){var Ci=pt[Wr];if(16>Wr)var Oi=Ci.high=0|Mt[Nt+2*Wr],Tr=Ci.low=0|Mt[Nt+2*Wr+1];else{Oi=((Tr=(Oi=pt[Wr-15]).high)>>>1|(vi=Oi.low)<<31)^(Tr>>>8|vi<<24)^Tr>>>7;var vi=(vi>>>1|Tr<<31)^(vi>>>8|Tr<<24)^(vi>>>7|Tr<<25),ai=((Tr=(ai=pt[Wr-2]).high)>>>19|(li=ai.low)<<13)^(Tr<<3|li>>>29)^Tr>>>6,li=(li>>>19|Tr<<13)^(li<<3|Tr>>>29)^(li>>>6|Tr<<26),ko=(Tr=pt[Wr-7]).high,Qi=(xi=pt[Wr-16]).high,xi=xi.low;Oi=(Oi=(Oi=Oi+ko+((Tr=vi+Tr.low)>>>0<vi>>>0?1:0))+ai+((Tr+=li)>>>0<li>>>0?1:0))+Qi+((Tr+=xi)>>>0<xi>>>0?1:0),Ci.high=Oi,Ci.low=Tr}ko=en&un^~en&cn,xi=nn&rn^~nn&Sn,Ci=Gn&Sr^Gn&_t^Sr&_t;var Fo=nr&bt^nr&Ze^bt&Ze,Do=(vi=(Gn>>>28|nr<<4)^(Gn<<30|nr>>>2)^(Gn<<25|nr>>>7),ai=(nr>>>28|Gn<<4)^(nr<<30|Gn>>>2)^(nr<<25|Gn>>>7),(li=We[Wr]).high),Jo=li.low;Qi=Vn+((en>>>14|nn<<18)^(en>>>18|nn<<14)^(en<<23|nn>>>9))+((li=tr+((nn>>>14|en<<18)^(nn>>>18|en<<14)^(nn<<23|en>>>9)))>>>0<tr>>>0?1:0),Vn=cn,tr=Sn,cn=un,Sn=rn,un=en,rn=nn,en=jt+(Qi=(Qi=(Qi=Qi+ko+((li+=xi)>>>0<xi>>>0?1:0))+Do+((li+=Jo)>>>0<Jo>>>0?1:0))+Oi+((li+=Tr)>>>0<Tr>>>0?1:0))+((nn=Jt+li|0)>>>0<Jt>>>0?1:0)|0,jt=_t,Jt=Ze,_t=Sr,Ze=bt,Sr=Gn,bt=nr,Gn=Qi+(Ci=vi+Ci+((Tr=ai+Fo)>>>0<ai>>>0?1:0))+((nr=li+Tr|0)>>>0<li>>>0?1:0)|0}at=$t.low=at+nr,$t.high=Te+Gn+(at>>>0<nr>>>0?1:0),tn=St.low=tn+bt,St.high=Tt+Sr+(tn>>>0<bt>>>0?1:0),bn=tt.low=bn+Ze,tt.high=on+_t+(bn>>>0<Ze>>>0?1:0),Ht=At.low=Ht+Jt,At.high=vn+jt+(Ht>>>0<Jt>>>0?1:0),er=oe.low=er+nn,oe.high=Jn+en+(er>>>0<nn>>>0?1:0),Ln=O.low=Ln+rn,O.high=rr+un+(Ln>>>0<rn>>>0?1:0),Mn=I.low=Mn+Sn,I.high=Nn+cn+(Mn>>>0<Sn>>>0?1:0),jn=ce.low=jn+tr,ce.high=kn+Vn+(jn>>>0<tr>>>0?1:0)},_doFinalize:function(){var Mt=this._data,Nt=Mt.words,$t=8*this._nDataBytes,St=8*Mt.sigBytes;return Nt[St>>>5]|=128<<24-St%32,Nt[30+(St+128>>>10<<5)]=Math.floor($t/4294967296),Nt[31+(St+128>>>10<<5)]=$t,Mt.sigBytes=4*Nt.length,this._process(),this._hash.toX32()},clone:function(){var Mt=Y.clone.call(this);return Mt._hash=this._hash.clone(),Mt},blockSize:32}),M.SHA512=Y._createHelper(Ce),M.HmacSHA512=Y._createHmacHelper(Ce)}(),function(){var T=G,M=(ge=T.x64).Word,Y=ge.WordArray,J=(ge=T.algo).SHA512,ge=ge.SHA384=J.extend({_doReset:function(){this._hash=new Y.init([new M.init(3418070365,3238371032),new M.init(1654270250,914150663),new M.init(2438529370,812702999),new M.init(355462360,4144912697),new M.init(1731405415,4290775857),new M.init(2394180231,1750603025),new M.init(3675008525,1694076839),new M.init(1203062813,3204075428)])},_doFinalize:function(){var We=J._doFinalize.call(this);return We.sigBytes-=16,We}});T.SHA384=J._createHelper(ge),T.HmacSHA384=J._createHmacHelper(ge)}();var X,ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function ve(T){var M,Y,J="";for(M=0;M+3<=T.length;M+=3)Y=parseInt(T.substring(M,M+3),16),J+=ee.charAt(Y>>6)+ee.charAt(63&Y);for(M+1==T.length?(Y=parseInt(T.substring(M,M+1),16),J+=ee.charAt(Y<<2)):M+2==T.length&&(Y=parseInt(T.substring(M,M+2),16),J+=ee.charAt(Y>>2)+ee.charAt((3&Y)<<4));(3&J.length)>0;)J+="=";return J}function Oe(T){var M,Y,J,ge="",Ce=0;for(M=0;M<T.length&&"="!=T.charAt(M);++M)(J=ee.indexOf(T.charAt(M)))<0||(0==Ce?(ge+=R(J>>2),Y=3&J,Ce=1):1==Ce?(ge+=R(Y<<2|J>>4),Y=15&J,Ce=2):2==Ce?(ge+=R(Y),ge+=R(J>>2),Y=3&J,Ce=3):(ge+=R(Y<<2|J>>4),ge+=R(15&J),Ce=0));return 1==Ce&&(ge+=R(Y<<2)),ge}function Le(T){var M,Y=Oe(T),J=new Array;for(M=0;2*M<Y.length;++M)J[M]=parseInt(Y.substring(2*M,2*M+2),16);return J}function be(T,M,Y){null!=T&&("number"==typeof T?this.fromNumber(T,M,Y):this.fromString(T,null==M&&"string"!=typeof T?256:M))}function m(){return new be(null)}"Microsoft Internet Explorer"==x.appName?(be.prototype.am=function(M,Y,J,ge,Ce,We){for(var pt=32767&Y,dt=Y>>15;--We>=0;){var xt=32767&this[M],Mt=this[M++]>>15,Nt=dt*xt+Mt*pt;Ce=((xt=pt*xt+((32767&Nt)<<15)+J[ge]+(1073741823&Ce))>>>30)+(Nt>>>15)+dt*Mt+(Ce>>>30),J[ge++]=1073741823&xt}return Ce},X=30):"Netscape"!=x.appName?(be.prototype.am=function(M,Y,J,ge,Ce,We){for(;--We>=0;){var pt=Y*this[M++]+J[ge]+Ce;Ce=Math.floor(pt/67108864),J[ge++]=67108863&pt}return Ce},X=26):(be.prototype.am=function(M,Y,J,ge,Ce,We){for(var pt=16383&Y,dt=Y>>14;--We>=0;){var xt=16383&this[M],Mt=this[M++]>>14,Nt=dt*xt+Mt*pt;Ce=((xt=pt*xt+((16383&Nt)<<14)+J[ge]+Ce)>>28)+(Nt>>14)+dt*Mt,J[ge++]=268435455&xt}return Ce},X=28),be.prototype.DB=X,be.prototype.DM=(1<<X)-1,be.prototype.DV=1<<X,be.prototype.FV=Math.pow(2,52),be.prototype.F1=52-X,be.prototype.F2=2*X-52;var P,b,_=new Array;for(P="0".charCodeAt(0),b=0;b<=9;++b)_[P++]=b;for(P="a".charCodeAt(0),b=10;b<36;++b)_[P++]=b;for(P="A".charCodeAt(0),b=10;b<36;++b)_[P++]=b;function R(T){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(T)}function E(T,M){return _[T.charCodeAt(M)]??-1}function ne(T){var M=m();return M.fromInt(T),M}function me(T){var M,Y=1;return 0!=(M=T>>>16)&&(T=M,Y+=16),0!=(M=T>>8)&&(T=M,Y+=8),0!=(M=T>>4)&&(T=M,Y+=4),0!=(M=T>>2)&&(T=M,Y+=2),0!=(M=T>>1)&&(T=M,Y+=1),Y}function Ee(T){this.m=T}function se(T){this.m=T,this.mp=T.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<T.DB-15)-1,this.mt2=2*T.t}function ze(T,M){return T&M}function Ge(T,M){return T|M}function xe(T,M){return T^M}function qe(T,M){return T&~M}function Xe(T){if(0==T)return-1;var M=0;return 0==(65535&T)&&(T>>=16,M+=16),0==(255&T)&&(T>>=8,M+=8),0==(15&T)&&(T>>=4,M+=4),0==(3&T)&&(T>>=2,M+=2),0==(1&T)&&++M,M}function lt(T){for(var M=0;0!=T;)T&=T-1,++M;return M}function He(){}function Ye(T){return T}function ht(T){this.r2=m(),this.q3=m(),be.ONE.dlShiftTo(2*T.t,this.r2),this.mu=this.r2.divide(T),this.m=T}Ee.prototype.convert=function(M){return M.s<0||M.compareTo(this.m)>=0?M.mod(this.m):M},Ee.prototype.revert=function(M){return M},Ee.prototype.reduce=function(M){M.divRemTo(this.m,null,M)},Ee.prototype.mulTo=function(M,Y,J){M.multiplyTo(Y,J),this.reduce(J)},Ee.prototype.sqrTo=function(M,Y){M.squareTo(Y),this.reduce(Y)},se.prototype.convert=function(M){var Y=m();return M.abs().dlShiftTo(this.m.t,Y),Y.divRemTo(this.m,null,Y),M.s<0&&Y.compareTo(be.ZERO)>0&&this.m.subTo(Y,Y),Y},se.prototype.revert=function(M){var Y=m();return M.copyTo(Y),this.reduce(Y),Y},se.prototype.reduce=function(M){for(;M.t<=this.mt2;)M[M.t++]=0;for(var Y=0;Y<this.m.t;++Y){var J=32767&M[Y],ge=J*this.mpl+((J*this.mph+(M[Y]>>15)*this.mpl&this.um)<<15)&M.DM;for(M[J=Y+this.m.t]+=this.m.am(0,ge,M,Y,0,this.m.t);M[J]>=M.DV;)M[J]-=M.DV,M[++J]++}M.clamp(),M.drShiftTo(this.m.t,M),M.compareTo(this.m)>=0&&M.subTo(this.m,M)},se.prototype.mulTo=function(M,Y,J){M.multiplyTo(Y,J),this.reduce(J)},se.prototype.sqrTo=function(M,Y){M.squareTo(Y),this.reduce(Y)},be.prototype.copyTo=function(M){for(var Y=this.t-1;Y>=0;--Y)M[Y]=this[Y];M.t=this.t,M.s=this.s},be.prototype.fromInt=function(M){this.t=1,this.s=M<0?-1:0,M>0?this[0]=M:M<-1?this[0]=M+this.DV:this.t=0},be.prototype.fromString=function(M,Y){var J;if(16==Y)J=4;else if(8==Y)J=3;else if(256==Y)J=8;else if(2==Y)J=1;else if(32==Y)J=5;else{if(4!=Y)return void this.fromRadix(M,Y);J=2}this.t=0,this.s=0;for(var ge=M.length,Ce=!1,We=0;--ge>=0;){var pt=8==J?255&M[ge]:E(M,ge);pt<0?"-"==M.charAt(ge)&&(Ce=!0):(Ce=!1,0==We?this[this.t++]=pt:We+J>this.DB?(this[this.t-1]|=(pt&(1<<this.DB-We)-1)<<We,this[this.t++]=pt>>this.DB-We):this[this.t-1]|=pt<<We,(We+=J)>=this.DB&&(We-=this.DB))}8==J&&0!=(128&M[0])&&(this.s=-1,We>0&&(this[this.t-1]|=(1<<this.DB-We)-1<<We)),this.clamp(),Ce&&be.ZERO.subTo(this,this)},be.prototype.clamp=function(){for(var M=this.s&this.DM;this.t>0&&this[this.t-1]==M;)--this.t},be.prototype.dlShiftTo=function(M,Y){var J;for(J=this.t-1;J>=0;--J)Y[J+M]=this[J];for(J=M-1;J>=0;--J)Y[J]=0;Y.t=this.t+M,Y.s=this.s},be.prototype.drShiftTo=function(M,Y){for(var J=M;J<this.t;++J)Y[J-M]=this[J];Y.t=Math.max(this.t-M,0),Y.s=this.s},be.prototype.lShiftTo=function(M,Y){var J,ge=M%this.DB,Ce=this.DB-ge,We=(1<<Ce)-1,pt=Math.floor(M/this.DB),dt=this.s<<ge&this.DM;for(J=this.t-1;J>=0;--J)Y[J+pt+1]=this[J]>>Ce|dt,dt=(this[J]&We)<<ge;for(J=pt-1;J>=0;--J)Y[J]=0;Y[pt]=dt,Y.t=this.t+pt+1,Y.s=this.s,Y.clamp()},be.prototype.rShiftTo=function(M,Y){Y.s=this.s;var J=Math.floor(M/this.DB);if(J>=this.t)Y.t=0;else{var ge=M%this.DB,Ce=this.DB-ge,We=(1<<ge)-1;Y[0]=this[J]>>ge;for(var pt=J+1;pt<this.t;++pt)Y[pt-J-1]|=(this[pt]&We)<<Ce,Y[pt-J]=this[pt]>>ge;ge>0&&(Y[this.t-J-1]|=(this.s&We)<<Ce),Y.t=this.t-J,Y.clamp()}},be.prototype.subTo=function(M,Y){for(var J=0,ge=0,Ce=Math.min(M.t,this.t);J<Ce;)ge+=this[J]-M[J],Y[J++]=ge&this.DM,ge>>=this.DB;if(M.t<this.t){for(ge-=M.s;J<this.t;)ge+=this[J],Y[J++]=ge&this.DM,ge>>=this.DB;ge+=this.s}else{for(ge+=this.s;J<M.t;)ge-=M[J],Y[J++]=ge&this.DM,ge>>=this.DB;ge-=M.s}Y.s=ge<0?-1:0,ge<-1?Y[J++]=this.DV+ge:ge>0&&(Y[J++]=ge),Y.t=J,Y.clamp()},be.prototype.multiplyTo=function(M,Y){var J=this.abs(),ge=M.abs(),Ce=J.t;for(Y.t=Ce+ge.t;--Ce>=0;)Y[Ce]=0;for(Ce=0;Ce<ge.t;++Ce)Y[Ce+J.t]=J.am(0,ge[Ce],Y,Ce,0,J.t);Y.s=0,Y.clamp(),this.s!=M.s&&be.ZERO.subTo(Y,Y)},be.prototype.squareTo=function(M){for(var Y=this.abs(),J=M.t=2*Y.t;--J>=0;)M[J]=0;for(J=0;J<Y.t-1;++J){var ge=Y.am(J,Y[J],M,2*J,0,1);(M[J+Y.t]+=Y.am(J+1,2*Y[J],M,2*J+1,ge,Y.t-J-1))>=Y.DV&&(M[J+Y.t]-=Y.DV,M[J+Y.t+1]=1)}M.t>0&&(M[M.t-1]+=Y.am(J,Y[J],M,2*J,0,1)),M.s=0,M.clamp()},be.prototype.divRemTo=function(M,Y,J){var ge=M.abs();if(!(ge.t<=0)){var Ce=this.abs();if(Ce.t<ge.t)return null!=Y&&Y.fromInt(0),void(null!=J&&this.copyTo(J));null==J&&(J=m());var We=m(),pt=this.s,dt=M.s,xt=this.DB-me(ge[ge.t-1]);xt>0?(ge.lShiftTo(xt,We),Ce.lShiftTo(xt,J)):(ge.copyTo(We),Ce.copyTo(J));var Mt=We.t,Nt=We[Mt-1];if(0!=Nt){var $t=Nt*(1<<this.F1)+(Mt>1?We[Mt-2]>>this.F2:0),St=this.FV/$t,tt=(1<<this.F1)/$t,At=1<<this.F2,oe=J.t,O=oe-Mt,I=Y??m();for(We.dlShiftTo(O,I),J.compareTo(I)>=0&&(J[J.t++]=1,J.subTo(I,J)),be.ONE.dlShiftTo(Mt,I),I.subTo(We,We);We.t<Mt;)We[We.t++]=0;for(;--O>=0;){var ce=J[--oe]==Nt?this.DM:Math.floor(J[oe]*St+(J[oe-1]+At)*tt);if((J[oe]+=We.am(0,ce,J,O,0,Mt))<ce)for(We.dlShiftTo(O,I),J.subTo(I,J);J[oe]<--ce;)J.subTo(I,J)}null!=Y&&(J.drShiftTo(Mt,Y),pt!=dt&&be.ZERO.subTo(Y,Y)),J.t=Mt,J.clamp(),xt>0&&J.rShiftTo(xt,J),pt<0&&be.ZERO.subTo(J,J)}}},be.prototype.invDigit=function(){if(this.t<1)return 0;var M=this[0];if(0==(1&M))return 0;var Y=3&M;return(Y=(Y=(Y=(Y=Y*(2-(15&M)*Y)&15)*(2-(255&M)*Y)&255)*(2-((65535&M)*Y&65535))&65535)*(2-M*Y%this.DV)%this.DV)>0?this.DV-Y:-Y},be.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},be.prototype.exp=function(M,Y){if(M>4294967295||M<1)return be.ONE;var J=m(),ge=m(),Ce=Y.convert(this),We=me(M)-1;for(Ce.copyTo(J);--We>=0;)if(Y.sqrTo(J,ge),(M&1<<We)>0)Y.mulTo(ge,Ce,J);else{var pt=J;J=ge,ge=pt}return Y.revert(J)},be.prototype.toString=function(M){if(this.s<0)return"-"+this.negate().toString(M);var Y;if(16==M)Y=4;else if(8==M)Y=3;else if(2==M)Y=1;else if(32==M)Y=5;else{if(4!=M)return this.toRadix(M);Y=2}var J,ge=(1<<Y)-1,Ce=!1,We="",pt=this.t,dt=this.DB-pt*this.DB%Y;if(pt-- >0)for(dt<this.DB&&(J=this[pt]>>dt)>0&&(Ce=!0,We=R(J));pt>=0;)dt<Y?(J=(this[pt]&(1<<dt)-1)<<Y-dt,J|=this[--pt]>>(dt+=this.DB-Y)):(J=this[pt]>>(dt-=Y)&ge,dt<=0&&(dt+=this.DB,--pt)),J>0&&(Ce=!0),Ce&&(We+=R(J));return Ce?We:"0"},be.prototype.negate=function(){var M=m();return be.ZERO.subTo(this,M),M},be.prototype.abs=function(){return this.s<0?this.negate():this},be.prototype.compareTo=function(M){var Y=this.s-M.s;if(0!=Y)return Y;var J=this.t;if(0!=(Y=J-M.t))return this.s<0?-Y:Y;for(;--J>=0;)if(0!=(Y=this[J]-M[J]))return Y;return 0},be.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+me(this[this.t-1]^this.s&this.DM)},be.prototype.mod=function(M){var Y=m();return this.abs().divRemTo(M,null,Y),this.s<0&&Y.compareTo(be.ZERO)>0&&M.subTo(Y,Y),Y},be.prototype.modPowInt=function(M,Y){var J;return J=M<256||Y.isEven()?new Ee(Y):new se(Y),this.exp(M,J)},be.ZERO=ne(0),be.ONE=ne(1),He.prototype.convert=Ye,He.prototype.revert=Ye,He.prototype.mulTo=function(M,Y,J){M.multiplyTo(Y,J)},He.prototype.sqrTo=function(M,Y){M.squareTo(Y)},ht.prototype.convert=function(M){if(M.s<0||M.t>2*this.m.t)return M.mod(this.m);if(M.compareTo(this.m)<0)return M;var Y=m();return M.copyTo(Y),this.reduce(Y),Y},ht.prototype.revert=function(M){return M},ht.prototype.reduce=function(M){for(M.drShiftTo(this.m.t-1,this.r2),M.t>this.m.t+1&&(M.t=this.m.t+1,M.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);M.compareTo(this.r2)<0;)M.dAddOffset(1,this.m.t+1);for(M.subTo(this.r2,M);M.compareTo(this.m)>=0;)M.subTo(this.m,M)},ht.prototype.mulTo=function(M,Y,J){M.multiplyTo(Y,J),this.reduce(J)},ht.prototype.sqrTo=function(M,Y){M.squareTo(Y),this.reduce(Y)};var Fe,Je,we,Se=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],he=(1<<26)/Se[Se.length-1];function pe(){this.i=0,this.j=0,this.S=new Array}function De(){!function(M){Je[we++]^=255&M,Je[we++]^=M>>8&255,Je[we++]^=M>>16&255,Je[we++]^=M>>24&255,we>=256&&(we-=256)}((new Date).getTime())}if(be.prototype.chunkSize=function(M){return Math.floor(Math.LN2*this.DB/Math.log(M))},be.prototype.toRadix=function(M){if(null==M&&(M=10),0==this.signum()||M<2||M>36)return"0";var Y=this.chunkSize(M),J=Math.pow(M,Y),ge=ne(J),Ce=m(),We=m(),pt="";for(this.divRemTo(ge,Ce,We);Ce.signum()>0;)pt=(J+We.intValue()).toString(M).substr(1)+pt,Ce.divRemTo(ge,Ce,We);return We.intValue().toString(M)+pt},be.prototype.fromRadix=function(M,Y){this.fromInt(0),null==Y&&(Y=10);for(var J=this.chunkSize(Y),ge=Math.pow(Y,J),Ce=!1,We=0,pt=0,dt=0;dt<M.length;++dt){var xt=E(M,dt);xt<0?"-"==M.charAt(dt)&&0==this.signum()&&(Ce=!0):(pt=Y*pt+xt,++We>=J&&(this.dMultiply(ge),this.dAddOffset(pt,0),We=0,pt=0))}We>0&&(this.dMultiply(Math.pow(Y,We)),this.dAddOffset(pt,0)),Ce&&be.ZERO.subTo(this,this)},be.prototype.fromNumber=function(M,Y,J){if("number"==typeof Y)if(M<2)this.fromInt(1);else for(this.fromNumber(M,J),this.testBit(M-1)||this.bitwiseTo(be.ONE.shiftLeft(M-1),Ge,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(Y);)this.dAddOffset(2,0),this.bitLength()>M&&this.subTo(be.ONE.shiftLeft(M-1),this);else{var ge=new Array,Ce=7&M;ge.length=1+(M>>3),Y.nextBytes(ge),Ce>0?ge[0]&=(1<<Ce)-1:ge[0]=0,this.fromString(ge,256)}},be.prototype.bitwiseTo=function(M,Y,J){var ge,Ce,We=Math.min(M.t,this.t);for(ge=0;ge<We;++ge)J[ge]=Y(this[ge],M[ge]);if(M.t<this.t){for(Ce=M.s&this.DM,ge=We;ge<this.t;++ge)J[ge]=Y(this[ge],Ce);J.t=this.t}else{for(Ce=this.s&this.DM,ge=We;ge<M.t;++ge)J[ge]=Y(Ce,M[ge]);J.t=M.t}J.s=Y(this.s,M.s),J.clamp()},be.prototype.changeBit=function(M,Y){var J=be.ONE.shiftLeft(M);return this.bitwiseTo(J,Y,J),J},be.prototype.addTo=function(M,Y){for(var J=0,ge=0,Ce=Math.min(M.t,this.t);J<Ce;)ge+=this[J]+M[J],Y[J++]=ge&this.DM,ge>>=this.DB;if(M.t<this.t){for(ge+=M.s;J<this.t;)ge+=this[J],Y[J++]=ge&this.DM,ge>>=this.DB;ge+=this.s}else{for(ge+=this.s;J<M.t;)ge+=M[J],Y[J++]=ge&this.DM,ge>>=this.DB;ge+=M.s}Y.s=ge<0?-1:0,ge>0?Y[J++]=ge:ge<-1&&(Y[J++]=this.DV+ge),Y.t=J,Y.clamp()},be.prototype.dMultiply=function(M){this[this.t]=this.am(0,M-1,this,0,0,this.t),++this.t,this.clamp()},be.prototype.dAddOffset=function(M,Y){if(0!=M){for(;this.t<=Y;)this[this.t++]=0;for(this[Y]+=M;this[Y]>=this.DV;)this[Y]-=this.DV,++Y>=this.t&&(this[this.t++]=0),++this[Y]}},be.prototype.multiplyLowerTo=function(M,Y,J){var ge,Ce=Math.min(this.t+M.t,Y);for(J.s=0,J.t=Ce;Ce>0;)J[--Ce]=0;for(ge=J.t-this.t;Ce<ge;++Ce)J[Ce+this.t]=this.am(0,M[Ce],J,Ce,0,this.t);for(ge=Math.min(M.t,Y);Ce<ge;++Ce)this.am(0,M[Ce],J,Ce,0,Y-Ce);J.clamp()},be.prototype.multiplyUpperTo=function(M,Y,J){--Y;var ge=J.t=this.t+M.t-Y;for(J.s=0;--ge>=0;)J[ge]=0;for(ge=Math.max(Y-this.t,0);ge<M.t;++ge)J[this.t+ge-Y]=this.am(Y-ge,M[ge],J,0,0,this.t+ge-Y);J.clamp(),J.drShiftTo(1,J)},be.prototype.modInt=function(M){if(M<=0)return 0;var Y=this.DV%M,J=this.s<0?M-1:0;if(this.t>0)if(0==Y)J=this[0]%M;else for(var ge=this.t-1;ge>=0;--ge)J=(Y*J+this[ge])%M;return J},be.prototype.millerRabin=function(M){var Y=this.subtract(be.ONE),J=Y.getLowestSetBit();if(J<=0)return!1;var ge=Y.shiftRight(J);(M=M+1>>1)>Se.length&&(M=Se.length);for(var Ce=m(),We=0;We<M;++We){Ce.fromInt(Se[Math.floor(Math.random()*Se.length)]);var pt=Ce.modPow(ge,this);if(0!=pt.compareTo(be.ONE)&&0!=pt.compareTo(Y)){for(var dt=1;dt++<J&&0!=pt.compareTo(Y);)if(0==(pt=pt.modPowInt(2,this)).compareTo(be.ONE))return!1;if(0!=pt.compareTo(Y))return!1}}return!0},be.prototype.clone=function(){var M=m();return this.copyTo(M),M},be.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},be.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},be.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},be.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},be.prototype.toByteArray=function(){var M=this.t,Y=new Array;Y[0]=this.s;var J,ge=this.DB-M*this.DB%8,Ce=0;if(M-- >0)for(ge<this.DB&&(J=this[M]>>ge)!=(this.s&this.DM)>>ge&&(Y[Ce++]=J|this.s<<this.DB-ge);M>=0;)ge<8?(J=(this[M]&(1<<ge)-1)<<8-ge,J|=this[--M]>>(ge+=this.DB-8)):(J=this[M]>>(ge-=8)&255,ge<=0&&(ge+=this.DB,--M)),0!=(128&J)&&(J|=-256),0==Ce&&(128&this.s)!=(128&J)&&++Ce,(Ce>0||J!=this.s)&&(Y[Ce++]=J);return Y},be.prototype.equals=function(M){return 0==this.compareTo(M)},be.prototype.min=function(M){return this.compareTo(M)<0?this:M},be.prototype.max=function(M){return this.compareTo(M)>0?this:M},be.prototype.and=function(M){var Y=m();return this.bitwiseTo(M,ze,Y),Y},be.prototype.or=function(M){var Y=m();return this.bitwiseTo(M,Ge,Y),Y},be.prototype.xor=function(M){var Y=m();return this.bitwiseTo(M,xe,Y),Y},be.prototype.andNot=function(M){var Y=m();return this.bitwiseTo(M,qe,Y),Y},be.prototype.not=function(){for(var M=m(),Y=0;Y<this.t;++Y)M[Y]=this.DM&~this[Y];return M.t=this.t,M.s=~this.s,M},be.prototype.shiftLeft=function(M){var Y=m();return M<0?this.rShiftTo(-M,Y):this.lShiftTo(M,Y),Y},be.prototype.shiftRight=function(M){var Y=m();return M<0?this.lShiftTo(-M,Y):this.rShiftTo(M,Y),Y},be.prototype.getLowestSetBit=function(){for(var M=0;M<this.t;++M)if(0!=this[M])return M*this.DB+Xe(this[M]);return this.s<0?this.t*this.DB:-1},be.prototype.bitCount=function(){for(var M=0,Y=this.s&this.DM,J=0;J<this.t;++J)M+=lt(this[J]^Y);return M},be.prototype.testBit=function(M){var Y=Math.floor(M/this.DB);return Y>=this.t?0!=this.s:0!=(this[Y]&1<<M%this.DB)},be.prototype.setBit=function(M){return this.changeBit(M,Ge)},be.prototype.clearBit=function(M){return this.changeBit(M,qe)},be.prototype.flipBit=function(M){return this.changeBit(M,xe)},be.prototype.add=function(M){var Y=m();return this.addTo(M,Y),Y},be.prototype.subtract=function(M){var Y=m();return this.subTo(M,Y),Y},be.prototype.multiply=function(M){var Y=m();return this.multiplyTo(M,Y),Y},be.prototype.divide=function(M){var Y=m();return this.divRemTo(M,Y,null),Y},be.prototype.remainder=function(M){var Y=m();return this.divRemTo(M,null,Y),Y},be.prototype.divideAndRemainder=function(M){var Y=m(),J=m();return this.divRemTo(M,Y,J),new Array(Y,J)},be.prototype.modPow=function(M,Y){var J,ge,Ce=M.bitLength(),We=ne(1);if(Ce<=0)return We;J=Ce<18?1:Ce<48?3:Ce<144?4:Ce<768?5:6,ge=Ce<8?new Ee(Y):Y.isEven()?new ht(Y):new se(Y);var pt=new Array,dt=3,xt=J-1,Mt=(1<<J)-1;if(pt[1]=ge.convert(this),J>1){var Nt=m();for(ge.sqrTo(pt[1],Nt);dt<=Mt;)pt[dt]=m(),ge.mulTo(Nt,pt[dt-2],pt[dt]),dt+=2}var $t,St,tt=M.t-1,At=!0,oe=m();for(Ce=me(M[tt])-1;tt>=0;){for(Ce>=xt?$t=M[tt]>>Ce-xt&Mt:($t=(M[tt]&(1<<Ce+1)-1)<<xt-Ce,tt>0&&($t|=M[tt-1]>>this.DB+Ce-xt)),dt=J;0==(1&$t);)$t>>=1,--dt;if((Ce-=dt)<0&&(Ce+=this.DB,--tt),At)pt[$t].copyTo(We),At=!1;else{for(;dt>1;)ge.sqrTo(We,oe),ge.sqrTo(oe,We),dt-=2;dt>0?ge.sqrTo(We,oe):(St=We,We=oe,oe=St),ge.mulTo(oe,pt[$t],We)}for(;tt>=0&&0==(M[tt]&1<<Ce);)ge.sqrTo(We,oe),St=We,We=oe,oe=St,--Ce<0&&(Ce=this.DB-1,--tt)}return ge.revert(We)},be.prototype.modInverse=function(M){var Y=M.isEven();if(this.isEven()&&Y||0==M.signum())return be.ZERO;for(var J=M.clone(),ge=this.clone(),Ce=ne(1),We=ne(0),pt=ne(0),dt=ne(1);0!=J.signum();){for(;J.isEven();)J.rShiftTo(1,J),Y?(Ce.isEven()&&We.isEven()||(Ce.addTo(this,Ce),We.subTo(M,We)),Ce.rShiftTo(1,Ce)):We.isEven()||We.subTo(M,We),We.rShiftTo(1,We);for(;ge.isEven();)ge.rShiftTo(1,ge),Y?(pt.isEven()&&dt.isEven()||(pt.addTo(this,pt),dt.subTo(M,dt)),pt.rShiftTo(1,pt)):dt.isEven()||dt.subTo(M,dt),dt.rShiftTo(1,dt);J.compareTo(ge)>=0?(J.subTo(ge,J),Y&&Ce.subTo(pt,Ce),We.subTo(dt,We)):(ge.subTo(J,ge),Y&&pt.subTo(Ce,pt),dt.subTo(We,dt))}return 0!=ge.compareTo(be.ONE)?be.ZERO:dt.compareTo(M)>=0?dt.subtract(M):dt.signum()<0?(dt.addTo(M,dt),dt.signum()<0?dt.add(M):dt):dt},be.prototype.pow=function(M){return this.exp(M,new He)},be.prototype.gcd=function(M){var Y=this.s<0?this.negate():this.clone(),J=M.s<0?M.negate():M.clone();if(Y.compareTo(J)<0){var ge=Y;Y=J,J=ge}var Ce=Y.getLowestSetBit(),We=J.getLowestSetBit();if(We<0)return Y;for(Ce<We&&(We=Ce),We>0&&(Y.rShiftTo(We,Y),J.rShiftTo(We,J));Y.signum()>0;)(Ce=Y.getLowestSetBit())>0&&Y.rShiftTo(Ce,Y),(Ce=J.getLowestSetBit())>0&&J.rShiftTo(Ce,J),Y.compareTo(J)>=0?(Y.subTo(J,Y),Y.rShiftTo(1,Y)):(J.subTo(Y,J),J.rShiftTo(1,J));return We>0&&J.lShiftTo(We,J),J},be.prototype.isProbablePrime=function(M){var Y,J=this.abs();if(1==J.t&&J[0]<=Se[Se.length-1]){for(Y=0;Y<Se.length;++Y)if(J[0]==Se[Y])return!0;return!1}if(J.isEven())return!1;for(Y=1;Y<Se.length;){for(var ge=Se[Y],Ce=Y+1;Ce<Se.length&&ge<he;)ge*=Se[Ce++];for(ge=J.modInt(ge);Y<Ce;)if(ge%Se[Y++]==0)return!1}return J.millerRabin(M)},be.prototype.square=function(){var M=m();return this.squareTo(M),M},pe.prototype.init=function(M){var Y,J,ge;for(Y=0;Y<256;++Y)this.S[Y]=Y;for(J=0,Y=0;Y<256;++Y)ge=this.S[Y],this.S[Y]=this.S[J=J+this.S[Y]+M[Y%M.length]&255],this.S[J]=ge;this.i=0,this.j=0},pe.prototype.next=function(){var M;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,M=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=M,this.S[M+this.S[this.i]&255]},null==Je){var ut;if(Je=new Array,we=0,void 0!==$&&(void 0!==$.crypto||void 0!==$.msCrypto)){var le=$.crypto||$.msCrypto;if(le.getRandomValues){var D=new Uint8Array(32);for(le.getRandomValues(D),ut=0;ut<32;++ut)Je[we++]=D[ut]}else if("Netscape"==x.appName&&x.appVersion<"5"){var C=$.crypto.random(32);for(ut=0;ut<C.length;++ut)Je[we++]=255&C.charCodeAt(ut)}}for(;we<256;)ut=Math.floor(65536*Math.random()),Je[we++]=ut>>>8,Je[we++]=255&ut;we=0,De()}function g(){if(null==Fe){for(De(),(Fe=new pe).init(Je),we=0;we<Je.length;++we)Je[we]=0;we=0}return Fe.next()}function B(){}function de(T,M){return new be(T,M)}function ye(T,M,Y){for(var J="",ge=0;J.length<M;)J+=Y(String.fromCharCode.apply(String,T.concat([(4278190080&ge)>>24,(16711680&ge)>>16,(65280&ge)>>8,255&ge]))),ge+=1;return J}function Me(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function Qe(T,M){this.x=M,this.q=T}function st(T,M,Y,J){this.curve=T,this.x=M,this.y=Y,this.z=J??be.ONE,this.zinv=null}function Ut(T,M,Y){this.q=T,this.a=this.fromBigInteger(M),this.b=this.fromBigInteger(Y),this.infinity=new st(this,null,null)}B.prototype.nextBytes=function(M){var Y;for(Y=0;Y<M.length;++Y)M[Y]=g()},Me.prototype.doPublic=function(M){return M.modPowInt(this.e,this.n)},Me.prototype.setPublic=function(M,Y){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof M)this.n=M,this.e=Y;else{if(!(null!=M&&null!=Y&&M.length>0&&Y.length>0))throw"Invalid RSA public key";this.n=de(M,16),this.e=parseInt(Y,16)}},Me.prototype.encrypt=function(M){var Y=function(We,pt){if(pt<We.length+11)throw"Message too long for RSA";for(var dt=new Array,xt=We.length-1;xt>=0&&pt>0;){var Mt=We.charCodeAt(xt--);Mt<128?dt[--pt]=Mt:Mt>127&&Mt<2048?(dt[--pt]=63&Mt|128,dt[--pt]=Mt>>6|192):(dt[--pt]=63&Mt|128,dt[--pt]=Mt>>6&63|128,dt[--pt]=Mt>>12|224)}dt[--pt]=0;for(var Nt=new B,$t=new Array;pt>2;){for($t[0]=0;0==$t[0];)Nt.nextBytes($t);dt[--pt]=$t[0]}return dt[--pt]=2,dt[--pt]=0,new be(dt)}(M,this.n.bitLength()+7>>3);if(null==Y)return null;var J=this.doPublic(Y);if(null==J)return null;var ge=J.toString(16);return 0==(1&ge.length)?ge:"0"+ge},Me.prototype.encryptOAEP=function(M,Y,J){var ge=function(dt,xt,Mt,Nt){var $t=Ue.crypto.MessageDigest,St=Ue.crypto.Util,tt=null;if(Mt||(Mt="sha1"),"string"==typeof Mt&&(tt=$t.getCanonicalAlgName(Mt),Nt=$t.getHashLength(tt),Mt=function(on){return kt(St.hashHex(Pt(on),tt))}),dt.length+2*Nt+2>xt)throw"Message too long for RSA";var At,oe="";for(At=0;At<xt-dt.length-2*Nt-2;At+=1)oe+="\0";var O=Mt("")+oe+"\x01"+dt,I=new Array(Nt);(new B).nextBytes(I);var ce=ye(I,O.length,Mt),Te=[];for(At=0;At<O.length;At+=1)Te[At]=O.charCodeAt(At)^ce.charCodeAt(At);var at=ye(Te,I.length,Mt),Tt=[0];for(At=0;At<I.length;At+=1)Tt[At+1]=I[At]^at.charCodeAt(At);return new be(Tt.concat(Te))}(M,this.n.bitLength()+7>>3,Y,J);if(null==ge)return null;var Ce=this.doPublic(ge);if(null==Ce)return null;var We=Ce.toString(16);return 0==(1&We.length)?We:"0"+We},Me.prototype.type="RSA",Qe.prototype.equals=function(M){return M==this||this.q.equals(M.q)&&this.x.equals(M.x)},Qe.prototype.toBigInteger=function(){return this.x},Qe.prototype.negate=function(){return new Qe(this.q,this.x.negate().mod(this.q))},Qe.prototype.add=function(M){return new Qe(this.q,this.x.add(M.toBigInteger()).mod(this.q))},Qe.prototype.subtract=function(M){return new Qe(this.q,this.x.subtract(M.toBigInteger()).mod(this.q))},Qe.prototype.multiply=function(M){return new Qe(this.q,this.x.multiply(M.toBigInteger()).mod(this.q))},Qe.prototype.square=function(){return new Qe(this.q,this.x.square().mod(this.q))},Qe.prototype.divide=function(M){return new Qe(this.q,this.x.multiply(M.toBigInteger().modInverse(this.q)).mod(this.q))},st.prototype.getX=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},st.prototype.getY=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},st.prototype.equals=function(M){return M==this||(this.isInfinity()?M.isInfinity():M.isInfinity()?this.isInfinity():!!M.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(M.z)).mod(this.curve.q).equals(be.ZERO)&&M.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(M.z)).mod(this.curve.q).equals(be.ZERO))},st.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(be.ZERO)&&!this.y.toBigInteger().equals(be.ZERO)},st.prototype.negate=function(){return new st(this.curve,this.x,this.y.negate(),this.z)},st.prototype.add=function(M){if(this.isInfinity())return M;if(M.isInfinity())return this;var Y=M.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(M.z)).mod(this.curve.q),J=M.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(M.z)).mod(this.curve.q);if(be.ZERO.equals(J))return be.ZERO.equals(Y)?this.twice():this.curve.getInfinity();var ge=new be("3"),Ce=this.x.toBigInteger(),We=this.y.toBigInteger(),pt=(M.x.toBigInteger(),M.y.toBigInteger(),J.square()),dt=pt.multiply(J),xt=Ce.multiply(pt),Mt=Y.square().multiply(this.z),Nt=Mt.subtract(xt.shiftLeft(1)).multiply(M.z).subtract(dt).multiply(J).mod(this.curve.q),$t=xt.multiply(ge).multiply(Y).subtract(We.multiply(dt)).subtract(Mt.multiply(Y)).multiply(M.z).add(Y.multiply(dt)).mod(this.curve.q),St=dt.multiply(this.z).multiply(M.z).mod(this.curve.q);return new st(this.curve,this.curve.fromBigInteger(Nt),this.curve.fromBigInteger($t),St)},st.prototype.twice=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var M=new be("3"),Y=this.x.toBigInteger(),J=this.y.toBigInteger(),ge=J.multiply(this.z),Ce=ge.multiply(J).mod(this.curve.q),We=this.curve.a.toBigInteger(),pt=Y.square().multiply(M);be.ZERO.equals(We)||(pt=pt.add(this.z.square().multiply(We)));var dt=(pt=pt.mod(this.curve.q)).square().subtract(Y.shiftLeft(3).multiply(Ce)).shiftLeft(1).multiply(ge).mod(this.curve.q),xt=pt.multiply(M).multiply(Y).subtract(Ce.shiftLeft(1)).shiftLeft(2).multiply(Ce).subtract(pt.square().multiply(pt)).mod(this.curve.q),Mt=ge.square().multiply(ge).shiftLeft(3).mod(this.curve.q);return new st(this.curve,this.curve.fromBigInteger(dt),this.curve.fromBigInteger(xt),Mt)},st.prototype.multiply=function(M){if(this.isInfinity())return this;if(0==M.signum())return this.curve.getInfinity();var Y,J=M,ge=J.multiply(new be("3")),Ce=this.negate(),We=this,pt=this.curve.q.subtract(M),dt=pt.multiply(new be("3")),xt=new st(this.curve,this.x,this.y),Mt=xt.negate();for(Y=ge.bitLength()-2;Y>0;--Y){We=We.twice();var Nt=ge.testBit(Y);Nt!=J.testBit(Y)&&(We=We.add(Nt?this:Ce))}for(Y=dt.bitLength()-2;Y>0;--Y){xt=xt.twice();var $t=dt.testBit(Y);$t!=pt.testBit(Y)&&(xt=xt.add($t?xt:Mt))}return We},st.prototype.multiplyTwo=function(M,Y,J){var ge;ge=M.bitLength()>J.bitLength()?M.bitLength()-1:J.bitLength()-1;for(var Ce=this.curve.getInfinity(),We=this.add(Y);ge>=0;)Ce=Ce.twice(),M.testBit(ge)?Ce=J.testBit(ge)?Ce.add(We):Ce.add(this):J.testBit(ge)&&(Ce=Ce.add(Y)),--ge;return Ce},Ut.prototype.getQ=function(){return this.q},Ut.prototype.getA=function(){return this.a},Ut.prototype.getB=function(){return this.b},Ut.prototype.equals=function(M){return M==this||this.q.equals(M.q)&&this.a.equals(M.a)&&this.b.equals(M.b)},Ut.prototype.getInfinity=function(){return this.infinity},Ut.prototype.fromBigInteger=function(M){return new Qe(this.q,M)},Ut.prototype.decodePointHex=function(M){switch(parseInt(M.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:default:return null;case 4:case 6:case 7:var Y=(M.length-2)/2,J=M.substr(2,Y),ge=M.substr(Y+2,Y);return new st(this,this.fromBigInteger(new be(J,16)),this.fromBigInteger(new be(ge,16)))}},Qe.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},st.prototype.getEncoded=function(T){var M=function(We,pt){var dt=We.toByteArrayUnsigned();if(pt<dt.length)dt=dt.slice(dt.length-pt);else for(;pt>dt.length;)dt.unshift(0);return dt},Y=this.getX().toBigInteger(),J=this.getY().toBigInteger(),ge=M(Y,32);return T?J.isEven()?ge.unshift(2):ge.unshift(3):(ge.unshift(4),ge=ge.concat(M(J,32))),ge},st.decodeFrom=function(T,M){var Y=M.length-1,J=M.slice(1,1+Y/2),ge=M.slice(1+Y/2,1+Y);J.unshift(0),ge.unshift(0);var Ce=new be(J),We=new be(ge);return new st(T,T.fromBigInteger(Ce),T.fromBigInteger(We))},st.decodeFromHex=function(T,M){M.substr(0,2);var Y=M.length-2,J=M.substr(2,Y/2),ge=M.substr(2+Y/2,Y/2),Ce=new be(J,16),We=new be(ge,16);return new st(T,T.fromBigInteger(Ce),T.fromBigInteger(We))},st.prototype.add2D=function(T){if(this.isInfinity())return T;if(T.isInfinity())return this;if(this.x.equals(T.x))return this.y.equals(T.y)?this.twice():this.curve.getInfinity();var M=T.x.subtract(this.x),Y=T.y.subtract(this.y).divide(M),J=Y.square().subtract(this.x).subtract(T.x),ge=Y.multiply(this.x.subtract(J)).subtract(this.y);return new st(this.curve,J,ge)},st.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var T=this.curve.fromBigInteger(be.valueOf(2)),M=this.curve.fromBigInteger(be.valueOf(3)),Y=this.x.square().multiply(M).add(this.curve.a).divide(this.y.multiply(T)),J=Y.square().subtract(this.x.multiply(T)),ge=Y.multiply(this.x.subtract(J)).subtract(this.y);return new st(this.curve,J,ge)},st.prototype.multiply2D=function(T){if(this.isInfinity())return this;if(0==T.signum())return this.curve.getInfinity();var M,Y=T,J=Y.multiply(new be("3")),ge=this.negate(),Ce=this;for(M=J.bitLength()-2;M>0;--M){Ce=Ce.twice();var We=J.testBit(M);We!=Y.testBit(M)&&(Ce=Ce.add2D(We?this:ge))}return Ce},st.prototype.isOnCurve=function(){var T=this.getX().toBigInteger(),M=this.getY().toBigInteger(),Y=this.curve.getA().toBigInteger(),J=this.curve.getB().toBigInteger(),ge=this.curve.getQ(),Ce=M.multiply(M).mod(ge),We=T.multiply(T).multiply(T).add(Y.multiply(T)).add(J).mod(ge);return Ce.equals(We)},st.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},st.prototype.validate=function(){var T=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var M=this.getX().toBigInteger(),Y=this.getY().toBigInteger();if(M.compareTo(be.ONE)<0||M.compareTo(T.subtract(be.ONE))>0)throw new Error("x coordinate out of bounds");if(Y.compareTo(be.ONE)<0||Y.compareTo(T.subtract(be.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(T).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var qt=function(){var T=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),M=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),Y={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function J(We,pt,dt){return pt?Y[pt]:String.fromCharCode(parseInt(dt,16))}var ge=new String(""),Ce=Object.hasOwnProperty;return function(We,pt){var dt,xt,Mt=We.match(T),Nt=Mt[0],$t=!1;"{"===Nt?dt={}:"["===Nt?dt=[]:(dt=[],$t=!0);for(var St=[dt],tt=1-$t,At=Mt.length;tt<At;++tt){var oe;switch((Nt=Mt[tt]).charCodeAt(0)){default:(oe=St[0])[xt||oe.length]=+Nt,xt=void 0;break;case 34:if(-1!==(Nt=Nt.substring(1,Nt.length-1)).indexOf("\\")&&(Nt=Nt.replace(M,J)),oe=St[0],!xt){if(!(oe instanceof Array)){xt=Nt||ge;break}xt=oe.length}oe[xt]=Nt,xt=void 0;break;case 91:St.unshift((oe=St[0])[xt||oe.length]=[]),xt=void 0;break;case 93:case 125:St.shift();break;case 102:(oe=St[0])[xt||oe.length]=!1,xt=void 0;break;case 110:(oe=St[0])[xt||oe.length]=null,xt=void 0;break;case 116:(oe=St[0])[xt||oe.length]=!0,xt=void 0;break;case 123:St.unshift((oe=St[0])[xt||oe.length]={}),xt=void 0}}if($t){if(1!==St.length)throw new Error;dt=dt[0]}else if(St.length)throw new Error;return pt&&(dt=function O(I,ce){var Te=I[ce];if(Te&&"object"===(void 0===Te?"undefined":y(Te))){var at=null;for(var Tt in Te)if(Ce.call(Te,Tt)&&Te!==I){var tn=O(Te,Tt);void 0!==tn?Te[Tt]=tn:(at||(at=[]),at.push(Tt))}if(at)for(var on=at.length;--on>=0;)delete Te[at[on]]}return pt.call(I,ce,Te)}({"":dt},"")),dt}}();void 0!==Ue&&Ue||(u.KJUR=Ue={}),void 0!==Ue.asn1&&Ue.asn1||(Ue.asn1={}),Ue.asn1.ASN1Util=new function(){this.integerToByteHex=function(T){var M=T.toString(16);return M.length%2==1&&(M="0"+M),M},this.bigIntToMinTwosComplementsHex=function(T){var M=T.toString(16);if("-"!=M.substr(0,1))M.length%2==1?M="0"+M:M.match(/^[0-7]/)||(M="00"+M);else{var Y=M.substr(1).length;Y%2==1?Y+=1:M.match(/^[0-7]/)||(Y+=2);for(var J="",ge=0;ge<Y;ge++)J+="f";M=new be(J,16).xor(T).add(be.ONE).toString(16).replace(/^-/,"")}return M},this.getPEMStringFromHex=function(T,M){return _n(T,M)},this.newObject=function(T){var M=Ue.asn1,Y=M.ASN1Object,J=M.DERBoolean,ge=M.DERInteger,Ce=M.DERBitString,We=M.DEROctetString,pt=M.DERNull,dt=M.DERObjectIdentifier,xt=M.DEREnumerated,Mt=M.DERUTF8String,Nt=M.DERNumericString,$t=M.DERPrintableString,St=M.DERTeletexString,tt=M.DERIA5String,At=M.DERUTCTime,oe=M.DERGeneralizedTime,O=M.DERVisibleString,I=M.DERBMPString,ce=M.DERSequence,Te=M.DERSet,at=M.DERTaggedObject,Tt=M.ASN1Util.newObject;if(T instanceof M.ASN1Object)return T;var tn=Object.keys(T);if(1!=tn.length)throw new Error("key of param shall be only one.");var on=tn[0];if(-1==":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+on+":"))throw new Error("undefined key: "+on);if("bool"==on)return new J(T[on]);if("int"==on)return new ge(T[on]);if("bitstr"==on)return new Ce(T[on]);if("octstr"==on)return new We(T[on]);if("null"==on)return new pt(T[on]);if("oid"==on)return new dt(T[on]);if("enum"==on)return new xt(T[on]);if("utf8str"==on)return new Mt(T[on]);if("numstr"==on)return new Nt(T[on]);if("prnstr"==on)return new $t(T[on]);if("telstr"==on)return new St(T[on]);if("ia5str"==on)return new tt(T[on]);if("utctime"==on)return new At(T[on]);if("gentime"==on)return new oe(T[on]);if("visstr"==on)return new O(T[on]);if("bmpstr"==on)return new I(T[on]);if("asn1"==on)return new Y(T[on]);if("seq"==on){for(var bn=T[on],vn=[],Ht=0;Ht<bn.length;Ht++){var Jn=Tt(bn[Ht]);vn.push(Jn)}return new ce({array:vn})}if("set"==on){for(bn=T[on],vn=[],Ht=0;Ht<bn.length;Ht++)Jn=Tt(bn[Ht]),vn.push(Jn);return new Te({array:vn})}if("tag"==on){var er=T[on];if("[object Array]"===Object.prototype.toString.call(er)&&3==er.length){var rr=Tt(er[2]);return new at({tag:er[0],explicit:er[1],obj:rr})}return new at(er)}},this.jsonToASN1HEX=function(T){return this.newObject(T).getEncodedHex()}},Ue.asn1.ASN1Util.oidHexToInt=function(T){for(var M="",Y=parseInt(T.substr(0,2),16),J=(M=Math.floor(Y/40)+"."+Y%40,""),ge=2;ge<T.length;ge+=2){var Ce=("00000000"+parseInt(T.substr(ge,2),16).toString(2)).slice(-8);J+=Ce.substr(1,7),"0"==Ce.substr(0,1)&&(M=M+"."+new be(J,2).toString(10),J="")}return M},Ue.asn1.ASN1Util.oidIntToHex=function(T){var M=function(dt){var xt=dt.toString(16);return 1==xt.length&&(xt="0"+xt),xt},Y=function(dt){var xt="",Mt=new be(dt,10).toString(2),Nt=7-Mt.length%7;7==Nt&&(Nt=0);for(var $t="",St=0;St<Nt;St++)$t+="0";for(Mt=$t+Mt,St=0;St<Mt.length-1;St+=7){var tt=Mt.substr(St,7);St!=Mt.length-7&&(tt="1"+tt),xt+=M(parseInt(tt,2))}return xt};if(!T.match(/^[0-9.]+$/))throw"malformed oid string: "+T;var J="",ge=T.split("."),Ce=40*parseInt(ge[0])+parseInt(ge[1]);J+=M(Ce),ge.splice(0,2);for(var We=0;We<ge.length;We++)J+=Y(ge[We]);return J},Ue.asn1.ASN1Object=function(T){this.params=null,this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+"".length+",v="+this.hV);var M=this.hV.length/2,Y=M.toString(16);if(Y.length%2==1&&(Y="0"+Y),M<128)return Y;var J=Y.length/2;if(J>15)throw"ASN.1 length too long to represent by 8x: n = "+M.toString(16);return(128+J).toString(16)+Y},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(M){this.params=M},null!=T&&null!=T.tlv&&(this.hTLV=T.tlv,this.isModified=!1)},Ue.asn1.DERAbstractString=function(T){Ue.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(M){this.hTLV=null,this.isModified=!0,this.s=M,this.hV=Vt(this.s).toLowerCase()},this.setStringHex=function(M){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=M},this.getFreshValueHex=function(){return this.hV},void 0!==T&&("string"==typeof T?this.setString(T):void 0!==T.str?this.setString(T.str):void 0!==T.hex&&this.setStringHex(T.hex))},c.lang.extend(Ue.asn1.DERAbstractString,Ue.asn1.ASN1Object),Ue.asn1.DERAbstractTime=function(T){Ue.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(M){var Y=M.getTime()+6e4*M.getTimezoneOffset();return new Date(Y)},this.formatDate=function(M,Y,J){var ge=this.zeroPadding,Ce=this.localDateToUTC(M),We=String(Ce.getFullYear());"utc"==Y&&(We=We.substr(2,2));var pt=We+ge(String(Ce.getMonth()+1),2)+ge(String(Ce.getDate()),2)+ge(String(Ce.getHours()),2)+ge(String(Ce.getMinutes()),2)+ge(String(Ce.getSeconds()),2);if(!0===J){var dt=Ce.getMilliseconds();if(0!=dt){var xt=ge(String(dt),3);pt=pt+"."+(xt=xt.replace(/[0]+$/,""))}}return pt+"Z"},this.zeroPadding=function(M,Y){return M.length>=Y?M:new Array(Y-M.length+1).join("0")+M},this.getString=function(){return this.s},this.setString=function(M){this.hTLV=null,this.isModified=!0,this.s=M,this.hV=Be(M)},this.setByDateValue=function(M,Y,J,ge,Ce,We){var pt=new Date(Date.UTC(M,Y-1,J,ge,Ce,We,0));this.setByDate(pt)},this.getFreshValueHex=function(){return this.hV}},c.lang.extend(Ue.asn1.DERAbstractTime,Ue.asn1.ASN1Object),Ue.asn1.DERAbstractStructured=function(T){Ue.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(M){this.hTLV=null,this.isModified=!0,this.asn1Array=M},this.appendASN1Object=function(M){this.hTLV=null,this.isModified=!0,this.asn1Array.push(M)},this.asn1Array=new Array,void 0!==T&&void 0!==T.array&&(this.asn1Array=T.array)},c.lang.extend(Ue.asn1.DERAbstractStructured,Ue.asn1.ASN1Object),Ue.asn1.DERBoolean=function(T){Ue.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=0==T?"010100":"0101ff"},c.lang.extend(Ue.asn1.DERBoolean,Ue.asn1.ASN1Object),Ue.asn1.DERInteger=function(T){Ue.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(M){this.hTLV=null,this.isModified=!0,this.hV=Ue.asn1.ASN1Util.bigIntToMinTwosComplementsHex(M)},this.setByInteger=function(M){var Y=new be(String(M),10);this.setByBigInteger(Y)},this.setValueHex=function(M){this.hV=M},this.getFreshValueHex=function(){return this.hV},void 0!==T&&(void 0!==T.bigint?this.setByBigInteger(T.bigint):void 0!==T.int?this.setByInteger(T.int):"number"==typeof T?this.setByInteger(T):void 0!==T.hex&&this.setValueHex(T.hex))},c.lang.extend(Ue.asn1.DERInteger,Ue.asn1.ASN1Object),Ue.asn1.DERBitString=function(T){if(void 0!==T&&void 0!==T.obj){var M=Ue.asn1.ASN1Util.newObject(T.obj);T.hex="00"+M.getEncodedHex()}Ue.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(Y){this.hTLV=null,this.isModified=!0,this.hV=Y},this.setUnusedBitsAndHexValue=function(Y,J){if(Y<0||7<Y)throw"unused bits shall be from 0 to 7: u = "+Y;var ge="0"+Y;this.hTLV=null,this.isModified=!0,this.hV=ge+J},this.setByBinaryString=function(Y){var J=8-(Y=Y.replace(/0+$/,"")).length%8;8==J&&(J=0);for(var ge=0;ge<=J;ge++)Y+="0";var Ce="";for(ge=0;ge<Y.length-1;ge+=8){var We=Y.substr(ge,8),pt=parseInt(We,2).toString(16);1==pt.length&&(pt="0"+pt),Ce+=pt}this.hTLV=null,this.isModified=!0,this.hV="0"+J+Ce},this.setByBooleanArray=function(Y){for(var J="",ge=0;ge<Y.length;ge++)J+=1==Y[ge]?"1":"0";this.setByBinaryString(J)},this.newFalseArray=function(Y){for(var J=new Array(Y),ge=0;ge<Y;ge++)J[ge]=!1;return J},this.getFreshValueHex=function(){return this.hV},void 0!==T&&("string"==typeof T&&T.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(T):void 0!==T.hex?this.setHexValueIncludingUnusedBits(T.hex):void 0!==T.bin?this.setByBinaryString(T.bin):void 0!==T.array&&this.setByBooleanArray(T.array))},c.lang.extend(Ue.asn1.DERBitString,Ue.asn1.ASN1Object),Ue.asn1.DEROctetString=function(T){if(void 0!==T&&void 0!==T.obj){var M=Ue.asn1.ASN1Util.newObject(T.obj);T.hex=M.getEncodedHex()}Ue.asn1.DEROctetString.superclass.constructor.call(this,T),this.hT="04"},c.lang.extend(Ue.asn1.DEROctetString,Ue.asn1.DERAbstractString),Ue.asn1.DERNull=function(){Ue.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},c.lang.extend(Ue.asn1.DERNull,Ue.asn1.ASN1Object),Ue.asn1.DERObjectIdentifier=function(T){Ue.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(M){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=M},this.setValueOidString=function(M){var Y=function(ge){var Ce=function($t){var St=$t.toString(16);return 1==St.length&&(St="0"+St),St},We=function($t){var St="",tt=parseInt($t,10).toString(2),At=7-tt.length%7;7==At&&(At=0);for(var oe="",O=0;O<At;O++)oe+="0";for(tt=oe+tt,O=0;O<tt.length-1;O+=7){var I=tt.substr(O,7);O!=tt.length-7&&(I="1"+I),St+=Ce(parseInt(I,2))}return St};try{if(!ge.match(/^[0-9.]+$/))return null;var pt="",dt=ge.split("."),xt=40*parseInt(dt[0],10)+parseInt(dt[1],10);pt+=Ce(xt),dt.splice(0,2);for(var Mt=0;Mt<dt.length;Mt++)pt+=We(dt[Mt]);return pt}catch{return null}}(M);if(null==Y)throw new Error("malformed oid string: "+M);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=Y},this.setValueName=function(M){var Y=Ue.asn1.x509.OID.name2oid(M);if(""===Y)throw new Error("DERObjectIdentifier oidName undefined: "+M);this.setValueOidString(Y)},this.setValueNameOrOid=function(M){M.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(M):this.setValueName(M)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(M){"string"==typeof M?this.setValueNameOrOid(M):void 0!==M.oid?this.setValueNameOrOid(M.oid):void 0!==M.name?this.setValueNameOrOid(M.name):void 0!==M.hex&&this.setValueHex(M.hex)},void 0!==T&&this.setByParam(T)},c.lang.extend(Ue.asn1.DERObjectIdentifier,Ue.asn1.ASN1Object),Ue.asn1.DEREnumerated=function(T){Ue.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(M){this.hTLV=null,this.isModified=!0,this.hV=Ue.asn1.ASN1Util.bigIntToMinTwosComplementsHex(M)},this.setByInteger=function(M){var Y=new be(String(M),10);this.setByBigInteger(Y)},this.setValueHex=function(M){this.hV=M},this.getFreshValueHex=function(){return this.hV},void 0!==T&&(void 0!==T.int?this.setByInteger(T.int):"number"==typeof T?this.setByInteger(T):void 0!==T.hex&&this.setValueHex(T.hex))},c.lang.extend(Ue.asn1.DEREnumerated,Ue.asn1.ASN1Object),Ue.asn1.DERUTF8String=function(T){Ue.asn1.DERUTF8String.superclass.constructor.call(this,T),this.hT="0c"},c.lang.extend(Ue.asn1.DERUTF8String,Ue.asn1.DERAbstractString),Ue.asn1.DERNumericString=function(T){Ue.asn1.DERNumericString.superclass.constructor.call(this,T),this.hT="12"},c.lang.extend(Ue.asn1.DERNumericString,Ue.asn1.DERAbstractString),Ue.asn1.DERPrintableString=function(T){Ue.asn1.DERPrintableString.superclass.constructor.call(this,T),this.hT="13"},c.lang.extend(Ue.asn1.DERPrintableString,Ue.asn1.DERAbstractString),Ue.asn1.DERTeletexString=function(T){Ue.asn1.DERTeletexString.superclass.constructor.call(this,T),this.hT="14"},c.lang.extend(Ue.asn1.DERTeletexString,Ue.asn1.DERAbstractString),Ue.asn1.DERIA5String=function(T){Ue.asn1.DERIA5String.superclass.constructor.call(this,T),this.hT="16"},c.lang.extend(Ue.asn1.DERIA5String,Ue.asn1.DERAbstractString),Ue.asn1.DERVisibleString=function(T){Ue.asn1.DERIA5String.superclass.constructor.call(this,T),this.hT="1a"},c.lang.extend(Ue.asn1.DERVisibleString,Ue.asn1.DERAbstractString),Ue.asn1.DERBMPString=function(T){Ue.asn1.DERBMPString.superclass.constructor.call(this,T),this.hT="1e"},c.lang.extend(Ue.asn1.DERBMPString,Ue.asn1.DERAbstractString),Ue.asn1.DERUTCTime=function(T){Ue.asn1.DERUTCTime.superclass.constructor.call(this,T),this.hT="17",this.setByDate=function(M){this.hTLV=null,this.isModified=!0,this.date=M,this.s=this.formatDate(this.date,"utc"),this.hV=Be(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=Be(this.s)),this.hV},void 0!==T&&(void 0!==T.str?this.setString(T.str):"string"==typeof T&&T.match(/^[0-9]{12}Z$/)?this.setString(T):void 0!==T.hex?this.setStringHex(T.hex):void 0!==T.date&&this.setByDate(T.date))},c.lang.extend(Ue.asn1.DERUTCTime,Ue.asn1.DERAbstractTime),Ue.asn1.DERGeneralizedTime=function(T){Ue.asn1.DERGeneralizedTime.superclass.constructor.call(this,T),this.hT="18",this.withMillis=!1,this.setByDate=function(M){this.hTLV=null,this.isModified=!0,this.date=M,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=Be(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=Be(this.s)),this.hV},void 0!==T&&(void 0!==T.str?this.setString(T.str):"string"==typeof T&&T.match(/^[0-9]{14}Z$/)?this.setString(T):void 0!==T.hex?this.setStringHex(T.hex):void 0!==T.date&&this.setByDate(T.date),!0===T.millis&&(this.withMillis=!0))},c.lang.extend(Ue.asn1.DERGeneralizedTime,Ue.asn1.DERAbstractTime),Ue.asn1.DERSequence=function(T){Ue.asn1.DERSequence.superclass.constructor.call(this,T),this.hT="30",this.getFreshValueHex=function(){for(var M="",Y=0;Y<this.asn1Array.length;Y++)M+=this.asn1Array[Y].getEncodedHex();return this.hV=M,this.hV}},c.lang.extend(Ue.asn1.DERSequence,Ue.asn1.DERAbstractStructured),Ue.asn1.DERSet=function(T){Ue.asn1.DERSet.superclass.constructor.call(this,T),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var M=new Array,Y=0;Y<this.asn1Array.length;Y++)M.push(this.asn1Array[Y].getEncodedHex());return 1==this.sortFlag&&M.sort(),this.hV=M.join(""),this.hV},void 0!==T&&void 0!==T.sortflag&&0==T.sortflag&&(this.sortFlag=!1)},c.lang.extend(Ue.asn1.DERSet,Ue.asn1.DERAbstractStructured),Ue.asn1.DERTaggedObject=function(T){Ue.asn1.DERTaggedObject.superclass.constructor.call(this);var M=Ue.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(Y,J,ge){this.hT=J,this.isExplicit=Y,this.asn1Object=ge,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=ge.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,J),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(Y){null!=Y.tag&&(this.hT=Y.tag),null!=Y.explicit&&(this.isExplicit=Y.explicit),null!=Y.tage&&(this.hT=Y.tage,this.isExplicit=!0),null!=Y.tagi&&(this.hT=Y.tagi,this.isExplicit=!1),null!=Y.obj&&(Y.obj instanceof M.ASN1Object?(this.asn1Object=Y.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):"object"==y(Y.obj)&&(this.asn1Object=M.ASN1Util.newObject(Y.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},null!=T&&this.setByParam(T)},c.lang.extend(Ue.asn1.DERTaggedObject,Ue.asn1.ASN1Object);var Ue,Lt,zt,$e=new function(){};function Ot(T){for(var M=new Array,Y=0;Y<T.length;Y++)M[Y]=T.charCodeAt(Y);return M}function Ke(T){for(var M="",Y=0;Y<T.length;Y++)M+=String.fromCharCode(T[Y]);return M}function rt(T){for(var M="",Y=0;Y<T.length;Y++){var J=T[Y].toString(16);1==J.length&&(J="0"+J),M+=J}return M}function Be(T){return rt(Ot(T))}function et(T){return(T=(T=T.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function wt(T){return T.length%4==2?T+="==":T.length%4==3&&(T+="="),(T=T.replace(/-/g,"+")).replace(/_/g,"/")}function Ft(T){return T.length%2==1&&(T="0"+T),et(ve(T))}function dn(T){return Oe(wt(T))}function Vt(T){return dr(hr(T))}function ct(T){return decodeURIComponent(ur(T))}function kt(T){for(var M="",Y=0;Y<T.length-1;Y+=2)M+=String.fromCharCode(parseInt(T.substr(Y,2),16));return M}function Pt(T){for(var M="",Y=0;Y<T.length;Y++)M+=("0"+T.charCodeAt(Y).toString(16)).slice(-2);return M}function Yt(T){return ve(T)}function Bt(T){return Yt(T).replace(/(.{64})/g,"$1\r\n").replace(/\r\n$/,"")}function pn(T){return Oe(T.replace(/[^0-9A-Za-z\/+=]*/g,""))}function _n(T,M){return"-----BEGIN "+M+"-----\r\n"+Bt(T)+"\r\n-----END "+M+"-----\r\n"}function Cn(T,M){if(-1==T.indexOf("-----BEGIN "))throw"can't find PEM header: "+M;return pn(T=void 0!==M?(T=T.replace(new RegExp("^[^]*-----BEGIN "+M+"-----"),"")).replace(new RegExp("-----END "+M+"-----[^]*$"),""):(T=T.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function xn(T){var M,Y,J,ge,Ce,We,pt,dt,xt,Mt,Nt;if(Nt=T.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return dt=Nt[1],M=parseInt(dt),2===dt.length&&(50<=M&&M<100?M=1900+M:0<=M&&M<50&&(M=2e3+M)),Y=parseInt(Nt[2])-1,J=parseInt(Nt[3]),ge=parseInt(Nt[4]),Ce=parseInt(Nt[5]),We=parseInt(Nt[6]),pt=0,""!==(xt=Nt[7])&&(Mt=(xt.substr(1)+"00").substr(0,3),pt=parseInt(Mt)),Date.UTC(M,Y,J,ge,Ce,We,pt);throw"unsupported zulu format: "+T}function Qn(T){return~~(xn(T)/1e3)}function dr(T){return T.replace(/%/g,"")}function ur(T){return T.replace(/(..)/g,"%$1")}function Xn(T){var M="malformed IPv6 address";if(!T.match(/^[0-9A-Fa-f:]+$/))throw M;var Y=(T=T.toLowerCase()).split(":").length-1;if(Y<2)throw M;var J=":".repeat(7-Y+2),ge=(T=T.replace("::",J)).split(":");if(8!=ge.length)throw M;for(var Ce=0;Ce<8;Ce++)ge[Ce]=("0000"+ge[Ce]).slice(-4);return ge.join("")}function ir(T){if(!T.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var M=(T=T.toLowerCase()).match(/.{1,4}/g),Y=0;Y<8;Y++)M[Y]=M[Y].replace(/^0+/,""),""==M[Y]&&(M[Y]="0");var J=(T=":"+M.join(":")+":").match(/:(0:){2,}/g);if(null===J)return T.slice(1,-1);var ge="";for(Y=0;Y<J.length;Y++)J[Y].length>ge.length&&(ge=J[Y]);return(T=T.replace(ge,"::")).slice(1,-1)}function mr(T){var M="malformed hex value";if(!T.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw M;if(8!=T.length)return 32==T.length?ir(T):T;try{return parseInt(T.substr(0,2),16)+"."+parseInt(T.substr(2,2),16)+"."+parseInt(T.substr(4,2),16)+"."+parseInt(T.substr(6,2),16)}catch{throw M}}function hr(T){for(var M=encodeURIComponent(T),Y="",J=0;J<M.length;J++)"%"==M[J]?(Y+=M.substr(J,3),J+=2):Y=Y+"%"+Be(M[J]);return Y}function Or(T){return!(T.length%2!=0||!T.match(/^[0-9a-f]+$/)&&!T.match(/^[0-9A-F]+$/))}function fr(T){return T.length%2==1?"0"+T:T.substr(0,1)>"7"?"00"+T:T}$e.getLblen=function(T,M){if("8"!=T.substr(M+2,1))return 1;var Y=parseInt(T.substr(M+3,1));return 0==Y?-1:0<Y&&Y<10?Y+1:-2},$e.getL=function(T,M){var Y=$e.getLblen(T,M);return Y<1?"":T.substr(M+2,2*Y)},$e.getVblen=function(T,M){var Y;return""==(Y=$e.getL(T,M))?-1:("8"===Y.substr(0,1)?new be(Y.substr(2),16):new be(Y,16)).intValue()},$e.getVidx=function(T,M){var Y=$e.getLblen(T,M);return Y<0?Y:M+2*(Y+1)},$e.getV=function(T,M){var Y=$e.getVidx(T,M),J=$e.getVblen(T,M);return T.substr(Y,2*J)},$e.getTLV=function(T,M){return T.substr(M,2)+$e.getL(T,M)+$e.getV(T,M)},$e.getTLVblen=function(T,M){return 2+2*$e.getLblen(T,M)+2*$e.getVblen(T,M)},$e.getNextSiblingIdx=function(T,M){return $e.getVidx(T,M)+2*$e.getVblen(T,M)},$e.getChildIdx=function(T,M){var Y,J,ge,Ce=$e,We=[];Y=Ce.getVidx(T,M),J=2*Ce.getVblen(T,M),"03"==T.substr(M,2)&&(Y+=2,J-=2),ge=0;for(var pt=Y;ge<=J;){var dt=Ce.getTLVblen(T,pt);if((ge+=dt)<=J&&We.push(pt),pt+=dt,ge>=J)break}return We},$e.getNthChildIdx=function(T,M,Y){return $e.getChildIdx(T,M)[Y]},$e.getIdxbyList=function(T,M,Y,J){var ge,Ce,We=$e;return 0==Y.length?void 0!==J&&T.substr(M,2)!==J?-1:M:(ge=Y.shift())>=(Ce=We.getChildIdx(T,M)).length?-1:We.getIdxbyList(T,Ce[ge],Y,J)},$e.getIdxbyListEx=function(T,M,Y,J){var ge,Ce,We=$e;if(0==Y.length)return void 0!==J&&T.substr(M,2)!==J?-1:M;ge=Y.shift(),Ce=We.getChildIdx(T,M);for(var pt=0,dt=0;dt<Ce.length;dt++){var xt=T.substr(Ce[dt],2);if("number"==typeof ge&&!We.isContextTag(xt)&&pt==ge||"string"==typeof ge&&We.isContextTag(xt,ge))return We.getIdxbyListEx(T,Ce[dt],Y,J);We.isContextTag(xt)||pt++}return-1},$e.getTLVbyList=function(T,M,Y,J){var ge=$e,Ce=ge.getIdxbyList(T,M,Y,J);return-1==Ce||Ce>=T.length?null:ge.getTLV(T,Ce)},$e.getTLVbyListEx=function(T,M,Y,J){var ge=$e,Ce=ge.getIdxbyListEx(T,M,Y,J);return-1==Ce?null:ge.getTLV(T,Ce)},$e.getVbyList=function(T,M,Y,J,ge){var Ce,We,pt=$e;return-1==(Ce=pt.getIdxbyList(T,M,Y,J))||Ce>=T.length?null:(We=pt.getV(T,Ce),!0===ge&&(We=We.substr(2)),We)},$e.getVbyListEx=function(T,M,Y,J,ge){var Ce,We,pt=$e;return-1==(Ce=pt.getIdxbyListEx(T,M,Y,J))?null:(We=pt.getV(T,Ce),"03"==T.substr(Ce,2)&&!1!==ge&&(We=We.substr(2)),We)},$e.getInt=function(T,M,Y){null==Y&&(Y=-1);try{var J=T.substr(M,2);if("02"!=J&&"03"!=J)return Y;var ge=$e.getV(T,M);return"02"==J?parseInt(ge,16):function(We){try{var pt=We.substr(0,2);if("00"==pt)return parseInt(We.substr(2),16);var dt=parseInt(pt,16),xt=We.substr(2),Mt=parseInt(xt,16).toString(2);return"0"==Mt&&(Mt="00000000"),Mt=Mt.slice(0,0-dt),parseInt(Mt,2)}catch{return-1}}(ge)}catch{return Y}},$e.getOID=function(T,M,Y){null==Y&&(Y=null);try{return"06"!=T.substr(M,2)?Y:function(ge){if(!Or(ge))return null;try{var Ce=[],We=ge.substr(0,2),pt=parseInt(We,16);Ce[0]=new String(Math.floor(pt/40)),Ce[1]=new String(pt%40);for(var dt=ge.substr(2),xt=[],Mt=0;Mt<dt.length/2;Mt++)xt.push(parseInt(dt.substr(2*Mt,2),16));var Nt=[],$t="";for(Mt=0;Mt<xt.length;Mt++)128&xt[Mt]?$t+=Hr((127&xt[Mt]).toString(2),7):($t+=Hr((127&xt[Mt]).toString(2),7),Nt.push(new String(parseInt($t,2))),$t="");var St=Ce.join(".");return Nt.length>0&&(St=St+"."+Nt.join(".")),St}catch{return null}}($e.getV(T,M))}catch{return Y}},$e.getOIDName=function(T,M,Y){null==Y&&(Y=null);try{var J=$e.getOID(T,M,Y);if(J==Y)return Y;var ge=Ue.asn1.x509.OID.oid2name(J);return""==ge?J:ge}catch{return Y}},$e.getString=function(T,M,Y){null==Y&&(Y=null);try{return kt($e.getV(T,M))}catch{return Y}},$e.hextooidstr=function(T){var M=function($t,St){return $t.length>=St?$t:new Array(St-$t.length+1).join("0")+$t},Y=[],J=T.substr(0,2),ge=parseInt(J,16);Y[0]=new String(Math.floor(ge/40)),Y[1]=new String(ge%40);for(var Ce=T.substr(2),We=[],pt=0;pt<Ce.length/2;pt++)We.push(parseInt(Ce.substr(2*pt,2),16));var dt=[],xt="";for(pt=0;pt<We.length;pt++)128&We[pt]?xt+=M((127&We[pt]).toString(2),7):(xt+=M((127&We[pt]).toString(2),7),dt.push(new String(parseInt(xt,2))),xt="");var Mt=Y.join(".");return dt.length>0&&(Mt=Mt+"."+dt.join(".")),Mt},$e.dump=function(T,M,Y,J){var ge=$e,Ce=ge.getV,We=ge.dump,pt=ge.getChildIdx,dt=T;T instanceof Ue.asn1.ASN1Object&&(dt=T.getEncodedHex());var xt=function(on,bn){return on.length<=2*bn?on:on.substr(0,bn)+"..(total "+on.length/2+"bytes).."+on.substr(on.length-bn,bn)};void 0===M&&(M={ommit_long_octet:32}),void 0===Y&&(Y=0),void 0===J&&(J="");var Mt,Nt=M.ommit_long_octet;if("01"==(Mt=dt.substr(Y,2)))return"00"==($t=Ce(dt,Y))?J+"BOOLEAN FALSE\n":J+"BOOLEAN TRUE\n";if("02"==Mt)return J+"INTEGER "+xt($t=Ce(dt,Y),Nt)+"\n";if("03"==Mt){var $t=Ce(dt,Y);return ge.isASN1HEX($t.substr(2))?(St=J+"BITSTRING, encapsulates\n")+We($t.substr(2),M,0,J+"  "):J+"BITSTRING "+xt($t,Nt)+"\n"}if("04"==Mt)return $t=Ce(dt,Y),ge.isASN1HEX($t)?(St=J+"OCTETSTRING, encapsulates\n",St+=We($t,M,0,J+"  ")):J+"OCTETSTRING "+xt($t,Nt)+"\n";if("05"==Mt)return J+"NULL\n";if("06"==Mt){var tt=Ce(dt,Y),At=Ue.asn1.ASN1Util.oidHexToInt(tt),oe=Ue.asn1.x509.OID.oid2name(At),O=At.replace(/\./g," ");return""!=oe?J+"ObjectIdentifier "+oe+" ("+O+")\n":J+"ObjectIdentifier ("+O+")\n"}if("0a"==Mt)return J+"ENUMERATED "+parseInt(Ce(dt,Y))+"\n";if("0c"==Mt)return J+"UTF8String '"+ct(Ce(dt,Y))+"'\n";if("13"==Mt)return J+"PrintableString '"+ct(Ce(dt,Y))+"'\n";if("14"==Mt)return J+"TeletexString '"+ct(Ce(dt,Y))+"'\n";if("16"==Mt)return J+"IA5String '"+ct(Ce(dt,Y))+"'\n";if("17"==Mt)return J+"UTCTime "+ct(Ce(dt,Y))+"\n";if("18"==Mt)return J+"GeneralizedTime "+ct(Ce(dt,Y))+"\n";if("1a"==Mt)return J+"VisualString '"+ct(Ce(dt,Y))+"'\n";if("1e"==Mt)return J+"BMPString '"+ct(Ce(dt,Y))+"'\n";if("30"==Mt){if("3000"==dt.substr(Y,4))return J+"SEQUENCE {}\n";St=J+"SEQUENCE\n";var I=M;if((2==(at=pt(dt,Y)).length||3==at.length)&&"06"==dt.substr(at[0],2)&&"04"==dt.substr(at[at.length-1],2)){oe=ge.oidname(Ce(dt,at[0]));var ce=JSON.parse(JSON.stringify(M));ce.x509ExtName=oe,I=ce}for(var Te=0;Te<at.length;Te++)St+=We(dt,I,at[Te],J+"  ");return St}if("31"==Mt){St=J+"SET\n";var at=pt(dt,Y);for(Te=0;Te<at.length;Te++)St+=We(dt,M,at[Te],J+"  ");return St}if(0!=(128&(Mt=parseInt(Mt,16)))){var St,Tt=31&Mt;if(0!=(32&Mt)){for(St=J+"["+Tt+"]\n",at=pt(dt,Y),Te=0;Te<at.length;Te++)St+=We(dt,M,at[Te],J+"  ");return St}return $t=Ce(dt,Y),$e.isASN1HEX($t)?(St=J+"["+Tt+"]\n")+We($t,M,0,J+"  "):(("68747470"==$t.substr(0,8)||"subjectAltName"===M.x509ExtName&&2==Tt)&&($t=ct($t)),J+"["+Tt+"] "+$t+"\n")}return J+"UNKNOWN("+Mt+") "+Ce(dt,Y)+"\n"},$e.isContextTag=function(T,M){var Y,J;T=T.toLowerCase();try{Y=parseInt(T,16)}catch{return-1}if(void 0===M)return 128==(192&Y);try{return null!=M.match(/^\[[0-9]+\]$/)&&!((J=parseInt(M.substr(1,M.length-1),10))>31)&&128==(192&Y)&&(31&Y)==J}catch{return!1}},$e.isASN1HEX=function(T){var M=$e;if(T.length%2==1)return!1;var Y=M.getVblen(T,0),J=T.substr(0,2),ge=M.getL(T,0);return T.length-J.length-ge.length==2*Y},$e.checkStrictDER=function(T,M,Y,J,ge){var Ce=$e;if(void 0===Y){if("string"!=typeof T)throw new Error("not hex string");if(T=T.toLowerCase(),!Ue.lang.String.isHex(T))throw new Error("not hex string");Y=T.length,ge=(J=T.length/2)<128?1:Math.ceil(J.toString(16))+1}if(Ce.getL(T,M).length>2*ge)throw new Error("L of TLV too long: idx="+M);var We=Ce.getVblen(T,M);if(We>J)throw new Error("value of L too long than hex: idx="+M);var pt=Ce.getTLV(T,M),dt=pt.length-2-Ce.getL(T,M).length;if(dt!==2*We)throw new Error("V string length and L's value not the same:"+dt+"/"+2*We);if(0===M&&T.length!=pt.length)throw new Error("total length and TLV length unmatch:"+T.length+"!="+pt.length);var xt=T.substr(M,2);if("02"===xt){var Mt=Ce.getVidx(T,M);if("00"==T.substr(Mt,2)&&T.charCodeAt(Mt+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(xt,16)){for(var Nt=Ce.getVblen(T,M),$t=0,St=Ce.getChildIdx(T,M),tt=0;tt<St.length;tt++)$t+=Ce.getTLV(T,St[tt]).length,Ce.checkStrictDER(T,St[tt],Y,J,ge);if(2*Nt!=$t)throw new Error("sum of children's TLV length and L unmatch: "+2*Nt+"!="+$t)}},$e.oidname=function(T){var M=Ue.asn1;Ue.lang.String.isHex(T)&&(T=M.ASN1Util.oidHexToInt(T));var Y=M.x509.OID.oid2name(T);return""===Y&&(Y=T),Y},void 0!==Ue&&Ue||(u.KJUR=Ue={}),void 0!==Ue.lang&&Ue.lang||(Ue.lang={}),Ue.lang.String=function(){},"function"==typeof n?(u.utf8tob64u=Lt=function(M){return et(n.from(M,"utf8").toString("base64"))},u.b64utoutf8=zt=function(M){return n.from(wt(M),"base64").toString("utf8")}):(u.utf8tob64u=Lt=function(M){return Ft(dr(hr(M)))},u.b64utoutf8=zt=function(M){return decodeURIComponent(ur(dn(M)))}),Ue.lang.String.isInteger=function(T){return!!T.match(/^[0-9]+$/)||!!T.match(/^-[0-9]+$/)},Ue.lang.String.isHex=function(T){return Or(T)},Ue.lang.String.isBase64=function(T){return!(!(T=T.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||T.length%4!=0)},Ue.lang.String.isBase64URL=function(T){return!T.match(/[+/=]/)&&(T=wt(T),Ue.lang.String.isBase64(T))},Ue.lang.String.isIntegerArray=function(T){return!!(T=T.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},Ue.lang.String.isPrintable=function(T){return null!==T.match(/^[0-9A-Za-z '()+,-./:=?]*$/)},Ue.lang.String.isIA5=function(T){return null!==T.match(/^[\x20-\x21\x23-\x7f]*$/)},Ue.lang.String.isMail=function(T){return null!==T.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)};var Hr=function(M,Y,J){return null==J&&(J="0"),M.length>=Y?M:new Array(Y-M.length+1).join(J)+M};void 0!==Ue&&Ue||(u.KJUR=Ue={}),void 0!==Ue.crypto&&Ue.crypto||(Ue.crypto={}),Ue.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:G.algo.MD5,sha1:G.algo.SHA1,sha224:G.algo.SHA224,sha256:G.algo.SHA256,sha384:G.algo.SHA384,sha512:G.algo.SHA512,ripemd160:G.algo.RIPEMD160},this.getDigestInfoHex=function(T,M){if(void 0===this.DIGESTINFOHEAD[M])throw"alg not supported in Util.DIGESTINFOHEAD: "+M;return this.DIGESTINFOHEAD[M]+T},this.getPaddedDigestInfoHex=function(T,M,Y){var J=this.getDigestInfoHex(T,M),ge=Y/4;if(J.length+22>ge)throw"key is too short for SigAlg: keylen="+Y+","+M;for(var We="00"+J,pt="",dt=ge-"0001".length-We.length,xt=0;xt<dt;xt+=2)pt+="ff";return"0001"+pt+We},this.hashString=function(T,M){return new Ue.crypto.MessageDigest({alg:M}).digestString(T)},this.hashHex=function(T,M){return new Ue.crypto.MessageDigest({alg:M}).digestHex(T)},this.sha1=function(T){return this.hashString(T,"sha1")},this.sha256=function(T){return this.hashString(T,"sha256")},this.sha256Hex=function(T){return this.hashHex(T,"sha256")},this.sha512=function(T){return this.hashString(T,"sha512")},this.sha512Hex=function(T){return this.hashHex(T,"sha512")},this.isKey=function(T){return T instanceof Me||T instanceof Ue.crypto.DSA||T instanceof Ue.crypto.ECDSA}},Ue.crypto.Util.md5=function(T){return new Ue.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(T)},Ue.crypto.Util.ripemd160=function(T){return new Ue.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(T)},Ue.crypto.Util.SECURERANDOMGEN=new B,Ue.crypto.Util.getRandomHexOfNbytes=function(T){var M=new Array(T);return Ue.crypto.Util.SECURERANDOMGEN.nextBytes(M),rt(M)},Ue.crypto.Util.getRandomBigIntegerOfNbytes=function(T){return new be(Ue.crypto.Util.getRandomHexOfNbytes(T),16)},Ue.crypto.Util.getRandomHexOfNbits=function(T){var M=T%8,Y=new Array((T-M)/8+1);return Ue.crypto.Util.SECURERANDOMGEN.nextBytes(Y),Y[0]=(255<<M&255^255)&Y[0],rt(Y)},Ue.crypto.Util.getRandomBigIntegerOfNbits=function(T){return new be(Ue.crypto.Util.getRandomHexOfNbits(T),16)},Ue.crypto.Util.getRandomBigIntegerZeroToMax=function(T){for(var M=T.bitLength();;){var Y=Ue.crypto.Util.getRandomBigIntegerOfNbits(M);if(-1!=T.compareTo(Y))return Y}},Ue.crypto.Util.getRandomBigIntegerMinToMax=function(T,M){var Y=T.compareTo(M);if(1==Y)throw"biMin is greater than biMax";if(0==Y)return T;var J=M.subtract(T);return Ue.crypto.Util.getRandomBigIntegerZeroToMax(J).add(T)},Ue.crypto.MessageDigest=function(T){this.setAlgAndProvider=function(M,Y){if(null!==(M=Ue.crypto.MessageDigest.getCanonicalAlgName(M))&&void 0===Y&&(Y=Ue.crypto.Util.DEFAULTPROVIDER[M]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(M)&&"cryptojs"==Y){try{this.md=Ue.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[M].create()}catch(J){throw"setAlgAndProvider hash alg set fail alg="+M+"/"+J}this.updateString=function(J){this.md.update(J)},this.updateHex=function(J){var ge=G.enc.Hex.parse(J);this.md.update(ge)},this.digest=function(){return this.md.finalize().toString(G.enc.Hex)},this.digestString=function(J){return this.updateString(J),this.digest()},this.digestHex=function(J){return this.updateHex(J),this.digest()}}if(-1!=":sha256:".indexOf(M)&&"sjcl"==Y){try{this.md=new sjcl.hash.sha256}catch(J){throw"setAlgAndProvider hash alg set fail alg="+M+"/"+J}this.updateString=function(J){this.md.update(J)},this.updateHex=function(J){var ge=sjcl.codec.hex.toBits(J);this.md.update(ge)},this.digest=function(){var J=this.md.finalize();return sjcl.codec.hex.fromBits(J)},this.digestString=function(J){return this.updateString(J),this.digest()},this.digestHex=function(J){return this.updateHex(J),this.digest()}}},this.updateString=function(M){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(M){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(M){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(M){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==T&&void 0!==T.alg&&(this.algName=T.alg,void 0===T.prov&&(this.provName=Ue.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},Ue.crypto.MessageDigest.getCanonicalAlgName=function(T){return"string"==typeof T&&(T=(T=T.toLowerCase()).replace(/-/,"")),T},Ue.crypto.MessageDigest.getHashLength=function(T){var M=Ue.crypto.MessageDigest,Y=M.getCanonicalAlgName(T);if(void 0===M.HASHLENGTH[Y])throw"not supported algorithm: "+T;return M.HASHLENGTH[Y]},Ue.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},Ue.crypto.Mac=function(T){this.setAlgAndProvider=function(M,Y){if(null==(M=M.toLowerCase())&&(M="hmacsha1"),"hmac"!=(M=M.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+M;void 0===Y&&(Y=Ue.crypto.Util.DEFAULTPROVIDER[M]),this.algProv=M+"/"+Y;var J=M.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(J)&&"cryptojs"==Y){try{this.mac=G.algo.HMAC.create(Ue.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[J],this.pass)}catch(Ce){throw"setAlgAndProvider hash alg set fail hashAlg="+J+"/"+Ce}this.updateString=function(Ce){this.mac.update(Ce)},this.updateHex=function(Ce){var We=G.enc.Hex.parse(Ce);this.mac.update(We)},this.doFinal=function(){return this.mac.finalize().toString(G.enc.Hex)},this.doFinalString=function(Ce){return this.updateString(Ce),this.doFinal()},this.doFinalHex=function(Ce){return this.updateHex(Ce),this.doFinal()}}},this.updateString=function(M){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(M){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(M){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(M){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(M){if("string"==typeof M){var Y=M;return M.length%2!=1&&M.match(/^[0-9A-Fa-f]+$/)||(Y=Pt(M)),void(this.pass=G.enc.Hex.parse(Y))}if("object"!=(void 0===M?"undefined":y(M)))throw"KJUR.crypto.Mac unsupported password type: "+M;if(Y=null,void 0!==M.hex){if(M.hex.length%2!=0||!M.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+M.hex;Y=M.hex}if(void 0!==M.utf8&&(Y=Vt(M.utf8)),void 0!==M.rstr&&(Y=Pt(M.rstr)),void 0!==M.b64&&(Y=Oe(M.b64)),void 0!==M.b64u&&(Y=dn(M.b64u)),null==Y)throw"KJUR.crypto.Mac unsupported password type: "+M;this.pass=G.enc.Hex.parse(Y)},void 0!==T&&(void 0!==T.pass&&this.setPassword(T.pass),void 0!==T.alg&&(this.algName=T.alg,void 0===T.prov&&(this.provName=Ue.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},Ue.crypto.Signature=function(T){var M=null;if(this._setAlgNames=function(){var Y=this.algName.match(/^(.+)with(.+)$/);Y&&(this.mdAlgName=Y[1].toLowerCase(),this.pubkeyAlgName=Y[2].toLowerCase(),"rsaandmgf1"==this.pubkeyAlgName&&"sha"==this.mdAlgName&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(Y,J){for(var ge="",Ce=J/4-Y.length,We=0;We<Ce;We++)ge+="0";return ge+Y},this.setAlgAndProvider=function(Y,J){if(this._setAlgNames(),"cryptojs/jsrsa"!=J)throw new Error("provider not supported: "+J);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new Ue.crypto.MessageDigest({alg:this.mdAlgName})}catch(ge){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+ge)}this.init=function(ge,Ce){var We=null;try{We=void 0===Ce?xr.getKey(ge):xr.getKey(ge,Ce)}catch(pt){throw"init failed:"+pt}if(!0===We.isPrivate)this.prvKey=We,this.state="SIGN";else{if(!0!==We.isPublic)throw"init failed.:"+We;this.pubKey=We,this.state="VERIFY"}},this.updateString=function(ge){this.md.updateString(ge)},this.updateHex=function(ge){this.md.updateHex(ge)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0===this.prvKey&&void 0!==this.ecprvhex&&void 0!==this.eccurvename&&void 0!==Ue.crypto.ECDSA&&(this.prvKey=new Ue.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof Me&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof Me&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof Ue.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof Ue.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(ge){return this.updateString(ge),this.sign()},this.signHex=function(ge){return this.updateHex(ge),this.sign()},this.verify=function(ge){if(this.sHashHex=this.md.digest(),void 0===this.pubKey&&void 0!==this.ecpubhex&&void 0!==this.eccurvename&&void 0!==Ue.crypto.ECDSA&&(this.pubKey=new Ue.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof Me&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,ge,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof Me&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,ge);if(void 0!==Ue.crypto.ECDSA&&this.pubKey instanceof Ue.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,ge);if(void 0!==Ue.crypto.DSA&&this.pubKey instanceof Ue.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,ge);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(Y,J){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(Y){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(Y){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(Y){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(Y){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(Y){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=T,void 0!==T&&(void 0!==T.alg&&(this.algName=T.alg,this.provName=void 0===T.prov?Ue.crypto.Util.DEFAULTPROVIDER[this.algName]:T.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==T.psssaltlen&&(this.pssSaltLen=T.psssaltlen),void 0!==T.prvkeypem)){if(void 0!==T.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{M=xr.getKey(T.prvkeypem),this.init(M)}catch(Y){throw"fatal error to load pem private key: "+Y}}},Ue.crypto.Cipher=function(T){},Ue.crypto.Cipher.encrypt=function(T,M,Y){if(M instanceof Me&&M.isPublic){var J=Ue.crypto.Cipher.getAlgByKeyAndName(M,Y);if("RSA"===J)return M.encrypt(T);if("RSAOAEP"===J)return M.encryptOAEP(T,"sha1");var ge=J.match(/^RSAOAEP(\d+)$/);if(null!==ge)return M.encryptOAEP(T,"sha"+ge[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+Y}throw"Cipher.encrypt: unsupported key or algorithm"},Ue.crypto.Cipher.decrypt=function(T,M,Y){if(M instanceof Me&&M.isPrivate){var J=Ue.crypto.Cipher.getAlgByKeyAndName(M,Y);if("RSA"===J)return M.decrypt(T);if("RSAOAEP"===J)return M.decryptOAEP(T,"sha1");var ge=J.match(/^RSAOAEP(\d+)$/);if(null!==ge)return M.decryptOAEP(T,"sha"+ge[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+Y}throw"Cipher.decrypt: unsupported key or algorithm"},Ue.crypto.Cipher.getAlgByKeyAndName=function(T,M){if(T instanceof Me){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(M))return M;if(null==M)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+M}throw"getAlgByKeyAndName: not supported algorithm name: "+M},Ue.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==Ue&&Ue||(u.KJUR=Ue={}),void 0!==Ue.crypto&&Ue.crypto||(Ue.crypto={}),Ue.crypto.ECDSA=function(T){var M=Error,Y=be,J=st,ge=Ue.crypto.ECDSA,Ce=Ue.crypto.ECParameterDB,We=ge.getName,dt=$e.getVbyListEx,xt=$e.isASN1HEX,Mt=new B;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(Nt){return new Y(Nt.bitLength(),Mt).mod(Nt.subtract(Y.ONE)).add(Y.ONE)},this.setNamedCurve=function(Nt){this.ecparams=Ce.getByName(Nt),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=Nt},this.setPrivateKeyHex=function(Nt){this.isPrivate=!0,this.prvKeyHex=Nt},this.setPublicKeyHex=function(Nt){this.isPublic=!0,this.pubKeyHex=Nt},this.getPublicKeyXYHex=function(){var Nt=this.pubKeyHex;if("04"!==Nt.substr(0,2))throw"this method supports uncompressed format(04) only";var $t=this.ecparams.keylen/4;if(Nt.length!==2+2*$t)throw"malformed public key hex length";var St={};return St.x=Nt.substr(2,$t),St.y=Nt.substr(2+$t),St},this.getShortNISTPCurveName=function(){var Nt=this.curveName;return"secp256r1"===Nt||"NIST P-256"===Nt||"P-256"===Nt||"prime256v1"===Nt?"P-256":"secp384r1"===Nt||"NIST P-384"===Nt||"P-384"===Nt?"P-384":null},this.generateKeyPairHex=function(){var $t=this.getBigRandom(this.ecparams.n),St=this.ecparams.G.multiply($t),tt=St.getX().toBigInteger(),At=St.getY().toBigInteger(),oe=this.ecparams.keylen/4,O=("0000000000"+$t.toString(16)).slice(-oe),I="04"+("0000000000"+tt.toString(16)).slice(-oe)+("0000000000"+At.toString(16)).slice(-oe);return this.setPrivateKeyHex(O),this.setPublicKeyHex(I),{ecprvhex:O,ecpubhex:I}},this.signWithMessageHash=function(Nt){return this.signHex(Nt,this.prvKeyHex)},this.signHex=function(Nt,$t){var St=new Y($t,16),tt=this.ecparams.n,At=new Y(Nt.substring(0,this.ecparams.keylen/4),16);do{var oe=this.getBigRandom(tt),O=this.ecparams.G.multiply(oe).getX().toBigInteger().mod(tt)}while(O.compareTo(Y.ZERO)<=0);var I=oe.modInverse(tt).multiply(At.add(St.multiply(O))).mod(tt);return ge.biRSSigToASN1Sig(O,I)},this.sign=function(Nt,$t){var St=$t,tt=this.ecparams.n,At=Y.fromByteArrayUnsigned(Nt);do{var oe=this.getBigRandom(tt),O=this.ecparams.G.multiply(oe).getX().toBigInteger().mod(tt)}while(O.compareTo(be.ZERO)<=0);var I=oe.modInverse(tt).multiply(At.add(St.multiply(O))).mod(tt);return this.serializeSig(O,I)},this.verifyWithMessageHash=function(Nt,$t){return this.verifyHex(Nt,$t,this.pubKeyHex)},this.verifyHex=function(Nt,$t,St){try{var tt,At,oe=ge.parseSigHex($t);tt=oe.r,At=oe.s;var O=J.decodeFromHex(this.ecparams.curve,St),I=new Y(Nt.substring(0,this.ecparams.keylen/4),16);return this.verifyRaw(I,tt,At,O)}catch{return!1}},this.verify=function(Nt,$t,St){var tt,At,oe;if(Bitcoin.Util.isArray($t)){var O=this.parseSig($t);tt=O.r,At=O.s}else{if("object"!==(void 0===$t?"undefined":y($t))||!$t.r||!$t.s)throw"Invalid value for signature";tt=$t.r,At=$t.s}if(St instanceof st)oe=St;else{if(!Bitcoin.Util.isArray(St))throw"Invalid format for pubkey value, must be byte array or ECPointFp";oe=J.decodeFrom(this.ecparams.curve,St)}var I=Y.fromByteArrayUnsigned(Nt);return this.verifyRaw(I,tt,At,oe)},this.verifyRaw=function(Nt,$t,St,tt){var At=this.ecparams.n,oe=this.ecparams.G;if($t.compareTo(Y.ONE)<0||$t.compareTo(At)>=0||St.compareTo(Y.ONE)<0||St.compareTo(At)>=0)return!1;var O=St.modInverse(At),I=Nt.multiply(O).mod(At),ce=$t.multiply(O).mod(At);return oe.multiply(I).add(tt.multiply(ce)).getX().toBigInteger().mod(At).equals($t)},this.serializeSig=function(Nt,$t){var St=Nt.toByteArraySigned(),tt=$t.toByteArraySigned(),At=[];return At.push(2),At.push(St.length),(At=At.concat(St)).push(2),At.push(tt.length),(At=At.concat(tt)).unshift(At.length),At.unshift(48),At},this.parseSig=function(Nt){var $t;if(48!=Nt[0])throw new Error("Signature not a valid DERSequence");if(2!=Nt[$t=2])throw new Error("First element in signature must be a DERInteger");var St=Nt.slice($t+2,$t+2+Nt[$t+1]);if(2!=Nt[$t+=2+Nt[$t+1]])throw new Error("Second element in signature must be a DERInteger");var tt=Nt.slice($t+2,$t+2+Nt[$t+1]);return $t+=2+Nt[$t+1],{r:Y.fromByteArrayUnsigned(St),s:Y.fromByteArrayUnsigned(tt)}},this.parseSigCompact=function(Nt){if(65!==Nt.length)throw"Signature has the wrong length";var $t=Nt[0]-27;if($t<0||$t>7)throw"Invalid signature type";var St=this.ecparams.n;return{r:Y.fromByteArrayUnsigned(Nt.slice(1,33)).mod(St),s:Y.fromByteArrayUnsigned(Nt.slice(33,65)).mod(St),i:$t}},this.readPKCS5PrvKeyHex=function(Nt){if(!1===xt(Nt))throw new Error("not ASN.1 hex string");var $t,St,tt;try{$t=dt(Nt,0,["[0]",0],"06"),St=dt(Nt,0,[1],"04");try{tt=dt(Nt,0,["[1]",0],"03")}catch{}}catch{throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=We($t),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(tt),this.setPrivateKeyHex(St),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(Nt){if(!1===xt(Nt))throw new M("not ASN.1 hex string");var $t,St,tt;try{dt(Nt,0,[1,0],"06"),$t=dt(Nt,0,[1,1],"06"),St=dt(Nt,0,[2,0,1],"04");try{tt=dt(Nt,0,[2,0,"[1]",0],"03")}catch{}}catch{throw new M("malformed PKCS#8 plain ECC private key")}if(this.curveName=We($t),void 0===this.curveName)throw new M("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(tt),this.setPrivateKeyHex(St),this.isPublic=!1},this.readPKCS8PubKeyHex=function(Nt){if(!1===xt(Nt))throw new M("not ASN.1 hex string");var $t,St;try{dt(Nt,0,[0,0],"06"),$t=dt(Nt,0,[0,1],"06"),St=dt(Nt,0,[1],"03")}catch{throw new M("malformed PKCS#8 ECC public key")}if(this.curveName=We($t),null===this.curveName)throw new M("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(St)},this.readCertPubKeyHex=function(Nt,$t){if(!1===xt(Nt))throw new M("not ASN.1 hex string");var St,tt;try{St=dt(Nt,0,[0,5,0,1],"06"),tt=dt(Nt,0,[0,5,1],"03")}catch{throw new M("malformed X.509 certificate ECC public key")}if(this.curveName=We(St),null===this.curveName)throw new M("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(tt)},void 0!==T&&void 0!==T.curve&&(this.curveName=T.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==T&&(void 0!==T.prv&&this.setPrivateKeyHex(T.prv),void 0!==T.pub&&this.setPublicKeyHex(T.pub))},Ue.crypto.ECDSA.parseSigHex=function(T){var M=Ue.crypto.ECDSA.parseSigHexInHexRS(T);return{r:new be(M.r,16),s:new be(M.s,16)}},Ue.crypto.ECDSA.parseSigHexInHexRS=function(T){var Y=$e.getChildIdx,J=$e.getV;if($e.checkStrictDER(T,0),"30"!=T.substr(0,2))throw new Error("signature is not a ASN.1 sequence");var ge=Y(T,0);if(2!=ge.length)throw new Error("signature shall have two elements");var Ce=ge[0],We=ge[1];if("02"!=T.substr(Ce,2))throw new Error("1st item not ASN.1 integer");if("02"!=T.substr(We,2))throw new Error("2nd item not ASN.1 integer");return{r:J(T,Ce),s:J(T,We)}},Ue.crypto.ECDSA.asn1SigToConcatSig=function(T){var M=Ue.crypto.ECDSA.parseSigHexInHexRS(T),Y=M.r,J=M.s;if("00"==Y.substr(0,2)&&Y.length%32==2&&(Y=Y.substr(2)),"00"==J.substr(0,2)&&J.length%32==2&&(J=J.substr(2)),Y.length%32==30&&(Y="00"+Y),J.length%32==30&&(J="00"+J),Y.length%32!=0)throw"unknown ECDSA sig r length error";if(J.length%32!=0)throw"unknown ECDSA sig s length error";return Y+J},Ue.crypto.ECDSA.concatSigToASN1Sig=function(T){if(T.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var M=T.substr(0,T.length/2),Y=T.substr(T.length/2);return Ue.crypto.ECDSA.hexRSSigToASN1Sig(M,Y)},Ue.crypto.ECDSA.hexRSSigToASN1Sig=function(T,M){var Y=new be(T,16),J=new be(M,16);return Ue.crypto.ECDSA.biRSSigToASN1Sig(Y,J)},Ue.crypto.ECDSA.biRSSigToASN1Sig=function(T,M){var Y=Ue.asn1,J=new Y.DERInteger({bigint:T}),ge=new Y.DERInteger({bigint:M});return new Y.DERSequence({array:[J,ge]}).getEncodedHex()},Ue.crypto.ECDSA.getName=function(T){return"2b8104001f"===T?"secp192k1":"2a8648ce3d030107"===T?"secp256r1":"2b8104000a"===T?"secp256k1":"2b81040021"===T?"secp224r1":"2b81040022"===T?"secp384r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(T)?"secp256r1":-1!=="|secp256k1|".indexOf(T)?"secp256k1":-1!=="|secp224r1|NIST P-224|P-224|".indexOf(T)?"secp224r1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(T)?"secp384r1":null},void 0!==Ue&&Ue||(u.KJUR=Ue={}),void 0!==Ue.crypto&&Ue.crypto||(Ue.crypto={}),Ue.crypto.ECParameterDB=new function(){var T={},M={};function Y(J){return new be(J,16)}this.getByName=function(J){var ge=J;if(void 0!==M[ge]&&(ge=M[J]),void 0!==T[ge])return T[ge];throw"unregistered EC curve name: "+ge},this.regist=function(J,ge,Ce,We,pt,dt,xt,Mt,Nt,$t,St,tt){T[J]={};var At=Y(Ce),oe=Y(We),O=Y(pt),I=Y(dt),ce=Y(xt),Te=new Ut(At,oe,O),at=Te.decodePointHex("04"+Mt+Nt);T[J].name=J,T[J].keylen=ge,T[J].curve=Te,T[J].G=at,T[J].n=I,T[J].h=ce,T[J].oid=St,T[J].info=tt;for(var Tt=0;Tt<$t.length;Tt++)M[$t[Tt]]=J}},Ue.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),Ue.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),Ue.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),Ue.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),Ue.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),Ue.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),Ue.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),Ue.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),Ue.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),Ue.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);var xr=function(){var T=function(xt,Mt,Nt){return M(G.AES,xt,Mt,Nt)},M=function(xt,Mt,Nt,$t){var St=G.enc.Hex.parse(Mt),tt=G.enc.Hex.parse(Nt),At=G.enc.Hex.parse($t),oe={};oe.key=tt,oe.iv=At,oe.ciphertext=St;var O=xt.decrypt(oe,tt,{iv:At});return G.enc.Hex.stringify(O)},Y=function(xt,Mt,Nt){return J(G.AES,xt,Mt,Nt)},J=function(xt,Mt,Nt,$t){var St=G.enc.Hex.parse(Mt),tt=G.enc.Hex.parse(Nt),At=G.enc.Hex.parse($t),oe=xt.encrypt(St,tt,{iv:At}),O=G.enc.Hex.parse(oe.toString());return G.enc.Base64.stringify(O)},ge={"AES-256-CBC":{proc:T,eproc:Y,keylen:32,ivlen:16},"AES-192-CBC":{proc:T,eproc:Y,keylen:24,ivlen:16},"AES-128-CBC":{proc:T,eproc:Y,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(xt,Mt,Nt){return M(G.TripleDES,xt,Mt,Nt)},eproc:function(xt,Mt,Nt){return J(G.TripleDES,xt,Mt,Nt)},keylen:24,ivlen:8},"DES-CBC":{proc:function(xt,Mt,Nt){return M(G.DES,xt,Mt,Nt)},eproc:function(xt,Mt,Nt){return J(G.DES,xt,Mt,Nt)},keylen:8,ivlen:8}},Ce=function(xt){var Mt={},Nt=xt.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));Nt&&(Mt.cipher=Nt[1],Mt.ivsalt=Nt[2]);var $t=xt.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));$t&&(Mt.type=$t[1]);var St=-1,tt=0;-1!=xt.indexOf("\r\n\r\n")&&(St=xt.indexOf("\r\n\r\n"),tt=2),-1!=xt.indexOf("\n\n")&&(St=xt.indexOf("\n\n"),tt=1);var At=xt.indexOf("-----END");if(-1!=St&&-1!=At){var oe=xt.substring(St+2*tt,At-tt);oe=oe.replace(/\s+/g,""),Mt.data=oe}return Mt},We=function(xt,Mt,Nt){for(var $t=Nt.substring(0,16),St=G.enc.Hex.parse($t),tt=G.enc.Utf8.parse(Mt),At=ge[xt].keylen+ge[xt].ivlen,oe="",O=null;;){var I=G.algo.MD5.create();if(null!=O&&I.update(O),I.update(tt),I.update(St),O=I.finalize(),(oe+=G.enc.Hex.stringify(O)).length>=2*At)break}var ce={};return ce.keyhex=oe.substr(0,2*ge[xt].keylen),ce.ivhex=oe.substr(2*ge[xt].keylen,2*ge[xt].ivlen),ce},pt=function(xt,Mt,Nt,$t){var St=G.enc.Base64.parse(xt),tt=G.enc.Hex.stringify(St);return(0,ge[Mt].proc)(tt,Nt,$t)};return{version:"1.0.0",parsePKCS5PEM:function(xt){return Ce(xt)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(xt,Mt,Nt){return We(xt,Mt,Nt)},decryptKeyB64:function(xt,Mt,Nt,$t){return pt(xt,Mt,Nt,$t)},getDecryptedKeyHex:function(xt,Mt){var Nt=Ce(xt),$t=Nt.cipher,St=Nt.ivsalt,tt=Nt.data,At=We($t,Mt,St).keyhex;return pt(tt,$t,At,St)},getEncryptedPKCS5PEMFromPrvKeyHex:function(xt,Mt,Nt,$t,St){var O,I,tt="";if(void 0!==$t&&null!=$t||($t="AES-256-CBC"),void 0===ge[$t])throw"KEYUTIL unsupported algorithm: "+$t;void 0!==St&&null!=St||(St=(O=ge[$t].ivlen,I=G.lib.WordArray.random(O),G.enc.Hex.stringify(I)).toUpperCase());var At=function(O,I,ce,Te){return(0,ge[I].eproc)(O,ce,Te)}(Mt,$t,We($t,Nt,St).keyhex,St);return tt="-----BEGIN "+xt+" PRIVATE KEY-----\r\n",tt+="Proc-Type: 4,ENCRYPTED\r\n",tt+="DEK-Info: "+$t+","+St+"\r\n",tt+="\r\n",(tt+=At.replace(/(.{64})/g,"$1\r\n"))+"\r\n-----END "+xt+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(xt){var Nt=$e.getChildIdx,$t=$e.getV,St={},tt=Nt(xt,0);if(2!=tt.length)throw"malformed format: SEQUENCE(0).items != 2: "+tt.length;St.ciphertext=$t(xt,tt[1]);var At=Nt(xt,tt[0]);if(2!=At.length)throw"malformed format: SEQUENCE(0.0).items != 2: "+At.length;if("2a864886f70d01050d"!=$t(xt,At[0]))throw"this only supports pkcs5PBES2";var oe=Nt(xt,At[1]);if(2!=At.length)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+oe.length;var O=Nt(xt,oe[1]);if(2!=O.length)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+O.length;if("2a864886f70d0307"!=$t(xt,O[0]))throw"this only supports TripleDES";St.encryptionSchemeAlg="TripleDES",St.encryptionSchemeIV=$t(xt,O[1]);var I=Nt(xt,oe[0]);if(2!=I.length)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+I.length;if("2a864886f70d01050c"!=$t(xt,I[0]))throw"this only supports pkcs5PBKDF2";var ce=Nt(xt,I[1]);if(ce.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+ce.length;St.pbkdf2Salt=$t(xt,ce[0]);var Te=$t(xt,ce[1]);try{St.pbkdf2Iter=parseInt(Te,16)}catch{throw"malformed format pbkdf2Iter: "+Te}return St},getPBKDF2KeyHexFromParam:function(xt,Mt){var Nt=G.enc.Hex.parse(xt.pbkdf2Salt),St=G.PBKDF2(Mt,Nt,{keySize:6,iterations:xt.pbkdf2Iter});return G.enc.Hex.stringify(St)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(xt,Mt){var Nt=Cn(xt,"ENCRYPTED PRIVATE KEY"),$t=this.parseHexOfEncryptedPKCS8(Nt),St=xr.getPBKDF2KeyHexFromParam($t,Mt),tt={};tt.ciphertext=G.enc.Hex.parse($t.ciphertext);var At=G.enc.Hex.parse(St),oe=G.enc.Hex.parse($t.encryptionSchemeIV),O=G.TripleDES.decrypt(tt,At,{iv:oe});return G.enc.Hex.stringify(O)},getKeyFromEncryptedPKCS8PEM:function(xt,Mt){var Nt=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(xt,Mt);return this.getKeyFromPlainPrivatePKCS8Hex(Nt)},parsePlainPrivatePKCS8Hex:function(xt){var Mt=$e,Nt=Mt.getChildIdx,$t=Mt.getV,St={algparam:null};if("30"!=xt.substr(0,2))throw"malformed plain PKCS8 private key(code:001)";var tt=Nt(xt,0);if(3!=tt.length)throw"malformed plain PKCS8 private key(code:002)";if("30"!=xt.substr(tt[1],2))throw"malformed PKCS8 private key(code:003)";var At=Nt(xt,tt[1]);if(2!=At.length)throw"malformed PKCS8 private key(code:004)";if("06"!=xt.substr(At[0],2))throw"malformed PKCS8 private key(code:005)";if(St.algoid=$t(xt,At[0]),"06"==xt.substr(At[1],2)&&(St.algparam=$t(xt,At[1])),"04"!=xt.substr(tt[2],2))throw"malformed PKCS8 private key(code:006)";return St.keyidx=Mt.getVidx(xt,tt[2]),St},getKeyFromPlainPrivatePKCS8PEM:function(xt){var Mt=Cn(xt,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(Mt)},getKeyFromPlainPrivatePKCS8Hex:function(xt){var Mt,Nt=this.parsePlainPrivatePKCS8Hex(xt);if("2a864886f70d010101"==Nt.algoid)Mt=new Me;else if("2a8648ce380401"==Nt.algoid)Mt=new Ue.crypto.DSA;else{if("2a8648ce3d0201"!=Nt.algoid)throw"unsupported private key algorithm";Mt=new Ue.crypto.ECDSA}return Mt.readPKCS8PrvKeyHex(xt),Mt},_getKeyFromPublicPKCS8Hex:function(xt){var Mt,Nt=$e.getVbyList(xt,0,[0,0],"06");if("2a864886f70d010101"===Nt)Mt=new Me;else if("2a8648ce380401"===Nt)Mt=new Ue.crypto.DSA;else{if("2a8648ce3d0201"!==Nt)throw"unsupported PKCS#8 public key hex";Mt=new Ue.crypto.ECDSA}return Mt.readPKCS8PubKeyHex(xt),Mt},parsePublicRawRSAKeyHex:function(xt){var Nt=$e.getChildIdx,$t=$e.getV,St={};if("30"!=xt.substr(0,2))throw"malformed RSA key(code:001)";var tt=Nt(xt,0);if(2!=tt.length)throw"malformed RSA key(code:002)";if("02"!=xt.substr(tt[0],2))throw"malformed RSA key(code:003)";if(St.n=$t(xt,tt[0]),"02"!=xt.substr(tt[1],2))throw"malformed RSA key(code:004)";return St.e=$t(xt,tt[1]),St},parsePublicPKCS8Hex:function(xt){var Mt=$e,Nt=Mt.getChildIdx,$t=Mt.getV,St={algparam:null},tt=Nt(xt,0);if(2!=tt.length)throw"outer DERSequence shall have 2 elements: "+tt.length;var At=tt[0];if("30"!=xt.substr(At,2))throw"malformed PKCS8 public key(code:001)";var oe=Nt(xt,At);if(2!=oe.length)throw"malformed PKCS8 public key(code:002)";if("06"!=xt.substr(oe[0],2))throw"malformed PKCS8 public key(code:003)";if(St.algoid=$t(xt,oe[0]),"06"==xt.substr(oe[1],2)?St.algparam=$t(xt,oe[1]):"30"==xt.substr(oe[1],2)&&(St.algparam={},St.algparam.p=Mt.getVbyList(xt,oe[1],[0],"02"),St.algparam.q=Mt.getVbyList(xt,oe[1],[1],"02"),St.algparam.g=Mt.getVbyList(xt,oe[1],[2],"02")),"03"!=xt.substr(tt[1],2))throw"malformed PKCS8 public key(code:004)";return St.key=$t(xt,tt[1]).substr(2),St}}}();xr.getKey=function(T,M,Y){var rr,J=(oe=$e).getChildIdx,ge=oe.getVbyList,Ce=Ue.crypto,We=Ce.ECDSA,pt=Ce.DSA,dt=Me,xt=Cn,Mt=xr;if(void 0!==dt&&T instanceof dt||void 0!==We&&T instanceof We||void 0!==pt&&T instanceof pt)return T;if(void 0!==T.curve&&void 0!==T.xy&&void 0===T.d)return new We({pub:T.xy,curve:T.curve});if(void 0!==T.curve&&void 0!==T.d)return new We({prv:T.d,curve:T.curve});if(void 0===T.kty&&void 0!==T.n&&void 0!==T.e&&void 0===T.d)return(Ht=new dt).setPublic(T.n,T.e),Ht;if(void 0===T.kty&&void 0!==T.n&&void 0!==T.e&&void 0!==T.d&&void 0!==T.p&&void 0!==T.q&&void 0!==T.dp&&void 0!==T.dq&&void 0!==T.co&&void 0===T.qi)return(Ht=new dt).setPrivateEx(T.n,T.e,T.d,T.p,T.q,T.dp,T.dq,T.co),Ht;if(void 0===T.kty&&void 0!==T.n&&void 0!==T.e&&void 0!==T.d&&void 0===T.p)return(Ht=new dt).setPrivate(T.n,T.e,T.d),Ht;if(void 0!==T.p&&void 0!==T.q&&void 0!==T.g&&void 0!==T.y&&void 0===T.x)return(Ht=new pt).setPublic(T.p,T.q,T.g,T.y),Ht;if(void 0!==T.p&&void 0!==T.q&&void 0!==T.g&&void 0!==T.y&&void 0!==T.x)return(Ht=new pt).setPrivate(T.p,T.q,T.g,T.y,T.x),Ht;if("RSA"===T.kty&&void 0!==T.n&&void 0!==T.e&&void 0===T.d)return(Ht=new dt).setPublic(dn(T.n),dn(T.e)),Ht;if("RSA"===T.kty&&void 0!==T.n&&void 0!==T.e&&void 0!==T.d&&void 0!==T.p&&void 0!==T.q&&void 0!==T.dp&&void 0!==T.dq&&void 0!==T.qi)return(Ht=new dt).setPrivateEx(dn(T.n),dn(T.e),dn(T.d),dn(T.p),dn(T.q),dn(T.dp),dn(T.dq),dn(T.qi)),Ht;if("RSA"===T.kty&&void 0!==T.n&&void 0!==T.e&&void 0!==T.d)return(Ht=new dt).setPrivate(dn(T.n),dn(T.e),dn(T.d)),Ht;if("EC"===T.kty&&void 0!==T.crv&&void 0!==T.x&&void 0!==T.y&&void 0===T.d){var Nt=(vn=new We({curve:T.crv})).ecparams.keylen/4,$t="04"+("0000000000"+dn(T.x)).slice(-Nt)+("0000000000"+dn(T.y)).slice(-Nt);return vn.setPublicKeyHex($t),vn}if("EC"===T.kty&&void 0!==T.crv&&void 0!==T.x&&void 0!==T.y&&void 0!==T.d){Nt=(vn=new We({curve:T.crv})).ecparams.keylen/4,$t="04"+("0000000000"+dn(T.x)).slice(-Nt)+("0000000000"+dn(T.y)).slice(-Nt);var St=("0000000000"+dn(T.d)).slice(-Nt);return vn.setPublicKeyHex($t),vn.setPrivateKeyHex(St),vn}if("pkcs5prv"===Y){var tt,At=T,oe=$e;if(9===(tt=J(At,0)).length)(Ht=new dt).readPKCS5PrvKeyHex(At);else if(6===tt.length)(Ht=new pt).readPKCS5PrvKeyHex(At);else{if(!(tt.length>2&&"04"===At.substr(tt[1],2)))throw"unsupported PKCS#1/5 hexadecimal key";(Ht=new We).readPKCS5PrvKeyHex(At)}return Ht}if("pkcs8prv"===Y)return Mt.getKeyFromPlainPrivatePKCS8Hex(T);if("pkcs8pub"===Y)return Mt._getKeyFromPublicPKCS8Hex(T);if("x509pub"===Y)return Zn.getPublicKeyFromCertHex(T);if(-1!=T.indexOf("-END CERTIFICATE-",0)||-1!=T.indexOf("-END X509 CERTIFICATE-",0)||-1!=T.indexOf("-END TRUSTED CERTIFICATE-",0))return Zn.getPublicKeyFromCertPEM(T);if(-1!=T.indexOf("-END PUBLIC KEY-")){var O=Cn(T,"PUBLIC KEY");return Mt._getKeyFromPublicPKCS8Hex(O)}if(-1!=T.indexOf("-END RSA PRIVATE KEY-")&&-1==T.indexOf("4,ENCRYPTED")){var I=xt(T,"RSA PRIVATE KEY");return Mt.getKey(I,null,"pkcs5prv")}if(-1!=T.indexOf("-END DSA PRIVATE KEY-")&&-1==T.indexOf("4,ENCRYPTED")){var ce=ge(rr=xt(T,"DSA PRIVATE KEY"),0,[1],"02"),Te=ge(rr,0,[2],"02"),at=ge(rr,0,[3],"02"),Tt=ge(rr,0,[4],"02"),tn=ge(rr,0,[5],"02");return(Ht=new pt).setPrivate(new be(ce,16),new be(Te,16),new be(at,16),new be(Tt,16),new be(tn,16)),Ht}if(-1!=T.indexOf("-END EC PRIVATE KEY-")&&-1==T.indexOf("4,ENCRYPTED"))return I=xt(T,"EC PRIVATE KEY"),Mt.getKey(I,null,"pkcs5prv");if(-1!=T.indexOf("-END PRIVATE KEY-"))return Mt.getKeyFromPlainPrivatePKCS8PEM(T);if(-1!=T.indexOf("-END RSA PRIVATE KEY-")&&-1!=T.indexOf("4,ENCRYPTED")){var on=Mt.getDecryptedKeyHex(T,M),bn=new Me;return bn.readPKCS5PrvKeyHex(on),bn}if(-1!=T.indexOf("-END EC PRIVATE KEY-")&&-1!=T.indexOf("4,ENCRYPTED")){var vn,Ht=ge(rr=Mt.getDecryptedKeyHex(T,M),0,[1],"04"),Jn=ge(rr,0,[2,0],"06"),er=ge(rr,0,[3,0],"03").substr(2);if(void 0===Ue.crypto.OID.oidhex2name[Jn])throw"undefined OID(hex) in KJUR.crypto.OID: "+Jn;return(vn=new We({curve:Ue.crypto.OID.oidhex2name[Jn]})).setPublicKeyHex(er),vn.setPrivateKeyHex(Ht),vn.isPublic=!1,vn}if(-1!=T.indexOf("-END DSA PRIVATE KEY-")&&-1!=T.indexOf("4,ENCRYPTED"))return ce=ge(rr=Mt.getDecryptedKeyHex(T,M),0,[1],"02"),Te=ge(rr,0,[2],"02"),at=ge(rr,0,[3],"02"),Tt=ge(rr,0,[4],"02"),tn=ge(rr,0,[5],"02"),(Ht=new pt).setPrivate(new be(ce,16),new be(Te,16),new be(at,16),new be(Tt,16),new be(tn,16)),Ht;if(-1!=T.indexOf("-END ENCRYPTED PRIVATE KEY-"))return Mt.getKeyFromEncryptedPKCS8PEM(T,M);throw new Error("not supported argument")},xr.generateKeypair=function(T,M){if("RSA"==T){var Y=M;(We=new Me).generate(Y,"10001"),We.isPrivate=!0,We.isPublic=!0;var J=new Me,ge=We.n.toString(16),Ce=We.e.toString(16);return J.setPublic(ge,Ce),J.isPrivate=!1,J.isPublic=!0,(pt={}).prvKeyObj=We,pt.pubKeyObj=J,pt}if("EC"==T){var We,pt,dt=M,xt=new Ue.crypto.ECDSA({curve:dt}).generateKeyPairHex();return(We=new Ue.crypto.ECDSA({curve:dt})).setPublicKeyHex(xt.ecpubhex),We.setPrivateKeyHex(xt.ecprvhex),We.isPrivate=!0,We.isPublic=!1,(J=new Ue.crypto.ECDSA({curve:dt})).setPublicKeyHex(xt.ecpubhex),J.isPrivate=!1,J.isPublic=!0,(pt={}).prvKeyObj=We,pt.pubKeyObj=J,pt}throw"unknown algorithm: "+T},xr.getPEM=function(T,M,Y,J,ge,Ce){var pt=Ue.asn1,dt=pt.DERObjectIdentifier,xt=pt.DERInteger,Mt=pt.ASN1Util.newObject,$t=Ue.crypto,St=$t.DSA,tt=$t.ECDSA,At=Me;function oe(vn){return Mt({seq:[{int:0},{int:{bigint:vn.n}},{int:vn.e},{int:{bigint:vn.d}},{int:{bigint:vn.p}},{int:{bigint:vn.q}},{int:{bigint:vn.dmp1}},{int:{bigint:vn.dmq1}},{int:{bigint:vn.coeff}}]})}function O(vn){return Mt({seq:[{int:1},{octstr:{hex:vn.prvKeyHex}},{tag:["a0",!0,{oid:{name:vn.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+vn.pubKeyHex}}]}]})}function I(vn){return Mt({seq:[{int:0},{int:{bigint:vn.p}},{int:{bigint:vn.q}},{int:{bigint:vn.g}},{int:{bigint:vn.y}},{int:{bigint:vn.x}}]})}if((void 0!==At&&T instanceof At||void 0!==St&&T instanceof St||void 0!==tt&&T instanceof tt)&&1==T.isPublic&&(void 0===M||"PKCS8PUB"==M))return _n(Tt=new(0,pt.x509.SubjectPublicKeyInfo)(T).getEncodedHex(),"PUBLIC KEY");if("PKCS1PRV"==M&&void 0!==At&&T instanceof At&&(void 0===Y||null==Y)&&1==T.isPrivate)return _n(Tt=oe(T).getEncodedHex(),"RSA PRIVATE KEY");if("PKCS1PRV"==M&&void 0!==tt&&T instanceof tt&&(void 0===Y||null==Y)&&1==T.isPrivate){var ce=new dt({name:T.curveName}).getEncodedHex(),Te=O(T).getEncodedHex(),at="";return(at+=_n(ce,"EC PARAMETERS"))+_n(Te,"EC PRIVATE KEY")}if("PKCS1PRV"==M&&void 0!==St&&T instanceof St&&(void 0===Y||null==Y)&&1==T.isPrivate)return _n(Tt=I(T).getEncodedHex(),"DSA PRIVATE KEY");if("PKCS5PRV"==M&&void 0!==At&&T instanceof At&&void 0!==Y&&null!=Y&&1==T.isPrivate){var Tt=oe(T).getEncodedHex();return void 0===J&&(J="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",Tt,Y,J,Ce)}if("PKCS5PRV"==M&&void 0!==tt&&T instanceof tt&&void 0!==Y&&null!=Y&&1==T.isPrivate)return Tt=O(T).getEncodedHex(),void 0===J&&(J="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",Tt,Y,J,Ce);if("PKCS5PRV"==M&&void 0!==St&&T instanceof St&&void 0!==Y&&null!=Y&&1==T.isPrivate)return Tt=I(T).getEncodedHex(),void 0===J&&(J="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",Tt,Y,J,Ce);var tn=function(Ht,Jn){var er=on(Ht,Jn);return new Mt({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:er.pbkdf2Salt}},{int:er.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:er.encryptionSchemeIV}}]}]}]},{octstr:{hex:er.ciphertext}}]}).getEncodedHex()},on=function(Ht,Jn){var er=G.lib.WordArray.random(8),rr=G.lib.WordArray.random(8),Ln=G.PBKDF2(Jn,er,{keySize:6,iterations:100}),Nn=G.enc.Hex.parse(Ht),Mn=G.TripleDES.encrypt(Nn,Ln,{iv:rr})+"",kn={};return kn.ciphertext=Mn,kn.pbkdf2Salt=G.enc.Hex.stringify(er),kn.pbkdf2Iter=100,kn.encryptionSchemeAlg="DES-EDE3-CBC",kn.encryptionSchemeIV=G.enc.Hex.stringify(rr),kn};if("PKCS8PRV"==M&&null!=At&&T instanceof At&&1==T.isPrivate){var bn=oe(T).getEncodedHex();return Tt=Mt({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:bn}}]}).getEncodedHex(),void 0===Y||null==Y?_n(Tt,"PRIVATE KEY"):_n(Te=tn(Tt,Y),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==M&&void 0!==tt&&T instanceof tt&&1==T.isPrivate)return bn=new Mt({seq:[{int:1},{octstr:{hex:T.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+T.pubKeyHex}}]}]}).getEncodedHex(),Tt=Mt({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:T.curveName}}]},{octstr:{hex:bn}}]}).getEncodedHex(),void 0===Y||null==Y?_n(Tt,"PRIVATE KEY"):_n(Te=tn(Tt,Y),"ENCRYPTED PRIVATE KEY");if("PKCS8PRV"==M&&void 0!==St&&T instanceof St&&1==T.isPrivate)return bn=new xt({bigint:T.x}).getEncodedHex(),Tt=Mt({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:T.p}},{int:{bigint:T.q}},{int:{bigint:T.g}}]}]},{octstr:{hex:bn}}]}).getEncodedHex(),void 0===Y||null==Y?_n(Tt,"PRIVATE KEY"):_n(Te=tn(Tt,Y),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},xr.getKeyFromCSRPEM=function(T){var M=Cn(T,"CERTIFICATE REQUEST");return xr.getKeyFromCSRHex(M)},xr.getKeyFromCSRHex=function(T){var M=xr.parseCSRHex(T);return xr.getKey(M.p8pubkeyhex,null,"pkcs8pub")},xr.parseCSRHex=function(T){var Y=$e.getChildIdx,J=$e.getTLV,ge={},Ce=T;if("30"!=Ce.substr(0,2))throw"malformed CSR(code:001)";var We=Y(Ce,0);if(We.length<1)throw"malformed CSR(code:002)";if("30"!=Ce.substr(We[0],2))throw"malformed CSR(code:003)";var pt=Y(Ce,We[0]);if(pt.length<3)throw"malformed CSR(code:004)";return ge.p8pubkeyhex=J(Ce,pt[2]),ge},xr.getKeyID=function(T){var M=xr,Y=$e;"string"==typeof T&&-1!=T.indexOf("BEGIN ")&&(T=M.getKey(T));var J=Cn(M.getPEM(T)),ge=Y.getIdxbyList(J,0,[1]),Ce=Y.getV(J,ge).substring(2);return Ue.crypto.Util.hashHex(Ce,"sha1")},xr.getJWKFromKey=function(T){var M={};if(T instanceof Me&&T.isPrivate)return M.kty="RSA",M.n=Ft(T.n.toString(16)),M.e=Ft(T.e.toString(16)),M.d=Ft(T.d.toString(16)),M.p=Ft(T.p.toString(16)),M.q=Ft(T.q.toString(16)),M.dp=Ft(T.dmp1.toString(16)),M.dq=Ft(T.dmq1.toString(16)),M.qi=Ft(T.coeff.toString(16)),M;if(T instanceof Me&&T.isPublic)return M.kty="RSA",M.n=Ft(T.n.toString(16)),M.e=Ft(T.e.toString(16)),M;if(T instanceof Ue.crypto.ECDSA&&T.isPrivate){if("P-256"!==(J=T.getShortNISTPCurveName())&&"P-384"!==J)throw"unsupported curve name for JWT: "+J;var Y=T.getPublicKeyXYHex();return M.kty="EC",M.crv=J,M.x=Ft(Y.x),M.y=Ft(Y.y),M.d=Ft(T.prvKeyHex),M}if(T instanceof Ue.crypto.ECDSA&&T.isPublic){var J;if("P-256"!==(J=T.getShortNISTPCurveName())&&"P-384"!==J)throw"unsupported curve name for JWT: "+J;return Y=T.getPublicKeyXYHex(),M.kty="EC",M.crv=J,M.x=Ft(Y.x),M.y=Ft(Y.y),M}throw"not supported key object"},Me.getPosArrayOfChildrenFromHex=function(T){return $e.getChildIdx(T,0)},Me.getHexValueArrayOfChildrenFromHex=function(T){var M,Y=$e.getV,J=Y(T,(M=Me.getPosArrayOfChildrenFromHex(T))[0]),ge=Y(T,M[1]),Ce=Y(T,M[2]),We=Y(T,M[3]),pt=Y(T,M[4]),dt=Y(T,M[5]),xt=Y(T,M[6]),Mt=Y(T,M[7]),Nt=Y(T,M[8]);return(M=new Array).push(J,ge,Ce,We,pt,dt,xt,Mt,Nt),M},Me.prototype.readPrivateKeyFromPEMString=function(T){var M=Cn(T),Y=Me.getHexValueArrayOfChildrenFromHex(M);this.setPrivateEx(Y[1],Y[2],Y[3],Y[4],Y[5],Y[6],Y[7],Y[8])},Me.prototype.readPKCS5PrvKeyHex=function(T){var M=Me.getHexValueArrayOfChildrenFromHex(T);this.setPrivateEx(M[1],M[2],M[3],M[4],M[5],M[6],M[7],M[8])},Me.prototype.readPKCS8PrvKeyHex=function(T){var M,Y,J,ge,Ce,We,pt,dt,Mt=$e.getVbyListEx;if(!1===$e.isASN1HEX(T))throw new Error("not ASN.1 hex string");try{M=Mt(T,0,[2,0,1],"02"),Y=Mt(T,0,[2,0,2],"02"),J=Mt(T,0,[2,0,3],"02"),ge=Mt(T,0,[2,0,4],"02"),Ce=Mt(T,0,[2,0,5],"02"),We=Mt(T,0,[2,0,6],"02"),pt=Mt(T,0,[2,0,7],"02"),dt=Mt(T,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(M,Y,J,ge,Ce,We,pt,dt)},Me.prototype.readPKCS5PubKeyHex=function(T){var M=$e,Y=M.getV;if(!1===M.isASN1HEX(T))throw new Error("keyHex is not ASN.1 hex string");var J=M.getChildIdx(T,0);if(2!==J.length||"02"!==T.substr(J[0],2)||"02"!==T.substr(J[1],2))throw new Error("wrong hex for PKCS#5 public key");var ge=Y(T,J[0]),Ce=Y(T,J[1]);this.setPublic(ge,Ce)},Me.prototype.readPKCS8PubKeyHex=function(T){var M=$e;if(!1===M.isASN1HEX(T))throw new Error("not ASN.1 hex string");if("06092a864886f70d010101"!==M.getTLVbyListEx(T,0,[0,0]))throw new Error("not PKCS8 RSA public key");var Y=M.getTLVbyListEx(T,0,[1,0]);this.readPKCS5PubKeyHex(Y)},Me.prototype.readCertPubKeyHex=function(T,M){var Y,J;(Y=new Zn).readCertHex(T),J=Y.getPublicKeyHex(),this.readPKCS8PubKeyHex(J)};var Dn=new RegExp("[^0-9a-f]","gi");function pr(T,M){for(var Y="",J=M/4-T.length,ge=0;ge<J;ge++)Y+="0";return Y+T}function Er(T,M,Y){for(var J="",ge=0;J.length<M;)J+=kt(Y(Pt(T+String.fromCharCode.apply(String,[(4278190080&ge)>>24,(16711680&ge)>>16,(65280&ge)>>8,255&ge])))),ge+=1;return J}function wr(T){for(var M in Ue.crypto.Util.DIGESTINFOHEAD){var Y=Ue.crypto.Util.DIGESTINFOHEAD[M],J=Y.length;if(T.substring(0,J)==Y)return[M,T.substring(J)]}return[]}function Zn(T){var M,Y=$e,J=Y.getChildIdx,ge=Y.getV,Ce=Y.getTLV,We=Y.getVbyList,pt=Y.getVbyListEx,dt=Y.getTLVbyList,xt=Y.getTLVbyListEx,Mt=Y.getIdxbyList,Nt=Y.getIdxbyListEx,$t=Y.getVidx,St=Y.oidname,tt=Y.hextooidstr,At=Zn,oe=Cn;try{M=Ue.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){return null===this.hex||0!==this.version?this.version:"a003020102"!==dt(this.hex,0,[0,0])?(this.version=1,this.foffset=-1,1):(this.version=3,3)},this.getSerialNumberHex=function(){return pt(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var O=xt(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(O)},this.getAlgorithmIdentifierName=function(O){for(var I in M)if(O===M[I])return I;return St(pt(O,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return dt(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return At.hex2dn(this.getIssuerHex())},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return dt(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return At.hex2dn(this.getSubjectHex())},this.getNotBefore=function(){var O=We(this.hex,0,[0,4+this.foffset,0]);return O=O.replace(/(..)/g,"%$1"),decodeURIComponent(O)},this.getNotAfter=function(){var O=We(this.hex,0,[0,4+this.foffset,1]);return O=O.replace(/(..)/g,"%$1"),decodeURIComponent(O)},this.getPublicKeyHex=function(){return Y.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return Mt(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var O=this.getPublicKeyIdx();return Mt(this.hex,O,[1,0],"30")},this.getPublicKey=function(){return xr.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var O=dt(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(O)},this.getSignatureValueHex=function(){return We(this.hex,0,[2],"03",!0)},this.verifySignature=function(O){var I=this.getSignatureAlgorithmField(),ce=this.getSignatureValueHex(),Te=dt(this.hex,0,[0],"30"),at=new Ue.crypto.Signature({alg:I});return at.init(O),at.updateHex(Te),at.verify(ce)},this.parseExt=function(O){var I,ce,Te;if(void 0===O){if(3!==this.version)return-1;I=Mt(Te=this.hex,0,[0,7,0],"30"),ce=J(Te,I)}else{Te=Cn(O);var at=Mt(Te,0,[0,3,0,0],"06");if("2a864886f70d01090e"!=ge(Te,at))return void(this.aExtInfo=new Array);I=Mt(Te,0,[0,3,0,1,0],"30"),ce=J(Te,I),this.hex=Te}this.aExtInfo=new Array;for(var Tt=0;Tt<ce.length;Tt++){var tn={critical:!1},on=0;3===J(Te,ce[Tt]).length&&(tn.critical=!0,on=1),tn.oid=Y.hextooidstr(We(Te,ce[Tt],[0],"06"));var bn=Mt(Te,ce[Tt],[1+on]);tn.vidx=$t(Te,bn),this.aExtInfo.push(tn)}},this.getExtInfo=function(O){var I=this.aExtInfo,ce=O;if(O.match(/^[0-9.]+$/)||(ce=Ue.asn1.x509.OID.name2oid(O)),""!==ce)for(var Te=0;Te<I.length;Te++)if(I[Te].oid===ce)return I[Te]},this.getExtBasicConstraints=function(O,I){if(void 0===O&&void 0===I){var ce=this.getExtInfo("basicConstraints");if(void 0===ce)return;O=Ce(this.hex,ce.vidx),I=ce.critical}var Te={extname:"basicConstraints"};if(I&&(Te.critical=!0),"3000"===O)return Te;if("30030101ff"===O)return Te.cA=!0,Te;if("30060101ff02"===O.substr(0,12)){var at=ge(O,10),Tt=parseInt(at,16);return Te.cA=!0,Te.pathLen=Tt,Te}throw new Error("hExtV parse error: "+O)},this.getExtKeyUsage=function(O,I){if(void 0===O&&void 0===I){var ce=this.getExtInfo("keyUsage");if(void 0===ce)return;O=Ce(this.hex,ce.vidx),I=ce.critical}var Te={extname:"keyUsage"};return I&&(Te.critical=!0),Te.names=this.getExtKeyUsageString(O).split(","),Te},this.getExtKeyUsageBin=function(O){if(void 0===O){var I=this.getExtInfo("keyUsage");if(void 0===I)return"";O=Ce(this.hex,I.vidx)}if(8!=O.length&&10!=O.length)throw new Error("malformed key usage value: "+O);var ce="000000000000000"+parseInt(O.substr(6),16).toString(2);return 8==O.length&&(ce=ce.slice(-8)),10==O.length&&(ce=ce.slice(-16)),""==(ce=ce.replace(/0+$/,""))&&(ce="0"),ce},this.getExtKeyUsageString=function(O){for(var I=this.getExtKeyUsageBin(O),ce=new Array,Te=0;Te<I.length;Te++)"1"==I.substr(Te,1)&&ce.push(Zn.KEYUSAGE_NAME[Te]);return ce.join(",")},this.getExtSubjectKeyIdentifier=function(O,I){if(void 0===O&&void 0===I){var ce=this.getExtInfo("subjectKeyIdentifier");if(void 0===ce)return;O=Ce(this.hex,ce.vidx),I=ce.critical}var Te={extname:"subjectKeyIdentifier"};I&&(Te.critical=!0);var at=ge(O,0);return Te.kid={hex:at},Te},this.getExtAuthorityKeyIdentifier=function(O,I){if(void 0===O&&void 0===I){var ce=this.getExtInfo("authorityKeyIdentifier");if(void 0===ce)return;O=Ce(this.hex,ce.vidx),I=ce.critical}var Te={extname:"authorityKeyIdentifier"};I&&(Te.critical=!0);for(var at=J(O,0),Tt=0;Tt<at.length;Tt++){var tn=O.substr(at[Tt],2);if("80"===tn&&(Te.kid={hex:ge(O,at[Tt])}),"a1"===tn){var on=Ce(O,at[Tt]),bn=this.getGeneralNames(on);Te.issuer=bn[0].dn}"82"===tn&&(Te.sn={hex:ge(O,at[Tt])})}return Te},this.getExtExtKeyUsage=function(O,I){if(void 0===O&&void 0===I){var ce=this.getExtInfo("extKeyUsage");if(void 0===ce)return;O=Ce(this.hex,ce.vidx),I=ce.critical}var Te={extname:"extKeyUsage",array:[]};I&&(Te.critical=!0);for(var at=J(O,0),Tt=0;Tt<at.length;Tt++)Te.array.push(St(ge(O,at[Tt])));return Te},this.getExtExtKeyUsageName=function(){var O=this.getExtInfo("extKeyUsage");if(void 0===O)return O;var I=new Array,ce=Ce(this.hex,O.vidx);if(""===ce)return I;for(var Te=J(ce,0),at=0;at<Te.length;at++)I.push(St(ge(ce,Te[at])));return I},this.getExtSubjectAltName=function(O,I){if(void 0===O&&void 0===I){var ce=this.getExtInfo("subjectAltName");if(void 0===ce)return;O=Ce(this.hex,ce.vidx),I=ce.critical}var Te={extname:"subjectAltName",array:[]};return I&&(Te.critical=!0),Te.array=this.getGeneralNames(O),Te},this.getExtIssuerAltName=function(O,I){if(void 0===O&&void 0===I){var ce=this.getExtInfo("issuerAltName");if(void 0===ce)return;O=Ce(this.hex,ce.vidx),I=ce.critical}var Te={extname:"issuerAltName",array:[]};return I&&(Te.critical=!0),Te.array=this.getGeneralNames(O),Te},this.getGeneralNames=function(O){for(var I=J(O,0),ce=[],Te=0;Te<I.length;Te++){var at=this.getGeneralName(Ce(O,I[Te]));void 0!==at&&ce.push(at)}return ce},this.getGeneralName=function(O){var I=O.substr(0,2),ce=ge(O,0),Te=kt(ce);return"81"==I?{rfc822:Te}:"82"==I?{dns:Te}:"86"==I?{uri:Te}:"87"==I?{ip:mr(ce)}:"a4"==I?{dn:this.getX500Name(ce)}:void 0},this.getExtSubjectAltName2=function(){var O,I,ce,Te=this.getExtInfo("subjectAltName");if(void 0===Te)return Te;for(var at=new Array,Tt=Ce(this.hex,Te.vidx),tn=J(Tt,0),on=0;on<tn.length;on++)ce=Tt.substr(tn[on],2),O=ge(Tt,tn[on]),"81"===ce&&(I=ct(O),at.push(["MAIL",I])),"82"===ce&&(I=ct(O),at.push(["DNS",I])),"84"===ce&&(I=Zn.hex2dn(O,0),at.push(["DN",I])),"86"===ce&&(I=ct(O),at.push(["URI",I])),"87"===ce&&(I=mr(O),at.push(["IP",I]));return at},this.getExtCRLDistributionPoints=function(O,I){if(void 0===O&&void 0===I){var ce=this.getExtInfo("cRLDistributionPoints");if(void 0===ce)return;O=Ce(this.hex,ce.vidx),I=ce.critical}var Te={extname:"cRLDistributionPoints",array:[]};I&&(Te.critical=!0);for(var at=J(O,0),Tt=0;Tt<at.length;Tt++){var tn=Ce(O,at[Tt]);Te.array.push(this.getDistributionPoint(tn))}return Te},this.getDistributionPoint=function(O){for(var I={},ce=J(O,0),Te=0;Te<ce.length;Te++){var at=O.substr(ce[Te],2),Tt=Ce(O,ce[Te]);"a0"==at&&(I.dpname=this.getDistributionPointName(Tt))}return I},this.getDistributionPointName=function(O){for(var I={},ce=J(O,0),Te=0;Te<ce.length;Te++){var at=O.substr(ce[Te],2),Tt=Ce(O,ce[Te]);"a0"==at&&(I.full=this.getGeneralNames(Tt))}return I},this.getExtCRLDistributionPointsURI=function(){var O=this.getExtInfo("cRLDistributionPoints");if(void 0===O)return O;for(var I=new Array,ce=J(this.hex,O.vidx),Te=0;Te<ce.length;Te++)try{var at=ct(We(this.hex,ce[Te],[0,0,0],"86"));I.push(at)}catch{}return I},this.getExtAIAInfo=function(){var O=this.getExtInfo("authorityInfoAccess");if(void 0===O)return O;for(var I={ocsp:[],caissuer:[]},ce=J(this.hex,O.vidx),Te=0;Te<ce.length;Te++){var at=We(this.hex,ce[Te],[0],"06"),Tt=We(this.hex,ce[Te],[1],"86");"2b06010505073001"===at&&I.ocsp.push(ct(Tt)),"2b06010505073002"===at&&I.caissuer.push(ct(Tt))}return I},this.getExtAuthorityInfoAccess=function(O,I){if(void 0===O&&void 0===I){var ce=this.getExtInfo("authorityInfoAccess");if(void 0===ce)return;O=Ce(this.hex,ce.vidx),I=ce.critical}var Te={extname:"authorityInfoAccess",array:[]};I&&(Te.critical=!0);for(var at=J(O,0),Tt=0;Tt<at.length;Tt++){var tn=pt(O,at[Tt],[0],"06"),on=ct(We(O,at[Tt],[1],"86"));if("2b06010505073001"==tn)Te.array.push({ocsp:on});else{if("2b06010505073002"!=tn)throw new Error("unknown method: "+tn);Te.array.push({caissuer:on})}}return Te},this.getExtCertificatePolicies=function(O,I){if(void 0===O&&void 0===I){var ce=this.getExtInfo("certificatePolicies");if(void 0===ce)return;O=Ce(this.hex,ce.vidx),I=ce.critical}var Te={extname:"certificatePolicies",array:[]};I&&(Te.critical=!0);for(var at=J(O,0),Tt=0;Tt<at.length;Tt++){var tn=Ce(O,at[Tt]),on=this.getPolicyInformation(tn);Te.array.push(on)}return Te},this.getPolicyInformation=function(O){var I={},ce=We(O,0,[0],"06");I.policyoid=St(ce);var Te=Nt(O,0,[1],"30");if(-1!=Te){I.array=[];for(var at=J(O,Te),Tt=0;Tt<at.length;Tt++){var tn=Ce(O,at[Tt]),on=this.getPolicyQualifierInfo(tn);I.array.push(on)}}return I},this.getPolicyQualifierInfo=function(O){var I={},ce=We(O,0,[0],"06");if("2b06010505070201"===ce){var Te=pt(O,0,[1],"16");I.cps=kt(Te)}else if("2b06010505070202"===ce){var at=dt(O,0,[1],"30");I.unotice=this.getUserNotice(at)}return I},this.getUserNotice=function(O){for(var I={},ce=J(O,0),Te=0;Te<ce.length;Te++){var at=Ce(O,ce[Te]);"30"!=at.substr(0,2)&&(I.exptext=this.getDisplayText(at))}return I},this.getDisplayText=function(O){var I={};return I.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[O.substr(0,2)],I.str=kt(ge(O,0)),I},this.getExtCRLNumber=function(O,I){var ce={extname:"cRLNumber"};if(I&&(ce.critical=!0),"02"==O.substr(0,2))return ce.num={hex:ge(O,0)},ce;throw new Error("hExtV parse error: "+O)},this.getExtCRLReason=function(O,I){var ce={extname:"cRLReason"};if(I&&(ce.critical=!0),"0a"==O.substr(0,2))return ce.code=parseInt(ge(O,0),16),ce;throw new Error("hExtV parse error: "+O)},this.getExtOcspNonce=function(O,I){var ce={extname:"ocspNonce"};I&&(ce.critical=!0);var Te=ge(O,0);return ce.hex=Te,ce},this.getExtOcspNoCheck=function(O,I){var ce={extname:"ocspNoCheck"};return I&&(ce.critical=!0),ce},this.getExtAdobeTimeStamp=function(O,I){if(void 0===O&&void 0===I){var ce=this.getExtInfo("adobeTimeStamp");if(void 0===ce)return;O=Ce(this.hex,ce.vidx),I=ce.critical}var Te={extname:"adobeTimeStamp"};I&&(Te.critical=!0);var at=J(O,0);if(at.length>1){var Tt=Ce(O,at[1]),tn=this.getGeneralName(Tt);null!=tn.uri&&(Te.uri=tn.uri)}if(at.length>2){var on=Ce(O,at[2]);"0101ff"==on&&(Te.reqauth=!0),"010100"==on&&(Te.reqauth=!1)}return Te},this.getX500NameRule=function(O){for(var I=null,ce=[],Te=0;Te<O.length;Te++)for(var at=O[Te],Tt=0;Tt<at.length;Tt++)ce.push(at[Tt]);for(Te=0;Te<ce.length;Te++){var tn=ce[Te],on=tn.ds,vn=tn.type;if("prn"!=on&&"utf8"!=on&&"ia5"!=on)return"mixed";if("ia5"==on){if("CN"!=vn)return"mixed";if(Ue.lang.String.isMail(tn.value))continue;return"mixed"}if("C"==vn){if("prn"==on)continue;return"mixed"}if(null==I)I=on;else if(I!==on)return"mixed"}return I??"prn"},this.getX500Name=function(O){var I=this.getX500NameArray(O);return{array:I,str:this.dnarraytostr(I)}},this.getX500NameArray=function(O){for(var I=[],ce=J(O,0),Te=0;Te<ce.length;Te++)I.push(this.getRDN(Ce(O,ce[Te])));return I},this.getRDN=function(O){for(var I=[],ce=J(O,0),Te=0;Te<ce.length;Te++)I.push(this.getAttrTypeAndValue(Ce(O,ce[Te])));return I},this.getAttrTypeAndValue=function(O){var I={type:null,value:null,ds:null},ce=J(O,0),Te=We(O,ce[0],[],"06"),at=We(O,ce[1],[]),Tt=Ue.asn1.ASN1Util.oidHexToInt(Te);return I.type=Ue.asn1.x509.OID.oid2atype(Tt),I.value=kt(at),I.ds=this.HEX2STAG[O.substr(ce[1],2)],I},this.readCertPEM=function(O){this.readCertHex(oe(O))},this.readCertHex=function(O){this.hex=O,this.getVersion();try{Mt(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(){var O={};return O.version=this.getVersion(),O.serial={hex:this.getSerialNumberHex()},O.sigalg=this.getSignatureAlgorithmField(),O.issuer=this.getIssuer(),O.notbefore=this.getNotBefore(),O.notafter=this.getNotAfter(),O.subject=this.getSubject(),O.sbjpubkey=_n(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(O.ext=this.getExtParamArray()),O.sighex=this.getSignatureValueHex(),O},this.getExtParamArray=function(O){null==O&&-1!=Nt(this.hex,0,[0,"[3]"])&&(O=xt(this.hex,0,[0,"[3]",0],"30"));for(var I=[],ce=J(O,0),Te=0;Te<ce.length;Te++){var at=Ce(O,ce[Te]),Tt=this.getExtParam(at);null!=Tt&&I.push(Tt)}return I},this.getExtParam=function(O){var I=J(O,0).length;if(2!=I&&3!=I)throw new Error("wrong number elements in Extension: "+I+" "+O);var ce=tt(We(O,0,[0],"06")),Te=!1;3==I&&"0101ff"==dt(O,0,[1])&&(Te=!0);var at=dt(O,0,[I-1,0]),Tt=void 0;if("2.5.29.14"==ce?Tt=this.getExtSubjectKeyIdentifier(at,Te):"2.5.29.15"==ce?Tt=this.getExtKeyUsage(at,Te):"2.5.29.17"==ce?Tt=this.getExtSubjectAltName(at,Te):"2.5.29.18"==ce?Tt=this.getExtIssuerAltName(at,Te):"2.5.29.19"==ce?Tt=this.getExtBasicConstraints(at,Te):"2.5.29.31"==ce?Tt=this.getExtCRLDistributionPoints(at,Te):"2.5.29.32"==ce?Tt=this.getExtCertificatePolicies(at,Te):"2.5.29.35"==ce?Tt=this.getExtAuthorityKeyIdentifier(at,Te):"2.5.29.37"==ce?Tt=this.getExtExtKeyUsage(at,Te):"1.3.6.1.5.5.7.1.1"==ce?Tt=this.getExtAuthorityInfoAccess(at,Te):"2.5.29.20"==ce?Tt=this.getExtCRLNumber(at,Te):"2.5.29.21"==ce?Tt=this.getExtCRLReason(at,Te):"1.3.6.1.5.5.7.48.1.2"==ce?Tt=this.getExtOcspNonce(at,Te):"1.3.6.1.5.5.7.48.1.5"==ce?Tt=this.getExtOcspNoCheck(at,Te):"1.2.840.113583.1.1.9.1"==ce&&(Tt=this.getExtAdobeTimeStamp(at,Te)),null!=Tt)return Tt;var tn={extname:ce,extn:at};return Te&&(tn.critical=!0),tn},this.findExt=function(O,I){for(var ce=0;ce<O.length;ce++)if(O[ce].extname==I)return O[ce];return null},this.updateExtCDPFullURI=function(O,I){var ce=this.findExt(O,"cRLDistributionPoints");if(null!=ce&&null!=ce.array)for(var Te=ce.array,at=0;at<Te.length;at++)if(null!=Te[at].dpname&&null!=Te[at].dpname.full)for(var Tt=Te[at].dpname.full,tn=0;tn<Tt.length;tn++){var on=Tt[at];null!=on.uri&&(on.uri=I)}},this.updateExtAIAOCSP=function(O,I){var ce=this.findExt(O,"authorityInfoAccess");if(null!=ce&&null!=ce.array)for(var Te=ce.array,at=0;at<Te.length;at++)null!=Te[at].ocsp&&(Te[at].ocsp=I)},this.updateExtAIACAIssuer=function(O,I){var ce=this.findExt(O,"authorityInfoAccess");if(null!=ce&&null!=ce.array)for(var Te=ce.array,at=0;at<Te.length;at++)null!=Te[at].caissuer&&(Te[at].caissuer=I)},this.dnarraytostr=function(O){return"/"+O.map(function(I){return I.map(function(at){return(tn=at).type+"="+tn.value;var tn}).join("+")}).join("/")},this.getInfo=function(){var O,I,ce,Ln,at=function(Ln){for(var Nn="",Mn=Ln.array,kn=0;kn<Mn.length;kn++){var jn=Mn[kn];if(Nn+="    policy oid: "+jn.policyoid+"\n",void 0!==jn.array)for(var Gn=0;Gn<jn.array.length;Gn++){var nr=jn.array[Gn];void 0!==nr.cps&&(Nn+="    cps: "+nr.cps+"\n")}}return Nn},Tt=function(Ln){for(var Nn="",Mn=Ln.array,kn=0;kn<Mn.length;kn++){var jn=Mn[kn];try{void 0!==jn.dpname.full[0].uri&&(Nn+="    "+jn.dpname.full[0].uri+"\n")}catch{}try{void 0!==jn.dname.full[0].dn.hex&&(Nn+="    "+Zn.hex2dn(jn.dpname.full[0].dn.hex)+"\n")}catch{}}return Nn},tn=function(Ln){for(var Nn="",Mn=Ln.array,kn=0;kn<Mn.length;kn++){var jn=Mn[kn];void 0!==jn.caissuer&&(Nn+="    caissuer: "+jn.caissuer+"\n"),void 0!==jn.ocsp&&(Nn+="    ocsp: "+jn.ocsp+"\n")}return Nn};if(O="Basic Fields\n",O+="  serial number: "+this.getSerialNumberHex()+"\n",O+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",O+="  issuer: "+this.getIssuerString()+"\n",O+="  notBefore: "+this.getNotBefore()+"\n",O+="  notAfter: "+this.getNotAfter()+"\n",O+="  subject: "+this.getSubjectString()+"\n",O+="  subject public key info: \n",O+="    key algorithm: "+(I=this.getPublicKey()).type+"\n","RSA"===I.type&&(O+="    n="+fr(I.n.toString(16)).substr(0,16)+"...\n",O+="    e="+fr(I.e.toString(16))+"\n"),null!=(ce=this.aExtInfo)){O+="X509v3 Extensions:\n";for(var on=0;on<ce.length;on++){var bn=ce[on],vn=Ue.asn1.x509.OID.oid2name(bn.oid);""===vn&&(vn=bn.oid);var Ht="";if(!0===bn.critical&&(Ht="CRITICAL"),O+="  "+vn+" "+Ht+":\n","basicConstraints"===vn){var Jn=this.getExtBasicConstraints();void 0===Jn.cA?O+="    {}\n":(O+="    cA=true",void 0!==Jn.pathLen&&(O+=", pathLen="+Jn.pathLen),O+="\n")}else if("keyUsage"===vn)O+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===vn)O+="    "+this.getExtSubjectKeyIdentifier().kid.hex+"\n";else if("authorityKeyIdentifier"===vn){var er=this.getExtAuthorityKeyIdentifier();void 0!==er.kid&&(O+="    kid="+er.kid.hex+"\n")}else"extKeyUsage"===vn?O+="    "+this.getExtExtKeyUsage().array.join(", ")+"\n":"subjectAltName"===vn?O+="    "+(Ln=this.getExtSubjectAltName(),JSON.stringify(Ln.array).replace(/[\[\]\{\}\"]/g,"")+"\n"):"cRLDistributionPoints"===vn?O+=Tt(this.getExtCRLDistributionPoints()):"authorityInfoAccess"===vn?O+=tn(this.getExtAuthorityInfoAccess()):"certificatePolicies"===vn&&(O+=at(this.getExtCertificatePolicies()))}}return(O+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n")+"signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"},"string"==typeof T&&(-1!=T.indexOf("-----BEGIN")?this.readCertPEM(T):Ue.lang.String.isHex(T)&&this.readCertHex(T))}Me.prototype.sign=function(T,M){var Y=function(ge){return Ue.crypto.Util.hashString(ge,M)}(T);return this.signWithMessageHash(Y,M)},Me.prototype.signWithMessageHash=function(T,M){var Y=de(Ue.crypto.Util.getPaddedDigestInfoHex(T,M,this.n.bitLength()),16);return pr(this.doPrivate(Y).toString(16),this.n.bitLength())},Me.prototype.signPSS=function(T,M,Y){var Ce,J=(Ce=Pt(T),Ue.crypto.Util.hashHex(Ce,M));return void 0===Y&&(Y=-1),this.signWithMessageHashPSS(J,M,Y)},Me.prototype.signWithMessageHashPSS=function(T,M,Y){var J,ge=kt(T),Ce=ge.length,We=this.n.bitLength()-1,pt=Math.ceil(We/8),dt=function(O){return Ue.crypto.Util.hashHex(O,M)};if(-1===Y||void 0===Y)Y=Ce;else if(-2===Y)Y=pt-Ce-2;else if(Y<-2)throw new Error("invalid salt length");if(pt<Ce+Y+2)throw new Error("data too long");var xt="";Y>0&&(xt=new Array(Y),(new B).nextBytes(xt),xt=String.fromCharCode.apply(String,xt));var Mt=kt(dt(Pt("\0\0\0\0\0\0\0\0"+ge+xt))),Nt=[];for(J=0;J<pt-Y-Ce-2;J+=1)Nt[J]=0;var $t=String.fromCharCode.apply(String,Nt)+"\x01"+xt,St=Er(Mt,$t.length,dt),tt=[];for(J=0;J<$t.length;J+=1)tt[J]=$t.charCodeAt(J)^St.charCodeAt(J);for(tt[0]&=~(65280>>8*pt-We&255),J=0;J<Ce;J++)tt.push(Mt.charCodeAt(J));return tt.push(188),pr(this.doPrivate(new be(tt)).toString(16),this.n.bitLength())},Me.prototype.verify=function(T,M){var Y=de(M=(M=M.replace(Dn,"")).replace(/[ \n]+/g,""),16);if(Y.bitLength()>this.n.bitLength())return 0;var J=wr(this.doPublic(Y).toString(16).replace(/^1f+00/,""));return 0!=J.length&&J[1]==Ue.crypto.Util.hashString(T,J[0])},Me.prototype.verifyWithMessageHash=function(T,M){if(M.length!=Math.ceil(this.n.bitLength()/4))return!1;var Y=de(M,16);if(Y.bitLength()>this.n.bitLength())return 0;var J=wr(this.doPublic(Y).toString(16).replace(/^1f+00/,""));return 0!=J.length&&J[1]==T},Me.prototype.verifyPSS=function(T,M,Y,J){var We,ge=(We=Pt(T),Ue.crypto.Util.hashHex(We,Y));return void 0===J&&(J=-1),this.verifyWithMessageHashPSS(ge,M,Y,J)},Me.prototype.verifyWithMessageHashPSS=function(T,M,Y,J){if(M.length!=Math.ceil(this.n.bitLength()/4))return!1;var ge,Ce=new be(M,16),We=function(ce){return Ue.crypto.Util.hashHex(ce,Y)},pt=kt(T),dt=pt.length,xt=this.n.bitLength()-1,Mt=Math.ceil(xt/8);if(-1===J||void 0===J)J=dt;else if(-2===J)J=Mt-dt-2;else if(J<-2)throw new Error("invalid salt length");if(Mt<dt+J+2)throw new Error("data too long");var Nt=this.doPublic(Ce).toByteArray();for(ge=0;ge<Nt.length;ge+=1)Nt[ge]&=255;for(;Nt.length<Mt;)Nt.unshift(0);if(188!==Nt[Mt-1])throw new Error("encoded message does not end in 0xbc");var $t=(Nt=String.fromCharCode.apply(String,Nt)).substr(0,Mt-dt-1),St=Nt.substr($t.length,dt),tt=65280>>8*Mt-xt&255;if(0!=($t.charCodeAt(0)&tt))throw new Error("bits beyond keysize not zero");var At=Er(St,$t.length,We),oe=[];for(ge=0;ge<$t.length;ge+=1)oe[ge]=$t.charCodeAt(ge)^At.charCodeAt(ge);oe[0]&=~tt;var O=Mt-dt-J-2;for(ge=0;ge<O;ge+=1)if(0!==oe[ge])throw new Error("leftmost octets not zero");if(1!==oe[O])throw new Error("0x01 marker not found");return St===kt(We(Pt("\0\0\0\0\0\0\0\0"+pt+String.fromCharCode.apply(String,oe.slice(-J)))))},Me.SALT_LEN_HLEN=-1,Me.SALT_LEN_MAX=-2,Me.SALT_LEN_RECOVER=-2,Zn.hex2dn=function(T,M){if(void 0===M&&(M=0),"30"!==T.substr(M,2))throw new Error("malformed DN");for(var Y=new Array,J=$e.getChildIdx(T,M),ge=0;ge<J.length;ge++)Y.push(Zn.hex2rdn(T,J[ge]));return"/"+(Y=Y.map(function(Ce){return Ce.replace("/","\\/")})).join("/")},Zn.hex2rdn=function(T,M){if(void 0===M&&(M=0),"31"!==T.substr(M,2))throw new Error("malformed RDN");for(var Y=new Array,J=$e.getChildIdx(T,M),ge=0;ge<J.length;ge++)Y.push(Zn.hex2attrTypeValue(T,J[ge]));return(Y=Y.map(function(Ce){return Ce.replace("+","\\+")})).join("+")},Zn.hex2attrTypeValue=function(T,M){var Y=$e,J=Y.getV;if(void 0===M&&(M=0),"30"!==T.substr(M,2))throw new Error("malformed attribute type and value");var ge=Y.getChildIdx(T,M);2!==ge.length||T.substr(ge[0],2);var Ce=J(T,ge[0]),We=Ue.asn1.ASN1Util.oidHexToInt(Ce);return Ue.asn1.x509.OID.oid2atype(We)+"="+kt(J(T,ge[1]))},Zn.getPublicKeyFromCertHex=function(T){var M=new Zn;return M.readCertHex(T),M.getPublicKey()},Zn.getPublicKeyFromCertPEM=function(T){var M=new Zn;return M.readCertPEM(T),M.getPublicKey()},Zn.getPublicKeyInfoPropOfCertPEM=function(T){var M,Y,J=$e.getVbyList,ge={algparam:null};return(M=new Zn).readCertPEM(T),Y=M.getPublicKeyHex(),ge.keyhex=J(Y,0,[1],"03").substr(2),ge.algoid=J(Y,0,[0,0],"06"),"2a8648ce3d0201"===ge.algoid&&(ge.algparam=J(Y,0,[0,1],"06")),ge},Zn.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],void 0!==Ue&&Ue||(u.KJUR=Ue={}),void 0!==Ue.jws&&Ue.jws||(Ue.jws={}),Ue.jws.JWS=function(){var T=Ue.jws.JWS.isSafeJSONString;this.parseJWS=function(M,Y){if(void 0===this.parsedJWS||!Y&&void 0===this.parsedJWS.sigvalH){var J=M.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==J)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var ge=J[1],Ce=J[2],We=J[3],pt=ge+"."+Ce;if(this.parsedJWS={},this.parsedJWS.headB64U=ge,this.parsedJWS.payloadB64U=Ce,this.parsedJWS.sigvalB64U=We,this.parsedJWS.si=pt,!Y){var dt=dn(We),xt=de(dt,16);this.parsedJWS.sigvalH=dt,this.parsedJWS.sigvalBI=xt}var Mt=zt(ge),Nt=zt(Ce);if(this.parsedJWS.headS=Mt,this.parsedJWS.payloadS=Nt,!T(Mt,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+Mt}}},Ue.jws.JWS.sign=function(T,M,Y,J,ge){var Ce,We,pt,xt=Ue.jws.JWS,Mt=xt.readSafeJSONString,Nt=xt.isSafeJSONString,$t=Ue.crypto,St=$t.Mac,tt=$t.Signature,At=JSON;if("string"!=typeof M&&"object"!=(void 0===M?"undefined":y(M)))throw"spHeader must be JSON string or object: "+M;if("object"==(void 0===M?"undefined":y(M))&&(Ce=At.stringify(We=M)),"string"==typeof M){if(!Nt(Ce=M))throw"JWS Head is not safe JSON string: "+Ce;We=Mt(Ce)}if(pt=Y,"object"==(void 0===Y?"undefined":y(Y))&&(pt=At.stringify(Y)),""!=T&&null!=T||void 0===We.alg||(T=We.alg),""!=T&&null!=T&&void 0===We.alg&&(We.alg=T,Ce=At.stringify(We)),T!==We.alg)throw"alg and sHeader.alg doesn't match: "+T+"!="+We.alg;var oe=null;if(void 0===xt.jwsalg2sigalg[T])throw"unsupported alg name: "+T;oe=xt.jwsalg2sigalg[T];var O=Lt(Ce)+"."+Lt(pt),I="";if("Hmac"==oe.substr(0,4)){if(void 0===J)throw"mac key shall be specified for HS* alg";var ce=new St({alg:oe,prov:"cryptojs",pass:J});ce.updateString(O),I=ce.doFinal()}else if(-1!=oe.indexOf("withECDSA")){(at=new tt({alg:oe})).init(J,ge),at.updateString(O);var Te=at.sign();I=Ue.crypto.ECDSA.asn1SigToConcatSig(Te)}else{var at;"none"!=oe&&((at=new tt({alg:oe})).init(J,ge),at.updateString(O),I=at.sign())}return O+"."+Ft(I)},Ue.jws.JWS.verify=function(T,M,Y){var J,Ce=Ue.jws.JWS,We=Ce.readSafeJSONString,pt=Ue.crypto,dt=pt.ECDSA,xt=pt.Mac,Mt=pt.Signature;void 0!==y(Me)&&(J=Me);var Nt=T.split(".");if(3!==Nt.length)return!1;var oe,$t=Nt[0]+"."+Nt[1],St=dn(Nt[2]),tt=We(zt(Nt[0])),At=null;if(void 0===tt.alg)throw"algorithm not specified in header";if(oe=(At=tt.alg).substr(0,2),null!=Y&&"[object Array]"===Object.prototype.toString.call(Y)&&Y.length>0&&-1==(":"+Y.join(":")+":").indexOf(":"+At+":"))throw"algorithm '"+At+"' not accepted in the list";if("none"!=At&&null===M)throw"key shall be specified to verify.";if("string"==typeof M&&-1!=M.indexOf("-----BEGIN ")&&(M=xr.getKey(M)),!("RS"!=oe&&"PS"!=oe||M instanceof J))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==oe&&!(M instanceof dt))throw"key shall be a ECDSA obj for ES* algs";var O=null;if(void 0===Ce.jwsalg2sigalg[tt.alg])throw"unsupported alg name: "+At;if("none"==(O=Ce.jwsalg2sigalg[At]))throw"not supported";if("Hmac"==O.substr(0,4)){if(void 0===M)throw"hexadecimal key shall be specified for HMAC";var I=new xt({alg:O,pass:M});return I.updateString($t),St==I.doFinal()}if(-1!=O.indexOf("withECDSA")){var ce,Te=null;try{Te=dt.concatSigToASN1Sig(St)}catch{return!1}return(ce=new Mt({alg:O})).init(M),ce.updateString($t),ce.verify(Te)}return(ce=new Mt({alg:O})).init(M),ce.updateString($t),ce.verify(St)},Ue.jws.JWS.parse=function(T){var Y,J,ge=T.split("."),Ce={};if(2!=ge.length&&3!=ge.length)throw"malformed sJWS: wrong number of '.' splitted elements";return Y=ge[1],3==ge.length&&(J=ge[2]),Ce.headerObj=Ue.jws.JWS.readSafeJSONString(zt(ge[0])),Ce.payloadObj=Ue.jws.JWS.readSafeJSONString(zt(Y)),Ce.headerPP=JSON.stringify(Ce.headerObj,null,"  "),Ce.payloadPP=null==Ce.payloadObj?zt(Y):JSON.stringify(Ce.payloadObj,null,"  "),void 0!==J&&(Ce.sigHex=dn(J)),Ce},Ue.jws.JWS.verifyJWT=function(T,M,Y){var J=Ue.jws,ge=J.JWS,Ce=ge.readSafeJSONString,We=ge.inArray,pt=ge.includedArray,dt=T.split("."),xt=dt[0],Mt=dt[1],Nt=(dn(dt[2]),Ce(zt(xt))),$t=Ce(zt(Mt));if(void 0===Nt.alg)return!1;if(void 0===Y.alg)throw"acceptField.alg shall be specified";if(!We(Nt.alg,Y.alg)||void 0!==$t.iss&&"object"===y(Y.iss)&&!We($t.iss,Y.iss)||void 0!==$t.sub&&"object"===y(Y.sub)&&!We($t.sub,Y.sub))return!1;if(void 0!==$t.aud&&"object"===y(Y.aud))if("string"==typeof $t.aud){if(!We($t.aud,Y.aud))return!1}else if("object"==y($t.aud)&&!pt($t.aud,Y.aud))return!1;var St=J.IntDate.getNow();return void 0!==Y.verifyAt&&"number"==typeof Y.verifyAt&&(St=Y.verifyAt),void 0!==Y.gracePeriod&&"number"==typeof Y.gracePeriod||(Y.gracePeriod=0),!(void 0!==$t.exp&&"number"==typeof $t.exp&&$t.exp+Y.gracePeriod<St||void 0!==$t.nbf&&"number"==typeof $t.nbf&&St<$t.nbf-Y.gracePeriod||void 0!==$t.iat&&"number"==typeof $t.iat&&St<$t.iat-Y.gracePeriod||void 0!==$t.jti&&void 0!==Y.jti&&$t.jti!==Y.jti||!ge.verify(T,M,Y.alg))},Ue.jws.JWS.includedArray=function(T,M){var Y=Ue.jws.JWS.inArray;if(null===T||"object"!==(void 0===T?"undefined":y(T))||"number"!=typeof T.length)return!1;for(var J=0;J<T.length;J++)if(!Y(T[J],M))return!1;return!0},Ue.jws.JWS.inArray=function(T,M){if(null===M||"object"!==(void 0===M?"undefined":y(M))||"number"!=typeof M.length)return!1;for(var Y=0;Y<M.length;Y++)if(M[Y]==T)return!0;return!1},Ue.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},Ue.jws.JWS.isSafeJSONString=function(T,M,Y){var J=null;try{return"object"!=(void 0===(J=qt(T))?"undefined":y(J))||J.constructor===Array?0:(M&&(M[Y]=J),1)}catch{return 0}},Ue.jws.JWS.readSafeJSONString=function(T){var M=null;try{return"object"!=(void 0===(M=qt(T))?"undefined":y(M))||M.constructor===Array?null:M}catch{return null}},Ue.jws.JWS.getEncodedSignatureValueFromJWS=function(T){var M=T.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==M)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return M[1]},Ue.jws.JWS.getJWKthumbprint=function(T){if("RSA"!==T.kty&&"EC"!==T.kty&&"oct"!==T.kty)throw"unsupported algorithm for JWK Thumprint";var M="{";if("RSA"===T.kty){if("string"!=typeof T.n||"string"!=typeof T.e)throw"wrong n and e value for RSA key";M+='"e":"'+T.e+'",',M+='"kty":"'+T.kty+'",',M+='"n":"'+T.n+'"}'}else if("EC"===T.kty){if("string"!=typeof T.crv||"string"!=typeof T.x||"string"!=typeof T.y)throw"wrong crv, x and y value for EC key";M+='"crv":"'+T.crv+'",',M+='"kty":"'+T.kty+'",',M+='"x":"'+T.x+'",',M+='"y":"'+T.y+'"}'}else if("oct"===T.kty){if("string"!=typeof T.k)throw"wrong k value for oct(symmetric) key";M+='"kty":"'+T.kty+'",',M+='"k":"'+T.k+'"}'}var Y=Pt(M);return Ft(Ue.crypto.Util.hashHex(Y,"sha256"))},Ue.jws.IntDate={},Ue.jws.IntDate.get=function(T){var M=Ue.jws.IntDate,Y=M.getNow,J=M.getZulu;if("now"==T)return Y();if("now + 1hour"==T)return Y()+3600;if("now + 1day"==T)return Y()+86400;if("now + 1month"==T)return Y()+2592e3;if("now + 1year"==T)return Y()+31536e3;if(T.match(/Z$/))return J(T);if(T.match(/^[0-9]+$/))return parseInt(T);throw"unsupported format: "+T},Ue.jws.IntDate.getZulu=function(T){return Qn(T)},Ue.jws.IntDate.getNow=function(){return~~(new Date/1e3)},Ue.jws.IntDate.intDate2UTCString=function(T){return new Date(1e3*T).toUTCString()},Ue.jws.IntDate.intDate2Zulu=function(T){var M=new Date(1e3*T);return("0000"+M.getUTCFullYear()).slice(-4)+("00"+(M.getUTCMonth()+1)).slice(-2)+("00"+M.getUTCDate()).slice(-2)+("00"+M.getUTCHours()).slice(-2)+("00"+M.getUTCMinutes()).slice(-2)+("00"+M.getUTCSeconds()).slice(-2)+"Z"},u.SecureRandom=B,u.rng_seed_time=De,u.BigInteger=be,u.RSAKey=Me,u.EDSA=Ue.crypto.EDSA,u.DSA=Ue.crypto.DSA,u.Signature=Ue.crypto.Signature,u.MessageDigest=Ue.crypto.MessageDigest,u.Mac=Ue.crypto.Mac,u.Cipher=Ue.crypto.Cipher,u.KEYUTIL=xr,u.ASN1HEX=$e,u.X509=Zn,u.CryptoJS=G,u.b64tohex=Oe,u.b64toBA=Le,u.stoBA=Ot,u.BAtos=Ke,u.BAtohex=rt,u.stohex=Be,u.stob64=function(M){return ve(Be(M))},u.stob64u=function(M){return et(ve(Be(M)))},u.b64utos=function(M){return Ke(Le(wt(M)))},u.b64tob64u=et,u.b64utob64=wt,u.hex2b64=ve,u.hextob64u=Ft,u.b64utohex=dn,u.utf8tob64u=Lt,u.b64utoutf8=zt,u.utf8tob64=function(M){return ve(dr(hr(M)))},u.b64toutf8=function(M){return decodeURIComponent(ur(Oe(M)))},u.utf8tohex=Vt,u.hextoutf8=ct,u.hextorstr=kt,u.rstrtohex=Pt,u.hextob64=Yt,u.hextob64nl=Bt,u.b64nltohex=pn,u.hextopem=_n,u.pemtohex=Cn,u.hextoArrayBuffer=function(M){if(M.length%2!=0)throw"input is not even length";if(null==M.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var Y=new ArrayBuffer(M.length/2),J=new DataView(Y),ge=0;ge<M.length/2;ge++)J.setUint8(ge,parseInt(M.substr(2*ge,2),16));return Y},u.ArrayBuffertohex=function(M){for(var Y="",J=new DataView(M),ge=0;ge<M.byteLength;ge++)Y+=("00"+J.getUint8(ge).toString(16)).slice(-2);return Y},u.zulutomsec=xn,u.zulutosec=Qn,u.zulutodate=function(M){return new Date(xn(M))},u.datetozulu=function(M,Y,J){var ge,Ce=M.getUTCFullYear();if(Y){if(Ce<1950||2049<Ce)throw"not proper year for UTCTime: "+Ce;ge=(""+Ce).slice(-2)}else ge=("000"+Ce).slice(-4);if(ge+=("0"+(M.getUTCMonth()+1)).slice(-2),ge+=("0"+M.getUTCDate()).slice(-2),ge+=("0"+M.getUTCHours()).slice(-2),ge+=("0"+M.getUTCMinutes()).slice(-2),ge+=("0"+M.getUTCSeconds()).slice(-2),J){var We=M.getUTCMilliseconds();0!==We&&(ge+="."+(We=(We=("00"+We).slice(-3)).replace(/0+$/g,"")))}return ge+"Z"},u.uricmptohex=dr,u.hextouricmp=ur,u.ipv6tohex=Xn,u.hextoipv6=ir,u.hextoip=mr,u.iptohex=function(M){var Y="malformed IP address";if(!(M=M.toLowerCase(M)).match(/^[0-9.]+$/)){if(M.match(/^[0-9a-f:]+$/)&&-1!==M.indexOf(":"))return Xn(M);throw Y}var J=M.split(".");if(4!==J.length)throw Y;var ge="";try{for(var Ce=0;Ce<4;Ce++)ge+=("0"+parseInt(J[Ce]).toString(16)).slice(-2);return ge}catch{throw Y}},u.encodeURIComponentAll=hr,u.newline_toUnix=function(M){return M.replace(/\r\n/gm,"\n")},u.newline_toDos=function(M){return(M=M.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")},u.hextoposhex=fr,u.intarystrtohex=function(M){M=(M=(M=M.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return M.split(/,/).map(function(Y,J,ge){var Ce=parseInt(Y);if(Ce<0||255<Ce)throw"integer not in range 0-255";return("00"+Ce.toString(16)).slice(-2)}).join("")}catch(Y){throw"malformed integer array string: "+Y}},u.strdiffidx=function(M,Y){var J=M.length;M.length>Y.length&&(J=Y.length);for(var ge=0;ge<J;ge++)if(M.charCodeAt(ge)!=Y.charCodeAt(ge))return ge;return M.length!=Y.length?J:-1},u.KJUR=Ue,u.crypto=Ue.crypto,u.asn1=Ue.asn1,u.jws=Ue.jws,u.lang=Ue.lang}).call(this,e(28).Buffer)},function(K,u,e){"use strict";(function(n){var y=e(30),x=e(31),$=e(32);function c(){return p.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function d(Se,he){if(c()<he)throw new RangeError("Invalid typed array length");return p.TYPED_ARRAY_SUPPORT?(Se=new Uint8Array(he)).__proto__=p.prototype:(null===Se&&(Se=new p(he)),Se.length=he),Se}function p(Se,he,pe){if(!(p.TYPED_ARRAY_SUPPORT||this instanceof p))return new p(Se,he,pe);if("number"==typeof Se){if("string"==typeof he)throw new Error("If encoding is specified then the first argument must be a string");return V(this,Se)}return z(this,Se,he,pe)}function z(Se,he,pe,Fe){if("number"==typeof he)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&he instanceof ArrayBuffer?function(we,De,ut,le){if(ut<0||De.byteLength<ut)throw new RangeError("'offset' is out of bounds");if(De.byteLength<ut+(le||0))throw new RangeError("'length' is out of bounds");return De=void 0===ut&&void 0===le?new Uint8Array(De):void 0===le?new Uint8Array(De,ut):new Uint8Array(De,ut,le),p.TYPED_ARRAY_SUPPORT?(we=De).__proto__=p.prototype:we=N(we,De),we}(Se,he,pe,Fe):"string"==typeof he?function(we,De,ut){if("string"==typeof ut&&""!==ut||(ut="utf8"),!p.isEncoding(ut))throw new TypeError('"encoding" must be a valid string encoding');var le=0|H(De,ut),D=(we=d(we,le)).write(De,ut);return D!==le&&(we=we.slice(0,D)),we}(Se,he,pe):function(we,De){if(p.isBuffer(De)){var ut=0|U(De.length);return 0===(we=d(we,ut)).length||De.copy(we,0,0,ut),we}if(De){if("undefined"!=typeof ArrayBuffer&&De.buffer instanceof ArrayBuffer||"length"in De)return"number"!=typeof De.length||(D=De.length)!=D?d(we,0):N(we,De);if("Buffer"===De.type&&$(De.data))return N(we,De.data)}var D;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(Se,he)}function S(Se){if("number"!=typeof Se)throw new TypeError('"size" argument must be a number');if(Se<0)throw new RangeError('"size" argument must not be negative')}function V(Se,he){if(S(he),Se=d(Se,he<0?0:0|U(he)),!p.TYPED_ARRAY_SUPPORT)for(var pe=0;pe<he;++pe)Se[pe]=0;return Se}function N(Se,he){var pe=he.length<0?0:0|U(he.length);Se=d(Se,pe);for(var Fe=0;Fe<pe;Fe+=1)Se[Fe]=255&he[Fe];return Se}function U(Se){if(Se>=c())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c().toString(16)+" bytes");return 0|Se}function H(Se,he){if(p.isBuffer(Se))return Se.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(Se)||Se instanceof ArrayBuffer))return Se.byteLength;"string"!=typeof Se&&(Se=""+Se);var pe=Se.length;if(0===pe)return 0;for(var Fe=!1;;)switch(he){case"ascii":case"latin1":case"binary":return pe;case"utf8":case"utf-8":case void 0:return He(Se).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*pe;case"hex":return pe>>>1;case"base64":return Ye(Se).length;default:if(Fe)return He(Se).length;he=(""+he).toLowerCase(),Fe=!0}}function Q(Se,he,pe){var Fe=!1;if((void 0===he||he<0)&&(he=0),he>this.length||((void 0===pe||pe>this.length)&&(pe=this.length),pe<=0)||(pe>>>=0)<=(he>>>=0))return"";for(Se||(Se="utf8");;)switch(Se){case"hex":return E(this,he,pe);case"utf8":case"utf-8":return P(this,he,pe);case"ascii":return _(this,he,pe);case"latin1":case"binary":return R(this,he,pe);case"base64":return m(this,he,pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ne(this,he,pe);default:if(Fe)throw new TypeError("Unknown encoding: "+Se);Se=(Se+"").toLowerCase(),Fe=!0}}function Z(Se,he,pe){var Fe=Se[he];Se[he]=Se[pe],Se[pe]=Fe}function ue(Se,he,pe,Fe,Je){if(0===Se.length)return-1;if("string"==typeof pe?(Fe=pe,pe=0):pe>2147483647?pe=2147483647:pe<-2147483648&&(pe=-2147483648),pe=+pe,isNaN(pe)&&(pe=Je?0:Se.length-1),pe<0&&(pe=Se.length+pe),pe>=Se.length){if(Je)return-1;pe=Se.length-1}else if(pe<0){if(!Je)return-1;pe=0}if("string"==typeof he&&(he=p.from(he,Fe)),p.isBuffer(he))return 0===he.length?-1:G(Se,he,pe,Fe,Je);if("number"==typeof he)return he&=255,p.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?Je?Uint8Array.prototype.indexOf.call(Se,he,pe):Uint8Array.prototype.lastIndexOf.call(Se,he,pe):G(Se,[he],pe,Fe,Je);throw new TypeError("val must be string, number or Buffer")}function G(Se,he,pe,Fe,Je){var we,De=1,ut=Se.length,le=he.length;if(void 0!==Fe&&("ucs2"===(Fe=String(Fe).toLowerCase())||"ucs-2"===Fe||"utf16le"===Fe||"utf-16le"===Fe)){if(Se.length<2||he.length<2)return-1;De=2,ut/=2,le/=2,pe/=2}function D(de,ye){return 1===De?de[ye]:de.readUInt16BE(ye*De)}if(Je){var C=-1;for(we=pe;we<ut;we++)if(D(Se,we)===D(he,-1===C?0:we-C)){if(-1===C&&(C=we),we-C+1===le)return C*De}else-1!==C&&(we-=we-C),C=-1}else for(pe+le>ut&&(pe=ut-le),we=pe;we>=0;we--){for(var g=!0,B=0;B<le;B++)if(D(Se,we+B)!==D(he,B)){g=!1;break}if(g)return we}return-1}function X(Se,he,pe,Fe){pe=Number(pe)||0;var Je=Se.length-pe;Fe?(Fe=Number(Fe))>Je&&(Fe=Je):Fe=Je;var we=he.length;if(we%2!=0)throw new TypeError("Invalid hex string");Fe>we/2&&(Fe=we/2);for(var De=0;De<Fe;++De){var ut=parseInt(he.substr(2*De,2),16);if(isNaN(ut))return De;Se[pe+De]=ut}return De}function ee(Se,he,pe,Fe){return ht(He(he,Se.length-pe),Se,pe,Fe)}function ve(Se,he,pe,Fe){return ht(function(we){for(var De=[],ut=0;ut<we.length;++ut)De.push(255&we.charCodeAt(ut));return De}(he),Se,pe,Fe)}function Oe(Se,he,pe,Fe){return ve(Se,he,pe,Fe)}function Le(Se,he,pe,Fe){return ht(Ye(he),Se,pe,Fe)}function be(Se,he,pe,Fe){return ht(function(we,De){for(var ut,le,C=[],g=0;g<we.length&&!((De-=2)<0);++g)le=(ut=we.charCodeAt(g))>>8,C.push(ut%256),C.push(le);return C}(he,Se.length-pe),Se,pe,Fe)}function m(Se,he,pe){return y.fromByteArray(0===he&&pe===Se.length?Se:Se.slice(he,pe))}function P(Se,he,pe){pe=Math.min(Se.length,pe);for(var Fe=[],Je=he;Je<pe;){var we,De,ut,le,D=Se[Je],C=null,g=D>239?4:D>223?3:D>191?2:1;if(Je+g<=pe)switch(g){case 1:D<128&&(C=D);break;case 2:128==(192&(we=Se[Je+1]))&&(le=(31&D)<<6|63&we)>127&&(C=le);break;case 3:De=Se[Je+2],128==(192&(we=Se[Je+1]))&&128==(192&De)&&(le=(15&D)<<12|(63&we)<<6|63&De)>2047&&(le<55296||le>57343)&&(C=le);break;case 4:De=Se[Je+2],ut=Se[Je+3],128==(192&(we=Se[Je+1]))&&128==(192&De)&&128==(192&ut)&&(le=(15&D)<<18|(63&we)<<12|(63&De)<<6|63&ut)>65535&&le<1114112&&(C=le)}null===C?(C=65533,g=1):C>65535&&(Fe.push((C-=65536)>>>10&1023|55296),C=56320|1023&C),Fe.push(C),Je+=g}return function(de){var ye=de.length;if(ye<=b)return String.fromCharCode.apply(String,de);for(var Me="",Qe=0;Qe<ye;)Me+=String.fromCharCode.apply(String,de.slice(Qe,Qe+=b));return Me}(Fe)}u.Buffer=p,u.SlowBuffer=function(he){return+he!=he&&(he=0),p.alloc(+he)},u.INSPECT_MAX_BYTES=50,p.TYPED_ARRAY_SUPPORT=void 0!==n.TYPED_ARRAY_SUPPORT?n.TYPED_ARRAY_SUPPORT:function(){try{var he=new Uint8Array(1);return he.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===he.foo()&&"function"==typeof he.subarray&&0===he.subarray(1,1).byteLength}catch{return!1}}(),u.kMaxLength=c(),p.poolSize=8192,p._augment=function(Se){return Se.__proto__=p.prototype,Se},p.from=function(Se,he,pe){return z(null,Se,he,pe)},p.TYPED_ARRAY_SUPPORT&&(p.prototype.__proto__=Uint8Array.prototype,p.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&p[Symbol.species]===p&&Object.defineProperty(p,Symbol.species,{value:null,configurable:!0})),p.alloc=function(Se,he,pe){return null,De=he,ut=pe,S(we=Se),we<=0?d(null,we):void 0!==De?"string"==typeof ut?d(null,we).fill(De,ut):d(null,we).fill(De):d(null,we);var we,De,ut},p.allocUnsafe=function(Se){return V(null,Se)},p.allocUnsafeSlow=function(Se){return V(null,Se)},p.isBuffer=function(he){return!(null==he||!he._isBuffer)},p.compare=function(he,pe){if(!p.isBuffer(he)||!p.isBuffer(pe))throw new TypeError("Arguments must be Buffers");if(he===pe)return 0;for(var Fe=he.length,Je=pe.length,we=0,De=Math.min(Fe,Je);we<De;++we)if(he[we]!==pe[we]){Fe=he[we],Je=pe[we];break}return Fe<Je?-1:Je<Fe?1:0},p.isEncoding=function(he){switch(String(he).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(he,pe){if(!$(he))throw new TypeError('"list" argument must be an Array of Buffers');if(0===he.length)return p.alloc(0);var Fe;if(void 0===pe)for(pe=0,Fe=0;Fe<he.length;++Fe)pe+=he[Fe].length;var Je=p.allocUnsafe(pe),we=0;for(Fe=0;Fe<he.length;++Fe){var De=he[Fe];if(!p.isBuffer(De))throw new TypeError('"list" argument must be an Array of Buffers');De.copy(Je,we),we+=De.length}return Je},p.byteLength=H,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var he=this.length;if(he%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var pe=0;pe<he;pe+=2)Z(this,pe,pe+1);return this},p.prototype.swap32=function(){var he=this.length;if(he%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var pe=0;pe<he;pe+=4)Z(this,pe,pe+3),Z(this,pe+1,pe+2);return this},p.prototype.swap64=function(){var he=this.length;if(he%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var pe=0;pe<he;pe+=8)Z(this,pe,pe+7),Z(this,pe+1,pe+6),Z(this,pe+2,pe+5),Z(this,pe+3,pe+4);return this},p.prototype.toString=function(){var he=0|this.length;return 0===he?"":0===arguments.length?P(this,0,he):Q.apply(this,arguments)},p.prototype.equals=function(he){if(!p.isBuffer(he))throw new TypeError("Argument must be a Buffer");return this===he||0===p.compare(this,he)},p.prototype.inspect=function(){var he="",pe=u.INSPECT_MAX_BYTES;return this.length>0&&(he=this.toString("hex",0,pe).match(/.{2}/g).join(" "),this.length>pe&&(he+=" ... ")),"<Buffer "+he+">"},p.prototype.compare=function(he,pe,Fe,Je,we){if(!p.isBuffer(he))throw new TypeError("Argument must be a Buffer");if(void 0===pe&&(pe=0),void 0===Fe&&(Fe=he?he.length:0),void 0===Je&&(Je=0),void 0===we&&(we=this.length),pe<0||Fe>he.length||Je<0||we>this.length)throw new RangeError("out of range index");if(Je>=we&&pe>=Fe)return 0;if(Je>=we)return-1;if(pe>=Fe)return 1;if(this===he)return 0;for(var De=(we>>>=0)-(Je>>>=0),ut=(Fe>>>=0)-(pe>>>=0),le=Math.min(De,ut),D=this.slice(Je,we),C=he.slice(pe,Fe),g=0;g<le;++g)if(D[g]!==C[g]){De=D[g],ut=C[g];break}return De<ut?-1:ut<De?1:0},p.prototype.includes=function(he,pe,Fe){return-1!==this.indexOf(he,pe,Fe)},p.prototype.indexOf=function(he,pe,Fe){return ue(this,he,pe,Fe,!0)},p.prototype.lastIndexOf=function(he,pe,Fe){return ue(this,he,pe,Fe,!1)},p.prototype.write=function(he,pe,Fe,Je){if(void 0===pe)Je="utf8",Fe=this.length,pe=0;else if(void 0===Fe&&"string"==typeof pe)Je=pe,Fe=this.length,pe=0;else{if(!isFinite(pe))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");pe|=0,isFinite(Fe)?(Fe|=0,void 0===Je&&(Je="utf8")):(Je=Fe,Fe=void 0)}var we=this.length-pe;if((void 0===Fe||Fe>we)&&(Fe=we),he.length>0&&(Fe<0||pe<0)||pe>this.length)throw new RangeError("Attempt to write outside buffer bounds");Je||(Je="utf8");for(var De=!1;;)switch(Je){case"hex":return X(this,he,pe,Fe);case"utf8":case"utf-8":return ee(this,he,pe,Fe);case"ascii":return ve(this,he,pe,Fe);case"latin1":case"binary":return Oe(this,he,pe,Fe);case"base64":return Le(this,he,pe,Fe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return be(this,he,pe,Fe);default:if(De)throw new TypeError("Unknown encoding: "+Je);Je=(""+Je).toLowerCase(),De=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var b=4096;function _(Se,he,pe){var Fe="";pe=Math.min(Se.length,pe);for(var Je=he;Je<pe;++Je)Fe+=String.fromCharCode(127&Se[Je]);return Fe}function R(Se,he,pe){var Fe="";pe=Math.min(Se.length,pe);for(var Je=he;Je<pe;++Je)Fe+=String.fromCharCode(Se[Je]);return Fe}function E(Se,he,pe){var Fe=Se.length;(!he||he<0)&&(he=0),(!pe||pe<0||pe>Fe)&&(pe=Fe);for(var Je="",we=he;we<pe;++we)Je+=lt(Se[we]);return Je}function ne(Se,he,pe){for(var Fe=Se.slice(he,pe),Je="",we=0;we<Fe.length;we+=2)Je+=String.fromCharCode(Fe[we]+256*Fe[we+1]);return Je}function me(Se,he,pe){if(Se%1!=0||Se<0)throw new RangeError("offset is not uint");if(Se+he>pe)throw new RangeError("Trying to access beyond buffer length")}function Ee(Se,he,pe,Fe,Je,we){if(!p.isBuffer(Se))throw new TypeError('"buffer" argument must be a Buffer instance');if(he>Je||he<we)throw new RangeError('"value" argument is out of bounds');if(pe+Fe>Se.length)throw new RangeError("Index out of range")}function se(Se,he,pe,Fe){he<0&&(he=65535+he+1);for(var Je=0,we=Math.min(Se.length-pe,2);Je<we;++Je)Se[pe+Je]=(he&255<<8*(Fe?Je:1-Je))>>>8*(Fe?Je:1-Je)}function ze(Se,he,pe,Fe){he<0&&(he=4294967295+he+1);for(var Je=0,we=Math.min(Se.length-pe,4);Je<we;++Je)Se[pe+Je]=he>>>8*(Fe?Je:3-Je)&255}function Ge(Se,he,pe,Fe,Je,we){if(pe+Fe>Se.length)throw new RangeError("Index out of range");if(pe<0)throw new RangeError("Index out of range")}function xe(Se,he,pe,Fe,Je){return Je||Ge(Se,0,pe,4),x.write(Se,he,pe,Fe,23,4),pe+4}function qe(Se,he,pe,Fe,Je){return Je||Ge(Se,0,pe,8),x.write(Se,he,pe,Fe,52,8),pe+8}p.prototype.slice=function(he,pe){var Fe,Je=this.length;if((he=~~he)<0?(he+=Je)<0&&(he=0):he>Je&&(he=Je),(pe=void 0===pe?Je:~~pe)<0?(pe+=Je)<0&&(pe=0):pe>Je&&(pe=Je),pe<he&&(pe=he),p.TYPED_ARRAY_SUPPORT)(Fe=this.subarray(he,pe)).__proto__=p.prototype;else{var we=pe-he;Fe=new p(we,void 0);for(var De=0;De<we;++De)Fe[De]=this[De+he]}return Fe},p.prototype.readUIntLE=function(he,pe,Fe){he|=0,pe|=0,Fe||me(he,pe,this.length);for(var Je=this[he],we=1,De=0;++De<pe&&(we*=256);)Je+=this[he+De]*we;return Je},p.prototype.readUIntBE=function(he,pe,Fe){he|=0,pe|=0,Fe||me(he,pe,this.length);for(var Je=this[he+--pe],we=1;pe>0&&(we*=256);)Je+=this[he+--pe]*we;return Je},p.prototype.readUInt8=function(he,pe){return pe||me(he,1,this.length),this[he]},p.prototype.readUInt16LE=function(he,pe){return pe||me(he,2,this.length),this[he]|this[he+1]<<8},p.prototype.readUInt16BE=function(he,pe){return pe||me(he,2,this.length),this[he]<<8|this[he+1]},p.prototype.readUInt32LE=function(he,pe){return pe||me(he,4,this.length),(this[he]|this[he+1]<<8|this[he+2]<<16)+16777216*this[he+3]},p.prototype.readUInt32BE=function(he,pe){return pe||me(he,4,this.length),16777216*this[he]+(this[he+1]<<16|this[he+2]<<8|this[he+3])},p.prototype.readIntLE=function(he,pe,Fe){he|=0,pe|=0,Fe||me(he,pe,this.length);for(var Je=this[he],we=1,De=0;++De<pe&&(we*=256);)Je+=this[he+De]*we;return Je>=(we*=128)&&(Je-=Math.pow(2,8*pe)),Je},p.prototype.readIntBE=function(he,pe,Fe){he|=0,pe|=0,Fe||me(he,pe,this.length);for(var Je=pe,we=1,De=this[he+--Je];Je>0&&(we*=256);)De+=this[he+--Je]*we;return De>=(we*=128)&&(De-=Math.pow(2,8*pe)),De},p.prototype.readInt8=function(he,pe){return pe||me(he,1,this.length),128&this[he]?-1*(255-this[he]+1):this[he]},p.prototype.readInt16LE=function(he,pe){pe||me(he,2,this.length);var Fe=this[he]|this[he+1]<<8;return 32768&Fe?4294901760|Fe:Fe},p.prototype.readInt16BE=function(he,pe){pe||me(he,2,this.length);var Fe=this[he+1]|this[he]<<8;return 32768&Fe?4294901760|Fe:Fe},p.prototype.readInt32LE=function(he,pe){return pe||me(he,4,this.length),this[he]|this[he+1]<<8|this[he+2]<<16|this[he+3]<<24},p.prototype.readInt32BE=function(he,pe){return pe||me(he,4,this.length),this[he]<<24|this[he+1]<<16|this[he+2]<<8|this[he+3]},p.prototype.readFloatLE=function(he,pe){return pe||me(he,4,this.length),x.read(this,he,!0,23,4)},p.prototype.readFloatBE=function(he,pe){return pe||me(he,4,this.length),x.read(this,he,!1,23,4)},p.prototype.readDoubleLE=function(he,pe){return pe||me(he,8,this.length),x.read(this,he,!0,52,8)},p.prototype.readDoubleBE=function(he,pe){return pe||me(he,8,this.length),x.read(this,he,!1,52,8)},p.prototype.writeUIntLE=function(he,pe,Fe,Je){he=+he,pe|=0,Fe|=0,Je||Ee(this,he,pe,Fe,Math.pow(2,8*Fe)-1,0);var we=1,De=0;for(this[pe]=255&he;++De<Fe&&(we*=256);)this[pe+De]=he/we&255;return pe+Fe},p.prototype.writeUIntBE=function(he,pe,Fe,Je){he=+he,pe|=0,Fe|=0,Je||Ee(this,he,pe,Fe,Math.pow(2,8*Fe)-1,0);var we=Fe-1,De=1;for(this[pe+we]=255&he;--we>=0&&(De*=256);)this[pe+we]=he/De&255;return pe+Fe},p.prototype.writeUInt8=function(he,pe,Fe){return he=+he,pe|=0,Fe||Ee(this,he,pe,1,255,0),p.TYPED_ARRAY_SUPPORT||(he=Math.floor(he)),this[pe]=255&he,pe+1},p.prototype.writeUInt16LE=function(he,pe,Fe){return he=+he,pe|=0,Fe||Ee(this,he,pe,2,65535,0),p.TYPED_ARRAY_SUPPORT?(this[pe]=255&he,this[pe+1]=he>>>8):se(this,he,pe,!0),pe+2},p.prototype.writeUInt16BE=function(he,pe,Fe){return he=+he,pe|=0,Fe||Ee(this,he,pe,2,65535,0),p.TYPED_ARRAY_SUPPORT?(this[pe]=he>>>8,this[pe+1]=255&he):se(this,he,pe,!1),pe+2},p.prototype.writeUInt32LE=function(he,pe,Fe){return he=+he,pe|=0,Fe||Ee(this,he,pe,4,4294967295,0),p.TYPED_ARRAY_SUPPORT?(this[pe+3]=he>>>24,this[pe+2]=he>>>16,this[pe+1]=he>>>8,this[pe]=255&he):ze(this,he,pe,!0),pe+4},p.prototype.writeUInt32BE=function(he,pe,Fe){return he=+he,pe|=0,Fe||Ee(this,he,pe,4,4294967295,0),p.TYPED_ARRAY_SUPPORT?(this[pe]=he>>>24,this[pe+1]=he>>>16,this[pe+2]=he>>>8,this[pe+3]=255&he):ze(this,he,pe,!1),pe+4},p.prototype.writeIntLE=function(he,pe,Fe,Je){if(he=+he,pe|=0,!Je){var we=Math.pow(2,8*Fe-1);Ee(this,he,pe,Fe,we-1,-we)}var De=0,ut=1,le=0;for(this[pe]=255&he;++De<Fe&&(ut*=256);)he<0&&0===le&&0!==this[pe+De-1]&&(le=1),this[pe+De]=(he/ut>>0)-le&255;return pe+Fe},p.prototype.writeIntBE=function(he,pe,Fe,Je){if(he=+he,pe|=0,!Je){var we=Math.pow(2,8*Fe-1);Ee(this,he,pe,Fe,we-1,-we)}var De=Fe-1,ut=1,le=0;for(this[pe+De]=255&he;--De>=0&&(ut*=256);)he<0&&0===le&&0!==this[pe+De+1]&&(le=1),this[pe+De]=(he/ut>>0)-le&255;return pe+Fe},p.prototype.writeInt8=function(he,pe,Fe){return he=+he,pe|=0,Fe||Ee(this,he,pe,1,127,-128),p.TYPED_ARRAY_SUPPORT||(he=Math.floor(he)),he<0&&(he=255+he+1),this[pe]=255&he,pe+1},p.prototype.writeInt16LE=function(he,pe,Fe){return he=+he,pe|=0,Fe||Ee(this,he,pe,2,32767,-32768),p.TYPED_ARRAY_SUPPORT?(this[pe]=255&he,this[pe+1]=he>>>8):se(this,he,pe,!0),pe+2},p.prototype.writeInt16BE=function(he,pe,Fe){return he=+he,pe|=0,Fe||Ee(this,he,pe,2,32767,-32768),p.TYPED_ARRAY_SUPPORT?(this[pe]=he>>>8,this[pe+1]=255&he):se(this,he,pe,!1),pe+2},p.prototype.writeInt32LE=function(he,pe,Fe){return he=+he,pe|=0,Fe||Ee(this,he,pe,4,2147483647,-2147483648),p.TYPED_ARRAY_SUPPORT?(this[pe]=255&he,this[pe+1]=he>>>8,this[pe+2]=he>>>16,this[pe+3]=he>>>24):ze(this,he,pe,!0),pe+4},p.prototype.writeInt32BE=function(he,pe,Fe){return he=+he,pe|=0,Fe||Ee(this,he,pe,4,2147483647,-2147483648),he<0&&(he=4294967295+he+1),p.TYPED_ARRAY_SUPPORT?(this[pe]=he>>>24,this[pe+1]=he>>>16,this[pe+2]=he>>>8,this[pe+3]=255&he):ze(this,he,pe,!1),pe+4},p.prototype.writeFloatLE=function(he,pe,Fe){return xe(this,he,pe,!0,Fe)},p.prototype.writeFloatBE=function(he,pe,Fe){return xe(this,he,pe,!1,Fe)},p.prototype.writeDoubleLE=function(he,pe,Fe){return qe(this,he,pe,!0,Fe)},p.prototype.writeDoubleBE=function(he,pe,Fe){return qe(this,he,pe,!1,Fe)},p.prototype.copy=function(he,pe,Fe,Je){if(Fe||(Fe=0),Je||0===Je||(Je=this.length),pe>=he.length&&(pe=he.length),pe||(pe=0),Je>0&&Je<Fe&&(Je=Fe),Je===Fe||0===he.length||0===this.length)return 0;if(pe<0)throw new RangeError("targetStart out of bounds");if(Fe<0||Fe>=this.length)throw new RangeError("sourceStart out of bounds");if(Je<0)throw new RangeError("sourceEnd out of bounds");Je>this.length&&(Je=this.length),he.length-pe<Je-Fe&&(Je=he.length-pe+Fe);var we,De=Je-Fe;if(this===he&&Fe<pe&&pe<Je)for(we=De-1;we>=0;--we)he[we+pe]=this[we+Fe];else if(De<1e3||!p.TYPED_ARRAY_SUPPORT)for(we=0;we<De;++we)he[we+pe]=this[we+Fe];else Uint8Array.prototype.set.call(he,this.subarray(Fe,Fe+De),pe);return De},p.prototype.fill=function(he,pe,Fe,Je){if("string"==typeof he){if("string"==typeof pe?(Je=pe,pe=0,Fe=this.length):"string"==typeof Fe&&(Je=Fe,Fe=this.length),1===he.length){var we=he.charCodeAt(0);we<256&&(he=we)}if(void 0!==Je&&"string"!=typeof Je)throw new TypeError("encoding must be a string");if("string"==typeof Je&&!p.isEncoding(Je))throw new TypeError("Unknown encoding: "+Je)}else"number"==typeof he&&(he&=255);if(pe<0||this.length<pe||this.length<Fe)throw new RangeError("Out of range index");if(Fe<=pe)return this;var De;if(pe>>>=0,Fe=void 0===Fe?this.length:Fe>>>0,he||(he=0),"number"==typeof he)for(De=pe;De<Fe;++De)this[De]=he;else{var ut=p.isBuffer(he)?he:He(new p(he,Je).toString()),le=ut.length;for(De=0;De<Fe-pe;++De)this[De+pe]=ut[De%le]}return this};var Xe=/[^+\/0-9A-Za-z-_]/g;function lt(Se){return Se<16?"0"+Se.toString(16):Se.toString(16)}function He(Se,he){var pe;he=he||1/0;for(var Fe=Se.length,Je=null,we=[],De=0;De<Fe;++De){if((pe=Se.charCodeAt(De))>55295&&pe<57344){if(!Je){if(pe>56319){(he-=3)>-1&&we.push(239,191,189);continue}if(De+1===Fe){(he-=3)>-1&&we.push(239,191,189);continue}Je=pe;continue}if(pe<56320){(he-=3)>-1&&we.push(239,191,189),Je=pe;continue}pe=65536+(Je-55296<<10|pe-56320)}else Je&&(he-=3)>-1&&we.push(239,191,189);if(Je=null,pe<128){if((he-=1)<0)break;we.push(pe)}else if(pe<2048){if((he-=2)<0)break;we.push(pe>>6|192,63&pe|128)}else if(pe<65536){if((he-=3)<0)break;we.push(pe>>12|224,pe>>6&63|128,63&pe|128)}else{if(!(pe<1114112))throw new Error("Invalid code point");if((he-=4)<0)break;we.push(pe>>18|240,pe>>12&63|128,pe>>6&63|128,63&pe|128)}}return we}function Ye(Se){return y.toByteArray(function(pe){if((pe=(Je=pe,Je.trim?Je.trim():Je.replace(/^\s+|\s+$/g,"")).replace(Xe,"")).length<2)return"";for(var Je;pe.length%4!=0;)pe+="=";return pe}(Se))}function ht(Se,he,pe,Fe){for(var Je=0;Je<Fe&&!(Je+pe>=he.length||Je>=Se.length);++Je)he[Je+pe]=Se[Je];return Je}}).call(this,e(29))},function(K,u){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch{"object"==typeof window&&(e=window)}K.exports=e},function(K,u,e){"use strict";u.byteLength=function(V){var N=p(V),H=N[1];return 3*(N[0]+H)/4-H},u.toByteArray=function(V){var N,U,Le,H=p(V),Q=H[0],Z=H[1],ue=new x(3*(Q+(Le=Z))/4-Le),G=0,X=Z>0?Q-4:Q;for(U=0;U<X;U+=4)N=y[V.charCodeAt(U)]<<18|y[V.charCodeAt(U+1)]<<12|y[V.charCodeAt(U+2)]<<6|y[V.charCodeAt(U+3)],ue[G++]=N>>16&255,ue[G++]=N>>8&255,ue[G++]=255&N;return 2===Z&&(N=y[V.charCodeAt(U)]<<2|y[V.charCodeAt(U+1)]>>4,ue[G++]=255&N),1===Z&&(N=y[V.charCodeAt(U)]<<10|y[V.charCodeAt(U+1)]<<4|y[V.charCodeAt(U+2)]>>2,ue[G++]=N>>8&255,ue[G++]=255&N),ue},u.fromByteArray=function(V){for(var N,U=V.length,H=U%3,Q=[],Z=16383,ue=0,G=U-H;ue<G;ue+=Z)Q.push(z(V,ue,ue+Z>G?G:ue+Z));return 1===H?Q.push(n[(N=V[U-1])>>2]+n[N<<4&63]+"=="):2===H&&Q.push(n[(N=(V[U-2]<<8)+V[U-1])>>10]+n[N>>4&63]+n[N<<2&63]+"="),Q.join("")};for(var n=[],y=[],x="undefined"!=typeof Uint8Array?Uint8Array:Array,$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,d=$.length;c<d;++c)n[c]=$[c],y[$.charCodeAt(c)]=c;function p(S){var V=S.length;if(V%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var N=S.indexOf("=");return-1===N&&(N=V),[N,N===V?0:4-N%4]}function z(S,V,N){for(var H,Q=[],Z=V;Z<N;Z+=3)Q.push(n[(H=(S[Z]<<16&16711680)+(S[Z+1]<<8&65280)+(255&S[Z+2]))>>18&63]+n[H>>12&63]+n[H>>6&63]+n[63&H]);return Q.join("")}y["-".charCodeAt(0)]=62,y["_".charCodeAt(0)]=63},function(K,u){u.read=function(e,n,y,x,$){var c,d,p=8*$-x-1,z=(1<<p)-1,S=z>>1,V=-7,N=y?$-1:0,U=y?-1:1,H=e[n+N];for(N+=U,c=H&(1<<-V)-1,H>>=-V,V+=p;V>0;c=256*c+e[n+N],N+=U,V-=8);for(d=c&(1<<-V)-1,c>>=-V,V+=x;V>0;d=256*d+e[n+N],N+=U,V-=8);if(0===c)c=1-S;else{if(c===z)return d?NaN:1/0*(H?-1:1);d+=Math.pow(2,x),c-=S}return(H?-1:1)*d*Math.pow(2,c-x)},u.write=function(e,n,y,x,$,c){var d,p,z,S=8*c-$-1,V=(1<<S)-1,N=V>>1,U=23===$?Math.pow(2,-24)-Math.pow(2,-77):0,H=x?0:c-1,Q=x?1:-1,Z=n<0||0===n&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(p=isNaN(n)?1:0,d=V):(d=Math.floor(Math.log(n)/Math.LN2),n*(z=Math.pow(2,-d))<1&&(d--,z*=2),(n+=d+N>=1?U/z:U*Math.pow(2,1-N))*z>=2&&(d++,z/=2),d+N>=V?(p=0,d=V):d+N>=1?(p=(n*z-1)*Math.pow(2,$),d+=N):(p=n*Math.pow(2,N-1)*Math.pow(2,$),d=0));$>=8;e[y+H]=255&p,H+=Q,p/=256,$-=8);for(d=d<<$|p,S+=$;S>0;e[y+H]=255&d,H+=Q,d/=256,S-=8);e[y+H-Q]|=128*Z}},function(K,u){var e={}.toString;K.exports=Array.isArray||function(n){return"[object Array]"==e.call(n)}},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=function(x){var $=x.jws,c=x.KeyUtil,d=x.X509,p=x.crypto,z=x.hextob64u,S=x.b64tohex,V=x.AllowedSigningAlgs;return function(){function N(){!function(H,Q){if(!(H instanceof Q))throw new TypeError("Cannot call a class as a function")}(this,N)}return N.parseJwt=function(H){n.Log.debug("JoseUtil.parseJwt");try{var Q=$.JWS.parse(H);return{header:Q.headerObj,payload:Q.payloadObj}}catch(Z){n.Log.error(Z)}},N.validateJwt=function(H,Q,Z,ue,G,X,ee){n.Log.debug("JoseUtil.validateJwt");try{if("RSA"===Q.kty)if(Q.e&&Q.n)Q=c.getKey(Q);else{if(!Q.x5c||!Q.x5c.length)return n.Log.error("JoseUtil.validateJwt: RSA key missing key material",Q),Promise.reject(new Error("RSA key missing key material"));var ve=S(Q.x5c[0]);Q=d.getPublicKeyFromCertHex(ve)}else{if("EC"!==Q.kty)return n.Log.error("JoseUtil.validateJwt: Unsupported key type",Q&&Q.kty),Promise.reject(new Error(Q.kty));if(!(Q.crv&&Q.x&&Q.y))return n.Log.error("JoseUtil.validateJwt: EC key missing key material",Q),Promise.reject(new Error("EC key missing key material"));Q=c.getKey(Q)}return N._validateJwt(H,Q,Z,ue,G,X,ee)}catch(Oe){return n.Log.error(Oe&&Oe.message||Oe),Promise.reject("JWT validation failed")}},N.validateJwtAttributes=function(H,Q,Z,ue,G,X){ue||(ue=0),G||(G=parseInt(Date.now()/1e3));var ee=N.parseJwt(H).payload;if(!ee.iss)return n.Log.error("JoseUtil._validateJwt: issuer was not provided"),Promise.reject(new Error("issuer was not provided"));if(ee.iss!==Q)return n.Log.error("JoseUtil._validateJwt: Invalid issuer in token",ee.iss),Promise.reject(new Error("Invalid issuer in token: "+ee.iss));if(!ee.aud)return n.Log.error("JoseUtil._validateJwt: aud was not provided"),Promise.reject(new Error("aud was not provided"));if(!(ee.aud===Z||Array.isArray(ee.aud)&&ee.aud.indexOf(Z)>=0))return n.Log.error("JoseUtil._validateJwt: Invalid audience in token",ee.aud),Promise.reject(new Error("Invalid audience in token: "+ee.aud));if(ee.azp&&ee.azp!==Z)return n.Log.error("JoseUtil._validateJwt: Invalid azp in token",ee.azp),Promise.reject(new Error("Invalid azp in token: "+ee.azp));if(!X){var ve=G+ue,Oe=G-ue;if(!ee.iat)return n.Log.error("JoseUtil._validateJwt: iat was not provided"),Promise.reject(new Error("iat was not provided"));if(ve<ee.iat)return n.Log.error("JoseUtil._validateJwt: iat is in the future",ee.iat),Promise.reject(new Error("iat is in the future: "+ee.iat));if(ee.nbf&&ve<ee.nbf)return n.Log.error("JoseUtil._validateJwt: nbf is in the future",ee.nbf),Promise.reject(new Error("nbf is in the future: "+ee.nbf));if(!ee.exp)return n.Log.error("JoseUtil._validateJwt: exp was not provided"),Promise.reject(new Error("exp was not provided"));if(ee.exp<Oe)return n.Log.error("JoseUtil._validateJwt: exp is in the past",ee.exp),Promise.reject(new Error("exp is in the past:"+ee.exp))}return Promise.resolve(ee)},N._validateJwt=function(H,Q,Z,ue,G,X,ee){return N.validateJwtAttributes(H,Z,ue,G,X,ee).then(function(ve){try{return $.JWS.verify(H,Q,V)?ve:(n.Log.error("JoseUtil._validateJwt: signature validation failed"),Promise.reject(new Error("signature validation failed")))}catch(Oe){return n.Log.error(Oe&&Oe.message||Oe),Promise.reject(new Error("signature validation failed"))}})},N.hashString=function(H,Q){try{return p.Util.hashString(H,Q)}catch(Z){n.Log.error(Z)}},N.hexToBase64Url=function(H){try{return z(H)}catch(Q){n.Log.error(Q)}},N}()};var n=e(0);K.exports=u.default},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.SigninResponse=void 0;var n=function(){function $(c,d){for(var p=0;p<d.length;p++){var z=d[p];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(c,z.key,z)}}return function(c,d,p){return d&&$(c.prototype,d),p&&$(c,p),c}}(),y=e(3);function x($,c){if(!($ instanceof c))throw new TypeError("Cannot call a class as a function")}u.SigninResponse=function(){function $(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#";x(this,$);var p=y.UrlUtility.parseUrlFragment(c,d);this.error=p.error,this.error_description=p.error_description,this.error_uri=p.error_uri,this.code=p.code,this.state=p.state,this.id_token=p.id_token,this.session_state=p.session_state,this.access_token=p.access_token,this.token_type=p.token_type,this.scope=p.scope,this.profile=void 0,this.expires_in=p.expires_in}return n($,[{key:"expires_in",get:function(){if(this.expires_at){var d=parseInt(Date.now()/1e3);return this.expires_at-d}},set:function(d){var p=parseInt(d);if("number"==typeof p&&p>0){var z=parseInt(Date.now()/1e3);this.expires_at=z+p}}},{key:"expired",get:function(){var d=this.expires_in;if(void 0!==d)return d<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}},{key:"isOpenIdConnect",get:function(){return this.scopes.indexOf("openid")>=0||!!this.id_token}}]),$}()},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.SignoutRequest=void 0;var n=e(0),y=e(3),x=e(9);u.SignoutRequest=function $(c){var d=c.url,p=c.id_token_hint,z=c.post_logout_redirect_uri,S=c.data,V=c.extraQueryParams,N=c.request_type;if(function(Q,Z){if(!(Q instanceof Z))throw new TypeError("Cannot call a class as a function")}(this,$),!d)throw n.Log.error("SignoutRequest.ctor: No url passed"),new Error("url");for(var U in p&&(d=y.UrlUtility.addQueryParam(d,"id_token_hint",p)),z&&(d=y.UrlUtility.addQueryParam(d,"post_logout_redirect_uri",z),S&&(this.state=new x.State({data:S,request_type:N}),d=y.UrlUtility.addQueryParam(d,"state",this.state.id))),V)d=y.UrlUtility.addQueryParam(d,U,V[U]);this.url=d}},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.SignoutResponse=void 0;var n=e(3);u.SignoutResponse=function y(x){!function(d,p){if(!(d instanceof p))throw new TypeError("Cannot call a class as a function")}(this,y);var $=n.UrlUtility.parseUrlFragment(x,"?");this.error=$.error,this.error_description=$.error_description,this.error_uri=$.error_uri,this.state=$.state}},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.InMemoryWebStorage=void 0;var n=function(){function x($,c){for(var d=0;d<c.length;d++){var p=c[d];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty($,p.key,p)}}return function($,c,d){return c&&x($.prototype,c),d&&x($,d),$}}(),y=e(0);u.InMemoryWebStorage=function(){function x(){(function(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")})(this,x),this._data={}}return x.prototype.getItem=function(c){return y.Log.debug("InMemoryWebStorage.getItem",c),this._data[c]},x.prototype.setItem=function(c,d){y.Log.debug("InMemoryWebStorage.setItem",c),this._data[c]=d},x.prototype.removeItem=function(c){y.Log.debug("InMemoryWebStorage.removeItem",c),delete this._data[c]},x.prototype.key=function(c){return Object.getOwnPropertyNames(this._data)[c]},n(x,[{key:"length",get:function(){return Object.getOwnPropertyNames(this._data).length}}]),x}()},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.UserManager=void 0;var n=function(){function Z(ue,G){for(var X=0;X<G.length;X++){var ee=G[X];ee.enumerable=ee.enumerable||!1,ee.configurable=!0,"value"in ee&&(ee.writable=!0),Object.defineProperty(ue,ee.key,ee)}}return function(ue,G,X){return G&&Z(ue.prototype,G),X&&Z(ue,X),ue}}(),y=e(0),x=e(10),$=e(39),c=e(15),d=e(45),p=e(47),z=e(18),S=e(8),V=e(20),N=e(11),U=e(4);function H(Z,ue){if(!(Z instanceof ue))throw new TypeError("Cannot call a class as a function")}function Q(Z,ue){if(!Z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!ue||"object"!=typeof ue&&"function"!=typeof ue?Z:ue}u.UserManager=function(Z){function ue(){var G=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},X=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.SilentRenewService,ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:z.SessionMonitor,ve=arguments.length>3&&void 0!==arguments[3]?arguments[3]:V.TokenRevocationClient,Oe=arguments.length>4&&void 0!==arguments[4]?arguments[4]:N.TokenClient,Le=arguments.length>5&&void 0!==arguments[5]?arguments[5]:U.JoseUtil;H(this,ue),G instanceof $.UserManagerSettings||(G=new $.UserManagerSettings(G));var be=Q(this,Z.call(this,G));return be._events=new d.UserManagerEvents(G),be._silentRenewService=new X(be),be.settings.automaticSilentRenew&&(y.Log.debug("UserManager.ctor: automaticSilentRenew is configured, setting up silent renew"),be.startSilentRenew()),be.settings.monitorSession&&(y.Log.debug("UserManager.ctor: monitorSession is configured, setting up session monitor"),be._sessionMonitor=new ee(be)),be._tokenRevocationClient=new ve(be._settings),be._tokenClient=new Oe(be._settings),be._joseUtil=Le,be}return function(X,ee){if("function"!=typeof ee&&null!==ee)throw new TypeError("Super expression must either be null or a function, not "+typeof ee);X.prototype=Object.create(ee&&ee.prototype,{constructor:{value:X,enumerable:!1,writable:!0,configurable:!0}}),ee&&(Object.setPrototypeOf?Object.setPrototypeOf(X,ee):X.__proto__=ee)}(ue,Z),ue.prototype.getUser=function(){var X=this;return this._loadUser().then(function(ee){return ee?(y.Log.info("UserManager.getUser: user loaded"),X._events.load(ee,!1),ee):(y.Log.info("UserManager.getUser: user not found in storage"),null)})},ue.prototype.removeUser=function(){var X=this;return this.storeUser(null).then(function(){y.Log.info("UserManager.removeUser: user removed from storage"),X._events.unload()})},ue.prototype.signinRedirect=function(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(X=Object.assign({},X)).request_type="si:r",this._signinStart(X,this._redirectNavigator,{useReplaceToNavigate:X.useReplaceToNavigate}).then(function(){y.Log.info("UserManager.signinRedirect: successful")})},ue.prototype.signinRedirectCallback=function(X){return this._signinEnd(X||this._redirectNavigator.url).then(function(ee){return ee.profile&&ee.profile.sub?y.Log.info("UserManager.signinRedirectCallback: successful, signed in sub: ",ee.profile.sub):y.Log.info("UserManager.signinRedirectCallback: no sub"),ee})},ue.prototype.signinPopup=function(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(X=Object.assign({},X)).request_type="si:p";var ee=X.redirect_uri||this.settings.popup_redirect_uri||this.settings.redirect_uri;return ee?(X.redirect_uri=ee,X.display="popup",this._signin(X,this._popupNavigator,{startUrl:ee,popupWindowFeatures:X.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:X.popupWindowTarget||this.settings.popupWindowTarget}).then(function(ve){return ve&&(ve.profile&&ve.profile.sub?y.Log.info("UserManager.signinPopup: signinPopup successful, signed in sub: ",ve.profile.sub):y.Log.info("UserManager.signinPopup: no sub")),ve})):(y.Log.error("UserManager.signinPopup: No popup_redirect_uri or redirect_uri configured"),Promise.reject(new Error("No popup_redirect_uri or redirect_uri configured")))},ue.prototype.signinPopupCallback=function(X){return this._signinCallback(X,this._popupNavigator).then(function(ee){return ee&&(ee.profile&&ee.profile.sub?y.Log.info("UserManager.signinPopupCallback: successful, signed in sub: ",ee.profile.sub):y.Log.info("UserManager.signinPopupCallback: no sub")),ee}).catch(function(ee){y.Log.error(ee.message)})},ue.prototype.signinSilent=function(){var X=this,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ee=Object.assign({},ee),this._loadUser().then(function(ve){return ve&&ve.refresh_token?(ee.refresh_token=ve.refresh_token,X._useRefreshToken(ee)):(ee.request_type="si:s",ee.id_token_hint=ee.id_token_hint||X.settings.includeIdTokenInSilentRenew&&ve&&ve.id_token,ve&&X._settings.validateSubOnSilentRenew&&(y.Log.debug("UserManager.signinSilent, subject prior to silent renew: ",ve.profile.sub),ee.current_sub=ve.profile.sub),X._signinSilentIframe(ee))})},ue.prototype._useRefreshToken=function(){var X=this;return this._tokenClient.exchangeRefreshToken(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).then(function(ve){return ve?ve.access_token?X._loadUser().then(function(Oe){if(Oe){var Le=Promise.resolve();return ve.id_token&&(Le=X._validateIdTokenFromTokenRefreshToken(Oe.profile,ve.id_token)),Le.then(function(){return y.Log.debug("UserManager._useRefreshToken: refresh token response success"),Oe.id_token=ve.id_token||Oe.id_token,Oe.access_token=ve.access_token,Oe.refresh_token=ve.refresh_token||Oe.refresh_token,Oe.expires_in=ve.expires_in,X.storeUser(Oe).then(function(){return X._events.load(Oe),Oe})})}return null}):(y.Log.error("UserManager._useRefreshToken: No access token returned from token endpoint"),Promise.reject("No access token returned from token endpoint")):(y.Log.error("UserManager._useRefreshToken: No response returned from token endpoint"),Promise.reject("No response returned from token endpoint"))})},ue.prototype._validateIdTokenFromTokenRefreshToken=function(X,ee){var ve=this;return this._metadataService.getIssuer().then(function(Oe){return ve.settings.getEpochTime().then(function(Le){return ve._joseUtil.validateJwtAttributes(ee,Oe,ve._settings.client_id,ve._settings.clockSkew,Le).then(function(be){return be?be.sub!==X.sub?(y.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: sub in id_token does not match current sub"),Promise.reject(new Error("sub in id_token does not match current sub"))):be.auth_time&&be.auth_time!==X.auth_time?(y.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: auth_time in id_token does not match original auth_time"),Promise.reject(new Error("auth_time in id_token does not match original auth_time"))):be.azp&&be.azp!==X.azp?(y.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp in id_token does not match original azp"),Promise.reject(new Error("azp in id_token does not match original azp"))):!be.azp&&X.azp?(y.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp not in id_token, but present in original id_token"),Promise.reject(new Error("azp not in id_token, but present in original id_token"))):void 0:(y.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: Failed to validate id_token"),Promise.reject(new Error("Failed to validate id_token")))})})})},ue.prototype._signinSilentIframe=function(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ee=X.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return ee?(X.redirect_uri=ee,X.prompt=X.prompt||"none",this._signin(X,this._iframeNavigator,{startUrl:ee,silentRequestTimeout:X.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(ve){return ve&&(ve.profile&&ve.profile.sub?y.Log.info("UserManager.signinSilent: successful, signed in sub: ",ve.profile.sub):y.Log.info("UserManager.signinSilent: no sub")),ve})):(y.Log.error("UserManager.signinSilent: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},ue.prototype.signinSilentCallback=function(X){return this._signinCallback(X,this._iframeNavigator).then(function(ee){return ee&&(ee.profile&&ee.profile.sub?y.Log.info("UserManager.signinSilentCallback: successful, signed in sub: ",ee.profile.sub):y.Log.info("UserManager.signinSilentCallback: no sub")),ee})},ue.prototype.signinCallback=function(X){var ee=this;return this.readSigninResponseState(X).then(function(ve){var Oe=ve.state;return"si:r"===Oe.request_type?ee.signinRedirectCallback(X):"si:p"===Oe.request_type?ee.signinPopupCallback(X):"si:s"===Oe.request_type?ee.signinSilentCallback(X):Promise.reject(new Error("invalid response_type in state"))})},ue.prototype.signoutCallback=function(X,ee){var ve=this;return this.readSignoutResponseState(X).then(function(Oe){var Le=Oe.state,be=Oe.response;return Le?"so:r"===Le.request_type?ve.signoutRedirectCallback(X):"so:p"===Le.request_type?ve.signoutPopupCallback(X,ee):Promise.reject(new Error("invalid response_type in state")):be})},ue.prototype.querySessionStatus=function(){var X=this,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(ee=Object.assign({},ee)).request_type="si:s";var ve=ee.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return ve?(ee.redirect_uri=ve,ee.prompt="none",ee.response_type=ee.response_type||this.settings.query_status_response_type,ee.scope=ee.scope||"openid",ee.skipUserInfo=!0,this._signinStart(ee,this._iframeNavigator,{startUrl:ve,silentRequestTimeout:ee.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(Oe){return X.processSigninResponse(Oe.url).then(function(Le){if(y.Log.debug("UserManager.querySessionStatus: got signin response"),Le.session_state&&Le.profile.sub)return y.Log.info("UserManager.querySessionStatus: querySessionStatus success for sub: ",Le.profile.sub),{session_state:Le.session_state,sub:Le.profile.sub,sid:Le.profile.sid};y.Log.info("querySessionStatus successful, user not authenticated")}).catch(function(Le){if(Le.session_state&&X.settings.monitorAnonymousSession&&("login_required"==Le.message||"consent_required"==Le.message||"interaction_required"==Le.message||"account_selection_required"==Le.message))return y.Log.info("UserManager.querySessionStatus: querySessionStatus success for anonymous user"),{session_state:Le.session_state};throw Le})})):(y.Log.error("UserManager.querySessionStatus: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},ue.prototype._signin=function(X,ee){var ve=this;return this._signinStart(X,ee,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).then(function(Le){return ve._signinEnd(Le.url,X)})},ue.prototype._signinStart=function(X,ee){var ve=this,Oe=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ee.prepare(Oe).then(function(Le){return y.Log.debug("UserManager._signinStart: got navigator window handle"),ve.createSigninRequest(X).then(function(be){return y.Log.debug("UserManager._signinStart: got signin request"),Oe.url=be.url,Oe.id=be.state.id,Le.navigate(Oe)}).catch(function(be){throw Le.close&&(y.Log.debug("UserManager._signinStart: Error after preparing navigator, closing navigator window"),Le.close()),be})})},ue.prototype._signinEnd=function(X){var ee=this,ve=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.processSigninResponse(X).then(function(Oe){y.Log.debug("UserManager._signinEnd: got signin response");var Le=new c.User(Oe);if(ve.current_sub){if(ve.current_sub!==Le.profile.sub)return y.Log.debug("UserManager._signinEnd: current user does not match user returned from signin. sub from signin: ",Le.profile.sub),Promise.reject(new Error("login_required"));y.Log.debug("UserManager._signinEnd: current user matches user returned from signin")}return ee.storeUser(Le).then(function(){return y.Log.debug("UserManager._signinEnd: user stored"),ee._events.load(Le),Le})})},ue.prototype._signinCallback=function(X,ee){y.Log.debug("UserManager._signinCallback");var ve="query"===this._settings.response_mode||!this._settings.response_mode&&S.SigninRequest.isCode(this._settings.response_type)?"?":"#";return ee.callback(X,void 0,ve)},ue.prototype.signoutRedirect=function(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(X=Object.assign({},X)).request_type="so:r";var ee=X.post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return ee&&(X.post_logout_redirect_uri=ee),this._signoutStart(X,this._redirectNavigator,{useReplaceToNavigate:X.useReplaceToNavigate}).then(function(){y.Log.info("UserManager.signoutRedirect: successful")})},ue.prototype.signoutRedirectCallback=function(X){return this._signoutEnd(X||this._redirectNavigator.url).then(function(ee){return y.Log.info("UserManager.signoutRedirectCallback: successful"),ee})},ue.prototype.signoutPopup=function(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(X=Object.assign({},X)).request_type="so:p";var ee=X.post_logout_redirect_uri||this.settings.popup_post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return X.post_logout_redirect_uri=ee,X.display="popup",X.post_logout_redirect_uri&&(X.state=X.state||{}),this._signout(X,this._popupNavigator,{startUrl:ee,popupWindowFeatures:X.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:X.popupWindowTarget||this.settings.popupWindowTarget}).then(function(){y.Log.info("UserManager.signoutPopup: successful")})},ue.prototype.signoutPopupCallback=function(X,ee){return void 0===ee&&"boolean"==typeof X&&(ee=X,X=null),this._popupNavigator.callback(X,ee,"?").then(function(){y.Log.info("UserManager.signoutPopupCallback: successful")})},ue.prototype._signout=function(X,ee){var ve=this;return this._signoutStart(X,ee,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).then(function(Le){return ve._signoutEnd(Le.url)})},ue.prototype._signoutStart=function(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ee=this,Oe=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return arguments[1].prepare(Oe).then(function(Le){return y.Log.debug("UserManager._signoutStart: got navigator window handle"),ee._loadUser().then(function(be){return y.Log.debug("UserManager._signoutStart: loaded current user from storage"),(ee._settings.revokeAccessTokenOnSignout?ee._revokeInternal(be):Promise.resolve()).then(function(){var m=X.id_token_hint||be&&be.id_token;return m&&(y.Log.debug("UserManager._signoutStart: Setting id_token into signout request"),X.id_token_hint=m),ee.removeUser().then(function(){return y.Log.debug("UserManager._signoutStart: user removed, creating signout request"),ee.createSignoutRequest(X).then(function(P){return y.Log.debug("UserManager._signoutStart: got signout request"),Oe.url=P.url,P.state&&(Oe.id=P.state.id),Le.navigate(Oe)})})})}).catch(function(be){throw Le.close&&(y.Log.debug("UserManager._signoutStart: Error after preparing navigator, closing navigator window"),Le.close()),be})})},ue.prototype._signoutEnd=function(X){return this.processSignoutResponse(X).then(function(ee){return y.Log.debug("UserManager._signoutEnd: got signout response"),ee})},ue.prototype.revokeAccessToken=function(){var X=this;return this._loadUser().then(function(ee){return X._revokeInternal(ee,!0).then(function(ve){if(ve)return y.Log.debug("UserManager.revokeAccessToken: removing token properties from user and re-storing"),ee.access_token=null,ee.refresh_token=null,ee.expires_at=null,ee.token_type=null,X.storeUser(ee).then(function(){y.Log.debug("UserManager.revokeAccessToken: user stored"),X._events.load(ee)})})}).then(function(){y.Log.info("UserManager.revokeAccessToken: access token revoked successfully")})},ue.prototype._revokeInternal=function(X,ee){var ve=this;if(X){var Le=X.refresh_token;return this._revokeAccessTokenInternal(X.access_token,ee).then(function(be){return ve._revokeRefreshTokenInternal(Le,ee).then(function(m){return be||m||y.Log.debug("UserManager.revokeAccessToken: no need to revoke due to no token(s), or JWT format"),be||m})})}return Promise.resolve(!1)},ue.prototype._revokeAccessTokenInternal=function(X,ee){return!X||X.indexOf(".")>=0?Promise.resolve(!1):this._tokenRevocationClient.revoke(X,ee).then(function(){return!0})},ue.prototype._revokeRefreshTokenInternal=function(X,ee){return X?this._tokenRevocationClient.revoke(X,ee,"refresh_token").then(function(){return!0}):Promise.resolve(!1)},ue.prototype.startSilentRenew=function(){this._silentRenewService.start()},ue.prototype.stopSilentRenew=function(){this._silentRenewService.stop()},ue.prototype._loadUser=function(){return this._userStore.get(this._userStoreKey).then(function(X){return X?(y.Log.debug("UserManager._loadUser: user storageString loaded"),c.User.fromStorageString(X)):(y.Log.debug("UserManager._loadUser: no user storageString"),null)})},ue.prototype.storeUser=function(X){if(X){y.Log.debug("UserManager.storeUser: storing user");var ee=X.toStorageString();return this._userStore.set(this._userStoreKey,ee)}return y.Log.debug("storeUser.storeUser: removing user"),this._userStore.remove(this._userStoreKey)},n(ue,[{key:"_redirectNavigator",get:function(){return this.settings.redirectNavigator}},{key:"_popupNavigator",get:function(){return this.settings.popupNavigator}},{key:"_iframeNavigator",get:function(){return this.settings.iframeNavigator}},{key:"_userStore",get:function(){return this.settings.userStore}},{key:"events",get:function(){return this._events}},{key:"_userStoreKey",get:function(){return"user:"+this.settings.authority+":"+this.settings.client_id}}]),ue}(x.OidcClient)},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.UserManagerSettings=void 0;var n=function(){function N(U,H){for(var Q=0;Q<H.length;Q++){var Z=H[Q];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(U,Z.key,Z)}}return function(U,H,Q){return H&&N(U.prototype,H),Q&&N(U,Q),U}}(),y=(e(0),e(5)),x=e(40),$=e(41),c=e(43),d=e(6),p=e(1),z=e(8);function S(N,U){if(!(N instanceof U))throw new TypeError("Cannot call a class as a function")}function V(N,U){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!U||"object"!=typeof U&&"function"!=typeof U?N:U}u.UserManagerSettings=function(N){function U(){var H=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},Q=H.popup_redirect_uri,Z=H.popup_post_logout_redirect_uri,ue=H.popupWindowFeatures,G=H.popupWindowTarget,X=H.silent_redirect_uri,ee=H.silentRequestTimeout,ve=H.automaticSilentRenew,Oe=void 0!==ve&&ve,Le=H.validateSubOnSilentRenew,be=void 0!==Le&&Le,m=H.includeIdTokenInSilentRenew,P=void 0===m||m,b=H.monitorSession,_=void 0===b||b,R=H.monitorAnonymousSession,E=void 0!==R&&R,ne=H.checkSessionInterval,me=void 0===ne?2e3:ne,Ee=H.stopCheckSessionOnError,se=void 0===Ee||Ee,ze=H.query_status_response_type,Ge=H.revokeAccessTokenOnSignout,xe=void 0!==Ge&&Ge,qe=H.accessTokenExpiringNotificationTime,Xe=void 0===qe?60:qe,lt=H.redirectNavigator,He=void 0===lt?new x.RedirectNavigator:lt,Ye=H.popupNavigator,ht=void 0===Ye?new $.PopupNavigator:Ye,Se=H.iframeNavigator,he=void 0===Se?new c.IFrameNavigator:Se,pe=H.userStore,Fe=void 0===pe?new d.WebStorageStateStore({store:p.Global.sessionStorage}):pe;S(this,U);var Je=V(this,N.call(this,arguments[0]));return Je._popup_redirect_uri=Q,Je._popup_post_logout_redirect_uri=Z,Je._popupWindowFeatures=ue,Je._popupWindowTarget=G,Je._silent_redirect_uri=X,Je._silentRequestTimeout=ee,Je._automaticSilentRenew=Oe,Je._validateSubOnSilentRenew=be,Je._includeIdTokenInSilentRenew=P,Je._accessTokenExpiringNotificationTime=Xe,Je._monitorSession=_,Je._monitorAnonymousSession=E,Je._checkSessionInterval=me,Je._stopCheckSessionOnError=se,Je._query_status_response_type=ze||(arguments[0]&&arguments[0].response_type?z.SigninRequest.isOidc(arguments[0].response_type)?"id_token":"code":"id_token"),Je._revokeAccessTokenOnSignout=xe,Je._redirectNavigator=He,Je._popupNavigator=ht,Je._iframeNavigator=he,Je._userStore=Fe,Je}return function(Q,Z){if("function"!=typeof Z&&null!==Z)throw new TypeError("Super expression must either be null or a function, not "+typeof Z);Q.prototype=Object.create(Z&&Z.prototype,{constructor:{value:Q,enumerable:!1,writable:!0,configurable:!0}}),Z&&(Object.setPrototypeOf?Object.setPrototypeOf(Q,Z):Q.__proto__=Z)}(U,N),n(U,[{key:"popup_redirect_uri",get:function(){return this._popup_redirect_uri}},{key:"popup_post_logout_redirect_uri",get:function(){return this._popup_post_logout_redirect_uri}},{key:"popupWindowFeatures",get:function(){return this._popupWindowFeatures}},{key:"popupWindowTarget",get:function(){return this._popupWindowTarget}},{key:"silent_redirect_uri",get:function(){return this._silent_redirect_uri}},{key:"silentRequestTimeout",get:function(){return this._silentRequestTimeout}},{key:"automaticSilentRenew",get:function(){return this._automaticSilentRenew}},{key:"validateSubOnSilentRenew",get:function(){return this._validateSubOnSilentRenew}},{key:"includeIdTokenInSilentRenew",get:function(){return this._includeIdTokenInSilentRenew}},{key:"accessTokenExpiringNotificationTime",get:function(){return this._accessTokenExpiringNotificationTime}},{key:"monitorSession",get:function(){return this._monitorSession}},{key:"monitorAnonymousSession",get:function(){return this._monitorAnonymousSession}},{key:"checkSessionInterval",get:function(){return this._checkSessionInterval}},{key:"stopCheckSessionOnError",get:function(){return this._stopCheckSessionOnError}},{key:"query_status_response_type",get:function(){return this._query_status_response_type}},{key:"revokeAccessTokenOnSignout",get:function(){return this._revokeAccessTokenOnSignout}},{key:"redirectNavigator",get:function(){return this._redirectNavigator}},{key:"popupNavigator",get:function(){return this._popupNavigator}},{key:"iframeNavigator",get:function(){return this._iframeNavigator}},{key:"userStore",get:function(){return this._userStore}}]),U}(y.OidcClientSettings)},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.RedirectNavigator=void 0;var n=function(){function x($,c){for(var d=0;d<c.length;d++){var p=c[d];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty($,p.key,p)}}return function($,c,d){return c&&x($.prototype,c),d&&x($,d),$}}(),y=e(0);u.RedirectNavigator=function(){function x(){!function(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}(this,x)}return x.prototype.prepare=function(){return Promise.resolve(this)},x.prototype.navigate=function(c){return c&&c.url?(c.useReplaceToNavigate?window.location.replace(c.url):window.location=c.url,Promise.resolve()):(y.Log.error("RedirectNavigator.navigate: No url provided"),Promise.reject(new Error("No url provided")))},n(x,[{key:"url",get:function(){return window.location.href}}]),x}()},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.PopupNavigator=void 0;var n=e(0),y=e(42);u.PopupNavigator=function(){function x(){!function(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}(this,x)}return x.prototype.prepare=function(c){var d=new y.PopupWindow(c);return Promise.resolve(d)},x.prototype.callback=function(c,d,p){n.Log.debug("PopupNavigator.callback");try{return y.PopupWindow.notifyOpener(c,d,p),Promise.resolve()}catch(z){return Promise.reject(z)}},x}()},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.PopupWindow=void 0;var n=function(){function $(c,d){for(var p=0;p<d.length;p++){var z=d[p];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(c,z.key,z)}}return function(c,d,p){return d&&$(c.prototype,d),p&&$(c,p),c}}(),y=e(0),x=e(3);u.PopupWindow=function(){function $(c){var d=this;(function(V,N){if(!(V instanceof N))throw new TypeError("Cannot call a class as a function")})(this,$),this._promise=new Promise(function(S,V){d._resolve=S,d._reject=V}),this._popup=window.open("",c.popupWindowTarget||"_blank",c.popupWindowFeatures||"location=no,toolbar=no,width=500,height=500,left=100,top=100;"),this._popup&&(y.Log.debug("PopupWindow.ctor: popup successfully created"),this._checkForPopupClosedTimer=window.setInterval(this._checkForPopupClosed.bind(this),500))}return $.prototype.navigate=function(d){return this._popup?d&&d.url?(y.Log.debug("PopupWindow.navigate: Setting URL in popup"),this._id=d.id,this._id&&(window["popupCallback_"+d.id]=this._callback.bind(this)),this._popup.focus(),this._popup.window.location=d.url):(this._error("PopupWindow.navigate: no url provided"),this._error("No url provided")):this._error("PopupWindow.navigate: Error opening popup window"),this.promise},$.prototype._success=function(d){y.Log.debug("PopupWindow.callback: Successful response from popup window"),this._cleanup(),this._resolve(d)},$.prototype._error=function(d){y.Log.error("PopupWindow.error: ",d),this._cleanup(),this._reject(new Error(d))},$.prototype.close=function(){this._cleanup(!1)},$.prototype._cleanup=function(d){y.Log.debug("PopupWindow.cleanup"),window.clearInterval(this._checkForPopupClosedTimer),this._checkForPopupClosedTimer=null,delete window["popupCallback_"+this._id],this._popup&&!d&&this._popup.close(),this._popup=null},$.prototype._checkForPopupClosed=function(){this._popup&&!this._popup.closed||this._error("Popup window closed")},$.prototype._callback=function(d,p){this._cleanup(p),d?(y.Log.debug("PopupWindow.callback success"),this._success({url:d})):(y.Log.debug("PopupWindow.callback: Invalid response from popup"),this._error("Invalid response from popup"))},$.notifyOpener=function(d,p,z){if(window.opener){if(d=d||window.location.href){var S=x.UrlUtility.parseUrlFragment(d,z);if(S.state){var N=window.opener["popupCallback_"+S.state];N?(y.Log.debug("PopupWindow.notifyOpener: passing url message to opener"),N(d,p)):y.Log.warn("PopupWindow.notifyOpener: no matching callback found on opener")}else y.Log.warn("PopupWindow.notifyOpener: no state found in response url")}}else y.Log.warn("PopupWindow.notifyOpener: no window.opener. Can't complete notification.")},n($,[{key:"promise",get:function(){return this._promise}}]),$}()},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.IFrameNavigator=void 0;var n=e(0),y=e(44);u.IFrameNavigator=function(){function x(){!function(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}(this,x)}return x.prototype.prepare=function(c){var d=new y.IFrameWindow(c);return Promise.resolve(d)},x.prototype.callback=function(c){n.Log.debug("IFrameNavigator.callback");try{return y.IFrameWindow.notifyParent(c),Promise.resolve()}catch(d){return Promise.reject(d)}},x}()},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.IFrameWindow=void 0;var n=function(){function x($,c){for(var d=0;d<c.length;d++){var p=c[d];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty($,p.key,p)}}return function($,c,d){return c&&x($.prototype,c),d&&x($,d),$}}(),y=e(0);u.IFrameWindow=function(){function x($){var c=this;(function(p,z){if(!(p instanceof z))throw new TypeError("Cannot call a class as a function")})(this,x),this._promise=new Promise(function(d,p){c._resolve=d,c._reject=p}),this._boundMessageEvent=this._message.bind(this),window.addEventListener("message",this._boundMessageEvent,!1),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.width=0,this._frame.height=0,window.document.body.appendChild(this._frame)}return x.prototype.navigate=function(c){if(c&&c.url){var d=c.silentRequestTimeout||1e4;y.Log.debug("IFrameWindow.navigate: Using timeout of:",d),this._timer=window.setTimeout(this._timeout.bind(this),d),this._frame.src=c.url}else this._error("No url provided");return this.promise},x.prototype._success=function(c){this._cleanup(),y.Log.debug("IFrameWindow: Successful response from frame window"),this._resolve(c)},x.prototype._error=function(c){this._cleanup(),y.Log.error(c),this._reject(new Error(c))},x.prototype.close=function(){this._cleanup()},x.prototype._cleanup=function(){this._frame&&(y.Log.debug("IFrameWindow: cleanup"),window.removeEventListener("message",this._boundMessageEvent,!1),window.clearTimeout(this._timer),window.document.body.removeChild(this._frame),this._timer=null,this._frame=null,this._boundMessageEvent=null)},x.prototype._timeout=function(){y.Log.debug("IFrameWindow.timeout"),this._error("Frame window timed out")},x.prototype._message=function(c){if(y.Log.debug("IFrameWindow.message"),this._timer&&c.origin===this._origin&&c.source===this._frame.contentWindow&&"string"==typeof c.data&&(c.data.startsWith("http://")||c.data.startsWith("https://"))){var d=c.data;d?this._success({url:d}):this._error("Invalid response from frame")}},x.notifyParent=function(c){y.Log.debug("IFrameWindow.notifyParent"),(c=c||window.location.href)&&(y.Log.debug("IFrameWindow.notifyParent: posting url message to parent"),window.parent.postMessage(c,location.protocol+"//"+location.host))},n(x,[{key:"promise",get:function(){return this._promise}},{key:"_origin",get:function(){return location.protocol+"//"+location.host}}]),x}()},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.UserManagerEvents=void 0;var n=e(0),y=e(16),x=e(17);u.UserManagerEvents=function($){function c(d){!function(S,V){if(!(S instanceof V))throw new TypeError("Cannot call a class as a function")}(this,c);var p=function(S,V){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!V||"object"!=typeof V&&"function"!=typeof V?S:V}(this,$.call(this,d));return p._userLoaded=new x.Event("User loaded"),p._userUnloaded=new x.Event("User unloaded"),p._silentRenewError=new x.Event("Silent renew error"),p._userSignedIn=new x.Event("User signed in"),p._userSignedOut=new x.Event("User signed out"),p._userSessionChanged=new x.Event("User session changed"),p}return function(p,z){if("function"!=typeof z&&null!==z)throw new TypeError("Super expression must either be null or a function, not "+typeof z);p.prototype=Object.create(z&&z.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),z&&(Object.setPrototypeOf?Object.setPrototypeOf(p,z):p.__proto__=z)}(c,$),c.prototype.load=function(p){var z=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n.Log.debug("UserManagerEvents.load"),$.prototype.load.call(this,p),z&&this._userLoaded.raise(p)},c.prototype.unload=function(){n.Log.debug("UserManagerEvents.unload"),$.prototype.unload.call(this),this._userUnloaded.raise()},c.prototype.addUserLoaded=function(p){this._userLoaded.addHandler(p)},c.prototype.removeUserLoaded=function(p){this._userLoaded.removeHandler(p)},c.prototype.addUserUnloaded=function(p){this._userUnloaded.addHandler(p)},c.prototype.removeUserUnloaded=function(p){this._userUnloaded.removeHandler(p)},c.prototype.addSilentRenewError=function(p){this._silentRenewError.addHandler(p)},c.prototype.removeSilentRenewError=function(p){this._silentRenewError.removeHandler(p)},c.prototype._raiseSilentRenewError=function(p){n.Log.debug("UserManagerEvents._raiseSilentRenewError",p.message),this._silentRenewError.raise(p)},c.prototype.addUserSignedIn=function(p){this._userSignedIn.addHandler(p)},c.prototype.removeUserSignedIn=function(p){this._userSignedIn.removeHandler(p)},c.prototype._raiseUserSignedIn=function(){n.Log.debug("UserManagerEvents._raiseUserSignedIn"),this._userSignedIn.raise()},c.prototype.addUserSignedOut=function(p){this._userSignedOut.addHandler(p)},c.prototype.removeUserSignedOut=function(p){this._userSignedOut.removeHandler(p)},c.prototype._raiseUserSignedOut=function(){n.Log.debug("UserManagerEvents._raiseUserSignedOut"),this._userSignedOut.raise()},c.prototype.addUserSessionChanged=function(p){this._userSessionChanged.addHandler(p)},c.prototype.removeUserSessionChanged=function(p){this._userSessionChanged.removeHandler(p)},c.prototype._raiseUserSessionChanged=function(){n.Log.debug("UserManagerEvents._raiseUserSessionChanged"),this._userSessionChanged.raise()},c}(y.AccessTokenEvents)},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.Timer=void 0;var n=function(){function p(z,S){for(var V=0;V<S.length;V++){var N=S[V];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(z,N.key,N)}}return function(z,S,V){return S&&p(z.prototype,S),V&&p(z,V),z}}(),y=e(0),x=e(1),$=e(17);function c(p,z){if(!(p instanceof z))throw new TypeError("Cannot call a class as a function")}function d(p,z){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!z||"object"!=typeof z&&"function"!=typeof z?p:z}u.Timer=function(p){function z(S){var V=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.Global.timer,N=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;c(this,z);var U=d(this,p.call(this,S));return U._timer=V,U._nowFunc=N||function(){return Date.now()/1e3},U}return function(V,N){if("function"!=typeof N&&null!==N)throw new TypeError("Super expression must either be null or a function, not "+typeof N);V.prototype=Object.create(N&&N.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(V,N):V.__proto__=N)}(z,p),z.prototype.init=function(V){V<=0&&(V=1),V=parseInt(V);var N=this.now+V;if(this.expiration===N&&this._timerHandle)y.Log.debug("Timer.init timer "+this._name+" skipping initialization since already initialized for expiration:",this.expiration);else{this.cancel(),y.Log.debug("Timer.init timer "+this._name+" for duration:",V),this._expiration=N;var U=5;V<U&&(U=V),this._timerHandle=this._timer.setInterval(this._callback.bind(this),1e3*U)}},z.prototype.cancel=function(){this._timerHandle&&(y.Log.debug("Timer.cancel: ",this._name),this._timer.clearInterval(this._timerHandle),this._timerHandle=null)},z.prototype._callback=function(){y.Log.debug("Timer.callback; "+this._name+" timer expires in:",this._expiration-this.now),this._expiration<=this.now&&(this.cancel(),p.prototype.raise.call(this))},n(z,[{key:"now",get:function(){return parseInt(this._nowFunc())}},{key:"expiration",get:function(){return this._expiration}}]),z}($.Event)},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.SilentRenewService=void 0;var n=e(0);u.SilentRenewService=function(){function y(x){(function(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")})(this,y),this._userManager=x}return y.prototype.start=function(){this._callback||(this._callback=this._tokenExpiring.bind(this),this._userManager.events.addAccessTokenExpiring(this._callback),this._userManager.getUser().then(function($){}).catch(function($){n.Log.error("SilentRenewService.start: Error from getUser:",$.message)}))},y.prototype.stop=function(){this._callback&&(this._userManager.events.removeAccessTokenExpiring(this._callback),delete this._callback)},y.prototype._tokenExpiring=function(){var $=this;this._userManager.signinSilent().then(function(c){n.Log.debug("SilentRenewService._tokenExpiring: Silent token renewal successful")},function(c){n.Log.error("SilentRenewService._tokenExpiring: Error from signinSilent:",c.message),$._userManager.events._raiseSilentRenewError(c)})},y}()},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.CordovaPopupNavigator=void 0;var n=e(21);u.CordovaPopupNavigator=function(){function y(){!function($,c){if(!($ instanceof c))throw new TypeError("Cannot call a class as a function")}(this,y)}return y.prototype.prepare=function($){var c=new n.CordovaPopupWindow($);return Promise.resolve(c)},y}()},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.CordovaIFrameNavigator=void 0;var n=e(21);u.CordovaIFrameNavigator=function(){function y(){!function($,c){if(!($ instanceof c))throw new TypeError("Cannot call a class as a function")}(this,y)}return y.prototype.prepare=function($){$.popupWindowFeatures="hidden=yes";var c=new n.CordovaPopupWindow($);return Promise.resolve(c)},y}()},function(K,u,e){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.Version="1.11.5"}])},7434:it=>{var K=String.prototype.replace,u=/%20/g;it.exports={default:"RFC3986",formatters:{RFC1738:function(n){return K.call(n,u,"+")},RFC3986:function(n){return String(n)}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},3670:(it,K,u)=>{var e=u(1799),n=u(2207),y=u(7434);it.exports={formats:y,parse:n,stringify:e}},2207:(it,K,u)=>{var e=u(8477),n=Object.prototype.hasOwnProperty,y=Array.isArray,x={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:e.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},c=function(U,H){return U&&"string"==typeof U&&H.comma&&U.indexOf(",")>-1?U.split(","):U},V=function(H,Q,Z,ue){if(H){var G=Z.allowDots?H.replace(/\.([^.[]+)/g,"[$1]"):H,ee=/(\[[^[\]]*])/g,ve=Z.depth>0&&/(\[[^[\]]*])/.exec(G),Oe=ve?G.slice(0,ve.index):G,Le=[];if(Oe){if(!Z.plainObjects&&n.call(Object.prototype,Oe)&&!Z.allowPrototypes)return;Le.push(Oe)}for(var be=0;Z.depth>0&&null!==(ve=ee.exec(G))&&be<Z.depth;){if(be+=1,!Z.plainObjects&&n.call(Object.prototype,ve[1].slice(1,-1))&&!Z.allowPrototypes)return;Le.push(ve[1])}return ve&&Le.push("["+G.slice(ve.index)+"]"),function(U,H,Q,Z){for(var ue=Z?H:c(H,Q),G=U.length-1;G>=0;--G){var X,ee=U[G];if("[]"===ee&&Q.parseArrays)X=[].concat(ue);else{X=Q.plainObjects?Object.create(null):{};var ve="["===ee.charAt(0)&&"]"===ee.charAt(ee.length-1)?ee.slice(1,-1):ee,Oe=parseInt(ve,10);Q.parseArrays||""!==ve?!isNaN(Oe)&&ee!==ve&&String(Oe)===ve&&Oe>=0&&Q.parseArrays&&Oe<=Q.arrayLimit?(X=[])[Oe]=ue:"__proto__"!==ve&&(X[ve]=ue):X={0:ue}}ue=X}return ue}(Le,Q,Z,ue)}};it.exports=function(U,H){var Q=function(H){if(!H)return x;if(null!=H.decoder&&"function"!=typeof H.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==H.charset&&"utf-8"!==H.charset&&"iso-8859-1"!==H.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");return{allowDots:void 0===H.allowDots?x.allowDots:!!H.allowDots,allowPrototypes:"boolean"==typeof H.allowPrototypes?H.allowPrototypes:x.allowPrototypes,allowSparse:"boolean"==typeof H.allowSparse?H.allowSparse:x.allowSparse,arrayLimit:"number"==typeof H.arrayLimit?H.arrayLimit:x.arrayLimit,charset:void 0===H.charset?x.charset:H.charset,charsetSentinel:"boolean"==typeof H.charsetSentinel?H.charsetSentinel:x.charsetSentinel,comma:"boolean"==typeof H.comma?H.comma:x.comma,decoder:"function"==typeof H.decoder?H.decoder:x.decoder,delimiter:"string"==typeof H.delimiter||e.isRegExp(H.delimiter)?H.delimiter:x.delimiter,depth:"number"==typeof H.depth||!1===H.depth?+H.depth:x.depth,ignoreQueryPrefix:!0===H.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof H.interpretNumericEntities?H.interpretNumericEntities:x.interpretNumericEntities,parameterLimit:"number"==typeof H.parameterLimit?H.parameterLimit:x.parameterLimit,parseArrays:!1!==H.parseArrays,plainObjects:"boolean"==typeof H.plainObjects?H.plainObjects:x.plainObjects,strictNullHandling:"boolean"==typeof H.strictNullHandling?H.strictNullHandling:x.strictNullHandling}}(H);if(""===U||null==U)return Q.plainObjects?Object.create(null):{};for(var Z="string"==typeof U?function(H,Q){var ve,Z={},X=(Q.ignoreQueryPrefix?H.replace(/^\?/,""):H).split(Q.delimiter,Q.parameterLimit===1/0?void 0:Q.parameterLimit),ee=-1,Oe=Q.charset;if(Q.charsetSentinel)for(ve=0;ve<X.length;++ve)0===X[ve].indexOf("utf8=")&&("utf8=%E2%9C%93"===X[ve]?Oe="utf-8":"utf8=%26%2310003%3B"===X[ve]&&(Oe="iso-8859-1"),ee=ve,ve=X.length);for(ve=0;ve<X.length;++ve)if(ve!==ee){var P,b,Le=X[ve],be=Le.indexOf("]="),m=-1===be?Le.indexOf("="):be+1;-1===m?(P=Q.decoder(Le,x.decoder,Oe,"key"),b=Q.strictNullHandling?null:""):(P=Q.decoder(Le.slice(0,m),x.decoder,Oe,"key"),b=e.maybeMap(c(Le.slice(m+1),Q),function(_){return Q.decoder(_,x.decoder,Oe,"value")})),b&&Q.interpretNumericEntities&&"iso-8859-1"===Oe&&(b=b.replace(/&#(\d+);/g,function(H,Q){return String.fromCharCode(parseInt(Q,10))})),Le.indexOf("[]=")>-1&&(b=y(b)?[b]:b),Z[P]=n.call(Z,P)?e.combine(Z[P],b):b}return Z}(U,Q):U,ue=Q.plainObjects?Object.create(null):{},G=Object.keys(Z),X=0;X<G.length;++X){var ee=G[X],ve=V(ee,Z[ee],Q,"string"==typeof U);ue=e.merge(ue,ve,Q)}return!0===Q.allowSparse?ue:e.compact(ue)}},1799:(it,K,u)=>{var e=u(8432),n=u(8477),y=u(7434),x=Object.prototype.hasOwnProperty,$={brackets:function(G){return G+"[]"},comma:"comma",indices:function(G,X){return G+"["+X+"]"},repeat:function(G){return G}},c=Array.isArray,d=String.prototype.split,p=Array.prototype.push,z=function(ue,G){p.apply(ue,c(G)?G:[G])},S=Date.prototype.toISOString,V=y.default,N={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,format:V,formatter:y.formatters[V],indices:!1,serializeDate:function(G){return S.call(G)},skipNulls:!1,strictNullHandling:!1},H={},Q=function ue(G,X,ee,ve,Oe,Le,be,m,P,b,_,R,E,ne,me){for(var Ee=G,se=me,ze=0,Ge=!1;void 0!==(se=se.get(H))&&!Ge;){var xe=se.get(G);if(ze+=1,void 0!==xe){if(xe===ze)throw new RangeError("Cyclic object value");Ge=!0}void 0===se.get(H)&&(ze=0)}if("function"==typeof be?Ee=be(X,Ee):Ee instanceof Date?Ee=b(Ee):"comma"===ee&&c(Ee)&&(Ee=n.maybeMap(Ee,function(De){return De instanceof Date?b(De):De})),null===Ee){if(ve)return Le&&!E?Le(X,N.encoder,ne,"key",_):X;Ee=""}if(function(G){return"string"==typeof G||"number"==typeof G||"boolean"==typeof G||"symbol"==typeof G||"bigint"==typeof G}(Ee)||n.isBuffer(Ee)){if(Le){var qe=E?X:Le(X,N.encoder,ne,"key",_);if("comma"===ee&&E){for(var Xe=d.call(String(Ee),","),lt="",He=0;He<Xe.length;++He)lt+=(0===He?"":",")+R(Le(Xe[He],N.encoder,ne,"value",_));return[R(qe)+"="+lt]}return[R(qe)+"="+R(Le(Ee,N.encoder,ne,"value",_))]}return[R(X)+"="+R(String(Ee))]}var ht,Ye=[];if(void 0===Ee)return Ye;if("comma"===ee&&c(Ee))ht=[{value:Ee.length>0?Ee.join(",")||null:void 0}];else if(c(be))ht=be;else{var Se=Object.keys(Ee);ht=m?Se.sort(m):Se}for(var he=0;he<ht.length;++he){var pe=ht[he],Fe="object"==typeof pe&&void 0!==pe.value?pe.value:Ee[pe];if(!Oe||null!==Fe){var Je=c(Ee)?"function"==typeof ee?ee(X,pe):X:X+(P?"."+pe:"["+pe+"]");me.set(G,ze);var we=e();we.set(H,me),z(Ye,ue(Fe,Je,ee,ve,Oe,Le,be,m,P,b,_,R,E,ne,we))}}return Ye};it.exports=function(ue,G){var ve,X=ue,ee=function(G){if(!G)return N;if(null!=G.encoder&&"function"!=typeof G.encoder)throw new TypeError("Encoder has to be a function.");var X=G.charset||N.charset;if(void 0!==G.charset&&"utf-8"!==G.charset&&"iso-8859-1"!==G.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var ee=y.default;if(void 0!==G.format){if(!x.call(y.formatters,G.format))throw new TypeError("Unknown format option provided.");ee=G.format}var ve=y.formatters[ee],Oe=N.filter;return("function"==typeof G.filter||c(G.filter))&&(Oe=G.filter),{addQueryPrefix:"boolean"==typeof G.addQueryPrefix?G.addQueryPrefix:N.addQueryPrefix,allowDots:void 0===G.allowDots?N.allowDots:!!G.allowDots,charset:X,charsetSentinel:"boolean"==typeof G.charsetSentinel?G.charsetSentinel:N.charsetSentinel,delimiter:void 0===G.delimiter?N.delimiter:G.delimiter,encode:"boolean"==typeof G.encode?G.encode:N.encode,encoder:"function"==typeof G.encoder?G.encoder:N.encoder,encodeValuesOnly:"boolean"==typeof G.encodeValuesOnly?G.encodeValuesOnly:N.encodeValuesOnly,filter:Oe,format:ee,formatter:ve,serializeDate:"function"==typeof G.serializeDate?G.serializeDate:N.serializeDate,skipNulls:"boolean"==typeof G.skipNulls?G.skipNulls:N.skipNulls,sort:"function"==typeof G.sort?G.sort:null,strictNullHandling:"boolean"==typeof G.strictNullHandling?G.strictNullHandling:N.strictNullHandling}}(G);"function"==typeof ee.filter?X=(0,ee.filter)("",X):c(ee.filter)&&(ve=ee.filter);var Le=[];if("object"!=typeof X||null===X)return"";var m=$[G&&G.arrayFormat in $?G.arrayFormat:G&&"indices"in G?G.indices?"indices":"repeat":"indices"];ve||(ve=Object.keys(X)),ee.sort&&ve.sort(ee.sort);for(var P=e(),b=0;b<ve.length;++b){var _=ve[b];ee.skipNulls&&null===X[_]||z(Le,Q(X[_],_,m,ee.strictNullHandling,ee.skipNulls,ee.encode?ee.encoder:null,ee.filter,ee.sort,ee.allowDots,ee.serializeDate,ee.format,ee.formatter,ee.encodeValuesOnly,ee.charset,P))}var R=Le.join(ee.delimiter),E=!0===ee.addQueryPrefix?"?":"";return ee.charsetSentinel&&(E+="iso-8859-1"===ee.charset?"utf8=%26%2310003%3B&":"utf8=%E2%9C%93&"),R.length>0?E+R:""}},8477:(it,K,u)=>{var e=u(7434),n=Object.prototype.hasOwnProperty,y=Array.isArray,x=function(){for(var Z=[],ue=0;ue<256;++ue)Z.push("%"+((ue<16?"0":"")+ue.toString(16)).toUpperCase());return Z}(),c=function(ue,G){for(var X=G&&G.plainObjects?Object.create(null):{},ee=0;ee<ue.length;++ee)void 0!==ue[ee]&&(X[ee]=ue[ee]);return X};it.exports={arrayToObject:c,assign:function(ue,G){return Object.keys(G).reduce(function(X,ee){return X[ee]=G[ee],X},ue)},combine:function(ue,G){return[].concat(ue,G)},compact:function(ue){for(var G=[{obj:{o:ue},prop:"o"}],X=[],ee=0;ee<G.length;++ee)for(var ve=G[ee],Oe=ve.obj[ve.prop],Le=Object.keys(Oe),be=0;be<Le.length;++be){var m=Le[be],P=Oe[m];"object"==typeof P&&null!==P&&-1===X.indexOf(P)&&(G.push({obj:Oe,prop:m}),X.push(P))}return function(ue){for(;ue.length>1;){var G=ue.pop(),X=G.obj[G.prop];if(y(X)){for(var ee=[],ve=0;ve<X.length;++ve)void 0!==X[ve]&&ee.push(X[ve]);G.obj[G.prop]=ee}}}(G),ue},decode:function(Z,ue,G){var X=Z.replace(/\+/g," ");if("iso-8859-1"===G)return X.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(X)}catch{return X}},encode:function(ue,G,X,ee,ve){if(0===ue.length)return ue;var Oe=ue;if("symbol"==typeof ue?Oe=Symbol.prototype.toString.call(ue):"string"!=typeof ue&&(Oe=String(ue)),"iso-8859-1"===X)return escape(Oe).replace(/%u[0-9a-f]{4}/gi,function(P){return"%26%23"+parseInt(P.slice(2),16)+"%3B"});for(var Le="",be=0;be<Oe.length;++be){var m=Oe.charCodeAt(be);45===m||46===m||95===m||126===m||m>=48&&m<=57||m>=65&&m<=90||m>=97&&m<=122||ve===e.RFC1738&&(40===m||41===m)?Le+=Oe.charAt(be):m<128?Le+=x[m]:m<2048?Le+=x[192|m>>6]+x[128|63&m]:m<55296||m>=57344?Le+=x[224|m>>12]+x[128|m>>6&63]+x[128|63&m]:(m=65536+((1023&m)<<10|1023&Oe.charCodeAt(be+=1)),Le+=x[240|m>>18]+x[128|m>>12&63]+x[128|m>>6&63]+x[128|63&m])}return Le},isBuffer:function(ue){return!(!ue||"object"!=typeof ue||!(ue.constructor&&ue.constructor.isBuffer&&ue.constructor.isBuffer(ue)))},isRegExp:function(ue){return"[object RegExp]"===Object.prototype.toString.call(ue)},maybeMap:function(ue,G){if(y(ue)){for(var X=[],ee=0;ee<ue.length;ee+=1)X.push(G(ue[ee]));return X}return G(ue)},merge:function Z(ue,G,X){if(!G)return ue;if("object"!=typeof G){if(y(ue))ue.push(G);else{if(!ue||"object"!=typeof ue)return[ue,G];(X&&(X.plainObjects||X.allowPrototypes)||!n.call(Object.prototype,G))&&(ue[G]=!0)}return ue}if(!ue||"object"!=typeof ue)return[ue].concat(G);var ee=ue;return y(ue)&&!y(G)&&(ee=c(ue,X)),y(ue)&&y(G)?(G.forEach(function(ve,Oe){if(n.call(ue,Oe)){var Le=ue[Oe];Le&&"object"==typeof Le&&ve&&"object"==typeof ve?ue[Oe]=Z(Le,ve,X):ue.push(ve)}else ue[Oe]=ve}),ue):Object.keys(G).reduce(function(ve,Oe){var Le=G[Oe];return ve[Oe]=n.call(ve,Oe)?Z(ve[Oe],Le,X):Le,ve},ee)}}},9877:(it,K,u)=>{var n=u(6712),y=u(1856),x=u(5381);function $(s){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+s,k=1;k<arguments.length;k++)f+="&args[]="+encodeURIComponent(arguments[k]);return"Minified React error #"+s+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!n)throw Error($(227));function c(s,f,k,fe,ke,gt,Ct,Xt,En){var An=Array.prototype.slice.call(arguments,3);try{f.apply(k,An)}catch(Yn){this.onError(Yn)}}var d=!1,p=null,z=!1,S=null,V={onError:function(s){d=!0,p=s}};function N(s,f,k,fe,ke,gt,Ct,Xt,En){d=!1,p=null,c.apply(V,arguments)}var H=null,Q=null,Z=null;function ue(s,f,k){var fe=s.type||"unknown-event";s.currentTarget=Z(k),function U(s,f,k,fe,ke,gt,Ct,Xt,En){if(N.apply(this,arguments),d){if(!d)throw Error($(198));var An=p;d=!1,p=null,z||(z=!0,S=An)}}(fe,f,void 0,s),s.currentTarget=null}var G=null,X={};function ee(){if(G)for(var s in X){var f=X[s],k=G.indexOf(s);if(!(-1<k))throw Error($(96,s));if(!Oe[k]){if(!f.extractEvents)throw Error($(97,s));for(var fe in Oe[k]=f,k=f.eventTypes){var ke=void 0,gt=k[fe],Ct=f,Xt=fe;if(Le.hasOwnProperty(Xt))throw Error($(99,Xt));Le[Xt]=gt;var En=gt.phasedRegistrationNames;if(En){for(ke in En)En.hasOwnProperty(ke)&&ve(En[ke],Ct,Xt);ke=!0}else gt.registrationName?(ve(gt.registrationName,Ct,Xt),ke=!0):ke=!1;if(!ke)throw Error($(98,fe,s))}}}}function ve(s,f,k){if(be[s])throw Error($(100,s));be[s]=f,m[s]=f.eventTypes[k].dependencies}var Oe=[],Le={},be={},m={};function P(s){var k,f=!1;for(k in s)if(s.hasOwnProperty(k)){var fe=s[k];if(!X.hasOwnProperty(k)||X[k]!==fe){if(X[k])throw Error($(102,k));X[k]=fe,f=!0}}f&&ee()}var b=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),_=null,R=null,E=null;function ne(s){if(s=Q(s)){if("function"!=typeof _)throw Error($(280));var f=s.stateNode;f&&(f=H(f),_(s.stateNode,s.type,f))}}function me(s){R?E?E.push(s):E=[s]:R=s}function Ee(){if(R){var s=R,f=E;if(E=R=null,ne(s),f)for(s=0;s<f.length;s++)ne(f[s])}}function se(s,f){return s(f)}function ze(s,f,k,fe,ke){return s(f,k,fe,ke)}function Ge(){}var xe=se,qe=!1,Xe=!1;function lt(){(null!==R||null!==E)&&(Ge(),Ee())}function He(s,f,k){if(Xe)return s(f,k);Xe=!0;try{return xe(s,f,k)}finally{Xe=!1,lt()}}var Ye=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ht=Object.prototype.hasOwnProperty,Se={},he={};function we(s,f,k,fe,ke,gt){this.acceptsBooleans=2===f||3===f||4===f,this.attributeName=fe,this.attributeNamespace=ke,this.mustUseProperty=k,this.propertyName=s,this.type=f,this.sanitizeURL=gt}var De={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){De[s]=new we(s,0,!1,s,null,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var f=s[0];De[f]=new we(f,1,!1,s[1],null,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){De[s]=new we(s,2,!1,s.toLowerCase(),null,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){De[s]=new we(s,2,!1,s,null,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){De[s]=new we(s,3,!1,s.toLowerCase(),null,!1)}),["checked","multiple","muted","selected"].forEach(function(s){De[s]=new we(s,3,!0,s,null,!1)}),["capture","download"].forEach(function(s){De[s]=new we(s,4,!1,s,null,!1)}),["cols","rows","size","span"].forEach(function(s){De[s]=new we(s,6,!1,s,null,!1)}),["rowSpan","start"].forEach(function(s){De[s]=new we(s,5,!1,s.toLowerCase(),null,!1)});var ut=/[\-:]([a-z])/g;function le(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var f=s.replace(ut,le);De[f]=new we(f,1,!1,s,null,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var f=s.replace(ut,le);De[f]=new we(f,1,!1,s,"http://www.w3.org/1999/xlink",!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var f=s.replace(ut,le);De[f]=new we(f,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1)}),["tabIndex","crossOrigin"].forEach(function(s){De[s]=new we(s,1,!1,s.toLowerCase(),null,!1)}),De.xlinkHref=new we("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach(function(s){De[s]=new we(s,1,!1,s.toLowerCase(),null,!0)});var D=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function C(s,f,k,fe){var ke=De.hasOwnProperty(f)?De[f]:null;(null!==ke?0===ke.type:!fe&&2<f.length&&("o"===f[0]||"O"===f[0])&&("n"===f[1]||"N"===f[1]))||(function Je(s,f,k,fe){if(null==f||function Fe(s,f,k,fe){if(null!==k&&0===k.type)return!1;switch(typeof f){case"function":case"symbol":return!0;case"boolean":return!fe&&(null!==k?!k.acceptsBooleans:"data-"!==(s=s.toLowerCase().slice(0,5))&&"aria-"!==s);default:return!1}}(s,f,k,fe))return!0;if(fe)return!1;if(null!==k)switch(k.type){case 3:return!f;case 4:return!1===f;case 5:return isNaN(f);case 6:return isNaN(f)||1>f}return!1}(f,k,ke,fe)&&(k=null),fe||null===ke?function pe(s){return!!ht.call(he,s)||!ht.call(Se,s)&&(Ye.test(s)?he[s]=!0:(Se[s]=!0,!1))}(f)&&(null===k?s.removeAttribute(f):s.setAttribute(f,""+k)):ke.mustUseProperty?s[ke.propertyName]=null===k?3!==ke.type&&"":k:(f=ke.attributeName,fe=ke.attributeNamespace,null===k?s.removeAttribute(f):(k=3===(ke=ke.type)||4===ke&&!0===k?"":""+k,fe?s.setAttributeNS(fe,f,k):s.setAttribute(f,k))))}D.hasOwnProperty("ReactCurrentDispatcher")||(D.ReactCurrentDispatcher={current:null}),D.hasOwnProperty("ReactCurrentBatchConfig")||(D.ReactCurrentBatchConfig={suspense:null});var g=/^(.*)[\\\/]/,B="function"==typeof Symbol&&Symbol.for,de=B?Symbol.for("react.element"):60103,ye=B?Symbol.for("react.portal"):60106,Me=B?Symbol.for("react.fragment"):60107,Qe=B?Symbol.for("react.strict_mode"):60108,st=B?Symbol.for("react.profiler"):60114,Ut=B?Symbol.for("react.provider"):60109,qt=B?Symbol.for("react.context"):60110,Ue=B?Symbol.for("react.concurrent_mode"):60111,Lt=B?Symbol.for("react.forward_ref"):60112,zt=B?Symbol.for("react.suspense"):60113,$e=B?Symbol.for("react.suspense_list"):60120,Ot=B?Symbol.for("react.memo"):60115,Ke=B?Symbol.for("react.lazy"):60116,rt=B?Symbol.for("react.block"):60121,Be="function"==typeof Symbol&&Symbol.iterator;function et(s){return null===s||"object"!=typeof s?null:"function"==typeof(s=Be&&s[Be]||s["@@iterator"])?s:null}function Ft(s){if(null==s)return null;if("function"==typeof s)return s.displayName||s.name||null;if("string"==typeof s)return s;switch(s){case Me:return"Fragment";case ye:return"Portal";case st:return"Profiler";case Qe:return"StrictMode";case zt:return"Suspense";case $e:return"SuspenseList"}if("object"==typeof s)switch(s.$$typeof){case qt:return"Context.Consumer";case Ut:return"Context.Provider";case Lt:var f=s.render;return f=f.displayName||f.name||"",s.displayName||(""!==f?"ForwardRef("+f+")":"ForwardRef");case Ot:return Ft(s.type);case rt:return Ft(s.render);case Ke:if(s=1===s._status?s._result:null)return Ft(s)}return null}function dn(s){var f="";do{e:switch(s.tag){case 3:case 4:case 6:case 7:case 10:case 9:var k="";break e;default:var fe=s._debugOwner,ke=s._debugSource,gt=Ft(s.type);k=null,fe&&(k=Ft(fe.type)),fe=gt,gt="",ke?gt=" (at "+ke.fileName.replace(g,"")+":"+ke.lineNumber+")":k&&(gt=" (created by "+k+")"),k="\n    in "+(fe||"Unknown")+gt}f+=k,s=s.return}while(s);return f}function Vt(s){switch(typeof s){case"boolean":case"number":case"object":case"string":case"undefined":return s;default:return""}}function ct(s){var f=s.type;return(s=s.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===f||"radio"===f)}function Pt(s){s._valueTracker||(s._valueTracker=function kt(s){var f=ct(s)?"checked":"value",k=Object.getOwnPropertyDescriptor(s.constructor.prototype,f),fe=""+s[f];if(!s.hasOwnProperty(f)&&void 0!==k&&"function"==typeof k.get&&"function"==typeof k.set){var ke=k.get,gt=k.set;return Object.defineProperty(s,f,{configurable:!0,get:function(){return ke.call(this)},set:function(Ct){fe=""+Ct,gt.call(this,Ct)}}),Object.defineProperty(s,f,{enumerable:k.enumerable}),{getValue:function(){return fe},setValue:function(Ct){fe=""+Ct},stopTracking:function(){s._valueTracker=null,delete s[f]}}}}(s))}function Yt(s){if(!s)return!1;var f=s._valueTracker;if(!f)return!0;var k=f.getValue(),fe="";return s&&(fe=ct(s)?s.checked?"true":"false":s.value),(s=fe)!==k&&(f.setValue(s),!0)}function Bt(s,f){return y({},f,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f.checked??s._wrapperState.initialChecked})}function pn(s,f){var k=f.defaultValue??"",fe=null!=f.checked?f.checked:f.defaultChecked;k=Vt(null!=f.value?f.value:k),s._wrapperState={initialChecked:fe,initialValue:k,controlled:"checkbox"===f.type||"radio"===f.type?null!=f.checked:null!=f.value}}function _n(s,f){null!=(f=f.checked)&&C(s,"checked",f,!1)}function Cn(s,f){_n(s,f);var k=Vt(f.value),fe=f.type;if(null!=k)"number"===fe?(0===k&&""===s.value||s.value!=k)&&(s.value=""+k):s.value!==""+k&&(s.value=""+k);else if("submit"===fe||"reset"===fe)return void s.removeAttribute("value");f.hasOwnProperty("value")?Qn(s,f.type,k):f.hasOwnProperty("defaultValue")&&Qn(s,f.type,Vt(f.defaultValue)),null==f.checked&&null!=f.defaultChecked&&(s.defaultChecked=!!f.defaultChecked)}function xn(s,f,k){if(f.hasOwnProperty("value")||f.hasOwnProperty("defaultValue")){var fe=f.type;if(("submit"===fe||"reset"===fe)&&null==f.value)return;f=""+s._wrapperState.initialValue,k||f===s.value||(s.value=f),s.defaultValue=f}""!==(k=s.name)&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,""!==k&&(s.name=k)}function Qn(s,f,k){("number"!==f||s.ownerDocument.activeElement!==s)&&(null==k?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+k&&(s.defaultValue=""+k))}function ur(s,f){return s=y({children:void 0},f),(f=function dr(s){var f="";return n.Children.forEach(s,function(k){null!=k&&(f+=k)}),f}(f.children))&&(s.children=f),s}function Xn(s,f,k,fe){if(s=s.options,f){f={};for(var ke=0;ke<k.length;ke++)f["$"+k[ke]]=!0;for(k=0;k<s.length;k++)ke=f.hasOwnProperty("$"+s[k].value),s[k].selected!==ke&&(s[k].selected=ke),ke&&fe&&(s[k].defaultSelected=!0)}else{for(k=""+Vt(k),f=null,ke=0;ke<s.length;ke++){if(s[ke].value===k)return s[ke].selected=!0,void(fe&&(s[ke].defaultSelected=!0));null!==f||s[ke].disabled||(f=s[ke])}null!==f&&(f.selected=!0)}}function ir(s,f){if(null!=f.dangerouslySetInnerHTML)throw Error($(91));return y({},f,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function mr(s,f){var k=f.value;if(null==k){if(k=f.children,f=f.defaultValue,null!=k){if(null!=f)throw Error($(92));if(Array.isArray(k)){if(!(1>=k.length))throw Error($(93));k=k[0]}f=k}null==f&&(f=""),k=f}s._wrapperState={initialValue:Vt(k)}}function hr(s,f){var k=Vt(f.value),fe=Vt(f.defaultValue);null!=k&&((k=""+k)!==s.value&&(s.value=k),null==f.defaultValue&&s.defaultValue!==k&&(s.defaultValue=k)),null!=fe&&(s.defaultValue=""+fe)}function Or(s){var f=s.textContent;f===s._wrapperState.initialValue&&""!==f&&null!==f&&(s.value=f)}function Hr(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xr(s,f){return null==s||"http://www.w3.org/1999/xhtml"===s?Hr(f):"http://www.w3.org/2000/svg"===s&&"foreignObject"===f?"http://www.w3.org/1999/xhtml":s}var Dn,s,pr=(s=function(s,f){if("http://www.w3.org/2000/svg"!==s.namespaceURI||"innerHTML"in s)s.innerHTML=f;else{for((Dn=Dn||document.createElement("div")).innerHTML="<svg>"+f.valueOf().toString()+"</svg>",f=Dn.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;f.firstChild;)s.appendChild(f.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(f,k,fe,ke){MSApp.execUnsafeLocalFunction(function(){return s(f,k)})}:s);function Er(s,f){if(f){var k=s.firstChild;if(k&&k===s.lastChild&&3===k.nodeType)return void(k.nodeValue=f)}s.textContent=f}function wr(s,f){var k={};return k[s.toLowerCase()]=f.toLowerCase(),k["Webkit"+s]="webkit"+f,k["Moz"+s]="moz"+f,k}var Zn={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Nr={},kr={};function Rt(s){if(Nr[s])return Nr[s];if(!Zn[s])return s;var k,f=Zn[s];for(k in f)if(f.hasOwnProperty(k)&&k in kr)return Nr[s]=f[k];return s}b&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete Zn.animationend.animation,delete Zn.animationiteration.animation,delete Zn.animationstart.animation),"TransitionEvent"in window||delete Zn.transitionend.transition);var wn=Rt("animationend"),an=Rt("animationiteration"),On=Rt("animationstart"),$n=Rt("transitionend"),Kn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mi=new("function"==typeof WeakMap?WeakMap:Map);function $r(s){var f=mi.get(s);return void 0===f&&mi.set(s,f=new Map),f}function T(s){var f=s,k=s;if(s.alternate)for(;f.return;)f=f.return;else{s=f;do{0!=(1026&(f=s).effectTag)&&(k=f.return),s=f.return}while(s)}return 3===f.tag?k:null}function M(s){if(13===s.tag){var f=s.memoizedState;if(null===f&&null!==(s=s.alternate)&&(f=s.memoizedState),null!==f)return f.dehydrated}return null}function Y(s){if(T(s)!==s)throw Error($(188))}function Ce(s,f){if(null==f)throw Error($(30));return null==s?f:Array.isArray(s)?Array.isArray(f)?(s.push.apply(s,f),s):(s.push(f),s):Array.isArray(f)?[s].concat(f):[s,f]}function We(s,f,k){Array.isArray(s)?s.forEach(f,k):s&&f.call(k,s)}var pt=null;function dt(s){if(s){var f=s._dispatchListeners,k=s._dispatchInstances;if(Array.isArray(f))for(var fe=0;fe<f.length&&!s.isPropagationStopped();fe++)ue(s,f[fe],k[fe]);else f&&ue(s,f,k);s._dispatchListeners=null,s._dispatchInstances=null,s.isPersistent()||s.constructor.release(s)}}function xt(s){if(null!==s&&(pt=Ce(pt,s)),s=pt,pt=null,s){if(We(s,dt),pt)throw Error($(95));if(z)throw s=S,z=!1,S=null,s}}function Mt(s){return(s=s.target||s.srcElement||window).correspondingUseElement&&(s=s.correspondingUseElement),3===s.nodeType?s.parentNode:s}function Nt(s){if(!b)return!1;var f=(s="on"+s)in document;return f||((f=document.createElement("div")).setAttribute(s,"return;"),f="function"==typeof f[s]),f}var $t=[];function St(s){s.topLevelType=null,s.nativeEvent=null,s.targetInst=null,s.ancestors.length=0,10>$t.length&&$t.push(s)}function tt(s,f,k,fe){if($t.length){var ke=$t.pop();return ke.topLevelType=s,ke.eventSystemFlags=fe,ke.nativeEvent=f,ke.targetInst=k,ke}return{topLevelType:s,eventSystemFlags:fe,nativeEvent:f,targetInst:k,ancestors:[]}}function At(s){var f=s.targetInst,k=f;do{if(!k){s.ancestors.push(k);break}var fe=k;if(3===fe.tag)fe=fe.stateNode.containerInfo;else{for(;fe.return;)fe=fe.return;fe=3!==fe.tag?null:fe.stateNode.containerInfo}if(!fe)break;5!==(f=k.tag)&&6!==f||s.ancestors.push(k),k=Mi(fe)}while(k);for(k=0;k<s.ancestors.length;k++){f=s.ancestors[k];var ke=Mt(s.nativeEvent);fe=s.topLevelType;var gt=s.nativeEvent,Ct=s.eventSystemFlags;0===k&&(Ct|=64);for(var Xt=null,En=0;En<Oe.length;En++){var An=Oe[En];An&&(An=An.extractEvents(fe,f,gt,ke,Ct))&&(Xt=Ce(Xt,An))}xt(Xt)}}function oe(s,f,k){if(!k.has(s)){switch(s){case"scroll":Wr(f,"scroll",!0);break;case"focus":case"blur":Wr(f,"focus",!0),Wr(f,"blur",!0),k.set("blur",null),k.set("focus",null);break;case"cancel":case"close":Nt(s)&&Wr(f,s,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Kn.indexOf(s)&&tr(s,f)}k.set(s,null)}}var O,I,ce,Te=!1,at=[],Tt=null,tn=null,on=null,bn=new Map,vn=new Map,Ht=[],Jn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),er="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Ln(s,f,k,fe,ke){return{blockedOn:s,topLevelType:f,eventSystemFlags:32|k,nativeEvent:ke,container:fe}}function Nn(s,f){switch(s){case"focus":case"blur":Tt=null;break;case"dragenter":case"dragleave":tn=null;break;case"mouseover":case"mouseout":on=null;break;case"pointerover":case"pointerout":bn.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":vn.delete(f.pointerId)}}function Mn(s,f,k,fe,ke,gt){return null===s||s.nativeEvent!==gt?(s=Ln(f,k,fe,ke,gt),null!==f&&null!==(f=Rr(f))&&I(f),s):(s.eventSystemFlags|=fe,s)}function jn(s){var f=Mi(s.target);if(null!==f){var k=T(f);if(null!==k)if(13===(f=k.tag)){if(null!==(f=M(k)))return s.blockedOn=f,void x.unstable_runWithPriority(s.priority,function(){ce(k)})}else if(3===f&&k.stateNode.hydrate)return void(s.blockedOn=3===k.tag?k.stateNode.containerInfo:null)}s.blockedOn=null}function Gn(s){if(null!==s.blockedOn)return!1;var f=vi(s.topLevelType,s.eventSystemFlags,s.container,s.nativeEvent);if(null!==f){var k=Rr(f);return null!==k&&I(k),s.blockedOn=f,!1}return!0}function nr(s,f,k){Gn(s)&&k.delete(f)}function Sr(){for(Te=!1;0<at.length;){var s=at[0];if(null!==s.blockedOn){null!==(s=Rr(s.blockedOn))&&O(s);break}var f=vi(s.topLevelType,s.eventSystemFlags,s.container,s.nativeEvent);null!==f?s.blockedOn=f:at.shift()}null!==Tt&&Gn(Tt)&&(Tt=null),null!==tn&&Gn(tn)&&(tn=null),null!==on&&Gn(on)&&(on=null),bn.forEach(nr),vn.forEach(nr)}function bt(s,f){s.blockedOn===f&&(s.blockedOn=null,Te||(Te=!0,x.unstable_scheduleCallback(x.unstable_NormalPriority,Sr)))}function _t(s){function f(ke){return bt(ke,s)}if(0<at.length){bt(at[0],s);for(var k=1;k<at.length;k++){var fe=at[k];fe.blockedOn===s&&(fe.blockedOn=null)}}for(null!==Tt&&bt(Tt,s),null!==tn&&bt(tn,s),null!==on&&bt(on,s),bn.forEach(f),vn.forEach(f),k=0;k<Ht.length;k++)(fe=Ht[k]).blockedOn===s&&(fe.blockedOn=null);for(;0<Ht.length&&null===(k=Ht[0]).blockedOn;)jn(k),null===k.blockedOn&&Ht.shift()}var Ze={},jt=new Map,Jt=new Map,en=["abort","abort",wn,"animationEnd",an,"animationIteration",On,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",$n,"transitionEnd","waiting","waiting"];function nn(s,f){for(var k=0;k<s.length;k+=2){var fe=s[k],ke=s[k+1],gt="on"+(ke[0].toUpperCase()+ke.slice(1));gt={phasedRegistrationNames:{bubbled:gt,captured:gt+"Capture"},dependencies:[fe],eventPriority:f},Jt.set(fe,f),jt.set(fe,gt),Ze[ke]=gt}}nn("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),nn("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),nn(en,2);for(var un="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),rn=0;rn<un.length;rn++)Jt.set(un[rn],0);var cn=x.unstable_UserBlockingPriority,Sn=x.unstable_runWithPriority,Vn=!0;function tr(s,f){Wr(f,s,!1)}function Wr(s,f,k){var fe=Jt.get(f);switch(void 0===fe?2:fe){case 0:fe=Ci.bind(null,f,1,s);break;case 1:fe=Oi.bind(null,f,1,s);break;default:fe=Tr.bind(null,f,1,s)}s.addEventListener(f,fe,!!k)}function Ci(s,f,k,fe){qe||Ge();var ke=Tr,gt=qe;qe=!0;try{ze(ke,s,f,k,fe)}finally{(qe=gt)||lt()}}function Oi(s,f,k,fe){Sn(cn,Tr.bind(null,s,f,k,fe))}function Tr(s,f,k,fe){if(Vn)if(0<at.length&&-1<Jn.indexOf(s))s=Ln(null,s,f,k,fe),at.push(s);else{var ke=vi(s,f,k,fe);if(null===ke)Nn(s,fe);else if(-1<Jn.indexOf(s))s=Ln(ke,s,f,k,fe),at.push(s);else if(!function kn(s,f,k,fe,ke){switch(f){case"focus":return Tt=Mn(Tt,s,f,k,fe,ke),!0;case"dragenter":return tn=Mn(tn,s,f,k,fe,ke),!0;case"mouseover":return on=Mn(on,s,f,k,fe,ke),!0;case"pointerover":var gt=ke.pointerId;return bn.set(gt,Mn(bn.get(gt)||null,s,f,k,fe,ke)),!0;case"gotpointercapture":return vn.set(gt=ke.pointerId,Mn(vn.get(gt)||null,s,f,k,fe,ke)),!0}return!1}(ke,s,f,k,fe)){Nn(s,fe),s=tt(s,fe,null,f);try{He(At,s)}finally{St(s)}}}}function vi(s,f,k,fe){if(null!==(k=Mi(k=Mt(fe)))){var ke=T(k);if(null===ke)k=null;else{var gt=ke.tag;if(13===gt){if(null!==(k=M(ke)))return k;k=null}else if(3===gt){if(ke.stateNode.hydrate)return 3===ke.tag?ke.stateNode.containerInfo:null;k=null}else ke!==k&&(k=null)}}s=tt(s,fe,k,f);try{He(At,s)}finally{St(s)}return null}var ai={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},li=["Webkit","ms","Moz","O"];function ko(s,f,k){return null==f||"boolean"==typeof f||""===f?"":k||"number"!=typeof f||0===f||ai.hasOwnProperty(s)&&ai[s]?(""+f).trim():f+"px"}function Qi(s,f){for(var k in s=s.style,f)if(f.hasOwnProperty(k)){var fe=0===k.indexOf("--"),ke=ko(k,f[k],fe);"float"===k&&(k="cssFloat"),fe?s.setProperty(k,ke):s[k]=ke}}Object.keys(ai).forEach(function(s){li.forEach(function(f){f=f+s.charAt(0).toUpperCase()+s.substring(1),ai[f]=ai[s]})});var xi=y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fo(s,f){if(f){if(xi[s]&&(null!=f.children||null!=f.dangerouslySetInnerHTML))throw Error($(137,s,""));if(null!=f.dangerouslySetInnerHTML){if(null!=f.children)throw Error($(60));if("object"!=typeof f.dangerouslySetInnerHTML||!("__html"in f.dangerouslySetInnerHTML))throw Error($(61))}if(null!=f.style&&"object"!=typeof f.style)throw Error($(62,""))}}function Do(s,f){if(-1===s.indexOf("-"))return"string"==typeof f.is;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jo="http://www.w3.org/1999/xhtml";function no(s,f){var k=$r(s=9===s.nodeType||11===s.nodeType?s:s.ownerDocument);f=m[f];for(var fe=0;fe<f.length;fe++)oe(f[fe],s,k)}function bs(){}function zs(s){if(void 0===(s=s||("undefined"!=typeof document?document:void 0)))return null;try{return s.activeElement||s.body}catch{return s.body}}function ro(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Ui(s,f){var fe,k=ro(s);for(s=0;k;){if(3===k.nodeType){if(fe=s+k.textContent.length,s<=f&&fe>=f)return{node:k,offset:f-s};s=fe}e:{for(;k;){if(k.nextSibling){k=k.nextSibling;break e}k=k.parentNode}k=void 0}k=ro(k)}}function Yo(s,f){return!(!s||!f)&&(s===f||(!s||3!==s.nodeType)&&(f&&3===f.nodeType?Yo(s,f.parentNode):"contains"in s?s.contains(f):!!s.compareDocumentPosition&&!!(16&s.compareDocumentPosition(f))))}function _a(){for(var s=window,f=zs();f instanceof s.HTMLIFrameElement;){try{var k="string"==typeof f.contentWindow.location.href}catch{k=!1}if(!k)break;f=zs((s=f.contentWindow).document)}return f}function Gs(s){var f=s&&s.nodeName&&s.nodeName.toLowerCase();return f&&("input"===f&&("text"===s.type||"search"===s.type||"tel"===s.type||"url"===s.type||"password"===s.type)||"textarea"===f||"true"===s.contentEditable)}var Hs=null,Ks=null;function Ca(s,f){switch(s){case"button":case"input":case"select":case"textarea":return!!f.autoFocus}return!1}function Ws(s,f){return"textarea"===s||"option"===s||"noscript"===s||"string"==typeof f.children||"number"==typeof f.children||"object"==typeof f.dangerouslySetInnerHTML&&null!==f.dangerouslySetInnerHTML&&null!=f.dangerouslySetInnerHTML.__html}var Ji="function"==typeof setTimeout?setTimeout:void 0,il="function"==typeof clearTimeout?clearTimeout:void 0;function No(s){for(;null!=s;s=s.nextSibling){var f=s.nodeType;if(1===f||3===f)break}return s}function xa(s){s=s.previousSibling;for(var f=0;s;){if(8===s.nodeType){var k=s.data;if("$"===k||"$!"===k||"$?"===k){if(0===f)return s;f--}else"/$"===k&&f++}s=s.previousSibling}return null}var Xs=Math.random().toString(36).slice(2),vr="__reactInternalInstance$"+Xs,$i="__reactEventHandlers$"+Xs,jr="__reactContainere$"+Xs;function Mi(s){var f=s[vr];if(f)return f;for(var k=s.parentNode;k;){if(f=k[jr]||k[vr]){if(k=f.alternate,null!==f.child||null!==k&&null!==k.child)for(s=xa(s);null!==s;){if(k=s[vr])return k;s=xa(s)}return f}k=(s=k).parentNode}return null}function Rr(s){return!(s=s[vr]||s[jr])||5!==s.tag&&6!==s.tag&&13!==s.tag&&3!==s.tag?null:s}function yi(s){if(5===s.tag||6===s.tag)return s.stateNode;throw Error($(33))}function wo(s){return s[$i]||null}function Kr(s){do{s=s.return}while(s&&5!==s.tag);return s||null}function go(s,f){var k=s.stateNode;if(!k)return null;var fe=H(k);if(!fe)return null;k=fe[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(fe=!fe.disabled)||(fe=!("button"===(s=s.type)||"input"===s||"select"===s||"textarea"===s)),s=!fe;break e;default:s=!1}if(s)return null;if(k&&"function"!=typeof k)throw Error($(231,f,typeof k));return k}function ws(s,f,k){(f=go(s,k.dispatchConfig.phasedRegistrationNames[f]))&&(k._dispatchListeners=Ce(k._dispatchListeners,f),k._dispatchInstances=Ce(k._dispatchInstances,s))}function Zo(s){if(s&&s.dispatchConfig.phasedRegistrationNames){for(var f=s._targetInst,k=[];f;)k.push(f),f=Kr(f);for(f=k.length;0<f--;)ws(k[f],"captured",s);for(f=0;f<k.length;f++)ws(k[f],"bubbled",s)}}function zi(s,f,k){s&&k&&k.dispatchConfig.registrationName&&(f=go(s,k.dispatchConfig.registrationName))&&(k._dispatchListeners=Ce(k._dispatchListeners,f),k._dispatchInstances=Ce(k._dispatchInstances,s))}function Co(s){We(s,Zo)}var Vi=null,Qs=null,Cs=null;function Ea(){if(Cs)return Cs;var s,fe,f=Qs,k=f.length,ke="value"in Vi?Vi.value:Vi.textContent,gt=ke.length;for(s=0;s<k&&f[s]===ke[s];s++);var Ct=k-s;for(fe=1;fe<=Ct&&f[k-fe]===ke[gt-fe];fe++);return Cs=ke.slice(s,1<fe?1-fe:void 0)}function xs(){return!0}function Es(){return!1}function ji(s,f,k,fe){for(var ke in this.dispatchConfig=s,this._targetInst=f,this.nativeEvent=k,s=this.constructor.Interface)s.hasOwnProperty(ke)&&((f=s[ke])?this[ke]=f(k):"target"===ke?this.target=fe:this[ke]=k[ke]);return this.isDefaultPrevented=(null!=k.defaultPrevented?k.defaultPrevented:!1===k.returnValue)?xs:Es,this.isPropagationStopped=Es,this}function sl(s,f,k,fe){if(this.eventPool.length){var ke=this.eventPool.pop();return this.call(ke,s,f,k,fe),ke}return new this(s,f,k,fe)}function al(s){if(!(s instanceof this))throw Error($(279));s.destructor(),10>this.eventPool.length&&this.eventPool.push(s)}function Sa(s){s.eventPool=[],s.getPooled=sl,s.release=al}y(ji.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():"unknown"!=typeof s.returnValue&&(s.returnValue=!1),this.isDefaultPrevented=xs)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():"unknown"!=typeof s.cancelBubble&&(s.cancelBubble=!0),this.isPropagationStopped=xs)},persist:function(){this.isPersistent=xs},isPersistent:Es,destructor:function(){var f,s=this.constructor.Interface;for(f in s)this[f]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Es,this._dispatchInstances=this._dispatchListeners=null}}),ji.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},ji.extend=function(s){function f(){}function k(){return fe.apply(this,arguments)}var fe=this;f.prototype=fe.prototype;var ke=new f;return y(ke,k.prototype),(k.prototype=ke).constructor=k,k.Interface=y({},fe.Interface,s),k.extend=fe.extend,Sa(k),k},Sa(ji);var Aa=ji.extend({data:null}),ll=ji.extend({data:null}),ul=[9,13,27,32],xo=b&&"CompositionEvent"in window,es=null;b&&"documentMode"in document&&(es=document.documentMode);var cl=b&&"TextEvent"in window&&!es,ts=b&&(!xo||es&&8<es&&11>=es),Pa=String.fromCharCode(32),io={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},jo=!1;function Ia(s,f){switch(s){case"keyup":return-1!==ul.indexOf(f.keyCode);case"keydown":return 229!==f.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Ta(s){return"object"==typeof(s=s.detail)&&"data"in s?s.data:null}var Bo=!1,ns={eventTypes:io,extractEvents:function(s,f,k,fe){var ke;if(xo)e:{switch(s){case"compositionstart":var gt=io.compositionStart;break e;case"compositionend":gt=io.compositionEnd;break e;case"compositionupdate":gt=io.compositionUpdate;break e}gt=void 0}else Bo?Ia(s,k)&&(gt=io.compositionEnd):"keydown"===s&&229===k.keyCode&&(gt=io.compositionStart);return gt?(ts&&"ko"!==k.locale&&(Bo||gt!==io.compositionStart?gt===io.compositionEnd&&Bo&&(ke=Ea()):(Qs="value"in(Vi=fe)?Vi.value:Vi.textContent,Bo=!0)),gt=Aa.getPooled(gt,f,k,fe),(ke||null!==(ke=Ta(k)))&&(gt.data=ke),Co(gt),ke=gt):ke=null,(s=cl?function dl(s,f){switch(s){case"compositionend":return Ta(f);case"keypress":return 32!==f.which?null:(jo=!0,Pa);case"textInput":return(s=f.data)===Pa&&jo?null:s;default:return null}}(s,k):function lr(s,f){if(Bo)return"compositionend"===s||!xo&&Ia(s,f)?(s=Ea(),Cs=Qs=Vi=null,Bo=!1,s):null;switch(s){case"paste":default:return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return ts&&"ko"!==f.locale?null:f.data}}(s,k))?((f=ll.getPooled(io.beforeInput,f,k,fe)).data=s,Co(f)):f=null,null===ke?f:null===f?ke:[ke,f]}},fl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jr(s){var f=s&&s.nodeName&&s.nodeName.toLowerCase();return"input"===f?!!fl[s.type]:"textarea"===f}var _r={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function ti(s,f,k){return(s=ji.getPooled(_r.change,s,f,k)).type="change",me(k),Co(s),s}var Eo=null,vo=null;function Ra(s){xt(s)}function rs(s){if(Yt(yi(s)))return s}function pl(s,f){if("change"===s)return f}var Lo=!1;function Oa(){Eo&&(Eo.detachEvent("onpropertychange",yo),vo=Eo=null)}function yo(s){if("value"===s.propertyName&&rs(vo))if(s=ti(vo,s,Mt(s)),qe)xt(s);else{qe=!0;try{se(Ra,s)}finally{qe=!1,lt()}}}function Ss(s,f,k){"focus"===s?(Oa(),vo=k,(Eo=f).attachEvent("onpropertychange",yo)):"blur"===s&&Oa()}function So(s){if("selectionchange"===s||"keyup"===s||"keydown"===s)return rs(vo)}function hl(s,f){if("click"===s)return rs(f)}function ml(s,f){if("input"===s||"change"===s)return rs(f)}b&&(Lo=Nt("input")&&(!document.documentMode||9<document.documentMode));var is={eventTypes:_r,_isInputEventSupported:Lo,extractEvents:function(s,f,k,fe){var ke=f?yi(f):window,gt=ke.nodeName&&ke.nodeName.toLowerCase();if("select"===gt||"input"===gt&&"file"===ke.type)var Ct=pl;else if(Jr(ke))if(Lo)Ct=ml;else{Ct=So;var Xt=Ss}else(gt=ke.nodeName)&&"input"===gt.toLowerCase()&&("checkbox"===ke.type||"radio"===ke.type)&&(Ct=hl);if(Ct&&(Ct=Ct(s,f)))return ti(Ct,k,fe);Xt&&Xt(s,ke,f),"blur"===s&&(s=ke._wrapperState)&&s.controlled&&"number"===ke.type&&Qn(ke,"number",ke.value)}},Uo=ji.extend({view:null,detail:null}),Ma={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ae(s){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(s):!!(s=Ma[s])&&!!f[s]}function Ae(){return ae}var Ne=0,ot=0,Gt=!1,Kt=!1,Tn=Uo.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Ae,button:null,buttons:null,relatedTarget:function(s){return s.relatedTarget||(s.fromElement===s.srcElement?s.toElement:s.fromElement)},movementX:function(s){if("movementX"in s)return s.movementX;var f=Ne;return Ne=s.screenX,Gt?"mousemove"===s.type?s.screenX-f:0:(Gt=!0,0)},movementY:function(s){if("movementY"in s)return s.movementY;var f=ot;return ot=s.screenY,Kt?"mousemove"===s.type?s.screenY-f:0:(Kt=!0,0)}}),hn=Tn.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Fn={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Zt={eventTypes:Fn,extractEvents:function(s,f,k,fe,ke){var gt="mouseover"===s||"pointerover"===s,Ct="mouseout"===s||"pointerout"===s;if(gt&&0==(32&ke)&&(k.relatedTarget||k.fromElement)||!Ct&&!gt)return null;if(gt=fe.window===fe?fe:(gt=fe.ownerDocument)?gt.defaultView||gt.parentWindow:window,Ct?(Ct=f,null!==(f=(f=k.relatedTarget||k.toElement)?Mi(f):null)&&(f!==T(f)||5!==f.tag&&6!==f.tag)&&(f=null)):Ct=null,Ct===f)return null;if("mouseout"===s||"mouseover"===s)var En=Tn,An=Fn.mouseLeave,Yn=Fn.mouseEnter,or="mouse";else("pointerout"===s||"pointerover"===s)&&(En=hn,An=Fn.pointerLeave,Yn=Fn.pointerEnter,or="pointer");if(s=null==Ct?gt:yi(Ct),gt=null==f?gt:yi(f),(An=En.getPooled(An,Ct,k,fe)).type=or+"leave",An.target=s,An.relatedTarget=gt,(k=En.getPooled(Yn,f,k,fe)).type=or+"enter",k.target=gt,k.relatedTarget=s,or=f,(fe=Ct)&&or)e:{for(Yn=or,Ct=0,s=En=fe;s;s=Kr(s))Ct++;for(s=0,f=Yn;f;f=Kr(f))s++;for(;0<Ct-s;)En=Kr(En),Ct--;for(;0<s-Ct;)Yn=Kr(Yn),s--;for(;Ct--;){if(En===Yn||En===Yn.alternate)break e;En=Kr(En),Yn=Kr(Yn)}En=null}else En=null;for(Yn=En,En=[];fe&&fe!==Yn&&(null===(Ct=fe.alternate)||Ct!==Yn);)En.push(fe),fe=Kr(fe);for(fe=[];or&&or!==Yn&&(null===(Ct=or.alternate)||Ct!==Yn);)fe.push(or),or=Kr(or);for(or=0;or<En.length;or++)zi(En[or],"bubbled",An);for(or=fe.length;0<or--;)zi(fe[or],"captured",k);return 0==(64&ke)?[An]:[An,k]}},ri="function"==typeof Object.is?Object.is:function bi(s,f){return s===f&&(0!==s||1/s==1/f)||s!=s&&f!=f},oo=Object.prototype.hasOwnProperty;function qr(s,f){if(ri(s,f))return!0;if("object"!=typeof s||null===s||"object"!=typeof f||null===f)return!1;var k=Object.keys(s),fe=Object.keys(f);if(k.length!==fe.length)return!1;for(fe=0;fe<k.length;fe++)if(!oo.call(f,k[fe])||!ri(s[k[fe]],f[k[fe]]))return!1;return!0}var ki=b&&"documentMode"in document&&11>=document.documentMode,Hi={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},_i=null,Ao=null,Po=null,Js=!1;function As(s,f){var k=f.window===f?f.document:9===f.nodeType?f:f.ownerDocument;return Js||null==_i||_i!==zs(k)?null:(k="selectionStart"in(k=_i)&&Gs(k)?{start:k.selectionStart,end:k.selectionEnd}:{anchorNode:(k=(k.ownerDocument&&k.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:k.anchorOffset,focusNode:k.focusNode,focusOffset:k.focusOffset},Po&&qr(Po,k)?null:(Po=k,(s=ji.getPooled(Hi.select,Ao,s,f)).type="select",s.target=_i,Co(s),s))}var ka={eventTypes:Hi,extractEvents:function(s,f,k,fe,ke,gt){if(!(gt=!(ke=gt||(fe.window===fe?fe.document:9===fe.nodeType?fe:fe.ownerDocument)))){e:{ke=$r(ke),gt=m.onSelect;for(var Ct=0;Ct<gt.length;Ct++)if(!ke.has(gt[Ct])){ke=!1;break e}ke=!0}gt=!ke}if(gt)return null;switch(ke=f?yi(f):window,s){case"focus":(Jr(ke)||"true"===ke.contentEditable)&&(_i=ke,Ao=f,Po=null);break;case"blur":Po=Ao=_i=null;break;case"mousedown":Js=!0;break;case"contextmenu":case"mouseup":case"dragend":return Js=!1,As(k,fe);case"selectionchange":if(ki)break;case"keydown":case"keyup":return As(k,fe)}return null}},so=ji.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Oc=ji.extend({clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Mc=Uo.extend({relatedTarget:null});function Ps(s){var f=s.keyCode;return"charCode"in s?0===(s=s.charCode)&&13===f&&(s=13):s=f,10===s&&(s=13),32<=s||13===s?s:0}var Gu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fc=Uo.extend({key:function(s){if(s.key){var f=Gu[s.key]||s.key;if("Unidentified"!==f)return f}return"keypress"===s.type?13===(s=Ps(s))?"Enter":String.fromCharCode(s):"keydown"===s.type||"keyup"===s.type?kc[s.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Ae,charCode:function(s){return"keypress"===s.type?Ps(s):0},keyCode:function(s){return"keydown"===s.type||"keyup"===s.type?s.keyCode:0},which:function(s){return"keypress"===s.type?Ps(s):"keydown"===s.type||"keyup"===s.type?s.keyCode:0}}),Yl=Tn.extend({dataTransfer:null}),$u=Uo.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Ae}),Vu=ji.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),Ys=Tn.extend({deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:null,deltaMode:null}),gl={eventTypes:Ze,extractEvents:function(s,f,k,fe){var ke=jt.get(s);if(!ke)return null;switch(s){case"keypress":if(0===Ps(k))return null;case"keydown":case"keyup":s=Fc;break;case"blur":case"focus":s=Mc;break;case"click":if(2===k.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=Tn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=Yl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=$u;break;case wn:case an:case On:s=so;break;case $n:s=Vu;break;case"scroll":s=Uo;break;case"wheel":s=Ys;break;case"copy":case"cut":case"paste":s=Oc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=hn;break;default:s=ji}return Co(f=s.getPooled(ke,f,k,fe)),f}};if(G)throw Error($(101));G=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),ee(),H=wo,Q=Rr,Z=yi,P({SimpleEventPlugin:gl,EnterLeaveEventPlugin:Zt,ChangeEventPlugin:is,SelectEventPlugin:ka,BeforeInputEventPlugin:ns});var Fa=[],os=-1;function oi(s){0>os||(s.current=Fa[os],Fa[os]=null,os--)}function ui(s,f){os++,Fa[os]=s.current,s.current=f}var zo={},ni={current:zo},Ei={current:!1},Go=zo;function ss(s,f){var k=s.type.contextTypes;if(!k)return zo;var fe=s.stateNode;if(fe&&fe.__reactInternalMemoizedUnmaskedChildContext===f)return fe.__reactInternalMemoizedMaskedChildContext;var gt,ke={};for(gt in k)ke[gt]=f[gt];return fe&&((s=s.stateNode).__reactInternalMemoizedUnmaskedChildContext=f,s.__reactInternalMemoizedMaskedChildContext=ke),ke}function Fi(s){return null!=s.childContextTypes}function Zs(){oi(Ei),oi(ni)}function vl(s,f,k){if(ni.current!==zo)throw Error($(168));ui(ni,f),ui(Ei,k)}function yl(s,f,k){var fe=s.stateNode;if(s=f.childContextTypes,"function"!=typeof fe.getChildContext)return k;for(var ke in fe=fe.getChildContext())if(!(ke in s))throw Error($(108,Ft(f)||"Unknown",ke));return y({},k,{},fe)}function ea(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||zo,Go=ni.current,ui(ni,s),ui(Ei,Ei.current),!0}function _l(s,f,k){var fe=s.stateNode;if(!fe)throw Error($(169));k?(s=yl(s,f,Go),fe.__reactInternalMemoizedMergedChildContext=s,oi(Ei),oi(ni),ui(ni,s)):oi(Ei),ui(Ei,k)}var eu=x.unstable_runWithPriority,tu=x.unstable_scheduleCallback,Da=x.unstable_cancelCallback,nu=x.unstable_requestPaint,Na=x.unstable_now,ru=x.unstable_getCurrentPriorityLevel,ta=x.unstable_ImmediatePriority,iu=x.unstable_UserBlockingPriority,bl=x.unstable_NormalPriority,wl=x.unstable_LowPriority,Cl=x.unstable_IdlePriority,xl={},Hu=x.unstable_shouldYield,Ku=void 0!==nu?nu:function(){},ao=null,na=null,ou=!1,as=Na(),Yi=1e4>as?Na:function(){return Na()-as};function te(){switch(ru()){case ta:return 99;case iu:return 98;case bl:return 97;case wl:return 96;case Cl:return 95;default:throw Error($(332))}}function Re(s){switch(s){case 99:return ta;case 98:return iu;case 97:return bl;case 96:return wl;case 95:return Cl;default:throw Error($(332))}}function A(s,f){return s=Re(s),eu(s,f)}function ie(s,f,k){return s=Re(s),tu(s,f,k)}function Pe(s){return null===ao?(ao=[s],na=tu(ta,Dt)):ao.push(s),xl}function nt(){if(null!==na){var s=na;na=null,Da(s)}Dt()}function Dt(){if(!ou&&null!==ao){ou=!0;var s=0;try{var f=ao;A(99,function(){for(;s<f.length;s++){var k=f[s];do{k=k(!0)}while(null!==k)}}),ao=null}catch(k){throw null!==ao&&(ao=ao.slice(s+1)),tu(ta,nt),k}finally{ou=!1}}}function Wt(s,f,k){return 1073741821-(1+((1073741821-s+f/10)/(k/=10)|0))*k}function mn(s,f){if(s&&s.defaultProps)for(var k in f=y({},f),s=s.defaultProps)void 0===f[k]&&(f[k]=s[k]);return f}var Pn={current:null},br=null,Br=null,Cr=null;function Gr(){Cr=Br=br=null}function Lr(s){var f=Pn.current;oi(Pn),s.type._context._currentValue=f}function di(s,f){for(;null!==s;){var k=s.alternate;if(s.childExpirationTime<f)s.childExpirationTime=f,null!==k&&k.childExpirationTime<f&&(k.childExpirationTime=f);else{if(!(null!==k&&k.childExpirationTime<f))break;k.childExpirationTime=f}s=s.return}}function Xr(s,f){br=s,Cr=Br=null,null!==(s=s.dependencies)&&null!==s.firstContext&&(s.expirationTime>=f&&(qo=!0),s.firstContext=null)}function Si(s,f){if(Cr!==s&&!1!==f&&0!==f)if(("number"!=typeof f||1073741823===f)&&(Cr=s,f=1073741823),f={context:s,observedBits:f,next:null},null===Br){if(null===br)throw Error($(308));Br=f,br.dependencies={expirationTime:0,firstContext:f,responders:null}}else Br=Br.next=f;return s._currentValue}var Zi=!1;function $o(s){s.updateQueue={baseState:s.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function Is(s,f){f.updateQueue===(s=s.updateQueue)&&(f.updateQueue={baseState:s.baseState,baseQueue:s.baseQueue,shared:s.shared,effects:s.effects})}function Ai(s,f){return(s={expirationTime:s,suspenseConfig:f,tag:0,payload:null,callback:null,next:null}).next=s}function ls(s,f){if(null!==(s=s.updateQueue)){var k=(s=s.shared).pending;null===k?f.next=f:(f.next=k.next,k.next=f),s.pending=f}}function su(s,f){var k=s.alternate;null!==k&&Is(k,s),null===(k=(s=s.updateQueue).baseQueue)?(s.baseQueue=f.next=f,f.next=f):(f.next=k.next,k.next=f)}function ra(s,f,k,fe){var ke=s.updateQueue;Zi=!1;var gt=ke.baseQueue,Ct=ke.shared.pending;if(null!==Ct){if(null!==gt){var Xt=gt.next;gt.next=Ct.next,Ct.next=Xt}gt=Ct,ke.shared.pending=null,null!==(Xt=s.alternate)&&null!==(Xt=Xt.updateQueue)&&(Xt.baseQueue=Ct)}if(null!==gt){var En=ke.baseState,An=0,Yn=null,or=null,Fr=null;if(null!==(Xt=gt.next))for(var Qr=Xt;;){if((Ct=Qr.expirationTime)<fe){var co={expirationTime:Qr.expirationTime,suspenseConfig:Qr.suspenseConfig,tag:Qr.tag,payload:Qr.payload,callback:Qr.callback,next:null};null===Fr?(or=Fr=co,Yn=En):Fr=Fr.next=co,Ct>An&&(An=Ct)}else{null!==Fr&&(Fr=Fr.next={expirationTime:1073741823,suspenseConfig:Qr.suspenseConfig,tag:Qr.tag,payload:Qr.payload,callback:Qr.callback,next:null}),Ou(Ct,Qr.suspenseConfig);e:{var Li=s,yn=Qr;switch(Ct=f,co=k,yn.tag){case 1:if("function"==typeof(Li=yn.payload)){En=Li.call(co,En,Ct);break e}En=Li;break e;case 3:Li.effectTag=-4097&Li.effectTag|64;case 0:if(null==(Ct="function"==typeof(Li=yn.payload)?Li.call(co,En,Ct):Li))break e;En=y({},En,Ct);break e;case 2:Zi=!0}}null!==Qr.callback&&(s.effectTag|=32,null===(Ct=ke.effects)?ke.effects=[Qr]:Ct.push(Qr))}if(null===(Qr=Qr.next)||Qr===Xt){if(null===(Ct=ke.shared.pending))break;Qr=gt.next=Ct.next,Ct.next=Xt,ke.baseQueue=gt=Ct,ke.shared.pending=null}}null===Fr?Yn=En:Fr.next=or,ke.baseState=Yn,ke.baseQueue=Fr,Ul(An),s.expirationTime=An,s.memoizedState=En}}function qu(s,f,k){if(s=f.effects,f.effects=null,null!==s)for(f=0;f<s.length;f++){var fe=s[f],ke=fe.callback;if(null!==ke){if(fe.callback=null,fe=ke,ke=k,"function"!=typeof fe)throw Error($(191,fe));fe.call(ke)}}}var ja=D.ReactCurrentBatchConfig,au=(new n.Component).refs;function Ba(s,f,k,fe){k=null==(k=k(fe,f=s.memoizedState))?f:y({},f,k),s.memoizedState=k,0===s.expirationTime&&(s.updateQueue.baseState=k)}var La={isMounted:function(s){return!!(s=s._reactInternalFiber)&&T(s)===s},enqueueSetState:function(s,f,k){s=s._reactInternalFiber;var fe=Wo(),ke=ja.suspense;(ke=Ai(fe=ps(fe,s,ke),ke)).payload=f,null!=k&&(ke.callback=k),ls(s,ke),ks(s,fe)},enqueueReplaceState:function(s,f,k){s=s._reactInternalFiber;var fe=Wo(),ke=ja.suspense;(ke=Ai(fe=ps(fe,s,ke),ke)).tag=1,ke.payload=f,null!=k&&(ke.callback=k),ls(s,ke),ks(s,fe)},enqueueForceUpdate:function(s,f){s=s._reactInternalFiber;var k=Wo(),fe=ja.suspense;(fe=Ai(k=ps(k,s,fe),fe)).tag=2,null!=f&&(fe.callback=f),ls(s,fe),ks(s,k)}};function Wu(s,f,k,fe,ke,gt,Ct){return"function"==typeof(s=s.stateNode).shouldComponentUpdate?s.shouldComponentUpdate(fe,gt,Ct):!(f.prototype&&f.prototype.isPureReactComponent&&qr(k,fe)&&qr(ke,gt))}function Xu(s,f,k){var fe=!1,ke=zo,gt=f.contextType;return"object"==typeof gt&&null!==gt?gt=Si(gt):(ke=Fi(f)?Go:ni.current,gt=(fe=null!=(fe=f.contextTypes))?ss(s,ke):zo),f=new f(k,gt),s.memoizedState=null!=f.state?f.state:null,f.updater=La,s.stateNode=f,f._reactInternalFiber=s,fe&&((s=s.stateNode).__reactInternalMemoizedUnmaskedChildContext=ke,s.__reactInternalMemoizedMaskedChildContext=gt),f}function Vo(s,f,k,fe){s=f.state,"function"==typeof f.componentWillReceiveProps&&f.componentWillReceiveProps(k,fe),"function"==typeof f.UNSAFE_componentWillReceiveProps&&f.UNSAFE_componentWillReceiveProps(k,fe),f.state!==s&&La.enqueueReplaceState(f,f.state,null)}function Qu(s,f,k,fe){var ke=s.stateNode;ke.props=k,ke.state=s.memoizedState,ke.refs=au,$o(s);var gt=f.contextType;"object"==typeof gt&&null!==gt?ke.context=Si(gt):(gt=Fi(f)?Go:ni.current,ke.context=ss(s,gt)),ra(s,k,ke,fe),ke.state=s.memoizedState,"function"==typeof(gt=f.getDerivedStateFromProps)&&(Ba(s,f,gt,k),ke.state=s.memoizedState),"function"==typeof f.getDerivedStateFromProps||"function"==typeof ke.getSnapshotBeforeUpdate||"function"!=typeof ke.UNSAFE_componentWillMount&&"function"!=typeof ke.componentWillMount||(f=ke.state,"function"==typeof ke.componentWillMount&&ke.componentWillMount(),"function"==typeof ke.UNSAFE_componentWillMount&&ke.UNSAFE_componentWillMount(),f!==ke.state&&La.enqueueReplaceState(ke,ke.state,null),ra(s,k,ke,fe),ke.state=s.memoizedState),"function"==typeof ke.componentDidMount&&(s.effectTag|=4)}var lu=Array.isArray;function El(s,f,k){if(null!==(s=k.ref)&&"function"!=typeof s&&"object"!=typeof s){if(k._owner){if(k=k._owner){if(1!==k.tag)throw Error($(309));var fe=k.stateNode}if(!fe)throw Error($(147,s));var ke=""+s;return null!==f&&null!==f.ref&&"function"==typeof f.ref&&f.ref._stringRef===ke?f.ref:((f=function(gt){var Ct=fe.refs;Ct===au&&(Ct=fe.refs={}),null===gt?delete Ct[ke]:Ct[ke]=gt})._stringRef=ke,f)}if("string"!=typeof s)throw Error($(284));if(!k._owner)throw Error($(290,s))}return s}function uu(s,f){if("textarea"!==s.type)throw Error($(31,"[object Object]"===Object.prototype.toString.call(f)?"object with keys {"+Object.keys(f).join(", ")+"}":f,""))}function Dc(s){function f(yn,fn){if(s){var Rn=yn.lastEffect;null!==Rn?(Rn.nextEffect=fn,yn.lastEffect=fn):yn.firstEffect=yn.lastEffect=fn,fn.nextEffect=null,fn.effectTag=8}}function k(yn,fn){if(!s)return null;for(;null!==fn;)f(yn,fn),fn=fn.sibling;return null}function fe(yn,fn){for(yn=new Map;null!==fn;)yn.set(null!==fn.key?fn.key:fn.index,fn),fn=fn.sibling;return yn}function ke(yn,fn){return(yn=Ro(yn,fn)).index=0,yn.sibling=null,yn}function gt(yn,fn,Rn){return yn.index=Rn,s?null!==(Rn=yn.alternate)?(Rn=Rn.index)<fn?(yn.effectTag=2,fn):Rn:(yn.effectTag=2,fn):fn}function Ct(yn){return s&&null===yn.alternate&&(yn.effectTag=2),yn}function Xt(yn,fn,Rn,Un){return null===fn||6!==fn.tag?((fn=Hl(Rn,yn.mode,Un)).return=yn,fn):((fn=ke(fn,Rn)).return=yn,fn)}function En(yn,fn,Rn,Un){return null!==fn&&fn.elementType===Rn.type?((Un=ke(fn,Rn.props)).ref=El(yn,fn,Rn),Un.return=yn,Un):((Un=Vl(Rn.type,Rn.key,Rn.props,null,yn.mode,Un)).ref=El(yn,fn,Rn),Un.return=yn,Un)}function An(yn,fn,Rn,Un){return null===fn||4!==fn.tag||fn.stateNode.containerInfo!==Rn.containerInfo||fn.stateNode.implementation!==Rn.implementation?((fn=Ec(Rn,yn.mode,Un)).return=yn,fn):((fn=ke(fn,Rn.children||[])).return=yn,fn)}function Yn(yn,fn,Rn,Un,qn){return null===fn||7!==fn.tag?((fn=hs(Rn,yn.mode,Un,qn)).return=yn,fn):((fn=ke(fn,Rn)).return=yn,fn)}function or(yn,fn,Rn){if("string"==typeof fn||"number"==typeof fn)return(fn=Hl(""+fn,yn.mode,Rn)).return=yn,fn;if("object"==typeof fn&&null!==fn){switch(fn.$$typeof){case de:return(Rn=Vl(fn.type,fn.key,fn.props,null,yn.mode,Rn)).ref=El(yn,null,fn),Rn.return=yn,Rn;case ye:return(fn=Ec(fn,yn.mode,Rn)).return=yn,fn}if(lu(fn)||et(fn))return(fn=hs(fn,yn.mode,Rn,null)).return=yn,fn;uu(yn,fn)}return null}function Fr(yn,fn,Rn,Un){var qn=null!==fn?fn.key:null;if("string"==typeof Rn||"number"==typeof Rn)return null!==qn?null:Xt(yn,fn,""+Rn,Un);if("object"==typeof Rn&&null!==Rn){switch(Rn.$$typeof){case de:return Rn.key===qn?Rn.type===Me?Yn(yn,fn,Rn.props.children,Un,qn):En(yn,fn,Rn,Un):null;case ye:return Rn.key===qn?An(yn,fn,Rn,Un):null}if(lu(Rn)||et(Rn))return null!==qn?null:Yn(yn,fn,Rn,Un,null);uu(yn,Rn)}return null}function Qr(yn,fn,Rn,Un,qn){if("string"==typeof Un||"number"==typeof Un)return Xt(fn,yn=yn.get(Rn)||null,""+Un,qn);if("object"==typeof Un&&null!==Un){switch(Un.$$typeof){case de:return yn=yn.get(null===Un.key?Rn:Un.key)||null,Un.type===Me?Yn(fn,yn,Un.props.children,qn,Un.key):En(fn,yn,Un,qn);case ye:return An(fn,yn=yn.get(null===Un.key?Rn:Un.key)||null,Un,qn)}if(lu(Un)||et(Un))return Yn(fn,yn=yn.get(Rn)||null,Un,qn,null);uu(fn,Un)}return null}return function(yn,fn,Rn,Un){var qn="object"==typeof Rn&&null!==Rn&&Rn.type===Me&&null===Rn.key;qn&&(Rn=Rn.props.children);var ar="object"==typeof Rn&&null!==Rn;if(ar)switch(Rn.$$typeof){case de:e:{for(ar=Rn.key,qn=fn;null!==qn;){if(qn.key===ar){if(7===qn.tag){if(Rn.type===Me){k(yn,qn.sibling),(fn=ke(qn,Rn.props.children)).return=yn,yn=fn;break e}}else if(qn.elementType===Rn.type){k(yn,qn.sibling),(fn=ke(qn,Rn.props)).ref=El(yn,qn,Rn),fn.return=yn,yn=fn;break e}k(yn,qn);break}f(yn,qn),qn=qn.sibling}Rn.type===Me?((fn=hs(Rn.props.children,yn.mode,Un,Rn.key)).return=yn,yn=fn):((Un=Vl(Rn.type,Rn.key,Rn.props,null,yn.mode,Un)).ref=El(yn,fn,Rn),Un.return=yn,yn=Un)}return Ct(yn);case ye:e:{for(qn=Rn.key;null!==fn;){if(fn.key===qn){if(4===fn.tag&&fn.stateNode.containerInfo===Rn.containerInfo&&fn.stateNode.implementation===Rn.implementation){k(yn,fn.sibling),(fn=ke(fn,Rn.children||[])).return=yn,yn=fn;break e}k(yn,fn);break}f(yn,fn),fn=fn.sibling}(fn=Ec(Rn,yn.mode,Un)).return=yn,yn=fn}return Ct(yn)}if("string"==typeof Rn||"number"==typeof Rn)return Rn=""+Rn,null!==fn&&6===fn.tag?(k(yn,fn.sibling),(fn=ke(fn,Rn)).return=yn,yn=fn):(k(yn,fn),(fn=Hl(Rn,yn.mode,Un)).return=yn,yn=fn),Ct(yn);if(lu(Rn))return function co(yn,fn,Rn,Un){for(var qn=null,ar=null,gr=fn,Ur=fn=0,fi=null;null!==gr&&Ur<Rn.length;Ur++){gr.index>Ur?(fi=gr,gr=null):fi=gr.sibling;var Dr=Fr(yn,gr,Rn[Ur],Un);if(null===Dr){null===gr&&(gr=fi);break}s&&gr&&null===Dr.alternate&&f(yn,gr),fn=gt(Dr,fn,Ur),null===ar?qn=Dr:ar.sibling=Dr,ar=Dr,gr=fi}if(Ur===Rn.length)return k(yn,gr),qn;if(null===gr){for(;Ur<Rn.length;Ur++)null!==(gr=or(yn,Rn[Ur],Un))&&(fn=gt(gr,fn,Ur),null===ar?qn=gr:ar.sibling=gr,ar=gr);return qn}for(gr=fe(yn,gr);Ur<Rn.length;Ur++)null!==(fi=Qr(gr,yn,Ur,Rn[Ur],Un))&&(s&&null!==fi.alternate&&gr.delete(null===fi.key?Ur:fi.key),fn=gt(fi,fn,Ur),null===ar?qn=fi:ar.sibling=fi,ar=fi);return s&&gr.forEach(function(Xi){return f(yn,Xi)}),qn}(yn,fn,Rn,Un);if(et(Rn))return function Li(yn,fn,Rn,Un){var qn=et(Rn);if("function"!=typeof qn)throw Error($(150));if(null==(Rn=qn.call(Rn)))throw Error($(151));for(var ar=qn=null,gr=fn,Ur=fn=0,fi=null,Dr=Rn.next();null!==gr&&!Dr.done;Ur++,Dr=Rn.next()){gr.index>Ur?(fi=gr,gr=null):fi=gr.sibling;var Xi=Fr(yn,gr,Dr.value,Un);if(null===Xi){null===gr&&(gr=fi);break}s&&gr&&null===Xi.alternate&&f(yn,gr),fn=gt(Xi,fn,Ur),null===ar?qn=Xi:ar.sibling=Xi,ar=Xi,gr=fi}if(Dr.done)return k(yn,gr),qn;if(null===gr){for(;!Dr.done;Ur++,Dr=Rn.next())null!==(Dr=or(yn,Dr.value,Un))&&(fn=gt(Dr,fn,Ur),null===ar?qn=Dr:ar.sibling=Dr,ar=Dr);return qn}for(gr=fe(yn,gr);!Dr.done;Ur++,Dr=Rn.next())null!==(Dr=Qr(gr,yn,Ur,Dr.value,Un))&&(s&&null!==Dr.alternate&&gr.delete(null===Dr.key?Ur:Dr.key),fn=gt(Dr,fn,Ur),null===ar?qn=Dr:ar.sibling=Dr,ar=Dr);return s&&gr.forEach(function(ya){return f(yn,ya)}),qn}(yn,fn,Rn,Un);if(ar&&uu(yn,Rn),void 0===Rn&&!qn)switch(yn.tag){case 1:case 0:throw yn=yn.type,Error($(152,yn.displayName||yn.name||"Component"))}return k(yn,fn)}}var Ua=Dc(!0),Ju=Dc(!1),Sl={},Ho={current:Sl},Al={current:Sl},Pl={current:Sl};function ia(s){if(s===Sl)throw Error($(174));return s}function cu(s,f){switch(ui(Pl,f),ui(Al,s),ui(Ho,Sl),s=f.nodeType){case 9:case 11:f=(f=f.documentElement)?f.namespaceURI:xr(null,"");break;default:f=xr(f=(s=8===s?f.parentNode:f).namespaceURI||null,s=s.tagName)}oi(Ho),ui(Ho,f)}function za(){oi(Ho),oi(Al),oi(Pl)}function gd(s){ia(Pl.current);var f=ia(Ho.current),k=xr(f,s.type);f!==k&&(ui(Al,s),ui(Ho,k))}function Nc(s){Al.current===s&&(oi(Ho),oi(Al))}var gi={current:0};function du(s){for(var f=s;null!==f;){if(13===f.tag){var k=f.memoizedState;if(null!==k&&(null===(k=k.dehydrated)||"$?"===k.data||"$!"===k.data))return f}else if(19===f.tag&&void 0!==f.memoizedProps.revealOrder){if(0!=(64&f.effectTag))return f}else if(null!==f.child){f.child.return=f,f=f.child;continue}if(f===s)break;for(;null===f.sibling;){if(null===f.return||f.return===s)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function Yu(s,f){return{responder:s,props:f}}var fu=D.ReactCurrentDispatcher,_o=D.ReactCurrentBatchConfig,Ts=0,Pi=null,Ki=null,qi=null,Zu=!1;function lo(){throw Error($(321))}function oa(s,f){if(null===f)return!1;for(var k=0;k<f.length&&k<s.length;k++)if(!ri(s[k],f[k]))return!1;return!0}function pu(s,f,k,fe,ke,gt){if(Ts=gt,Pi=f,f.memoizedState=null,f.updateQueue=null,f.expirationTime=0,fu.current=null===s||null===s.memoizedState?ic:vd,s=k(fe,ke),f.expirationTime===Ts){gt=0;do{if(f.expirationTime=0,!(25>gt))throw Error($(301));gt+=1,qi=Ki=null,f.updateQueue=null,fu.current=yd,s=k(fe,ke)}while(f.expirationTime===Ts)}if(fu.current=$a,f=null!==Ki&&null!==Ki.next,Ts=0,qi=Ki=Pi=null,Zu=!1,f)throw Error($(300));return s}function Ga(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===qi?Pi.memoizedState=qi=s:qi=qi.next=s,qi}function Il(){if(null===Ki){var s=Pi.alternate;s=null!==s?s.memoizedState:null}else s=Ki.next;var f=null===qi?Pi.memoizedState:qi.next;if(null!==f)qi=f,Ki=s;else{if(null===s)throw Error($(310));s={memoizedState:(Ki=s).memoizedState,baseState:Ki.baseState,baseQueue:Ki.baseQueue,queue:Ki.queue,next:null},null===qi?Pi.memoizedState=qi=s:qi=qi.next=s}return qi}function sa(s,f){return"function"==typeof f?f(s):f}function hu(s){var f=Il(),k=f.queue;if(null===k)throw Error($(311));k.lastRenderedReducer=s;var fe=Ki,ke=fe.baseQueue,gt=k.pending;if(null!==gt){if(null!==ke){var Ct=ke.next;ke.next=gt.next,gt.next=Ct}fe.baseQueue=ke=gt,k.pending=null}if(null!==ke){fe=fe.baseState;var Xt=Ct=gt=null,En=ke=ke.next;do{var An=En.expirationTime;if(An<Ts){var Yn={expirationTime:En.expirationTime,suspenseConfig:En.suspenseConfig,action:En.action,eagerReducer:En.eagerReducer,eagerState:En.eagerState,next:null};null===Xt?(Ct=Xt=Yn,gt=fe):Xt=Xt.next=Yn,An>Pi.expirationTime&&(Pi.expirationTime=An,Ul(An))}else null!==Xt&&(Xt=Xt.next={expirationTime:1073741823,suspenseConfig:En.suspenseConfig,action:En.action,eagerReducer:En.eagerReducer,eagerState:En.eagerState,next:null}),Ou(An,En.suspenseConfig),fe=En.eagerReducer===s?En.eagerState:s(fe,En.action);En=En.next}while(null!==En&&En!==ke);null===Xt?gt=fe:Xt.next=Ct,ri(fe,f.memoizedState)||(qo=!0),f.memoizedState=fe,f.baseState=gt,f.baseQueue=Xt,k.lastRenderedState=fe}return[f.memoizedState,k.dispatch]}function mu(s){var f=Il(),k=f.queue;if(null===k)throw Error($(311));k.lastRenderedReducer=s;var fe=k.dispatch,ke=k.pending,gt=f.memoizedState;if(null!==ke){k.pending=null;var Ct=ke=ke.next;do{gt=s(gt,Ct.action),Ct=Ct.next}while(Ct!==ke);ri(gt,f.memoizedState)||(qo=!0),f.memoizedState=gt,null===f.baseQueue&&(f.baseState=gt),k.lastRenderedState=gt}return[gt,fe]}function Tl(s){var f=Ga();return"function"==typeof s&&(s=s()),f.memoizedState=f.baseState=s,s=(s=f.queue={pending:null,dispatch:null,lastRenderedReducer:sa,lastRenderedState:s}).dispatch=Ko.bind(null,Pi,s),[f.memoizedState,s]}function gu(s,f,k,fe){return s={tag:s,create:f,destroy:k,deps:fe,next:null},null===(f=Pi.updateQueue)?(Pi.updateQueue=f={lastEffect:null},f.lastEffect=s.next=s):null===(k=f.lastEffect)?f.lastEffect=s.next=s:(fe=k.next,k.next=s,s.next=fe,f.lastEffect=s),s}function jc(){return Il().memoizedState}function ec(s,f,k,fe){var ke=Ga();Pi.effectTag|=s,ke.memoizedState=gu(1|f,k,void 0,void 0===fe?null:fe)}function tc(s,f,k,fe){var ke=Il();fe=void 0===fe?null:fe;var gt=void 0;if(null!==Ki){var Ct=Ki.memoizedState;if(gt=Ct.destroy,null!==fe&&oa(fe,Ct.deps))return void gu(f,k,gt,fe)}Pi.effectTag|=s,ke.memoizedState=gu(1|f,k,gt,fe)}function Bc(s,f){return ec(516,4,s,f)}function vu(s,f){return tc(516,4,s,f)}function nc(s,f){return tc(4,2,s,f)}function Lc(s,f){return"function"==typeof f?(s=s(),f(s),function(){f(null)}):null!=f?(s=s(),f.current=s,function(){f.current=null}):void 0}function Uc(s,f,k){return k=null!=k?k.concat([s]):null,tc(4,2,Lc.bind(null,f,s),k)}function yu(){}function zc(s,f){return Ga().memoizedState=[s,void 0===f?null:f],s}function _u(s,f){var k=Il();f=void 0===f?null:f;var fe=k.memoizedState;return null!==fe&&null!==f&&oa(f,fe[1])?fe[0]:(k.memoizedState=[s,f],s)}function Gc(s,f){var k=Il();f=void 0===f?null:f;var fe=k.memoizedState;return null!==fe&&null!==f&&oa(f,fe[1])?fe[0]:(s=s(),k.memoizedState=[s,f],s)}function rc(s,f,k){var fe=te();A(98>fe?98:fe,function(){s(!0)}),A(97<fe?97:fe,function(){var ke=_o.suspense;_o.suspense=void 0===f?null:f;try{s(!1),k()}finally{_o.suspense=ke}})}function Ko(s,f,k){var fe=Wo(),ke=ja.suspense;ke={expirationTime:fe=ps(fe,s,ke),suspenseConfig:ke,action:k,eagerReducer:null,eagerState:null,next:null};var gt=f.pending;if(null===gt?ke.next=ke:(ke.next=gt.next,gt.next=ke),f.pending=ke,gt=s.alternate,s===Pi||null!==gt&&gt===Pi)Zu=!0,ke.expirationTime=Ts,Pi.expirationTime=Ts;else{if(0===s.expirationTime&&(null===gt||0===gt.expirationTime)&&null!==(gt=f.lastRenderedReducer))try{var Ct=f.lastRenderedState,Xt=gt(Ct,k);if(ke.eagerReducer=gt,ke.eagerState=Xt,ri(Xt,Ct))return}catch{}ks(s,fe)}}var $a={readContext:Si,useCallback:lo,useContext:lo,useEffect:lo,useImperativeHandle:lo,useLayoutEffect:lo,useMemo:lo,useReducer:lo,useRef:lo,useState:lo,useDebugValue:lo,useResponder:lo,useDeferredValue:lo,useTransition:lo},ic={readContext:Si,useCallback:zc,useContext:Si,useEffect:Bc,useImperativeHandle:function(s,f,k){return k=null!=k?k.concat([s]):null,ec(4,2,Lc.bind(null,f,s),k)},useLayoutEffect:function(s,f){return ec(4,2,s,f)},useMemo:function(s,f){var k=Ga();return f=void 0===f?null:f,s=s(),k.memoizedState=[s,f],s},useReducer:function(s,f,k){var fe=Ga();return f=void 0!==k?k(f):f,fe.memoizedState=fe.baseState=f,s=(s=fe.queue={pending:null,dispatch:null,lastRenderedReducer:s,lastRenderedState:f}).dispatch=Ko.bind(null,Pi,s),[fe.memoizedState,s]},useRef:function(s){return Ga().memoizedState={current:s}},useState:Tl,useDebugValue:yu,useResponder:Yu,useDeferredValue:function(s,f){var k=Tl(s),fe=k[0],ke=k[1];return Bc(function(){var gt=_o.suspense;_o.suspense=void 0===f?null:f;try{ke(s)}finally{_o.suspense=gt}},[s,f]),fe},useTransition:function(s){var f=Tl(!1),k=f[0];return[zc(rc.bind(null,f=f[1],s),[f,s]),k]}},vd={readContext:Si,useCallback:_u,useContext:Si,useEffect:vu,useImperativeHandle:Uc,useLayoutEffect:nc,useMemo:Gc,useReducer:hu,useRef:jc,useState:function(){return hu(sa)},useDebugValue:yu,useResponder:Yu,useDeferredValue:function(s,f){var k=hu(sa),fe=k[0],ke=k[1];return vu(function(){var gt=_o.suspense;_o.suspense=void 0===f?null:f;try{ke(s)}finally{_o.suspense=gt}},[s,f]),fe},useTransition:function(s){var f=hu(sa),k=f[0];return[_u(rc.bind(null,f=f[1],s),[f,s]),k]}},yd={readContext:Si,useCallback:_u,useContext:Si,useEffect:vu,useImperativeHandle:Uc,useLayoutEffect:nc,useMemo:Gc,useReducer:mu,useRef:jc,useState:function(){return mu(sa)},useDebugValue:yu,useResponder:Yu,useDeferredValue:function(s,f){var k=mu(sa),fe=k[0],ke=k[1];return vu(function(){var gt=_o.suspense;_o.suspense=void 0===f?null:f;try{ke(s)}finally{_o.suspense=gt}},[s,f]),fe},useTransition:function(s){var f=mu(sa),k=f[0];return[_u(rc.bind(null,f=f[1],s),[f,s]),k]}},us=null,Rs=null,aa=!1;function $c(s,f){var k=bo(5,null,null,0);k.elementType="DELETED",k.type="DELETED",k.stateNode=f,k.return=s,k.effectTag=8,null!==s.lastEffect?(s.lastEffect.nextEffect=k,s.lastEffect=k):s.firstEffect=s.lastEffect=k}function Vc(s,f){switch(s.tag){case 5:return null!==(f=1!==f.nodeType||s.type.toLowerCase()!==f.nodeName.toLowerCase()?null:f)&&(s.stateNode=f,!0);case 6:return null!==(f=""===s.pendingProps||3!==f.nodeType?null:f)&&(s.stateNode=f,!0);default:return!1}}function bu(s){if(aa){var f=Rs;if(f){var k=f;if(!Vc(s,f)){if(!(f=No(k.nextSibling))||!Vc(s,f))return s.effectTag=-1025&s.effectTag|2,aa=!1,void(us=s);$c(us,k)}us=s,Rs=No(f.firstChild)}else s.effectTag=-1025&s.effectTag|2,aa=!1,us=s}}function wu(s){for(s=s.return;null!==s&&5!==s.tag&&3!==s.tag&&13!==s.tag;)s=s.return;us=s}function la(s){if(s!==us)return!1;if(!aa)return wu(s),aa=!0,!1;var f=s.type;if(5!==s.tag||"head"!==f&&"body"!==f&&!Ws(f,s.memoizedProps))for(f=Rs;f;)$c(s,f),f=No(f.nextSibling);if(wu(s),13===s.tag){if(!(s=null!==(s=s.memoizedState)?s.dehydrated:null))throw Error($(317));e:{for(s=s.nextSibling,f=0;s;){if(8===s.nodeType){var k=s.data;if("/$"===k){if(0===f){Rs=No(s.nextSibling);break e}f--}else"$"!==k&&"$!"!==k&&"$?"!==k||f++}s=s.nextSibling}Rs=null}}else Rs=us?No(s.stateNode.nextSibling):null;return!0}function oc(){Rs=us=null,aa=!1}var _d=D.ReactCurrentOwner,qo=!1;function uo(s,f,k,fe){f.child=null===s?Ju(f,null,k,fe):Ua(f,s.child,k,fe)}function Hc(s,f,k,fe,ke){k=k.render;var gt=f.ref;return Xr(f,ke),fe=pu(s,f,k,fe,gt,ke),null===s||qo?(f.effectTag|=1,uo(s,f,fe,ke),f.child):(f.updateQueue=s.updateQueue,f.effectTag&=-517,s.expirationTime<=ke&&(s.expirationTime=0),cs(s,f,ke))}function sc(s,f,k,fe,ke,gt){if(null===s){var Ct=k.type;return"function"!=typeof Ct||$l(Ct)||void 0!==Ct.defaultProps||null!==k.compare||void 0!==k.defaultProps?((s=Vl(k.type,null,fe,null,f.mode,gt)).ref=f.ref,s.return=f,f.child=s):(f.tag=15,f.type=Ct,Kc(s,f,Ct,fe,ke,gt))}return Ct=s.child,ke<gt&&(k=null!==(k=k.compare)?k:qr)(ke=Ct.memoizedProps,fe)&&s.ref===f.ref?cs(s,f,gt):(f.effectTag|=1,(s=Ro(Ct,fe)).ref=f.ref,s.return=f,f.child=s)}function Kc(s,f,k,fe,ke,gt){return null!==s&&qr(s.memoizedProps,fe)&&s.ref===f.ref&&(qo=!1,ke<gt)?(f.expirationTime=s.expirationTime,cs(s,f,gt)):Va(s,f,k,fe,gt)}function qc(s,f){var k=f.ref;(null===s&&null!==k||null!==s&&s.ref!==k)&&(f.effectTag|=128)}function Va(s,f,k,fe,ke){var gt=Fi(k)?Go:ni.current;return gt=ss(f,gt),Xr(f,ke),k=pu(s,f,k,fe,gt,ke),null===s||qo?(f.effectTag|=1,uo(s,f,k,ke),f.child):(f.updateQueue=s.updateQueue,f.effectTag&=-517,s.expirationTime<=ke&&(s.expirationTime=0),cs(s,f,ke))}function ac(s,f,k,fe,ke){if(Fi(k)){var gt=!0;ea(f)}else gt=!1;if(Xr(f,ke),null===f.stateNode)null!==s&&(s.alternate=null,f.alternate=null,f.effectTag|=2),Xu(f,k,fe),Qu(f,k,fe,ke),fe=!0;else if(null===s){var Ct=f.stateNode,Xt=f.memoizedProps;Ct.props=Xt;var En=Ct.context,An=k.contextType;An="object"==typeof An&&null!==An?Si(An):ss(f,An=Fi(k)?Go:ni.current);var Yn=k.getDerivedStateFromProps,or="function"==typeof Yn||"function"==typeof Ct.getSnapshotBeforeUpdate;or||"function"!=typeof Ct.UNSAFE_componentWillReceiveProps&&"function"!=typeof Ct.componentWillReceiveProps||(Xt!==fe||En!==An)&&Vo(f,Ct,fe,An),Zi=!1;var Fr=f.memoizedState;Ct.state=Fr,ra(f,fe,Ct,ke),En=f.memoizedState,Xt!==fe||Fr!==En||Ei.current||Zi?("function"==typeof Yn&&(Ba(f,k,Yn,fe),En=f.memoizedState),(Xt=Zi||Wu(f,k,Xt,fe,Fr,En,An))?(or||"function"!=typeof Ct.UNSAFE_componentWillMount&&"function"!=typeof Ct.componentWillMount||("function"==typeof Ct.componentWillMount&&Ct.componentWillMount(),"function"==typeof Ct.UNSAFE_componentWillMount&&Ct.UNSAFE_componentWillMount()),"function"==typeof Ct.componentDidMount&&(f.effectTag|=4)):("function"==typeof Ct.componentDidMount&&(f.effectTag|=4),f.memoizedProps=fe,f.memoizedState=En),Ct.props=fe,Ct.state=En,Ct.context=An,fe=Xt):("function"==typeof Ct.componentDidMount&&(f.effectTag|=4),fe=!1)}else Ct=f.stateNode,Is(s,f),Xt=f.memoizedProps,Ct.props=f.type===f.elementType?Xt:mn(f.type,Xt),En=Ct.context,An="object"==typeof(An=k.contextType)&&null!==An?Si(An):ss(f,An=Fi(k)?Go:ni.current),(or="function"==typeof(Yn=k.getDerivedStateFromProps)||"function"==typeof Ct.getSnapshotBeforeUpdate)||"function"!=typeof Ct.UNSAFE_componentWillReceiveProps&&"function"!=typeof Ct.componentWillReceiveProps||(Xt!==fe||En!==An)&&Vo(f,Ct,fe,An),Zi=!1,Ct.state=En=f.memoizedState,ra(f,fe,Ct,ke),Fr=f.memoizedState,Xt!==fe||En!==Fr||Ei.current||Zi?("function"==typeof Yn&&(Ba(f,k,Yn,fe),Fr=f.memoizedState),(Yn=Zi||Wu(f,k,Xt,fe,En,Fr,An))?(or||"function"!=typeof Ct.UNSAFE_componentWillUpdate&&"function"!=typeof Ct.componentWillUpdate||("function"==typeof Ct.componentWillUpdate&&Ct.componentWillUpdate(fe,Fr,An),"function"==typeof Ct.UNSAFE_componentWillUpdate&&Ct.UNSAFE_componentWillUpdate(fe,Fr,An)),"function"==typeof Ct.componentDidUpdate&&(f.effectTag|=4),"function"==typeof Ct.getSnapshotBeforeUpdate&&(f.effectTag|=256)):("function"!=typeof Ct.componentDidUpdate||Xt===s.memoizedProps&&En===s.memoizedState||(f.effectTag|=4),"function"!=typeof Ct.getSnapshotBeforeUpdate||Xt===s.memoizedProps&&En===s.memoizedState||(f.effectTag|=256),f.memoizedProps=fe,f.memoizedState=Fr),Ct.props=fe,Ct.state=Fr,Ct.context=An,fe=Yn):("function"!=typeof Ct.componentDidUpdate||Xt===s.memoizedProps&&En===s.memoizedState||(f.effectTag|=4),"function"!=typeof Ct.getSnapshotBeforeUpdate||Xt===s.memoizedProps&&En===s.memoizedState||(f.effectTag|=256),fe=!1);return Rl(s,f,k,fe,gt,ke)}function Rl(s,f,k,fe,ke,gt){qc(s,f);var Ct=0!=(64&f.effectTag);if(!fe&&!Ct)return ke&&_l(f,k,!1),cs(s,f,gt);fe=f.stateNode,_d.current=f;var Xt=Ct&&"function"!=typeof k.getDerivedStateFromError?null:fe.render();return f.effectTag|=1,null!==s&&Ct?(f.child=Ua(f,s.child,null,gt),f.child=Ua(f,null,Xt,gt)):uo(s,f,Xt,gt),f.memoizedState=fe.state,ke&&_l(f,k,!0),f.child}function lc(s){var f=s.stateNode;f.pendingContext?vl(0,f.pendingContext,f.pendingContext!==f.context):f.context&&vl(0,f.context,!1),cu(s,f.containerInfo)}var cc,qa,fc,Ha={dehydrated:null,retryTime:0};function Ol(s,f,k){var Xt,fe=f.mode,ke=f.pendingProps,gt=gi.current,Ct=!1;if((Xt=0!=(64&f.effectTag))||(Xt=0!=(2&gt)&&(null===s||null!==s.memoizedState)),Xt?(Ct=!0,f.effectTag&=-65):null!==s&&null===s.memoizedState||void 0===ke.fallback||!0===ke.unstable_avoidThisFallback||(gt|=1),ui(gi,1&gt),null===s){if(void 0!==ke.fallback&&bu(f),Ct){if(Ct=ke.fallback,(ke=hs(null,fe,0,null)).return=f,0==(2&f.mode))for(ke.child=s=null!==f.memoizedState?f.child.child:f.child;null!==s;)s.return=ke,s=s.sibling;return(k=hs(Ct,fe,k,null)).return=f,ke.sibling=k,f.memoizedState=Ha,f.child=ke,k}return fe=ke.children,f.memoizedState=null,f.child=Ju(f,null,fe,k)}if(null!==s.memoizedState){if(fe=(s=s.child).sibling,Ct){if(ke=ke.fallback,(k=Ro(s,s.pendingProps)).return=f,0==(2&f.mode)&&(Ct=null!==f.memoizedState?f.child.child:f.child)!==s.child)for(k.child=Ct;null!==Ct;)Ct.return=k,Ct=Ct.sibling;return(fe=Ro(fe,ke)).return=f,k.sibling=fe,k.childExpirationTime=0,f.memoizedState=Ha,f.child=k,fe}return k=Ua(f,s.child,ke.children,k),f.memoizedState=null,f.child=k}if(s=s.child,Ct){if(Ct=ke.fallback,(ke=hs(null,fe,0,null)).return=f,ke.child=s,null!==s&&(s.return=ke),0==(2&f.mode))for(ke.child=s=null!==f.memoizedState?f.child.child:f.child;null!==s;)s.return=ke,s=s.sibling;return(k=hs(Ct,fe,k,null)).return=f,ke.sibling=k,k.effectTag|=2,ke.childExpirationTime=0,f.memoizedState=Ha,f.child=ke,k}return f.memoizedState=null,f.child=Ua(f,s,ke.children,k)}function uc(s,f){s.expirationTime<f&&(s.expirationTime=f);var k=s.alternate;null!==k&&k.expirationTime<f&&(k.expirationTime=f),di(s.return,f)}function Ka(s,f,k,fe,ke,gt){var Ct=s.memoizedState;null===Ct?s.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:fe,tail:k,tailExpiration:0,tailMode:ke,lastEffect:gt}:(Ct.isBackwards=f,Ct.rendering=null,Ct.renderingStartTime=0,Ct.last=fe,Ct.tail=k,Ct.tailExpiration=0,Ct.tailMode=ke,Ct.lastEffect=gt)}function Ml(s,f,k){var fe=f.pendingProps,ke=fe.revealOrder,gt=fe.tail;if(uo(s,f,fe.children,k),0!=(2&(fe=gi.current)))fe=1&fe|2,f.effectTag|=64;else{if(null!==s&&0!=(64&s.effectTag))e:for(s=f.child;null!==s;){if(13===s.tag)null!==s.memoizedState&&uc(s,k);else if(19===s.tag)uc(s,k);else if(null!==s.child){s.child.return=s,s=s.child;continue}if(s===f)break e;for(;null===s.sibling;){if(null===s.return||s.return===f)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}fe&=1}if(ui(gi,fe),0==(2&f.mode))f.memoizedState=null;else switch(ke){case"forwards":for(k=f.child,ke=null;null!==k;)null!==(s=k.alternate)&&null===du(s)&&(ke=k),k=k.sibling;null===(k=ke)?(ke=f.child,f.child=null):(ke=k.sibling,k.sibling=null),Ka(f,!1,ke,k,gt,f.lastEffect);break;case"backwards":for(k=null,ke=f.child,f.child=null;null!==ke;){if(null!==(s=ke.alternate)&&null===du(s)){f.child=ke;break}s=ke.sibling,ke.sibling=k,k=ke,ke=s}Ka(f,!0,k,null,gt,f.lastEffect);break;case"together":Ka(f,!1,null,null,void 0,f.lastEffect);break;default:f.memoizedState=null}return f.child}function cs(s,f,k){null!==s&&(f.dependencies=s.dependencies);var fe=f.expirationTime;if(0!==fe&&Ul(fe),f.childExpirationTime<k)return null;if(null!==s&&f.child!==s.child)throw Error($(153));if(null!==f.child){for(k=Ro(s=f.child,s.pendingProps),f.child=k,k.return=f;null!==s.sibling;)(k=k.sibling=Ro(s=s.sibling,s.pendingProps)).return=f;k.sibling=null}return f.child}function kl(s,f){switch(s.tailMode){case"hidden":f=s.tail;for(var k=null;null!==f;)null!==f.alternate&&(k=f),f=f.sibling;null===k?s.tail=null:k.sibling=null;break;case"collapsed":k=s.tail;for(var fe=null;null!==k;)null!==k.alternate&&(fe=k),k=k.sibling;null===fe?f||null===s.tail?s.tail=null:s.tail.sibling=null:fe.sibling=null}}function bd(s,f,k){var fe=f.pendingProps;switch(f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return Fi(f.type)&&Zs(),null;case 3:return za(),oi(Ei),oi(ni),(k=f.stateNode).pendingContext&&(k.context=k.pendingContext,k.pendingContext=null),null!==s&&null!==s.child||!la(f)||(f.effectTag|=4),null;case 5:Nc(f),k=ia(Pl.current);var ke=f.type;if(null!==s&&null!=f.stateNode)qa(s,f,ke,fe,k),s.ref!==f.ref&&(f.effectTag|=128);else{if(!fe){if(null===f.stateNode)throw Error($(166));return null}if(s=ia(Ho.current),la(f)){ke=f.type;var gt=f.memoizedProps;switch((fe=f.stateNode)[vr]=f,fe[$i]=gt,ke){case"iframe":case"object":case"embed":tr("load",fe);break;case"video":case"audio":for(s=0;s<Kn.length;s++)tr(Kn[s],fe);break;case"source":tr("error",fe);break;case"img":case"image":case"link":tr("error",fe),tr("load",fe);break;case"form":tr("reset",fe),tr("submit",fe);break;case"details":tr("toggle",fe);break;case"input":pn(fe,gt),tr("invalid",fe),no(k,"onChange");break;case"select":fe._wrapperState={wasMultiple:!!gt.multiple},tr("invalid",fe),no(k,"onChange");break;case"textarea":mr(fe,gt),tr("invalid",fe),no(k,"onChange")}for(var Ct in Fo(ke,gt),s=null,gt)if(gt.hasOwnProperty(Ct)){var Xt=gt[Ct];"children"===Ct?"string"==typeof Xt?fe.textContent!==Xt&&(s=["children",Xt]):"number"==typeof Xt&&fe.textContent!==""+Xt&&(s=["children",""+Xt]):be.hasOwnProperty(Ct)&&null!=Xt&&no(k,Ct)}switch(ke){case"input":Pt(fe),xn(fe,gt,!0);break;case"textarea":Pt(fe),Or(fe);break;case"select":case"option":break;default:"function"==typeof gt.onClick&&(fe.onclick=bs)}f.updateQueue=k=s,null!==k&&(f.effectTag|=4)}else{switch(Ct=9===k.nodeType?k:k.ownerDocument,s===Jo&&(s=Hr(ke)),s===Jo?"script"===ke?((s=Ct.createElement("div")).innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):"string"==typeof fe.is?s=Ct.createElement(ke,{is:fe.is}):(s=Ct.createElement(ke),"select"===ke&&(Ct=s,fe.multiple?Ct.multiple=!0:fe.size&&(Ct.size=fe.size))):s=Ct.createElementNS(s,ke),s[vr]=f,s[$i]=fe,cc(s,f),f.stateNode=s,Ct=Do(ke,fe),ke){case"iframe":case"object":case"embed":tr("load",s),Xt=fe;break;case"video":case"audio":for(Xt=0;Xt<Kn.length;Xt++)tr(Kn[Xt],s);Xt=fe;break;case"source":tr("error",s),Xt=fe;break;case"img":case"image":case"link":tr("error",s),tr("load",s),Xt=fe;break;case"form":tr("reset",s),tr("submit",s),Xt=fe;break;case"details":tr("toggle",s),Xt=fe;break;case"input":pn(s,fe),Xt=Bt(s,fe),tr("invalid",s),no(k,"onChange");break;case"option":Xt=ur(s,fe);break;case"select":s._wrapperState={wasMultiple:!!fe.multiple},Xt=y({},fe,{value:void 0}),tr("invalid",s),no(k,"onChange");break;case"textarea":mr(s,fe),Xt=ir(s,fe),tr("invalid",s),no(k,"onChange");break;default:Xt=fe}Fo(ke,Xt);var En=Xt;for(gt in En)if(En.hasOwnProperty(gt)){var An=En[gt];"style"===gt?Qi(s,An):"dangerouslySetInnerHTML"===gt?null!=(An=An?An.__html:void 0)&&pr(s,An):"children"===gt?"string"==typeof An?("textarea"!==ke||""!==An)&&Er(s,An):"number"==typeof An&&Er(s,""+An):"suppressContentEditableWarning"!==gt&&"suppressHydrationWarning"!==gt&&"autoFocus"!==gt&&(be.hasOwnProperty(gt)?null!=An&&no(k,gt):null!=An&&C(s,gt,An,Ct))}switch(ke){case"input":Pt(s),xn(s,fe,!1);break;case"textarea":Pt(s),Or(s);break;case"option":null!=fe.value&&s.setAttribute("value",""+Vt(fe.value));break;case"select":s.multiple=!!fe.multiple,null!=(k=fe.value)?Xn(s,!!fe.multiple,k,!1):null!=fe.defaultValue&&Xn(s,!!fe.multiple,fe.defaultValue,!0);break;default:"function"==typeof Xt.onClick&&(s.onclick=bs)}Ca(ke,fe)&&(f.effectTag|=4)}null!==f.ref&&(f.effectTag|=128)}return null;case 6:if(s&&null!=f.stateNode)fc(0,f,s.memoizedProps,fe);else{if("string"!=typeof fe&&null===f.stateNode)throw Error($(166));k=ia(Pl.current),ia(Ho.current),la(f)?(fe=f.memoizedProps,(k=f.stateNode)[vr]=f,k.nodeValue!==fe&&(f.effectTag|=4)):((k=(9===k.nodeType?k:k.ownerDocument).createTextNode(fe))[vr]=f,f.stateNode=k)}return null;case 13:return oi(gi),fe=f.memoizedState,0!=(64&f.effectTag)?(f.expirationTime=k,f):(k=null!==fe,fe=!1,null===s?void 0!==f.memoizedProps.fallback&&la(f):(fe=null!==(ke=s.memoizedState),k||null===ke||null!==(ke=s.child.sibling)&&(null!==(gt=f.firstEffect)?(f.firstEffect=ke,ke.nextEffect=gt):(f.firstEffect=f.lastEffect=ke,ke.nextEffect=null),ke.effectTag=8)),k&&!fe&&0!=(2&f.mode)&&(null===s&&!0!==f.memoizedProps.unstable_avoidThisFallback||0!=(1&gi.current)?Di===ua&&(Di=Au):((Di===ua||Di===Au)&&(Di=yc),0!==ca&&null!==Bi&&(Ls(Bi,Wi),xd(Bi,ca)))),(k||fe)&&(f.effectTag|=4),null);case 4:return za(),null;case 10:return Lr(f),null;case 19:if(oi(gi),null===(fe=f.memoizedState))return null;if(ke=0!=(64&f.effectTag),null===(gt=fe.rendering)){if(ke)kl(fe,!1);else if(Di!==ua||null!==s&&0!=(64&s.effectTag))for(gt=f.child;null!==gt;){if(null!==(s=du(gt))){for(f.effectTag|=64,kl(fe,!1),null!==(ke=s.updateQueue)&&(f.updateQueue=ke,f.effectTag|=4),null===fe.lastEffect&&(f.firstEffect=null),f.lastEffect=fe.lastEffect,fe=f.child;null!==fe;)gt=k,(ke=fe).effectTag&=2,ke.nextEffect=null,ke.firstEffect=null,ke.lastEffect=null,null===(s=ke.alternate)?(ke.childExpirationTime=0,ke.expirationTime=gt,ke.child=null,ke.memoizedProps=null,ke.memoizedState=null,ke.updateQueue=null,ke.dependencies=null):(ke.childExpirationTime=s.childExpirationTime,ke.expirationTime=s.expirationTime,ke.child=s.child,ke.memoizedProps=s.memoizedProps,ke.memoizedState=s.memoizedState,ke.updateQueue=s.updateQueue,ke.dependencies=null===(gt=s.dependencies)?null:{expirationTime:gt.expirationTime,firstContext:gt.firstContext,responders:gt.responders}),fe=fe.sibling;return ui(gi,1&gi.current|2),f.child}gt=gt.sibling}}else{if(!ke)if(null!==(s=du(gt))){if(f.effectTag|=64,ke=!0,null!==(k=s.updateQueue)&&(f.updateQueue=k,f.effectTag|=4),kl(fe,!0),null===fe.tail&&"hidden"===fe.tailMode&&!gt.alternate)return null!==(f=f.lastEffect=fe.lastEffect)&&(f.nextEffect=null),null}else 2*Yi()-fe.renderingStartTime>fe.tailExpiration&&1<k&&(f.effectTag|=64,ke=!0,kl(fe,!1),f.expirationTime=f.childExpirationTime=k-1);fe.isBackwards?(gt.sibling=f.child,f.child=gt):(null!==(k=fe.last)?k.sibling=gt:f.child=gt,fe.last=gt)}return null!==fe.tail?(0===fe.tailExpiration&&(fe.tailExpiration=Yi()+500),fe.rendering=k=fe.tail,fe.tail=k.sibling,fe.lastEffect=f.lastEffect,fe.renderingStartTime=Yi(),k.sibling=null,f=gi.current,ui(gi,ke?1&f|2:1&f),k):null}throw Error($(156,f.tag))}function Wc(s){switch(s.tag){case 1:Fi(s.type)&&Zs();var f=s.effectTag;return 4096&f?(s.effectTag=-4097&f|64,s):null;case 3:if(za(),oi(Ei),oi(ni),0!=(64&(f=s.effectTag)))throw Error($(285));return s.effectTag=-4097&f|64,s;case 5:return Nc(s),null;case 13:return oi(gi),4096&(f=s.effectTag)?(s.effectTag=-4097&f|64,s):null;case 19:return oi(gi),null;case 4:return za(),null;case 10:return Lr(s),null;default:return null}}function Wa(s,f){return{value:s,source:f,stack:dn(f)}}cc=function(s,f){for(var k=f.child;null!==k;){if(5===k.tag||6===k.tag)s.appendChild(k.stateNode);else if(4!==k.tag&&null!==k.child){k.child.return=k,k=k.child;continue}if(k===f)break;for(;null===k.sibling;){if(null===k.return||k.return===f)return;k=k.return}k.sibling.return=k.return,k=k.sibling}},qa=function(s,f,k,fe,ke){var gt=s.memoizedProps;if(gt!==fe){var Xt,En,Ct=f.stateNode;switch(ia(Ho.current),s=null,k){case"input":gt=Bt(Ct,gt),fe=Bt(Ct,fe),s=[];break;case"option":gt=ur(Ct,gt),fe=ur(Ct,fe),s=[];break;case"select":gt=y({},gt,{value:void 0}),fe=y({},fe,{value:void 0}),s=[];break;case"textarea":gt=ir(Ct,gt),fe=ir(Ct,fe),s=[];break;default:"function"!=typeof gt.onClick&&"function"==typeof fe.onClick&&(Ct.onclick=bs)}for(Xt in Fo(k,fe),k=null,gt)if(!fe.hasOwnProperty(Xt)&&gt.hasOwnProperty(Xt)&&null!=gt[Xt])if("style"===Xt)for(En in Ct=gt[Xt])Ct.hasOwnProperty(En)&&(k||(k={}),k[En]="");else"dangerouslySetInnerHTML"!==Xt&&"children"!==Xt&&"suppressContentEditableWarning"!==Xt&&"suppressHydrationWarning"!==Xt&&"autoFocus"!==Xt&&(be.hasOwnProperty(Xt)?s||(s=[]):(s=s||[]).push(Xt,null));for(Xt in fe){var An=fe[Xt];if(Ct=null!=gt?gt[Xt]:void 0,fe.hasOwnProperty(Xt)&&An!==Ct&&(null!=An||null!=Ct))if("style"===Xt)if(Ct){for(En in Ct)!Ct.hasOwnProperty(En)||An&&An.hasOwnProperty(En)||(k||(k={}),k[En]="");for(En in An)An.hasOwnProperty(En)&&Ct[En]!==An[En]&&(k||(k={}),k[En]=An[En])}else k||(s||(s=[]),s.push(Xt,k)),k=An;else"dangerouslySetInnerHTML"===Xt?(Ct=Ct?Ct.__html:void 0,null!=(An=An?An.__html:void 0)&&Ct!==An&&(s=s||[]).push(Xt,An)):"children"===Xt?Ct===An||"string"!=typeof An&&"number"!=typeof An||(s=s||[]).push(Xt,""+An):"suppressContentEditableWarning"!==Xt&&"suppressHydrationWarning"!==Xt&&(be.hasOwnProperty(Xt)?(null!=An&&no(ke,Xt),s||Ct===An||(s=[])):(s=s||[]).push(Xt,An))}k&&(s=s||[]).push("style",k),(f.updateQueue=ke=s)&&(f.effectTag|=4)}},fc=function(s,f,k,fe){k!==fe&&(f.effectTag|=4)};var Xc="function"==typeof WeakSet?WeakSet:Set;function Qc(s,f){var k=f.source,fe=f.stack;null===fe&&null!==k&&(fe=dn(k)),null!==k&&Ft(k.type),f=f.value,null!==s&&1===s.tag&&Ft(s.type);try{console.error(f)}catch(ke){setTimeout(function(){throw ke})}}function Jc(s){var f=s.ref;if(null!==f)if("function"==typeof f)try{f(null)}catch(k){Io(s,k)}else f.current=null}function Yc(s,f){switch(f.tag){case 0:case 11:case 15:case 22:case 3:case 5:case 6:case 4:case 17:return;case 1:if(256&f.effectTag&&null!==s){var k=s.memoizedProps,fe=s.memoizedState;f=(s=f.stateNode).getSnapshotBeforeUpdate(f.elementType===f.type?k:mn(f.type,k),fe),s.__reactInternalSnapshotBeforeUpdate=f}return}throw Error($(163))}function Zc(s,f){if(null!==(f=null!==(f=f.updateQueue)?f.lastEffect:null)){var k=f=f.next;do{if((k.tag&s)===s){var fe=k.destroy;k.destroy=void 0,void 0!==fe&&fe()}k=k.next}while(k!==f)}}function Xa(s,f){if(null!==(f=null!==(f=f.updateQueue)?f.lastEffect:null)){var k=f=f.next;do{(k.tag&s)===s&&(k.destroy=(0,k.create)()),k=k.next}while(k!==f)}}function ed(s,f,k){switch(k.tag){case 0:case 11:case 15:case 22:return void Xa(3,k);case 1:if(s=k.stateNode,4&k.effectTag)if(null===f)s.componentDidMount();else{var fe=k.elementType===k.type?f.memoizedProps:mn(k.type,f.memoizedProps);s.componentDidUpdate(fe,f.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}return void(null!==(f=k.updateQueue)&&qu(k,f,s));case 3:if(null!==(f=k.updateQueue)){if(s=null,null!==k.child)switch(k.child.tag){case 5:case 1:s=k.child.stateNode}qu(k,f,s)}return;case 5:return s=k.stateNode,void(null===f&&4&k.effectTag&&Ca(k.type,k.memoizedProps)&&s.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:return;case 13:return void(null===k.memoizedState&&(k=k.alternate,null!==k&&(k=k.memoizedState,null!==k&&(k=k.dehydrated,null!==k&&_t(k)))))}throw Error($(163))}function pc(s,f,k){switch("function"==typeof xc&&xc(f),f.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(s=f.updateQueue)&&null!==(s=s.lastEffect)){var fe=s.next;A(97<k?97:k,function(){var ke=fe;do{var gt=ke.destroy;if(void 0!==gt){var Ct=f;try{gt()}catch(Xt){Io(Ct,Xt)}}ke=ke.next}while(ke!==fe)})}break;case 1:Jc(f),"function"==typeof(k=f.stateNode).componentWillUnmount&&function wd(s,f){try{f.props=s.memoizedProps,f.state=s.memoizedState,f.componentWillUnmount()}catch(k){Io(s,k)}}(f,k);break;case 5:Jc(f);break;case 4:xu(s,f,k)}}function td(s){var f=s.alternate;s.return=null,s.child=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.alternate=null,s.firstEffect=null,s.lastEffect=null,s.pendingProps=null,s.memoizedProps=null,s.stateNode=null,null!==f&&td(f)}function hc(s){return 5===s.tag||3===s.tag||4===s.tag}function nd(s){e:{for(var f=s.return;null!==f;){if(hc(f)){var k=f;break e}f=f.return}throw Error($(160))}switch(f=k.stateNode,k.tag){case 5:var fe=!1;break;case 3:case 4:f=f.containerInfo,fe=!0;break;default:throw Error($(161))}16&k.effectTag&&(Er(f,""),k.effectTag&=-17);e:t:for(k=s;;){for(;null===k.sibling;){if(null===k.return||hc(k.return)){k=null;break e}k=k.return}for(k.sibling.return=k.return,k=k.sibling;5!==k.tag&&6!==k.tag&&18!==k.tag;){if(2&k.effectTag||null===k.child||4===k.tag)continue t;k.child.return=k,k=k.child}if(!(2&k.effectTag)){k=k.stateNode;break e}}fe?Cu(s,k,f):mc(s,k,f)}function Cu(s,f,k){var fe=s.tag,ke=5===fe||6===fe;if(ke)s=ke?s.stateNode:s.stateNode.instance,f?8===k.nodeType?k.parentNode.insertBefore(s,f):k.insertBefore(s,f):(8===k.nodeType?(f=k.parentNode).insertBefore(s,k):(f=k).appendChild(s),null!=(k=k._reactRootContainer)||null!==f.onclick||(f.onclick=bs));else if(4!==fe&&null!==(s=s.child))for(Cu(s,f,k),s=s.sibling;null!==s;)Cu(s,f,k),s=s.sibling}function mc(s,f,k){var fe=s.tag,ke=5===fe||6===fe;if(ke)s=ke?s.stateNode:s.stateNode.instance,f?k.insertBefore(s,f):k.appendChild(s);else if(4!==fe&&null!==(s=s.child))for(mc(s,f,k),s=s.sibling;null!==s;)mc(s,f,k),s=s.sibling}function xu(s,f,k){for(var gt,Ct,fe=f,ke=!1;;){if(!ke){ke=fe.return;e:for(;;){if(null===ke)throw Error($(160));switch(gt=ke.stateNode,ke.tag){case 5:Ct=!1;break e;case 3:case 4:gt=gt.containerInfo,Ct=!0;break e}ke=ke.return}ke=!0}if(5===fe.tag||6===fe.tag){e:for(var Xt=s,En=fe,An=k,Yn=En;;)if(pc(Xt,Yn,An),null!==Yn.child&&4!==Yn.tag)Yn.child.return=Yn,Yn=Yn.child;else{if(Yn===En)break e;for(;null===Yn.sibling;){if(null===Yn.return||Yn.return===En)break e;Yn=Yn.return}Yn.sibling.return=Yn.return,Yn=Yn.sibling}Ct?(En=fe.stateNode,8===(Xt=gt).nodeType?Xt.parentNode.removeChild(En):Xt.removeChild(En)):gt.removeChild(fe.stateNode)}else if(4===fe.tag){if(null!==fe.child){gt=fe.stateNode.containerInfo,Ct=!0,fe.child.return=fe,fe=fe.child;continue}}else if(pc(s,fe,k),null!==fe.child){fe.child.return=fe,fe=fe.child;continue}if(fe===f)break;for(;null===fe.sibling;){if(null===fe.return||fe.return===f)return;4===(fe=fe.return).tag&&(ke=!1)}fe.sibling.return=fe.return,fe=fe.sibling}}function Fl(s,f){switch(f.tag){case 0:case 11:case 14:case 15:case 22:return void Zc(3,f);case 1:case 12:case 17:return;case 5:var k=f.stateNode;if(null!=k){var fe=f.memoizedProps,ke=null!==s?s.memoizedProps:fe;s=f.type;var gt=f.updateQueue;if(f.updateQueue=null,null!==gt){for(k[$i]=fe,"input"===s&&"radio"===fe.type&&null!=fe.name&&_n(k,fe),Do(s,ke),f=Do(s,fe),ke=0;ke<gt.length;ke+=2){var Ct=gt[ke],Xt=gt[ke+1];"style"===Ct?Qi(k,Xt):"dangerouslySetInnerHTML"===Ct?pr(k,Xt):"children"===Ct?Er(k,Xt):C(k,Ct,Xt,f)}switch(s){case"input":Cn(k,fe);break;case"textarea":hr(k,fe);break;case"select":f=k._wrapperState.wasMultiple,k._wrapperState.wasMultiple=!!fe.multiple,null!=(s=fe.value)?Xn(k,!!fe.multiple,s,!1):f!==!!fe.multiple&&(null!=fe.defaultValue?Xn(k,!!fe.multiple,fe.defaultValue,!0):Xn(k,!!fe.multiple,fe.multiple?[]:"",!1))}}}return;case 6:if(null===f.stateNode)throw Error($(162));return void(f.stateNode.nodeValue=f.memoizedProps);case 3:return void((f=f.stateNode).hydrate&&(f.hydrate=!1,_t(f.containerInfo)));case 13:if(k=f,null===f.memoizedState?fe=!1:(fe=!0,k=f.child,Tu=Yi()),null!==k)e:for(s=k;;){if(5===s.tag)gt=s.stateNode,fe?"function"==typeof(gt=gt.style).setProperty?gt.setProperty("display","none","important"):gt.display="none":(gt=s.stateNode,ke=null!=(ke=s.memoizedProps.style)&&ke.hasOwnProperty("display")?ke.display:null,gt.style.display=ko("display",ke));else if(6===s.tag)s.stateNode.nodeValue=fe?"":s.memoizedProps;else{if(13===s.tag&&null!==s.memoizedState&&null===s.memoizedState.dehydrated){(gt=s.child.sibling).return=s,s=gt;continue}if(null!==s.child){s.child.return=s,s=s.child;continue}}if(s===k)break;for(;null===s.sibling;){if(null===s.return||s.return===k)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}return void Qa(f);case 19:return void Qa(f)}throw Error($(163))}function Qa(s){var f=s.updateQueue;if(null!==f){s.updateQueue=null;var k=s.stateNode;null===k&&(k=s.stateNode=new Xc),f.forEach(function(fe){var ke=nl.bind(null,s,fe);k.has(fe)||(k.add(fe),fe.then(ke,ke))})}}var rd="function"==typeof WeakMap?WeakMap:Map;function gc(s,f,k){(k=Ai(k,null)).tag=3,k.payload={element:null};var fe=f.value;return k.callback=function(){fs||(fs=!0,Nl=fe),Qc(s,f)},k}function id(s,f,k){(k=Ai(k,null)).tag=3;var fe=s.type.getDerivedStateFromError;if("function"==typeof fe){var ke=f.value;k.payload=function(){return Qc(s,f),fe(ke)}}var gt=s.stateNode;return null!==gt&&"function"==typeof gt.componentDidCatch&&(k.callback=function(){"function"!=typeof fe&&(null===da?da=new Set([this]):da.add(this),Qc(s,f));var Ct=f.stack;this.componentDidCatch(f.value,{componentStack:null!==Ct?Ct:""})}),k}var Bs,vc=Math.ceil,Eu=D.ReactCurrentDispatcher,od=D.ReactCurrentOwner,ua=0,Au=3,yc=4,Ar=0,Bi=null,Mr=null,Wi=0,Di=ua,Os=null,ds=1073741823,Ja=1073741823,Iu=null,ca=0,Ni=!1,Tu=0,cr=null,fs=!1,Nl=null,da=null,fa=!1,pa=null,Ya=90,Ms=null,Za=0,bc=null,jl=0;function Wo(){return 0!=(48&Ar)?1073741821-(Yi()/10|0):0!==jl?jl:jl=1073741821-(Yi()/10|0)}function ps(s,f,k){if(0==(2&(f=f.mode)))return 1073741823;var fe=te();if(0==(4&f))return 99===fe?1073741823:1073741822;if(0!=(16&Ar))return Wi;if(null!==k)s=Wt(s,0|k.timeoutMs||5e3,250);else switch(fe){case 99:s=1073741823;break;case 98:s=Wt(s,150,100);break;case 97:case 96:s=Wt(s,5e3,250);break;case 95:s=2;break;default:throw Error($(326))}return null!==Bi&&s===Wi&&--s,s}function ks(s,f){if(50<Za)throw Za=0,bc=null,Error($(185));if(null!==(s=el(s,f))){var k=te();1073741823===f?0!=(8&Ar)&&0==(48&Ar)?Ru(s):(to(s),0===Ar&&nt()):to(s),0==(4&Ar)||98!==k&&99!==k||(null===Ms?Ms=new Map([[s,f]]):(void 0===(k=Ms.get(s))||k>f)&&Ms.set(s,f))}}function el(s,f){s.expirationTime<f&&(s.expirationTime=f);var k=s.alternate;null!==k&&k.expirationTime<f&&(k.expirationTime=f);var fe=s.return,ke=null;if(null===fe&&3===s.tag)ke=s.stateNode;else for(;null!==fe;){if(k=fe.alternate,fe.childExpirationTime<f&&(fe.childExpirationTime=f),null!==k&&k.childExpirationTime<f&&(k.childExpirationTime=f),null===fe.return&&3===fe.tag){ke=fe.stateNode;break}fe=fe.return}return null!==ke&&(Bi===ke&&(Ul(f),Di===yc&&Ls(ke,Wi)),xd(ke,f)),ke}function Bl(s){var f=s.lastExpiredTime;if(0!==f||!dd(s,f=s.firstPendingTime))return f;var k=s.lastPingedTime;return 2>=(s=k>(s=s.nextKnownPendingLevel)?k:s)&&f!==s?0:s}function to(s){if(0!==s.lastExpiredTime)s.callbackExpirationTime=1073741823,s.callbackPriority=99,s.callbackNode=Pe(Ru.bind(null,s));else{var f=Bl(s),k=s.callbackNode;if(0===f)null!==k&&(s.callbackNode=null,s.callbackExpirationTime=0,s.callbackPriority=90);else{var fe=Wo();if(fe=1073741823===f?99:1===f||2===f?95:0>=(fe=10*(1073741821-f)-10*(1073741821-fe))?99:250>=fe?98:5250>=fe?97:95,null!==k){if(s.callbackExpirationTime===f&&s.callbackPriority>=fe)return;k!==xl&&Da(k)}s.callbackExpirationTime=f,s.callbackPriority=fe,f=1073741823===f?Pe(Ru.bind(null,s)):ie(fe,ad.bind(null,s),{timeout:10*(1073741821-f)-Yi()}),s.callbackNode=f}}}function ad(s,f){if(jl=0,f)return Du(s,f=Wo()),to(s),null;var k=Bl(s);if(0!==k){if(f=s.callbackNode,0!=(48&Ar))throw Error($(327));if(ma(),s===Bi&&k===Wi||Fs(s,k),null!==Mr){var fe=Ar;Ar|=16;for(var ke=Ds();;)try{ud();break}catch(Xt){ld(s,Xt)}if(Gr(),Ar=fe,Eu.current=ke,1===Di)throw f=Os,Fs(s,k),Ls(s,k),to(s),f;if(null===Mr)switch(ke=s.finishedWork=s.current.alternate,s.finishedExpirationTime=k,fe=Di,Bi=null,fe){case ua:case 1:throw Error($(345));case 2:Du(s,2<k?2:k);break;case Au:if(Ls(s,k),k===(fe=s.lastSuspendedTime)&&(s.nextKnownPendingLevel=Cc(ke)),1073741823===ds&&10<(ke=Tu+500-Yi())){if(Ni){var gt=s.lastPingedTime;if(0===gt||gt>=k){s.lastPingedTime=k,Fs(s,k);break}}if(0!==(gt=Bl(s))&&gt!==k)break;if(0!==fe&&fe!==k){s.lastPingedTime=fe;break}s.timeoutHandle=Ji(Ns.bind(null,s),ke);break}Ns(s);break;case yc:if(Ls(s,k),k===(fe=s.lastSuspendedTime)&&(s.nextKnownPendingLevel=Cc(ke)),Ni&&(0===(ke=s.lastPingedTime)||ke>=k)){s.lastPingedTime=k,Fs(s,k);break}if(0!==(ke=Bl(s))&&ke!==k)break;if(0!==fe&&fe!==k){s.lastPingedTime=fe;break}if(1073741823!==Ja?fe=10*(1073741821-Ja)-Yi():1073741823===ds?fe=0:(fe=10*(1073741821-ds)-5e3,0>(fe=(ke=Yi())-fe)&&(fe=0),(k=10*(1073741821-k)-ke)<(fe=(120>fe?120:480>fe?480:1080>fe?1080:1920>fe?1920:3e3>fe?3e3:4320>fe?4320:1960*vc(fe/1960))-fe)&&(fe=k)),10<fe){s.timeoutHandle=Ji(Ns.bind(null,s),fe);break}Ns(s);break;case 5:if(1073741823!==ds&&null!==Iu){gt=ds;var Ct=Iu;if(0>=(fe=0|Ct.busyMinDurationMs)?fe=0:(ke=0|Ct.busyDelayMs,fe=(gt=Yi()-(10*(1073741821-gt)-(0|Ct.timeoutMs||5e3)))<=ke?0:ke+fe-gt),10<fe){Ls(s,k),s.timeoutHandle=Ji(Ns.bind(null,s),fe);break}}Ns(s);break;default:throw Error($(329))}if(to(s),s.callbackNode===f)return ad.bind(null,s)}}return null}function Ru(s){var f=s.lastExpiredTime;if(f=0!==f?f:1073741823,0!=(48&Ar))throw Error($(327));if(ma(),s===Bi&&f===Wi||Fs(s,f),null!==Mr){var k=Ar;Ar|=16;for(var fe=Ds();;)try{Mu();break}catch(ke){ld(s,ke)}if(Gr(),Ar=k,Eu.current=fe,1===Di)throw k=Os,Fs(s,f),Ls(s,f),to(s),k;if(null!==Mr)throw Error($(261));s.finishedWork=s.current.alternate,s.finishedExpirationTime=f,Bi=null,Ns(s),to(s)}return null}function wc(s,f){var k=Ar;Ar&=-2,Ar|=8;try{return s(f)}finally{0===(Ar=k)&&nt()}}function Fs(s,f){s.finishedWork=null,s.finishedExpirationTime=0;var k=s.timeoutHandle;if(-1!==k&&(s.timeoutHandle=-1,il(k)),null!==Mr)for(k=Mr.return;null!==k;){var fe=k;switch(fe.tag){case 1:null!=(fe=fe.type.childContextTypes)&&Zs();break;case 3:za(),oi(Ei),oi(ni);break;case 5:Nc(fe);break;case 4:za();break;case 13:case 19:oi(gi);break;case 10:Lr(fe)}k=k.return}Bi=s,Mr=Ro(s.current,null),Wi=f,Di=ua,Os=null,Ja=ds=1073741823,Iu=null,ca=0,Ni=!1}function ld(s,f){for(;;){try{if(Gr(),fu.current=$a,Zu)for(var k=Pi.memoizedState;null!==k;){var fe=k.queue;null!==fe&&(fe.pending=null),k=k.next}if(Ts=0,qi=Ki=Pi=null,Zu=!1,null===Mr||null===Mr.return)return Di=1,Os=f,Mr=null;e:{var ke=s,gt=Mr.return,Ct=Mr,Xt=f;if(f=Wi,Ct.effectTag|=2048,Ct.firstEffect=Ct.lastEffect=null,null!==Xt&&"object"==typeof Xt&&"function"==typeof Xt.then){var En=Xt;if(0==(2&Ct.mode)){var An=Ct.alternate;An?(Ct.updateQueue=An.updateQueue,Ct.memoizedState=An.memoizedState,Ct.expirationTime=An.expirationTime):(Ct.updateQueue=null,Ct.memoizedState=null)}var Yn=0!=(1&gi.current),or=gt;do{var Fr;if(Fr=13===or.tag){var Qr=or.memoizedState;if(null!==Qr)Fr=null!==Qr.dehydrated;else{var co=or.memoizedProps;Fr=void 0!==co.fallback&&(!0!==co.unstable_avoidThisFallback||!Yn)}}if(Fr){var Li=or.updateQueue;if(null===Li){var yn=new Set;yn.add(En),or.updateQueue=yn}else Li.add(En);if(0==(2&or.mode)){if(or.effectTag|=64,Ct.effectTag&=-2981,1===Ct.tag)if(null===Ct.alternate)Ct.tag=17;else{var fn=Ai(1073741823,null);fn.tag=2,ls(Ct,fn)}Ct.expirationTime=1073741823;break e}Xt=void 0,Ct=f;var Rn=ke.pingCache;if(null===Rn?(Rn=ke.pingCache=new rd).set(En,Xt=new Set):void 0===(Xt=Rn.get(En))&&Rn.set(En,Xt=new Set),!Xt.has(Ct)){Xt.add(Ct);var Un=Fu.bind(null,ke,En,Ct);En.then(Un,Un)}or.effectTag|=4096,or.expirationTime=f;break e}or=or.return}while(null!==or);Xt=Error((Ft(Ct.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+dn(Ct))}5!==Di&&(Di=2),Xt=Wa(Xt,Ct),or=gt;do{switch(or.tag){case 3:En=Xt,or.effectTag|=4096,or.expirationTime=f,su(or,gc(or,En,f));break e;case 1:En=Xt;var gr=or.stateNode;if(0==(64&or.effectTag)&&("function"==typeof or.type.getDerivedStateFromError||null!==gr&&"function"==typeof gr.componentDidCatch&&(null===da||!da.has(gr)))){or.effectTag|=4096,or.expirationTime=f,su(or,id(or,En,f));break e}}or=or.return}while(null!==or)}Mr=zl(Mr)}catch(fi){f=fi;continue}break}}function Ds(){var s=Eu.current;return Eu.current=$a,null===s?$a:s}function Ou(s,f){s<ds&&2<s&&(ds=s),null!==f&&s<Ja&&2<s&&(Ja=s,Iu=f)}function Ul(s){s>ca&&(ca=s)}function Mu(){for(;null!==Mr;)Mr=ku(Mr)}function ud(){for(;null!==Mr&&!Hu();)Mr=ku(Mr)}function ku(s){var f=Bs(s.alternate,s,Wi);return s.memoizedProps=s.pendingProps,null===f&&(f=zl(s)),od.current=null,f}function zl(s){Mr=s;do{var f=Mr.alternate;if(s=Mr.return,0==(2048&Mr.effectTag)){if(f=bd(f,Mr,Wi),1===Wi||1!==Mr.childExpirationTime){for(var k=0,fe=Mr.child;null!==fe;){var ke=fe.expirationTime,gt=fe.childExpirationTime;ke>k&&(k=ke),gt>k&&(k=gt),fe=fe.sibling}Mr.childExpirationTime=k}if(null!==f)return f;null!==s&&0==(2048&s.effectTag)&&(null===s.firstEffect&&(s.firstEffect=Mr.firstEffect),null!==Mr.lastEffect&&(null!==s.lastEffect&&(s.lastEffect.nextEffect=Mr.firstEffect),s.lastEffect=Mr.lastEffect),1<Mr.effectTag&&(null!==s.lastEffect?s.lastEffect.nextEffect=Mr:s.firstEffect=Mr,s.lastEffect=Mr))}else{if(null!==(f=Wc(Mr)))return f.effectTag&=2047,f;null!==s&&(s.firstEffect=s.lastEffect=null,s.effectTag|=2048)}if(null!==(f=Mr.sibling))return f;Mr=s}while(null!==Mr);return Di===ua&&(Di=5),null}function Cc(s){var f=s.expirationTime;return f>(s=s.childExpirationTime)?f:s}function Ns(s){var f=te();return A(99,js.bind(null,s,f)),null}function js(s,f){do{ma()}while(null!==pa);if(0!=(48&Ar))throw Error($(327));var k=s.finishedWork,fe=s.finishedExpirationTime;if(null===k)return null;if(s.finishedWork=null,s.finishedExpirationTime=0,k===s.current)throw Error($(177));s.callbackNode=null,s.callbackExpirationTime=0,s.callbackPriority=90,s.nextKnownPendingLevel=0;var ke=Cc(k);if(s.firstPendingTime=ke,fe<=s.lastSuspendedTime?s.firstSuspendedTime=s.lastSuspendedTime=s.nextKnownPendingLevel=0:fe<=s.firstSuspendedTime&&(s.firstSuspendedTime=fe-1),fe<=s.lastPingedTime&&(s.lastPingedTime=0),fe<=s.lastExpiredTime&&(s.lastExpiredTime=0),s===Bi&&(Mr=Bi=null,Wi=0),1<k.effectTag?null!==k.lastEffect?(k.lastEffect.nextEffect=k,ke=k.firstEffect):ke=k:ke=k.firstEffect,null!==ke){var gt=Ar;Ar|=32,od.current=null,Hs=Vn;var Ct=_a();if(Gs(Ct)){if("selectionStart"in Ct)var Xt={start:Ct.selectionStart,end:Ct.selectionEnd};else{var En=(Xt=(Xt=Ct.ownerDocument)&&Xt.defaultView||window).getSelection&&Xt.getSelection();if(En&&0!==En.rangeCount){Xt=En.anchorNode;var An=En.anchorOffset,Yn=En.focusNode;En=En.focusOffset;var or=0,Fr=-1,Qr=-1,co=0,Li=0,yn=Ct,fn=null;t:for(;;){for(var Rn;yn!==Xt||0!==An&&3!==yn.nodeType||(Fr=or+An),yn!==Yn||0!==En&&3!==yn.nodeType||(Qr=or+En),3===yn.nodeType&&(or+=yn.nodeValue.length),null!==(Rn=yn.firstChild);)fn=yn,yn=Rn;for(;;){if(yn===Ct)break t;if(fn===Xt&&++co===An&&(Fr=or),fn===Yn&&++Li===En&&(Qr=or),null!==(Rn=yn.nextSibling))break;fn=(yn=fn).parentNode}yn=Rn}Xt=-1===Fr||-1===Qr?null:{start:Fr,end:Qr}}else Xt=null}Xt=Xt||{start:0,end:0}}else Xt=null;Ks={activeElementDetached:null,focusedElem:Ct,selectionRange:Xt},Vn=!1,cr=ke;do{try{tl()}catch(Dr){if(null===cr)throw Error($(330));Io(cr,Dr),cr=cr.nextEffect}}while(null!==cr);cr=ke;do{try{for(Ct=s,Xt=f;null!==cr;){var Un=cr.effectTag;if(16&Un&&Er(cr.stateNode,""),128&Un){var qn=cr.alternate;if(null!==qn){var ar=qn.ref;null!==ar&&("function"==typeof ar?ar(null):ar.current=null)}}switch(1038&Un){case 2:nd(cr),cr.effectTag&=-3;break;case 6:nd(cr),cr.effectTag&=-3,Fl(cr.alternate,cr);break;case 1024:cr.effectTag&=-1025;break;case 1028:cr.effectTag&=-1025,Fl(cr.alternate,cr);break;case 4:Fl(cr.alternate,cr);break;case 8:xu(Ct,An=cr,Xt),td(An)}cr=cr.nextEffect}}catch(Dr){if(null===cr)throw Error($(330));Io(cr,Dr),cr=cr.nextEffect}}while(null!==cr);if(ar=Ks,qn=_a(),Xt=ar.selectionRange,qn!==(Un=ar.focusedElem)&&Un&&Un.ownerDocument&&Yo(Un.ownerDocument.documentElement,Un)){for((null!==Xt&&Gs(Un)&&(qn=Xt.start,void 0===(ar=Xt.end)&&(ar=qn),"selectionStart"in Un?(Un.selectionStart=qn,Un.selectionEnd=Math.min(ar,Un.value.length)):(ar=(qn=Un.ownerDocument||document)&&qn.defaultView||window).getSelection&&(ar=ar.getSelection(),An=Un.textContent.length,Ct=Math.min(Xt.start,An),Xt=void 0===Xt.end?Ct:Math.min(Xt.end,An),!ar.extend&&Ct>Xt&&(An=Xt,Xt=Ct,Ct=An),An=Ui(Un,Ct),Yn=Ui(Un,Xt),An&&Yn&&(1!==ar.rangeCount||ar.anchorNode!==An.node||ar.anchorOffset!==An.offset||ar.focusNode!==Yn.node||ar.focusOffset!==Yn.offset)&&((qn=qn.createRange()).setStart(An.node,An.offset),ar.removeAllRanges(),Ct>Xt?(ar.addRange(qn),ar.extend(Yn.node,Yn.offset)):(qn.setEnd(Yn.node,Yn.offset),ar.addRange(qn))))),qn=[],ar=Un);ar=ar.parentNode;)1===ar.nodeType&&qn.push({element:ar,left:ar.scrollLeft,top:ar.scrollTop});for("function"==typeof Un.focus&&Un.focus(),Un=0;Un<qn.length;Un++)(ar=qn[Un]).element.scrollLeft=ar.left,ar.element.scrollTop=ar.top}Vn=!!Hs,Ks=Hs=null,s.current=k,cr=ke;do{try{for(Un=s;null!==cr;){var gr=cr.effectTag;if(36&gr&&ed(Un,cr.alternate,cr),128&gr){qn=void 0;var Ur=cr.ref;if(null!==Ur)qn=cr.stateNode,"function"==typeof Ur?Ur(qn):Ur.current=qn}cr=cr.nextEffect}}catch(Dr){if(null===cr)throw Error($(330));Io(cr,Dr),cr=cr.nextEffect}}while(null!==cr);cr=null,Ku(),Ar=gt}else s.current=k;if(fa)fa=!1,pa=s,Ya=f;else for(cr=ke;null!==cr;)f=cr.nextEffect,cr.nextEffect=null,cr=f;if(0===(f=s.firstPendingTime)&&(da=null),1073741823===f?s===bc?Za++:(Za=0,bc=s):Za=0,"function"==typeof To&&To(k.stateNode,fe),to(s),fs)throw fs=!1,s=Nl,Nl=null,s;return 0!=(8&Ar)||nt(),null}function tl(){for(;null!==cr;){var s=cr.effectTag;0!=(256&s)&&Yc(cr.alternate,cr),0==(512&s)||fa||(fa=!0,ie(97,function(){return ma(),null})),cr=cr.nextEffect}}function ma(){if(90!==Ya){var s=97<Ya?97:Ya;return Ya=90,A(s,Gl)}}function Gl(){if(null===pa)return!1;var s=pa;if(pa=null,0!=(48&Ar))throw Error($(331));var f=Ar;for(Ar|=32,s=s.current.firstEffect;null!==s;){try{var k=s;if(0!=(512&k.effectTag))switch(k.tag){case 0:case 11:case 15:case 22:Zc(5,k),Xa(5,k)}}catch(fe){if(null===s)throw Error($(330));Io(s,fe)}k=s.nextEffect,s.nextEffect=null,s=k}return Ar=f,nt(),!0}function Xo(s,f,k){ls(s,f=gc(s,f=Wa(k,f),1073741823)),null!==(s=el(s,1073741823))&&to(s)}function Io(s,f){if(3===s.tag)Xo(s,s,f);else for(var k=s.return;null!==k;){if(3===k.tag){Xo(k,s,f);break}if(1===k.tag){var fe=k.stateNode;if("function"==typeof k.type.getDerivedStateFromError||"function"==typeof fe.componentDidCatch&&(null===da||!da.has(fe))){ls(k,s=id(k,s=Wa(f,s),1073741823)),null!==(k=el(k,1073741823))&&to(k);break}}k=k.return}}function Fu(s,f,k){var fe=s.pingCache;null!==fe&&fe.delete(f),Bi===s&&Wi===k?Di===yc||Di===Au&&1073741823===ds&&Yi()-Tu<500?Fs(s,Wi):Ni=!0:dd(s,k)&&(0!==(f=s.lastPingedTime)&&f<k||(s.lastPingedTime=k,to(s)))}function nl(s,f){var k=s.stateNode;null!==k&&k.delete(f),0==(f=0)&&(f=ps(f=Wo(),s,null)),null!==(s=el(s,f))&&to(s)}Bs=function(s,f,k){var fe=f.expirationTime;if(null!==s){var ke=f.pendingProps;if(s.memoizedProps!==ke||Ei.current)qo=!0;else{if(fe<k){switch(qo=!1,f.tag){case 3:lc(f),oc();break;case 5:if(gd(f),4&f.mode&&1!==k&&ke.hidden)return f.expirationTime=f.childExpirationTime=1,null;break;case 1:Fi(f.type)&&ea(f);break;case 4:cu(f,f.stateNode.containerInfo);break;case 10:fe=f.memoizedProps.value,ui(Pn,(ke=f.type._context)._currentValue),ke._currentValue=fe;break;case 13:if(null!==f.memoizedState)return 0!==(fe=f.child.childExpirationTime)&&fe>=k?Ol(s,f,k):(ui(gi,1&gi.current),null!==(f=cs(s,f,k))?f.sibling:null);ui(gi,1&gi.current);break;case 19:if(fe=f.childExpirationTime>=k,0!=(64&s.effectTag)){if(fe)return Ml(s,f,k);f.effectTag|=64}if(null!==(ke=f.memoizedState)&&(ke.rendering=null,ke.tail=null),ui(gi,gi.current),!fe)return null}return cs(s,f,k)}qo=!1}}else qo=!1;switch(f.expirationTime=0,f.tag){case 2:if(fe=f.type,null!==s&&(s.alternate=null,f.alternate=null,f.effectTag|=2),s=f.pendingProps,ke=ss(f,ni.current),Xr(f,k),ke=pu(null,f,fe,s,ke,k),f.effectTag|=1,"object"==typeof ke&&null!==ke&&"function"==typeof ke.render&&void 0===ke.$$typeof){if(f.tag=1,f.memoizedState=null,f.updateQueue=null,Fi(fe)){var gt=!0;ea(f)}else gt=!1;f.memoizedState=null!=ke.state?ke.state:null,$o(f);var Ct=fe.getDerivedStateFromProps;"function"==typeof Ct&&Ba(f,fe,Ct,s),ke.updater=La,f.stateNode=ke,ke._reactInternalFiber=f,Qu(f,fe,s,k),f=Rl(null,f,fe,!0,gt,k)}else f.tag=0,uo(null,f,ke,k),f=f.child;return f;case 16:e:{if(ke=f.elementType,null!==s&&(s.alternate=null,f.alternate=null,f.effectTag|=2),s=f.pendingProps,function wt(s){if(-1===s._status){s._status=0;var f=s._ctor;f=f(),s._result=f,f.then(function(k){0===s._status&&(k=k.default,s._status=1,s._result=k)},function(k){0===s._status&&(s._status=2,s._result=k)})}}(ke),1!==ke._status)throw ke._result;switch(f.type=ke=ke._result,gt=f.tag=function Cd(s){if("function"==typeof s)return $l(s)?1:0;if(null!=s){if((s=s.$$typeof)===Lt)return 11;if(s===Ot)return 14}return 2}(ke),s=mn(ke,s),gt){case 0:f=Va(null,f,ke,s,k);break e;case 1:f=ac(null,f,ke,s,k);break e;case 11:f=Hc(null,f,ke,s,k);break e;case 14:f=sc(null,f,ke,mn(ke.type,s),fe,k);break e}throw Error($(306,ke,""))}return f;case 0:return ke=f.pendingProps,Va(s,f,fe=f.type,ke=f.elementType===fe?ke:mn(fe,ke),k);case 1:return ke=f.pendingProps,ac(s,f,fe=f.type,ke=f.elementType===fe?ke:mn(fe,ke),k);case 3:if(lc(f),fe=f.updateQueue,null===s||null===fe)throw Error($(282));if(fe=f.pendingProps,ke=null!==(ke=f.memoizedState)?ke.element:null,Is(s,f),ra(f,fe,null,k),(fe=f.memoizedState.element)===ke)oc(),f=cs(s,f,k);else{if((ke=f.stateNode.hydrate)&&(Rs=No(f.stateNode.containerInfo.firstChild),us=f,ke=aa=!0),ke)for(k=Ju(f,null,fe,k),f.child=k;k;)k.effectTag=-3&k.effectTag|1024,k=k.sibling;else uo(s,f,fe,k),oc();f=f.child}return f;case 5:return gd(f),null===s&&bu(f),gt=null!==s?s.memoizedProps:null,Ct=(ke=f.pendingProps).children,Ws(fe=f.type,ke)?Ct=null:null!==gt&&Ws(fe,gt)&&(f.effectTag|=16),qc(s,f),4&f.mode&&1!==k&&ke.hidden?(f.expirationTime=f.childExpirationTime=1,f=null):(uo(s,f,Ct,k),f=f.child),f;case 6:return null===s&&bu(f),null;case 13:return Ol(s,f,k);case 4:return cu(f,f.stateNode.containerInfo),fe=f.pendingProps,null===s?f.child=Ua(f,null,fe,k):uo(s,f,fe,k),f.child;case 11:return ke=f.pendingProps,Hc(s,f,fe=f.type,ke=f.elementType===fe?ke:mn(fe,ke),k);case 7:return uo(s,f,f.pendingProps,k),f.child;case 8:case 12:return uo(s,f,f.pendingProps.children,k),f.child;case 10:e:{fe=f.type._context,Ct=f.memoizedProps,gt=(ke=f.pendingProps).value;var Xt=f.type._context;if(ui(Pn,Xt._currentValue),Xt._currentValue=gt,null!==Ct)if(0==(gt=ri(Xt=Ct.value,gt)?0:0|("function"==typeof fe._calculateChangedBits?fe._calculateChangedBits(Xt,gt):1073741823))){if(Ct.children===ke.children&&!Ei.current){f=cs(s,f,k);break e}}else for(null!==(Xt=f.child)&&(Xt.return=f);null!==Xt;){var En=Xt.dependencies;if(null!==En){Ct=Xt.child;for(var An=En.firstContext;null!==An;){if(An.context===fe&&0!=(An.observedBits&gt)){1===Xt.tag&&((An=Ai(k,null)).tag=2,ls(Xt,An)),Xt.expirationTime<k&&(Xt.expirationTime=k),null!==(An=Xt.alternate)&&An.expirationTime<k&&(An.expirationTime=k),di(Xt.return,k),En.expirationTime<k&&(En.expirationTime=k);break}An=An.next}}else Ct=10===Xt.tag&&Xt.type===f.type?null:Xt.child;if(null!==Ct)Ct.return=Xt;else for(Ct=Xt;null!==Ct;){if(Ct===f){Ct=null;break}if(null!==(Xt=Ct.sibling)){Xt.return=Ct.return,Ct=Xt;break}Ct=Ct.return}Xt=Ct}uo(s,f,ke.children,k),f=f.child}return f;case 9:return ke=f.type,fe=(gt=f.pendingProps).children,Xr(f,k),fe=fe(ke=Si(ke,gt.unstable_observedBits)),f.effectTag|=1,uo(s,f,fe,k),f.child;case 14:return gt=mn(ke=f.type,f.pendingProps),sc(s,f,ke,gt=mn(ke.type,gt),fe,k);case 15:return Kc(s,f,f.type,f.pendingProps,fe,k);case 17:return ke=f.pendingProps,ke=f.elementType===(fe=f.type)?ke:mn(fe,ke),null!==s&&(s.alternate=null,f.alternate=null,f.effectTag|=2),f.tag=1,Fi(fe)?(s=!0,ea(f)):s=!1,Xr(f,k),Xu(f,fe,ke),Qu(f,fe,ke,k),Rl(null,f,fe,!0,s,k);case 19:return Ml(s,f,k)}throw Error($(156,f.tag))};var To=null,xc=null;function cd(s,f,k,fe){this.tag=s,this.key=k,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=fe,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function bo(s,f,k,fe){return new cd(s,f,k,fe)}function $l(s){return!(!(s=s.prototype)||!s.isReactComponent)}function Ro(s,f){var k=s.alternate;return null===k?((k=bo(s.tag,f,s.key,s.mode)).elementType=s.elementType,k.type=s.type,k.stateNode=s.stateNode,k.alternate=s,s.alternate=k):(k.pendingProps=f,k.effectTag=0,k.nextEffect=null,k.firstEffect=null,k.lastEffect=null),k.childExpirationTime=s.childExpirationTime,k.expirationTime=s.expirationTime,k.child=s.child,k.memoizedProps=s.memoizedProps,k.memoizedState=s.memoizedState,k.updateQueue=s.updateQueue,k.dependencies=null===(f=s.dependencies)?null:{expirationTime:f.expirationTime,firstContext:f.firstContext,responders:f.responders},k.sibling=s.sibling,k.index=s.index,k.ref=s.ref,k}function Vl(s,f,k,fe,ke,gt){var Ct=2;if(fe=s,"function"==typeof s)$l(s)&&(Ct=1);else if("string"==typeof s)Ct=5;else e:switch(s){case Me:return hs(k.children,ke,gt,f);case Ue:Ct=8,ke|=7;break;case Qe:Ct=8,ke|=1;break;case st:return(s=bo(12,k,f,8|ke)).elementType=st,s.type=st,s.expirationTime=gt,s;case zt:return(s=bo(13,k,f,ke)).type=zt,s.elementType=zt,s.expirationTime=gt,s;case $e:return(s=bo(19,k,f,ke)).elementType=$e,s.expirationTime=gt,s;default:if("object"==typeof s&&null!==s)switch(s.$$typeof){case Ut:Ct=10;break e;case qt:Ct=9;break e;case Lt:Ct=11;break e;case Ot:Ct=14;break e;case Ke:Ct=16,fe=null;break e;case rt:Ct=22;break e}throw Error($(130,null==s?s:typeof s,""))}return(f=bo(Ct,k,f,ke)).elementType=s,f.type=fe,f.expirationTime=gt,f}function hs(s,f,k,fe){return(s=bo(7,s,fe,f)).expirationTime=k,s}function Hl(s,f,k){return(s=bo(6,s,null,f)).expirationTime=k,s}function Ec(s,f,k){return(f=bo(4,null!==s.children?s.children:[],s.key,f)).expirationTime=k,f.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},f}function Sc(s,f,k){this.tag=f,this.current=null,this.containerInfo=s,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=k,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function dd(s,f){var k=s.firstSuspendedTime;return s=s.lastSuspendedTime,0!==k&&k>=f&&s<=f}function Ls(s,f){var k=s.firstSuspendedTime,fe=s.lastSuspendedTime;k<f&&(s.firstSuspendedTime=f),(fe>f||0===k)&&(s.lastSuspendedTime=f),f<=s.lastPingedTime&&(s.lastPingedTime=0),f<=s.lastExpiredTime&&(s.lastExpiredTime=0)}function xd(s,f){f>s.firstPendingTime&&(s.firstPendingTime=f);var k=s.firstSuspendedTime;0!==k&&(f>=k?s.firstSuspendedTime=s.lastSuspendedTime=s.nextKnownPendingLevel=0:f>=s.lastSuspendedTime&&(s.lastSuspendedTime=f+1),f>s.nextKnownPendingLevel&&(s.nextKnownPendingLevel=f))}function Du(s,f){var k=s.lastExpiredTime;(0===k||k>f)&&(s.lastExpiredTime=f)}function Nu(s,f,k,fe){var ke=f.current,gt=Wo(),Ct=ja.suspense;gt=ps(gt,ke,Ct);e:if(k){t:{if(T(k=k._reactInternalFiber)!==k||1!==k.tag)throw Error($(170));var Xt=k;do{switch(Xt.tag){case 3:Xt=Xt.stateNode.context;break t;case 1:if(Fi(Xt.type)){Xt=Xt.stateNode.__reactInternalMemoizedMergedChildContext;break t}}Xt=Xt.return}while(null!==Xt);throw Error($(171))}if(1===k.tag){var En=k.type;if(Fi(En)){k=yl(k,En,Xt);break e}}k=Xt}else k=zo;return null===f.context?f.context=k:f.pendingContext=k,(f=Ai(gt,Ct)).payload={element:s},null!==(fe=void 0===fe?null:fe)&&(f.callback=fe),ls(ke,f),ks(ke,gt),gt}function Kl(s){return(s=s.current).child?s.child.stateNode:null}function Ac(s,f){null!==(s=s.memoizedState)&&null!==s.dehydrated&&s.retryTime<f&&(s.retryTime=f)}function ga(s,f){Ac(s,f),(s=s.alternate)&&Ac(s,f)}function ql(s,f,k){var fe=new Sc(s,f,k=null!=k&&!0===k.hydrate),ke=bo(3,null,null,2===f?7:1===f?3:0);fe.current=ke,ke.stateNode=fe,$o(ke),s[jr]=fe.current,k&&0!==f&&function rr(s,f){var k=$r(f);Jn.forEach(function(fe){oe(fe,f,k)}),er.forEach(function(fe){oe(fe,f,k)})}(0,9===s.nodeType?s:s.ownerDocument),this._internalRoot=fe}function va(s){return!(!s||1!==s.nodeType&&9!==s.nodeType&&11!==s.nodeType&&(8!==s.nodeType||" react-mount-point-unstable "!==s.nodeValue))}function Oo(s,f,k,fe,ke){var gt=k._reactRootContainer;if(gt){var Ct=gt._internalRoot;if("function"==typeof ke){var Xt=ke;ke=function(){var An=Kl(Ct);Xt.call(An)}}Nu(f,Ct,s,ke)}else{if(gt=k._reactRootContainer=function fd(s,f){if(f||(f=!(!(f=s?9===s.nodeType?s.documentElement:s.firstChild:null)||1!==f.nodeType||!f.hasAttribute("data-reactroot"))),!f)for(var k;k=s.lastChild;)s.removeChild(k);return new ql(s,0,f?{hydrate:!0}:void 0)}(k,fe),Ct=gt._internalRoot,"function"==typeof ke){var En=ke;ke=function(){var An=Kl(Ct);En.call(An)}}wc(function(){Nu(f,Ct,s,ke)})}return Kl(Ct)}ql.prototype.render=function(s){Nu(s,this._internalRoot,null,null)},ql.prototype.unmount=function(){var s=this._internalRoot,f=s.containerInfo;Nu(null,s,null,function(){f[jr]=null})},O=function(s){if(13===s.tag){var f=Wt(Wo(),150,100);ks(s,f),ga(s,f)}},I=function(s){13===s.tag&&(ks(s,3),ga(s,3))},ce=function(s){if(13===s.tag){var f=Wo();ks(s,f=ps(f,s,null)),ga(s,f)}},_=function(s,f,k){switch(f){case"input":if(Cn(s,k),f=k.name,"radio"===k.type&&null!=f){for(k=s;k.parentNode;)k=k.parentNode;for(k=k.querySelectorAll("input[name="+JSON.stringify(""+f)+'][type="radio"]'),f=0;f<k.length;f++){var fe=k[f];if(fe!==s&&fe.form===s.form){var ke=wo(fe);if(!ke)throw Error($(90));Yt(fe),Cn(fe,ke)}}}break;case"textarea":hr(s,k);break;case"select":null!=(f=k.value)&&Xn(s,!!k.multiple,f,!1)}},se=function ha(s,f){var k=Ar;Ar|=1;try{return s(f)}finally{0===(Ar=k)&&nt()}},ze=function(s,f,k,fe,ke){var gt=Ar;Ar|=4;try{return A(98,s.bind(null,f,k,fe,ke))}finally{0===(Ar=gt)&&nt()}},Ge=function(){0==(49&Ar)&&(function Ll(){if(null!==Ms){var s=Ms;Ms=null,s.forEach(function(f,k){Du(k,f),to(k)}),nt()}}(),ma())},xe=function(s,f){var k=Ar;Ar|=2;try{return s(f)}finally{0===(Ar=k)&&nt()}};(function(s){var f=s.findFiberByHostInstance;!function rl(s){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(f.isDisabled||!f.supportsFiber)return!0;try{var k=f.inject(s);To=function(fe){try{f.onCommitFiberRoot(k,fe,void 0,64==(64&fe.current.effectTag))}catch{}},xc=function(fe){try{f.onCommitFiberUnmount(k,fe)}catch{}}}catch{}}(y({},s,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(k){return null===(k=function ge(s){if(s=function J(s){var f=s.alternate;if(!f){if(null===(f=T(s)))throw Error($(188));return f!==s?null:s}for(var k=s,fe=f;;){var ke=k.return;if(null===ke)break;var gt=ke.alternate;if(null===gt){if(null!==(fe=ke.return)){k=fe;continue}break}if(ke.child===gt.child){for(gt=ke.child;gt;){if(gt===k)return Y(ke),s;if(gt===fe)return Y(ke),f;gt=gt.sibling}throw Error($(188))}if(k.return!==fe.return)k=ke,fe=gt;else{for(var Ct=!1,Xt=ke.child;Xt;){if(Xt===k){Ct=!0,k=ke,fe=gt;break}if(Xt===fe){Ct=!0,fe=ke,k=gt;break}Xt=Xt.sibling}if(!Ct){for(Xt=gt.child;Xt;){if(Xt===k){Ct=!0,k=gt,fe=ke;break}if(Xt===fe){Ct=!0,fe=gt,k=ke;break}Xt=Xt.sibling}if(!Ct)throw Error($(189))}}if(k.alternate!==fe)throw Error($(190))}if(3!==k.tag)throw Error($(188));return k.stateNode.current===k?s:f}(s),!s)return null;for(var f=s;;){if(5===f.tag||6===f.tag)return f;if(f.child)f.child.return=f,f=f.child;else{if(f===s)break;for(;!f.sibling;){if(!f.return||f.return===s)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}}return null}(k))?null:k.stateNode},findFiberByHostInstance:function(k){return f?f(k):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:Mi,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}),K.render=function(s,f,k){if(!va(f))throw Error($(200));return Oo(null,s,f,!1,k)},K.unmountComponentAtNode=function(s){if(!va(s))throw Error($(40));return!!s._reactRootContainer&&(wc(function(){Oo(null,null,s,!1,function(){s._reactRootContainer=null,s[jr]=null})}),!0)}},7628:(it,K,u)=>{(function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}})(),it.exports=u(9877)},298:(it,K,u)=>{var e=u(1856),n="function"==typeof Symbol&&Symbol.for,y=n?Symbol.for("react.element"):60103,x=n?Symbol.for("react.portal"):60106,$=n?Symbol.for("react.fragment"):60107,c=n?Symbol.for("react.strict_mode"):60108,d=n?Symbol.for("react.profiler"):60114,p=n?Symbol.for("react.provider"):60109,z=n?Symbol.for("react.context"):60110,S=n?Symbol.for("react.forward_ref"):60112,V=n?Symbol.for("react.suspense"):60113,N=n?Symbol.for("react.memo"):60115,U=n?Symbol.for("react.lazy"):60116,H="function"==typeof Symbol&&Symbol.iterator;function Q(Ye){for(var ht="https://reactjs.org/docs/error-decoder.html?invariant="+Ye,Se=1;Se<arguments.length;Se++)ht+="&args[]="+encodeURIComponent(arguments[Se]);return"Minified React error #"+Ye+"; visit "+ht+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ue={};function G(Ye,ht,Se){this.props=Ye,this.context=ht,this.refs=ue,this.updater=Se||Z}function X(){}function ee(Ye,ht,Se){this.props=Ye,this.context=ht,this.refs=ue,this.updater=Se||Z}G.prototype.isReactComponent={},G.prototype.setState=function(Ye,ht){if("object"!=typeof Ye&&"function"!=typeof Ye&&null!=Ye)throw Error(Q(85));this.updater.enqueueSetState(this,Ye,ht,"setState")},G.prototype.forceUpdate=function(Ye){this.updater.enqueueForceUpdate(this,Ye,"forceUpdate")},X.prototype=G.prototype;var ve=ee.prototype=new X;ve.constructor=ee,e(ve,G.prototype),ve.isPureReactComponent=!0;var Oe={current:null},Le=Object.prototype.hasOwnProperty,be={key:!0,ref:!0,__self:!0,__source:!0};function m(Ye,ht,Se){var he,pe={},Fe=null,Je=null;if(null!=ht)for(he in void 0!==ht.ref&&(Je=ht.ref),void 0!==ht.key&&(Fe=""+ht.key),ht)Le.call(ht,he)&&!be.hasOwnProperty(he)&&(pe[he]=ht[he]);var we=arguments.length-2;if(1===we)pe.children=Se;else if(1<we){for(var De=Array(we),ut=0;ut<we;ut++)De[ut]=arguments[ut+2];pe.children=De}if(Ye&&Ye.defaultProps)for(he in we=Ye.defaultProps)void 0===pe[he]&&(pe[he]=we[he]);return{$$typeof:y,type:Ye,key:Fe,ref:Je,props:pe,_owner:Oe.current}}function b(Ye){return"object"==typeof Ye&&null!==Ye&&Ye.$$typeof===y}var R=/\/+/g,E=[];function ne(Ye,ht,Se,he){if(E.length){var pe=E.pop();return pe.result=Ye,pe.keyPrefix=ht,pe.func=Se,pe.context=he,pe.count=0,pe}return{result:Ye,keyPrefix:ht,func:Se,context:he,count:0}}function me(Ye){Ye.result=null,Ye.keyPrefix=null,Ye.func=null,Ye.context=null,Ye.count=0,10>E.length&&E.push(Ye)}function Ee(Ye,ht,Se,he){var pe=typeof Ye;("undefined"===pe||"boolean"===pe)&&(Ye=null);var Fe=!1;if(null===Ye)Fe=!0;else switch(pe){case"string":case"number":Fe=!0;break;case"object":switch(Ye.$$typeof){case y:case x:Fe=!0}}if(Fe)return Se(he,Ye,""===ht?"."+ze(Ye,0):ht),1;if(Fe=0,ht=""===ht?".":ht+":",Array.isArray(Ye))for(var Je=0;Je<Ye.length;Je++){var we=ht+ze(pe=Ye[Je],Je);Fe+=Ee(pe,we,Se,he)}else if("function"==typeof(we=null===Ye||"object"!=typeof Ye?null:"function"==typeof(we=H&&Ye[H]||Ye["@@iterator"])?we:null))for(Ye=we.call(Ye),Je=0;!(pe=Ye.next()).done;)Fe+=Ee(pe=pe.value,we=ht+ze(pe,Je++),Se,he);else if("object"===pe)throw Se=""+Ye,Error(Q(31,"[object Object]"===Se?"object with keys {"+Object.keys(Ye).join(", ")+"}":Se,""));return Fe}function se(Ye,ht,Se){return null==Ye?0:Ee(Ye,"",ht,Se)}function ze(Ye,ht){return"object"==typeof Ye&&null!==Ye&&null!=Ye.key?function _(Ye){var ht={"=":"=0",":":"=2"};return"$"+(""+Ye).replace(/[=:]/g,function(Se){return ht[Se]})}(Ye.key):ht.toString(36)}function Ge(Ye,ht){Ye.func.call(Ye.context,ht,Ye.count++)}function xe(Ye,ht,Se){var he=Ye.result,pe=Ye.keyPrefix;Ye=Ye.func.call(Ye.context,ht,Ye.count++),Array.isArray(Ye)?qe(Ye,he,Se,function(Fe){return Fe}):null!=Ye&&(b(Ye)&&(Ye=function P(Ye,ht){return{$$typeof:y,type:Ye.type,key:ht,ref:Ye.ref,props:Ye.props,_owner:Ye._owner}}(Ye,pe+(!Ye.key||ht&&ht.key===Ye.key?"":(""+Ye.key).replace(R,"$&/")+"/")+Se)),he.push(Ye))}function qe(Ye,ht,Se,he,pe){var Fe="";null!=Se&&(Fe=(""+Se).replace(R,"$&/")+"/"),se(Ye,xe,ht=ne(ht,Fe,he,pe)),me(ht)}var Xe={current:null};function lt(){var Ye=Xe.current;if(null===Ye)throw Error(Q(321));return Ye}var He={ReactCurrentDispatcher:Xe,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:Oe,IsSomeRendererActing:{current:!1},assign:e};K.Children={map:function(Ye,ht,Se){if(null==Ye)return Ye;var he=[];return qe(Ye,he,null,ht,Se),he},forEach:function(Ye,ht,Se){if(null==Ye)return Ye;se(Ye,Ge,ht=ne(null,null,ht,Se)),me(ht)},count:function(Ye){return se(Ye,function(){return null},null)},toArray:function(Ye){var ht=[];return qe(Ye,ht,null,function(Se){return Se}),ht},only:function(Ye){if(!b(Ye))throw Error(Q(143));return Ye}},K.Component=G,K.Fragment=$,K.Profiler=d,K.PureComponent=ee,K.StrictMode=c,K.Suspense=V,K.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=He,K.cloneElement=function(Ye,ht,Se){if(null==Ye)throw Error(Q(267,Ye));var he=e({},Ye.props),pe=Ye.key,Fe=Ye.ref,Je=Ye._owner;if(null!=ht){if(void 0!==ht.ref&&(Fe=ht.ref,Je=Oe.current),void 0!==ht.key&&(pe=""+ht.key),Ye.type&&Ye.type.defaultProps)var we=Ye.type.defaultProps;for(De in ht)Le.call(ht,De)&&!be.hasOwnProperty(De)&&(he[De]=void 0===ht[De]&&void 0!==we?we[De]:ht[De])}var De=arguments.length-2;if(1===De)he.children=Se;else if(1<De){we=Array(De);for(var ut=0;ut<De;ut++)we[ut]=arguments[ut+2];he.children=we}return{$$typeof:y,type:Ye.type,key:pe,ref:Fe,props:he,_owner:Je}},K.createContext=function(Ye,ht){return void 0===ht&&(ht=null),(Ye={$$typeof:z,_calculateChangedBits:ht,_currentValue:Ye,_currentValue2:Ye,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:p,_context:Ye},Ye.Consumer=Ye},K.createElement=m,K.createFactory=function(Ye){var ht=m.bind(null,Ye);return ht.type=Ye,ht},K.createRef=function(){return{current:null}},K.forwardRef=function(Ye){return{$$typeof:S,render:Ye}},K.isValidElement=b,K.lazy=function(Ye){return{$$typeof:U,_ctor:Ye,_status:-1,_result:null}},K.memo=function(Ye,ht){return{$$typeof:N,type:Ye,compare:void 0===ht?null:ht}},K.useCallback=function(Ye,ht){return lt().useCallback(Ye,ht)},K.useContext=function(Ye,ht){return lt().useContext(Ye,ht)},K.useDebugValue=function(){},K.useEffect=function(Ye,ht){return lt().useEffect(Ye,ht)},K.useImperativeHandle=function(Ye,ht,Se){return lt().useImperativeHandle(Ye,ht,Se)},K.useLayoutEffect=function(Ye,ht){return lt().useLayoutEffect(Ye,ht)},K.useMemo=function(Ye,ht){return lt().useMemo(Ye,ht)},K.useReducer=function(Ye,ht,Se){return lt().useReducer(Ye,ht,Se)},K.useRef=function(Ye){return lt().useRef(Ye)},K.useState=function(Ye){return lt().useState(Ye)},K.version="16.14.0"},6712:(it,K,u)=>{it.exports=u(298)},7446:it=>{var u={};function e(c,d,p){p||(p=Error);var S=function(V){function N(U,H,Q){return V.call(this,function z(V,N,U){return"string"==typeof d?d:d(V,N,U)}(U,H,Q))||this}return function K(c,d){c.prototype=Object.create(d.prototype),c.prototype.constructor=c,c.__proto__=d}(N,V),N}(p);S.prototype.name=p.name,S.prototype.code=c,u[c]=S}function n(c,d){if(Array.isArray(c)){var p=c.length;return c=c.map(function(z){return String(z)}),p>2?"one of ".concat(d," ").concat(c.slice(0,p-1).join(", "),", or ")+c[p-1]:2===p?"one of ".concat(d," ").concat(c[0]," or ").concat(c[1]):"of ".concat(d," ").concat(c[0])}return"of ".concat(d," ").concat(String(c))}e("ERR_INVALID_OPT_VALUE",function(c,d){return'The value "'+d+'" is invalid for option "'+c+'"'},TypeError),e("ERR_INVALID_ARG_TYPE",function(c,d,p){var z,S;if("string"==typeof d&&function y(c,d,p){return c.substr(!p||p<0?0:+p,d.length)===d}(d,"not ")?(z="must not be",d=d.replace(/^not /,"")):z="must be",function x(c,d,p){return(void 0===p||p>c.length)&&(p=c.length),c.substring(p-d.length,p)===d}(c," argument"))S="The ".concat(c," ").concat(z," ").concat(n(d,"type"));else{var V=function $(c,d,p){return"number"!=typeof p&&(p=0),!(p+d.length>c.length)&&-1!==c.indexOf(d,p)}(c,".")?"property":"argument";S='The "'.concat(c,'" ').concat(V," ").concat(z," ").concat(n(d,"type"))}return S+". Received type ".concat(typeof p)},TypeError),e("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),e("ERR_METHOD_NOT_IMPLEMENTED",function(c){return"The "+c+" method is not implemented"}),e("ERR_STREAM_PREMATURE_CLOSE","Premature close"),e("ERR_STREAM_DESTROYED",function(c){return"Cannot call "+c+" after a stream was destroyed"}),e("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),e("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),e("ERR_STREAM_WRITE_AFTER_END","write after end"),e("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),e("ERR_UNKNOWN_ENCODING",function(c){return"Unknown encoding: "+c},TypeError),e("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),it.exports.q=u},9800:(it,K,u)=>{var e=Object.keys||function(S){var V=[];for(var N in S)V.push(N);return V};it.exports=d;var n=u(1396),y=u(1120);u(5035)(d,n);for(var x=e(y.prototype),$=0;$<x.length;$++){var c=x[$];d.prototype[c]||(d.prototype[c]=y.prototype[c])}function d(S){if(!(this instanceof d))return new d(S);n.call(this,S),y.call(this,S),this.allowHalfOpen=!0,S&&(!1===S.readable&&(this.readable=!1),!1===S.writable&&(this.writable=!1),!1===S.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",p)))}function p(){this._writableState.ended||process.nextTick(z,this)}function z(S){S.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(d.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(d.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(V){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=V,this._writableState.destroyed=V)}})},1908:(it,K,u)=>{it.exports=n;var e=u(8157);function n(y){if(!(this instanceof n))return new n(y);e.call(this,y)}u(5035)(n,e),n.prototype._transform=function(y,x,$){$(null,y)}},1396:(it,K,u)=>{var e;it.exports=b,b.ReadableState=P,u(3358);var S,y=function(De,ut){return De.listeners(ut).length},x=u(8431),$=u(3195).Buffer,c=global.Uint8Array||function(){},z=u(4616);S=z&&z.debuglog?z.debuglog("stream"):function(){};var ee,ve,Oe,V=u(350),N=u(5923),H=u(1561).getHighWaterMark,Q=u(7446).q,Z=Q.ERR_INVALID_ARG_TYPE,ue=Q.ERR_STREAM_PUSH_AFTER_EOF,G=Q.ERR_METHOD_NOT_IMPLEMENTED,X=Q.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;u(5035)(b,x);var Le=N.errorOrDestroy,be=["error","close","destroy","pause","resume"];function P(we,De,ut){e=e||u(9800),"boolean"!=typeof ut&&(ut=De instanceof e),this.objectMode=!!(we=we||{}).objectMode,ut&&(this.objectMode=this.objectMode||!!we.readableObjectMode),this.highWaterMark=H(this,we,"readableHighWaterMark",ut),this.buffer=new V,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==we.emitClose,this.autoDestroy=!!we.autoDestroy,this.destroyed=!1,this.defaultEncoding=we.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,we.encoding&&(ee||(ee=u(4547).s),this.decoder=new ee(we.encoding),this.encoding=we.encoding)}function b(we){if(e=e||u(9800),!(this instanceof b))return new b(we);this._readableState=new P(we,this,this instanceof e),this.readable=!0,we&&("function"==typeof we.read&&(this._read=we.read),"function"==typeof we.destroy&&(this._destroy=we.destroy)),x.call(this)}function _(we,De,ut,le,D){S("readableAddChunk",De);var g,C=we._readableState;if(null===De)C.reading=!1,function se(we,De){if(S("onEofChunk"),!De.ended){if(De.decoder){var ut=De.decoder.end();ut&&ut.length&&(De.buffer.push(ut),De.length+=De.objectMode?1:ut.length)}De.ended=!0,De.sync?ze(we):(De.needReadable=!1,De.emittedReadable||(De.emittedReadable=!0,Ge(we)))}}(we,C);else if(D||(g=function E(we,De){var ut;return!function p(we){return $.isBuffer(we)||we instanceof c}(De)&&"string"!=typeof De&&void 0!==De&&!we.objectMode&&(ut=new Z("chunk",["string","Buffer","Uint8Array"],De)),ut}(C,De)),g)Le(we,g);else if(C.objectMode||De&&De.length>0)if("string"!=typeof De&&!C.objectMode&&Object.getPrototypeOf(De)!==$.prototype&&(De=function d(we){return $.from(we)}(De)),le)C.endEmitted?Le(we,new X):R(we,C,De,!0);else if(C.ended)Le(we,new ue);else{if(C.destroyed)return!1;C.reading=!1,C.decoder&&!ut?(De=C.decoder.write(De),C.objectMode||0!==De.length?R(we,C,De,!1):xe(we,C)):R(we,C,De,!1)}else le||(C.reading=!1,xe(we,C));return!C.ended&&(C.length<C.highWaterMark||0===C.length)}function R(we,De,ut,le){De.flowing&&0===De.length&&!De.sync?(De.awaitDrain=0,we.emit("data",ut)):(De.length+=De.objectMode?1:ut.length,le?De.buffer.unshift(ut):De.buffer.push(ut),De.needReadable&&ze(we)),xe(we,De)}Object.defineProperty(b.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(De){!this._readableState||(this._readableState.destroyed=De)}}),b.prototype.destroy=N.destroy,b.prototype._undestroy=N.undestroy,b.prototype._destroy=function(we,De){De(we)},b.prototype.push=function(we,De){var le,ut=this._readableState;return ut.objectMode?le=!0:"string"==typeof we&&((De=De||ut.defaultEncoding)!==ut.encoding&&(we=$.from(we,De),De=""),le=!0),_(this,we,De,!1,le)},b.prototype.unshift=function(we){return _(this,we,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(we){ee||(ee=u(4547).s);var De=new ee(we);this._readableState.decoder=De,this._readableState.encoding=this._readableState.decoder.encoding;for(var ut=this._readableState.buffer.head,le="";null!==ut;)le+=De.write(ut.data),ut=ut.next;return this._readableState.buffer.clear(),""!==le&&this._readableState.buffer.push(le),this._readableState.length=le.length,this};var ne=1073741824;function Ee(we,De){return we<=0||0===De.length&&De.ended?0:De.objectMode?1:we!=we?De.flowing&&De.length?De.buffer.head.data.length:De.length:(we>De.highWaterMark&&(De.highWaterMark=function me(we){return we>=ne?we=ne:(we--,we|=we>>>1,we|=we>>>2,we|=we>>>4,we|=we>>>8,we|=we>>>16,we++),we}(we)),we<=De.length?we:De.ended?De.length:(De.needReadable=!0,0))}function ze(we){var De=we._readableState;S("emitReadable",De.needReadable,De.emittedReadable),De.needReadable=!1,De.emittedReadable||(S("emitReadable",De.flowing),De.emittedReadable=!0,process.nextTick(Ge,we))}function Ge(we){var De=we._readableState;S("emitReadable_",De.destroyed,De.length,De.ended),!De.destroyed&&(De.length||De.ended)&&(we.emit("readable"),De.emittedReadable=!1),De.needReadable=!De.flowing&&!De.ended&&De.length<=De.highWaterMark,Se(we)}function xe(we,De){De.readingMore||(De.readingMore=!0,process.nextTick(qe,we,De))}function qe(we,De){for(;!De.reading&&!De.ended&&(De.length<De.highWaterMark||De.flowing&&0===De.length);){var ut=De.length;if(S("maybeReadMore read 0"),we.read(0),ut===De.length)break}De.readingMore=!1}function lt(we){var De=we._readableState;De.readableListening=we.listenerCount("readable")>0,De.resumeScheduled&&!De.paused?De.flowing=!0:we.listenerCount("data")>0&&we.resume()}function He(we){S("readable nexttick read 0"),we.read(0)}function ht(we,De){S("resume",De.reading),De.reading||we.read(0),De.resumeScheduled=!1,we.emit("resume"),Se(we),De.flowing&&!De.reading&&we.read(0)}function Se(we){var De=we._readableState;for(S("flow",De.flowing);De.flowing&&null!==we.read(););}function he(we,De){return 0===De.length?null:(De.objectMode?ut=De.buffer.shift():!we||we>=De.length?(ut=De.decoder?De.buffer.join(""):1===De.buffer.length?De.buffer.first():De.buffer.concat(De.length),De.buffer.clear()):ut=De.buffer.consume(we,De.decoder),ut);var ut}function pe(we){var De=we._readableState;S("endReadable",De.endEmitted),De.endEmitted||(De.ended=!0,process.nextTick(Fe,De,we))}function Fe(we,De){if(S("endReadableNT",we.endEmitted,we.length),!we.endEmitted&&0===we.length&&(we.endEmitted=!0,De.readable=!1,De.emit("end"),we.autoDestroy)){var ut=De._writableState;(!ut||ut.autoDestroy&&ut.finished)&&De.destroy()}}function Je(we,De){for(var ut=0,le=we.length;ut<le;ut++)if(we[ut]===De)return ut;return-1}b.prototype.read=function(we){S("read",we),we=parseInt(we,10);var De=this._readableState,ut=we;if(0!==we&&(De.emittedReadable=!1),0===we&&De.needReadable&&((0!==De.highWaterMark?De.length>=De.highWaterMark:De.length>0)||De.ended))return S("read: emitReadable",De.length,De.ended),0===De.length&&De.ended?pe(this):ze(this),null;if(0===(we=Ee(we,De))&&De.ended)return 0===De.length&&pe(this),null;var D,le=De.needReadable;return S("need readable",le),(0===De.length||De.length-we<De.highWaterMark)&&S("length less than watermark",le=!0),De.ended||De.reading?S("reading or ended",le=!1):le&&(S("do read"),De.reading=!0,De.sync=!0,0===De.length&&(De.needReadable=!0),this._read(De.highWaterMark),De.sync=!1,De.reading||(we=Ee(ut,De))),null===(D=we>0?he(we,De):null)?(De.needReadable=De.length<=De.highWaterMark,we=0):(De.length-=we,De.awaitDrain=0),0===De.length&&(De.ended||(De.needReadable=!0),ut!==we&&De.ended&&pe(this)),null!==D&&this.emit("data",D),D},b.prototype._read=function(we){Le(this,new G("_read()"))},b.prototype.pipe=function(we,De){var ut=this,le=this._readableState;switch(le.pipesCount){case 0:le.pipes=we;break;case 1:le.pipes=[le.pipes,we];break;default:le.pipes.push(we)}le.pipesCount+=1,S("pipe count=%d opts=%j",le.pipesCount,De);var C=De&&!1===De.end||we===process.stdout||we===process.stderr?Ue:B;function B(){S("onend"),we.end()}le.endEmitted?process.nextTick(C):ut.once("end",C),we.on("unpipe",function g(Lt,zt){S("onunpipe"),Lt===ut&&zt&&!1===zt.hasUnpiped&&(zt.hasUnpiped=!0,function Me(){S("cleanup"),we.removeListener("close",Ut),we.removeListener("finish",qt),we.removeListener("drain",de),we.removeListener("error",st),we.removeListener("unpipe",g),ut.removeListener("end",B),ut.removeListener("end",Ue),ut.removeListener("data",Qe),ye=!0,le.awaitDrain&&(!we._writableState||we._writableState.needDrain)&&de()}())});var de=function Xe(we){return function(){var ut=we._readableState;S("pipeOnDrain",ut.awaitDrain),ut.awaitDrain&&ut.awaitDrain--,0===ut.awaitDrain&&y(we,"data")&&(ut.flowing=!0,Se(we))}}(ut);we.on("drain",de);var ye=!1;function Qe(Lt){S("ondata");var zt=we.write(Lt);S("dest.write",zt),!1===zt&&((1===le.pipesCount&&le.pipes===we||le.pipesCount>1&&-1!==Je(le.pipes,we))&&!ye&&(S("false write response, pause",le.awaitDrain),le.awaitDrain++),ut.pause())}function st(Lt){S("onerror",Lt),Ue(),we.removeListener("error",st),0===y(we,"error")&&Le(we,Lt)}function Ut(){we.removeListener("finish",qt),Ue()}function qt(){S("onfinish"),we.removeListener("close",Ut),Ue()}function Ue(){S("unpipe"),ut.unpipe(we)}return ut.on("data",Qe),function m(we,De,ut){if("function"==typeof we.prependListener)return we.prependListener(De,ut);we._events&&we._events[De]?Array.isArray(we._events[De])?we._events[De].unshift(ut):we._events[De]=[ut,we._events[De]]:we.on(De,ut)}(we,"error",st),we.once("close",Ut),we.once("finish",qt),we.emit("pipe",ut),le.flowing||(S("pipe resume"),ut.resume()),we},b.prototype.unpipe=function(we){var De=this._readableState,ut={hasUnpiped:!1};if(0===De.pipesCount)return this;if(1===De.pipesCount)return we&&we!==De.pipes||(we||(we=De.pipes),De.pipes=null,De.pipesCount=0,De.flowing=!1,we&&we.emit("unpipe",this,ut)),this;if(!we){var le=De.pipes,D=De.pipesCount;De.pipes=null,De.pipesCount=0,De.flowing=!1;for(var C=0;C<D;C++)le[C].emit("unpipe",this,{hasUnpiped:!1});return this}var g=Je(De.pipes,we);return-1===g||(De.pipes.splice(g,1),De.pipesCount-=1,1===De.pipesCount&&(De.pipes=De.pipes[0]),we.emit("unpipe",this,ut)),this},b.prototype.addListener=b.prototype.on=function(we,De){var ut=x.prototype.on.call(this,we,De),le=this._readableState;return"data"===we?(le.readableListening=this.listenerCount("readable")>0,!1!==le.flowing&&this.resume()):"readable"===we&&!le.endEmitted&&!le.readableListening&&(le.readableListening=le.needReadable=!0,le.flowing=!1,le.emittedReadable=!1,S("on readable",le.length,le.reading),le.length?ze(this):le.reading||process.nextTick(He,this)),ut},b.prototype.removeListener=function(we,De){var ut=x.prototype.removeListener.call(this,we,De);return"readable"===we&&process.nextTick(lt,this),ut},b.prototype.removeAllListeners=function(we){var De=x.prototype.removeAllListeners.apply(this,arguments);return("readable"===we||void 0===we)&&process.nextTick(lt,this),De},b.prototype.resume=function(){var we=this._readableState;return we.flowing||(S("resume"),we.flowing=!we.readableListening,function Ye(we,De){De.resumeScheduled||(De.resumeScheduled=!0,process.nextTick(ht,we,De))}(this,we)),we.paused=!1,this},b.prototype.pause=function(){return S("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(S("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},b.prototype.wrap=function(we){var De=this,ut=this._readableState,le=!1;for(var D in we.on("end",function(){if(S("wrapped end"),ut.decoder&&!ut.ended){var g=ut.decoder.end();g&&g.length&&De.push(g)}De.push(null)}),we.on("data",function(g){S("wrapped data"),ut.decoder&&(g=ut.decoder.write(g)),ut.objectMode&&null==g||!(ut.objectMode||g&&g.length)||De.push(g)||(le=!0,we.pause())}),we)void 0===this[D]&&"function"==typeof we[D]&&(this[D]=function(B){return function(){return we[B].apply(we,arguments)}}(D));for(var C=0;C<be.length;C++)we.on(be[C],this.emit.bind(this,be[C]));return this._read=function(g){S("wrapped _read",g),le&&(le=!1,we.resume())},this},"function"==typeof Symbol&&(b.prototype[Symbol.asyncIterator]=function(){return void 0===ve&&(ve=u(2325)),ve(this)}),Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(b.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(b.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(De){this._readableState&&(this._readableState.flowing=De)}}),b._fromList=he,Object.defineProperty(b.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(b.from=function(we,De){return void 0===Oe&&(Oe=u(6757)),Oe(b,we,De)})},8157:(it,K,u)=>{it.exports=p;var e=u(7446).q,n=e.ERR_METHOD_NOT_IMPLEMENTED,y=e.ERR_MULTIPLE_CALLBACK,x=e.ERR_TRANSFORM_ALREADY_TRANSFORMING,$=e.ERR_TRANSFORM_WITH_LENGTH_0,c=u(9800);function d(V,N){var U=this._transformState;U.transforming=!1;var H=U.writecb;if(null===H)return this.emit("error",new y);U.writechunk=null,U.writecb=null,null!=N&&this.push(N),H(V);var Q=this._readableState;Q.reading=!1,(Q.needReadable||Q.length<Q.highWaterMark)&&this._read(Q.highWaterMark)}function p(V){if(!(this instanceof p))return new p(V);c.call(this,V),this._transformState={afterTransform:d.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,V&&("function"==typeof V.transform&&(this._transform=V.transform),"function"==typeof V.flush&&(this._flush=V.flush)),this.on("prefinish",z)}function z(){var V=this;"function"!=typeof this._flush||this._readableState.destroyed?S(this,null,null):this._flush(function(N,U){S(V,N,U)})}function S(V,N,U){if(N)return V.emit("error",N);if(null!=U&&V.push(U),V._writableState.length)throw new $;if(V._transformState.transforming)throw new x;return V.push(null)}u(5035)(p,c),p.prototype.push=function(V,N){return this._transformState.needTransform=!1,c.prototype.push.call(this,V,N)},p.prototype._transform=function(V,N,U){U(new n("_transform()"))},p.prototype._write=function(V,N,U){var H=this._transformState;if(H.writecb=U,H.writechunk=V,H.writeencoding=N,!H.transforming){var Q=this._readableState;(H.needTransform||Q.needReadable||Q.length<Q.highWaterMark)&&this._read(Q.highWaterMark)}},p.prototype._read=function(V){var N=this._transformState;null===N.writechunk||N.transforming?N.needTransform=!0:(N.transforming=!0,this._transform(N.writechunk,N.writeencoding,N.afterTransform))},p.prototype._destroy=function(V,N){c.prototype._destroy.call(this,V,function(U){N(U)})}},1120:(it,K,u)=>{function n(Se){var he=this;this.next=null,this.entry=null,this.finish=function(){!function ht(Se,he,pe){var Fe=Se.entry;for(Se.entry=null;Fe;){var Je=Fe.callback;he.pendingcb--,Je(pe),Fe=Fe.next}he.corkedRequestsFree.next=Se}(he,Se)}}var y;it.exports=P,P.WritableState=be;var m,x={deprecate:u(8059)},$=u(8431),c=u(3195).Buffer,d=global.Uint8Array||function(){},S=u(5923),N=u(1561).getHighWaterMark,U=u(7446).q,H=U.ERR_INVALID_ARG_TYPE,Q=U.ERR_METHOD_NOT_IMPLEMENTED,Z=U.ERR_MULTIPLE_CALLBACK,ue=U.ERR_STREAM_CANNOT_PIPE,G=U.ERR_STREAM_DESTROYED,X=U.ERR_STREAM_NULL_VALUES,ee=U.ERR_STREAM_WRITE_AFTER_END,ve=U.ERR_UNKNOWN_ENCODING,Oe=S.errorOrDestroy;function Le(){}function be(Se,he,pe){y=y||u(9800),"boolean"!=typeof pe&&(pe=he instanceof y),this.objectMode=!!(Se=Se||{}).objectMode,pe&&(this.objectMode=this.objectMode||!!Se.writableObjectMode),this.highWaterMark=N(this,Se,"writableHighWaterMark",pe),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===Se.decodeStrings),this.defaultEncoding=Se.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Je){!function se(Se,he){var pe=Se._writableState,Fe=pe.sync,Je=pe.writecb;if("function"!=typeof Je)throw new Z;if(function Ee(Se){Se.writing=!1,Se.writecb=null,Se.length-=Se.writelen,Se.writelen=0}(pe),he)!function me(Se,he,pe,Fe,Je){--he.pendingcb,pe?(process.nextTick(Je,Fe),process.nextTick(He,Se,he),Se._writableState.errorEmitted=!0,Oe(Se,Fe)):(Je(Fe),Se._writableState.errorEmitted=!0,Oe(Se,Fe),He(Se,he))}(Se,pe,Fe,he,Je);else{var we=qe(pe)||Se.destroyed;!we&&!pe.corked&&!pe.bufferProcessing&&pe.bufferedRequest&&xe(Se,pe),Fe?process.nextTick(ze,Se,pe,we,Je):ze(Se,pe,we,Je)}}(he,Je)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==Se.emitClose,this.autoDestroy=!!Se.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function P(Se){var he=this instanceof(y=y||u(9800));if(!he&&!m.call(P,this))return new P(Se);this._writableState=new be(Se,this,he),this.writable=!0,Se&&("function"==typeof Se.write&&(this._write=Se.write),"function"==typeof Se.writev&&(this._writev=Se.writev),"function"==typeof Se.destroy&&(this._destroy=Se.destroy),"function"==typeof Se.final&&(this._final=Se.final)),$.call(this)}function ne(Se,he,pe,Fe,Je,we,De){he.writelen=Fe,he.writecb=De,he.writing=!0,he.sync=!0,he.destroyed?he.onwrite(new G("write")):pe?Se._writev(Je,he.onwrite):Se._write(Je,we,he.onwrite),he.sync=!1}function ze(Se,he,pe,Fe){pe||function Ge(Se,he){0===he.length&&he.needDrain&&(he.needDrain=!1,Se.emit("drain"))}(Se,he),he.pendingcb--,Fe(),He(Se,he)}function xe(Se,he){he.bufferProcessing=!0;var pe=he.bufferedRequest;if(Se._writev&&pe&&pe.next){var Je=new Array(he.bufferedRequestCount),we=he.corkedRequestsFree;we.entry=pe;for(var De=0,ut=!0;pe;)Je[De]=pe,pe.isBuf||(ut=!1),pe=pe.next,De+=1;Je.allBuffers=ut,ne(Se,he,!0,he.length,Je,"",we.finish),he.pendingcb++,he.lastBufferedRequest=null,we.next?(he.corkedRequestsFree=we.next,we.next=null):he.corkedRequestsFree=new n(he),he.bufferedRequestCount=0}else{for(;pe;){var le=pe.chunk;if(ne(Se,he,!1,he.objectMode?1:le.length,le,pe.encoding,pe.callback),pe=pe.next,he.bufferedRequestCount--,he.writing)break}null===pe&&(he.lastBufferedRequest=null)}he.bufferedRequest=pe,he.bufferProcessing=!1}function qe(Se){return Se.ending&&0===Se.length&&null===Se.bufferedRequest&&!Se.finished&&!Se.writing}function Xe(Se,he){Se._final(function(pe){he.pendingcb--,pe&&Oe(Se,pe),he.prefinished=!0,Se.emit("prefinish"),He(Se,he)})}function He(Se,he){var pe=qe(he);if(pe&&(function lt(Se,he){!he.prefinished&&!he.finalCalled&&("function"!=typeof Se._final||he.destroyed?(he.prefinished=!0,Se.emit("prefinish")):(he.pendingcb++,he.finalCalled=!0,process.nextTick(Xe,Se,he)))}(Se,he),0===he.pendingcb&&(he.finished=!0,Se.emit("finish"),he.autoDestroy))){var Fe=Se._readableState;(!Fe||Fe.autoDestroy&&Fe.endEmitted)&&Se.destroy()}return pe}u(5035)(P,$),be.prototype.getBuffer=function(){for(var he=this.bufferedRequest,pe=[];he;)pe.push(he),he=he.next;return pe},function(){try{Object.defineProperty(be.prototype,"buffer",{get:x.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(m=Function.prototype[Symbol.hasInstance],Object.defineProperty(P,Symbol.hasInstance,{value:function(he){return!!m.call(this,he)||this===P&&he&&he._writableState instanceof be}})):m=function(he){return he instanceof this},P.prototype.pipe=function(){Oe(this,new ue)},P.prototype.write=function(Se,he,pe){var Fe=this._writableState,Je=!1,we=!Fe.objectMode&&function z(Se){return c.isBuffer(Se)||Se instanceof d}(Se);return we&&!c.isBuffer(Se)&&(Se=function p(Se){return c.from(Se)}(Se)),"function"==typeof he&&(pe=he,he=null),we?he="buffer":he||(he=Fe.defaultEncoding),"function"!=typeof pe&&(pe=Le),Fe.ending?function b(Se,he){var pe=new ee;Oe(Se,pe),process.nextTick(he,pe)}(this,pe):(we||function _(Se,he,pe,Fe){var Je;return null===pe?Je=new X:"string"!=typeof pe&&!he.objectMode&&(Je=new H("chunk",["string","Buffer"],pe)),!Je||(Oe(Se,Je),process.nextTick(Fe,Je),!1)}(this,Fe,Se,pe))&&(Fe.pendingcb++,Je=function E(Se,he,pe,Fe,Je,we){if(!pe){var De=function R(Se,he,pe){return!Se.objectMode&&!1!==Se.decodeStrings&&"string"==typeof he&&(he=c.from(he,pe)),he}(he,Fe,Je);Fe!==De&&(pe=!0,Je="buffer",Fe=De)}var ut=he.objectMode?1:Fe.length;he.length+=ut;var le=he.length<he.highWaterMark;if(le||(he.needDrain=!0),he.writing||he.corked){var D=he.lastBufferedRequest;he.lastBufferedRequest={chunk:Fe,encoding:Je,isBuf:pe,callback:we,next:null},D?D.next=he.lastBufferedRequest:he.bufferedRequest=he.lastBufferedRequest,he.bufferedRequestCount+=1}else ne(Se,he,!1,ut,Fe,Je,we);return le}(this,Fe,we,Se,he,pe)),Je},P.prototype.cork=function(){this._writableState.corked++},P.prototype.uncork=function(){var Se=this._writableState;Se.corked&&(Se.corked--,!Se.writing&&!Se.corked&&!Se.bufferProcessing&&Se.bufferedRequest&&xe(this,Se))},P.prototype.setDefaultEncoding=function(he){if("string"==typeof he&&(he=he.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((he+"").toLowerCase())>-1))throw new ve(he);return this._writableState.defaultEncoding=he,this},Object.defineProperty(P.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(P.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),P.prototype._write=function(Se,he,pe){pe(new Q("_write()"))},P.prototype._writev=null,P.prototype.end=function(Se,he,pe){var Fe=this._writableState;return"function"==typeof Se?(pe=Se,Se=null,he=null):"function"==typeof he&&(pe=he,he=null),null!=Se&&this.write(Se,he),Fe.corked&&(Fe.corked=1,this.uncork()),Fe.ending||function Ye(Se,he,pe){he.ending=!0,He(Se,he),pe&&(he.finished?process.nextTick(pe):Se.once("finish",pe)),he.ended=!0,Se.writable=!1}(this,Fe,pe),this},Object.defineProperty(P.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(he){!this._writableState||(this._writableState.destroyed=he)}}),P.prototype.destroy=S.destroy,P.prototype._undestroy=S.undestroy,P.prototype._destroy=function(Se,he){he(Se)}},2325:(it,K,u)=>{var e;function n(G,X,ee){return X in G?Object.defineProperty(G,X,{value:ee,enumerable:!0,configurable:!0,writable:!0}):G[X]=ee,G}var y=u(7722),x=Symbol("lastResolve"),$=Symbol("lastReject"),c=Symbol("error"),d=Symbol("ended"),p=Symbol("lastPromise"),z=Symbol("handlePromise"),S=Symbol("stream");function V(G,X){return{value:G,done:X}}function N(G){var X=G[x];if(null!==X){var ee=G[S].read();null!==ee&&(G[p]=null,G[x]=null,G[$]=null,X(V(ee,!1)))}}function U(G){process.nextTick(N,G)}var Q=Object.getPrototypeOf(function(){}),Z=Object.setPrototypeOf((n(e={get stream(){return this[S]},next:function(){var X=this,ee=this[c];if(null!==ee)return Promise.reject(ee);if(this[d])return Promise.resolve(V(void 0,!0));if(this[S].destroyed)return new Promise(function(be,m){process.nextTick(function(){X[c]?m(X[c]):be(V(void 0,!0))})});var Oe,ve=this[p];if(ve)Oe=new Promise(function H(G,X){return function(ee,ve){G.then(function(){X[d]?ee(V(void 0,!0)):X[z](ee,ve)},ve)}}(ve,this));else{var Le=this[S].read();if(null!==Le)return Promise.resolve(V(Le,!1));Oe=new Promise(this[z])}return this[p]=Oe,Oe}},Symbol.asyncIterator,function(){return this}),n(e,"return",function(){var X=this;return new Promise(function(ee,ve){X[S].destroy(null,function(Oe){Oe?ve(Oe):ee(V(void 0,!0))})})}),e),Q);it.exports=function(X){var ee,ve=Object.create(Z,(n(ee={},S,{value:X,writable:!0}),n(ee,x,{value:null,writable:!0}),n(ee,$,{value:null,writable:!0}),n(ee,c,{value:null,writable:!0}),n(ee,d,{value:X._readableState.endEmitted,writable:!0}),n(ee,z,{value:function(Le,be){var m=ve[S].read();m?(ve[p]=null,ve[x]=null,ve[$]=null,Le(V(m,!1))):(ve[x]=Le,ve[$]=be)},writable:!0}),ee));return ve[p]=null,y(X,function(Oe){if(Oe&&"ERR_STREAM_PREMATURE_CLOSE"!==Oe.code){var Le=ve[$];return null!==Le&&(ve[p]=null,ve[x]=null,ve[$]=null,Le(Oe)),void(ve[c]=Oe)}var be=ve[x];null!==be&&(ve[p]=null,ve[x]=null,ve[$]=null,be(V(void 0,!0))),ve[d]=!0}),X.on("readable",U.bind(null,ve)),ve}},350:(it,K,u)=>{function e(U,H){var Q=Object.keys(U);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(U);H&&(Z=Z.filter(function(ue){return Object.getOwnPropertyDescriptor(U,ue).enumerable})),Q.push.apply(Q,Z)}return Q}function y(U,H,Q){return H in U?Object.defineProperty(U,H,{value:Q,enumerable:!0,configurable:!0,writable:!0}):U[H]=Q,U}function $(U,H){for(var Q=0;Q<H.length;Q++){var Z=H[Q];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(U,Z.key,Z)}}var p=u(3195).Buffer,S=u(2361).inspect,V=S&&S.custom||"inspect";function N(U,H,Q){p.prototype.copy.call(U,H,Q)}it.exports=function(){function U(){(function x(U,H){if(!(U instanceof H))throw new TypeError("Cannot call a class as a function")})(this,U),this.head=null,this.tail=null,this.length=0}return function c(U,H,Q){H&&$(U.prototype,H),Q&&$(U,Q)}(U,[{key:"push",value:function(Q){var Z={data:Q,next:null};this.length>0?this.tail.next=Z:this.head=Z,this.tail=Z,++this.length}},{key:"unshift",value:function(Q){var Z={data:Q,next:this.head};0===this.length&&(this.tail=Z),this.head=Z,++this.length}},{key:"shift",value:function(){if(0!==this.length){var Q=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,Q}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(Q){if(0===this.length)return"";for(var Z=this.head,ue=""+Z.data;Z=Z.next;)ue+=Q+Z.data;return ue}},{key:"concat",value:function(Q){if(0===this.length)return p.alloc(0);for(var Z=p.allocUnsafe(Q>>>0),ue=this.head,G=0;ue;)N(ue.data,Z,G),G+=ue.data.length,ue=ue.next;return Z}},{key:"consume",value:function(Q,Z){var ue;return Q<this.head.data.length?(ue=this.head.data.slice(0,Q),this.head.data=this.head.data.slice(Q)):ue=Q===this.head.data.length?this.shift():Z?this._getString(Q):this._getBuffer(Q),ue}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(Q){var Z=this.head,ue=1,G=Z.data;for(Q-=G.length;Z=Z.next;){var X=Z.data,ee=Q>X.length?X.length:Q;if(G+=ee===X.length?X:X.slice(0,Q),0==(Q-=ee)){ee===X.length?(++ue,this.head=Z.next?Z.next:this.tail=null):(this.head=Z,Z.data=X.slice(ee));break}++ue}return this.length-=ue,G}},{key:"_getBuffer",value:function(Q){var Z=p.allocUnsafe(Q),ue=this.head,G=1;for(ue.data.copy(Z),Q-=ue.data.length;ue=ue.next;){var X=ue.data,ee=Q>X.length?X.length:Q;if(X.copy(Z,Z.length-Q,0,ee),0==(Q-=ee)){ee===X.length?(++G,this.head=ue.next?ue.next:this.tail=null):(this.head=ue,ue.data=X.slice(ee));break}++G}return this.length-=G,Z}},{key:V,value:function(Q,Z){return S(this,function n(U){for(var H=1;H<arguments.length;H++){var Q=null!=arguments[H]?arguments[H]:{};H%2?e(Object(Q),!0).forEach(function(Z){y(U,Z,Q[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors(Q)):e(Object(Q)).forEach(function(Z){Object.defineProperty(U,Z,Object.getOwnPropertyDescriptor(Q,Z))})}return U}({},Z,{depth:0,customInspect:!1}))}}]),U}()},5923:it=>{function u($,c){y($,c),e($)}function e($){$._writableState&&!$._writableState.emitClose||$._readableState&&!$._readableState.emitClose||$.emit("close")}function y($,c){$.emit("error",c)}it.exports={destroy:function K($,c){var d=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(c?c($):$&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(y,this,$)):process.nextTick(y,this,$)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy($||null,function(S){!c&&S?d._writableState?d._writableState.errorEmitted?process.nextTick(e,d):(d._writableState.errorEmitted=!0,process.nextTick(u,d,S)):process.nextTick(u,d,S):c?(process.nextTick(e,d),c(S)):process.nextTick(e,d)}),this)},undestroy:function n(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function x($,c){var d=$._readableState,p=$._writableState;d&&d.autoDestroy||p&&p.autoDestroy?$.destroy(c):$.emit("error",c)}}},7722:(it,K,u)=>{var e=u(7446).q.ERR_STREAM_PREMATURE_CLOSE;function y(){}it.exports=function $(c,d,p){if("function"==typeof d)return $(c,null,d);d||(d={}),p=function n(c){var d=!1;return function(){if(!d){d=!0;for(var p=arguments.length,z=new Array(p),S=0;S<p;S++)z[S]=arguments[S];c.apply(this,z)}}}(p||y);var z=d.readable||!1!==d.readable&&c.readable,S=d.writable||!1!==d.writable&&c.writable,V=function(){c.writable||U()},N=c._writableState&&c._writableState.finished,U=function(){S=!1,N=!0,z||p.call(c)},H=c._readableState&&c._readableState.endEmitted,Q=function(){z=!1,H=!0,S||p.call(c)},Z=function(ee){p.call(c,ee)},ue=function(){var ee;return z&&!H?((!c._readableState||!c._readableState.ended)&&(ee=new e),p.call(c,ee)):S&&!N?((!c._writableState||!c._writableState.ended)&&(ee=new e),p.call(c,ee)):void 0},G=function(){c.req.on("finish",U)};return function x(c){return c.setHeader&&"function"==typeof c.abort}(c)?(c.on("complete",U),c.on("abort",ue),c.req?G():c.on("request",G)):S&&!c._writableState&&(c.on("end",V),c.on("close",V)),c.on("end",Q),c.on("finish",U),!1!==d.error&&c.on("error",Z),c.on("close",ue),function(){c.removeListener("complete",U),c.removeListener("abort",ue),c.removeListener("request",G),c.req&&c.req.removeListener("finish",U),c.removeListener("end",V),c.removeListener("close",V),c.removeListener("finish",U),c.removeListener("end",Q),c.removeListener("error",Z),c.removeListener("close",ue)}}},6757:it=>{it.exports=function(){throw new Error("Readable.from is not available in the browser")}},8096:(it,K,u)=>{var e,y=u(7446).q,x=y.ERR_MISSING_ARGS,$=y.ERR_STREAM_DESTROYED;function c(U){if(U)throw U}function p(U,H,Q,Z){Z=function n(U){var H=!1;return function(){H||(H=!0,U.apply(void 0,arguments))}}(Z);var ue=!1;U.on("close",function(){ue=!0}),void 0===e&&(e=u(7722)),e(U,{readable:H,writable:Q},function(X){if(X)return Z(X);ue=!0,Z()});var G=!1;return function(X){if(!ue&&!G){if(G=!0,function d(U){return U.setHeader&&"function"==typeof U.abort}(U))return U.abort();if("function"==typeof U.destroy)return U.destroy();Z(X||new $("pipe"))}}}function z(U){U()}function S(U,H){return U.pipe(H)}function V(U){return U.length&&"function"==typeof U[U.length-1]?U.pop():c}it.exports=function N(){for(var U=arguments.length,H=new Array(U),Q=0;Q<U;Q++)H[Q]=arguments[Q];var Z=V(H);if(Array.isArray(H[0])&&(H=H[0]),H.length<2)throw new x("streams");var ue,G=H.map(function(X,ee){var ve=ee<H.length-1;return p(X,ve,ee>0,function(Le){ue||(ue=Le),Le&&G.forEach(z),!ve&&(G.forEach(z),Z(ue))})});return H.reduce(S)}},1561:(it,K,u)=>{var e=u(7446).q.ERR_INVALID_OPT_VALUE;it.exports={getHighWaterMark:function y(x,$,c,d){var p=function n(x,$,c){return null!=x.highWaterMark?x.highWaterMark:$?x[c]:null}($,d,c);if(null!=p){if(!isFinite(p)||Math.floor(p)!==p||p<0)throw new e(d?c:"highWaterMark",p);return Math.floor(p)}return x.objectMode?16:16384}}},8431:(it,K,u)=>{it.exports=u(3358).EventEmitter},8055:function(it){"undefined"!=typeof self&&self,it.exports=function(K){var u={};function e(n){if(u[n])return u[n].exports;var y=u[n]={i:n,l:!1,exports:{}};return K[n].call(y.exports,y,y.exports,e),y.l=!0,y.exports}return e.m=K,e.c=u,e.d=function(n,y,x){e.o(n,y)||Object.defineProperty(n,y,{enumerable:!0,get:x})},e.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,y){if(1&y&&(n=e(n)),8&y||4&y&&"object"==typeof n&&n&&n.__esModule)return n;var x=Object.create(null);if(e.r(x),Object.defineProperty(x,"default",{enumerable:!0,value:n}),2&y&&"string"!=typeof n)for(var $ in n)e.d(x,$,function(c){return n[c]}.bind(null,$));return x},e.n=function(n){var y=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(y,"a",y),y},e.o=function(n,y){return Object.prototype.hasOwnProperty.call(n,y)},e.p="",e(e.s=0)}([function(K,u,e){const{types:n,iterableTypes:y,errors:x}=e(1),$=e(2),c={[n.NUMBER]:$.isNumber,[n.BOOLEAN]:$.isBoolean,[n.STRING]:$.isString,[n.DATE]:$.isDate,[n.UNDEFINED]:$.isUndefined,[n.NULL]:$.isNull,[n.ARRAY]:$.isArray,[n.MAP]:$.isMap,[n.SET]:$.isSet,[n.ITERABLE_OBJECT]:$.isIterableObject},d={[n.DATE]:$.areDatesEqual};function p(U){const H=Object.keys(c);let Q=n.DEFAULT;for(let Z=0;Z<H.length;Z+=1)if(c[H[Z]](U)){Q=H[Z];break}return Q}function S(U,H,Q,Z,ue){const G={op:Q,path:Z};return"add"!==Q&&"update"!==Q||(G.val=H),ue&&"add"!==Q&&(G.oldVal=U),G}function V(U,H,Q,Z,ue){const G=p(U),X=p(H),ee=Z||[],ve=ue||[];if((Oe=G)===X&&y.indexOf(Oe)>=0){const Oe=function(m,P,b){if(b===n.ARRAY){const _=new Array(m.length>P.length?m.length:P.length);return _.fill(0),new Set(_.map((R,E)=>E))}return new Set(Object.keys(m).concat(Object.keys(P)))}(U,H,G).values();let{value:Le,done:be}=Oe.next();for(;!be;){Object.prototype.hasOwnProperty.call(U,Le)?Object.prototype.hasOwnProperty.call(H,Le)?V(U[Le],H[Le],Q,ee.concat(Le),ve):ve.push(S(U[Le],H[Le],"delete",ee.concat(Le),Q)):ve.push(S(U[Le],H[Le],"add",ee.concat(Le),Q));const m=Oe.next();Le=m.value,be=m.done}}else{const Oe=function z(U,H,Q,Z){let ue;return Q===n.UNDEFINED&&Z!==n.UNDEFINED?ue="add":Q!==n.UNDEFINED&&Z===n.UNDEFINED?ue="delete":(G=U,X=H,(ee=Q)===Z&&(d[ee]?d[ee](G,X):G===X)?$.noop():ue="update"),ue;var G,X,ee}(U,H,G,X);null!=Oe&&ve.push(S(U,H,Oe,Z,Q))}var Oe;return ve}const N={add:$.setValueByPath,update:$.setValueByPath,delete:$.deleteValueByPath};K.exports={getDiff:(U,H,Q=!1)=>V(U,H,Q),applyDiff:(U,H,Q)=>function(Z,ue,G){if(!(ue instanceof Array))throw new Error(x.INVALID_DIFF_FORMAT);let X=Z;return ue.forEach(ee=>{const{op:ve,val:Oe,path:Le}=ee;if(!N[ve])throw new Error(x.INVALID_DIFF_OP);X=N[ve](X,Le,Oe,G)}),X}(U,H,Q)}},function(K,u){const e={NUMBER:"NUMBER",BOOLEAN:"BOOLEAN",STRING:"STRING",NULL:"NULL",UNDEFINED:"UNDEFINED",DATE:"DATE",ARRAY:"ARRAY",MAP:"MAP",SET:"SET",ITERABLE_OBJECT:"ITERABLE_OBJECT",DEFAULT:"OBJECT"};K.exports={types:e,iterableTypes:[e.ITERABLE_OBJECT,e.MAP,e.ARRAY,e.SET],errors:{EMPTY_DIFF:"No diff object is provided, Nothing to apply",INVALID_DIFF_FORMAT:"Invalid diff format",INVALID_DIFF_OP:"Unsupported operation provided into diff object"}}},function(K,u){const e=d=>p=>p instanceof d,n=e(Date),y=e(Array),x=e(Map),$=e(Set),c=d=>"[object Object]"===Object.prototype.toString.call(d);K.exports={isNumber:d=>"number"==typeof d,isBoolean:d=>"boolean"==typeof d,isString:d=>"string"==typeof d,isDate:n,isUndefined:d=>void 0===d,isNull:d=>null===d,isArray:y,isMap:x,isSet:$,isIterableObject:c,noop:()=>{},areDatesEqual:(d,p)=>d.getTime()===p.getTime(),setValueByPath:function(d,p=[],z,S){if(!y(p))throw new Error(`Diff path: "${p}" is not valid`);const{length:V}=p;if(0===V)return z;let N=d;for(let U=0;U<V;U+=1){const H=p[U];if(!N)throw new Error(`Invalid path: "${p}" for object: ${JSON.stringify(d,null,2)}`);if(null==H)throw new Error(`Invalid path: "${p}" for object: ${JSON.stringify(d,null,2)}`);U!==V-1?(N=N[H],S&&S(N)):N[H]=z}return d},deleteValueByPath:function(d,p){const z=p||[];if(0===z.length)return;let S=d;const{length:V}=z;for(let N=0;N<V;N+=1)if(N!==V-1){if(!S[z[N]])throw new Error(`Invalid path: "${p}" for object: ${JSON.stringify(d,null,2)}`);S=S[z[N]]}else if(c(S))delete S[z[N]];else{const U=parseInt(z[N],10);for(;S.length>U;)S.pop()}return d}}}])},4363:(it,K,u)=>{u.d(K,{z:()=>y});var e=u(4423),n=u(5463);function y(x,$){const c="object"==typeof $;return new Promise((d,p)=>{const z=new n.Hp({next:S=>{d(S),z.unsubscribe()},error:p,complete:()=>{c?d($.defaultValue):p(new e.K)}});x.subscribe(z)})}},5330:(it,K,u)=>{u.d(K,{s:()=>n});var e=u(1954);function n(y,x,$){return(0,e.P)(()=>y()?x:$)}},3853:(it,K,u)=>{u.d(K,{b:()=>y});var e=u(9525),n=u(2971);function y(x,$){return(0,n.m)($)?(0,e.z)(x,$,1):(0,e.z)(x,1)}},7580:(it,K,u)=>{u.d(K,{V:()=>z});var e=u(6936),n=u(7885),y=u(1944),x=u(4987),$=u(7543),c=u(3945),d=u(1817);const p=(0,$.d)(V=>function(U=null){V(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=U});function z(V,N){const{first:U,each:H,with:Q=S,scheduler:Z=N??e.z,meta:ue=null}=(0,n.q)(V)?{first:V}:"number"==typeof V?{each:V}:V;if(null==U&&null==H)throw new TypeError("No timeout provided.");return(0,y.e)((G,X)=>{let ee,ve,Oe=null,Le=0;const be=m=>{ve=(0,d.f)(X,Z,()=>{try{ee.unsubscribe(),(0,x.Xf)(Q({meta:ue,lastValue:Oe,seen:Le})).subscribe(X)}catch(P){X.error(P)}},m)};ee=G.subscribe((0,c.x)(X,m=>{null==ve||ve.unsubscribe(),Le++,X.next(Oe=m),H>0&&be(H)},void 0,void 0,()=>{(null==ve?void 0:ve.closed)||null==ve||ve.unsubscribe(),Oe=null})),!Le&&be(null!=U?"number"==typeof U?U:+U-Z.now():H)})}function S(V){throw new p(V)}},538:(it,K,u)=>{u.d(K,{M:()=>d});var e=u(1944),n=u(3945),y=u(4987),x=u(9173),$=u(9635),c=u(420);function d(...p){const z=(0,c.jO)(p);return(0,e.e)((S,V)=>{const N=p.length,U=new Array(N);let H=p.map(()=>!1),Q=!1;for(let Z=0;Z<N;Z++)(0,y.Xf)(p[Z]).subscribe((0,n.x)(V,ue=>{U[Z]=ue,!Q&&!H[Z]&&(H[Z]=!0,(Q=H.every(x.y))&&(H=null))},$.Z));S.subscribe((0,n.x)(V,Z=>{if(Q){const ue=[Z,...U];V.next(z?z(...ue):ue)}}))})}},4915:(it,K,u)=>{u.d(K,{N:()=>$});var e=u(5417),y=u(1010);const $=new class x extends y.v{}(class n extends e.o{constructor(p,z){super(p,z),this.scheduler=p,this.work=z}schedule(p,z=0){return z>0?super.schedule(p,z):(this.delay=z,this.state=p,this.scheduler.flush(this),this)}execute(p,z){return z>0||this.closed?super.execute(p,z):this._execute(p,z)}requestAsyncId(p,z,S=0){return null!=S&&S>0||null==S&&this.delay>0?super.requestAsyncId(p,z,S):p.flush(this)}})},9708:(it,K,u)=>{var e=u(3195),n=e.Buffer;function y($,c){for(var d in $)c[d]=$[d]}function x($,c,d){return n($,c,d)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?it.exports=e:(y(e,K),K.Buffer=x),x.prototype=Object.create(n.prototype),y(n,x),x.from=function($,c,d){if("number"==typeof $)throw new TypeError("Argument must not be a number");return n($,c,d)},x.alloc=function($,c,d){if("number"!=typeof $)throw new TypeError("Argument must be a number");var p=n($);return void 0!==c?"string"==typeof d?p.fill(c,d):p.fill(c):p.fill(0),p},x.allocUnsafe=function($){if("number"!=typeof $)throw new TypeError("Argument must be a number");return n($)},x.allocUnsafeSlow=function($){if("number"!=typeof $)throw new TypeError("Argument must be a number");return e.SlowBuffer($)}},3774:(it,K)=>{var u,e,n,y,x;if("undefined"==typeof window||"function"!=typeof MessageChannel){var $=null,c=null,d=function(){if(null!==$)try{var Xe=K.unstable_now();$(!0,Xe),$=null}catch(lt){throw setTimeout(d,0),lt}},p=Date.now();K.unstable_now=function(){return Date.now()-p},u=function(Xe){null!==$?setTimeout(u,0,Xe):($=Xe,setTimeout(d,0))},e=function(Xe,lt){c=setTimeout(Xe,lt)},n=function(){clearTimeout(c)},y=function(){return!1},x=K.unstable_forceFrameRate=function(){}}else{var z=window.performance,S=window.Date,V=window.setTimeout,N=window.clearTimeout;if("undefined"!=typeof console){var U=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof U&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof z&&"function"==typeof z.now)K.unstable_now=function(){return z.now()};else{var H=S.now();K.unstable_now=function(){return S.now()-H}}var Q=!1,Z=null,ue=-1,G=5,X=0;y=function(){return K.unstable_now()>=X},x=function(){},K.unstable_forceFrameRate=function(Xe){0>Xe||125<Xe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):G=0<Xe?Math.floor(1e3/Xe):5};var ee=new MessageChannel,ve=ee.port2;ee.port1.onmessage=function(){if(null!==Z){var Xe=K.unstable_now();X=Xe+G;try{Z(!0,Xe)?ve.postMessage(null):(Q=!1,Z=null)}catch(lt){throw ve.postMessage(null),lt}}else Q=!1},u=function(Xe){Z=Xe,Q||(Q=!0,ve.postMessage(null))},e=function(Xe,lt){ue=V(function(){Xe(K.unstable_now())},lt)},n=function(){N(ue),ue=-1}}function Oe(Xe,lt){var He=Xe.length;Xe.push(lt);e:for(;;){var Ye=He-1>>>1,ht=Xe[Ye];if(!(void 0!==ht&&0<m(ht,lt)))break e;Xe[Ye]=lt,Xe[He]=ht,He=Ye}}function Le(Xe){return void 0===(Xe=Xe[0])?null:Xe}function be(Xe){var lt=Xe[0];if(void 0!==lt){var He=Xe.pop();if(He!==lt){Xe[0]=He;e:for(var Ye=0,ht=Xe.length;Ye<ht;){var Se=2*(Ye+1)-1,he=Xe[Se],pe=Se+1,Fe=Xe[pe];if(void 0!==he&&0>m(he,He))void 0!==Fe&&0>m(Fe,he)?(Xe[Ye]=Fe,Xe[pe]=He,Ye=pe):(Xe[Ye]=he,Xe[Se]=He,Ye=Se);else{if(!(void 0!==Fe&&0>m(Fe,He)))break e;Xe[Ye]=Fe,Xe[pe]=He,Ye=pe}}}return lt}return null}function m(Xe,lt){var He=Xe.sortIndex-lt.sortIndex;return 0!==He?He:Xe.id-lt.id}var P=[],b=[],_=1,R=null,E=3,ne=!1,me=!1,Ee=!1;function se(Xe){for(var lt=Le(b);null!==lt;){if(null===lt.callback)be(b);else{if(!(lt.startTime<=Xe))break;be(b),lt.sortIndex=lt.expirationTime,Oe(P,lt)}lt=Le(b)}}function ze(Xe){if(Ee=!1,se(Xe),!me)if(null!==Le(P))me=!0,u(Ge);else{var lt=Le(b);null!==lt&&e(ze,lt.startTime-Xe)}}function Ge(Xe,lt){me=!1,Ee&&(Ee=!1,n()),ne=!0;var He=E;try{for(se(lt),R=Le(P);null!==R&&(!(R.expirationTime>lt)||Xe&&!y());){var Ye=R.callback;if(null!==Ye){R.callback=null,E=R.priorityLevel;var ht=Ye(R.expirationTime<=lt);lt=K.unstable_now(),"function"==typeof ht?R.callback=ht:R===Le(P)&&be(P),se(lt)}else be(P);R=Le(P)}if(null!==R)var Se=!0;else{var he=Le(b);null!==he&&e(ze,he.startTime-lt),Se=!1}return Se}finally{R=null,E=He,ne=!1}}function xe(Xe){switch(Xe){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var qe=x;K.unstable_IdlePriority=5,K.unstable_ImmediatePriority=1,K.unstable_LowPriority=4,K.unstable_NormalPriority=3,K.unstable_Profiling=null,K.unstable_UserBlockingPriority=2,K.unstable_cancelCallback=function(Xe){Xe.callback=null},K.unstable_continueExecution=function(){me||ne||(me=!0,u(Ge))},K.unstable_getCurrentPriorityLevel=function(){return E},K.unstable_getFirstCallbackNode=function(){return Le(P)},K.unstable_next=function(Xe){switch(E){case 1:case 2:case 3:var lt=3;break;default:lt=E}var He=E;E=lt;try{return Xe()}finally{E=He}},K.unstable_pauseExecution=function(){},K.unstable_requestPaint=qe,K.unstable_runWithPriority=function(Xe,lt){switch(Xe){case 1:case 2:case 3:case 4:case 5:break;default:Xe=3}var He=E;E=Xe;try{return lt()}finally{E=He}},K.unstable_scheduleCallback=function(Xe,lt,He){var Ye=K.unstable_now();if("object"==typeof He&&null!==He){var ht=He.delay;ht="number"==typeof ht&&0<ht?Ye+ht:Ye,He="number"==typeof He.timeout?He.timeout:xe(Xe)}else He=xe(Xe),ht=Ye;return Xe={id:_++,callback:lt,priorityLevel:Xe,startTime:ht,expirationTime:He=ht+He,sortIndex:-1},ht>Ye?(Xe.sortIndex=ht,Oe(b,Xe),null===Le(P)&&Xe===Le(b)&&(Ee?n():Ee=!0,e(ze,ht-Ye))):(Xe.sortIndex=He,Oe(P,Xe),me||ne||(me=!0,u(Ge))),Xe},K.unstable_shouldYield=function(){var Xe=K.unstable_now();se(Xe);var lt=Le(P);return lt!==R&&null!==R&&null!==lt&&null!==lt.callback&&lt.startTime<=Xe&&lt.expirationTime<R.expirationTime||y()},K.unstable_wrapCallback=function(Xe){var lt=E;return function(){var He=E;E=lt;try{return Xe.apply(this,arguments)}finally{E=He}}}},5381:(it,K,u)=>{it.exports=u(3774)},7559:(it,K,u)=>{var e=u(3974),n=u(5051)("selectn"),y=u(5979),x=u(1934),$=Object.prototype.toString;it.exports=e(function c(d,p){n("arguments:",{path:d,object:p});for(var z=-1,S="[object Array]"===$.call(d)?d:x(y(d)),V=S.length,N=V?p:void 0;++z<V;){if(Object(N)!==N)return;N=N[S[z]]}return n("ref:",N),"function"==typeof N?N():N})},5051:(it,K,u)=>{function $(){var d;try{d=K.storage.debug}catch{}return!d&&"undefined"!=typeof process&&"env"in process&&(d=process.env.DEBUG),d}(K=it.exports=u(2133)).log=function y(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},K.formatArgs=function n(d){var p=this.useColors;if(d[0]=(p?"%c":"")+this.namespace+(p?" %c":" ")+d[0]+(p?"%c ":" ")+"+"+K.humanize(this.diff),p){var z="color: "+this.color;d.splice(1,0,z,"color: inherit");var S=0,V=0;d[0].replace(/%[a-zA-Z%]/g,function(N){"%%"!==N&&(S++,"%c"===N&&(V=S))}),d.splice(V,0,z)}},K.save=function x(d){try{null==d?K.storage.removeItem("debug"):K.storage.debug=d}catch{}},K.load=$,K.useColors=function e(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},K.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function c(){try{return window.localStorage}catch{}}(),K.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],K.formatters.j=function(d){try{return JSON.stringify(d)}catch(p){return"[UnexpectedJSONParseError]: "+p.message}},K.enable($())},2133:(it,K,u)=>{var e;function y(p){function z(){if(z.enabled){var S=z,V=+new Date,N=V-(e||V);S.diff=N,S.prev=e,S.curr=V,e=V;for(var U=new Array(arguments.length),H=0;H<U.length;H++)U[H]=arguments[H];U[0]=K.coerce(U[0]),"string"!=typeof U[0]&&U.unshift("%O");var Q=0;U[0]=U[0].replace(/%([a-zA-Z%])/g,function(ue,G){if("%%"===ue)return ue;Q++;var X=K.formatters[G];return"function"==typeof X&&(ue=X.call(S,U[Q]),U.splice(Q,1),Q--),ue}),K.formatArgs.call(S,U);var Z=z.log||K.log||console.log.bind(console);Z.apply(S,U)}}return z.namespace=p,z.enabled=K.enabled(p),z.useColors=K.useColors(),z.color=function n(p){var S,z=0;for(S in p)z=(z<<5)-z+p.charCodeAt(S),z|=0;return K.colors[Math.abs(z)%K.colors.length]}(p),"function"==typeof K.init&&K.init(z),z}(K=it.exports=y.debug=y.default=y).coerce=function d(p){return p instanceof Error?p.stack||p.message:p},K.disable=function $(){K.enable("")},K.enable=function x(p){K.save(p),K.names=[],K.skips=[];for(var z=("string"==typeof p?p:"").split(/[\s,]+/),S=z.length,V=0;V<S;V++)!z[V]||("-"===(p=z[V].replace(/\*/g,".*?"))[0]?K.skips.push(new RegExp("^"+p.substr(1)+"$")):K.names.push(new RegExp("^"+p+"$")))},K.enabled=function c(p){var z,S;for(z=0,S=K.skips.length;z<S;z++)if(K.skips[z].test(p))return!1;for(z=0,S=K.names.length;z<S;z++)if(K.names[z].test(p))return!0;return!1},K.humanize=u(3007),K.names=[],K.skips=[],K.formatters={}},3007:it=>{var K=1e3,u=60*K,e=60*u,n=24*e;function d(p,z,S){if(!(p<z))return p<1.5*z?Math.floor(p/z)+" "+S:Math.ceil(p/z)+" "+S+"s"}it.exports=function(p,z){z=z||{};var S=typeof p;if("string"===S&&p.length>0)return function x(p){if(!((p=String(p)).length>100)){var z=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(p);if(z){var S=parseFloat(z[1]);switch((z[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*S;case"days":case"day":case"d":return S*n;case"hours":case"hour":case"hrs":case"hr":case"h":return S*e;case"minutes":case"minute":case"mins":case"min":case"m":return S*u;case"seconds":case"second":case"secs":case"sec":case"s":return S*K;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return S;default:return}}}}(p);if("number"===S&&!1===isNaN(p))return z.long?function c(p){return d(p,n,"day")||d(p,e,"hour")||d(p,u,"minute")||d(p,K,"second")||p+" ms"}(p):function $(p){return p>=n?Math.round(p/n)+"d":p>=e?Math.round(p/e)+"h":p>=u?Math.round(p/u)+"m":p>=K?Math.round(p/K)+"s":p+"ms"}(p);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(p))}},843:it=>{function K(d){return"function"==typeof d}var u=console.error.bind(console);function e(d,p,z){var S=!!d[p]&&d.propertyIsEnumerable(p);Object.defineProperty(d,p,{configurable:!0,enumerable:S,writable:!0,value:z})}function n(d){d&&d.logger&&(K(d.logger)?u=d.logger:u("new logger isn't a function, not replacing"))}function y(d,p,z){if(d&&d[p]){if(!z)return u("no wrapper function"),void u((new Error).stack);if(K(d[p])&&K(z)){var S=d[p],V=z(S,p);return e(V,"__original",S),e(V,"__unwrap",function(){d[p]===V&&e(d,p,S)}),e(V,"__wrapped",!0),e(d,p,V),V}u("original object and wrapper must be functions")}else u("no original function "+p+" to wrap")}function $(d,p){return d&&d[p]?d[p].__unwrap?d[p].__unwrap():void u("no original to unwrap to -- has "+p+" already been unwrapped?"):(u("no function to unwrap."),void u((new Error).stack))}n.wrap=y,n.massWrap=function x(d,p,z){if(!d)return u("must provide one or more modules to patch"),void u((new Error).stack);Array.isArray(d)||(d=[d]),p&&Array.isArray(p)?d.forEach(function(S){p.forEach(function(V){y(S,V,z)})}):u("must provide one or more functions to wrap on modules")},n.unwrap=$,n.massUnwrap=function c(d,p){if(!d)return u("must provide one or more modules to patch"),void u((new Error).stack);Array.isArray(d)||(d=[d]),p&&Array.isArray(p)?d.forEach(function(z){p.forEach(function(S){$(z,S)})}):u("must provide one or more functions to unwrap on modules")},it.exports=n},8432:(it,K,u)=>{var e=u(9903),n=u(4263),y=u(8597),x=e("%TypeError%"),$=e("%WeakMap%",!0),c=e("%Map%",!0),d=n("WeakMap.prototype.get",!0),p=n("WeakMap.prototype.set",!0),z=n("WeakMap.prototype.has",!0),S=n("Map.prototype.get",!0),V=n("Map.prototype.set",!0),N=n("Map.prototype.has",!0),U=function(ue,G){for(var ee,X=ue;null!==(ee=X.next);X=ee)if(ee.key===G)return X.next=ee.next,ee.next=ue.next,ue.next=ee,ee};it.exports=function(){var G,X,ee,ve={assert:function(Oe){if(!ve.has(Oe))throw new x("Side channel does not contain "+y(Oe))},get:function(Oe){if($&&Oe&&("object"==typeof Oe||"function"==typeof Oe)){if(G)return d(G,Oe)}else if(c){if(X)return S(X,Oe)}else if(ee)return function(ue,G){var X=U(ue,G);return X&&X.value}(ee,Oe)},has:function(Oe){if($&&Oe&&("object"==typeof Oe||"function"==typeof Oe)){if(G)return z(G,Oe)}else if(c){if(X)return N(X,Oe)}else if(ee)return function(ue,G){return!!U(ue,G)}(ee,Oe);return!1},set:function(Oe,Le){$&&Oe&&("object"==typeof Oe||"function"==typeof Oe)?(G||(G=new $),p(G,Oe,Le)):c?(X||(X=new c),V(X,Oe,Le)):(ee||(ee={key:{},next:null}),function(ue,G,X){var ee=U(ue,G);ee?ee.value=X:ue.next={key:G,next:ue.next,value:X}}(ee,Oe,Le))}};return ve}},574:(it,K,u)=>{it.exports=y;var e=u(3358).EventEmitter;function y(){e.call(this)}u(5035)(y,e),y.Readable=u(1396),y.Writable=u(1120),y.Duplex=u(9800),y.Transform=u(8157),y.PassThrough=u(1908),y.finished=u(7722),y.pipeline=u(8096),y.Stream=y,y.prototype.pipe=function(x,$){var c=this;function d(H){x.writable&&!1===x.write(H)&&c.pause&&c.pause()}function p(){c.readable&&c.resume&&c.resume()}c.on("data",d),x.on("drain",p),!x._isStdio&&(!$||!1!==$.end)&&(c.on("end",S),c.on("close",V));var z=!1;function S(){z||(z=!0,x.end())}function V(){z||(z=!0,"function"==typeof x.destroy&&x.destroy())}function N(H){if(U(),0===e.listenerCount(this,"error"))throw H}function U(){c.removeListener("data",d),x.removeListener("drain",p),c.removeListener("end",S),c.removeListener("close",V),c.removeListener("error",N),x.removeListener("error",N),c.removeListener("end",U),c.removeListener("close",U),x.removeListener("close",U)}return c.on("error",N),x.on("error",N),c.on("end",U),c.on("close",U),x.on("close",U),x.emit("pipe",c),x}},4547:(it,K,u)=>{var e=u(9708).Buffer,n=e.isEncoding||function(G){switch((G=""+G)&&G.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function $(G){var X;switch(this.encoding=function x(G){var X=function y(G){if(!G)return"utf8";for(var X;;)switch(G){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return G;default:if(X)return;G=(""+G).toLowerCase(),X=!0}}(G);if("string"!=typeof X&&(e.isEncoding===n||!n(G)))throw new Error("Unknown encoding: "+G);return X||G}(G),this.encoding){case"utf16le":this.text=N,this.end=U,X=4;break;case"utf8":this.fillLast=z,X=4;break;case"base64":this.text=H,this.end=Q,X=3;break;default:return this.write=Z,void(this.end=ue)}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(X)}function c(G){return G<=127?0:G>>5==6?2:G>>4==14?3:G>>3==30?4:G>>6==2?-1:-2}function z(G){var X=this.lastTotal-this.lastNeed,ee=function p(G,X,ee){if(128!=(192&X[0]))return G.lastNeed=0,"\ufffd";if(G.lastNeed>1&&X.length>1){if(128!=(192&X[1]))return G.lastNeed=1,"\ufffd";if(G.lastNeed>2&&X.length>2&&128!=(192&X[2]))return G.lastNeed=2,"\ufffd"}}(this,G);return void 0!==ee?ee:this.lastNeed<=G.length?(G.copy(this.lastChar,X,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(G.copy(this.lastChar,X,0,G.length),void(this.lastNeed-=G.length))}function N(G,X){if((G.length-X)%2==0){var ee=G.toString("utf16le",X);if(ee){var ve=ee.charCodeAt(ee.length-1);if(ve>=55296&&ve<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=G[G.length-2],this.lastChar[1]=G[G.length-1],ee.slice(0,-1)}return ee}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=G[G.length-1],G.toString("utf16le",X,G.length-1)}function U(G){var X=G&&G.length?this.write(G):"";return this.lastNeed?X+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):X}function H(G,X){var ee=(G.length-X)%3;return 0===ee?G.toString("base64",X):(this.lastNeed=3-ee,this.lastTotal=3,1===ee?this.lastChar[0]=G[G.length-1]:(this.lastChar[0]=G[G.length-2],this.lastChar[1]=G[G.length-1]),G.toString("base64",X,G.length-ee))}function Q(G){var X=G&&G.length?this.write(G):"";return this.lastNeed?X+this.lastChar.toString("base64",0,3-this.lastNeed):X}function Z(G){return G.toString(this.encoding)}function ue(G){return G&&G.length?this.write(G):""}K.s=$,$.prototype.write=function(G){if(0===G.length)return"";var X,ee;if(this.lastNeed){if(void 0===(X=this.fillLast(G)))return"";ee=this.lastNeed,this.lastNeed=0}else ee=0;return ee<G.length?X?X+this.text(G,ee):this.text(G,ee):X||""},$.prototype.end=function V(G){var X=G&&G.length?this.write(G):"";return this.lastNeed?X+"\ufffd":X},$.prototype.text=function S(G,X){var ee=function d(G,X,ee){var ve=X.length-1;if(ve<ee)return 0;var Oe=c(X[ve]);return Oe>=0?(Oe>0&&(G.lastNeed=Oe-1),Oe):--ve<ee||-2===Oe?0:(Oe=c(X[ve]))>=0?(Oe>0&&(G.lastNeed=Oe-2),Oe):--ve<ee||-2===Oe?0:(Oe=c(X[ve]))>=0?(Oe>0&&(2===Oe?Oe=0:G.lastNeed=Oe-3),Oe):0}(this,G,X);if(!this.lastNeed)return G.toString("utf8",X);this.lastTotal=ee;var ve=G.length-(ee-this.lastNeed);return G.copy(this.lastChar,0,ve),G.toString("utf8",X,ve)},$.prototype.fillLast=function(G){if(this.lastNeed<=G.length)return G.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);G.copy(this.lastChar,this.lastTotal-this.lastNeed,0,G.length),this.lastNeed-=G.length}},8059:it=>{function u(e){try{if(!global.localStorage)return!1}catch{return!1}var n=global.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}it.exports=function K(e,n){if(u("noDeprecation"))return e;var y=!1;return function x(){if(!y){if(u("throwDeprecation"))throw new Error(n);u("traceDeprecation")?console.trace(n):console.warn(n),y=!0}return e.apply(this,arguments)}}},6102:(it,K,u)=>{u.d(K,{Z:()=>N});var e,n=new Uint8Array(16);function y(){if(!e&&!(e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(n)}const x=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,c=function $(U){return"string"==typeof U&&x.test(U)};for(var d=[],p=0;p<256;++p)d.push((p+256).toString(16).substr(1));const N=function V(U,H,Q){var Z=(U=U||{}).random||(U.rng||y)();if(Z[6]=15&Z[6]|64,Z[8]=63&Z[8]|128,H){Q=Q||0;for(var ue=0;ue<16;++ue)H[Q+ue]=Z[ue];return H}return function z(U){var H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,Q=(d[U[H+0]]+d[U[H+1]]+d[U[H+2]]+d[U[H+3]]+"-"+d[U[H+4]]+d[U[H+5]]+"-"+d[U[H+6]]+d[U[H+7]]+"-"+d[U[H+8]]+d[U[H+9]]+"-"+d[U[H+10]]+d[U[H+11]]+d[U[H+12]]+d[U[H+13]]+d[U[H+14]]+d[U[H+15]]).toLowerCase();if(!c(Q))throw TypeError("Stringified UUID is invalid");return Q}(Z)}},480:(it,K,u)=>{u.r(K),u.d(K,{__extends:()=>n,__assign:()=>y,__rest:()=>x,__decorate:()=>$,__param:()=>c,__metadata:()=>d,__awaiter:()=>p,__generator:()=>z,__createBinding:()=>S,__exportStar:()=>V,__values:()=>N,__read:()=>U,__spread:()=>H,__spreadArrays:()=>Q,__await:()=>Z,__asyncGenerator:()=>ue,__asyncDelegator:()=>G,__asyncValues:()=>X,__makeTemplateObject:()=>ee,__importStar:()=>ve,__importDefault:()=>Oe,__classPrivateFieldGet:()=>Le,__classPrivateFieldSet:()=>be});var e=function(m,P){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,_){b.__proto__=_}||function(b,_){for(var R in _)_.hasOwnProperty(R)&&(b[R]=_[R])})(m,P)};function n(m,P){function b(){this.constructor=m}e(m,P),m.prototype=null===P?Object.create(P):(b.prototype=P.prototype,new b)}var y=function(){return y=Object.assign||function(P){for(var b,_=1,R=arguments.length;_<R;_++)for(var E in b=arguments[_])Object.prototype.hasOwnProperty.call(b,E)&&(P[E]=b[E]);return P},y.apply(this,arguments)};function x(m,P){var b={};for(var _ in m)Object.prototype.hasOwnProperty.call(m,_)&&P.indexOf(_)<0&&(b[_]=m[_]);if(null!=m&&"function"==typeof Object.getOwnPropertySymbols){var R=0;for(_=Object.getOwnPropertySymbols(m);R<_.length;R++)P.indexOf(_[R])<0&&Object.prototype.propertyIsEnumerable.call(m,_[R])&&(b[_[R]]=m[_[R]])}return b}function $(m,P,b,_){var ne,R=arguments.length,E=R<3?P:null===_?_=Object.getOwnPropertyDescriptor(P,b):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)E=Reflect.decorate(m,P,b,_);else for(var me=m.length-1;me>=0;me--)(ne=m[me])&&(E=(R<3?ne(E):R>3?ne(P,b,E):ne(P,b))||E);return R>3&&E&&Object.defineProperty(P,b,E),E}function c(m,P){return function(b,_){P(b,_,m)}}function d(m,P){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(m,P)}function p(m,P,b,_){return new(b||(b=Promise))(function(E,ne){function me(ze){try{se(_.next(ze))}catch(Ge){ne(Ge)}}function Ee(ze){try{se(_.throw(ze))}catch(Ge){ne(Ge)}}function se(ze){ze.done?E(ze.value):function R(E){return E instanceof b?E:new b(function(ne){ne(E)})}(ze.value).then(me,Ee)}se((_=_.apply(m,P||[])).next())})}function z(m,P){var _,R,E,ne,b={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]};return ne={next:me(0),throw:me(1),return:me(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function me(se){return function(ze){return function Ee(se){if(_)throw new TypeError("Generator is already executing.");for(;b;)try{if(_=1,R&&(E=2&se[0]?R.return:se[0]?R.throw||((E=R.return)&&E.call(R),0):R.next)&&!(E=E.call(R,se[1])).done)return E;switch(R=0,E&&(se=[2&se[0],E.value]),se[0]){case 0:case 1:E=se;break;case 4:return b.label++,{value:se[1],done:!1};case 5:b.label++,R=se[1],se=[0];continue;case 7:se=b.ops.pop(),b.trys.pop();continue;default:if(!(E=(E=b.trys).length>0&&E[E.length-1])&&(6===se[0]||2===se[0])){b=0;continue}if(3===se[0]&&(!E||se[1]>E[0]&&se[1]<E[3])){b.label=se[1];break}if(6===se[0]&&b.label<E[1]){b.label=E[1],E=se;break}if(E&&b.label<E[2]){b.label=E[2],b.ops.push(se);break}E[2]&&b.ops.pop(),b.trys.pop();continue}se=P.call(m,b)}catch(ze){se=[6,ze],R=0}finally{_=E=0}if(5&se[0])throw se[1];return{value:se[0]?se[1]:void 0,done:!0}}([se,ze])}}}function S(m,P,b,_){void 0===_&&(_=b),m[_]=P[b]}function V(m,P){for(var b in m)"default"!==b&&!P.hasOwnProperty(b)&&(P[b]=m[b])}function N(m){var P="function"==typeof Symbol&&Symbol.iterator,b=P&&m[P],_=0;if(b)return b.call(m);if(m&&"number"==typeof m.length)return{next:function(){return m&&_>=m.length&&(m=void 0),{value:m&&m[_++],done:!m}}};throw new TypeError(P?"Object is not iterable.":"Symbol.iterator is not defined.")}function U(m,P){var b="function"==typeof Symbol&&m[Symbol.iterator];if(!b)return m;var R,ne,_=b.call(m),E=[];try{for(;(void 0===P||P-- >0)&&!(R=_.next()).done;)E.push(R.value)}catch(me){ne={error:me}}finally{try{R&&!R.done&&(b=_.return)&&b.call(_)}finally{if(ne)throw ne.error}}return E}function H(){for(var m=[],P=0;P<arguments.length;P++)m=m.concat(U(arguments[P]));return m}function Q(){for(var m=0,P=0,b=arguments.length;P<b;P++)m+=arguments[P].length;var _=Array(m),R=0;for(P=0;P<b;P++)for(var E=arguments[P],ne=0,me=E.length;ne<me;ne++,R++)_[R]=E[ne];return _}function Z(m){return this instanceof Z?(this.v=m,this):new Z(m)}function ue(m,P,b){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var R,_=b.apply(m,P||[]),E=[];return R={},ne("next"),ne("throw"),ne("return"),R[Symbol.asyncIterator]=function(){return this},R;function ne(xe){_[xe]&&(R[xe]=function(qe){return new Promise(function(Xe,lt){E.push([xe,qe,Xe,lt])>1||me(xe,qe)})})}function me(xe,qe){try{!function Ee(xe){xe.value instanceof Z?Promise.resolve(xe.value.v).then(se,ze):Ge(E[0][2],xe)}(_[xe](qe))}catch(Xe){Ge(E[0][3],Xe)}}function se(xe){me("next",xe)}function ze(xe){me("throw",xe)}function Ge(xe,qe){xe(qe),E.shift(),E.length&&me(E[0][0],E[0][1])}}function G(m){var P,b;return P={},_("next"),_("throw",function(R){throw R}),_("return"),P[Symbol.iterator]=function(){return this},P;function _(R,E){P[R]=m[R]?function(ne){return(b=!b)?{value:Z(m[R](ne)),done:"return"===R}:E?E(ne):ne}:E}}function X(m){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var b,P=m[Symbol.asyncIterator];return P?P.call(m):(m=N(m),b={},_("next"),_("throw"),_("return"),b[Symbol.asyncIterator]=function(){return this},b);function _(E){b[E]=m[E]&&function(ne){return new Promise(function(me,Ee){!function R(E,ne,me,Ee){Promise.resolve(Ee).then(function(se){E({value:se,done:me})},ne)}(me,Ee,(ne=m[E](ne)).done,ne.value)})}}}function ee(m,P){return Object.defineProperty?Object.defineProperty(m,"raw",{value:P}):m.raw=P,m}function ve(m){if(m&&m.__esModule)return m;var P={};if(null!=m)for(var b in m)Object.hasOwnProperty.call(m,b)&&(P[b]=m[b]);return P.default=m,P}function Oe(m){return m&&m.__esModule?m:{default:m}}function Le(m,P){if(!P.has(m))throw new TypeError("attempted to get private field on non-instance");return P.get(m)}function be(m,P,b){if(!P.has(m))throw new TypeError("attempted to set private field on non-instance");return P.set(m,b),b}},70:(it,K,u)=>{u.r(K),u.d(K,{__extends:()=>n,__assign:()=>y,__rest:()=>x,__decorate:()=>$,__param:()=>c,__metadata:()=>d,__awaiter:()=>p,__generator:()=>z,__createBinding:()=>S,__exportStar:()=>V,__values:()=>N,__read:()=>U,__spread:()=>H,__spreadArrays:()=>Q,__await:()=>Z,__asyncGenerator:()=>ue,__asyncDelegator:()=>G,__asyncValues:()=>X,__makeTemplateObject:()=>ee,__importStar:()=>ve,__importDefault:()=>Oe,__classPrivateFieldGet:()=>Le,__classPrivateFieldSet:()=>be});var e=function(m,P){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,_){b.__proto__=_}||function(b,_){for(var R in _)_.hasOwnProperty(R)&&(b[R]=_[R])})(m,P)};function n(m,P){function b(){this.constructor=m}e(m,P),m.prototype=null===P?Object.create(P):(b.prototype=P.prototype,new b)}var y=function(){return y=Object.assign||function(P){for(var b,_=1,R=arguments.length;_<R;_++)for(var E in b=arguments[_])Object.prototype.hasOwnProperty.call(b,E)&&(P[E]=b[E]);return P},y.apply(this,arguments)};function x(m,P){var b={};for(var _ in m)Object.prototype.hasOwnProperty.call(m,_)&&P.indexOf(_)<0&&(b[_]=m[_]);if(null!=m&&"function"==typeof Object.getOwnPropertySymbols){var R=0;for(_=Object.getOwnPropertySymbols(m);R<_.length;R++)P.indexOf(_[R])<0&&Object.prototype.propertyIsEnumerable.call(m,_[R])&&(b[_[R]]=m[_[R]])}return b}function $(m,P,b,_){var ne,R=arguments.length,E=R<3?P:null===_?_=Object.getOwnPropertyDescriptor(P,b):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)E=Reflect.decorate(m,P,b,_);else for(var me=m.length-1;me>=0;me--)(ne=m[me])&&(E=(R<3?ne(E):R>3?ne(P,b,E):ne(P,b))||E);return R>3&&E&&Object.defineProperty(P,b,E),E}function c(m,P){return function(b,_){P(b,_,m)}}function d(m,P){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(m,P)}function p(m,P,b,_){return new(b||(b=Promise))(function(E,ne){function me(ze){try{se(_.next(ze))}catch(Ge){ne(Ge)}}function Ee(ze){try{se(_.throw(ze))}catch(Ge){ne(Ge)}}function se(ze){ze.done?E(ze.value):function R(E){return E instanceof b?E:new b(function(ne){ne(E)})}(ze.value).then(me,Ee)}se((_=_.apply(m,P||[])).next())})}function z(m,P){var _,R,E,ne,b={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]};return ne={next:me(0),throw:me(1),return:me(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function me(se){return function(ze){return function Ee(se){if(_)throw new TypeError("Generator is already executing.");for(;b;)try{if(_=1,R&&(E=2&se[0]?R.return:se[0]?R.throw||((E=R.return)&&E.call(R),0):R.next)&&!(E=E.call(R,se[1])).done)return E;switch(R=0,E&&(se=[2&se[0],E.value]),se[0]){case 0:case 1:E=se;break;case 4:return b.label++,{value:se[1],done:!1};case 5:b.label++,R=se[1],se=[0];continue;case 7:se=b.ops.pop(),b.trys.pop();continue;default:if(!(E=(E=b.trys).length>0&&E[E.length-1])&&(6===se[0]||2===se[0])){b=0;continue}if(3===se[0]&&(!E||se[1]>E[0]&&se[1]<E[3])){b.label=se[1];break}if(6===se[0]&&b.label<E[1]){b.label=E[1],E=se;break}if(E&&b.label<E[2]){b.label=E[2],b.ops.push(se);break}E[2]&&b.ops.pop(),b.trys.pop();continue}se=P.call(m,b)}catch(ze){se=[6,ze],R=0}finally{_=E=0}if(5&se[0])throw se[1];return{value:se[0]?se[1]:void 0,done:!0}}([se,ze])}}}function S(m,P,b,_){void 0===_&&(_=b),m[_]=P[b]}function V(m,P){for(var b in m)"default"!==b&&!P.hasOwnProperty(b)&&(P[b]=m[b])}function N(m){var P="function"==typeof Symbol&&Symbol.iterator,b=P&&m[P],_=0;if(b)return b.call(m);if(m&&"number"==typeof m.length)return{next:function(){return m&&_>=m.length&&(m=void 0),{value:m&&m[_++],done:!m}}};throw new TypeError(P?"Object is not iterable.":"Symbol.iterator is not defined.")}function U(m,P){var b="function"==typeof Symbol&&m[Symbol.iterator];if(!b)return m;var R,ne,_=b.call(m),E=[];try{for(;(void 0===P||P-- >0)&&!(R=_.next()).done;)E.push(R.value)}catch(me){ne={error:me}}finally{try{R&&!R.done&&(b=_.return)&&b.call(_)}finally{if(ne)throw ne.error}}return E}function H(){for(var m=[],P=0;P<arguments.length;P++)m=m.concat(U(arguments[P]));return m}function Q(){for(var m=0,P=0,b=arguments.length;P<b;P++)m+=arguments[P].length;var _=Array(m),R=0;for(P=0;P<b;P++)for(var E=arguments[P],ne=0,me=E.length;ne<me;ne++,R++)_[R]=E[ne];return _}function Z(m){return this instanceof Z?(this.v=m,this):new Z(m)}function ue(m,P,b){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var R,_=b.apply(m,P||[]),E=[];return R={},ne("next"),ne("throw"),ne("return"),R[Symbol.asyncIterator]=function(){return this},R;function ne(xe){_[xe]&&(R[xe]=function(qe){return new Promise(function(Xe,lt){E.push([xe,qe,Xe,lt])>1||me(xe,qe)})})}function me(xe,qe){try{!function Ee(xe){xe.value instanceof Z?Promise.resolve(xe.value.v).then(se,ze):Ge(E[0][2],xe)}(_[xe](qe))}catch(Xe){Ge(E[0][3],Xe)}}function se(xe){me("next",xe)}function ze(xe){me("throw",xe)}function Ge(xe,qe){xe(qe),E.shift(),E.length&&me(E[0][0],E[0][1])}}function G(m){var P,b;return P={},_("next"),_("throw",function(R){throw R}),_("return"),P[Symbol.iterator]=function(){return this},P;function _(R,E){P[R]=m[R]?function(ne){return(b=!b)?{value:Z(m[R](ne)),done:"return"===R}:E?E(ne):ne}:E}}function X(m){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var b,P=m[Symbol.asyncIterator];return P?P.call(m):(m=N(m),b={},_("next"),_("throw"),_("return"),b[Symbol.asyncIterator]=function(){return this},b);function _(E){b[E]=m[E]&&function(ne){return new Promise(function(me,Ee){!function R(E,ne,me,Ee){Promise.resolve(Ee).then(function(se){E({value:se,done:me})},ne)}(me,Ee,(ne=m[E](ne)).done,ne.value)})}}}function ee(m,P){return Object.defineProperty?Object.defineProperty(m,"raw",{value:P}):m.raw=P,m}function ve(m){if(m&&m.__esModule)return m;var P={};if(null!=m)for(var b in m)Object.hasOwnProperty.call(m,b)&&(P[b]=m[b]);return P.default=m,P}function Oe(m){return m&&m.__esModule?m:{default:m}}function Le(m,P){if(!P.has(m))throw new TypeError("attempted to get private field on non-instance");return P.get(m)}function be(m,P,b){if(!P.has(m))throw new TypeError("attempted to set private field on non-instance");return P.set(m,b),b}},9055:(it,K,u)=>{u.r(K),u.d(K,{__extends:()=>n,__assign:()=>y,__rest:()=>x,__decorate:()=>$,__param:()=>c,__metadata:()=>d,__awaiter:()=>p,__generator:()=>z,__createBinding:()=>S,__exportStar:()=>V,__values:()=>N,__read:()=>U,__spread:()=>H,__spreadArrays:()=>Q,__await:()=>Z,__asyncGenerator:()=>ue,__asyncDelegator:()=>G,__asyncValues:()=>X,__makeTemplateObject:()=>ee,__importStar:()=>ve,__importDefault:()=>Oe,__classPrivateFieldGet:()=>Le,__classPrivateFieldSet:()=>be});var e=function(m,P){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,_){b.__proto__=_}||function(b,_){for(var R in _)_.hasOwnProperty(R)&&(b[R]=_[R])})(m,P)};function n(m,P){function b(){this.constructor=m}e(m,P),m.prototype=null===P?Object.create(P):(b.prototype=P.prototype,new b)}var y=function(){return y=Object.assign||function(P){for(var b,_=1,R=arguments.length;_<R;_++)for(var E in b=arguments[_])Object.prototype.hasOwnProperty.call(b,E)&&(P[E]=b[E]);return P},y.apply(this,arguments)};function x(m,P){var b={};for(var _ in m)Object.prototype.hasOwnProperty.call(m,_)&&P.indexOf(_)<0&&(b[_]=m[_]);if(null!=m&&"function"==typeof Object.getOwnPropertySymbols){var R=0;for(_=Object.getOwnPropertySymbols(m);R<_.length;R++)P.indexOf(_[R])<0&&Object.prototype.propertyIsEnumerable.call(m,_[R])&&(b[_[R]]=m[_[R]])}return b}function $(m,P,b,_){var ne,R=arguments.length,E=R<3?P:null===_?_=Object.getOwnPropertyDescriptor(P,b):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)E=Reflect.decorate(m,P,b,_);else for(var me=m.length-1;me>=0;me--)(ne=m[me])&&(E=(R<3?ne(E):R>3?ne(P,b,E):ne(P,b))||E);return R>3&&E&&Object.defineProperty(P,b,E),E}function c(m,P){return function(b,_){P(b,_,m)}}function d(m,P){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(m,P)}function p(m,P,b,_){return new(b||(b=Promise))(function(E,ne){function me(ze){try{se(_.next(ze))}catch(Ge){ne(Ge)}}function Ee(ze){try{se(_.throw(ze))}catch(Ge){ne(Ge)}}function se(ze){ze.done?E(ze.value):function R(E){return E instanceof b?E:new b(function(ne){ne(E)})}(ze.value).then(me,Ee)}se((_=_.apply(m,P||[])).next())})}function z(m,P){var _,R,E,ne,b={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]};return ne={next:me(0),throw:me(1),return:me(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function me(se){return function(ze){return function Ee(se){if(_)throw new TypeError("Generator is already executing.");for(;b;)try{if(_=1,R&&(E=2&se[0]?R.return:se[0]?R.throw||((E=R.return)&&E.call(R),0):R.next)&&!(E=E.call(R,se[1])).done)return E;switch(R=0,E&&(se=[2&se[0],E.value]),se[0]){case 0:case 1:E=se;break;case 4:return b.label++,{value:se[1],done:!1};case 5:b.label++,R=se[1],se=[0];continue;case 7:se=b.ops.pop(),b.trys.pop();continue;default:if(!(E=(E=b.trys).length>0&&E[E.length-1])&&(6===se[0]||2===se[0])){b=0;continue}if(3===se[0]&&(!E||se[1]>E[0]&&se[1]<E[3])){b.label=se[1];break}if(6===se[0]&&b.label<E[1]){b.label=E[1],E=se;break}if(E&&b.label<E[2]){b.label=E[2],b.ops.push(se);break}E[2]&&b.ops.pop(),b.trys.pop();continue}se=P.call(m,b)}catch(ze){se=[6,ze],R=0}finally{_=E=0}if(5&se[0])throw se[1];return{value:se[0]?se[1]:void 0,done:!0}}([se,ze])}}}function S(m,P,b,_){void 0===_&&(_=b),m[_]=P[b]}function V(m,P){for(var b in m)"default"!==b&&!P.hasOwnProperty(b)&&(P[b]=m[b])}function N(m){var P="function"==typeof Symbol&&Symbol.iterator,b=P&&m[P],_=0;if(b)return b.call(m);if(m&&"number"==typeof m.length)return{next:function(){return m&&_>=m.length&&(m=void 0),{value:m&&m[_++],done:!m}}};throw new TypeError(P?"Object is not iterable.":"Symbol.iterator is not defined.")}function U(m,P){var b="function"==typeof Symbol&&m[Symbol.iterator];if(!b)return m;var R,ne,_=b.call(m),E=[];try{for(;(void 0===P||P-- >0)&&!(R=_.next()).done;)E.push(R.value)}catch(me){ne={error:me}}finally{try{R&&!R.done&&(b=_.return)&&b.call(_)}finally{if(ne)throw ne.error}}return E}function H(){for(var m=[],P=0;P<arguments.length;P++)m=m.concat(U(arguments[P]));return m}function Q(){for(var m=0,P=0,b=arguments.length;P<b;P++)m+=arguments[P].length;var _=Array(m),R=0;for(P=0;P<b;P++)for(var E=arguments[P],ne=0,me=E.length;ne<me;ne++,R++)_[R]=E[ne];return _}function Z(m){return this instanceof Z?(this.v=m,this):new Z(m)}function ue(m,P,b){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var R,_=b.apply(m,P||[]),E=[];return R={},ne("next"),ne("throw"),ne("return"),R[Symbol.asyncIterator]=function(){return this},R;function ne(xe){_[xe]&&(R[xe]=function(qe){return new Promise(function(Xe,lt){E.push([xe,qe,Xe,lt])>1||me(xe,qe)})})}function me(xe,qe){try{!function Ee(xe){xe.value instanceof Z?Promise.resolve(xe.value.v).then(se,ze):Ge(E[0][2],xe)}(_[xe](qe))}catch(Xe){Ge(E[0][3],Xe)}}function se(xe){me("next",xe)}function ze(xe){me("throw",xe)}function Ge(xe,qe){xe(qe),E.shift(),E.length&&me(E[0][0],E[0][1])}}function G(m){var P,b;return P={},_("next"),_("throw",function(R){throw R}),_("return"),P[Symbol.iterator]=function(){return this},P;function _(R,E){P[R]=m[R]?function(ne){return(b=!b)?{value:Z(m[R](ne)),done:"return"===R}:E?E(ne):ne}:E}}function X(m){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var b,P=m[Symbol.asyncIterator];return P?P.call(m):(m=N(m),b={},_("next"),_("throw"),_("return"),b[Symbol.asyncIterator]=function(){return this},b);function _(E){b[E]=m[E]&&function(ne){return new Promise(function(me,Ee){!function R(E,ne,me,Ee){Promise.resolve(Ee).then(function(se){E({value:se,done:me})},ne)}(me,Ee,(ne=m[E](ne)).done,ne.value)})}}}function ee(m,P){return Object.defineProperty?Object.defineProperty(m,"raw",{value:P}):m.raw=P,m}function ve(m){if(m&&m.__esModule)return m;var P={};if(null!=m)for(var b in m)Object.hasOwnProperty.call(m,b)&&(P[b]=m[b]);return P.default=m,P}function Oe(m){return m&&m.__esModule?m:{default:m}}function Le(m,P){if(!P.has(m))throw new TypeError("attempted to get private field on non-instance");return P.get(m)}function be(m,P,b){if(!P.has(m))throw new TypeError("attempted to set private field on non-instance");return P.set(m,b),b}},7994:(it,K,u)=>{u.r(K),u.d(K,{__extends:()=>n,__assign:()=>y,__rest:()=>x,__decorate:()=>$,__param:()=>c,__metadata:()=>d,__awaiter:()=>p,__generator:()=>z,__createBinding:()=>S,__exportStar:()=>V,__values:()=>N,__read:()=>U,__spread:()=>H,__spreadArrays:()=>Q,__await:()=>Z,__asyncGenerator:()=>ue,__asyncDelegator:()=>G,__asyncValues:()=>X,__makeTemplateObject:()=>ee,__importStar:()=>ve,__importDefault:()=>Oe,__classPrivateFieldGet:()=>Le,__classPrivateFieldSet:()=>be});var e=function(m,P){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,_){b.__proto__=_}||function(b,_){for(var R in _)_.hasOwnProperty(R)&&(b[R]=_[R])})(m,P)};function n(m,P){function b(){this.constructor=m}e(m,P),m.prototype=null===P?Object.create(P):(b.prototype=P.prototype,new b)}var y=function(){return y=Object.assign||function(P){for(var b,_=1,R=arguments.length;_<R;_++)for(var E in b=arguments[_])Object.prototype.hasOwnProperty.call(b,E)&&(P[E]=b[E]);return P},y.apply(this,arguments)};function x(m,P){var b={};for(var _ in m)Object.prototype.hasOwnProperty.call(m,_)&&P.indexOf(_)<0&&(b[_]=m[_]);if(null!=m&&"function"==typeof Object.getOwnPropertySymbols){var R=0;for(_=Object.getOwnPropertySymbols(m);R<_.length;R++)P.indexOf(_[R])<0&&Object.prototype.propertyIsEnumerable.call(m,_[R])&&(b[_[R]]=m[_[R]])}return b}function $(m,P,b,_){var ne,R=arguments.length,E=R<3?P:null===_?_=Object.getOwnPropertyDescriptor(P,b):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)E=Reflect.decorate(m,P,b,_);else for(var me=m.length-1;me>=0;me--)(ne=m[me])&&(E=(R<3?ne(E):R>3?ne(P,b,E):ne(P,b))||E);return R>3&&E&&Object.defineProperty(P,b,E),E}function c(m,P){return function(b,_){P(b,_,m)}}function d(m,P){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(m,P)}function p(m,P,b,_){return new(b||(b=Promise))(function(E,ne){function me(ze){try{se(_.next(ze))}catch(Ge){ne(Ge)}}function Ee(ze){try{se(_.throw(ze))}catch(Ge){ne(Ge)}}function se(ze){ze.done?E(ze.value):function R(E){return E instanceof b?E:new b(function(ne){ne(E)})}(ze.value).then(me,Ee)}se((_=_.apply(m,P||[])).next())})}function z(m,P){var _,R,E,ne,b={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]};return ne={next:me(0),throw:me(1),return:me(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function me(se){return function(ze){return function Ee(se){if(_)throw new TypeError("Generator is already executing.");for(;b;)try{if(_=1,R&&(E=2&se[0]?R.return:se[0]?R.throw||((E=R.return)&&E.call(R),0):R.next)&&!(E=E.call(R,se[1])).done)return E;switch(R=0,E&&(se=[2&se[0],E.value]),se[0]){case 0:case 1:E=se;break;case 4:return b.label++,{value:se[1],done:!1};case 5:b.label++,R=se[1],se=[0];continue;case 7:se=b.ops.pop(),b.trys.pop();continue;default:if(!(E=(E=b.trys).length>0&&E[E.length-1])&&(6===se[0]||2===se[0])){b=0;continue}if(3===se[0]&&(!E||se[1]>E[0]&&se[1]<E[3])){b.label=se[1];break}if(6===se[0]&&b.label<E[1]){b.label=E[1],E=se;break}if(E&&b.label<E[2]){b.label=E[2],b.ops.push(se);break}E[2]&&b.ops.pop(),b.trys.pop();continue}se=P.call(m,b)}catch(ze){se=[6,ze],R=0}finally{_=E=0}if(5&se[0])throw se[1];return{value:se[0]?se[1]:void 0,done:!0}}([se,ze])}}}function S(m,P,b,_){void 0===_&&(_=b),m[_]=P[b]}function V(m,P){for(var b in m)"default"!==b&&!P.hasOwnProperty(b)&&(P[b]=m[b])}function N(m){var P="function"==typeof Symbol&&Symbol.iterator,b=P&&m[P],_=0;if(b)return b.call(m);if(m&&"number"==typeof m.length)return{next:function(){return m&&_>=m.length&&(m=void 0),{value:m&&m[_++],done:!m}}};throw new TypeError(P?"Object is not iterable.":"Symbol.iterator is not defined.")}function U(m,P){var b="function"==typeof Symbol&&m[Symbol.iterator];if(!b)return m;var R,ne,_=b.call(m),E=[];try{for(;(void 0===P||P-- >0)&&!(R=_.next()).done;)E.push(R.value)}catch(me){ne={error:me}}finally{try{R&&!R.done&&(b=_.return)&&b.call(_)}finally{if(ne)throw ne.error}}return E}function H(){for(var m=[],P=0;P<arguments.length;P++)m=m.concat(U(arguments[P]));return m}function Q(){for(var m=0,P=0,b=arguments.length;P<b;P++)m+=arguments[P].length;var _=Array(m),R=0;for(P=0;P<b;P++)for(var E=arguments[P],ne=0,me=E.length;ne<me;ne++,R++)_[R]=E[ne];return _}function Z(m){return this instanceof Z?(this.v=m,this):new Z(m)}function ue(m,P,b){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var R,_=b.apply(m,P||[]),E=[];return R={},ne("next"),ne("throw"),ne("return"),R[Symbol.asyncIterator]=function(){return this},R;function ne(xe){_[xe]&&(R[xe]=function(qe){return new Promise(function(Xe,lt){E.push([xe,qe,Xe,lt])>1||me(xe,qe)})})}function me(xe,qe){try{!function Ee(xe){xe.value instanceof Z?Promise.resolve(xe.value.v).then(se,ze):Ge(E[0][2],xe)}(_[xe](qe))}catch(Xe){Ge(E[0][3],Xe)}}function se(xe){me("next",xe)}function ze(xe){me("throw",xe)}function Ge(xe,qe){xe(qe),E.shift(),E.length&&me(E[0][0],E[0][1])}}function G(m){var P,b;return P={},_("next"),_("throw",function(R){throw R}),_("return"),P[Symbol.iterator]=function(){return this},P;function _(R,E){P[R]=m[R]?function(ne){return(b=!b)?{value:Z(m[R](ne)),done:"return"===R}:E?E(ne):ne}:E}}function X(m){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var b,P=m[Symbol.asyncIterator];return P?P.call(m):(m=N(m),b={},_("next"),_("throw"),_("return"),b[Symbol.asyncIterator]=function(){return this},b);function _(E){b[E]=m[E]&&function(ne){return new Promise(function(me,Ee){!function R(E,ne,me,Ee){Promise.resolve(Ee).then(function(se){E({value:se,done:me})},ne)}(me,Ee,(ne=m[E](ne)).done,ne.value)})}}}function ee(m,P){return Object.defineProperty?Object.defineProperty(m,"raw",{value:P}):m.raw=P,m}function ve(m){if(m&&m.__esModule)return m;var P={};if(null!=m)for(var b in m)Object.hasOwnProperty.call(m,b)&&(P[b]=m[b]);return P.default=m,P}function Oe(m){return m&&m.__esModule?m:{default:m}}function Le(m,P){if(!P.has(m))throw new TypeError("attempted to get private field on non-instance");return P.get(m)}function be(m,P,b){if(!P.has(m))throw new TypeError("attempted to set private field on non-instance");return P.set(m,b),b}},8952:(it,K,u)=>{u.r(K),u.d(K,{__extends:()=>n,__assign:()=>y,__rest:()=>x,__decorate:()=>$,__param:()=>c,__metadata:()=>d,__awaiter:()=>p,__generator:()=>z,__createBinding:()=>S,__exportStar:()=>V,__values:()=>N,__read:()=>U,__spread:()=>H,__spreadArrays:()=>Q,__await:()=>Z,__asyncGenerator:()=>ue,__asyncDelegator:()=>G,__asyncValues:()=>X,__makeTemplateObject:()=>ee,__importStar:()=>ve,__importDefault:()=>Oe,__classPrivateFieldGet:()=>Le,__classPrivateFieldSet:()=>be});var e=function(m,P){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,_){b.__proto__=_}||function(b,_){for(var R in _)_.hasOwnProperty(R)&&(b[R]=_[R])})(m,P)};function n(m,P){function b(){this.constructor=m}e(m,P),m.prototype=null===P?Object.create(P):(b.prototype=P.prototype,new b)}var y=function(){return y=Object.assign||function(P){for(var b,_=1,R=arguments.length;_<R;_++)for(var E in b=arguments[_])Object.prototype.hasOwnProperty.call(b,E)&&(P[E]=b[E]);return P},y.apply(this,arguments)};function x(m,P){var b={};for(var _ in m)Object.prototype.hasOwnProperty.call(m,_)&&P.indexOf(_)<0&&(b[_]=m[_]);if(null!=m&&"function"==typeof Object.getOwnPropertySymbols){var R=0;for(_=Object.getOwnPropertySymbols(m);R<_.length;R++)P.indexOf(_[R])<0&&Object.prototype.propertyIsEnumerable.call(m,_[R])&&(b[_[R]]=m[_[R]])}return b}function $(m,P,b,_){var ne,R=arguments.length,E=R<3?P:null===_?_=Object.getOwnPropertyDescriptor(P,b):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)E=Reflect.decorate(m,P,b,_);else for(var me=m.length-1;me>=0;me--)(ne=m[me])&&(E=(R<3?ne(E):R>3?ne(P,b,E):ne(P,b))||E);return R>3&&E&&Object.defineProperty(P,b,E),E}function c(m,P){return function(b,_){P(b,_,m)}}function d(m,P){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(m,P)}function p(m,P,b,_){return new(b||(b=Promise))(function(E,ne){function me(ze){try{se(_.next(ze))}catch(Ge){ne(Ge)}}function Ee(ze){try{se(_.throw(ze))}catch(Ge){ne(Ge)}}function se(ze){ze.done?E(ze.value):function R(E){return E instanceof b?E:new b(function(ne){ne(E)})}(ze.value).then(me,Ee)}se((_=_.apply(m,P||[])).next())})}function z(m,P){var _,R,E,ne,b={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]};return ne={next:me(0),throw:me(1),return:me(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function me(se){return function(ze){return function Ee(se){if(_)throw new TypeError("Generator is already executing.");for(;b;)try{if(_=1,R&&(E=2&se[0]?R.return:se[0]?R.throw||((E=R.return)&&E.call(R),0):R.next)&&!(E=E.call(R,se[1])).done)return E;switch(R=0,E&&(se=[2&se[0],E.value]),se[0]){case 0:case 1:E=se;break;case 4:return b.label++,{value:se[1],done:!1};case 5:b.label++,R=se[1],se=[0];continue;case 7:se=b.ops.pop(),b.trys.pop();continue;default:if(!(E=(E=b.trys).length>0&&E[E.length-1])&&(6===se[0]||2===se[0])){b=0;continue}if(3===se[0]&&(!E||se[1]>E[0]&&se[1]<E[3])){b.label=se[1];break}if(6===se[0]&&b.label<E[1]){b.label=E[1],E=se;break}if(E&&b.label<E[2]){b.label=E[2],b.ops.push(se);break}E[2]&&b.ops.pop(),b.trys.pop();continue}se=P.call(m,b)}catch(ze){se=[6,ze],R=0}finally{_=E=0}if(5&se[0])throw se[1];return{value:se[0]?se[1]:void 0,done:!0}}([se,ze])}}}function S(m,P,b,_){void 0===_&&(_=b),m[_]=P[b]}function V(m,P){for(var b in m)"default"!==b&&!P.hasOwnProperty(b)&&(P[b]=m[b])}function N(m){var P="function"==typeof Symbol&&Symbol.iterator,b=P&&m[P],_=0;if(b)return b.call(m);if(m&&"number"==typeof m.length)return{next:function(){return m&&_>=m.length&&(m=void 0),{value:m&&m[_++],done:!m}}};throw new TypeError(P?"Object is not iterable.":"Symbol.iterator is not defined.")}function U(m,P){var b="function"==typeof Symbol&&m[Symbol.iterator];if(!b)return m;var R,ne,_=b.call(m),E=[];try{for(;(void 0===P||P-- >0)&&!(R=_.next()).done;)E.push(R.value)}catch(me){ne={error:me}}finally{try{R&&!R.done&&(b=_.return)&&b.call(_)}finally{if(ne)throw ne.error}}return E}function H(){for(var m=[],P=0;P<arguments.length;P++)m=m.concat(U(arguments[P]));return m}function Q(){for(var m=0,P=0,b=arguments.length;P<b;P++)m+=arguments[P].length;var _=Array(m),R=0;for(P=0;P<b;P++)for(var E=arguments[P],ne=0,me=E.length;ne<me;ne++,R++)_[R]=E[ne];return _}function Z(m){return this instanceof Z?(this.v=m,this):new Z(m)}function ue(m,P,b){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var R,_=b.apply(m,P||[]),E=[];return R={},ne("next"),ne("throw"),ne("return"),R[Symbol.asyncIterator]=function(){return this},R;function ne(xe){_[xe]&&(R[xe]=function(qe){return new Promise(function(Xe,lt){E.push([xe,qe,Xe,lt])>1||me(xe,qe)})})}function me(xe,qe){try{!function Ee(xe){xe.value instanceof Z?Promise.resolve(xe.value.v).then(se,ze):Ge(E[0][2],xe)}(_[xe](qe))}catch(Xe){Ge(E[0][3],Xe)}}function se(xe){me("next",xe)}function ze(xe){me("throw",xe)}function Ge(xe,qe){xe(qe),E.shift(),E.length&&me(E[0][0],E[0][1])}}function G(m){var P,b;return P={},_("next"),_("throw",function(R){throw R}),_("return"),P[Symbol.iterator]=function(){return this},P;function _(R,E){P[R]=m[R]?function(ne){return(b=!b)?{value:Z(m[R](ne)),done:"return"===R}:E?E(ne):ne}:E}}function X(m){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var b,P=m[Symbol.asyncIterator];return P?P.call(m):(m=N(m),b={},_("next"),_("throw"),_("return"),b[Symbol.asyncIterator]=function(){return this},b);function _(E){b[E]=m[E]&&function(ne){return new Promise(function(me,Ee){!function R(E,ne,me,Ee){Promise.resolve(Ee).then(function(se){E({value:se,done:me})},ne)}(me,Ee,(ne=m[E](ne)).done,ne.value)})}}}function ee(m,P){return Object.defineProperty?Object.defineProperty(m,"raw",{value:P}):m.raw=P,m}function ve(m){if(m&&m.__esModule)return m;var P={};if(null!=m)for(var b in m)Object.hasOwnProperty.call(m,b)&&(P[b]=m[b]);return P.default=m,P}function Oe(m){return m&&m.__esModule?m:{default:m}}function Le(m,P){if(!P.has(m))throw new TypeError("attempted to get private field on non-instance");return P.get(m)}function be(m,P,b){if(!P.has(m))throw new TypeError("attempted to set private field on non-instance");return P.set(m,b),b}},1707:(it,K,u)=>{u.r(K),u.d(K,{__extends:()=>n,__assign:()=>y,__rest:()=>x,__decorate:()=>$,__param:()=>c,__metadata:()=>d,__awaiter:()=>p,__generator:()=>z,__createBinding:()=>S,__exportStar:()=>V,__values:()=>N,__read:()=>U,__spread:()=>H,__spreadArrays:()=>Q,__await:()=>Z,__asyncGenerator:()=>ue,__asyncDelegator:()=>G,__asyncValues:()=>X,__makeTemplateObject:()=>ee,__importStar:()=>ve,__importDefault:()=>Oe,__classPrivateFieldGet:()=>Le,__classPrivateFieldSet:()=>be});var e=function(m,P){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,_){b.__proto__=_}||function(b,_){for(var R in _)_.hasOwnProperty(R)&&(b[R]=_[R])})(m,P)};function n(m,P){function b(){this.constructor=m}e(m,P),m.prototype=null===P?Object.create(P):(b.prototype=P.prototype,new b)}var y=function(){return y=Object.assign||function(P){for(var b,_=1,R=arguments.length;_<R;_++)for(var E in b=arguments[_])Object.prototype.hasOwnProperty.call(b,E)&&(P[E]=b[E]);return P},y.apply(this,arguments)};function x(m,P){var b={};for(var _ in m)Object.prototype.hasOwnProperty.call(m,_)&&P.indexOf(_)<0&&(b[_]=m[_]);if(null!=m&&"function"==typeof Object.getOwnPropertySymbols){var R=0;for(_=Object.getOwnPropertySymbols(m);R<_.length;R++)P.indexOf(_[R])<0&&Object.prototype.propertyIsEnumerable.call(m,_[R])&&(b[_[R]]=m[_[R]])}return b}function $(m,P,b,_){var ne,R=arguments.length,E=R<3?P:null===_?_=Object.getOwnPropertyDescriptor(P,b):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)E=Reflect.decorate(m,P,b,_);else for(var me=m.length-1;me>=0;me--)(ne=m[me])&&(E=(R<3?ne(E):R>3?ne(P,b,E):ne(P,b))||E);return R>3&&E&&Object.defineProperty(P,b,E),E}function c(m,P){return function(b,_){P(b,_,m)}}function d(m,P){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(m,P)}function p(m,P,b,_){return new(b||(b=Promise))(function(E,ne){function me(ze){try{se(_.next(ze))}catch(Ge){ne(Ge)}}function Ee(ze){try{se(_.throw(ze))}catch(Ge){ne(Ge)}}function se(ze){ze.done?E(ze.value):function R(E){return E instanceof b?E:new b(function(ne){ne(E)})}(ze.value).then(me,Ee)}se((_=_.apply(m,P||[])).next())})}function z(m,P){var _,R,E,ne,b={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]};return ne={next:me(0),throw:me(1),return:me(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function me(se){return function(ze){return function Ee(se){if(_)throw new TypeError("Generator is already executing.");for(;b;)try{if(_=1,R&&(E=2&se[0]?R.return:se[0]?R.throw||((E=R.return)&&E.call(R),0):R.next)&&!(E=E.call(R,se[1])).done)return E;switch(R=0,E&&(se=[2&se[0],E.value]),se[0]){case 0:case 1:E=se;break;case 4:return b.label++,{value:se[1],done:!1};case 5:b.label++,R=se[1],se=[0];continue;case 7:se=b.ops.pop(),b.trys.pop();continue;default:if(!(E=(E=b.trys).length>0&&E[E.length-1])&&(6===se[0]||2===se[0])){b=0;continue}if(3===se[0]&&(!E||se[1]>E[0]&&se[1]<E[3])){b.label=se[1];break}if(6===se[0]&&b.label<E[1]){b.label=E[1],E=se;break}if(E&&b.label<E[2]){b.label=E[2],b.ops.push(se);break}E[2]&&b.ops.pop(),b.trys.pop();continue}se=P.call(m,b)}catch(ze){se=[6,ze],R=0}finally{_=E=0}if(5&se[0])throw se[1];return{value:se[0]?se[1]:void 0,done:!0}}([se,ze])}}}function S(m,P,b,_){void 0===_&&(_=b),m[_]=P[b]}function V(m,P){for(var b in m)"default"!==b&&!P.hasOwnProperty(b)&&(P[b]=m[b])}function N(m){var P="function"==typeof Symbol&&Symbol.iterator,b=P&&m[P],_=0;if(b)return b.call(m);if(m&&"number"==typeof m.length)return{next:function(){return m&&_>=m.length&&(m=void 0),{value:m&&m[_++],done:!m}}};throw new TypeError(P?"Object is not iterable.":"Symbol.iterator is not defined.")}function U(m,P){var b="function"==typeof Symbol&&m[Symbol.iterator];if(!b)return m;var R,ne,_=b.call(m),E=[];try{for(;(void 0===P||P-- >0)&&!(R=_.next()).done;)E.push(R.value)}catch(me){ne={error:me}}finally{try{R&&!R.done&&(b=_.return)&&b.call(_)}finally{if(ne)throw ne.error}}return E}function H(){for(var m=[],P=0;P<arguments.length;P++)m=m.concat(U(arguments[P]));return m}function Q(){for(var m=0,P=0,b=arguments.length;P<b;P++)m+=arguments[P].length;var _=Array(m),R=0;for(P=0;P<b;P++)for(var E=arguments[P],ne=0,me=E.length;ne<me;ne++,R++)_[R]=E[ne];return _}function Z(m){return this instanceof Z?(this.v=m,this):new Z(m)}function ue(m,P,b){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var R,_=b.apply(m,P||[]),E=[];return R={},ne("next"),ne("throw"),ne("return"),R[Symbol.asyncIterator]=function(){return this},R;function ne(xe){_[xe]&&(R[xe]=function(qe){return new Promise(function(Xe,lt){E.push([xe,qe,Xe,lt])>1||me(xe,qe)})})}function me(xe,qe){try{!function Ee(xe){xe.value instanceof Z?Promise.resolve(xe.value.v).then(se,ze):Ge(E[0][2],xe)}(_[xe](qe))}catch(Xe){Ge(E[0][3],Xe)}}function se(xe){me("next",xe)}function ze(xe){me("throw",xe)}function Ge(xe,qe){xe(qe),E.shift(),E.length&&me(E[0][0],E[0][1])}}function G(m){var P,b;return P={},_("next"),_("throw",function(R){throw R}),_("return"),P[Symbol.iterator]=function(){return this},P;function _(R,E){P[R]=m[R]?function(ne){return(b=!b)?{value:Z(m[R](ne)),done:"return"===R}:E?E(ne):ne}:E}}function X(m){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var b,P=m[Symbol.asyncIterator];return P?P.call(m):(m=N(m),b={},_("next"),_("throw"),_("return"),b[Symbol.asyncIterator]=function(){return this},b);function _(E){b[E]=m[E]&&function(ne){return new Promise(function(me,Ee){!function R(E,ne,me,Ee){Promise.resolve(Ee).then(function(se){E({value:se,done:me})},ne)}(me,Ee,(ne=m[E](ne)).done,ne.value)})}}}function ee(m,P){return Object.defineProperty?Object.defineProperty(m,"raw",{value:P}):m.raw=P,m}function ve(m){if(m&&m.__esModule)return m;var P={};if(null!=m)for(var b in m)Object.hasOwnProperty.call(m,b)&&(P[b]=m[b]);return P.default=m,P}function Oe(m){return m&&m.__esModule?m:{default:m}}function Le(m,P){if(!P.has(m))throw new TypeError("attempted to get private field on non-instance");return P.get(m)}function be(m,P,b){if(!P.has(m))throw new TypeError("attempted to set private field on non-instance");return P.set(m,b),b}},9106:(it,K,u)=>{u.r(K),u.d(K,{__extends:()=>n,__assign:()=>y,__rest:()=>x,__decorate:()=>$,__param:()=>c,__metadata:()=>d,__awaiter:()=>p,__generator:()=>z,__createBinding:()=>S,__exportStar:()=>V,__values:()=>N,__read:()=>U,__spread:()=>H,__spreadArrays:()=>Q,__await:()=>Z,__asyncGenerator:()=>ue,__asyncDelegator:()=>G,__asyncValues:()=>X,__makeTemplateObject:()=>ee,__importStar:()=>ve,__importDefault:()=>Oe,__classPrivateFieldGet:()=>Le,__classPrivateFieldSet:()=>be});var e=function(m,P){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,_){b.__proto__=_}||function(b,_){for(var R in _)_.hasOwnProperty(R)&&(b[R]=_[R])})(m,P)};function n(m,P){function b(){this.constructor=m}e(m,P),m.prototype=null===P?Object.create(P):(b.prototype=P.prototype,new b)}var y=function(){return y=Object.assign||function(P){for(var b,_=1,R=arguments.length;_<R;_++)for(var E in b=arguments[_])Object.prototype.hasOwnProperty.call(b,E)&&(P[E]=b[E]);return P},y.apply(this,arguments)};function x(m,P){var b={};for(var _ in m)Object.prototype.hasOwnProperty.call(m,_)&&P.indexOf(_)<0&&(b[_]=m[_]);if(null!=m&&"function"==typeof Object.getOwnPropertySymbols){var R=0;for(_=Object.getOwnPropertySymbols(m);R<_.length;R++)P.indexOf(_[R])<0&&Object.prototype.propertyIsEnumerable.call(m,_[R])&&(b[_[R]]=m[_[R]])}return b}function $(m,P,b,_){var ne,R=arguments.length,E=R<3?P:null===_?_=Object.getOwnPropertyDescriptor(P,b):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)E=Reflect.decorate(m,P,b,_);else for(var me=m.length-1;me>=0;me--)(ne=m[me])&&(E=(R<3?ne(E):R>3?ne(P,b,E):ne(P,b))||E);return R>3&&E&&Object.defineProperty(P,b,E),E}function c(m,P){return function(b,_){P(b,_,m)}}function d(m,P){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(m,P)}function p(m,P,b,_){return new(b||(b=Promise))(function(E,ne){function me(ze){try{se(_.next(ze))}catch(Ge){ne(Ge)}}function Ee(ze){try{se(_.throw(ze))}catch(Ge){ne(Ge)}}function se(ze){ze.done?E(ze.value):function R(E){return E instanceof b?E:new b(function(ne){ne(E)})}(ze.value).then(me,Ee)}se((_=_.apply(m,P||[])).next())})}function z(m,P){var _,R,E,ne,b={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]};return ne={next:me(0),throw:me(1),return:me(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function me(se){return function(ze){return function Ee(se){if(_)throw new TypeError("Generator is already executing.");for(;b;)try{if(_=1,R&&(E=2&se[0]?R.return:se[0]?R.throw||((E=R.return)&&E.call(R),0):R.next)&&!(E=E.call(R,se[1])).done)return E;switch(R=0,E&&(se=[2&se[0],E.value]),se[0]){case 0:case 1:E=se;break;case 4:return b.label++,{value:se[1],done:!1};case 5:b.label++,R=se[1],se=[0];continue;case 7:se=b.ops.pop(),b.trys.pop();continue;default:if(!(E=(E=b.trys).length>0&&E[E.length-1])&&(6===se[0]||2===se[0])){b=0;continue}if(3===se[0]&&(!E||se[1]>E[0]&&se[1]<E[3])){b.label=se[1];break}if(6===se[0]&&b.label<E[1]){b.label=E[1],E=se;break}if(E&&b.label<E[2]){b.label=E[2],b.ops.push(se);break}E[2]&&b.ops.pop(),b.trys.pop();continue}se=P.call(m,b)}catch(ze){se=[6,ze],R=0}finally{_=E=0}if(5&se[0])throw se[1];return{value:se[0]?se[1]:void 0,done:!0}}([se,ze])}}}function S(m,P,b,_){void 0===_&&(_=b),m[_]=P[b]}function V(m,P){for(var b in m)"default"!==b&&!P.hasOwnProperty(b)&&(P[b]=m[b])}function N(m){var P="function"==typeof Symbol&&Symbol.iterator,b=P&&m[P],_=0;if(b)return b.call(m);if(m&&"number"==typeof m.length)return{next:function(){return m&&_>=m.length&&(m=void 0),{value:m&&m[_++],done:!m}}};throw new TypeError(P?"Object is not iterable.":"Symbol.iterator is not defined.")}function U(m,P){var b="function"==typeof Symbol&&m[Symbol.iterator];if(!b)return m;var R,ne,_=b.call(m),E=[];try{for(;(void 0===P||P-- >0)&&!(R=_.next()).done;)E.push(R.value)}catch(me){ne={error:me}}finally{try{R&&!R.done&&(b=_.return)&&b.call(_)}finally{if(ne)throw ne.error}}return E}function H(){for(var m=[],P=0;P<arguments.length;P++)m=m.concat(U(arguments[P]));return m}function Q(){for(var m=0,P=0,b=arguments.length;P<b;P++)m+=arguments[P].length;var _=Array(m),R=0;for(P=0;P<b;P++)for(var E=arguments[P],ne=0,me=E.length;ne<me;ne++,R++)_[R]=E[ne];return _}function Z(m){return this instanceof Z?(this.v=m,this):new Z(m)}function ue(m,P,b){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var R,_=b.apply(m,P||[]),E=[];return R={},ne("next"),ne("throw"),ne("return"),R[Symbol.asyncIterator]=function(){return this},R;function ne(xe){_[xe]&&(R[xe]=function(qe){return new Promise(function(Xe,lt){E.push([xe,qe,Xe,lt])>1||me(xe,qe)})})}function me(xe,qe){try{!function Ee(xe){xe.value instanceof Z?Promise.resolve(xe.value.v).then(se,ze):Ge(E[0][2],xe)}(_[xe](qe))}catch(Xe){Ge(E[0][3],Xe)}}function se(xe){me("next",xe)}function ze(xe){me("throw",xe)}function Ge(xe,qe){xe(qe),E.shift(),E.length&&me(E[0][0],E[0][1])}}function G(m){var P,b;return P={},_("next"),_("throw",function(R){throw R}),_("return"),P[Symbol.iterator]=function(){return this},P;function _(R,E){P[R]=m[R]?function(ne){return(b=!b)?{value:Z(m[R](ne)),done:"return"===R}:E?E(ne):ne}:E}}function X(m){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var b,P=m[Symbol.asyncIterator];return P?P.call(m):(m=N(m),b={},_("next"),_("throw"),_("return"),b[Symbol.asyncIterator]=function(){return this},b);function _(E){b[E]=m[E]&&function(ne){return new Promise(function(me,Ee){!function R(E,ne,me,Ee){Promise.resolve(Ee).then(function(se){E({value:se,done:me})},ne)}(me,Ee,(ne=m[E](ne)).done,ne.value)})}}}function ee(m,P){return Object.defineProperty?Object.defineProperty(m,"raw",{value:P}):m.raw=P,m}function ve(m){if(m&&m.__esModule)return m;var P={};if(null!=m)for(var b in m)Object.hasOwnProperty.call(m,b)&&(P[b]=m[b]);return P.default=m,P}function Oe(m){return m&&m.__esModule?m:{default:m}}function Le(m,P){if(!P.has(m))throw new TypeError("attempted to get private field on non-instance");return P.get(m)}function be(m,P,b){if(!P.has(m))throw new TypeError("attempted to set private field on non-instance");return P.set(m,b),b}},5298:(it,K,u)=>{u.r(K),u.d(K,{__extends:()=>n,__assign:()=>y,__rest:()=>x,__decorate:()=>$,__param:()=>c,__metadata:()=>d,__awaiter:()=>p,__generator:()=>z,__createBinding:()=>S,__exportStar:()=>V,__values:()=>N,__read:()=>U,__spread:()=>H,__spreadArrays:()=>Q,__await:()=>Z,__asyncGenerator:()=>ue,__asyncDelegator:()=>G,__asyncValues:()=>X,__makeTemplateObject:()=>ee,__importStar:()=>ve,__importDefault:()=>Oe,__classPrivateFieldGet:()=>Le,__classPrivateFieldSet:()=>be});var e=function(m,P){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,_){b.__proto__=_}||function(b,_){for(var R in _)_.hasOwnProperty(R)&&(b[R]=_[R])})(m,P)};function n(m,P){function b(){this.constructor=m}e(m,P),m.prototype=null===P?Object.create(P):(b.prototype=P.prototype,new b)}var y=function(){return y=Object.assign||function(P){for(var b,_=1,R=arguments.length;_<R;_++)for(var E in b=arguments[_])Object.prototype.hasOwnProperty.call(b,E)&&(P[E]=b[E]);return P},y.apply(this,arguments)};function x(m,P){var b={};for(var _ in m)Object.prototype.hasOwnProperty.call(m,_)&&P.indexOf(_)<0&&(b[_]=m[_]);if(null!=m&&"function"==typeof Object.getOwnPropertySymbols){var R=0;for(_=Object.getOwnPropertySymbols(m);R<_.length;R++)P.indexOf(_[R])<0&&Object.prototype.propertyIsEnumerable.call(m,_[R])&&(b[_[R]]=m[_[R]])}return b}function $(m,P,b,_){var ne,R=arguments.length,E=R<3?P:null===_?_=Object.getOwnPropertyDescriptor(P,b):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)E=Reflect.decorate(m,P,b,_);else for(var me=m.length-1;me>=0;me--)(ne=m[me])&&(E=(R<3?ne(E):R>3?ne(P,b,E):ne(P,b))||E);return R>3&&E&&Object.defineProperty(P,b,E),E}function c(m,P){return function(b,_){P(b,_,m)}}function d(m,P){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(m,P)}function p(m,P,b,_){return new(b||(b=Promise))(function(E,ne){function me(ze){try{se(_.next(ze))}catch(Ge){ne(Ge)}}function Ee(ze){try{se(_.throw(ze))}catch(Ge){ne(Ge)}}function se(ze){ze.done?E(ze.value):function R(E){return E instanceof b?E:new b(function(ne){ne(E)})}(ze.value).then(me,Ee)}se((_=_.apply(m,P||[])).next())})}function z(m,P){var _,R,E,ne,b={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]};return ne={next:me(0),throw:me(1),return:me(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function me(se){return function(ze){return function Ee(se){if(_)throw new TypeError("Generator is already executing.");for(;b;)try{if(_=1,R&&(E=2&se[0]?R.return:se[0]?R.throw||((E=R.return)&&E.call(R),0):R.next)&&!(E=E.call(R,se[1])).done)return E;switch(R=0,E&&(se=[2&se[0],E.value]),se[0]){case 0:case 1:E=se;break;case 4:return b.label++,{value:se[1],done:!1};case 5:b.label++,R=se[1],se=[0];continue;case 7:se=b.ops.pop(),b.trys.pop();continue;default:if(!(E=(E=b.trys).length>0&&E[E.length-1])&&(6===se[0]||2===se[0])){b=0;continue}if(3===se[0]&&(!E||se[1]>E[0]&&se[1]<E[3])){b.label=se[1];break}if(6===se[0]&&b.label<E[1]){b.label=E[1],E=se;break}if(E&&b.label<E[2]){b.label=E[2],b.ops.push(se);break}E[2]&&b.ops.pop(),b.trys.pop();continue}se=P.call(m,b)}catch(ze){se=[6,ze],R=0}finally{_=E=0}if(5&se[0])throw se[1];return{value:se[0]?se[1]:void 0,done:!0}}([se,ze])}}}function S(m,P,b,_){void 0===_&&(_=b),m[_]=P[b]}function V(m,P){for(var b in m)"default"!==b&&!P.hasOwnProperty(b)&&(P[b]=m[b])}function N(m){var P="function"==typeof Symbol&&Symbol.iterator,b=P&&m[P],_=0;if(b)return b.call(m);if(m&&"number"==typeof m.length)return{next:function(){return m&&_>=m.length&&(m=void 0),{value:m&&m[_++],done:!m}}};throw new TypeError(P?"Object is not iterable.":"Symbol.iterator is not defined.")}function U(m,P){var b="function"==typeof Symbol&&m[Symbol.iterator];if(!b)return m;var R,ne,_=b.call(m),E=[];try{for(;(void 0===P||P-- >0)&&!(R=_.next()).done;)E.push(R.value)}catch(me){ne={error:me}}finally{try{R&&!R.done&&(b=_.return)&&b.call(_)}finally{if(ne)throw ne.error}}return E}function H(){for(var m=[],P=0;P<arguments.length;P++)m=m.concat(U(arguments[P]));return m}function Q(){for(var m=0,P=0,b=arguments.length;P<b;P++)m+=arguments[P].length;var _=Array(m),R=0;for(P=0;P<b;P++)for(var E=arguments[P],ne=0,me=E.length;ne<me;ne++,R++)_[R]=E[ne];return _}function Z(m){return this instanceof Z?(this.v=m,this):new Z(m)}function ue(m,P,b){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var R,_=b.apply(m,P||[]),E=[];return R={},ne("next"),ne("throw"),ne("return"),R[Symbol.asyncIterator]=function(){return this},R;function ne(xe){_[xe]&&(R[xe]=function(qe){return new Promise(function(Xe,lt){E.push([xe,qe,Xe,lt])>1||me(xe,qe)})})}function me(xe,qe){try{!function Ee(xe){xe.value instanceof Z?Promise.resolve(xe.value.v).then(se,ze):Ge(E[0][2],xe)}(_[xe](qe))}catch(Xe){Ge(E[0][3],Xe)}}function se(xe){me("next",xe)}function ze(xe){me("throw",xe)}function Ge(xe,qe){xe(qe),E.shift(),E.length&&me(E[0][0],E[0][1])}}function G(m){var P,b;return P={},_("next"),_("throw",function(R){throw R}),_("return"),P[Symbol.iterator]=function(){return this},P;function _(R,E){P[R]=m[R]?function(ne){return(b=!b)?{value:Z(m[R](ne)),done:"return"===R}:E?E(ne):ne}:E}}function X(m){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var b,P=m[Symbol.asyncIterator];return P?P.call(m):(m=N(m),b={},_("next"),_("throw"),_("return"),b[Symbol.asyncIterator]=function(){return this},b);function _(E){b[E]=m[E]&&function(ne){return new Promise(function(me,Ee){!function R(E,ne,me,Ee){Promise.resolve(Ee).then(function(se){E({value:se,done:me})},ne)}(me,Ee,(ne=m[E](ne)).done,ne.value)})}}}function ee(m,P){return Object.defineProperty?Object.defineProperty(m,"raw",{value:P}):m.raw=P,m}function ve(m){if(m&&m.__esModule)return m;var P={};if(null!=m)for(var b in m)Object.hasOwnProperty.call(m,b)&&(P[b]=m[b]);return P.default=m,P}function Oe(m){return m&&m.__esModule?m:{default:m}}function Le(m,P){if(!P.has(m))throw new TypeError("attempted to get private field on non-instance");return P.get(m)}function be(m,P,b){if(!P.has(m))throw new TypeError("attempted to set private field on non-instance");return P.set(m,b),b}},9904:(it,K,u)=>{u.r(K),u.d(K,{__extends:()=>n,__assign:()=>y,__rest:()=>x,__decorate:()=>$,__param:()=>c,__metadata:()=>d,__awaiter:()=>p,__generator:()=>z,__createBinding:()=>S,__exportStar:()=>V,__values:()=>N,__read:()=>U,__spread:()=>H,__spreadArrays:()=>Q,__await:()=>Z,__asyncGenerator:()=>ue,__asyncDelegator:()=>G,__asyncValues:()=>X,__makeTemplateObject:()=>ee,__importStar:()=>ve,__importDefault:()=>Oe,__classPrivateFieldGet:()=>Le,__classPrivateFieldSet:()=>be});var e=function(m,P){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,_){b.__proto__=_}||function(b,_){for(var R in _)_.hasOwnProperty(R)&&(b[R]=_[R])})(m,P)};function n(m,P){function b(){this.constructor=m}e(m,P),m.prototype=null===P?Object.create(P):(b.prototype=P.prototype,new b)}var y=function(){return y=Object.assign||function(P){for(var b,_=1,R=arguments.length;_<R;_++)for(var E in b=arguments[_])Object.prototype.hasOwnProperty.call(b,E)&&(P[E]=b[E]);return P},y.apply(this,arguments)};function x(m,P){var b={};for(var _ in m)Object.prototype.hasOwnProperty.call(m,_)&&P.indexOf(_)<0&&(b[_]=m[_]);if(null!=m&&"function"==typeof Object.getOwnPropertySymbols){var R=0;for(_=Object.getOwnPropertySymbols(m);R<_.length;R++)P.indexOf(_[R])<0&&Object.prototype.propertyIsEnumerable.call(m,_[R])&&(b[_[R]]=m[_[R]])}return b}function $(m,P,b,_){var ne,R=arguments.length,E=R<3?P:null===_?_=Object.getOwnPropertyDescriptor(P,b):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)E=Reflect.decorate(m,P,b,_);else for(var me=m.length-1;me>=0;me--)(ne=m[me])&&(E=(R<3?ne(E):R>3?ne(P,b,E):ne(P,b))||E);return R>3&&E&&Object.defineProperty(P,b,E),E}function c(m,P){return function(b,_){P(b,_,m)}}function d(m,P){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(m,P)}function p(m,P,b,_){return new(b||(b=Promise))(function(E,ne){function me(ze){try{se(_.next(ze))}catch(Ge){ne(Ge)}}function Ee(ze){try{se(_.throw(ze))}catch(Ge){ne(Ge)}}function se(ze){ze.done?E(ze.value):function R(E){return E instanceof b?E:new b(function(ne){ne(E)})}(ze.value).then(me,Ee)}se((_=_.apply(m,P||[])).next())})}function z(m,P){var _,R,E,ne,b={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]};return ne={next:me(0),throw:me(1),return:me(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function me(se){return function(ze){return function Ee(se){if(_)throw new TypeError("Generator is already executing.");for(;b;)try{if(_=1,R&&(E=2&se[0]?R.return:se[0]?R.throw||((E=R.return)&&E.call(R),0):R.next)&&!(E=E.call(R,se[1])).done)return E;switch(R=0,E&&(se=[2&se[0],E.value]),se[0]){case 0:case 1:E=se;break;case 4:return b.label++,{value:se[1],done:!1};case 5:b.label++,R=se[1],se=[0];continue;case 7:se=b.ops.pop(),b.trys.pop();continue;default:if(!(E=(E=b.trys).length>0&&E[E.length-1])&&(6===se[0]||2===se[0])){b=0;continue}if(3===se[0]&&(!E||se[1]>E[0]&&se[1]<E[3])){b.label=se[1];break}if(6===se[0]&&b.label<E[1]){b.label=E[1],E=se;break}if(E&&b.label<E[2]){b.label=E[2],b.ops.push(se);break}E[2]&&b.ops.pop(),b.trys.pop();continue}se=P.call(m,b)}catch(ze){se=[6,ze],R=0}finally{_=E=0}if(5&se[0])throw se[1];return{value:se[0]?se[1]:void 0,done:!0}}([se,ze])}}}function S(m,P,b,_){void 0===_&&(_=b),m[_]=P[b]}function V(m,P){for(var b in m)"default"!==b&&!P.hasOwnProperty(b)&&(P[b]=m[b])}function N(m){var P="function"==typeof Symbol&&Symbol.iterator,b=P&&m[P],_=0;if(b)return b.call(m);if(m&&"number"==typeof m.length)return{next:function(){return m&&_>=m.length&&(m=void 0),{value:m&&m[_++],done:!m}}};throw new TypeError(P?"Object is not iterable.":"Symbol.iterator is not defined.")}function U(m,P){var b="function"==typeof Symbol&&m[Symbol.iterator];if(!b)return m;var R,ne,_=b.call(m),E=[];try{for(;(void 0===P||P-- >0)&&!(R=_.next()).done;)E.push(R.value)}catch(me){ne={error:me}}finally{try{R&&!R.done&&(b=_.return)&&b.call(_)}finally{if(ne)throw ne.error}}return E}function H(){for(var m=[],P=0;P<arguments.length;P++)m=m.concat(U(arguments[P]));return m}function Q(){for(var m=0,P=0,b=arguments.length;P<b;P++)m+=arguments[P].length;var _=Array(m),R=0;for(P=0;P<b;P++)for(var E=arguments[P],ne=0,me=E.length;ne<me;ne++,R++)_[R]=E[ne];return _}function Z(m){return this instanceof Z?(this.v=m,this):new Z(m)}function ue(m,P,b){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var R,_=b.apply(m,P||[]),E=[];return R={},ne("next"),ne("throw"),ne("return"),R[Symbol.asyncIterator]=function(){return this},R;function ne(xe){_[xe]&&(R[xe]=function(qe){return new Promise(function(Xe,lt){E.push([xe,qe,Xe,lt])>1||me(xe,qe)})})}function me(xe,qe){try{!function Ee(xe){xe.value instanceof Z?Promise.resolve(xe.value.v).then(se,ze):Ge(E[0][2],xe)}(_[xe](qe))}catch(Xe){Ge(E[0][3],Xe)}}function se(xe){me("next",xe)}function ze(xe){me("throw",xe)}function Ge(xe,qe){xe(qe),E.shift(),E.length&&me(E[0][0],E[0][1])}}function G(m){var P,b;return P={},_("next"),_("throw",function(R){throw R}),_("return"),P[Symbol.iterator]=function(){return this},P;function _(R,E){P[R]=m[R]?function(ne){return(b=!b)?{value:Z(m[R](ne)),done:"return"===R}:E?E(ne):ne}:E}}function X(m){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var b,P=m[Symbol.asyncIterator];return P?P.call(m):(m=N(m),b={},_("next"),_("throw"),_("return"),b[Symbol.asyncIterator]=function(){return this},b);function _(E){b[E]=m[E]&&function(ne){return new Promise(function(me,Ee){!function R(E,ne,me,Ee){Promise.resolve(Ee).then(function(se){E({value:se,done:me})},ne)}(me,Ee,(ne=m[E](ne)).done,ne.value)})}}}function ee(m,P){return Object.defineProperty?Object.defineProperty(m,"raw",{value:P}):m.raw=P,m}function ve(m){if(m&&m.__esModule)return m;var P={};if(null!=m)for(var b in m)Object.hasOwnProperty.call(m,b)&&(P[b]=m[b]);return P.default=m,P}function Oe(m){return m&&m.__esModule?m:{default:m}}function Le(m,P){if(!P.has(m))throw new TypeError("attempted to get private field on non-instance");return P.get(m)}function be(m,P,b){if(!P.has(m))throw new TypeError("attempted to set private field on non-instance");return P.set(m,b),b}},7716:(it,K,u)=>{u.r(K),u.d(K,{__extends:()=>n,__assign:()=>y,__rest:()=>x,__decorate:()=>$,__param:()=>c,__metadata:()=>d,__awaiter:()=>p,__generator:()=>z,__createBinding:()=>S,__exportStar:()=>V,__values:()=>N,__read:()=>U,__spread:()=>H,__spreadArrays:()=>Q,__await:()=>Z,__asyncGenerator:()=>ue,__asyncDelegator:()=>G,__asyncValues:()=>X,__makeTemplateObject:()=>ee,__importStar:()=>ve,__importDefault:()=>Oe,__classPrivateFieldGet:()=>Le,__classPrivateFieldSet:()=>be});var e=function(m,P){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,_){b.__proto__=_}||function(b,_){for(var R in _)_.hasOwnProperty(R)&&(b[R]=_[R])})(m,P)};function n(m,P){function b(){this.constructor=m}e(m,P),m.prototype=null===P?Object.create(P):(b.prototype=P.prototype,new b)}var y=function(){return y=Object.assign||function(P){for(var b,_=1,R=arguments.length;_<R;_++)for(var E in b=arguments[_])Object.prototype.hasOwnProperty.call(b,E)&&(P[E]=b[E]);return P},y.apply(this,arguments)};function x(m,P){var b={};for(var _ in m)Object.prototype.hasOwnProperty.call(m,_)&&P.indexOf(_)<0&&(b[_]=m[_]);if(null!=m&&"function"==typeof Object.getOwnPropertySymbols){var R=0;for(_=Object.getOwnPropertySymbols(m);R<_.length;R++)P.indexOf(_[R])<0&&Object.prototype.propertyIsEnumerable.call(m,_[R])&&(b[_[R]]=m[_[R]])}return b}function $(m,P,b,_){var ne,R=arguments.length,E=R<3?P:null===_?_=Object.getOwnPropertyDescriptor(P,b):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)E=Reflect.decorate(m,P,b,_);else for(var me=m.length-1;me>=0;me--)(ne=m[me])&&(E=(R<3?ne(E):R>3?ne(P,b,E):ne(P,b))||E);return R>3&&E&&Object.defineProperty(P,b,E),E}function c(m,P){return function(b,_){P(b,_,m)}}function d(m,P){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(m,P)}function p(m,P,b,_){return new(b||(b=Promise))(function(E,ne){function me(ze){try{se(_.next(ze))}catch(Ge){ne(Ge)}}function Ee(ze){try{se(_.throw(ze))}catch(Ge){ne(Ge)}}function se(ze){ze.done?E(ze.value):function R(E){return E instanceof b?E:new b(function(ne){ne(E)})}(ze.value).then(me,Ee)}se((_=_.apply(m,P||[])).next())})}function z(m,P){var _,R,E,ne,b={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]};return ne={next:me(0),throw:me(1),return:me(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function me(se){return function(ze){return function Ee(se){if(_)throw new TypeError("Generator is already executing.");for(;b;)try{if(_=1,R&&(E=2&se[0]?R.return:se[0]?R.throw||((E=R.return)&&E.call(R),0):R.next)&&!(E=E.call(R,se[1])).done)return E;switch(R=0,E&&(se=[2&se[0],E.value]),se[0]){case 0:case 1:E=se;break;case 4:return b.label++,{value:se[1],done:!1};case 5:b.label++,R=se[1],se=[0];continue;case 7:se=b.ops.pop(),b.trys.pop();continue;default:if(!(E=(E=b.trys).length>0&&E[E.length-1])&&(6===se[0]||2===se[0])){b=0;continue}if(3===se[0]&&(!E||se[1]>E[0]&&se[1]<E[3])){b.label=se[1];break}if(6===se[0]&&b.label<E[1]){b.label=E[1],E=se;break}if(E&&b.label<E[2]){b.label=E[2],b.ops.push(se);break}E[2]&&b.ops.pop(),b.trys.pop();continue}se=P.call(m,b)}catch(ze){se=[6,ze],R=0}finally{_=E=0}if(5&se[0])throw se[1];return{value:se[0]?se[1]:void 0,done:!0}}([se,ze])}}}function S(m,P,b,_){void 0===_&&(_=b),m[_]=P[b]}function V(m,P){for(var b in m)"default"!==b&&!P.hasOwnProperty(b)&&(P[b]=m[b])}function N(m){var P="function"==typeof Symbol&&Symbol.iterator,b=P&&m[P],_=0;if(b)return b.call(m);if(m&&"number"==typeof m.length)return{next:function(){return m&&_>=m.length&&(m=void 0),{value:m&&m[_++],done:!m}}};throw new TypeError(P?"Object is not iterable.":"Symbol.iterator is not defined.")}function U(m,P){var b="function"==typeof Symbol&&m[Symbol.iterator];if(!b)return m;var R,ne,_=b.call(m),E=[];try{for(;(void 0===P||P-- >0)&&!(R=_.next()).done;)E.push(R.value)}catch(me){ne={error:me}}finally{try{R&&!R.done&&(b=_.return)&&b.call(_)}finally{if(ne)throw ne.error}}return E}function H(){for(var m=[],P=0;P<arguments.length;P++)m=m.concat(U(arguments[P]));return m}function Q(){for(var m=0,P=0,b=arguments.length;P<b;P++)m+=arguments[P].length;var _=Array(m),R=0;for(P=0;P<b;P++)for(var E=arguments[P],ne=0,me=E.length;ne<me;ne++,R++)_[R]=E[ne];return _}function Z(m){return this instanceof Z?(this.v=m,this):new Z(m)}function ue(m,P,b){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var R,_=b.apply(m,P||[]),E=[];return R={},ne("next"),ne("throw"),ne("return"),R[Symbol.asyncIterator]=function(){return this},R;function ne(xe){_[xe]&&(R[xe]=function(qe){return new Promise(function(Xe,lt){E.push([xe,qe,Xe,lt])>1||me(xe,qe)})})}function me(xe,qe){try{!function Ee(xe){xe.value instanceof Z?Promise.resolve(xe.value.v).then(se,ze):Ge(E[0][2],xe)}(_[xe](qe))}catch(Xe){Ge(E[0][3],Xe)}}function se(xe){me("next",xe)}function ze(xe){me("throw",xe)}function Ge(xe,qe){xe(qe),E.shift(),E.length&&me(E[0][0],E[0][1])}}function G(m){var P,b;return P={},_("next"),_("throw",function(R){throw R}),_("return"),P[Symbol.iterator]=function(){return this},P;function _(R,E){P[R]=m[R]?function(ne){return(b=!b)?{value:Z(m[R](ne)),done:"return"===R}:E?E(ne):ne}:E}}function X(m){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var b,P=m[Symbol.asyncIterator];return P?P.call(m):(m=N(m),b={},_("next"),_("throw"),_("return"),b[Symbol.asyncIterator]=function(){return this},b);function _(E){b[E]=m[E]&&function(ne){return new Promise(function(me,Ee){!function R(E,ne,me,Ee){Promise.resolve(Ee).then(function(se){E({value:se,done:me})},ne)}(me,Ee,(ne=m[E](ne)).done,ne.value)})}}}function ee(m,P){return Object.defineProperty?Object.defineProperty(m,"raw",{value:P}):m.raw=P,m}function ve(m){if(m&&m.__esModule)return m;var P={};if(null!=m)for(var b in m)Object.hasOwnProperty.call(m,b)&&(P[b]=m[b]);return P.default=m,P}function Oe(m){return m&&m.__esModule?m:{default:m}}function Le(m,P){if(!P.has(m))throw new TypeError("attempted to get private field on non-instance");return P.get(m)}function be(m,P,b){if(!P.has(m))throw new TypeError("attempted to set private field on non-instance");return P.set(m,b),b}},6187:(it,K,u)=>{u.r(K),u.d(K,{__extends:()=>n,__assign:()=>y,__rest:()=>x,__decorate:()=>$,__param:()=>c,__metadata:()=>d,__awaiter:()=>p,__generator:()=>z,__createBinding:()=>S,__exportStar:()=>V,__values:()=>N,__read:()=>U,__spread:()=>H,__spreadArrays:()=>Q,__await:()=>Z,__asyncGenerator:()=>ue,__asyncDelegator:()=>G,__asyncValues:()=>X,__makeTemplateObject:()=>ee,__importStar:()=>ve,__importDefault:()=>Oe,__classPrivateFieldGet:()=>Le,__classPrivateFieldSet:()=>be});var e=function(m,P){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,_){b.__proto__=_}||function(b,_){for(var R in _)_.hasOwnProperty(R)&&(b[R]=_[R])})(m,P)};function n(m,P){function b(){this.constructor=m}e(m,P),m.prototype=null===P?Object.create(P):(b.prototype=P.prototype,new b)}var y=function(){return y=Object.assign||function(P){for(var b,_=1,R=arguments.length;_<R;_++)for(var E in b=arguments[_])Object.prototype.hasOwnProperty.call(b,E)&&(P[E]=b[E]);return P},y.apply(this,arguments)};function x(m,P){var b={};for(var _ in m)Object.prototype.hasOwnProperty.call(m,_)&&P.indexOf(_)<0&&(b[_]=m[_]);if(null!=m&&"function"==typeof Object.getOwnPropertySymbols){var R=0;for(_=Object.getOwnPropertySymbols(m);R<_.length;R++)P.indexOf(_[R])<0&&Object.prototype.propertyIsEnumerable.call(m,_[R])&&(b[_[R]]=m[_[R]])}return b}function $(m,P,b,_){var ne,R=arguments.length,E=R<3?P:null===_?_=Object.getOwnPropertyDescriptor(P,b):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)E=Reflect.decorate(m,P,b,_);else for(var me=m.length-1;me>=0;me--)(ne=m[me])&&(E=(R<3?ne(E):R>3?ne(P,b,E):ne(P,b))||E);return R>3&&E&&Object.defineProperty(P,b,E),E}function c(m,P){return function(b,_){P(b,_,m)}}function d(m,P){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(m,P)}function p(m,P,b,_){return new(b||(b=Promise))(function(E,ne){function me(ze){try{se(_.next(ze))}catch(Ge){ne(Ge)}}function Ee(ze){try{se(_.throw(ze))}catch(Ge){ne(Ge)}}function se(ze){ze.done?E(ze.value):function R(E){return E instanceof b?E:new b(function(ne){ne(E)})}(ze.value).then(me,Ee)}se((_=_.apply(m,P||[])).next())})}function z(m,P){var _,R,E,ne,b={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]};return ne={next:me(0),throw:me(1),return:me(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function me(se){return function(ze){return function Ee(se){if(_)throw new TypeError("Generator is already executing.");for(;b;)try{if(_=1,R&&(E=2&se[0]?R.return:se[0]?R.throw||((E=R.return)&&E.call(R),0):R.next)&&!(E=E.call(R,se[1])).done)return E;switch(R=0,E&&(se=[2&se[0],E.value]),se[0]){case 0:case 1:E=se;break;case 4:return b.label++,{value:se[1],done:!1};case 5:b.label++,R=se[1],se=[0];continue;case 7:se=b.ops.pop(),b.trys.pop();continue;default:if(!(E=(E=b.trys).length>0&&E[E.length-1])&&(6===se[0]||2===se[0])){b=0;continue}if(3===se[0]&&(!E||se[1]>E[0]&&se[1]<E[3])){b.label=se[1];break}if(6===se[0]&&b.label<E[1]){b.label=E[1],E=se;break}if(E&&b.label<E[2]){b.label=E[2],b.ops.push(se);break}E[2]&&b.ops.pop(),b.trys.pop();continue}se=P.call(m,b)}catch(ze){se=[6,ze],R=0}finally{_=E=0}if(5&se[0])throw se[1];return{value:se[0]?se[1]:void 0,done:!0}}([se,ze])}}}function S(m,P,b,_){void 0===_&&(_=b),m[_]=P[b]}function V(m,P){for(var b in m)"default"!==b&&!P.hasOwnProperty(b)&&(P[b]=m[b])}function N(m){var P="function"==typeof Symbol&&Symbol.iterator,b=P&&m[P],_=0;if(b)return b.call(m);if(m&&"number"==typeof m.length)return{next:function(){return m&&_>=m.length&&(m=void 0),{value:m&&m[_++],done:!m}}};throw new TypeError(P?"Object is not iterable.":"Symbol.iterator is not defined.")}function U(m,P){var b="function"==typeof Symbol&&m[Symbol.iterator];if(!b)return m;var R,ne,_=b.call(m),E=[];try{for(;(void 0===P||P-- >0)&&!(R=_.next()).done;)E.push(R.value)}catch(me){ne={error:me}}finally{try{R&&!R.done&&(b=_.return)&&b.call(_)}finally{if(ne)throw ne.error}}return E}function H(){for(var m=[],P=0;P<arguments.length;P++)m=m.concat(U(arguments[P]));return m}function Q(){for(var m=0,P=0,b=arguments.length;P<b;P++)m+=arguments[P].length;var _=Array(m),R=0;for(P=0;P<b;P++)for(var E=arguments[P],ne=0,me=E.length;ne<me;ne++,R++)_[R]=E[ne];return _}function Z(m){return this instanceof Z?(this.v=m,this):new Z(m)}function ue(m,P,b){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var R,_=b.apply(m,P||[]),E=[];return R={},ne("next"),ne("throw"),ne("return"),R[Symbol.asyncIterator]=function(){return this},R;function ne(xe){_[xe]&&(R[xe]=function(qe){return new Promise(function(Xe,lt){E.push([xe,qe,Xe,lt])>1||me(xe,qe)})})}function me(xe,qe){try{!function Ee(xe){xe.value instanceof Z?Promise.resolve(xe.value.v).then(se,ze):Ge(E[0][2],xe)}(_[xe](qe))}catch(Xe){Ge(E[0][3],Xe)}}function se(xe){me("next",xe)}function ze(xe){me("throw",xe)}function Ge(xe,qe){xe(qe),E.shift(),E.length&&me(E[0][0],E[0][1])}}function G(m){var P,b;return P={},_("next"),_("throw",function(R){throw R}),_("return"),P[Symbol.iterator]=function(){return this},P;function _(R,E){P[R]=m[R]?function(ne){return(b=!b)?{value:Z(m[R](ne)),done:"return"===R}:E?E(ne):ne}:E}}function X(m){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var b,P=m[Symbol.asyncIterator];return P?P.call(m):(m=N(m),b={},_("next"),_("throw"),_("return"),b[Symbol.asyncIterator]=function(){return this},b);function _(E){b[E]=m[E]&&function(ne){return new Promise(function(me,Ee){!function R(E,ne,me,Ee){Promise.resolve(Ee).then(function(se){E({value:se,done:me})},ne)}(me,Ee,(ne=m[E](ne)).done,ne.value)})}}}function ee(m,P){return Object.defineProperty?Object.defineProperty(m,"raw",{value:P}):m.raw=P,m}function ve(m){if(m&&m.__esModule)return m;var P={};if(null!=m)for(var b in m)Object.hasOwnProperty.call(m,b)&&(P[b]=m[b]);return P.default=m,P}function Oe(m){return m&&m.__esModule?m:{default:m}}function Le(m,P){if(!P.has(m))throw new TypeError("attempted to get private field on non-instance");return P.get(m)}function be(m,P,b){if(!P.has(m))throw new TypeError("attempted to set private field on non-instance");return P.set(m,b),b}},9622:(it,K,u)=>{u.r(K),u.d(K,{__extends:()=>n,__assign:()=>y,__rest:()=>x,__decorate:()=>$,__param:()=>c,__metadata:()=>d,__awaiter:()=>p,__generator:()=>z,__createBinding:()=>S,__exportStar:()=>V,__values:()=>N,__read:()=>U,__spread:()=>H,__spreadArrays:()=>Q,__await:()=>Z,__asyncGenerator:()=>ue,__asyncDelegator:()=>G,__asyncValues:()=>X,__makeTemplateObject:()=>ee,__importStar:()=>ve,__importDefault:()=>Oe,__classPrivateFieldGet:()=>Le,__classPrivateFieldSet:()=>be});var e=function(m,P){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,_){b.__proto__=_}||function(b,_){for(var R in _)_.hasOwnProperty(R)&&(b[R]=_[R])})(m,P)};function n(m,P){function b(){this.constructor=m}e(m,P),m.prototype=null===P?Object.create(P):(b.prototype=P.prototype,new b)}var y=function(){return y=Object.assign||function(P){for(var b,_=1,R=arguments.length;_<R;_++)for(var E in b=arguments[_])Object.prototype.hasOwnProperty.call(b,E)&&(P[E]=b[E]);return P},y.apply(this,arguments)};function x(m,P){var b={};for(var _ in m)Object.prototype.hasOwnProperty.call(m,_)&&P.indexOf(_)<0&&(b[_]=m[_]);if(null!=m&&"function"==typeof Object.getOwnPropertySymbols){var R=0;for(_=Object.getOwnPropertySymbols(m);R<_.length;R++)P.indexOf(_[R])<0&&Object.prototype.propertyIsEnumerable.call(m,_[R])&&(b[_[R]]=m[_[R]])}return b}function $(m,P,b,_){var ne,R=arguments.length,E=R<3?P:null===_?_=Object.getOwnPropertyDescriptor(P,b):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)E=Reflect.decorate(m,P,b,_);else for(var me=m.length-1;me>=0;me--)(ne=m[me])&&(E=(R<3?ne(E):R>3?ne(P,b,E):ne(P,b))||E);return R>3&&E&&Object.defineProperty(P,b,E),E}function c(m,P){return function(b,_){P(b,_,m)}}function d(m,P){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(m,P)}function p(m,P,b,_){return new(b||(b=Promise))(function(E,ne){function me(ze){try{se(_.next(ze))}catch(Ge){ne(Ge)}}function Ee(ze){try{se(_.throw(ze))}catch(Ge){ne(Ge)}}function se(ze){ze.done?E(ze.value):function R(E){return E instanceof b?E:new b(function(ne){ne(E)})}(ze.value).then(me,Ee)}se((_=_.apply(m,P||[])).next())})}function z(m,P){var _,R,E,ne,b={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]};return ne={next:me(0),throw:me(1),return:me(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function me(se){return function(ze){return function Ee(se){if(_)throw new TypeError("Generator is already executing.");for(;b;)try{if(_=1,R&&(E=2&se[0]?R.return:se[0]?R.throw||((E=R.return)&&E.call(R),0):R.next)&&!(E=E.call(R,se[1])).done)return E;switch(R=0,E&&(se=[2&se[0],E.value]),se[0]){case 0:case 1:E=se;break;case 4:return b.label++,{value:se[1],done:!1};case 5:b.label++,R=se[1],se=[0];continue;case 7:se=b.ops.pop(),b.trys.pop();continue;default:if(!(E=(E=b.trys).length>0&&E[E.length-1])&&(6===se[0]||2===se[0])){b=0;continue}if(3===se[0]&&(!E||se[1]>E[0]&&se[1]<E[3])){b.label=se[1];break}if(6===se[0]&&b.label<E[1]){b.label=E[1],E=se;break}if(E&&b.label<E[2]){b.label=E[2],b.ops.push(se);break}E[2]&&b.ops.pop(),b.trys.pop();continue}se=P.call(m,b)}catch(ze){se=[6,ze],R=0}finally{_=E=0}if(5&se[0])throw se[1];return{value:se[0]?se[1]:void 0,done:!0}}([se,ze])}}}function S(m,P,b,_){void 0===_&&(_=b),m[_]=P[b]}function V(m,P){for(var b in m)"default"!==b&&!P.hasOwnProperty(b)&&(P[b]=m[b])}function N(m){var P="function"==typeof Symbol&&Symbol.iterator,b=P&&m[P],_=0;if(b)return b.call(m);if(m&&"number"==typeof m.length)return{next:function(){return m&&_>=m.length&&(m=void 0),{value:m&&m[_++],done:!m}}};throw new TypeError(P?"Object is not iterable.":"Symbol.iterator is not defined.")}function U(m,P){var b="function"==typeof Symbol&&m[Symbol.iterator];if(!b)return m;var R,ne,_=b.call(m),E=[];try{for(;(void 0===P||P-- >0)&&!(R=_.next()).done;)E.push(R.value)}catch(me){ne={error:me}}finally{try{R&&!R.done&&(b=_.return)&&b.call(_)}finally{if(ne)throw ne.error}}return E}function H(){for(var m=[],P=0;P<arguments.length;P++)m=m.concat(U(arguments[P]));return m}function Q(){for(var m=0,P=0,b=arguments.length;P<b;P++)m+=arguments[P].length;var _=Array(m),R=0;for(P=0;P<b;P++)for(var E=arguments[P],ne=0,me=E.length;ne<me;ne++,R++)_[R]=E[ne];return _}function Z(m){return this instanceof Z?(this.v=m,this):new Z(m)}function ue(m,P,b){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var R,_=b.apply(m,P||[]),E=[];return R={},ne("next"),ne("throw"),ne("return"),R[Symbol.asyncIterator]=function(){return this},R;function ne(xe){_[xe]&&(R[xe]=function(qe){return new Promise(function(Xe,lt){E.push([xe,qe,Xe,lt])>1||me(xe,qe)})})}function me(xe,qe){try{!function Ee(xe){xe.value instanceof Z?Promise.resolve(xe.value.v).then(se,ze):Ge(E[0][2],xe)}(_[xe](qe))}catch(Xe){Ge(E[0][3],Xe)}}function se(xe){me("next",xe)}function ze(xe){me("throw",xe)}function Ge(xe,qe){xe(qe),E.shift(),E.length&&me(E[0][0],E[0][1])}}function G(m){var P,b;return P={},_("next"),_("throw",function(R){throw R}),_("return"),P[Symbol.iterator]=function(){return this},P;function _(R,E){P[R]=m[R]?function(ne){return(b=!b)?{value:Z(m[R](ne)),done:"return"===R}:E?E(ne):ne}:E}}function X(m){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var b,P=m[Symbol.asyncIterator];return P?P.call(m):(m=N(m),b={},_("next"),_("throw"),_("return"),b[Symbol.asyncIterator]=function(){return this},b);function _(E){b[E]=m[E]&&function(ne){return new Promise(function(me,Ee){!function R(E,ne,me,Ee){Promise.resolve(Ee).then(function(se){E({value:se,done:me})},ne)}(me,Ee,(ne=m[E](ne)).done,ne.value)})}}}function ee(m,P){return Object.defineProperty?Object.defineProperty(m,"raw",{value:P}):m.raw=P,m}function ve(m){if(m&&m.__esModule)return m;var P={};if(null!=m)for(var b in m)Object.hasOwnProperty.call(m,b)&&(P[b]=m[b]);return P.default=m,P}function Oe(m){return m&&m.__esModule?m:{default:m}}function Le(m,P){if(!P.has(m))throw new TypeError("attempted to get private field on non-instance");return P.get(m)}function be(m,P,b){if(!P.has(m))throw new TypeError("attempted to set private field on non-instance");return P.set(m,b),b}},2220:(it,K,u)=>{u.r(K),u.d(K,{__extends:()=>n,__assign:()=>y,__rest:()=>x,__decorate:()=>$,__param:()=>c,__metadata:()=>d,__awaiter:()=>p,__generator:()=>z,__createBinding:()=>S,__exportStar:()=>V,__values:()=>N,__read:()=>U,__spread:()=>H,__spreadArrays:()=>Q,__await:()=>Z,__asyncGenerator:()=>ue,__asyncDelegator:()=>G,__asyncValues:()=>X,__makeTemplateObject:()=>ee,__importStar:()=>ve,__importDefault:()=>Oe,__classPrivateFieldGet:()=>Le,__classPrivateFieldSet:()=>be});var e=function(m,P){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,_){b.__proto__=_}||function(b,_){for(var R in _)_.hasOwnProperty(R)&&(b[R]=_[R])})(m,P)};function n(m,P){function b(){this.constructor=m}e(m,P),m.prototype=null===P?Object.create(P):(b.prototype=P.prototype,new b)}var y=function(){return y=Object.assign||function(P){for(var b,_=1,R=arguments.length;_<R;_++)for(var E in b=arguments[_])Object.prototype.hasOwnProperty.call(b,E)&&(P[E]=b[E]);return P},y.apply(this,arguments)};function x(m,P){var b={};for(var _ in m)Object.prototype.hasOwnProperty.call(m,_)&&P.indexOf(_)<0&&(b[_]=m[_]);if(null!=m&&"function"==typeof Object.getOwnPropertySymbols){var R=0;for(_=Object.getOwnPropertySymbols(m);R<_.length;R++)P.indexOf(_[R])<0&&Object.prototype.propertyIsEnumerable.call(m,_[R])&&(b[_[R]]=m[_[R]])}return b}function $(m,P,b,_){var ne,R=arguments.length,E=R<3?P:null===_?_=Object.getOwnPropertyDescriptor(P,b):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)E=Reflect.decorate(m,P,b,_);else for(var me=m.length-1;me>=0;me--)(ne=m[me])&&(E=(R<3?ne(E):R>3?ne(P,b,E):ne(P,b))||E);return R>3&&E&&Object.defineProperty(P,b,E),E}function c(m,P){return function(b,_){P(b,_,m)}}function d(m,P){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(m,P)}function p(m,P,b,_){return new(b||(b=Promise))(function(E,ne){function me(ze){try{se(_.next(ze))}catch(Ge){ne(Ge)}}function Ee(ze){try{se(_.throw(ze))}catch(Ge){ne(Ge)}}function se(ze){ze.done?E(ze.value):function R(E){return E instanceof b?E:new b(function(ne){ne(E)})}(ze.value).then(me,Ee)}se((_=_.apply(m,P||[])).next())})}function z(m,P){var _,R,E,ne,b={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]};return ne={next:me(0),throw:me(1),return:me(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function me(se){return function(ze){return function Ee(se){if(_)throw new TypeError("Generator is already executing.");for(;b;)try{if(_=1,R&&(E=2&se[0]?R.return:se[0]?R.throw||((E=R.return)&&E.call(R),0):R.next)&&!(E=E.call(R,se[1])).done)return E;switch(R=0,E&&(se=[2&se[0],E.value]),se[0]){case 0:case 1:E=se;break;case 4:return b.label++,{value:se[1],done:!1};case 5:b.label++,R=se[1],se=[0];continue;case 7:se=b.ops.pop(),b.trys.pop();continue;default:if(!(E=(E=b.trys).length>0&&E[E.length-1])&&(6===se[0]||2===se[0])){b=0;continue}if(3===se[0]&&(!E||se[1]>E[0]&&se[1]<E[3])){b.label=se[1];break}if(6===se[0]&&b.label<E[1]){b.label=E[1],E=se;break}if(E&&b.label<E[2]){b.label=E[2],b.ops.push(se);break}E[2]&&b.ops.pop(),b.trys.pop();continue}se=P.call(m,b)}catch(ze){se=[6,ze],R=0}finally{_=E=0}if(5&se[0])throw se[1];return{value:se[0]?se[1]:void 0,done:!0}}([se,ze])}}}function S(m,P,b,_){void 0===_&&(_=b),m[_]=P[b]}function V(m,P){for(var b in m)"default"!==b&&!P.hasOwnProperty(b)&&(P[b]=m[b])}function N(m){var P="function"==typeof Symbol&&Symbol.iterator,b=P&&m[P],_=0;if(b)return b.call(m);if(m&&"number"==typeof m.length)return{next:function(){return m&&_>=m.length&&(m=void 0),{value:m&&m[_++],done:!m}}};throw new TypeError(P?"Object is not iterable.":"Symbol.iterator is not defined.")}function U(m,P){var b="function"==typeof Symbol&&m[Symbol.iterator];if(!b)return m;var R,ne,_=b.call(m),E=[];try{for(;(void 0===P||P-- >0)&&!(R=_.next()).done;)E.push(R.value)}catch(me){ne={error:me}}finally{try{R&&!R.done&&(b=_.return)&&b.call(_)}finally{if(ne)throw ne.error}}return E}function H(){for(var m=[],P=0;P<arguments.length;P++)m=m.concat(U(arguments[P]));return m}function Q(){for(var m=0,P=0,b=arguments.length;P<b;P++)m+=arguments[P].length;var _=Array(m),R=0;for(P=0;P<b;P++)for(var E=arguments[P],ne=0,me=E.length;ne<me;ne++,R++)_[R]=E[ne];return _}function Z(m){return this instanceof Z?(this.v=m,this):new Z(m)}function ue(m,P,b){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var R,_=b.apply(m,P||[]),E=[];return R={},ne("next"),ne("throw"),ne("return"),R[Symbol.asyncIterator]=function(){return this},R;function ne(xe){_[xe]&&(R[xe]=function(qe){return new Promise(function(Xe,lt){E.push([xe,qe,Xe,lt])>1||me(xe,qe)})})}function me(xe,qe){try{!function Ee(xe){xe.value instanceof Z?Promise.resolve(xe.value.v).then(se,ze):Ge(E[0][2],xe)}(_[xe](qe))}catch(Xe){Ge(E[0][3],Xe)}}function se(xe){me("next",xe)}function ze(xe){me("throw",xe)}function Ge(xe,qe){xe(qe),E.shift(),E.length&&me(E[0][0],E[0][1])}}function G(m){var P,b;return P={},_("next"),_("throw",function(R){throw R}),_("return"),P[Symbol.iterator]=function(){return this},P;function _(R,E){P[R]=m[R]?function(ne){return(b=!b)?{value:Z(m[R](ne)),done:"return"===R}:E?E(ne):ne}:E}}function X(m){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var b,P=m[Symbol.asyncIterator];return P?P.call(m):(m=N(m),b={},_("next"),_("throw"),_("return"),b[Symbol.asyncIterator]=function(){return this},b);function _(E){b[E]=m[E]&&function(ne){return new Promise(function(me,Ee){!function R(E,ne,me,Ee){Promise.resolve(Ee).then(function(se){E({value:se,done:me})},ne)}(me,Ee,(ne=m[E](ne)).done,ne.value)})}}}function ee(m,P){return Object.defineProperty?Object.defineProperty(m,"raw",{value:P}):m.raw=P,m}function ve(m){if(m&&m.__esModule)return m;var P={};if(null!=m)for(var b in m)Object.hasOwnProperty.call(m,b)&&(P[b]=m[b]);return P.default=m,P}function Oe(m){return m&&m.__esModule?m:{default:m}}function Le(m,P){if(!P.has(m))throw new TypeError("attempted to get private field on non-instance");return P.get(m)}function be(m,P,b){if(!P.has(m))throw new TypeError("attempted to set private field on non-instance");return P.set(m,b),b}},6399:()=>{},3743:()=>{},6989:()=>{},4654:()=>{},2361:()=>{},4616:()=>{},7200:(it,K,u)=>{function e(S){for(let V in S){let N=S[V]||"";switch(V){case"display":S.display="flex"===N?["-webkit-flex","flex"]:"inline-flex"===N?["-webkit-inline-flex","inline-flex"]:N;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":S["-webkit-"+V]=N;break;case"flex-direction":N=N||"row",S["-webkit-flex-direction"]=N,S["flex-direction"]=N;break;case"order":S.order=S["-webkit-"+V]=isNaN(+N)?"0":N}}return S}u.d(K,{iQ:()=>y,GK:()=>e,Ar:()=>x,kt:()=>z,tj:()=>c});const n="inline",y=["row","column","row-reverse","column-reverse"];function x(S){let[V,N,U]=$(S);return function p(S,V=null,N=!1){return{display:N?"inline-flex":"flex","box-sizing":"border-box","flex-direction":S,"flex-wrap":V||null}}(V,N,U)}function $(S){S=S?.toLowerCase()??"";let[V,N,U]=S.split(" ");return y.find(H=>H===V)||(V=y[0]),N===n&&(N=U!==n?U:"",U=n),[V,d(N),!!U]}function c(S){let[V]=$(S);return V.indexOf("row")>-1}function d(S){if(S)switch(S.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":S="wrap-reverse";break;case"no":case"none":case"nowrap":S="nowrap";break;default:S="wrap"}return S}function z(S,...V){if(null==S)throw TypeError("Cannot convert undefined or null to object");for(let N of V)if(null!=N)for(let U in N)N.hasOwnProperty(U)&&(S[U]=N[U]);return S}},4658:(it,K,u)=>{u.d(K,{Bs:()=>X,iR:()=>B,IR:()=>U,g5:()=>Z,WU:()=>ue,yB:()=>C,wY:()=>G,QI:()=>ve,RK:()=>Oe,Ot:()=>Lt,FL:()=>Ot});var e=u(7451),n=u(3192),y=u(6317),x=u(3336),$=u(6646),c=u(253),d=u(7200),p=u(116),z=u(9337);const V={provide:e.APP_BOOTSTRAP_LISTENER,useFactory:function S(Ke,rt){return()=>{if((0,n.isPlatformBrowser)(rt)){const Be=Array.from(Ke.querySelectorAll(`[class*=${N}]`)),et=/\bflex-layout-.+?\b/g;Be.forEach(wt=>{wt.classList.contains(`${N}ssr`)&&wt.parentNode?wt.parentNode.removeChild(wt):wt.className.replace(et,"")})}}},deps:[n.DOCUMENT,e.PLATFORM_ID],multi:!0},N="flex-layout-";let U=(()=>{class Ke{}return Ke.\u0275fac=function(Be){return new(Be||Ke)},Ke.\u0275mod=e.\u0275\u0275defineNgModule({type:Ke}),Ke.\u0275inj=e.\u0275\u0275defineInjector({providers:[V]}),Ke})();class H{constructor(rt=!1,Be="all",et="",wt="",Ft=0){this.matches=rt,this.mediaQuery=Be,this.mqAlias=et,this.suffix=wt,this.priority=Ft,this.property=""}clone(){return new H(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}let Q=(()=>{class Ke{constructor(){this.stylesheet=new Map}addStyleToElement(Be,et,wt){const Ft=this.stylesheet.get(Be);Ft?Ft.set(et,wt):this.stylesheet.set(Be,new Map([[et,wt]]))}clearStyles(){this.stylesheet.clear()}getStyleForElement(Be,et){const wt=this.stylesheet.get(Be);let Ft="";if(wt){const dn=wt.get(et);("number"==typeof dn||"string"==typeof dn)&&(Ft=dn+"")}return Ft}}return Ke.\u0275fac=function(Be){return new(Be||Ke)},Ke.\u0275prov=e.\u0275\u0275defineInjectable({token:Ke,factory:Ke.\u0275fac,providedIn:"root"}),Ke})();const Z={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[],multiplier:void 0,defaultUnit:"px",detectLayoutDisplay:!1},ue=new e.InjectionToken("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>Z}),G=new e.InjectionToken("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),X=new e.InjectionToken("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});function ee(Ke,rt){return Ke=Ke?Ke.clone():new H,rt&&(Ke.mqAlias=rt.alias,Ke.mediaQuery=rt.mediaQuery,Ke.suffix=rt.suffix,Ke.priority=rt.priority),Ke}class ve{constructor(){this.shouldCache=!0}sideEffect(rt,Be,et){}}let Oe=(()=>{class Ke{constructor(Be,et,wt,Ft){this._serverStylesheet=Be,this._serverModuleLoaded=et,this._platformId=wt,this.layoutConfig=Ft}applyStyleToElement(Be,et,wt=null){let Ft={};"string"==typeof et&&(Ft[et]=wt,et=Ft),Ft=this.layoutConfig.disableVendorPrefixes?et:(0,d.GK)(et),this._applyMultiValueStyleToElement(Ft,Be)}applyStyleToElements(Be,et=[]){const wt=this.layoutConfig.disableVendorPrefixes?Be:(0,d.GK)(Be);et.forEach(Ft=>{this._applyMultiValueStyleToElement(wt,Ft)})}getFlowDirection(Be){const et="flex-direction";let wt=this.lookupStyle(Be,et);return[wt||"row",this.lookupInlineStyle(Be,et)||(0,n.isPlatformServer)(this._platformId)&&this._serverModuleLoaded?wt:""]}hasWrap(Be){return"wrap"===this.lookupStyle(Be,"flex-wrap")}lookupAttributeValue(Be,et){return Be.getAttribute(et)??""}lookupInlineStyle(Be,et){return(0,n.isPlatformBrowser)(this._platformId)?Be.style.getPropertyValue(et):function Le(Ke,rt){return P(Ke)[rt]??""}(Be,et)}lookupStyle(Be,et,wt=!1){let Ft="";return Be&&((Ft=this.lookupInlineStyle(Be,et))||((0,n.isPlatformBrowser)(this._platformId)?wt||(Ft=getComputedStyle(Be).getPropertyValue(et)):this._serverModuleLoaded&&(Ft=this._serverStylesheet.getStyleForElement(Be,et)))),Ft?Ft.trim():""}_applyMultiValueStyleToElement(Be,et){Object.keys(Be).sort().forEach(wt=>{const Ft=Be[wt],dn=Array.isArray(Ft)?Ft:[Ft];dn.sort();for(let Vt of dn)Vt=Vt?Vt+"":"",(0,n.isPlatformBrowser)(this._platformId)||!this._serverModuleLoaded?(0,n.isPlatformBrowser)(this._platformId)?et.style.setProperty(wt,Vt):be(et,wt,Vt):this._serverStylesheet.addStyleToElement(et,wt,Vt)})}}return Ke.\u0275fac=function(Be){return new(Be||Ke)(e.\u0275\u0275inject(Q),e.\u0275\u0275inject(G),e.\u0275\u0275inject(e.PLATFORM_ID),e.\u0275\u0275inject(ue))},Ke.\u0275prov=e.\u0275\u0275defineInjectable({token:Ke,factory:Ke.\u0275fac,providedIn:"root"}),Ke})();function be(Ke,rt,Be){rt=rt.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();const et=P(Ke);et[rt]=Be??"",function m(Ke,rt){let Be="";for(const et in rt)rt[et]&&(Be+=`${et}:${rt[et]};`);Ke.setAttribute("style",Be)}(Ke,et)}function P(Ke){const rt={},Be=Ke.getAttribute("style");if(Be){const et=Be.split(/;+/g);for(let wt=0;wt<et.length;wt++){const Ft=et[wt].trim();if(Ft.length>0){const dn=Ft.indexOf(":");if(-1===dn)throw new Error(`Invalid CSS style: ${Ft}`);rt[Ft.substr(0,dn).trim()]=Ft.substr(dn+1).trim()}}}return rt}function b(Ke,rt){return(rt&&rt.priority||0)-(Ke&&Ke.priority||0)}function _(Ke,rt){return(Ke.priority||0)-(rt.priority||0)}let R=(()=>{class Ke{constructor(Be,et,wt){this._zone=Be,this._platformId=et,this._document=wt,this.source=new y.X(new H(!0)),this.registry=new Map,this.pendingRemoveListenerFns=[],this._observable$=this.source.asObservable()}get activations(){const Be=[];return this.registry.forEach((et,wt)=>{et.matches&&Be.push(wt)}),Be}isActive(Be){return this.registry.get(Be)?.matches??this.registerQuery(Be).some(wt=>wt.matches)}observe(Be,et=!1){if(Be&&Be.length){const wt=this._observable$.pipe((0,p.h)(dn=>!et||Be.indexOf(dn.mediaQuery)>-1)),Ft=new x.y(dn=>{const Vt=this.registerQuery(Be);if(Vt.length){const ct=Vt.pop();Vt.forEach(kt=>{dn.next(kt)}),this.source.next(ct)}dn.complete()});return(0,$.T)(Ft,wt)}return this._observable$}registerQuery(Be){const et=Array.isArray(Be)?Be:[Be],wt=[];return function ne(Ke,rt){const Be=Ke.filter(et=>!E[et]);if(Be.length>0){const et=Be.join(", ");try{const wt=rt.createElement("style");wt.setAttribute("type","text/css"),wt.styleSheet||wt.appendChild(rt.createTextNode(`\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ${et} {.fx-query-test{ }}\n`)),rt.head.appendChild(wt),Be.forEach(Ft=>E[Ft]=wt)}catch(wt){console.error(wt)}}}(et,this._document),et.forEach(Ft=>{const dn=ct=>{this._zone.run(()=>this.source.next(new H(ct.matches,Ft)))};let Vt=this.registry.get(Ft);Vt||(Vt=this.buildMQL(Ft),Vt.addListener(dn),this.pendingRemoveListenerFns.push(()=>Vt.removeListener(dn)),this.registry.set(Ft,Vt)),Vt.matches&&wt.push(new H(!0,Ft))}),wt}ngOnDestroy(){let Be;for(;Be=this.pendingRemoveListenerFns.pop();)Be()}buildMQL(Be){return function me(Ke,rt){return rt&&window.matchMedia("all").addListener?window.matchMedia(Ke):{matches:"all"===Ke||""===Ke,media:Ke,addListener:()=>{},removeListener:()=>{},onchange:null,addEventListener(){},removeEventListener(){},dispatchEvent:()=>!1}}(Be,(0,n.isPlatformBrowser)(this._platformId))}}return Ke.\u0275fac=function(Be){return new(Be||Ke)(e.\u0275\u0275inject(e.NgZone),e.\u0275\u0275inject(e.PLATFORM_ID),e.\u0275\u0275inject(n.DOCUMENT))},Ke.\u0275prov=e.\u0275\u0275defineInjectable({token:Ke,factory:Ke.\u0275fac,providedIn:"root"}),Ke})();const E={},Ee=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.98px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.98px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.98px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.98px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.98px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.98px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.98px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.98px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.98px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],se="(orientation: portrait) and (max-width: 599.98px)",ze="(orientation: landscape) and (max-width: 959.98px)",Ge="(orientation: portrait) and (min-width: 600px) and (max-width: 839.98px)",xe="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.98px)",qe="(orientation: portrait) and (min-width: 840px)",Xe="(orientation: landscape) and (min-width: 1280px)",lt={HANDSET:`${se}, ${ze}`,TABLET:`${Ge} , ${xe}`,WEB:`${qe}, ${Xe} `,HANDSET_PORTRAIT:`${se}`,TABLET_PORTRAIT:`${Ge} `,WEB_PORTRAIT:`${qe}`,HANDSET_LANDSCAPE:`${ze}`,TABLET_LANDSCAPE:`${xe}`,WEB_LANDSCAPE:`${Xe}`},He=[{alias:"handset",priority:2e3,mediaQuery:lt.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:lt.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:lt.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:lt.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:lt.TABLET_LANDSCAPE},{alias:"tablet.portrait",priority:2100,mediaQuery:lt.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:lt.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:lt.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:lt.WEB_PORTRAIT,overlapping:!0}],Ye=/(\.|-|_)/g;function ht(Ke){let rt=Ke.length>0?Ke.charAt(0):"",Be=Ke.length>1?Ke.slice(1):"";return rt.toUpperCase()+Be}const Fe=new e.InjectionToken("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:()=>{const Ke=(0,e.inject)(X),rt=(0,e.inject)(ue),Be=[].concat.apply([],(Ke||[]).map(wt=>Array.isArray(wt)?wt:[wt]));return function pe(Ke,rt=[]){const Be={};return Ke.forEach(et=>{Be[et.alias]=et}),rt.forEach(et=>{Be[et.alias]?(0,d.kt)(Be[et.alias],et):Be[et.alias]=et}),function he(Ke){return Ke.forEach(rt=>{rt.suffix||(rt.suffix=function Se(Ke){return Ke.replace(Ye,"|").split("|").map(ht).join("")}(rt.alias),rt.overlapping=!!rt.overlapping)}),Ke}(Object.keys(Be).map(et=>Be[et]))}((rt.disableDefaultBps?[]:Ee).concat(rt.addOrientationBps?He:[]),Be)}});let Je=(()=>{class Ke{constructor(Be){this.findByMap=new Map,this.items=[...Be].sort(_)}findByAlias(Be){return Be?this.findWithPredicate(Be,et=>et.alias===Be):null}findByQuery(Be){return this.findWithPredicate(Be,et=>et.mediaQuery===Be)}get overlappings(){return this.items.filter(Be=>Be.overlapping)}get aliases(){return this.items.map(Be=>Be.alias)}get suffixes(){return this.items.map(Be=>Be?.suffix??"")}findWithPredicate(Be,et){let wt=this.findByMap.get(Be);return wt||(wt=this.items.find(et)??null,this.findByMap.set(Be,wt)),wt??null}}return Ke.\u0275fac=function(Be){return new(Be||Ke)(e.\u0275\u0275inject(Fe))},Ke.\u0275prov=e.\u0275\u0275defineInjectable({token:Ke,factory:Ke.\u0275fac,providedIn:"root"}),Ke})();const we="print",De={alias:we,mediaQuery:we,priority:1e3};let ut=(()=>{class Ke{constructor(Be,et,wt){this.breakpoints=Be,this.layoutConfig=et,this._document=wt,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.beforePrintEventListeners=[],this.afterPrintEventListeners=[],this.formerActivations=null,this.isPrinting=!1,this.queue=new le,this.deactivations=[]}withPrintQuery(Be){return[...Be,we]}isPrintEvent(Be){return Be.mediaQuery.startsWith(we)}get printAlias(){return[...this.layoutConfig.printWithBreakpoints??[]]}get printBreakPoints(){return this.printAlias.map(Be=>this.breakpoints.findByAlias(Be)).filter(Be=>null!==Be)}getEventBreakpoints({mediaQuery:Be}){const et=this.breakpoints.findByQuery(Be);return(et?[...this.printBreakPoints,et]:this.printBreakPoints).sort(b)}updateEvent(Be){let et=this.breakpoints.findByQuery(Be.mediaQuery);return this.isPrintEvent(Be)&&(et=this.getEventBreakpoints(Be)[0],Be.mediaQuery=et?.mediaQuery??""),ee(Be,et)}registerBeforeAfterPrintHooks(Be){if(!this._document.defaultView||this.registeredBeforeAfterPrintHooks)return;this.registeredBeforeAfterPrintHooks=!0;const et=()=>{this.isPrinting||(this.isPrintingBeforeAfterEvent=!0,this.startPrinting(Be,this.getEventBreakpoints(new H(!0,we))),Be.updateStyles())},wt=()=>{this.isPrintingBeforeAfterEvent=!1,this.isPrinting&&(this.stopPrinting(Be),Be.updateStyles())};this._document.defaultView.addEventListener("beforeprint",et),this._document.defaultView.addEventListener("afterprint",wt),this.beforePrintEventListeners.push(et),this.afterPrintEventListeners.push(wt)}interceptEvents(Be){return et=>{this.isPrintEvent(et)?et.matches&&!this.isPrinting?(this.startPrinting(Be,this.getEventBreakpoints(et)),Be.updateStyles()):!et.matches&&this.isPrinting&&!this.isPrintingBeforeAfterEvent&&(this.stopPrinting(Be),Be.updateStyles()):this.collectActivations(Be,et)}}blockPropagation(){return Be=>!(this.isPrinting||this.isPrintEvent(Be))}startPrinting(Be,et){this.isPrinting=!0,this.formerActivations=Be.activatedBreakpoints,Be.activatedBreakpoints=this.queue.addPrintBreakpoints(et)}stopPrinting(Be){Be.activatedBreakpoints=this.deactivations,this.deactivations=[],this.formerActivations=null,this.queue.clear(),this.isPrinting=!1}collectActivations(Be,et){if(!this.isPrinting||this.isPrintingBeforeAfterEvent){if(!this.isPrintingBeforeAfterEvent)return void(this.deactivations=[]);if(!et.matches){const wt=this.breakpoints.findByQuery(et.mediaQuery);if(wt){const Ft=this.formerActivations&&this.formerActivations.includes(wt),dn=!this.formerActivations&&Be.activatedBreakpoints.includes(wt);(Ft||dn)&&(this.deactivations.push(wt),this.deactivations.sort(b))}}}}ngOnDestroy(){this._document.defaultView&&(this.beforePrintEventListeners.forEach(Be=>this._document.defaultView.removeEventListener("beforeprint",Be)),this.afterPrintEventListeners.forEach(Be=>this._document.defaultView.removeEventListener("afterprint",Be)))}}return Ke.\u0275fac=function(Be){return new(Be||Ke)(e.\u0275\u0275inject(Je),e.\u0275\u0275inject(ue),e.\u0275\u0275inject(n.DOCUMENT))},Ke.\u0275prov=e.\u0275\u0275defineInjectable({token:Ke,factory:Ke.\u0275fac,providedIn:"root"}),Ke})();class le{constructor(){this.printBreakpoints=[]}addPrintBreakpoints(rt){return rt.push(De),rt.sort(b),rt.forEach(Be=>this.addBreakpoint(Be)),this.printBreakpoints}addBreakpoint(rt){rt&&void 0===this.printBreakpoints.find(et=>et.mediaQuery===rt.mediaQuery)&&(this.printBreakpoints=function D(Ke){return Ke?.mediaQuery.startsWith(we)??!1}(rt)?[rt,...this.printBreakpoints]:[...this.printBreakpoints,rt])}clear(){this.printBreakpoints=[]}}let C=(()=>{class Ke{constructor(Be,et,wt){this.matchMedia=Be,this.breakpoints=et,this.hook=wt,this._useFallbacks=!0,this._activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new c.x,this.observeActivations()}get activatedAlias(){return this.activatedBreakpoints[0]?.alias??""}set activatedBreakpoints(Be){this._activatedBreakpoints=[...Be]}get activatedBreakpoints(){return[...this._activatedBreakpoints]}set useFallbacks(Be){this._useFallbacks=Be}onMediaChange(Be){const et=this.findByQuery(Be.mediaQuery);if(et){Be=ee(Be,et);const wt=this.activatedBreakpoints.indexOf(et);Be.matches&&-1===wt?(this._activatedBreakpoints.push(et),this._activatedBreakpoints.sort(b),this.updateStyles()):!Be.matches&&-1!==wt&&(this._activatedBreakpoints.splice(wt,1),this._activatedBreakpoints.sort(b),this.updateStyles())}}init(Be,et,wt,Ft,dn=[]){g(this.updateMap,Be,et,wt),g(this.clearMap,Be,et,Ft),this.buildElementKeyMap(Be,et),this.watchExtraTriggers(Be,et,dn)}getValue(Be,et,wt){const Ft=this.elementMap.get(Be);if(Ft){const dn=void 0!==wt?Ft.get(wt):this.getActivatedValues(Ft,et);if(dn)return dn.get(et)}}hasValue(Be,et){const wt=this.elementMap.get(Be);if(wt){const Ft=this.getActivatedValues(wt,et);if(Ft)return void 0!==Ft.get(et)||!1}return!1}setValue(Be,et,wt,Ft){let dn=this.elementMap.get(Be);if(dn){const ct=(dn.get(Ft)??new Map).set(et,wt);dn.set(Ft,ct),this.elementMap.set(Be,dn)}else dn=(new Map).set(Ft,(new Map).set(et,wt)),this.elementMap.set(Be,dn);const Vt=this.getValue(Be,et);void 0!==Vt&&this.updateElement(Be,et,Vt)}trackValue(Be,et){return this.subject.asObservable().pipe((0,p.h)(wt=>wt.element===Be&&wt.key===et))}updateStyles(){this.elementMap.forEach((Be,et)=>{const wt=new Set(this.elementKeyMap.get(et));let Ft=this.getActivatedValues(Be);Ft&&Ft.forEach((dn,Vt)=>{this.updateElement(et,Vt,dn),wt.delete(Vt)}),wt.forEach(dn=>{if(Ft=this.getActivatedValues(Be,dn),Ft){const Vt=Ft.get(dn);this.updateElement(et,dn,Vt)}else this.clearElement(et,dn)})})}clearElement(Be,et){const wt=this.clearMap.get(Be);if(wt){const Ft=wt.get(et);Ft&&(Ft(),this.subject.next({element:Be,key:et,value:""}))}}updateElement(Be,et,wt){const Ft=this.updateMap.get(Be);if(Ft){const dn=Ft.get(et);dn&&(dn(wt),this.subject.next({element:Be,key:et,value:wt}))}}releaseElement(Be){const et=this.watcherMap.get(Be);et&&(et.forEach(Ft=>Ft.unsubscribe()),this.watcherMap.delete(Be));const wt=this.elementMap.get(Be);wt&&(wt.forEach((Ft,dn)=>wt.delete(dn)),this.elementMap.delete(Be))}triggerUpdate(Be,et){const wt=this.elementMap.get(Be);if(wt){const Ft=this.getActivatedValues(wt,et);Ft&&(et?this.updateElement(Be,et,Ft.get(et)):Ft.forEach((dn,Vt)=>this.updateElement(Be,Vt,dn)))}}buildElementKeyMap(Be,et){let wt=this.elementKeyMap.get(Be);wt||(wt=new Set,this.elementKeyMap.set(Be,wt)),wt.add(et)}watchExtraTriggers(Be,et,wt){if(wt&&wt.length){let Ft=this.watcherMap.get(Be);if(Ft||(Ft=new Map,this.watcherMap.set(Be,Ft)),!Ft.get(et)){const Vt=(0,$.T)(...wt).subscribe(()=>{const ct=this.getValue(Be,et);this.updateElement(Be,et,ct)});Ft.set(et,Vt)}}}findByQuery(Be){return this.breakpoints.findByQuery(Be)}getActivatedValues(Be,et){for(let Ft=0;Ft<this.activatedBreakpoints.length;Ft++){const Vt=Be.get(this.activatedBreakpoints[Ft].alias);if(Vt&&(void 0===et||Vt.has(et)&&null!=Vt.get(et)))return Vt}if(!this._useFallbacks)return;const wt=Be.get("");return void 0===et||wt&&wt.has(et)?wt:void 0}observeActivations(){const Be=this.breakpoints.items.map(et=>et.mediaQuery);this.hook.registerBeforeAfterPrintHooks(this),this.matchMedia.observe(this.hook.withPrintQuery(Be)).pipe((0,z.b)(this.hook.interceptEvents(this)),(0,p.h)(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}}return Ke.\u0275fac=function(Be){return new(Be||Ke)(e.\u0275\u0275inject(R),e.\u0275\u0275inject(Je),e.\u0275\u0275inject(ut))},Ke.\u0275prov=e.\u0275\u0275defineInjectable({token:Ke,factory:Ke.\u0275fac,providedIn:"root"}),Ke})();function g(Ke,rt,Be,et){if(void 0!==et){const wt=Ke.get(rt)??new Map;wt.set(Be,et),Ke.set(rt,wt)}}let B=(()=>{class Ke{constructor(Be,et,wt,Ft){this.elementRef=Be,this.styleBuilder=et,this.styler=wt,this.marshal=Ft,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new c.x,this.styleCache=new Map}get parentElement(){return this.elementRef.nativeElement.parentElement}get nativeElement(){return this.elementRef.nativeElement}get activatedValue(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)}set activatedValue(Be){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,Be,this.marshal.activatedAlias)}ngOnChanges(Be){Object.keys(Be).forEach(et=>{if(-1!==this.inputs.indexOf(et)){const wt=et.split(".").slice(1).join(".");this.setValue(Be[et].currentValue,wt)}})}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}init(Be=[]){this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),Be)}addStyles(Be,et){const wt=this.styleBuilder,Ft=wt.shouldCache;let dn=this.styleCache.get(Be);(!dn||!Ft)&&(dn=wt.buildStyles(Be,et),Ft&&this.styleCache.set(Be,dn)),this.mru={...dn},this.applyStyleToElement(dn),wt.sideEffect(Be,dn,et)}clearStyles(){Object.keys(this.mru).forEach(Be=>{this.mru[Be]=""}),this.applyStyleToElement(this.mru),this.mru={},this.currentValue=void 0}triggerUpdate(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}getFlexFlowDirection(Be,et=!1){if(Be){const[wt,Ft]=this.styler.getFlowDirection(Be);if(!Ft&&et){const dn=(0,d.Ar)(wt);this.styler.applyStyleToElements(dn,[Be])}return wt.trim()}return"row"}hasWrap(Be){return this.styler.hasWrap(Be)}applyStyleToElement(Be,et,wt=this.nativeElement){this.styler.applyStyleToElement(wt,Be,et)}setValue(Be,et){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,Be,et)}updateWithValue(Be){this.currentValue!==Be&&(this.addStyles(Be),this.currentValue=Be)}}return Ke.\u0275fac=function(Be){return new(Be||Ke)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(ve),e.\u0275\u0275directiveInject(Oe),e.\u0275\u0275directiveInject(C))},Ke.\u0275dir=e.\u0275\u0275defineDirective({type:Ke,features:[e.\u0275\u0275NgOnChangesFeature]}),Ke})();function Lt(Ke,rt="1",Be="1"){let et=[rt,Be,Ke],wt=Ke.indexOf("calc");if(wt>0){et[2]=zt(Ke.substring(wt).trim());let Ft=Ke.substr(0,wt).trim().split(" ");2==Ft.length&&(et[0]=Ft[0],et[1]=Ft[1])}else if(0==wt)et[2]=zt(Ke.trim());else{let Ft=Ke.split(" ");et=3===Ft.length?Ft:[rt,Be,Ke]}return et}function zt(Ke){return Ke.replace(/[\s]/g,"").replace(/[\/\*\+\-]/g," $& ")}function Ot(Ke,rt){if(void 0===rt)return Ke;const Be=et=>{const wt=+et.slice(0,-"x".length);return Ke.endsWith("x")&&!isNaN(wt)?`${wt*rt.value}${rt.unit}`:Ke};return Ke.includes(" ")?Ke.split(" ").map(Be).join(" "):Be(Ke)}},3704:(it,K,u)=>{u.d(K,{oO:()=>Z,Zl:()=>Ee,aT:()=>Ge});var e=u(7451),n=u(4658),y=u(3192),c=(u(8971),u(8951),u(4497));let U=(()=>{class xe extends n.iR{constructor(Xe,lt,He,Ye,ht,Se,he){super(Xe,null,lt,He),this.ngClassInstance=he,this.DIRECTIVE_KEY="ngClass",this.ngClassInstance||(this.ngClassInstance=new y.NgClass(Ye,ht,Xe,Se)),this.init(),this.setValue("","")}set klass(Xe){this.ngClassInstance.klass=Xe,this.setValue(Xe,"")}updateWithValue(Xe){this.ngClassInstance.ngClass=Xe,this.ngClassInstance.ngDoCheck()}ngDoCheck(){this.ngClassInstance.ngDoCheck()}}return xe.\u0275fac=function(Xe){return new(Xe||xe)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(n.RK),e.\u0275\u0275directiveInject(n.yB),e.\u0275\u0275directiveInject(e.IterableDiffers),e.\u0275\u0275directiveInject(e.KeyValueDiffers),e.\u0275\u0275directiveInject(e.Renderer2),e.\u0275\u0275directiveInject(y.NgClass,10))},xe.\u0275dir=e.\u0275\u0275defineDirective({type:xe,inputs:{klass:["class","klass"]},features:[e.\u0275\u0275InheritDefinitionFeature]}),xe})();const H=["ngClass","ngClass.xs","ngClass.sm","ngClass.md","ngClass.lg","ngClass.xl","ngClass.lt-sm","ngClass.lt-md","ngClass.lt-lg","ngClass.lt-xl","ngClass.gt-xs","ngClass.gt-sm","ngClass.gt-md","ngClass.gt-lg"];let Z=(()=>{class xe extends U{constructor(){super(...arguments),this.inputs=H}}return xe.\u0275fac=function(){let qe;return function(lt){return(qe||(qe=e.\u0275\u0275getInheritedFactory(xe)))(lt||xe)}}(),xe.\u0275dir=e.\u0275\u0275defineDirective({type:xe,selectors:[["","ngClass",""],["","ngClass.xs",""],["","ngClass.sm",""],["","ngClass.md",""],["","ngClass.lg",""],["","ngClass.xl",""],["","ngClass.lt-sm",""],["","ngClass.lt-md",""],["","ngClass.lt-lg",""],["","ngClass.lt-xl",""],["","ngClass.gt-xs",""],["","ngClass.gt-sm",""],["","ngClass.gt-md",""],["","ngClass.gt-lg",""]],inputs:{ngClass:"ngClass","ngClass.xs":"ngClass.xs","ngClass.sm":"ngClass.sm","ngClass.md":"ngClass.md","ngClass.lg":"ngClass.lg","ngClass.xl":"ngClass.xl","ngClass.lt-sm":"ngClass.lt-sm","ngClass.lt-md":"ngClass.lt-md","ngClass.lt-lg":"ngClass.lt-lg","ngClass.lt-xl":"ngClass.lt-xl","ngClass.gt-xs":"ngClass.gt-xs","ngClass.gt-sm":"ngClass.gt-sm","ngClass.gt-md":"ngClass.gt-md","ngClass.gt-lg":"ngClass.gt-lg"},features:[e.\u0275\u0275InheritDefinitionFeature]}),xe})();class Le{constructor(qe,Xe,lt=!0){this.key=qe,this.value=Xe,this.key=lt?qe.replace(/['"]/g,"").trim():qe.trim(),this.value=lt?Xe.replace(/['"]/g,"").trim():Xe.trim(),this.value=this.value.replace(/;/,"")}}function be(xe){let qe=typeof xe;return"object"===qe?xe.constructor===Array?"array":xe.constructor===Set?"set":"object":qe}function _(xe){const[qe,...Xe]=xe.split(":");return new Le(qe,Xe.join(":"))}function R(xe,qe){return qe.key&&(xe[qe.key]=qe.value),xe}let E=(()=>{class xe extends n.iR{constructor(Xe,lt,He,Ye,ht,Se,he,pe,Fe){super(Xe,null,lt,He),this.sanitizer=Ye,this.ngStyleInstance=he,this.DIRECTIVE_KEY="ngStyle",this.ngStyleInstance||(this.ngStyleInstance=new y.NgStyle(Xe,ht,Se)),this.init();const Je=this.nativeElement.getAttribute("style")??"";this.fallbackStyles=this.buildStyleMap(Je),this.isServer=pe&&(0,y.isPlatformServer)(Fe)}updateWithValue(Xe){const lt=this.buildStyleMap(Xe);this.ngStyleInstance.ngStyle={...this.fallbackStyles,...lt},this.isServer&&this.applyStyleToElement(lt),this.ngStyleInstance.ngDoCheck()}clearStyles(){this.ngStyleInstance.ngStyle=this.fallbackStyles,this.ngStyleInstance.ngDoCheck()}buildStyleMap(Xe){const lt=He=>this.sanitizer.sanitize(e.SecurityContext.STYLE,He)??"";if(Xe)switch(be(Xe)){case"string":return se(function m(xe,qe=";"){return String(xe).trim().split(qe).map(Xe=>Xe.trim()).filter(Xe=>""!==Xe)}(Xe),lt);case"array":return se(Xe,lt);default:return function b(xe,qe){let Xe=[];return"set"===be(xe)?xe.forEach(lt=>Xe.push(lt)):Object.keys(xe).forEach(lt=>{Xe.push(`${lt}:${xe[lt]}`)}),function P(xe,qe){return xe.map(_).filter(lt=>!!lt).map(lt=>(qe&&(lt.value=qe(lt.value)),lt)).reduce(R,{})}(Xe,qe)}(Xe,lt)}return{}}ngDoCheck(){this.ngStyleInstance.ngDoCheck()}}return xe.\u0275fac=function(Xe){return new(Xe||xe)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(n.RK),e.\u0275\u0275directiveInject(n.yB),e.\u0275\u0275directiveInject(c.H7),e.\u0275\u0275directiveInject(e.KeyValueDiffers),e.\u0275\u0275directiveInject(e.Renderer2),e.\u0275\u0275directiveInject(y.NgStyle,10),e.\u0275\u0275directiveInject(n.wY),e.\u0275\u0275directiveInject(e.PLATFORM_ID))},xe.\u0275dir=e.\u0275\u0275defineDirective({type:xe,features:[e.\u0275\u0275InheritDefinitionFeature]}),xe})();const ne=["ngStyle","ngStyle.xs","ngStyle.sm","ngStyle.md","ngStyle.lg","ngStyle.xl","ngStyle.lt-sm","ngStyle.lt-md","ngStyle.lt-lg","ngStyle.lt-xl","ngStyle.gt-xs","ngStyle.gt-sm","ngStyle.gt-md","ngStyle.gt-lg"];let Ee=(()=>{class xe extends E{constructor(){super(...arguments),this.inputs=ne}}return xe.\u0275fac=function(){let qe;return function(lt){return(qe||(qe=e.\u0275\u0275getInheritedFactory(xe)))(lt||xe)}}(),xe.\u0275dir=e.\u0275\u0275defineDirective({type:xe,selectors:[["","ngStyle",""],["","ngStyle.xs",""],["","ngStyle.sm",""],["","ngStyle.md",""],["","ngStyle.lg",""],["","ngStyle.xl",""],["","ngStyle.lt-sm",""],["","ngStyle.lt-md",""],["","ngStyle.lt-lg",""],["","ngStyle.lt-xl",""],["","ngStyle.gt-xs",""],["","ngStyle.gt-sm",""],["","ngStyle.gt-md",""],["","ngStyle.gt-lg",""]],inputs:{ngStyle:"ngStyle","ngStyle.xs":"ngStyle.xs","ngStyle.sm":"ngStyle.sm","ngStyle.md":"ngStyle.md","ngStyle.lg":"ngStyle.lg","ngStyle.xl":"ngStyle.xl","ngStyle.lt-sm":"ngStyle.lt-sm","ngStyle.lt-md":"ngStyle.lt-md","ngStyle.lt-lg":"ngStyle.lt-lg","ngStyle.lt-xl":"ngStyle.lt-xl","ngStyle.gt-xs":"ngStyle.gt-xs","ngStyle.gt-sm":"ngStyle.gt-sm","ngStyle.gt-md":"ngStyle.gt-md","ngStyle.gt-lg":"ngStyle.gt-lg"},features:[e.\u0275\u0275InheritDefinitionFeature]}),xe})();function se(xe,qe){return xe.map(_).filter(lt=>!!lt).map(lt=>(qe&&(lt.value=qe(lt.value)),lt)).reduce(R,{})}let Ge=(()=>{class xe{}return xe.\u0275fac=function(Xe){return new(Xe||xe)},xe.\u0275mod=e.\u0275\u0275defineNgModule({type:xe}),xe.\u0275inj=e.\u0275\u0275defineInjector({imports:[[n.IR]]}),xe})()},6722:(it,K,u)=>{u.d(K,{yH:()=>me,xw:()=>V,s9:()=>Qe,ae:()=>Vt});var e=u(7451),n=u(2867),y=u(4658),x=u(7200),c=(u(253),u(8951));let d=(()=>{class ct extends y.QI{buildStyles(Pt,{display:Yt}){const Bt=(0,x.Ar)(Pt);return{...Bt,display:"none"===Yt?Yt:Bt.display}}}return ct.\u0275fac=function(){let kt;return function(Yt){return(kt||(kt=e.\u0275\u0275getInheritedFactory(ct)))(Yt||ct)}}(),ct.\u0275prov=e.\u0275\u0275defineInjectable({token:ct,factory:ct.\u0275fac,providedIn:"root"}),ct})();const p=["fxLayout","fxLayout.xs","fxLayout.sm","fxLayout.md","fxLayout.lg","fxLayout.xl","fxLayout.lt-sm","fxLayout.lt-md","fxLayout.lt-lg","fxLayout.lt-xl","fxLayout.gt-xs","fxLayout.gt-sm","fxLayout.gt-md","fxLayout.gt-lg"];let S=(()=>{class ct extends y.iR{constructor(Pt,Yt,Bt,pn,_n){super(Pt,Bt,Yt,pn),this._config=_n,this.DIRECTIVE_KEY="layout",this.init()}updateWithValue(Pt){const Bt=this._config.detectLayoutDisplay?this.styler.lookupStyle(this.nativeElement,"display"):"";this.styleCache=N.get(Bt)??new Map,N.set(Bt,this.styleCache),this.currentValue!==Pt&&(this.addStyles(Pt,{display:Bt}),this.currentValue=Pt)}}return ct.\u0275fac=function(Pt){return new(Pt||ct)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(y.RK),e.\u0275\u0275directiveInject(d),e.\u0275\u0275directiveInject(y.yB),e.\u0275\u0275directiveInject(y.WU))},ct.\u0275dir=e.\u0275\u0275defineDirective({type:ct,features:[e.\u0275\u0275InheritDefinitionFeature]}),ct})(),V=(()=>{class ct extends S{constructor(){super(...arguments),this.inputs=p}}return ct.\u0275fac=function(){let kt;return function(Yt){return(kt||(kt=e.\u0275\u0275getInheritedFactory(ct)))(Yt||ct)}}(),ct.\u0275dir=e.\u0275\u0275defineDirective({type:ct,selectors:[["","fxLayout",""],["","fxLayout.xs",""],["","fxLayout.sm",""],["","fxLayout.md",""],["","fxLayout.lg",""],["","fxLayout.xl",""],["","fxLayout.lt-sm",""],["","fxLayout.lt-md",""],["","fxLayout.lt-lg",""],["","fxLayout.lt-xl",""],["","fxLayout.gt-xs",""],["","fxLayout.gt-sm",""],["","fxLayout.gt-md",""],["","fxLayout.gt-lg",""]],inputs:{fxLayout:"fxLayout","fxLayout.xs":"fxLayout.xs","fxLayout.sm":"fxLayout.sm","fxLayout.md":"fxLayout.md","fxLayout.lg":"fxLayout.lg","fxLayout.xl":"fxLayout.xl","fxLayout.lt-sm":"fxLayout.lt-sm","fxLayout.lt-md":"fxLayout.lt-md","fxLayout.lt-lg":"fxLayout.lt-lg","fxLayout.lt-xl":"fxLayout.lt-xl","fxLayout.gt-xs":"fxLayout.gt-xs","fxLayout.gt-sm":"fxLayout.gt-sm","fxLayout.gt-md":"fxLayout.gt-md","fxLayout.gt-lg":"fxLayout.gt-lg"},features:[e.\u0275\u0275InheritDefinitionFeature]}),ct})();const N=new Map;let _=(()=>{class ct extends y.QI{constructor(Pt){super(),this.layoutConfig=Pt}buildStyles(Pt,Yt){let[Bt,pn,..._n]=Pt.split(" "),Cn=_n.join(" ");const xn=Yt.direction.indexOf("column")>-1?"column":"row",Qn=(0,x.tj)(xn)?"max-width":"max-height",dr=(0,x.tj)(xn)?"min-width":"min-height",ur=String(Cn).indexOf("calc")>-1,Xn=ur||"auto"===Cn,ir=String(Cn).indexOf("%")>-1&&!ur,mr=String(Cn).indexOf("px")>-1||String(Cn).indexOf("rem")>-1||String(Cn).indexOf("em")>-1||String(Cn).indexOf("vw")>-1||String(Cn).indexOf("vh")>-1;let hr=ur||mr;Bt="0"==Bt?0:Bt,pn="0"==pn?0:pn;const Or=!Bt&&!pn;let fr={};const Hr={"max-width":null,"max-height":null,"min-width":null,"min-height":null};switch(Cn||""){case"":const xr=!1!==this.layoutConfig.useColumnBasisZero;Cn="row"===xn?"0%":xr?"0.000000001px":"auto";break;case"initial":case"nogrow":Bt=0,Cn="auto";break;case"grow":Cn="100%";break;case"noshrink":pn=0,Cn="auto";break;case"auto":break;case"none":Bt=0,pn=0,Cn="auto";break;default:!hr&&!ir&&!isNaN(Cn)&&(Cn+="%"),"0%"===Cn&&(hr=!0),"0px"===Cn&&(Cn="0%"),fr=(0,x.kt)(Hr,ur?{"flex-grow":Bt,"flex-shrink":pn,"flex-basis":hr?Cn:"100%"}:{flex:`${Bt} ${pn} ${hr?Cn:"100%"}`})}return fr.flex||fr["flex-grow"]||(fr=(0,x.kt)(Hr,ur?{"flex-grow":Bt,"flex-shrink":pn,"flex-basis":Cn}:{flex:`${Bt} ${pn} ${Cn}`})),"0%"!==Cn&&"0px"!==Cn&&"0.000000001px"!==Cn&&"auto"!==Cn&&(fr[dr]=Or||hr&&Bt?Cn:null,fr[Qn]=Or||!Xn&&pn?Cn:null),fr[dr]||fr[Qn]?Yt.hasWrap&&(fr[ur?"flex-basis":"flex"]=fr[Qn]?ur?fr[Qn]:`${Bt} ${pn} ${fr[Qn]}`:ur?fr[dr]:`${Bt} ${pn} ${fr[dr]}`):fr=(0,x.kt)(Hr,ur?{"flex-grow":Bt,"flex-shrink":pn,"flex-basis":Cn}:{flex:`${Bt} ${pn} ${Cn}`}),(0,x.kt)(fr,{"box-sizing":"border-box"})}}return ct.\u0275fac=function(Pt){return new(Pt||ct)(e.\u0275\u0275inject(y.WU))},ct.\u0275prov=e.\u0275\u0275defineInjectable({token:ct,factory:ct.\u0275fac,providedIn:"root"}),ct})();const R=["fxFlex","fxFlex.xs","fxFlex.sm","fxFlex.md","fxFlex.lg","fxFlex.xl","fxFlex.lt-sm","fxFlex.lt-md","fxFlex.lt-lg","fxFlex.lt-xl","fxFlex.gt-xs","fxFlex.gt-sm","fxFlex.gt-md","fxFlex.gt-lg"];let ne=(()=>{class ct extends y.iR{constructor(Pt,Yt,Bt,pn,_n){super(Pt,pn,Yt,_n),this.layoutConfig=Bt,this.marshal=_n,this.DIRECTIVE_KEY="flex",this.direction=void 0,this.wrap=void 0,this.flexGrow="1",this.flexShrink="1",this.init()}get shrink(){return this.flexShrink}set shrink(Pt){this.flexShrink=Pt||"1",this.triggerReflow()}get grow(){return this.flexGrow}set grow(Pt){this.flexGrow=Pt||"1",this.triggerReflow()}ngOnInit(){this.parentElement&&(this.marshal.trackValue(this.parentElement,"layout").pipe((0,c.R)(this.destroySubject)).subscribe(this.onLayoutChange.bind(this)),this.marshal.trackValue(this.nativeElement,"layout-align").pipe((0,c.R)(this.destroySubject)).subscribe(this.triggerReflow.bind(this)))}onLayoutChange(Pt){const Bt=Pt.value.split(" ");this.direction=Bt[0],this.wrap=void 0!==Bt[1]&&"wrap"===Bt[1],this.triggerUpdate()}updateWithValue(Pt){void 0===this.direction&&(this.direction=this.getFlexFlowDirection(this.parentElement,!1!==this.layoutConfig.addFlexToParent)),void 0===this.wrap&&(this.wrap=this.hasWrap(this.parentElement));const Bt=this.direction,pn=Bt.startsWith("row"),_n=this.wrap;pn&&_n?this.styleCache=ze:pn&&!_n?this.styleCache=Ee:!pn&&_n?this.styleCache=Ge:!pn&&!_n&&(this.styleCache=se);const Cn=String(Pt).replace(";",""),xn=(0,y.Ot)(Cn,this.flexGrow,this.flexShrink);this.addStyles(xn.join(" "),{direction:Bt,hasWrap:_n})}triggerReflow(){const Pt=this.activatedValue;if(void 0!==Pt){const Yt=(0,y.Ot)(Pt+"",this.flexGrow,this.flexShrink);this.marshal.updateElement(this.nativeElement,this.DIRECTIVE_KEY,Yt.join(" "))}}}return ct.\u0275fac=function(Pt){return new(Pt||ct)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(y.RK),e.\u0275\u0275directiveInject(y.WU),e.\u0275\u0275directiveInject(_),e.\u0275\u0275directiveInject(y.yB))},ct.\u0275dir=e.\u0275\u0275defineDirective({type:ct,inputs:{shrink:["fxShrink","shrink"],grow:["fxGrow","grow"]},features:[e.\u0275\u0275InheritDefinitionFeature]}),ct})(),me=(()=>{class ct extends ne{constructor(){super(...arguments),this.inputs=R}}return ct.\u0275fac=function(){let kt;return function(Yt){return(kt||(kt=e.\u0275\u0275getInheritedFactory(ct)))(Yt||ct)}}(),ct.\u0275dir=e.\u0275\u0275defineDirective({type:ct,selectors:[["","fxFlex",""],["","fxFlex.xs",""],["","fxFlex.sm",""],["","fxFlex.md",""],["","fxFlex.lg",""],["","fxFlex.xl",""],["","fxFlex.lt-sm",""],["","fxFlex.lt-md",""],["","fxFlex.lt-lg",""],["","fxFlex.lt-xl",""],["","fxFlex.gt-xs",""],["","fxFlex.gt-sm",""],["","fxFlex.gt-md",""],["","fxFlex.gt-lg",""]],inputs:{fxFlex:"fxFlex","fxFlex.xs":"fxFlex.xs","fxFlex.sm":"fxFlex.sm","fxFlex.md":"fxFlex.md","fxFlex.lg":"fxFlex.lg","fxFlex.xl":"fxFlex.xl","fxFlex.lt-sm":"fxFlex.lt-sm","fxFlex.lt-md":"fxFlex.lt-md","fxFlex.lt-lg":"fxFlex.lt-lg","fxFlex.lt-xl":"fxFlex.lt-xl","fxFlex.gt-xs":"fxFlex.gt-xs","fxFlex.gt-sm":"fxFlex.gt-sm","fxFlex.gt-md":"fxFlex.gt-md","fxFlex.gt-lg":"fxFlex.gt-lg"},features:[e.\u0275\u0275InheritDefinitionFeature]}),ct})();const Ee=new Map,se=new Map,ze=new Map,Ge=new Map,ye={margin:0,width:"100%",height:"100%","min-width":"100%","min-height":"100%"};let Me=(()=>{class ct extends y.QI{buildStyles(Pt){return ye}}return ct.\u0275fac=function(){let kt;return function(Yt){return(kt||(kt=e.\u0275\u0275getInheritedFactory(ct)))(Yt||ct)}}(),ct.\u0275prov=e.\u0275\u0275defineInjectable({token:ct,factory:ct.\u0275fac,providedIn:"root"}),ct})(),Qe=(()=>{class ct extends y.iR{constructor(Pt,Yt,Bt,pn){super(Pt,Bt,Yt,pn),this.styleCache=st,this.addStyles("")}}return ct.\u0275fac=function(Pt){return new(Pt||ct)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(y.RK),e.\u0275\u0275directiveInject(Me),e.\u0275\u0275directiveInject(y.yB))},ct.\u0275dir=e.\u0275\u0275defineDirective({type:ct,selectors:[["","fxFill",""],["","fxFlexFill",""]],features:[e.\u0275\u0275InheritDefinitionFeature]}),ct})();const st=new Map;let Vt=(()=>{class ct{}return ct.\u0275fac=function(Pt){return new(Pt||ct)},ct.\u0275mod=e.\u0275\u0275defineNgModule({type:ct}),ct.\u0275inj=e.\u0275\u0275defineInjector({imports:[[y.IR,n.vT]]}),ct})()},8163:(it,K,u)=>{u.d(K,{o9:()=>kr});var e=u(7451),n=u(4658),y=u(3704),x=u(6722);u(8971);let wr=(()=>{class Rt{}return Rt.\u0275fac=function(an){return new(an||Rt)},Rt.\u0275mod=e.\u0275\u0275defineNgModule({type:Rt}),Rt.\u0275inj=e.\u0275\u0275defineInjector({imports:[[n.IR]]}),Rt})();var Zn=u(3192);let kr=(()=>{class Rt{constructor(an,On){(0,Zn.isPlatformServer)(On)&&!an&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(an,On=[]){return{ngModule:Rt,providers:an.serverLoaded?[{provide:n.WU,useValue:{...n.g5,...an}},{provide:n.Bs,useValue:On,multi:!0},{provide:n.wY,useValue:!0}]:[{provide:n.WU,useValue:{...n.g5,...an}},{provide:n.Bs,useValue:On,multi:!0}]}}}return Rt.\u0275fac=function(an){return new(an||Rt)(e.\u0275\u0275inject(n.wY),e.\u0275\u0275inject(e.PLATFORM_ID))},Rt.\u0275mod=e.\u0275\u0275defineNgModule({type:Rt}),Rt.\u0275inj=e.\u0275\u0275defineInjector({imports:[[x.ae,y.aT,wr],x.ae,y.aT,wr]}),Rt})()},2341:(it,K,u)=>{u.d(K,{jh:()=>Lt,QB:()=>xt,xb:()=>Ge,ov:()=>At,sP:()=>Yt,f0:()=>ct,WD:()=>ye,jn:()=>$r,hR:()=>rt,xc:()=>Ot,TR:()=>He,Qo:()=>Ye});var e=u(7451),n=u(116),y=u(635),x=u(3350),$=u(7580),c=u(3158),d=u(9196),p=u(9295),z=u(9525),S=u(538),V=u(3853),N=u(6152),U=u(3336),H=u(4987);const{isArray:Q}=Array;var ue=u(3945);function G(...oe){return 1===(oe=function Z(oe){return 1===oe.length&&Q(oe[0])?oe[0]:oe}(oe)).length?(0,H.Xf)(oe[0]):new U.y(function X(oe){return O=>{let I=[];for(let ce=0;I&&!O.closed&&ce<oe.length;ce++)I.push((0,H.Xf)(oe[ce]).subscribe((0,ue.x)(O,Te=>{if(I){for(let at=0;at<I.length;at++)at!==ce&&I[at].unsubscribe();I=null}O.next(Te)})))}}(oe))}var ee=u(5474),ve=u(745),Oe=u(6936),Le=u(6646),be=u(9263),_=(()=>{return(oe=_||(_={}))[oe.EntitiesOnly=0]="EntitiesOnly",oe[oe.Both=1]="Both",oe[oe.None=2]="None",_;var oe})();function R(oe){return function(I,ce){const Te={ids:[...ce.ids],entities:{...ce.entities}},at=oe(I,Te);return at===_.Both?Object.assign({},ce,Te):at===_.EntitiesOnly?{...ce,entities:Te.entities}:ce}}function E(oe,O){const I=O(oe);return(0,e.isDevMode)()&&void 0===I&&console.warn("@ngrx/entity: The entity passed to the `selectId` implementation returned undefined.","You should probably provide your own `selectId` implementation.","The entity that was passed:",oe,"The `selectId` implementation:",O.toString()),I}function ne(oe){function O(Nn,Mn){const kn=E(Nn,oe);return kn in Mn.entities?_.None:(Mn.ids.push(kn),Mn.entities[kn]=Nn,_.Both)}function I(Nn,Mn){let kn=!1;for(const jn of Nn)kn=O(jn,Mn)!==_.None||kn;return kn?_.Both:_.None}function Te(Nn,Mn){const kn=E(Nn,oe);return kn in Mn.entities?(Mn.entities[kn]=Nn,_.EntitiesOnly):(Mn.ids.push(kn),Mn.entities[kn]=Nn,_.Both)}function tn(Nn,Mn){const jn=(Nn instanceof Array?Nn:Mn.ids.filter(Gn=>Nn(Mn.entities[Gn]))).filter(Gn=>Gn in Mn.entities).map(Gn=>delete Mn.entities[Gn]).length>0;return jn&&(Mn.ids=Mn.ids.filter(Gn=>Gn in Mn.entities)),jn?_.Both:_.None}function vn(Nn,Mn){return Ht([Nn],Mn)}function Ht(Nn,Mn){const kn={};return(Nn=Nn.filter(Gn=>Gn.id in Mn.entities)).length>0?Nn.filter(nr=>function bn(Nn,Mn,kn){const Gn=Object.assign({},kn.entities[Mn.id],Mn.changes),nr=E(Gn,oe),Sr=nr!==Mn.id;return Sr&&(Nn[Mn.id]=nr,delete kn.entities[Mn.id]),kn.entities[nr]=Gn,Sr}(kn,nr,Mn)).length>0?(Mn.ids=Mn.ids.map(nr=>kn[nr]||nr),_.Both):_.EntitiesOnly:_.None}function Ln(Nn,Mn){const kn=[],jn=[];for(const Sr of Nn){const bt=E(Sr,oe);bt in Mn.entities?jn.push({id:bt,changes:Sr}):kn.push(Sr)}const Gn=Ht(jn,Mn),nr=I(kn,Mn);switch(!0){case nr===_.None&&Gn===_.None:return _.None;case nr===_.Both||Gn===_.Both:return _.Both;default:return _.EntitiesOnly}}return{removeAll:function on(Nn){return Object.assign({},Nn,{ids:[],entities:{}})},addOne:R(O),addMany:R(I),setAll:R(function ce(Nn,Mn){return Mn.ids=[],Mn.entities={},I(Nn,Mn),_.Both}),setOne:R(Te),setMany:R(function at(Nn,Mn){const kn=Nn.map(jn=>Te(jn,Mn));switch(!0){case kn.some(jn=>jn===_.Both):return _.Both;case kn.some(jn=>jn===_.EntitiesOnly):return _.EntitiesOnly;default:return _.None}}),updateOne:R(vn),updateMany:R(Ht),upsertOne:R(function rr(Nn,Mn){return Ln([Nn],Mn)}),upsertMany:R(Ln),removeOne:R(function Tt(Nn,Mn){return tn([Nn],Mn)}),removeMany:R(tn),map:R(function Jn(Nn,Mn){return Ht(Mn.ids.reduce((Gn,nr)=>{const Sr=Nn(Mn.entities[nr]);return Sr!==Mn.entities[nr]&&Gn.push({id:nr,changes:Sr}),Gn},[]).filter(({id:Gn})=>Gn in Mn.entities),Mn)}),mapOne:R(function er({map:Nn,id:Mn},kn){const jn=kn.entities[Mn];return jn?vn({id:Mn,changes:Nn(jn)},kn):_.None})}}function me(oe,O){const{removeOne:I,removeMany:ce,removeAll:Te}=ne(oe);function at(kn,jn){return Tt([kn],jn)}function Tt(kn,jn){const Gn=kn.filter(nr=>!(E(nr,oe)in jn.entities));return 0===Gn.length?_.None:(Mn(Gn,jn),_.Both)}function on(kn,jn){const Gn=E(kn,oe);return Gn in jn.entities?(jn.ids=jn.ids.filter(nr=>nr!==Gn),Mn([kn],jn),_.Both):at(kn,jn)}function vn(kn,jn){return Jn([kn],jn)}function Jn(kn,jn){const Gn=[],nr=kn.filter(Sr=>function Ht(kn,jn,Gn){if(!(jn.id in Gn.entities))return!1;const Sr=Object.assign({},Gn.entities[jn.id],jn.changes),bt=E(Sr,oe);return delete Gn.entities[jn.id],kn.push(Sr),bt!==jn.id}(Gn,Sr,jn)).length>0;if(0===Gn.length)return _.None;{const Sr=jn.ids,bt=[];return jn.ids=jn.ids.filter((_t,Ze)=>_t in jn.entities||(bt.push(Ze),!1)),Mn(Gn,jn),!nr&&bt.every(_t=>jn.ids[_t]===Sr[_t])?_.EntitiesOnly:_.Both}}function Nn(kn,jn){const Gn=[],nr=[];for(const _t of kn){const Ze=E(_t,oe);Ze in jn.entities?nr.push({id:Ze,changes:_t}):Gn.push(_t)}const Sr=Jn(nr,jn),bt=Tt(Gn,jn);switch(!0){case bt===_.None&&Sr===_.None:return _.None;case bt===_.Both||Sr===_.Both:return _.Both;default:return _.EntitiesOnly}}function Mn(kn,jn){kn.sort(O);const Gn=[];let nr=0,Sr=0;for(;nr<kn.length&&Sr<jn.ids.length;){const bt=kn[nr],_t=E(bt,oe),Ze=jn.ids[Sr];O(bt,jn.entities[Ze])<=0?(Gn.push(_t),nr++):(Gn.push(Ze),Sr++)}jn.ids=Gn.concat(nr<kn.length?kn.slice(nr).map(oe):jn.ids.slice(Sr)),kn.forEach((bt,_t)=>{jn.entities[oe(bt)]=bt})}return{removeOne:I,removeMany:ce,removeAll:Te,addOne:R(at),updateOne:R(vn),upsertOne:R(function Ln(kn,jn){return Nn([kn],jn)}),setAll:R(function tn(kn,jn){return jn.entities={},jn.ids=[],Tt(kn,jn),_.Both}),setOne:R(on),setMany:R(function bn(kn,jn){const Gn=kn.map(nr=>on(nr,jn));switch(!0){case Gn.some(nr=>nr===_.Both):return _.Both;case Gn.some(nr=>nr===_.EntitiesOnly):return _.EntitiesOnly;default:return _.None}}),addMany:R(Tt),updateMany:R(Jn),upsertMany:R(Nn),map:R(function er(kn,jn){return Jn(jn.ids.reduce((nr,Sr)=>{const bt=kn(jn.entities[Sr]);return bt!==jn.entities[Sr]&&nr.push({id:Sr,changes:bt}),nr},[]),jn)}),mapOne:R(function rr({map:kn,id:jn},Gn){const nr=Gn.entities[jn];return nr?vn({id:jn,changes:kn(nr)},Gn):_.None})}}var ze=u(3599);let Ge=(()=>{class oe{create(I,ce,Te,at){const Tt="string"==typeof I?{...at||{},entityName:I,entityOp:ce,data:Te}:I;return this.createCore(Tt)}createCore(I){const{entityName:ce,entityOp:Te,tag:at}=I;if(!ce)throw new Error("Missing entity name for new action");if(null==Te)throw new Error("Missing EntityOp for new action");return{type:this.formatActionType(Te,at||ce),payload:I}}createFromAction(I,ce){return this.create({...I.payload,...ce})}formatActionType(I,ce){return`[${ce}] ${I}`}}return oe.\u0275fac=function(I){return new(I||oe)},oe.\u0275prov=e.\u0275\u0275defineInjectable({token:oe,factory:oe.\u0275fac}),oe})();class xe{constructor(O,I){this.entityName=O,this.selectId=I}mustBeEntity(O){const I=this.extractData(O);if(!I)return this.throwError(O,"should have a single entity.");const ce=this.selectId(I);return this.isNotKeyType(ce)&&this.throwError(O,"has a missing or invalid entity key (id)"),I}mustBeEntities(O){const I=this.extractData(O);return Array.isArray(I)?(I.forEach((ce,Te)=>{const at=this.selectId(ce);this.isNotKeyType(at)&&this.throwError(O,`, item ${Te+1}, does not have a valid entity key (id)`)}),I):this.throwError(O,"should be an array of entities")}mustBeKey(O){const I=this.extractData(O);if(!I)throw new Error("should be a single entity key");if(this.isNotKeyType(I))throw new Error("is not a valid key (id)");return I}mustBeKeys(O){const I=this.extractData(O);return Array.isArray(I)?(I.forEach((ce,Te)=>{this.isNotKeyType(ce)&&this.throwError(O,`${this.entityName} ', item ${Te+1}, is not a valid entity key (id)`)}),I):this.throwError(O,"should be an array of entity keys (id)")}mustBeUpdate(O){const I=this.extractData(O);if(!I)return this.throwError(O,"should be a single entity update");const{id:ce,changes:Te}=I,at=this.selectId(Te);return(this.isNotKeyType(ce)||this.isNotKeyType(at))&&this.throwError(O,"has a missing or invalid entity key (id)"),I}mustBeUpdates(O){const I=this.extractData(O);return Array.isArray(I)?(I.forEach((ce,Te)=>{const{id:at,changes:Tt}=ce,tn=this.selectId(Tt);(this.isNotKeyType(at)||this.isNotKeyType(tn))&&this.throwError(O,`, item ${Te+1}, has a missing or invalid entity key (id)`)}),I):this.throwError(O,"should be an array of entity updates")}mustBeUpdateResponse(O){const I=this.extractData(O);if(!I)return this.throwError(O,"should be a single entity update");const{id:ce,changes:Te}=I,at=this.selectId(Te);return(this.isNotKeyType(ce)||this.isNotKeyType(at))&&this.throwError(O,"has a missing or invalid entity key (id)"),I}mustBeUpdateResponses(O){const I=this.extractData(O);return Array.isArray(I)?(I.forEach((ce,Te)=>{const{id:at,changes:Tt}=ce,tn=this.selectId(Tt);(this.isNotKeyType(at)||this.isNotKeyType(tn))&&this.throwError(O,`, item ${Te+1}, has a missing or invalid entity key (id)`)}),I):this.throwError(O,"should be an array of entity updates")}extractData(O){return O.payload&&O.payload.data}isNotKeyType(O){return"string"!=typeof O&&"number"!=typeof O}throwError(O,I){throw new Error(`${this.entityName} EntityAction guard for "${O.type}": payload ${I}`)}}function qe(oe){return null==oe?void 0:oe.id}function Xe(oe){if(null==oe)return[];if(Array.isArray(oe[0])){const[O,...I]=oe;oe=[...O,...I]}return oe}function lt(oe){return oe=oe||qe,function(I){const ce=oe(I);if(null==ce)throw new Error("Primary key may not be null/undefined.");return I&&{id:ce,changes:I}}}function He(...oe){const O=Xe(oe);switch(O.length){case 0:return(0,n.h)(ce=>ce.payload&&null!=ce.payload.entityOp);case 1:const I=O[0];return(0,n.h)(ce=>ce.payload&&I===ce.payload.entityOp);default:return(0,n.h)(ce=>{const Te=ce.payload&&ce.payload.entityOp;return Te&&O.some(at=>at===Te)})}}function Ye(...oe){const O=Xe(oe);switch(O.length){case 0:return(0,n.h)(ce=>ce.payload&&null!=ce.payload.entityName);case 1:const I=O[0];return(0,n.h)(ce=>ce.payload&&I===ce.payload.entityName);default:return(0,n.h)(ce=>{const Te=ce.payload&&ce.payload.entityName;return!!Te&&O.some(at=>at===Te)})}}var ht=(()=>{return(oe=ht||(ht={})).Add="Add",oe.Delete="Delete",oe.Update="Update",oe.Upsert="Upsert",ht;var oe})();function pe(oe){const O=(oe=oe&&oe.changes?oe:{changes:[]}).changes.filter(I=>null!=I&&I.entities&&I.entities.length>0);return{...oe,changes:O}}new class Se{add(O,I){return I=Array.isArray(I)?I:I?[I]:[],{entityName:O,op:ht.Add,entities:I}}delete(O,I){const ce=Array.isArray(I)?I:I?[I]:[];return{entityName:O,op:ht.Delete,entities:ce}}update(O,I){return I=Array.isArray(I)?I:I?[I]:[],{entityName:O,op:ht.Update,entities:I}}upsert(O,I){return I=Array.isArray(I)?I:I?[I]:[],{entityName:O,op:ht.Upsert,entities:I}}};var Fe=(()=>{return(oe=Fe||(Fe={}))[oe.IgnoreChanges=0]="IgnoreChanges",oe[oe.PreserveChanges=1]="PreserveChanges",oe[oe.OverwriteChanges=2]="OverwriteChanges",Fe;var oe})(),Je=(()=>{return(oe=Je||(Je={})).CLEAR_COLLECTIONS="@ngrx/data/entity-cache/clear-collections",oe.LOAD_COLLECTIONS="@ngrx/data/entity-cache/load-collections",oe.MERGE_QUERY_SET="@ngrx/data/entity-cache/merge-query-set",oe.SET_ENTITY_CACHE="@ngrx/data/entity-cache/set-cache",oe.SAVE_ENTITIES="@ngrx/data/entity-cache/save-entities",oe.SAVE_ENTITIES_CANCEL="@ngrx/data/entity-cache/save-entities-cancel",oe.SAVE_ENTITIES_CANCELED="@ngrx/data/entity-cache/save-entities-canceled",oe.SAVE_ENTITIES_ERROR="@ngrx/data/entity-cache/save-entities-error",oe.SAVE_ENTITIES_SUCCESS="@ngrx/data/entity-cache/save-entities-success",Je;var oe})();class we{constructor(O,I){this.type=Je.CLEAR_COLLECTIONS,this.payload={collections:O,tag:I}}}class De{constructor(O,I){this.type=Je.LOAD_COLLECTIONS,this.payload={collections:O,tag:I}}}class ut{constructor(O,I,ce){this.type=Je.MERGE_QUERY_SET,this.payload={querySet:O,mergeStrategy:null===I?Fe.PreserveChanges:I,tag:ce}}}class le{constructor(O,I){this.cache=O,this.type=Je.SET_ENTITY_CACHE,this.payload={cache:O,tag:I}}}class D{constructor(O,I,ce){this.type=Je.SAVE_ENTITIES,ce=ce||{},O&&(O.tag=O.tag||ce.tag),this.payload={changeSet:O,url:I,...ce,tag:O.tag}}}class C{constructor(O,I,ce,Te){this.type=Je.SAVE_ENTITIES_CANCEL,this.payload={correlationId:O,reason:I,entityNames:ce,tag:Te}}}class g{constructor(O,I,ce){this.type=Je.SAVE_ENTITIES_CANCELED,this.payload={correlationId:O,reason:I,tag:ce}}}class B{constructor(O,I){this.type=Je.SAVE_ENTITIES_ERROR,this.payload={error:O,originalAction:I,correlationId:I.payload.correlationId}}}class de{constructor(O,I,ce){this.type=Je.SAVE_ENTITIES_SUCCESS,ce=ce||{},O&&(O.tag=O.tag||ce.tag),this.payload={changeSet:O,url:I,...ce,tag:O.tag}}}var ye=(()=>{return(oe=ye||(ye={})).CANCEL_PERSIST="@ngrx/data/cancel-persist",oe.CANCELED_PERSIST="@ngrx/data/canceled-persist",oe.QUERY_ALL="@ngrx/data/query-all",oe.QUERY_ALL_SUCCESS="@ngrx/data/query-all/success",oe.QUERY_ALL_ERROR="@ngrx/data/query-all/error",oe.QUERY_LOAD="@ngrx/data/query-load",oe.QUERY_LOAD_SUCCESS="@ngrx/data/query-load/success",oe.QUERY_LOAD_ERROR="@ngrx/data/query-load/error",oe.QUERY_MANY="@ngrx/data/query-many",oe.QUERY_MANY_SUCCESS="@ngrx/data/query-many/success",oe.QUERY_MANY_ERROR="@ngrx/data/query-many/error",oe.QUERY_BY_KEY="@ngrx/data/query-by-key",oe.QUERY_BY_KEY_SUCCESS="@ngrx/data/query-by-key/success",oe.QUERY_BY_KEY_ERROR="@ngrx/data/query-by-key/error",oe.SAVE_ADD_MANY="@ngrx/data/save/add-many",oe.SAVE_ADD_MANY_ERROR="@ngrx/data/save/add-many/error",oe.SAVE_ADD_MANY_SUCCESS="@ngrx/data/save/add-many/success",oe.SAVE_ADD_ONE="@ngrx/data/save/add-one",oe.SAVE_ADD_ONE_ERROR="@ngrx/data/save/add-one/error",oe.SAVE_ADD_ONE_SUCCESS="@ngrx/data/save/add-one/success",oe.SAVE_DELETE_MANY="@ngrx/data/save/delete-many",oe.SAVE_DELETE_MANY_SUCCESS="@ngrx/data/save/delete-many/success",oe.SAVE_DELETE_MANY_ERROR="@ngrx/data/save/delete-many/error",oe.SAVE_DELETE_ONE="@ngrx/data/save/delete-one",oe.SAVE_DELETE_ONE_SUCCESS="@ngrx/data/save/delete-one/success",oe.SAVE_DELETE_ONE_ERROR="@ngrx/data/save/delete-one/error",oe.SAVE_UPDATE_MANY="@ngrx/data/save/update-many",oe.SAVE_UPDATE_MANY_SUCCESS="@ngrx/data/save/update-many/success",oe.SAVE_UPDATE_MANY_ERROR="@ngrx/data/save/update-many/error",oe.SAVE_UPDATE_ONE="@ngrx/data/save/update-one",oe.SAVE_UPDATE_ONE_SUCCESS="@ngrx/data/save/update-one/success",oe.SAVE_UPDATE_ONE_ERROR="@ngrx/data/save/update-one/error",oe.SAVE_UPSERT_MANY="@ngrx/data/save/upsert-many",oe.SAVE_UPSERT_MANY_SUCCESS="@ngrx/data/save/upsert-many/success",oe.SAVE_UPSERT_MANY_ERROR="@ngrx/data/save/upsert-many/error",oe.SAVE_UPSERT_ONE="@ngrx/data/save/upsert-one",oe.SAVE_UPSERT_ONE_SUCCESS="@ngrx/data/save/upsert-one/success",oe.SAVE_UPSERT_ONE_ERROR="@ngrx/data/save/upsert-one/error",oe.ADD_ALL="@ngrx/data/add-all",oe.ADD_MANY="@ngrx/data/add-many",oe.ADD_ONE="@ngrx/data/add-one",oe.REMOVE_ALL="@ngrx/data/remove-all",oe.REMOVE_MANY="@ngrx/data/remove-many",oe.REMOVE_ONE="@ngrx/data/remove-one",oe.UPDATE_MANY="@ngrx/data/update-many",oe.UPDATE_ONE="@ngrx/data/update-one",oe.UPSERT_MANY="@ngrx/data/upsert-many",oe.UPSERT_ONE="@ngrx/data/upsert-one",oe.COMMIT_ALL="@ngrx/data/commit-all",oe.COMMIT_MANY="@ngrx/data/commit-many",oe.COMMIT_ONE="@ngrx/data/commit-one",oe.UNDO_ALL="@ngrx/data/undo-all",oe.UNDO_MANY="@ngrx/data/undo-many",oe.UNDO_ONE="@ngrx/data/undo-one",oe.SET_CHANGE_STATE="@ngrx/data/set-change-state",oe.SET_COLLECTION="@ngrx/data/set-collection",oe.SET_FILTER="@ngrx/data/set-filter",oe.SET_LOADED="@ngrx/data/set-loaded",oe.SET_LOADING="@ngrx/data/set-loading",ye;var oe})();const Me="/success",Qe="/error";function Ut(oe){return oe+Me}class qt{constructor(O,I){this.error=O,this.requestData=I,this.message="string"==typeof O?O:function Ue(oe){const{error:O,body:I,message:ce}=oe;let Te=null;return O?Te="string"==typeof O?O:O.message:ce?Te=ce:I&&(Te="string"==typeof I?I:I.error),"string"==typeof Te?Te:Te?JSON.stringify(Te):null}(O)}}class Lt{}class zt{}const $e=new e.InjectionToken("@ngrx/data Plural Names");class Ot{}class rt{}let Be=(()=>{class oe{constructor(I){this.pluralizer=I,this.knownHttpResourceUrls={}}getResourceUrls(I,ce){let Te=this.knownHttpResourceUrls[I];if(!Te){const at=function et(oe){return oe.replace(/^[/\s]+|[/\s]+$/g,"")}(ce);Te={entityResourceUrl:`${at}/${I}/`.toLowerCase(),collectionResourceUrl:`${at}/${this.pluralizer.pluralize(I)}/`.toLowerCase()},this.registerHttpResourceUrls({[I]:Te})}return Te}entityResource(I,ce){return this.getResourceUrls(I,ce).entityResourceUrl}collectionResource(I,ce){return this.getResourceUrls(I,ce).collectionResourceUrl}registerHttpResourceUrls(I){this.knownHttpResourceUrls={...this.knownHttpResourceUrls,...I||{}}}}return oe.\u0275fac=function(I){return new(I||oe)(e.\u0275\u0275inject(Ot))},oe.\u0275prov=e.\u0275\u0275defineInjectable({token:oe,factory:oe.\u0275fac}),oe})();class wt{constructor(O,I,ce,Te){this.http=I,this.httpUrlGenerator=ce,this.getDelay=0,this.saveDelay=0,this.timeout=0,this._name=`${O} DefaultDataService`,this.entityName=O;const{root:at="api",delete404OK:Tt=!0,getDelay:tn=0,saveDelay:on=0,timeout:bn=0}=Te||{};this.delete404OK=Tt,this.entityUrl=ce.entityResource(O,at),this.entitiesUrl=ce.collectionResource(O,at),this.getDelay=tn,this.saveDelay=on,this.timeout=bn}get name(){return this._name}add(O){const I=O||new Error(`No "${this.entityName}" entity to add`);return this.execute("POST",this.entityUrl,I)}delete(O){let I;return null==O&&(I=new Error(`No "${this.entityName}" key to delete`)),this.execute("DELETE",this.entityUrl+O,I).pipe((0,y.U)(ce=>O))}getAll(){return this.execute("GET",this.entitiesUrl)}getById(O){let I;return null==O&&(I=new Error(`No "${this.entityName}" key to get`)),this.execute("GET",this.entityUrl+O,I)}getWithQuery(O){const ce=new N.HttpParams("string"==typeof O?{fromString:O}:{fromObject:O});return this.execute("GET",this.entitiesUrl,void 0,{params:ce})}update(O){const I=O&&O.id,ce=null==I?new Error(`No "${this.entityName}" update data or id`):O.changes;return this.execute("PUT",this.entityUrl+I,ce)}upsert(O){const I=O||new Error(`No "${this.entityName}" entity to upsert`);return this.execute("POST",this.entityUrl,I)}execute(O,I,ce,Te){const at={method:O,url:I,data:ce,options:Te};if(ce instanceof Error)return this.handleError(at)(ce);let Tt;switch(O){case"DELETE":Tt=this.http.delete(I,Te),this.saveDelay&&(Tt=Tt.pipe((0,x.g)(this.saveDelay)));break;case"GET":Tt=this.http.get(I,Te),this.getDelay&&(Tt=Tt.pipe((0,x.g)(this.getDelay)));break;case"POST":Tt=this.http.post(I,ce,Te),this.saveDelay&&(Tt=Tt.pipe((0,x.g)(this.saveDelay)));break;case"PUT":Tt=this.http.put(I,ce,Te),this.saveDelay&&(Tt=Tt.pipe((0,x.g)(this.saveDelay)));break;default:{const tn=new Error("Unimplemented HTTP method, "+O);Tt=(0,ee._)(tn)}}return this.timeout&&(Tt=Tt.pipe((0,$.V)(this.timeout+this.saveDelay))),Tt.pipe((0,c.K)(this.handleError(at)))}handleError(O){return I=>{const ce=this.handleDelete404(I,O);if(ce)return ce;const Te=new qt(I,O);return(0,ee._)(Te)}}handleDelete404(O,I){if(404===O.status&&"DELETE"===I.method&&this.delete404OK)return(0,ve.of)({})}}let Ft=(()=>{class oe{constructor(I,ce,Te){this.http=I,this.httpUrlGenerator=ce,this.config=Te,ce.registerHttpResourceUrls((Te=Te||{}).entityHttpResourceUrls)}create(I){return new wt(I,this.http,this.httpUrlGenerator,this.config)}}return oe.\u0275fac=function(I){return new(I||oe)(e.\u0275\u0275inject(N.HttpClient),e.\u0275\u0275inject(rt),e.\u0275\u0275inject(Lt,8))},oe.\u0275prov=e.\u0275\u0275defineInjectable({token:oe,factory:oe.\u0275fac}),oe})();const Vt=new e.InjectionToken("@ngrx/data Entity Metadata");let ct=(()=>{class oe{constructor(I){this.definitions={},I&&I.forEach(ce=>this.registerMetadataMap(ce))}getDefinition(I,ce=!0){I=I.trim();const Te=this.definitions[I];if(!Te&&ce)throw new Error(`No EntityDefinition for entity type "${I}".`);return Te}registerMetadata(I){if(I){const ce=function dn(oe){let O=oe.entityName;if(!O)throw new Error("Missing required entityName");oe.entityName=O=O.trim();const I=oe.selectId||qe,ce=oe.sortComparer=oe.sortComparer||!1,Te=function Ee(oe={}){const{selectId:O,sortComparer:I}={sortComparer:!1,selectId:Tt=>Tt.id,...oe},ce=function P(){return{getInitialState:function oe(O={}){return Object.assign({ids:[],entities:{}},O)}}}(),Te=function b(){return{getSelectors:function oe(O){const I=Tt=>Tt.ids,ce=Tt=>Tt.entities,Te=(0,be.P1)(I,ce,(Tt,tn)=>Tt.map(on=>tn[on])),at=(0,be.P1)(I,Tt=>Tt.length);return O?{selectIds:(0,be.P1)(O,I),selectEntities:(0,be.P1)(O,ce),selectAll:(0,be.P1)(O,Te),selectTotal:(0,be.P1)(O,at)}:{selectIds:I,selectEntities:ce,selectAll:Te,selectTotal:at}}}}();return{selectId:O,sortComparer:I,...ce,...Te,...I?me(O,I):ne(O)}}({selectId:I,sortComparer:ce}),at=oe.entityDispatcherOptions||{},Tt=Te.getInitialState({entityName:O,filter:"",loaded:!1,loading:!1,changeState:{},...oe.additionalCollectionState||{}});return{entityName:O,entityAdapter:Te,entityDispatcherOptions:at,initialState:Tt,metadata:oe,noChangeTracking:!0===oe.noChangeTracking,selectId:I,sortComparer:ce}}(I);this.registerDefinition(ce)}}registerMetadataMap(I={}){Object.keys(I||{}).forEach(ce=>this.registerMetadata({entityName:ce,...I[ce]}))}registerDefinition(I){this.definitions[I.entityName]=I}registerDefinitions(I){Object.assign(this.definitions,I)}}return oe.\u0275fac=function(I){return new(I||oe)(e.\u0275\u0275inject(Vt,8))},oe.\u0275prov=e.\u0275\u0275defineInjectable({token:oe,factory:oe.\u0275fac}),oe})();const kt=ht.Update;let Pt=(()=>{class oe{constructor(I,ce,Te){this.entityDefinitionService=I,this.http=ce,this.idSelectors={},this.saveDelay=0,this.timeout=0;const{saveDelay:at=0,timeout:Tt=0}=Te||{};this.saveDelay=at,this.timeout=Tt}saveEntities(I,ce){I=this.filterChangeSet(I),I=this.flattenUpdates(I);let Te=this.http.post(ce,I).pipe((0,y.U)(at=>this.restoreUpdates(at)),(0,c.K)(this.handleError({method:"POST",url:ce,data:I})));return this.timeout&&(Te=Te.pipe((0,$.V)(this.timeout))),this.saveDelay&&(Te=Te.pipe((0,x.g)(this.saveDelay))),Te}handleError(I){return ce=>{const Te=new qt(ce,I);return(0,ee._)(Te)}}filterChangeSet(I){return pe(I)}flattenUpdates(I){let ce=I.changes;if(0===ce.length)return I;let Te=!1;return ce=ce.map(at=>at.op===kt&&at.entities.length>0?(Te=!0,{...at,entities:at.entities.map(Tt=>Tt.changes)}):at),Te?{...I,changes:ce}:I}restoreUpdates(I){if(null==I)return I;let ce=I.changes;if(0===ce.length)return I;let Te=!1;return ce=ce.map(at=>{if(at.op===kt){Te=!0;const Tt=this.getIdSelector(at.entityName);return{...at,entities:at.entities.map(tn=>({id:Tt(tn),changes:tn}))}}return at}),Te?{...I,changes:ce}:I}getIdSelector(I){let ce=this.idSelectors[I];return ce||(ce=this.entityDefinitionService.getDefinition(I).selectId,this.idSelectors[I]=ce),ce}}return oe.\u0275fac=function(I){return new(I||oe)(e.\u0275\u0275inject(ct),e.\u0275\u0275inject(N.HttpClient),e.\u0275\u0275inject(Lt,8))},oe.\u0275prov=e.\u0275\u0275defineInjectable({token:oe,factory:oe.\u0275fac}),oe})(),Yt=(()=>{class oe{constructor(I){this.defaultDataServiceFactory=I,this.services={}}getService(I){I=I.trim();let ce=this.services[I];return ce||(ce=this.defaultDataServiceFactory.create(I),this.services[I]=ce),ce}registerService(I,ce){this.services[I.trim()]=ce}registerServices(I){this.services={...this.services,...I}}}return oe.\u0275fac=function(I){return new(I||oe)(e.\u0275\u0275inject(Ft))},oe.\u0275prov=e.\u0275\u0275defineInjectable({token:oe,factory:oe.\u0275fac}),oe})();class Bt{}let pn=(()=>{class oe{constructor(I,ce){this.logger=I,this.entityActionFactory=ce}handleSuccess(I){const ce=Ut(I.payload.entityOp);return Te=>this.entityActionFactory.createFromAction(I,{entityOp:ce,data:Te})}handleError(I){const ce=function st(oe){return oe+Qe}(I.payload.entityOp);return Te=>{const Tt={error:Te instanceof qt?Te:new qt(Te,null),originalAction:I};return this.logger.error(Tt),this.entityActionFactory.createFromAction(I,{entityOp:ce,data:Tt})}}}return oe.\u0275fac=function(I){return new(I||oe)(e.\u0275\u0275inject(zt),e.\u0275\u0275inject(Ge))},oe.\u0275prov=e.\u0275\u0275defineInjectable({token:oe,factory:oe.\u0275fac}),oe})();class _n{constructor(O){this.message=O,this.message=O||"Canceled by user"}}let Cn=(()=>{class oe{constructor(){this.seed=0,this.prefix="CRID"}next(){return this.seed+=1,this.prefix+this.seed}}return oe.\u0275fac=function(I){return new(I||oe)},oe.\u0275prov=e.\u0275\u0275defineInjectable({token:oe,factory:oe.\u0275fac}),oe})(),xn=(()=>{class oe{constructor(){this.optimisticAdd=!1,this.optimisticDelete=!0,this.optimisticUpdate=!1,this.optimisticUpsert=!1,this.optimisticSaveEntities=!1}}return oe.\u0275fac=function(I){return new(I||oe)},oe.\u0275prov=e.\u0275\u0275defineInjectable({token:oe,factory:oe.\u0275fac}),oe})(),Qn=(()=>{class oe{constructor(I,ce,Te,at){this.correlationIdGenerator=I,this.defaultDispatcherOptions=ce,this.store=at,this.reducedActions$=Te.pipe((0,d.d)(1)),this.raSubscription=this.reducedActions$.subscribe()}dispatch(I){return this.store.dispatch(I),I}cancelSaveEntities(I,ce,Te,at){if(!I)throw new Error("Missing correlationId");const Tt=new C(I,ce,Te,at);this.dispatch(Tt)}clearCollections(I,ce){this.dispatch(new we(I,ce))}loadCollections(I,ce){this.dispatch(new De(I,ce))}mergeQuerySet(I,ce,Te){this.dispatch(new ut(I,ce,Te))}setEntityCache(I,ce){this.dispatch(new le(I,ce))}saveEntities(I,ce,Te){const at=Array.isArray(I)?{changes:I}:I,Tt=(Te=Te||{}).correlationId??this.correlationIdGenerator.next(),tn=null==Te.isOptimistic?this.defaultDispatcherOptions.optimisticSaveEntities||!1:!0===Te.isOptimistic,on=Te.tag||"Save Entities";Te={...Te,correlationId:Tt,isOptimistic:tn,tag:on};const bn=new D(at,ce,Te);return this.dispatch(bn),this.getSaveEntitiesResponseData$(Te.correlationId).pipe((0,d.d)(1))}getSaveEntitiesResponseData$(I){return this.reducedActions$.pipe((0,n.h)(ce=>ce.type===Je.SAVE_ENTITIES_SUCCESS||ce.type===Je.SAVE_ENTITIES_ERROR||ce.type===Je.SAVE_ENTITIES_CANCEL),(0,n.h)(ce=>I===ce.payload.correlationId),(0,p.q)(1),(0,z.z)(ce=>ce.type===Je.SAVE_ENTITIES_CANCEL?(0,ee._)(new _n(ce.payload.reason)):ce.type===Je.SAVE_ENTITIES_SUCCESS?(0,ve.of)(ce.payload.changeSet):(0,ee._)(ce.payload)))}}return oe.\u0275fac=function(I){return new(I||oe)(e.\u0275\u0275inject(Cn),e.\u0275\u0275inject(xn),e.\u0275\u0275inject(be.Y$),e.\u0275\u0275inject(be.yh))},oe.\u0275prov=e.\u0275\u0275defineInjectable({token:oe,factory:oe.\u0275fac}),oe})();class dr{constructor(O,I,ce,Te=qe,at,Tt,tn,on){this.entityName=O,this.entityActionFactory=I,this.store=ce,this.selectId=Te,this.defaultDispatcherOptions=at,this.reducedActions$=Tt,this.correlationIdGenerator=on,this.guard=new xe(O,Te),this.toUpdate=lt(Te);const bn=(0,be.P1)(tn,vn=>vn[O]);this.entityCollection$=ce.select(bn)}createEntityAction(O,I,ce){return this.entityActionFactory.create({entityName:this.entityName,entityOp:O,data:I,...ce})}createAndDispatch(O,I,ce){const Te=this.createEntityAction(O,I,ce);return this.dispatch(Te),Te}dispatch(O){return this.store.dispatch(O),O}add(O,I){I=this.setSaveEntityActionOptions(I,this.defaultDispatcherOptions.optimisticAdd);const ce=this.createEntityAction(ye.SAVE_ADD_ONE,O,I);return I.isOptimistic&&this.guard.mustBeEntity(ce),this.dispatch(ce),this.getResponseData$(I.correlationId).pipe((0,S.M)(this.entityCollection$),(0,y.U)(([Te,at])=>at.entities[this.selectId(Te)]),(0,d.d)(1))}cancel(O,I,ce){if(!O)throw new Error("Missing correlationId");this.createAndDispatch(ye.CANCEL_PERSIST,I,{correlationId:O})}delete(O,I){I=this.setSaveEntityActionOptions(I,this.defaultDispatcherOptions.optimisticDelete);const ce=this.getKey(O),Te=this.createEntityAction(ye.SAVE_DELETE_ONE,ce,I);return this.guard.mustBeKey(Te),this.dispatch(Te),this.getResponseData$(I.correlationId).pipe((0,y.U)(()=>ce),(0,d.d)(1))}getAll(O){O=this.setQueryEntityActionOptions(O);const I=this.createEntityAction(ye.QUERY_ALL,null,O);return this.dispatch(I),this.getResponseData$(O.correlationId).pipe((0,S.M)(this.entityCollection$),(0,y.U)(([ce,Te])=>ce.reduce((at,Tt)=>{const tn=Te.entities[this.selectId(Tt)];return tn&&at.push(tn),at},[])),(0,d.d)(1))}getByKey(O,I){I=this.setQueryEntityActionOptions(I);const ce=this.createEntityAction(ye.QUERY_BY_KEY,O,I);return this.dispatch(ce),this.getResponseData$(I.correlationId).pipe((0,S.M)(this.entityCollection$),(0,y.U)(([Te,at])=>at.entities[this.selectId(Te)]),(0,d.d)(1))}getWithQuery(O,I){I=this.setQueryEntityActionOptions(I);const ce=this.createEntityAction(ye.QUERY_MANY,O,I);return this.dispatch(ce),this.getResponseData$(I.correlationId).pipe((0,S.M)(this.entityCollection$),(0,y.U)(([Te,at])=>Te.reduce((Tt,tn)=>{const on=at.entities[this.selectId(tn)];return on&&Tt.push(on),Tt},[])),(0,d.d)(1))}load(O){O=this.setQueryEntityActionOptions(O);const I=this.createEntityAction(ye.QUERY_LOAD,null,O);return this.dispatch(I),this.getResponseData$(O.correlationId).pipe((0,d.d)(1))}update(O,I){const ce=this.toUpdate(O);I=this.setSaveEntityActionOptions(I,this.defaultDispatcherOptions.optimisticUpdate);const Te=this.createEntityAction(ye.SAVE_UPDATE_ONE,ce,I);return I.isOptimistic&&this.guard.mustBeUpdate(Te),this.dispatch(Te),this.getResponseData$(I.correlationId).pipe((0,y.U)(at=>at.changes),(0,S.M)(this.entityCollection$),(0,y.U)(([at,Tt])=>Tt.entities[this.selectId(at)]),(0,d.d)(1))}upsert(O,I){I=this.setSaveEntityActionOptions(I,this.defaultDispatcherOptions.optimisticUpsert);const ce=this.createEntityAction(ye.SAVE_UPSERT_ONE,O,I);return I.isOptimistic&&this.guard.mustBeEntity(ce),this.dispatch(ce),this.getResponseData$(I.correlationId).pipe((0,S.M)(this.entityCollection$),(0,y.U)(([Te,at])=>at.entities[this.selectId(Te)]),(0,d.d)(1))}addAllToCache(O,I){this.createAndDispatch(ye.ADD_ALL,O,I)}addOneToCache(O,I){this.createAndDispatch(ye.ADD_ONE,O,I)}addManyToCache(O,I){this.createAndDispatch(ye.ADD_MANY,O,I)}clearCache(O){this.createAndDispatch(ye.REMOVE_ALL,void 0,O)}removeOneFromCache(O,I){this.createAndDispatch(ye.REMOVE_ONE,this.getKey(O),I)}removeManyFromCache(O,I){if(!O||0===O.length)return;const ce="object"==typeof O[0]?O.map(Te=>this.getKey(Te)):O;this.createAndDispatch(ye.REMOVE_MANY,ce,I)}updateOneInCache(O,I){const ce=this.toUpdate(O);this.createAndDispatch(ye.UPDATE_ONE,ce,I)}updateManyInCache(O,I){if(!O||0===O.length)return;const ce=O.map(Te=>this.toUpdate(Te));this.createAndDispatch(ye.UPDATE_MANY,ce,I)}upsertOneInCache(O,I){this.createAndDispatch(ye.UPSERT_ONE,O,I)}upsertManyInCache(O,I){!O||0===O.length||this.createAndDispatch(ye.UPSERT_MANY,O,I)}setFilter(O){this.createAndDispatch(ye.SET_FILTER,O)}setLoaded(O){this.createAndDispatch(ye.SET_LOADED,!!O)}setLoading(O){this.createAndDispatch(ye.SET_LOADING,!!O)}getKey(O){return"object"==typeof O?this.selectId(O):O}getResponseData$(O){return this.reducedActions$.pipe((0,n.h)(I=>!!I.payload),(0,n.h)(I=>{const{correlationId:ce,entityName:Te,entityOp:at}=I.payload;return Te===this.entityName&&ce===O&&(at.endsWith(Me)||at.endsWith(Qe)||at===ye.CANCEL_PERSIST)}),(0,p.q)(1),(0,z.z)(I=>{const{entityOp:ce}=I.payload;return ce===ye.CANCEL_PERSIST?(0,ee._)(new _n(I.payload.data)):ce.endsWith(Me)?(0,ve.of)(I.payload.data):(0,ee._)(I.payload.data.error)}))}setQueryEntityActionOptions(O){const I=(O=O||{}).correlationId??this.correlationIdGenerator.next();return{...O,correlationId:I}}setSaveEntityActionOptions(O,I){const ce=(O=O||{}).correlationId??this.correlationIdGenerator.next(),Te=null==O.isOptimistic?I||!1:!0===O.isOptimistic;return{...O,correlationId:ce,isOptimistic:Te}}}const ur="entityCache",Xn=new e.InjectionToken("@ngrx/data Entity Cache Name"),ir=new e.InjectionToken("@ngrx/data Entity Cache Meta Reducers"),mr=new e.InjectionToken("@ngrx/data Entity Collection Meta Reducers"),hr=new e.InjectionToken("@ngrx/data Initial Entity Cache State"),Or=new e.InjectionToken("@ngrx/data Entity Cache Selector"),fr={provide:Or,useFactory:Hr,deps:[[new e.Optional,Xn]]};function Hr(oe){return(0,be.ZF)(oe=oe||ur)}let xr=(()=>{class oe{constructor(I,ce,Te,at,Tt,tn){this.entityActionFactory=I,this.store=ce,this.entityDispatcherDefaultOptions=Te,this.entityCacheSelector=Tt,this.correlationIdGenerator=tn,this.reducedActions$=at.pipe((0,d.d)(1)),this.raSubscription=this.reducedActions$.subscribe()}create(I,ce=qe,Te={}){const at={...this.entityDispatcherDefaultOptions,...Te};return new dr(I,this.entityActionFactory,this.store,ce,at,this.reducedActions$,this.entityCacheSelector,this.correlationIdGenerator)}ngOnDestroy(){this.raSubscription.unsubscribe()}}return oe.\u0275fac=function(I){return new(I||oe)(e.\u0275\u0275inject(Ge),e.\u0275\u0275inject(be.yh),e.\u0275\u0275inject(xn),e.\u0275\u0275inject(be.Y$),e.\u0275\u0275inject(Or),e.\u0275\u0275inject(Cn))},oe.\u0275prov=e.\u0275\u0275defineInjectable({token:oe,factory:oe.\u0275fac}),oe})();const Dn=new e.InjectionToken("@ngrx/data Entity Effects Scheduler");let pr=(()=>{class oe{constructor(I,ce,Te,at,Tt){this.actions=I,this.dataService=ce,this.entityActionFactory=Te,this.logger=at,this.scheduler=Tt,this.responseDelay=10,this.saveEntitiesCancel$=(0,ze.GW)(()=>this.actions.pipe((0,ze.l4)(Je.SAVE_ENTITIES_CANCEL),(0,n.h)(tn=>null!=tn.payload.correlationId)),{dispatch:!1}),this.saveEntities$=(0,ze.GW)(()=>this.actions.pipe((0,ze.l4)(Je.SAVE_ENTITIES),(0,z.z)(tn=>this.saveEntities(tn))))}saveEntities(I){const ce=I.payload.error;if(ce)return this.handleSaveEntitiesError$(I)(ce);try{const Te=pe(I.payload.changeSet),{correlationId:at,mergeStrategy:Tt,tag:tn,url:on}=I.payload,bn={correlationId:at,mergeStrategy:Tt,tag:tn};if(0===Te.changes.length)return(0,ve.of)(new de(Te,on,bn));return G(this.saveEntitiesCancel$.pipe((0,n.h)(Jn=>at===Jn.payload.correlationId),(0,y.U)(Jn=>new g(at,Jn.payload.reason,Jn.payload.tag))),this.dataService.saveEntities(Te,on).pipe((0,V.b)(Jn=>this.handleSaveEntitiesSuccess$(I,this.entityActionFactory)(Jn)),(0,c.K)(this.handleSaveEntitiesError$(I))))}catch(Te){return this.handleSaveEntitiesError$(I)(Te)}}handleSaveEntitiesError$(I){return ce=>{const Te=ce instanceof qt?ce:new qt(ce,null);return(0,ve.of)(new B(Te,I)).pipe((0,x.g)(this.responseDelay,this.scheduler||Oe.z))}}handleSaveEntitiesSuccess$(I,ce){const{url:Te,correlationId:at,mergeStrategy:Tt,tag:tn}=I.payload,on={correlationId:at,mergeStrategy:Tt,tag:tn};return bn=>{if(bn)return(0,ve.of)(new de(bn,Te,on));if(bn=I.payload.changeSet,!I.payload.isOptimistic)return(0,ve.of)(new de(bn,Te,on));const vn=bn.changes.reduce((Ht,Jn)=>-1===Ht.indexOf(Jn.entityName)?Ht.concat(Jn.entityName):Ht,[]);return(0,Le.T)(vn.map(Ht=>ce.create(Ht,ye.SET_LOADING,!1)))}}}return oe.\u0275fac=function(I){return new(I||oe)(e.\u0275\u0275inject(ze.eX),e.\u0275\u0275inject(Pt),e.\u0275\u0275inject(Ge),e.\u0275\u0275inject(zt),e.\u0275\u0275inject(Dn,8))},oe.\u0275prov=e.\u0275\u0275defineInjectable({token:oe,factory:oe.\u0275fac}),oe})();const Er=[ye.QUERY_ALL,ye.QUERY_LOAD,ye.QUERY_BY_KEY,ye.QUERY_MANY,ye.SAVE_ADD_ONE,ye.SAVE_DELETE_ONE,ye.SAVE_UPDATE_ONE,ye.SAVE_UPSERT_ONE];let wr=(()=>{class oe{constructor(I,ce,Te,at,Tt){this.actions=I,this.dataService=ce,this.entityActionFactory=Te,this.resultHandler=at,this.scheduler=Tt,this.responseDelay=10,this.cancel$=(0,ze.GW)(()=>this.actions.pipe(He(ye.CANCEL_PERSIST),(0,y.U)(tn=>tn.payload.correlationId),(0,n.h)(tn=>null!=tn)),{dispatch:!1}),this.persist$=(0,ze.GW)(()=>this.actions.pipe(He(Er),(0,z.z)(tn=>this.persist(tn))))}persist(I){if(I.payload.skip)return this.handleSkipSuccess$(I);if(I.payload.error)return this.handleError$(I)(I.payload.error);try{return G(this.cancel$.pipe((0,n.h)(at=>I.payload.correlationId===at),(0,y.U)(at=>this.entityActionFactory.createFromAction(I,{entityOp:ye.CANCELED_PERSIST}))),this.callDataService(I).pipe((0,y.U)(this.resultHandler.handleSuccess(I)),(0,c.K)(this.handleError$(I))))}catch(ce){return this.handleError$(I)(ce)}}callDataService(I){const{entityName:ce,entityOp:Te,data:at}=I.payload,Tt=this.dataService.getService(ce);switch(Te){case ye.QUERY_ALL:case ye.QUERY_LOAD:return Tt.getAll();case ye.QUERY_BY_KEY:return Tt.getById(at);case ye.QUERY_MANY:return Tt.getWithQuery(at);case ye.SAVE_ADD_ONE:return Tt.add(at);case ye.SAVE_DELETE_ONE:return Tt.delete(at);case ye.SAVE_UPDATE_ONE:const{id:tn,changes:on}=at;return Tt.update(at).pipe((0,y.U)(bn=>bn&&Object.keys(bn).length>0?{id:tn,changes:{...on,...bn},changed:!0}:{id:tn,changes:on,changed:!1}));case ye.SAVE_UPSERT_ONE:return Tt.upsert(at).pipe((0,y.U)(bn=>bn&&Object.keys(bn).length>0?bn:at));default:throw new Error(`Persistence action "${Te}" is not implemented.`)}}handleError$(I){return ce=>(0,ve.of)(this.resultHandler.handleError(I)(ce)).pipe((0,x.g)(this.responseDelay,this.scheduler||Oe.z))}handleSkipSuccess$(I){const ce=Ut(I.payload.entityOp),Te=this.entityActionFactory.createFromAction(I,{entityOp:ce});return(0,ve.of)(Te).pipe((0,x.g)(this.responseDelay,this.scheduler||Oe.z))}}return oe.\u0275fac=function(I){return new(I||oe)(e.\u0275\u0275inject(ze.eX),e.\u0275\u0275inject(Yt),e.\u0275\u0275inject(Ge),e.\u0275\u0275inject(Bt),e.\u0275\u0275inject(Dn,8))},oe.\u0275prov=e.\u0275\u0275defineInjectable({token:oe,factory:oe.\u0275fac}),oe})();class Nr{constructor(O,I){this.entityName=O,O=O.trim();const{dispatcher:ce,selectors:Te,selectors$:at}=I.create(O);this.entityName=O,this.dispatcher=ce,this.guard=ce.guard,this.selectId=ce.selectId,this.toUpdate=ce.toUpdate,this.selectors=Te,this.selectors$=at,this.collection$=at.collection$,this.count$=at.count$,this.entities$=at.entities$,this.entityActions$=at.entityActions$,this.entityMap$=at.entityMap$,this.errors$=at.errors$,this.filter$=at.filter$,this.filteredEntities$=at.filteredEntities$,this.keys$=at.keys$,this.loaded$=at.loaded$,this.loading$=at.loading$,this.changeState$=at.changeState$}createEntityAction(O,I,ce){return this.dispatcher.createEntityAction(O,I,ce)}createAndDispatch(O,I,ce){return this.dispatcher.createAndDispatch(O,I,ce)}dispatch(O){return this.dispatcher.dispatch(O)}get store(){return this.dispatcher.store}add(O,I){return this.dispatcher.add(O,I)}cancel(O,I,ce){this.dispatcher.cancel(O,I,ce)}delete(O,I){return this.dispatcher.delete(O,I)}getAll(O){return this.dispatcher.getAll(O)}getByKey(O,I){return this.dispatcher.getByKey(O,I)}getWithQuery(O,I){return this.dispatcher.getWithQuery(O,I)}load(O){return this.dispatcher.load(O)}update(O,I){return this.dispatcher.update(O,I)}upsert(O,I){return this.dispatcher.upsert(O,I)}addAllToCache(O,I){this.dispatcher.addAllToCache(O,I)}addOneToCache(O,I){this.dispatcher.addOneToCache(O,I)}addManyToCache(O,I){this.dispatcher.addManyToCache(O,I)}clearCache(){this.dispatcher.clearCache()}removeOneFromCache(O,I){this.dispatcher.removeOneFromCache(O,I)}removeManyFromCache(O,I){this.dispatcher.removeManyFromCache(O,I)}updateOneInCache(O,I){this.dispatcher.updateOneInCache(O,I)}updateManyInCache(O,I){this.dispatcher.updateManyInCache(O,I)}upsertOneInCache(O,I){this.dispatcher.upsertOneInCache(O,I)}upsertManyInCache(O,I){this.dispatcher.upsertManyInCache(O,I)}setFilter(O){this.dispatcher.setFilter(O)}setLoaded(O){this.dispatcher.setLoaded(!!O)}setLoading(O){this.dispatcher.setLoading(!!O)}}let kr=(()=>{class oe{constructor(I){this.entityDefinitionService=I}create(I){const ce=this.entityDefinitionService&&this.entityDefinitionService.getDefinition(I,!1);return ce&&ce.initialState||function Rt(oe){return{entityName:oe,ids:[],entities:{},filter:void 0,loaded:!1,loading:!1,changeState:{}}}(I)}}return oe.\u0275fac=function(I){return new(I||oe)(e.\u0275\u0275inject(ct,8))},oe.\u0275prov=e.\u0275\u0275defineInjectable({token:oe,factory:oe.\u0275fac}),oe})(),wn=(()=>{class oe{constructor(I,ce){this.entityCollectionCreator=I||new kr,this.selectEntityCache=ce||Hr(ur)}createCollectionSelector(I){return(0,be.P1)(this.selectEntityCache,(Te={})=>Te[I]||this.entityCollectionCreator.create(I))}createCollectionSelectors(I){const ce="string"==typeof I?{entityName:I}:I,Te=Nn=>Nn.ids,at=Nn=>Nn.entities,Tt=(0,be.P1)(Te,at,(Nn,Mn)=>Nn.map(kn=>Mn[kn])),tn=(0,be.P1)(Te,Nn=>Nn.length),on=Nn=>Nn.filter,bn=ce.filterFn,vn=bn?(0,be.P1)(Tt,on,(Nn,Mn)=>bn(Nn,Mn)):Tt,Ln={};return Object.keys(ce.additionalCollectionState||{}).forEach(Nn=>{Ln["select"+Nn[0].toUpperCase()+Nn.slice(1)]=Mn=>Mn[Nn]}),{selectCount:tn,selectEntities:Tt,selectEntityMap:at,selectFilter:on,selectFilteredEntities:vn,selectKeys:Te,selectLoaded:Nn=>Nn.loaded,selectLoading:Nn=>Nn.loading,selectChangeState:Nn=>Nn.changeState,...Ln}}create(I){const ce="string"==typeof I?{entityName:I}:I,Te=ce.entityName,at=this.createCollectionSelector(Te),Tt=this.createCollectionSelectors(ce),tn={};return Object.keys(Tt).forEach(on=>{tn[on]=(0,be.P1)(at,Tt[on])}),{entityName:Te,selectCollection:at,selectEntityCache:this.selectEntityCache,...tn}}}return oe.\u0275fac=function(I){return new(I||oe)(e.\u0275\u0275inject(kr,8),e.\u0275\u0275inject(Or,8))},oe.\u0275prov=e.\u0275\u0275defineInjectable({token:oe,factory:oe.\u0275fac}),oe})(),an=(()=>{class oe{constructor(I,ce,Te){this.store=I,this.actions=ce,this.selectEntityCache=Te,this.entityCache$=this.store.select(this.selectEntityCache),this.entityActionErrors$=ce.pipe((0,n.h)(at=>at.payload&&at.payload.entityOp&&at.payload.entityOp.endsWith(Qe)),(0,d.d)(1))}create(I,ce){const Te={entityName:I};return Object.keys(ce).forEach(at=>{if(at.startsWith("select")){const Tt=at[6].toLowerCase()+at.substr(7)+"$";Te[Tt]=this.store.select(ce[at])}}),Te.entityActions$=this.actions.pipe(Ye(I)),Te.errors$=this.entityActionErrors$.pipe(Ye(I)),Te}}return oe.\u0275fac=function(I){return new(I||oe)(e.\u0275\u0275inject(be.yh),e.\u0275\u0275inject(ze.eX),e.\u0275\u0275inject(Or))},oe.\u0275prov=e.\u0275\u0275defineInjectable({token:oe,factory:oe.\u0275fac}),oe})(),On=(()=>{class oe{constructor(I,ce,Te,at){this.entityDispatcherFactory=I,this.entityDefinitionService=ce,this.entitySelectorsFactory=Te,this.entitySelectors$Factory=at}create(I){I=I.trim();const ce=this.entityDefinitionService.getDefinition(I),Te=this.entityDispatcherFactory.create(I,ce.selectId,ce.entityDispatcherOptions),at=this.entitySelectorsFactory.create(ce.metadata);return{dispatcher:Te,entityName:I,selectors:at,selectors$:this.entitySelectors$Factory.create(I,at)}}}return oe.\u0275fac=function(I){return new(I||oe)(e.\u0275\u0275inject(xr),e.\u0275\u0275inject(ct),e.\u0275\u0275inject(wn),e.\u0275\u0275inject(an))},oe.\u0275prov=e.\u0275\u0275defineInjectable({token:oe,factory:oe.\u0275fac}),oe})(),$n=(()=>{class oe{constructor(I){this.entityCollectionServiceElementsFactory=I}create(I){return new Nr(I,this.entityCollectionServiceElementsFactory)}}return oe.\u0275fac=function(I){return new(I||oe)(e.\u0275\u0275inject(On))},oe.\u0275prov=e.\u0275\u0275defineInjectable({token:oe,factory:oe.\u0275fac}),oe})(),Kn=(()=>{class oe{constructor(I,ce,Te,at){this.entityCollectionServiceFactory=I,this.store=at,this.entityActionErrors$=Te.entityActionErrors$,this.entityCache$=Te.entityCache$,this.reducedActions$=ce.reducedActions$}}return oe.\u0275fac=function(I){return new(I||oe)(e.\u0275\u0275inject($n),e.\u0275\u0275inject(xr),e.\u0275\u0275inject(an),e.\u0275\u0275inject(be.yh))},oe.\u0275prov=e.\u0275\u0275defineInjectable({token:oe,factory:oe.\u0275fac}),oe})(),mi=(()=>{class oe{constructor(I){this.entityServicesElements=I,this.EntityCollectionServices={}}get entityActionErrors$(){return this.entityServicesElements.entityActionErrors$}get entityCache$(){return this.entityServicesElements.entityCache$}get entityCollectionServiceFactory(){return this.entityServicesElements.entityCollectionServiceFactory}get reducedActions$(){return this.entityServicesElements.reducedActions$}get store(){return this.entityServicesElements.store}dispatch(I){this.store.dispatch(I)}createEntityCollectionService(I){return this.entityCollectionServiceFactory.create(I)}getEntityCollectionService(I){let ce=this.EntityCollectionServices[I];return ce||(ce=this.createEntityCollectionService(I),this.EntityCollectionServices[I]=ce),ce}registerEntityCollectionService(I,ce){this.EntityCollectionServices[ce||I.entityName]=I}registerEntityCollectionServices(I){Array.isArray(I)?I.forEach(ce=>this.registerEntityCollectionService(ce)):Object.keys(I||{}).forEach(ce=>{this.registerEntityCollectionService(I[ce],ce)})}}return oe.\u0275fac=function(I){return new(I||oe)(e.\u0275\u0275inject(Kn))},oe.\u0275prov=e.\u0275\u0275defineInjectable({token:oe,factory:oe.\u0275fac}),oe})();class $r{}var T=(()=>{return(oe=T||(T={}))[oe.Unchanged=0]="Unchanged",oe[oe.Added=1]="Added",oe[oe.Deleted=2]="Deleted",oe[oe.Updated=3]="Updated",T;var oe})();class M{constructor(O,I){this.adapter=O,this.selectId=I,this.selectId=I||qe}commitAll(O){return 0===Object.keys(O.changeState).length?O:{...O,changeState:{}}}commitMany(O,I){if(null==O||0===O.length)return I;let ce=!1;const Te=O.reduce((at,Tt)=>{const tn="object"==typeof Tt?this.selectId(Tt):Tt;return at[tn]&&(ce||(at={...at},ce=!0),delete at[tn]),at},I.changeState);return ce?{...I,changeState:Te}:I}commitOne(O,I){return null==O?I:this.commitMany([O],I)}mergeQueryResults(O,I,ce){return this.mergeServerUpserts(O,I,Fe.PreserveChanges,ce)}mergeSaveAdds(O,I,ce){return this.mergeServerUpserts(O,I,Fe.OverwriteChanges,ce)}mergeSaveDeletes(O,I,ce){const Te=O;return I=(ce=ce??Fe.OverwriteChanges)===Fe.IgnoreChanges?I:this.commitMany(Te,I),this.adapter.removeMany(Te,I)}mergeSaveUpdates(O,I,ce,Te=!1){if(null==O||0===O.length)return I;let tn,at=!1,Tt=I.changeState;switch(ce=ce??Fe.OverwriteChanges){case Fe.IgnoreChanges:return tn=on(O),this.adapter.updateMany(tn,I);case Fe.OverwriteChanges:return Tt=O.reduce((bn,vn)=>{const Ht=vn.id;return bn[Ht]&&(at||(bn={...bn},at=!0),delete bn[Ht]),bn},I.changeState),I=at?{...I,changeState:Tt}:I,tn=on(O),this.adapter.updateMany(tn,I);case Fe.PreserveChanges:{const bn=[];return Tt=O.reduce((vn,Ht)=>{const Jn=Ht.id,er=vn[Jn];if(er){at||(vn={...vn},at=!0);const rr=this.selectId(Ht.changes),Ln=er;rr!==Jn&&delete vn[Jn];const Nn={...Ln.originalValue,...Ht.changes};vn[rr]={...Ln,originalValue:Nn}}else bn.push(Ht);return vn},I.changeState),I=at?{...I,changeState:Tt}:I,tn=on(bn),this.adapter.updateMany(tn,I)}}function on(bn){return!0===Te&&(bn=bn.filter(vn=>!0===vn.changed)),bn.map(vn=>({id:vn.id,changes:vn.changes}))}}mergeSaveUpserts(O,I,ce){return this.mergeServerUpserts(O,I,Fe.OverwriteChanges,ce)}mergeServerUpserts(O,I,ce,Te){if(null==O||0===O.length)return I;let at=!1,Tt=I.changeState;switch(Te=Te??ce){case Fe.IgnoreChanges:return this.adapter.upsertMany(O,I);case Fe.OverwriteChanges:return I=this.adapter.upsertMany(O,I),Tt=O.reduce((tn,on)=>{const bn=this.selectId(on);return tn[bn]&&(at||(tn={...tn},at=!0),delete tn[bn]),tn},I.changeState),at?{...I,changeState:Tt}:I;case Fe.PreserveChanges:{const tn=[];return Tt=O.reduce((on,bn)=>{const vn=this.selectId(bn);return on[vn]?at||(on={...on,[vn]:{...on[vn],originalValue:bn}},at=!0):tn.push(bn),on},I.changeState),I=this.adapter.upsertMany(tn,I),at?{...I,changeState:Tt}:I}}}trackAddMany(O,I,ce){if(ce===Fe.IgnoreChanges||null==O||0===O.length)return I;let Te=!1;const at=O.reduce((Tt,tn)=>{const on=this.selectId(tn);if(null==on||""===on)throw new Error(`${I.entityName} entity add requires a key to be tracked`);return Tt[on]||(Te||(Te=!0,Tt={...Tt}),Tt[on]={changeType:T.Added}),Tt},I.changeState);return Te?{...I,changeState:at}:I}trackAddOne(O,I,ce){return null==O?I:this.trackAddMany([O],I,ce)}trackDeleteMany(O,I,ce){if(ce===Fe.IgnoreChanges||null==O||0===O.length)return I;let Te=!1;const at=I.entities,Tt=O.reduce((tn,on)=>{const bn=at[on];if(bn){const Ht=tn[on];Ht?Ht.changeType===T.Added?(vn(),delete tn[on]):Ht.changeType===T.Updated&&(vn(),tn[on]={...tn[on],changeType:T.Deleted}):(vn(),tn[on]={changeType:T.Deleted,originalValue:bn})}return tn;function vn(){Te||(Te=!0,tn={...tn})}},I.changeState);return Te?{...I,changeState:Tt}:I}trackDeleteOne(O,I,ce){return null==O?I:this.trackDeleteMany([O],I,ce)}trackUpdateMany(O,I,ce){if(ce===Fe.IgnoreChanges||null==O||0===O.length)return I;let Te=!1;const at=I.entities,Tt=O.reduce((tn,on)=>{const{id:bn}=on;if(null==bn||""===bn)throw new Error(`${I.entityName} entity update requires a key to be tracked`);const Ht=at[bn];return Ht&&(tn[bn]||(Te||(Te=!0,tn={...tn}),tn[bn]={changeType:T.Updated,originalValue:Ht})),tn},I.changeState);return Te?{...I,changeState:Tt}:I}trackUpdateOne(O,I,ce){return null==O?I:this.trackUpdateMany([O],I,ce)}trackUpsertMany(O,I,ce){if(ce===Fe.IgnoreChanges||null==O||0===O.length)return I;let Te=!1;const at=I.entities,Tt=O.reduce((tn,on)=>{const bn=this.selectId(on);if(null==bn||""===bn)throw new Error(`${I.entityName} entity upsert requires a key to be tracked`);if(!tn[bn]){Te||(Te=!0,tn={...tn});const Ht=at[bn];tn[bn]=null==Ht?{changeType:T.Added}:{changeType:T.Updated,originalValue:Ht}}return tn},I.changeState);return Te?{...I,changeState:Tt}:I}trackUpsertOne(O,I,ce){return null==O?I:this.trackUpsertMany([O],I,ce)}undoAll(O){const I=Object.keys(O.changeState),{remove:ce,upsert:Te}=I.reduce((at,Tt)=>{const tn=at.chgState[Tt];switch(tn.changeType){case T.Added:at.remove.push(Tt);break;case T.Deleted:const on=tn.originalValue;on&&at.upsert.push(on);break;case T.Updated:at.upsert.push(tn.originalValue)}return at},{remove:[],upsert:[],chgState:O.changeState});return O=this.adapter.removeMany(ce,O),O=this.adapter.upsertMany(Te,O),{...O,changeState:{}}}undoMany(O,I){if(null==O||0===O.length)return I;let ce=!1;const{changeState:Te,remove:at,upsert:Tt}=O.reduce((tn,on)=>{let bn=tn.changeState;const vn="object"==typeof on?this.selectId(on):on,Ht=bn[vn];if(Ht)switch(ce||(bn={...bn},ce=!0),delete bn[vn],tn.changeState=bn,Ht.changeType){case T.Added:tn.remove.push(vn);break;case T.Deleted:const Jn=Ht.originalValue;Jn&&tn.upsert.push(Jn);break;case T.Updated:tn.upsert.push(Ht.originalValue)}return tn},{remove:[],upsert:[],changeState:I.changeState});return I=this.adapter.removeMany(at,I),I=this.adapter.upsertMany(Tt,I),ce?{...I,changeState:Te}:I}undoOne(O,I){return null==O?I:this.undoMany([O],I)}}class Y{constructor(O,I,ce){this.entityName=O,this.definition=I,this.methods={[ye.CANCEL_PERSIST]:this.cancelPersist.bind(this),[ye.QUERY_ALL]:this.queryAll.bind(this),[ye.QUERY_ALL_ERROR]:this.queryAllError.bind(this),[ye.QUERY_ALL_SUCCESS]:this.queryAllSuccess.bind(this),[ye.QUERY_BY_KEY]:this.queryByKey.bind(this),[ye.QUERY_BY_KEY_ERROR]:this.queryByKeyError.bind(this),[ye.QUERY_BY_KEY_SUCCESS]:this.queryByKeySuccess.bind(this),[ye.QUERY_LOAD]:this.queryLoad.bind(this),[ye.QUERY_LOAD_ERROR]:this.queryLoadError.bind(this),[ye.QUERY_LOAD_SUCCESS]:this.queryLoadSuccess.bind(this),[ye.QUERY_MANY]:this.queryMany.bind(this),[ye.QUERY_MANY_ERROR]:this.queryManyError.bind(this),[ye.QUERY_MANY_SUCCESS]:this.queryManySuccess.bind(this),[ye.SAVE_ADD_MANY]:this.saveAddMany.bind(this),[ye.SAVE_ADD_MANY_ERROR]:this.saveAddManyError.bind(this),[ye.SAVE_ADD_MANY_SUCCESS]:this.saveAddManySuccess.bind(this),[ye.SAVE_ADD_ONE]:this.saveAddOne.bind(this),[ye.SAVE_ADD_ONE_ERROR]:this.saveAddOneError.bind(this),[ye.SAVE_ADD_ONE_SUCCESS]:this.saveAddOneSuccess.bind(this),[ye.SAVE_DELETE_MANY]:this.saveDeleteMany.bind(this),[ye.SAVE_DELETE_MANY_ERROR]:this.saveDeleteManyError.bind(this),[ye.SAVE_DELETE_MANY_SUCCESS]:this.saveDeleteManySuccess.bind(this),[ye.SAVE_DELETE_ONE]:this.saveDeleteOne.bind(this),[ye.SAVE_DELETE_ONE_ERROR]:this.saveDeleteOneError.bind(this),[ye.SAVE_DELETE_ONE_SUCCESS]:this.saveDeleteOneSuccess.bind(this),[ye.SAVE_UPDATE_MANY]:this.saveUpdateMany.bind(this),[ye.SAVE_UPDATE_MANY_ERROR]:this.saveUpdateManyError.bind(this),[ye.SAVE_UPDATE_MANY_SUCCESS]:this.saveUpdateManySuccess.bind(this),[ye.SAVE_UPDATE_ONE]:this.saveUpdateOne.bind(this),[ye.SAVE_UPDATE_ONE_ERROR]:this.saveUpdateOneError.bind(this),[ye.SAVE_UPDATE_ONE_SUCCESS]:this.saveUpdateOneSuccess.bind(this),[ye.SAVE_UPSERT_MANY]:this.saveUpsertMany.bind(this),[ye.SAVE_UPSERT_MANY_ERROR]:this.saveUpsertManyError.bind(this),[ye.SAVE_UPSERT_MANY_SUCCESS]:this.saveUpsertManySuccess.bind(this),[ye.SAVE_UPSERT_ONE]:this.saveUpsertOne.bind(this),[ye.SAVE_UPSERT_ONE_ERROR]:this.saveUpsertOneError.bind(this),[ye.SAVE_UPSERT_ONE_SUCCESS]:this.saveUpsertOneSuccess.bind(this),[ye.ADD_ALL]:this.addAll.bind(this),[ye.ADD_MANY]:this.addMany.bind(this),[ye.ADD_ONE]:this.addOne.bind(this),[ye.REMOVE_ALL]:this.removeAll.bind(this),[ye.REMOVE_MANY]:this.removeMany.bind(this),[ye.REMOVE_ONE]:this.removeOne.bind(this),[ye.UPDATE_MANY]:this.updateMany.bind(this),[ye.UPDATE_ONE]:this.updateOne.bind(this),[ye.UPSERT_MANY]:this.upsertMany.bind(this),[ye.UPSERT_ONE]:this.upsertOne.bind(this),[ye.COMMIT_ALL]:this.commitAll.bind(this),[ye.COMMIT_MANY]:this.commitMany.bind(this),[ye.COMMIT_ONE]:this.commitOne.bind(this),[ye.UNDO_ALL]:this.undoAll.bind(this),[ye.UNDO_MANY]:this.undoMany.bind(this),[ye.UNDO_ONE]:this.undoOne.bind(this),[ye.SET_CHANGE_STATE]:this.setChangeState.bind(this),[ye.SET_COLLECTION]:this.setCollection.bind(this),[ye.SET_FILTER]:this.setFilter.bind(this),[ye.SET_LOADED]:this.setLoaded.bind(this),[ye.SET_LOADING]:this.setLoading.bind(this)},this.adapter=I.entityAdapter,this.isChangeTracking=!0!==I.noChangeTracking,this.selectId=I.selectId,this.guard=new xe(O,this.selectId),this.toUpdate=lt(this.selectId),this.entityChangeTracker=ce||new M(this.adapter,this.selectId)}cancelPersist(O){return this.setLoadingFalse(O)}queryAll(O){return this.setLoadingTrue(O)}queryAllError(O,I){return this.setLoadingFalse(O)}queryAllSuccess(O,I){const ce=this.extractData(I),Te=this.extractMergeStrategy(I);return{...this.entityChangeTracker.mergeQueryResults(ce,O,Te),loaded:!0,loading:!1}}queryByKey(O,I){return this.setLoadingTrue(O)}queryByKeyError(O,I){return this.setLoadingFalse(O)}queryByKeySuccess(O,I){const ce=this.extractData(I),Te=this.extractMergeStrategy(I);return O=null==ce?O:this.entityChangeTracker.mergeQueryResults([ce],O,Te),this.setLoadingFalse(O)}queryLoad(O){return this.setLoadingTrue(O)}queryLoadError(O,I){return this.setLoadingFalse(O)}queryLoadSuccess(O,I){const ce=this.extractData(I);return{...this.adapter.setAll(ce,O),loading:!1,loaded:!0,changeState:{}}}queryMany(O,I){return this.setLoadingTrue(O)}queryManyError(O,I){return this.setLoadingFalse(O)}queryManySuccess(O,I){const ce=this.extractData(I),Te=this.extractMergeStrategy(I);return{...this.entityChangeTracker.mergeQueryResults(ce,O,Te),loaded:!0,loading:!1}}saveAddMany(O,I){if(this.isOptimistic(I)){const ce=this.guard.mustBeEntities(I),Te=this.extractMergeStrategy(I);O=this.entityChangeTracker.trackAddMany(ce,O,Te),O=this.adapter.addMany(ce,O)}return this.setLoadingTrue(O)}saveAddManyError(O,I){return this.setLoadingFalse(O)}saveAddManySuccess(O,I){const ce=this.guard.mustBeEntities(I),Te=this.extractMergeStrategy(I);return O=this.isOptimistic(I)?this.entityChangeTracker.mergeSaveUpserts(ce,O,Te):this.entityChangeTracker.mergeSaveAdds(ce,O,Te),this.setLoadingFalse(O)}saveAddOne(O,I){if(this.isOptimistic(I)){const ce=this.guard.mustBeEntity(I),Te=this.extractMergeStrategy(I);O=this.entityChangeTracker.trackAddOne(ce,O,Te),O=this.adapter.addOne(ce,O)}return this.setLoadingTrue(O)}saveAddOneError(O,I){return this.setLoadingFalse(O)}saveAddOneSuccess(O,I){const ce=this.guard.mustBeEntity(I),Te=this.extractMergeStrategy(I);if(this.isOptimistic(I)){const at=this.toUpdate(ce);O=this.entityChangeTracker.mergeSaveUpdates([at],O,Te,!1)}else O=this.entityChangeTracker.mergeSaveAdds([ce],O,Te);return this.setLoadingFalse(O)}saveDeleteOne(O,I){const ce=this.extractData(I),Te="object"==typeof ce?this.selectId(ce):ce,at=O.changeState[Te];if(at&&(at.changeType===T.Added?(O=this.adapter.removeOne(Te,O),O=this.entityChangeTracker.commitOne(Te,O),I.payload.skip=!0):O=this.entityChangeTracker.trackDeleteOne(Te,O)),this.isOptimistic(I)){const Tt=this.extractMergeStrategy(I);O=this.entityChangeTracker.trackDeleteOne(Te,O,Tt),O=this.adapter.removeOne(Te,O)}return this.setLoadingTrue(O)}saveDeleteOneError(O,I){return this.setLoadingFalse(O)}saveDeleteOneSuccess(O,I){const ce=this.extractData(I);if(this.isOptimistic(I)){const Te=this.extractMergeStrategy(I);O=this.entityChangeTracker.mergeSaveDeletes([ce],O,Te)}else O=this.adapter.removeOne(ce,O),O=this.entityChangeTracker.commitOne(ce,O);return this.setLoadingFalse(O)}saveDeleteMany(O,I){const ce=this.extractData(I).map(Te=>"object"==typeof Te?this.selectId(Te):Te);if(ce.forEach(Te=>{const at=O.changeState[Te];at&&(at.changeType===T.Added?(O=this.adapter.removeOne(Te,O),O=this.entityChangeTracker.commitOne(Te,O),I.payload.skip=!0):O=this.entityChangeTracker.trackDeleteOne(Te,O))}),this.isOptimistic(I)){const Te=this.extractMergeStrategy(I);O=this.entityChangeTracker.trackDeleteMany(ce,O,Te),O=this.adapter.removeMany(ce,O)}return this.setLoadingTrue(O)}saveDeleteManyError(O,I){return this.setLoadingFalse(O)}saveDeleteManySuccess(O,I){const ce=this.extractData(I);if(this.isOptimistic(I)){const Te=this.extractMergeStrategy(I);O=this.entityChangeTracker.mergeSaveDeletes(ce,O,Te)}else O=this.adapter.removeMany(ce,O),O=this.entityChangeTracker.commitMany(ce,O);return this.setLoadingFalse(O)}saveUpdateOne(O,I){const ce=this.guard.mustBeUpdate(I);if(this.isOptimistic(I)){const Te=this.extractMergeStrategy(I);O=this.entityChangeTracker.trackUpdateOne(ce,O,Te),O=this.adapter.updateOne(ce,O)}return this.setLoadingTrue(O)}saveUpdateOneError(O,I){return this.setLoadingFalse(O)}saveUpdateOneSuccess(O,I){const ce=this.guard.mustBeUpdateResponse(I),Te=this.isOptimistic(I),at=this.extractMergeStrategy(I);return O=this.entityChangeTracker.mergeSaveUpdates([ce],O,at,Te),this.setLoadingFalse(O)}saveUpdateMany(O,I){const ce=this.guard.mustBeUpdates(I);if(this.isOptimistic(I)){const Te=this.extractMergeStrategy(I);O=this.entityChangeTracker.trackUpdateMany(ce,O,Te),O=this.adapter.updateMany(ce,O)}return this.setLoadingTrue(O)}saveUpdateManyError(O,I){return this.setLoadingFalse(O)}saveUpdateManySuccess(O,I){const ce=this.guard.mustBeUpdateResponses(I),at=(this.isOptimistic(I),this.extractMergeStrategy(I));return O=this.entityChangeTracker.mergeSaveUpdates(ce,O,at,!1),this.setLoadingFalse(O)}saveUpsertOne(O,I){if(this.isOptimistic(I)){const ce=this.guard.mustBeEntity(I),Te=this.extractMergeStrategy(I);O=this.entityChangeTracker.trackUpsertOne(ce,O,Te),O=this.adapter.upsertOne(ce,O)}return this.setLoadingTrue(O)}saveUpsertOneError(O,I){return this.setLoadingFalse(O)}saveUpsertOneSuccess(O,I){const ce=this.guard.mustBeEntity(I),Te=this.extractMergeStrategy(I);return O=this.entityChangeTracker.mergeSaveUpserts([ce],O,Te),this.setLoadingFalse(O)}saveUpsertMany(O,I){if(this.isOptimistic(I)){const ce=this.guard.mustBeEntities(I),Te=this.extractMergeStrategy(I);O=this.entityChangeTracker.trackUpsertMany(ce,O,Te),O=this.adapter.upsertMany(ce,O)}return this.setLoadingTrue(O)}saveUpsertManyError(O,I){return this.setLoadingFalse(O)}saveUpsertManySuccess(O,I){const ce=this.guard.mustBeEntities(I),Te=this.extractMergeStrategy(I);return O=this.entityChangeTracker.mergeSaveUpserts(ce,O,Te),this.setLoadingFalse(O)}addAll(O,I){const ce=this.guard.mustBeEntities(I);return{...this.adapter.setAll(ce,O),loading:!1,loaded:!0,changeState:{}}}addMany(O,I){const ce=this.guard.mustBeEntities(I),Te=this.extractMergeStrategy(I);return O=this.entityChangeTracker.trackAddMany(ce,O,Te),this.adapter.addMany(ce,O)}addOne(O,I){const ce=this.guard.mustBeEntity(I),Te=this.extractMergeStrategy(I);return O=this.entityChangeTracker.trackAddOne(ce,O,Te),this.adapter.addOne(ce,O)}removeMany(O,I){const ce=this.guard.mustBeKeys(I),Te=this.extractMergeStrategy(I);return O=this.entityChangeTracker.trackDeleteMany(ce,O,Te),this.adapter.removeMany(ce,O)}removeOne(O,I){const ce=this.guard.mustBeKey(I),Te=this.extractMergeStrategy(I);return O=this.entityChangeTracker.trackDeleteOne(ce,O,Te),this.adapter.removeOne(ce,O)}removeAll(O,I){return{...this.adapter.removeAll(O),loaded:!1,loading:!1,changeState:{}}}updateMany(O,I){const ce=this.guard.mustBeUpdates(I),Te=this.extractMergeStrategy(I);return O=this.entityChangeTracker.trackUpdateMany(ce,O,Te),this.adapter.updateMany(ce,O)}updateOne(O,I){const ce=this.guard.mustBeUpdate(I),Te=this.extractMergeStrategy(I);return O=this.entityChangeTracker.trackUpdateOne(ce,O,Te),this.adapter.updateOne(ce,O)}upsertMany(O,I){const ce=this.guard.mustBeEntities(I),Te=this.extractMergeStrategy(I);return O=this.entityChangeTracker.trackUpsertMany(ce,O,Te),this.adapter.upsertMany(ce,O)}upsertOne(O,I){const ce=this.guard.mustBeEntity(I),Te=this.extractMergeStrategy(I);return O=this.entityChangeTracker.trackUpsertOne(ce,O,Te),this.adapter.upsertOne(ce,O)}commitAll(O){return this.entityChangeTracker.commitAll(O)}commitMany(O,I){return this.entityChangeTracker.commitMany(this.extractData(I),O)}commitOne(O,I){return this.entityChangeTracker.commitOne(this.extractData(I),O)}undoAll(O){return this.entityChangeTracker.undoAll(O)}undoMany(O,I){return this.entityChangeTracker.undoMany(this.extractData(I),O)}undoOne(O,I){return this.entityChangeTracker.undoOne(this.extractData(I),O)}setChangeState(O,I){const ce=this.extractData(I);return O.changeState===ce?O:{...O,changeState:ce}}setCollection(O,I){const ce=this.extractData(I);return O===ce?O:ce}setFilter(O,I){const ce=this.extractData(I);return O.filter===ce?O:{...O,filter:ce}}setLoaded(O,I){const ce=!0===this.extractData(I)||!1;return O.loaded===ce?O:{...O,loaded:ce}}setLoading(O,I){return this.setLoadingFlag(O,this.extractData(I))}setLoadingFalse(O){return this.setLoadingFlag(O,!1)}setLoadingTrue(O){return this.setLoadingFlag(O,!0)}setLoadingFlag(O,I){return O.loading===(I=!0===I)?O:{...O,loading:I}}extractData(O){return O.payload&&O.payload.data}extractMergeStrategy(O){return this.isChangeTracking?O.payload&&O.payload.mergeStrategy:Fe.IgnoreChanges}isOptimistic(O){return O.payload&&!0===O.payload.isOptimistic}}let J=(()=>{class oe{constructor(I){this.entityDefinitionService=I}create(I){const ce=this.entityDefinitionService.getDefinition(I);return new Y(I,ce).methods}}return oe.\u0275fac=function(I){return new(I||oe)(e.\u0275\u0275inject(ct))},oe.\u0275prov=e.\u0275\u0275defineInjectable({token:oe,factory:oe.\u0275fac}),oe})(),ge=(()=>{class oe{constructor(I){this.methodsFactory=I}create(I){const ce=this.methodsFactory.create(I);return function(at,Tt){const tn=ce[Tt.payload.entityOp];return tn?tn(at,Tt):at}}}return oe.\u0275fac=function(I){return new(I||oe)(e.\u0275\u0275inject(J))},oe.\u0275prov=e.\u0275\u0275defineInjectable({token:oe,factory:oe.\u0275fac}),oe})(),Ce=(()=>{class oe{constructor(I,ce){this.entityCollectionReducerFactory=I,this.entityCollectionReducers={},this.entityCollectionMetaReducer=be.qC.apply(null,ce||[])}getOrCreateReducer(I){let ce=this.entityCollectionReducers[I];return ce||(ce=this.entityCollectionReducerFactory.create(I),ce=this.registerReducer(I,ce),this.entityCollectionReducers[I]=ce),ce}registerReducer(I,ce){return ce=this.entityCollectionMetaReducer(ce),this.entityCollectionReducers[I.trim()]=ce}registerReducers(I){(I?Object.keys(I):[]).forEach(Te=>this.registerReducer(Te,I[Te]))}}return oe.\u0275fac=function(I){return new(I||oe)(e.\u0275\u0275inject(ge),e.\u0275\u0275inject(mr,8))},oe.\u0275prov=e.\u0275\u0275defineInjectable({token:oe,factory:oe.\u0275fac}),oe})(),We=(()=>{class oe{constructor(I,ce,Te){this.entityCollectionCreator=I,this.entityCollectionReducerRegistry=ce,this.logger=Te}create(){return function I(ce={},Te){switch(Te.type){case Je.CLEAR_COLLECTIONS:return this.clearCollectionsReducer(ce,Te);case Je.LOAD_COLLECTIONS:return this.loadCollectionsReducer(ce,Te);case Je.MERGE_QUERY_SET:return this.mergeQuerySetReducer(ce,Te);case Je.SAVE_ENTITIES:return this.saveEntitiesReducer(ce,Te);case Je.SAVE_ENTITIES_CANCEL:return this.saveEntitiesCancelReducer(ce,Te);case Je.SAVE_ENTITIES_ERROR:return this.saveEntitiesErrorReducer(ce,Te);case Je.SAVE_ENTITIES_SUCCESS:return this.saveEntitiesSuccessReducer(ce,Te);case Je.SET_ENTITY_CACHE:return Te.payload.cache}const at=Te.payload;return at&&at.entityName&&at.entityOp&&!at.error?this.applyCollectionReducer(ce,Te):ce}.bind(this)}clearCollectionsReducer(I,ce){let{collections:Te}=ce.payload;const Tt=ye.REMOVE_ALL;return Te||(Te=Object.keys(I)),Te.reduce((tn,on)=>this.applyCollectionReducer(tn,{type:`[${on}] ${ce.type}`,payload:{entityName:on,entityOp:Tt}}),I)}loadCollectionsReducer(I,ce){const{collections:Te}=ce.payload,Tt=ye.ADD_ALL;return Object.keys(Te).reduce((on,bn)=>this.applyCollectionReducer(on,{type:`[${bn}] ${ce.type}`,payload:{entityName:bn,entityOp:Tt,data:Te[bn]}}),I)}mergeQuerySetReducer(I,ce){let{mergeStrategy:Te,querySet:at}=ce.payload;Te=null===Te?Fe.PreserveChanges:Te;const tn=ye.QUERY_MANY_SUCCESS;return Object.keys(at).reduce((bn,vn)=>this.applyCollectionReducer(bn,{type:`[${vn}] ${ce.type}`,payload:{entityName:vn,entityOp:tn,data:at[vn],mergeStrategy:Te}}),I)}saveEntitiesReducer(I,ce){const{changeSet:Te,correlationId:at,isOptimistic:Tt,mergeStrategy:tn,tag:on}=ce.payload;try{Te.changes.forEach(vn=>{const Ht=vn.entityName,Jn={entityName:Ht,entityOp:bn(vn),data:vn.entities,correlationId:at,isOptimistic:Tt,mergeStrategy:tn,tag:on},er={type:`[${Ht}] ${ce.type}`,payload:Jn};if(I=this.applyCollectionReducer(I,er),er.payload.error)throw er.payload.error})}catch(vn){ce.payload.error=vn}return I;function bn(vn){switch(vn.op){case ht.Add:return ye.SAVE_ADD_MANY;case ht.Delete:return ye.SAVE_DELETE_MANY;case ht.Update:return ye.SAVE_UPDATE_MANY;case ht.Upsert:return ye.SAVE_UPSERT_MANY}}}saveEntitiesCancelReducer(I,ce){return this.clearLoadingFlags(I,ce.payload.entityNames||[])}saveEntitiesErrorReducer(I,ce){const Tt=ce.payload.originalAction.payload.changeSet.changes.map(tn=>tn.entityName);return this.clearLoadingFlags(I,Tt)}saveEntitiesSuccessReducer(I,ce){const{changeSet:Te,correlationId:at,isOptimistic:Tt,mergeStrategy:tn,tag:on}=ce.payload;return Te.changes.forEach(vn=>{const Ht=vn.entityName,Jn={entityName:Ht,entityOp:bn(vn),data:vn.entities,correlationId:at,isOptimistic:Tt,mergeStrategy:tn,tag:on};I=this.applyCollectionReducer(I,{type:`[${Ht}] ${ce.type}`,payload:Jn})}),I;function bn(vn){switch(vn.op){case ht.Add:return ye.SAVE_ADD_MANY_SUCCESS;case ht.Delete:return ye.SAVE_DELETE_MANY_SUCCESS;case ht.Update:return ye.SAVE_UPDATE_MANY_SUCCESS;case ht.Upsert:return ye.SAVE_UPSERT_MANY_SUCCESS}}}applyCollectionReducer(I={},ce){const Te=ce.payload.entityName,at=I[Te],Tt=this.entityCollectionReducerRegistry.getOrCreateReducer(Te);let tn;try{tn=Tt(at||this.entityCollectionCreator.create(Te),ce)}catch(on){this.logger.error(on),ce.payload.error=on}return ce.payload.error||at===tn?I:{...I,[Te]:tn}}clearLoadingFlags(I,ce){let Te=!1;return ce.forEach(at=>{const Tt=I[at];Tt.loading&&(Te||(I={...I},Te=!0),I[at]={...Tt,loading:!1})}),I}}return oe.\u0275fac=function(I){return new(I||oe)(e.\u0275\u0275inject(kr),e.\u0275\u0275inject(Ce),e.\u0275\u0275inject(zt))},oe.\u0275prov=e.\u0275\u0275defineInjectable({token:oe,factory:oe.\u0275fac}),oe})(),pt=(()=>{class oe{error(I,ce){I&&(ce?console.error(I,ce):console.error(I))}log(I,ce){I&&(ce?console.log(I,ce):console.log(I))}warn(I,ce){I&&(ce?console.warn(I,ce):console.warn(I))}}return oe.\u0275fac=function(I){return new(I||oe)},oe.\u0275prov=e.\u0275\u0275defineInjectable({token:oe,factory:oe.\u0275fac}),oe})();const dt=["equipment","information","money","series"];let xt=(()=>{class oe{constructor(I){this.pluralNames={},I&&I.forEach(ce=>this.registerPluralNames(ce))}pluralize(I){return this.pluralNames[I]||(dt.indexOf(I.toLowerCase())>=0?I:/[aeiou]y$/.test(I)?I+"s":I.endsWith("y")?I.substr(0,I.length-1)+"ies":/[s|ss|sh|ch|x|z]$/.test(I)?I+"es":I+"s")}registerPluralNames(I){this.pluralNames={...this.pluralNames,...I||{}}}}return oe.\u0275fac=function(I){return new(I||oe)(e.\u0275\u0275inject($e,8))},oe.\u0275prov=e.\u0275\u0275defineInjectable({token:oe,factory:oe.\u0275fac}),oe})(),tt=(()=>{class oe{constructor(I,ce,Te,at,Tt,tn){this.reducerManager=I,this.injector=Te,this.entityCacheName=at,this.initialState=Tt,this.metaReducers=tn;const on=at||ur;Tt="function"==typeof Tt?Tt():Tt;const bn=(tn||[]).map(vn=>vn instanceof e.InjectionToken?Te.get(vn):vn);this.entityCacheFeature={key:on,reducers:ce.create(),reducerFactory:be.UY,initialState:Tt||{},metaReducers:bn},I.addFeature(this.entityCacheFeature)}static forRoot(I){return{ngModule:oe,providers:[{provide:ir,useValue:I.entityCacheMetaReducers?I.entityCacheMetaReducers:[]},{provide:mr,useValue:I.entityCollectionMetaReducers?I.entityCollectionMetaReducers:[]},{provide:$e,multi:!0,useValue:I.pluralNames?I.pluralNames:{}}]}}ngOnDestroy(){this.reducerManager.removeFeature(this.entityCacheFeature)}}return oe.\u0275fac=function(I){return new(I||oe)(e.\u0275\u0275inject(be.PB),e.\u0275\u0275inject(We),e.\u0275\u0275inject(e.Injector),e.\u0275\u0275inject(Xn,8),e.\u0275\u0275inject(hr,8),e.\u0275\u0275inject(ir,8))},oe.\u0275mod=e.\u0275\u0275defineNgModule({type:oe}),oe.\u0275inj=e.\u0275\u0275defineInjector({providers:[Cn,xn,Ge,Qn,We,fr,kr,ge,J,Ce,On,$n,ct,xr,wn,an,Kn,{provide:Xn,useValue:ur},{provide:$r,useClass:mi},{provide:zt,useClass:pt}],imports:[[be.Aw]]}),oe})(),At=(()=>{class oe{constructor(I,ce,Te){this.effectSources=I,this.addEffects(ce),this.addEffects(Te)}static forRoot(I){return{ngModule:oe,providers:[{provide:Vt,multi:!0,useValue:I.entityMetadata?I.entityMetadata:[]},{provide:ir,useValue:I.entityCacheMetaReducers?I.entityCacheMetaReducers:[]},{provide:mr,useValue:I.entityCollectionMetaReducers?I.entityCollectionMetaReducers:[]},{provide:$e,multi:!0,useValue:I.pluralNames?I.pluralNames:{}}]}}addEffects(I){this.effectSources.addEffects(I)}}return oe.\u0275fac=function(I){return new(I||oe)(e.\u0275\u0275inject(ze.Ll),e.\u0275\u0275inject(pr),e.\u0275\u0275inject(wr))},oe.\u0275mod=e.\u0275\u0275defineNgModule({type:oe}),oe.\u0275inj=e.\u0275\u0275defineInjector({providers:[Ft,Pt,Yt,pr,wr,{provide:rt,useClass:Be},{provide:Bt,useClass:pn},{provide:Ot,useClass:xt}],imports:[[tt,ze.sQ]]}),oe})()},3599:(it,K,u)=>{u.d(K,{eX:()=>Ye,Ll:()=>Ut,sQ:()=>rt,GW:()=>_,l4:()=>ht});var e=u(9263),n=u(6646),y=u(3336),x=u(253),$=u(591),c=u(745),d=u(5474),p=u(2971);class S{constructor(ct,kt,Pt){this.kind=ct,this.value=kt,this.error=Pt,this.hasValue="N"===ct}observe(ct){return V(this,ct)}do(ct,kt,Pt){const{kind:Yt,value:Bt,error:pn}=this;return"N"===Yt?null==ct?void 0:ct(Bt):"E"===Yt?null==kt?void 0:kt(pn):null==Pt?void 0:Pt()}accept(ct,kt,Pt){var Yt;return(0,p.m)(null===(Yt=ct)||void 0===Yt?void 0:Yt.next)?this.observe(ct):this.do(ct,kt,Pt)}toObservable(){const{kind:ct,value:kt,error:Pt}=this,Yt="N"===ct?(0,c.of)(kt):"E"===ct?(0,d._)(()=>Pt):"C"===ct?$.E:0;if(!Yt)throw new TypeError(`Unexpected notification kind ${ct}`);return Yt}static createNext(ct){return new S("N",ct)}static createError(ct){return new S("E",void 0,ct)}static createComplete(){return S.completeNotification}}function V(Vt,ct){var kt,Pt,Yt;const{kind:Bt,value:pn,error:_n}=Vt;if("string"!=typeof Bt)throw new TypeError('Invalid notification, missing "kind"');"N"===Bt?null===(kt=ct.next)||void 0===kt||kt.call(ct,pn):"E"===Bt?null===(Pt=ct.error)||void 0===Pt||Pt.call(ct,_n):null===(Yt=ct.complete)||void 0===Yt||Yt.call(ct)}S.completeNotification=new S("C");var N=u(1944),U=u(3945),Q=u(4987);function Z(Vt,ct,kt,Pt){return(0,N.e)((Yt,Bt)=>{let pn;ct&&"function"!=typeof ct?({duration:kt,element:pn,connector:Pt}=ct):pn=ct;const _n=new Map,Cn=ir=>{_n.forEach(ir),ir(Bt)},xn=ir=>Cn(mr=>mr.error(ir));let Qn=0,dr=!1;const ur=new U.Q(Bt,ir=>{try{const mr=Vt(ir);let hr=_n.get(mr);if(!hr){_n.set(mr,hr=Pt?Pt():new x.x);const Or=function Xn(ir,mr){const hr=new y.y(Or=>{Qn++;const fr=mr.subscribe(Or);return()=>{fr.unsubscribe(),0==--Qn&&dr&&ur.unsubscribe()}});return hr.key=ir,hr}(mr,hr);if(Bt.next(Or),kt){const fr=(0,U.x)(hr,()=>{hr.complete(),null==fr||fr.unsubscribe()},void 0,void 0,()=>_n.delete(mr));ur.add((0,Q.Xf)(kt(Or)).subscribe(fr))}}hr.next(pn?pn(ir):ir)}catch(mr){xn(mr)}},()=>Cn(ir=>ir.complete()),xn,()=>_n.clear(),()=>(dr=!0,0===Qn));Yt.subscribe(ur)})}var ue=u(635);function G(Vt,ct){return ct?kt=>kt.pipe(G((Pt,Yt)=>(0,Q.Xf)(Vt(Pt,Yt)).pipe((0,ue.U)((Bt,pn)=>ct(Pt,Bt,Yt,pn))))):(0,N.e)((kt,Pt)=>{let Yt=0,Bt=null,pn=!1;kt.subscribe((0,U.x)(Pt,_n=>{Bt||(Bt=(0,U.x)(Pt,void 0,()=>{Bt=null,pn&&Pt.complete()}),(0,Q.Xf)(Vt(_n,Yt++)).subscribe(Bt))},()=>{pn=!0,!Bt&&Pt.complete()}))})}var ee=u(23),ve=u(3158),Oe=u(116),Le=u(9525),be=u(9295),m=u(7451);const P={dispatch:!0,useEffectsErrorHandler:!0},b="__@ngrx/effects_create__";function _(Vt,ct){const kt=Vt(),Pt={...P,...ct};return Object.defineProperty(kt,b,{value:Pt}),kt}function R(Vt){return Object.getOwnPropertyNames(Vt).filter(Pt=>!(!Vt[Pt]||!Vt[Pt].hasOwnProperty(b))&&Vt[Pt][b].hasOwnProperty("dispatch")).map(Pt=>({propertyName:Pt,...Vt[Pt][b]}))}function E(Vt){return Object.getPrototypeOf(Vt)}const ne="__@ngrx/effects__";function Ee(Vt){return(0,e.qC)(Ge,E)(Vt)}function Ge(Vt){return function se(Vt){return Vt.constructor.hasOwnProperty(ne)}(Vt)?Vt.constructor[ne]:[]}function Xe(Vt,ct,kt){const Pt=E(Vt).constructor.name,Yt=function qe(Vt){return[Ee,R].reduce((kt,Pt)=>kt.concat(Pt(Vt)),[])}(Vt).map(({propertyName:Bt,dispatch:pn,useEffectsErrorHandler:_n})=>{const Cn="function"==typeof Vt[Bt]?Vt[Bt]():Vt[Bt],xn=_n?kt(Cn,ct):Cn;return!1===pn?xn.pipe((0,ee.l)()):xn.pipe(function H(){return(0,N.e)((Vt,ct)=>{Vt.subscribe((0,U.x)(ct,kt=>{ct.next(S.createNext(kt))},()=>{ct.next(S.createComplete()),ct.complete()},kt=>{ct.next(S.createError(kt)),ct.complete()}))})}()).pipe((0,ue.U)(dr=>({effect:Vt[Bt],notification:dr,propertyName:Bt,sourceName:Pt,sourceInstance:Vt})))});return(0,n.T)(...Yt)}function He(Vt,ct,kt=10){return Vt.pipe((0,ve.K)(Pt=>(ct&&ct.handleError(Pt),kt<=1?Vt:He(Vt,ct,kt-1))))}let Ye=(()=>{class Vt extends y.y{constructor(kt){super(),kt&&(this.source=kt)}lift(kt){const Pt=new Vt;return Pt.source=this,Pt.operator=kt,Pt}}return Vt.\u0275fac=function(kt){return new(kt||Vt)(m.\u0275\u0275inject(e.Y$))},Vt.\u0275prov=m.\u0275\u0275defineInjectable({token:Vt,factory:Vt.\u0275fac}),Vt})();function ht(...Vt){return(0,Oe.h)(ct=>Vt.some(kt=>"string"==typeof kt?kt===ct.type:kt.type===ct.type))}function D(Vt){return C(Vt,"ngrxOnInitEffects")}function C(Vt,ct){return Vt&&ct in Vt&&"function"==typeof Vt[ct]}const g=new m.InjectionToken("@ngrx/effects Internal Root Guard"),B=new m.InjectionToken("@ngrx/effects User Provided Effects"),de=new m.InjectionToken("@ngrx/effects Internal Root Effects"),ye=new m.InjectionToken("@ngrx/effects Root Effects"),Me=new m.InjectionToken("@ngrx/effects Internal Feature Effects"),Qe=new m.InjectionToken("@ngrx/effects Feature Effects"),st=new m.InjectionToken("@ngrx/effects Effects Error Handler");let Ut=(()=>{class Vt extends x.x{constructor(kt,Pt){super(),this.errorHandler=kt,this.effectsErrorHandler=Pt}addEffects(kt){this.next(kt)}toActions(){return this.pipe(Z(E),(0,Le.z)(kt=>kt.pipe(Z(qt))),(0,Le.z)(kt=>{const Pt=kt.pipe(G(Bt=>function Ue(Vt,ct){return kt=>{const Pt=Xe(kt,Vt,ct);return function ut(Vt){return C(Vt,"ngrxOnRunEffects")}(kt)?kt.ngrxOnRunEffects(Pt):Pt}}(this.errorHandler,this.effectsErrorHandler)(Bt)),(0,ue.U)(Bt=>(function Se(Vt,ct){if("N"===Vt.notification.kind){const kt=Vt.notification.value;!function he(Vt){return"function"!=typeof Vt&&Vt&&Vt.type&&"string"==typeof Vt.type}(kt)&&ct.handleError(new Error(`Effect ${function pe({propertyName:Vt,sourceInstance:ct,sourceName:kt}){const Pt="function"==typeof ct[Vt];return`"${kt}.${String(Vt)}${Pt?"()":""}"`}(Vt)} dispatched an invalid action: ${function Fe(Vt){try{return JSON.stringify(Vt)}catch{return Vt}}(kt)}`))}}(Bt,this.errorHandler),Bt.notification)),(0,Oe.h)(Bt=>"N"===Bt.kind&&null!=Bt.value),function X(){return(0,N.e)((Vt,ct)=>{Vt.subscribe((0,U.x)(ct,kt=>V(kt,ct)))})}()),Yt=kt.pipe((0,be.q)(1),(0,Oe.h)(D),(0,ue.U)(Bt=>Bt.ngrxOnInitEffects()));return(0,n.T)(Pt,Yt)}))}}return Vt.\u0275fac=function(kt){return new(kt||Vt)(m.\u0275\u0275inject(m.ErrorHandler),m.\u0275\u0275inject(st))},Vt.\u0275prov=m.\u0275\u0275defineInjectable({token:Vt,factory:Vt.\u0275fac}),Vt})();function qt(Vt){return function we(Vt){return C(Vt,"ngrxOnIdentifyEffects")}(Vt)?Vt.ngrxOnIdentifyEffects():""}let Lt=(()=>{class Vt{constructor(kt,Pt){this.effectSources=kt,this.store=Pt,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}}return Vt.\u0275fac=function(kt){return new(kt||Vt)(m.\u0275\u0275inject(Ut),m.\u0275\u0275inject(e.yh))},Vt.\u0275prov=m.\u0275\u0275defineInjectable({token:Vt,factory:Vt.\u0275fac}),Vt})();const zt="@ngrx/effects/init";(0,e.PH)(zt);let Ot=(()=>{class Vt{constructor(kt,Pt,Yt,Bt,pn,_n,Cn){this.sources=kt,Pt.start(),Bt.forEach(xn=>kt.addEffects(xn)),Yt.dispatch({type:zt})}addEffects(kt){this.sources.addEffects(kt)}}return Vt.\u0275fac=function(kt){return new(kt||Vt)(m.\u0275\u0275inject(Ut),m.\u0275\u0275inject(Lt),m.\u0275\u0275inject(e.yh),m.\u0275\u0275inject(ye),m.\u0275\u0275inject(e.cr,8),m.\u0275\u0275inject(e.CK,8),m.\u0275\u0275inject(g,8))},Vt.\u0275mod=m.\u0275\u0275defineNgModule({type:Vt}),Vt.\u0275inj=m.\u0275\u0275defineInjector({}),Vt})(),Ke=(()=>{class Vt{constructor(kt,Pt,Yt,Bt){Pt.forEach(pn=>pn.forEach(_n=>kt.addEffects(_n)))}}return Vt.\u0275fac=function(kt){return new(kt||Vt)(m.\u0275\u0275inject(Ot),m.\u0275\u0275inject(Qe),m.\u0275\u0275inject(e.cr,8),m.\u0275\u0275inject(e.CK,8))},Vt.\u0275mod=m.\u0275\u0275defineNgModule({type:Vt}),Vt.\u0275inj=m.\u0275\u0275defineInjector({}),Vt})(),rt=(()=>{class Vt{static forFeature(kt=[]){return{ngModule:Ke,providers:[kt,{provide:Me,multi:!0,useValue:kt},{provide:B,multi:!0,useValue:[]},{provide:Qe,multi:!0,useFactory:Be,deps:[m.Injector,Me,B]}]}}static forRoot(kt=[]){return{ngModule:Ot,providers:[{provide:st,useValue:He},Lt,Ut,Ye,kt,{provide:de,useValue:[kt]},{provide:g,useFactory:wt,deps:[[Lt,new m.Optional,new m.SkipSelf],[de,new m.Self]]},{provide:B,multi:!0,useValue:[]},{provide:ye,useFactory:Be,deps:[m.Injector,de,B]}]}}}return Vt.\u0275fac=function(kt){return new(kt||Vt)},Vt.\u0275mod=m.\u0275\u0275defineNgModule({type:Vt}),Vt.\u0275inj=m.\u0275\u0275defineInjector({}),Vt})();function Be(Vt,ct,kt){const Pt=[];for(const Yt of ct)Pt.push(...Yt);for(const Yt of kt)Pt.push(...Yt);return function et(Vt,ct){return ct.map(kt=>Vt.get(kt))}(Vt,Pt)}function wt(Vt,ct){if((1!==ct.length||0!==ct[0].length)&&Vt)throw new TypeError("EffectsModule.forRoot() called twice. Feature modules should use EffectsModule.forFeature() instead.");return"guarded"}},1611:(it,K,u)=>{u.d(K,{km:()=>G,Qi:()=>m,Ug:()=>R,mg:()=>Q});var e=u(9263),n=u(7451),y=u(8433),x=u(538);const $="@ngrx/router-store/request",d=((0,e.PH)($,(0,e.Ky)()),"@ngrx/router-store/navigation"),z=((0,e.PH)(d,(0,e.Ky)()),"@ngrx/router-store/cancel"),V=((0,e.PH)(z,(0,e.Ky)()),"@ngrx/router-store/error"),U=((0,e.PH)(V,(0,e.Ky)()),"@ngrx/router-store/navigated");function Q(E,ne){const me=ne;switch(me.type){case d:case V:case z:return{state:me.payload.routerState,navigationId:me.payload.event.id};default:return E}}(0,e.PH)(U,(0,e.Ky)());class Z{}class ue{serialize(ne){return{root:this.serializeRoute(ne.root),url:ne.url}}serializeRoute(ne){const me=ne.children.map(Ee=>this.serializeRoute(Ee));return{params:ne.params,paramMap:ne.paramMap,data:ne.data,url:ne.url,outlet:ne.outlet,routeConfig:ne.routeConfig?{component:ne.routeConfig.component,path:ne.routeConfig.path,pathMatch:ne.routeConfig.pathMatch,redirectTo:ne.routeConfig.redirectTo,outlet:ne.routeConfig.outlet}:null,queryParams:ne.queryParams,queryParamMap:ne.queryParamMap,fragment:ne.fragment,component:ne.routeConfig?ne.routeConfig.component:void 0,root:void 0,parent:void 0,firstChild:me[0],pathFromRoot:void 0,children:me}}}class G{serialize(ne){return{root:this.serializeRoute(ne.root),url:ne.url}}serializeRoute(ne){const me=ne.children.map(Ee=>this.serializeRoute(Ee));return{params:ne.params,data:ne.data,url:ne.url,outlet:ne.outlet,routeConfig:ne.routeConfig?{path:ne.routeConfig.path,pathMatch:ne.routeConfig.pathMatch,redirectTo:ne.routeConfig.redirectTo,outlet:ne.routeConfig.outlet}:null,queryParams:ne.queryParams,fragment:ne.fragment,firstChild:me[0],children:me}}}var X=(()=>{return(E=X||(X={}))[E.PreActivation=1]="PreActivation",E[E.PostActivation=2]="PostActivation",X;var E})();const ee=new n.InjectionToken("@ngrx/router-store Internal Configuration"),ve=new n.InjectionToken("@ngrx/router-store Configuration");function Le(E){return{stateKey:"router",serializer:G,navigationActionTiming:X.PreActivation,...E}}var be=(()=>{return(E=be||(be={}))[E.NONE=1]="NONE",E[E.ROUTER=2]="ROUTER",E[E.STORE=3]="STORE",be;var E})();let m=(()=>{class E{constructor(me,Ee,se,ze,Ge,xe){this.store=me,this.router=Ee,this.serializer=se,this.errorHandler=ze,this.config=Ge,this.activeRuntimeChecks=xe,this.lastEvent=null,this.routerState=null,this.trigger=be.NONE,this.stateKey=this.config.stateKey,!(0,e.rM)()&&(0,n.isDevMode)()&&(xe?.strictActionSerializability||xe?.strictStateSerializability)&&this.serializer instanceof ue&&console.warn("@ngrx/router-store: The serializability runtime checks cannot be enabled with the DefaultRouterStateSerializer. The default serializer has an unserializable router state and actions that are not serializable. To use the serializability runtime checks either use the MinimalRouterStateSerializer or implement a custom router state serializer. This also applies to Ivy with immutability runtime checks."),this.setUpStoreStateListener(),this.setUpRouterEventsListener()}static forRoot(me={}){return{ngModule:E,providers:[{provide:ee,useValue:me},{provide:ve,useFactory:Le,deps:[ee]},{provide:Z,useClass:me.serializer?me.serializer:0===me.routerState?ue:G}]}}setUpStoreStateListener(){this.store.pipe((0,e.Ys)(this.stateKey),(0,x.M)(this.store)).subscribe(([me,Ee])=>{this.navigateIfNeeded(me,Ee)})}navigateIfNeeded(me,Ee){if(!me||!me.state||this.trigger===be.ROUTER||this.lastEvent instanceof y.NavigationStart)return;const se=me.state.url;(function P(E,ne){return b(E)===b(ne)})(this.router.url,se)||(this.storeState=Ee,this.trigger=be.STORE,this.router.navigateByUrl(se).catch(ze=>{this.errorHandler.handleError(ze)}))}setUpRouterEventsListener(){const me=this.config.navigationActionTiming===X.PostActivation;let Ee;this.router.events.pipe((0,x.M)(this.store)).subscribe(([se,ze])=>{this.lastEvent=se,se instanceof y.NavigationStart?(this.routerState=this.serializer.serialize(this.router.routerState.snapshot),this.trigger!==be.STORE&&(this.storeState=ze,this.dispatchRouterRequest(se))):se instanceof y.RoutesRecognized?(Ee=se,!me&&this.trigger!==be.STORE&&this.dispatchRouterNavigation(se)):se instanceof y.NavigationCancel?(this.dispatchRouterCancel(se),this.reset()):se instanceof y.NavigationError?(this.dispatchRouterError(se),this.reset()):se instanceof y.NavigationEnd&&(this.trigger!==be.STORE&&(me&&this.dispatchRouterNavigation(Ee),this.dispatchRouterNavigated(se)),this.reset())})}dispatchRouterRequest(me){this.dispatchRouterAction($,{event:me})}dispatchRouterNavigation(me){const Ee=this.serializer.serialize(me.state);this.dispatchRouterAction(d,{routerState:Ee,event:new y.RoutesRecognized(me.id,me.url,me.urlAfterRedirects,Ee)})}dispatchRouterCancel(me){this.dispatchRouterAction(z,{storeState:this.storeState,event:me})}dispatchRouterError(me){this.dispatchRouterAction(V,{storeState:this.storeState,event:new y.NavigationError(me.id,me.url,`${me}`)})}dispatchRouterNavigated(me){const Ee=this.serializer.serialize(this.router.routerState.snapshot);this.dispatchRouterAction(U,{event:me,routerState:Ee})}dispatchRouterAction(me,Ee){this.trigger=be.ROUTER;try{this.store.dispatch({type:me,payload:{routerState:this.routerState,...Ee,event:0===this.config.routerState?Ee.event:{id:Ee.event.id,url:Ee.event.url,urlAfterRedirects:Ee.event.urlAfterRedirects}}})}finally{this.trigger=be.NONE}}reset(){this.trigger=be.NONE,this.storeState=null,this.routerState=null}}return E.\u0275fac=function(me){return new(me||E)(n.\u0275\u0275inject(e.yh),n.\u0275\u0275inject(y.Router),n.\u0275\u0275inject(Z),n.\u0275\u0275inject(n.ErrorHandler),n.\u0275\u0275inject(ve),n.\u0275\u0275inject(e.hg))},E.\u0275mod=n.\u0275\u0275defineNgModule({type:E}),E.\u0275inj=n.\u0275\u0275defineInjector({}),E})();function b(E){return E?.length>0&&"/"===E[E.length-1]?E.substring(0,E.length-1):E}function R(E=function _(){return(0,e.ZF)("router")}()){const ne=(0,e.P1)(E,He=>He&&He.state),me=(0,e.P1)(ne,He=>He&&He.root),Ee=(0,e.P1)(me,He=>{if(!He)return;let Ye=He;for(;Ye.firstChild;)Ye=Ye.firstChild;return Ye}),se=(0,e.P1)(me,He=>He&&He.fragment),ze=(0,e.P1)(me,He=>He&&He.queryParams),xe=(0,e.P1)(Ee,He=>He&&He.params),Xe=(0,e.P1)(Ee,He=>He&&He.data),lt=(0,e.P1)(ne,He=>He&&He.url);return{selectCurrentRoute:Ee,selectFragment:se,selectQueryParams:ze,selectQueryParam:He=>(0,e.P1)(ze,Ye=>Ye&&Ye[He]),selectRouteParams:xe,selectRouteParam:He=>(0,e.P1)(xe,Ye=>Ye&&Ye[He]),selectRouteData:Xe,selectUrl:lt}}},5242:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{FT:()=>StoreDevtoolsModule});var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7451),_ngrx_store__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9263),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(591),rxjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3336),rxjs__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(745),rxjs__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(6646),rxjs__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(4915),rxjs__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(6067),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1203),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(116),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(635),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(3853),rxjs_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(7580),rxjs_operators__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(1989),rxjs_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(3158),rxjs_operators__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(9295),rxjs_operators__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(8951),rxjs_operators__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(2673),rxjs_operators__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(7260),rxjs_operators__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(8728),rxjs_operators__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(538),rxjs_operators__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(4503);class StoreDevtoolsConfig{constructor(){this.maxAge=!1}}const STORE_DEVTOOLS_CONFIG=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken("@ngrx/store-devtools Options"),INITIAL_OPTIONS=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken("@ngrx/store-devtools Initial Config");function noMonitor(){return null}const DEFAULT_NAME="NgRx Store DevTools";function createConfig(it){const K={maxAge:!1,monitor:noMonitor,actionSanitizer:void 0,stateSanitizer:void 0,name:DEFAULT_NAME,serialize:!1,logOnly:!1,autoPause:!1,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0}},u="function"==typeof it?it():it,y=Object.assign({},K,{features:u.features||!!u.logOnly&&{pause:!0,export:!0,test:!0}||K.features},u);if(y.maxAge&&y.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${y.maxAge}`);return y}const PERFORM_ACTION="PERFORM_ACTION",REFRESH="REFRESH",RESET="RESET",ROLLBACK="ROLLBACK",COMMIT="COMMIT",SWEEP="SWEEP",TOGGLE_ACTION="TOGGLE_ACTION",SET_ACTIONS_ACTIVE="SET_ACTIONS_ACTIVE",JUMP_TO_STATE="JUMP_TO_STATE",JUMP_TO_ACTION="JUMP_TO_ACTION",IMPORT_STATE="IMPORT_STATE",LOCK_CHANGES="LOCK_CHANGES",PAUSE_RECORDING="PAUSE_RECORDING";class PerformAction{constructor(K,u){if(this.action=K,this.timestamp=u,this.type=PERFORM_ACTION,void 0===K.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}}class Refresh{constructor(){this.type=REFRESH}}class Reset{constructor(K){this.timestamp=K,this.type=RESET}}class Rollback{constructor(K){this.timestamp=K,this.type=ROLLBACK}}class Commit{constructor(K){this.timestamp=K,this.type=COMMIT}}class Sweep{constructor(){this.type=SWEEP}}class ToggleAction{constructor(K){this.id=K,this.type=TOGGLE_ACTION}}class SetActionsActive{constructor(K,u,e=!0){this.start=K,this.end=u,this.active=e,this.type=SET_ACTIONS_ACTIVE}}class JumpToState{constructor(K){this.index=K,this.type=JUMP_TO_STATE}}class JumpToAction{constructor(K){this.actionId=K,this.type=JUMP_TO_ACTION}}class ImportState{constructor(K){this.nextLiftedState=K,this.type=IMPORT_STATE}}class LockChanges{constructor(K){this.status=K,this.type=LOCK_CHANGES}}class PauseRecording{constructor(K){this.status=K,this.type=PAUSE_RECORDING}}function difference(it,K){return it.filter(u=>K.indexOf(u)<0)}function unliftState(it){const{computedStates:K,currentStateIndex:u}=it;if(u>=K.length){const{state:n}=K[K.length-1];return n}const{state:e}=K[u];return e}function unliftAction(it){return it.actionsById[it.nextActionId-1]}function liftAction(it){return new PerformAction(it,+Date.now())}function sanitizeActions(it,K){return Object.keys(K).reduce((u,e)=>{const n=Number(e);return u[n]=sanitizeAction(it,K[n],n),u},{})}function sanitizeAction(it,K,u){return{...K,action:it(K.action,u)}}function sanitizeStates(it,K){return K.map((u,e)=>({state:sanitizeState(it,u.state,e),error:u.error}))}function sanitizeState(it,K,u){return it(K,u)}function shouldFilterActions(it){return it.predicate||it.actionsSafelist||it.actionsBlocklist}function filterLiftedState(it,K,u,e){const n=[],y={},x=[];return it.stagedActionIds.forEach(($,c)=>{const d=it.actionsById[$];!d||c&&isActionFiltered(it.computedStates[c],d,K,u,e)||(y[$]=d,n.push($),x.push(it.computedStates[c]))}),{...it,stagedActionIds:n,actionsById:y,computedStates:x}}function isActionFiltered(it,K,u,e,n){const y=u&&!u(it,K.action),x=e&&!K.action.type.match(e.map(c=>escapeRegExp(c)).join("|")),$=n&&K.action.type.match(n.map(c=>escapeRegExp(c)).join("|"));return y||x||$}function escapeRegExp(it){return it.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const INIT_ACTION={type:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.qg},RECOMPUTE="@ngrx/store-devtools/recompute",RECOMPUTE_ACTION={type:RECOMPUTE};function computeNextEntry(it,K,u,e,n){if(e)return{state:u,error:"Interrupted by an error up the chain"};let x,y=u;try{y=it(u,K)}catch($){x=$.toString(),n.handleError($)}return{state:y,error:x}}function recomputeStates(it,K,u,e,n,y,x,$,c){if(K>=it.length&&it.length===y.length)return it;const d=it.slice(0,K),p=y.length-(c?1:0);for(let z=K;z<p;z++){const S=y[z],V=n[S].action,N=d[z-1],U=N?N.state:e,H=N?N.error:void 0,Z=x.indexOf(S)>-1?N:computeNextEntry(u,V,U,H,$);d.push(Z)}return c&&d.push(it[it.length-1]),d}function liftInitialState(it,K){return{monitorState:K(void 0,{}),nextActionId:1,actionsById:{0:liftAction(INIT_ACTION)},stagedActionIds:[0],skippedActionIds:[],committedState:it,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function liftReducerWith(it,K,u,e,n={}){return y=>(x,$)=>{let{monitorState:c,actionsById:d,nextActionId:p,stagedActionIds:z,skippedActionIds:S,committedState:V,currentStateIndex:N,computedStates:U,isLocked:H,isPaused:Q}=x||K;function Z(X){let ee=X,ve=z.slice(1,ee+1);for(let Oe=0;Oe<ve.length;Oe++){if(U[Oe+1].error){ee=Oe,ve=z.slice(1,ee+1);break}delete d[ve[Oe]]}S=S.filter(Oe=>-1===ve.indexOf(Oe)),z=[0,...z.slice(ee+1)],V=U[ee].state,U=U.slice(ee),N=N>ee?N-ee:0}function ue(){d={0:liftAction(INIT_ACTION)},p=1,z=[0],S=[],V=U[N].state,N=0,U=[]}x||(d=Object.create(d));let G=0;switch($.type){case LOCK_CHANGES:H=$.status,G=1/0;break;case PAUSE_RECORDING:Q=$.status,Q?(z=[...z,p],d[p]=new PerformAction({type:"@ngrx/devtools/pause"},+Date.now()),p++,G=z.length-1,U=U.concat(U[U.length-1]),N===z.length-2&&N++,G=1/0):ue();break;case RESET:d={0:liftAction(INIT_ACTION)},p=1,z=[0],S=[],V=it,N=0,U=[];break;case COMMIT:ue();break;case ROLLBACK:d={0:liftAction(INIT_ACTION)},p=1,z=[0],S=[],N=0,U=[];break;case TOGGLE_ACTION:{const{id:X}=$;S=-1===S.indexOf(X)?[X,...S]:S.filter(ve=>ve!==X),G=z.indexOf(X);break}case SET_ACTIONS_ACTIVE:{const{start:X,end:ee,active:ve}=$,Oe=[];for(let Le=X;Le<ee;Le++)Oe.push(Le);S=ve?difference(S,Oe):[...S,...Oe],G=z.indexOf(X);break}case JUMP_TO_STATE:N=$.index,G=1/0;break;case JUMP_TO_ACTION:{const X=z.indexOf($.actionId);-1!==X&&(N=X),G=1/0;break}case SWEEP:z=difference(z,S),S=[],N=Math.min(N,z.length-1);break;case PERFORM_ACTION:{if(H)return x||K;if(Q||x&&isActionFiltered(x.computedStates[N],$,n.predicate,n.actionsSafelist,n.actionsBlocklist)){const ee=U[U.length-1];U=[...U.slice(0,-1),computeNextEntry(y,$.action,ee.state,ee.error,u)],G=1/0;break}n.maxAge&&z.length===n.maxAge&&Z(1),N===z.length-1&&N++;const X=p++;d[X]=$,z=[...z,X],G=z.length-1;break}case IMPORT_STATE:({monitorState:c,actionsById:d,nextActionId:p,stagedActionIds:z,skippedActionIds:S,committedState:V,currentStateIndex:N,computedStates:U,isLocked:H,isPaused:Q}=$.nextLiftedState);break;case _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.qg:G=0,n.maxAge&&z.length>n.maxAge&&(U=recomputeStates(U,G,y,V,d,z,S,u,Q),Z(z.length-n.maxAge),G=1/0);break;case _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.wb:if(U.filter(ee=>ee.error).length>0)G=0,n.maxAge&&z.length>n.maxAge&&(U=recomputeStates(U,G,y,V,d,z,S,u,Q),Z(z.length-n.maxAge),G=1/0);else{if(!Q&&!H){N===z.length-1&&N++;const ee=p++;d[ee]=new PerformAction($,+Date.now()),z=[...z,ee],G=z.length-1,U=recomputeStates(U,G,y,V,d,z,S,u,Q)}U=U.map(ee=>({...ee,state:y(ee.state,RECOMPUTE_ACTION)})),N=z.length-1,n.maxAge&&z.length>n.maxAge&&Z(z.length-n.maxAge),G=1/0}break;default:G=1/0}return U=recomputeStates(U,G,y,V,d,z,S,u,Q),c=e(c,$),{monitorState:c,actionsById:d,nextActionId:p,stagedActionIds:z,skippedActionIds:S,committedState:V,currentStateIndex:N,computedStates:U,isLocked:H,isPaused:Q}}}let DevtoolsDispatcher=(()=>{class it extends _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.UO{}return it.\u0275fac=function(){let K;return function(e){return(K||(K=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275getInheritedFactory(it)))(e||it)}}(),it.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineInjectable({token:it,factory:it.\u0275fac}),it})();const ExtensionActionTypes={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},REDUX_DEVTOOLS_EXTENSION=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken("@ngrx/store-devtools Redux Devtools Extension");let DevtoolsExtension=(()=>{class DevtoolsExtension{constructor(it,K,u){this.config=K,this.dispatcher=u,this.devtoolsExtension=it,this.createActionStreams()}notify(it,K){if(this.devtoolsExtension)if(it.type===PERFORM_ACTION){if(K.isLocked||K.isPaused)return;const u=unliftState(K);if(shouldFilterActions(this.config)&&isActionFiltered(u,it,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;const e=this.config.stateSanitizer?sanitizeState(this.config.stateSanitizer,u,K.currentStateIndex):u,n=this.config.actionSanitizer?sanitizeAction(this.config.actionSanitizer,it,K.nextActionId):it;this.sendToReduxDevtools(()=>this.extensionConnection.send(n,e))}else{const u={...K,stagedActionIds:K.stagedActionIds,actionsById:this.config.actionSanitizer?sanitizeActions(this.config.actionSanitizer,K.actionsById):K.actionsById,computedStates:this.config.stateSanitizer?sanitizeStates(this.config.stateSanitizer,K.computedStates):K.computedStates};this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,u,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new rxjs__WEBPACK_IMPORTED_MODULE_3__.y(it=>{const K=this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=K,K.init(),K.subscribe(u=>it.next(u)),K.unsubscribe}):rxjs__WEBPACK_IMPORTED_MODULE_2__.E}createActionStreams(){const it=this.createChangesObservable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.B)()),K=it.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)($=>$.type===ExtensionActionTypes.START)),u=it.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)($=>$.type===ExtensionActionTypes.STOP)),e=it.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)($=>$.type===ExtensionActionTypes.DISPATCH),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)($=>this.unwrapAction($.payload)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.b)($=>$.type===IMPORT_STATE?this.dispatcher.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(c=>c.type===_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.wb),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.V)(1e3),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.b)(1e3),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(()=>$),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.K)(()=>(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)($)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.q)(1)):(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)($))),y=it.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)($=>$.type===ExtensionActionTypes.ACTION),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)($=>this.unwrapAction($.payload))).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(u)),x=e.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(u));this.start$=K.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(u)),this.actions$=this.start$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.w)(()=>y)),this.liftedActions$=this.start$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.w)(()=>x))}unwrapAction(action){return"string"==typeof action?eval(`(${action})`):action}getExtensionConfig(it){const K={name:it.name,features:it.features,serialize:it.serialize,autoPause:it.autoPause??!1};return!1!==it.maxAge&&(K.maxAge=it.maxAge),K}sendToReduxDevtools(it){try{it()}catch(K){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",K)}}}return DevtoolsExtension.\u0275fac=function it(K){return new(K||DevtoolsExtension)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(REDUX_DEVTOOLS_EXTENSION),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(STORE_DEVTOOLS_CONFIG),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(DevtoolsDispatcher))},DevtoolsExtension.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineInjectable({token:DevtoolsExtension,factory:DevtoolsExtension.\u0275fac}),DevtoolsExtension})(),StoreDevtools=(()=>{class it{constructor(u,e,n,y,x,$,c,d){const p=liftInitialState(c,d.monitor),z=liftReducerWith(c,p,$,d.monitor,d),S=(0,rxjs__WEBPACK_IMPORTED_MODULE_15__.T)((0,rxjs__WEBPACK_IMPORTED_MODULE_15__.T)(e.asObservable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.T)(1)),y.actions$).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(liftAction)),u,y.liftedActions$).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.Q)(rxjs__WEBPACK_IMPORTED_MODULE_18__.N)),V=n.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(z)),N=new rxjs__WEBPACK_IMPORTED_MODULE_19__.t(1),U=S.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.M)(V),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.R)(({state:ue},[G,X])=>{let ee=X(ue,G);return G.type!==PERFORM_ACTION&&shouldFilterActions(d)&&(ee=filterLiftedState(ee,d.predicate,d.actionsSafelist,d.actionsBlocklist)),y.notify(G,ee),{state:ee,action:G}},{state:p,action:null})).subscribe(({state:ue,action:G})=>{N.next(ue),G.type===PERFORM_ACTION&&x.next(G.action)}),H=y.start$.subscribe(()=>{this.refresh()}),Q=N.asObservable(),Z=Q.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(unliftState));this.extensionStartSubscription=H,this.stateSubscription=U,this.dispatcher=u,this.liftedState=Q,this.state=Z}dispatch(u){this.dispatcher.next(u)}next(u){this.dispatcher.next(u)}error(u){}complete(){}performAction(u){this.dispatch(new PerformAction(u,+Date.now()))}refresh(){this.dispatch(new Refresh)}reset(){this.dispatch(new Reset(+Date.now()))}rollback(){this.dispatch(new Rollback(+Date.now()))}commit(){this.dispatch(new Commit(+Date.now()))}sweep(){this.dispatch(new Sweep)}toggleAction(u){this.dispatch(new ToggleAction(u))}jumpToAction(u){this.dispatch(new JumpToAction(u))}jumpToState(u){this.dispatch(new JumpToState(u))}importState(u){this.dispatch(new ImportState(u))}lockChanges(u){this.dispatch(new LockChanges(u))}pauseRecording(u){this.dispatch(new PauseRecording(u))}}return it.\u0275fac=function(u){return new(u||it)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(DevtoolsDispatcher),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.UO),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.n$),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(DevtoolsExtension),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.Y$),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(_angular_core__WEBPACK_IMPORTED_MODULE_0__.ErrorHandler),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.Y6),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(STORE_DEVTOOLS_CONFIG))},it.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineInjectable({token:it,factory:it.\u0275fac}),it})();const IS_EXTENSION_OR_MONITOR_PRESENT=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function createIsExtensionOrMonitorPresent(it,K){return Boolean(it)||K.monitor!==noMonitor}function createReduxDevtoolsExtension(){const it="__REDUX_DEVTOOLS_EXTENSION__";return"object"==typeof window&&void 0!==window[it]?window[it]:null}function createStateObservable(it){return it.state}let StoreDevtoolsModule=(()=>{class it{static instrument(u={}){return{ngModule:it,providers:[DevtoolsExtension,DevtoolsDispatcher,StoreDevtools,{provide:INITIAL_OPTIONS,useValue:u},{provide:IS_EXTENSION_OR_MONITOR_PRESENT,deps:[REDUX_DEVTOOLS_EXTENSION,STORE_DEVTOOLS_CONFIG],useFactory:createIsExtensionOrMonitorPresent},{provide:REDUX_DEVTOOLS_EXTENSION,useFactory:createReduxDevtoolsExtension},{provide:STORE_DEVTOOLS_CONFIG,deps:[INITIAL_OPTIONS],useFactory:createConfig},{provide:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.FR,deps:[StoreDevtools],useFactory:createStateObservable},{provide:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.mK,useExisting:DevtoolsDispatcher}]}}}return it.\u0275fac=function(u){return new(u||it)},it.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineNgModule({type:it}),it.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineInjector({}),it})()},9263:(it,K,u)=>{u.d(K,{hg:()=>lt,UO:()=>X,qg:()=>G,Y6:()=>Le,PB:()=>De,mK:()=>Je,n$:()=>Fe,Y$:()=>le,FR:()=>C,yh:()=>ye,CK:()=>wn,Aw:()=>an,cr:()=>Rt,wb:()=>we,UY:()=>Ye,qC:()=>Se,PH:()=>H,ZF:()=>xn,Lq:()=>Y,P1:()=>pn,rM:()=>ct,on:()=>M,Ky:()=>Q,Ys:()=>Qe});var e=u(7451),n=u(6317),y=u(3336),x=u(253),$=u(4915),c=u(635),p=u(8728),z=u(538),S=u(4503),V=u(8977);const N={};function H(J,ge){if(N[J]=(N[J]||0)+1,"function"==typeof ge)return ue(J,(...We)=>({...ge(...We),type:J}));switch(ge?ge._as:"empty"){case"empty":return ue(J,()=>({type:J}));case"props":return ue(J,We=>({...We,type:J}));default:throw new Error("Unexpected config.")}}function Q(){return{_as:"props",_p:void 0}}function ue(J,ge){return Object.defineProperty(ge,"type",{value:J,writable:!1})}const G="@ngrx/store/init";let X=(()=>{class J extends n.X{constructor(){super({type:G})}next(Ce){if("function"==typeof Ce)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(void 0===Ce)throw new TypeError("Actions must be objects");if(void 0===Ce.type)throw new TypeError("Actions must have a type property");super.next(Ce)}complete(){}ngOnDestroy(){super.complete()}}return J.\u0275fac=function(Ce){return new(Ce||J)},J.\u0275prov=e.\u0275\u0275defineInjectable({token:J,factory:J.\u0275fac}),J})();const ee=[X],ve=new e.InjectionToken("@ngrx/store Internal Root Guard"),Oe=new e.InjectionToken("@ngrx/store Internal Initial State"),Le=new e.InjectionToken("@ngrx/store Initial State"),be=new e.InjectionToken("@ngrx/store Reducer Factory"),m=new e.InjectionToken("@ngrx/store Internal Reducer Factory Provider"),P=new e.InjectionToken("@ngrx/store Initial Reducers"),b=new e.InjectionToken("@ngrx/store Internal Initial Reducers"),_=new e.InjectionToken("@ngrx/store Store Features"),R=new e.InjectionToken("@ngrx/store Internal Store Reducers"),E=new e.InjectionToken("@ngrx/store Internal Feature Reducers"),ne=new e.InjectionToken("@ngrx/store Internal Feature Configs"),me=new e.InjectionToken("@ngrx/store Internal Store Features"),Ee=new e.InjectionToken("@ngrx/store Internal Feature Reducers Token"),se=new e.InjectionToken("@ngrx/store Feature Reducers"),ze=new e.InjectionToken("@ngrx/store User Provided Meta Reducers"),Ge=new e.InjectionToken("@ngrx/store Meta Reducers"),xe=new e.InjectionToken("@ngrx/store Internal Resolved Meta Reducers"),qe=new e.InjectionToken("@ngrx/store User Runtime Checks Config"),Xe=new e.InjectionToken("@ngrx/store Internal User Runtime Checks Config"),lt=new e.InjectionToken("@ngrx/store Internal Runtime Checks"),He=new e.InjectionToken("@ngrx/store Check if Action types are unique");function Ye(J,ge={}){const Ce=Object.keys(J),We={};for(let dt=0;dt<Ce.length;dt++){const xt=Ce[dt];"function"==typeof J[xt]&&(We[xt]=J[xt])}const pt=Object.keys(We);return function(xt,Mt){xt=void 0===xt?ge:xt;let Nt=!1;const $t={};for(let St=0;St<pt.length;St++){const tt=pt[St],oe=xt[tt],O=(0,We[tt])(oe,Mt);$t[tt]=O,Nt=Nt||O!==oe}return Nt?$t:xt}}function Se(...J){return function(ge){if(0===J.length)return ge;const Ce=J[J.length-1];return J.slice(0,-1).reduceRight((pt,dt)=>dt(pt),Ce(ge))}}function he(J,ge){return Array.isArray(ge)&&ge.length>0&&(J=Se.apply(null,[...ge,J])),(Ce,We)=>{const pt=J(Ce);return(dt,xt)=>pt(dt=void 0===dt?We:dt,xt)}}class Fe extends y.y{}class Je extends X{}const we="@ngrx/store/update-reducers";let De=(()=>{class J extends n.X{constructor(Ce,We,pt,dt){super(dt(pt,We)),this.dispatcher=Ce,this.initialState=We,this.reducers=pt,this.reducerFactory=dt}get currentReducers(){return this.reducers}addFeature(Ce){this.addFeatures([Ce])}addFeatures(Ce){const We=Ce.reduce((pt,{reducers:dt,reducerFactory:xt,metaReducers:Mt,initialState:Nt,key:$t})=>{const St="function"==typeof dt?function pe(J){const ge=Array.isArray(J)&&J.length>0?Se(...J):Ce=>Ce;return(Ce,We)=>(Ce=ge(Ce),(pt,dt)=>Ce(pt=void 0===pt?We:pt,dt))}(Mt)(dt,Nt):he(xt,Mt)(dt,Nt);return pt[$t]=St,pt},{});this.addReducers(We)}removeFeature(Ce){this.removeFeatures([Ce])}removeFeatures(Ce){this.removeReducers(Ce.map(We=>We.key))}addReducer(Ce,We){this.addReducers({[Ce]:We})}addReducers(Ce){this.reducers={...this.reducers,...Ce},this.updateReducers(Object.keys(Ce))}removeReducer(Ce){this.removeReducers([Ce])}removeReducers(Ce){Ce.forEach(We=>{this.reducers=function ht(J,ge){return Object.keys(J).filter(Ce=>Ce!==ge).reduce((Ce,We)=>Object.assign(Ce,{[We]:J[We]}),{})}(this.reducers,We)}),this.updateReducers(Ce)}updateReducers(Ce){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:we,features:Ce})}ngOnDestroy(){this.complete()}}return J.\u0275fac=function(Ce){return new(Ce||J)(e.\u0275\u0275inject(Je),e.\u0275\u0275inject(Le),e.\u0275\u0275inject(P),e.\u0275\u0275inject(be))},J.\u0275prov=e.\u0275\u0275defineInjectable({token:J,factory:J.\u0275fac}),J})();const ut=[De,{provide:Fe,useExisting:De},{provide:Je,useExisting:X}];let le=(()=>{class J extends x.x{ngOnDestroy(){this.complete()}}return J.\u0275fac=function(){let ge;return function(We){return(ge||(ge=e.\u0275\u0275getInheritedFactory(J)))(We||J)}}(),J.\u0275prov=e.\u0275\u0275defineInjectable({token:J,factory:J.\u0275fac}),J})();const D=[le];class C extends y.y{}let g=(()=>{class J extends n.X{constructor(Ce,We,pt,dt){super(dt);const $t=Ce.pipe((0,p.Q)($.N)).pipe((0,z.M)(We)).pipe((0,S.R)(B,{state:dt}));this.stateSubscription=$t.subscribe(({state:St,action:tt})=>{this.next(St),pt.next(tt)})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}}return J.INIT=G,J.\u0275fac=function(Ce){return new(Ce||J)(e.\u0275\u0275inject(X),e.\u0275\u0275inject(Fe),e.\u0275\u0275inject(le),e.\u0275\u0275inject(Le))},J.\u0275prov=e.\u0275\u0275defineInjectable({token:J,factory:J.\u0275fac}),J})();function B(J={state:void 0},[ge,Ce]){const{state:We}=J;return{state:Ce(We,ge),action:ge}}const de=[g,{provide:C,useExisting:g}];let ye=(()=>{class J extends y.y{constructor(Ce,We,pt){super(),this.actionsObserver=We,this.reducerManager=pt,this.source=Ce}select(Ce,...We){return Qe.call(null,Ce,...We)(this)}lift(Ce){const We=new J(this,this.actionsObserver,this.reducerManager);return We.operator=Ce,We}dispatch(Ce){this.actionsObserver.next(Ce)}next(Ce){this.actionsObserver.next(Ce)}error(Ce){this.actionsObserver.error(Ce)}complete(){this.actionsObserver.complete()}addReducer(Ce,We){this.reducerManager.addReducer(Ce,We)}removeReducer(Ce){this.reducerManager.removeReducer(Ce)}}return J.\u0275fac=function(Ce){return new(Ce||J)(e.\u0275\u0275inject(C),e.\u0275\u0275inject(X),e.\u0275\u0275inject(De))},J.\u0275prov=e.\u0275\u0275defineInjectable({token:J,factory:J.\u0275fac}),J})();const Me=[ye];function Qe(J,ge,...Ce){return function(pt){let dt;if("string"==typeof J){const xt=[ge,...Ce].filter(Boolean);dt=pt.pipe(function d(...J){const ge=J.length;if(0===ge)throw new Error("list of properties cannot be empty.");return(0,c.U)(Ce=>{let We=Ce;for(let pt=0;pt<ge;pt++){const dt=null==We?void 0:We[J[pt]];if(void 0===dt)return;We=dt}return We})}(J,...xt))}else{if("function"!=typeof J)throw new TypeError(`Unexpected type '${typeof J}' in select operator, expected 'string' or 'function'`);dt=pt.pipe((0,c.U)(xt=>J(xt,ge)))}return dt.pipe((0,V.x)())}}const Ut="https://ngrx.io/guide/store/configuration/runtime-checks";function qt(J){return void 0===J}function Ue(J){return null===J}function Lt(J){return Array.isArray(J)}function Ke(J){return"object"==typeof J&&null!==J}function et(J){return"function"==typeof J}function ct(){return false}function kt(J,ge){return J===ge}function Pt(J,ge,Ce){for(let We=0;We<J.length;We++)if(!Ce(J[We],ge[We]))return!0;return!1}function Bt(J,ge=kt,Ce=kt){let dt,We=null,pt=null;return{memoized:function $t(){if(void 0!==dt)return dt.result;if(!We)return pt=J.apply(null,arguments),We=arguments,pt;if(!Pt(arguments,We,ge))return pt;const St=J.apply(null,arguments);return We=arguments,Ce(pt,St)?pt:(pt=St,St)},reset:function xt(){We=null,pt=null},setResult:function Mt(St){dt={result:St}},clearResult:function Nt(){dt=void 0}}}function pn(...J){return function Cn(J,ge={stateFn:_n}){return function(...Ce){let We=Ce;if(Array.isArray(We[0])){const[St,...tt]=We;We=[...St,...tt]}const pt=We.slice(0,We.length-1),dt=We[We.length-1],xt=pt.filter(St=>St.release&&"function"==typeof St.release),Mt=J(function(...St){return dt.apply(null,St)}),Nt=Bt(function(St,tt){return ge.stateFn.apply(null,[St,pt,tt,Mt])});return Object.assign(Nt.memoized,{release:function $t(){Nt.reset(),Mt.reset(),xt.forEach(St=>St.release())},projector:Mt.memoized,setResult:Nt.setResult,clearResult:Nt.clearResult})}}(Bt)(...J)}function _n(J,ge,Ce,We){if(void 0===Ce){const dt=ge.map(xt=>xt(J));return We.memoized.apply(null,dt)}const pt=ge.map(dt=>dt(J,Ce));return We.memoized.apply(null,[...pt,Ce])}function xn(J){return pn(ge=>{const Ce=ge[J];return(0,e.isDevMode)()&&!(J in ge)&&console.warn(`@ngrx/store: The feature name "${J}" does not exist in the state, therefore createFeatureSelector cannot access it.  Be sure it is imported in a loaded module using StoreModule.forRoot('${J}', ...) or StoreModule.forFeature('${J}', ...).  If the default state is intended to be undefined, as is the case with router state, this development-only warning message can be ignored.`),Ce},ge=>ge)}function ir(J){Object.freeze(J);const ge=et(J);return Object.getOwnPropertyNames(J).forEach(Ce=>{if(!Ce.startsWith("\u0275")&&function Ft(J,ge){return Object.prototype.hasOwnProperty.call(J,ge)}(J,Ce)&&(!ge||"caller"!==Ce&&"callee"!==Ce&&"arguments"!==Ce)){const We=J[Ce];(Ke(We)||et(We))&&!Object.isFrozen(We)&&ir(We)}}),J}function hr(J,ge=[]){return(qt(J)||Ue(J))&&0===ge.length?{path:["root"],value:J}:Object.keys(J).reduce((We,pt)=>{if(We)return We;const dt=J[pt];return function wt(J){return et(J)&&J.hasOwnProperty("\u0275cmp")}(dt)?We:!(qt(dt)||Ue(dt)||function Ot(J){return"number"==typeof J}(dt)||function $e(J){return"boolean"==typeof J}(dt)||function zt(J){return"string"==typeof J}(dt)||Lt(dt))&&(function Be(J){if(!function rt(J){return Ke(J)&&!Lt(J)}(J))return!1;const ge=Object.getPrototypeOf(J);return ge===Object.prototype||null===ge}(dt)?hr(dt,[...ge,pt]):{path:[...ge,pt],value:dt})},!1)}function Or(J,ge){if(!1===J)return;const Ce=J.path.join("."),We=new Error(`Detected unserializable ${ge} at "${Ce}". ${Ut}#strict${ge}serializability`);throw We.value=J.value,We.unserializablePath=Ce,We}function Hr(J){return(0,e.isDevMode)()?{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1,...J}:{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function xr({strictActionSerializability:J,strictStateSerializability:ge}){return Ce=>J||ge?function mr(J,ge){return function(Ce,We){ge.action(We)&&Or(hr(We),"action");const pt=J(Ce,We);return ge.state()&&Or(hr(pt),"state"),pt}}(Ce,{action:We=>J&&!pr(We),state:()=>ge}):Ce}function Dn({strictActionImmutability:J,strictStateImmutability:ge}){return Ce=>J||ge?function Xn(J,ge){return function(Ce,We){const pt=ge.action(We)?ir(We):We,dt=J(Ce,pt);return ge.state()?ir(dt):dt}}(Ce,{action:We=>J&&!pr(We),state:()=>ge}):Ce}function pr(J){return J.type.startsWith("@ngrx")}function Er({strictActionWithinNgZone:J}){return ge=>J?function fr(J,ge){return function(Ce,We){if(ge.action(We)&&!e.NgZone.isInAngularZone())throw new Error(`Action '${We.type}' running outside NgZone. ${Ut}#strictactionwithinngzone`);return J(Ce,We)}}(ge,{action:Ce=>J&&!pr(Ce)}):ge}function wr(J){return[{provide:Xe,useValue:J},{provide:qe,useFactory:Nr,deps:[Xe]},{provide:lt,deps:[qe],useFactory:Hr},{provide:Ge,multi:!0,deps:[lt],useFactory:Dn},{provide:Ge,multi:!0,deps:[lt],useFactory:xr},{provide:Ge,multi:!0,deps:[lt],useFactory:Er}]}function Zn(){return[{provide:He,multi:!0,deps:[lt],useFactory:kr}]}function Nr(J){return J}function kr(J){if(!J.strictActionTypeUniqueness)return;const ge=Object.entries(N).filter(([,Ce])=>Ce>1).map(([Ce])=>Ce);if(ge.length)throw new Error(`Action types are registered more than once, ${ge.map(Ce=>`"${Ce}"`).join(", ")}. ${Ut}#strictactiontypeuniqueness`)}let Rt=(()=>{class J{constructor(Ce,We,pt,dt,xt,Mt){}}return J.\u0275fac=function(Ce){return new(Ce||J)(e.\u0275\u0275inject(X),e.\u0275\u0275inject(Fe),e.\u0275\u0275inject(le),e.\u0275\u0275inject(ye),e.\u0275\u0275inject(ve,8),e.\u0275\u0275inject(He,8))},J.\u0275mod=e.\u0275\u0275defineNgModule({type:J}),J.\u0275inj=e.\u0275\u0275defineInjector({}),J})(),wn=(()=>{class J{constructor(Ce,We,pt,dt,xt){this.features=Ce,this.featureReducers=We,this.reducerManager=pt;const Mt=Ce.map((Nt,$t)=>{const tt=We.shift()[$t];return{...Nt,reducers:tt,initialState:mi(Nt.initialState)}});pt.addFeatures(Mt)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}}return J.\u0275fac=function(Ce){return new(Ce||J)(e.\u0275\u0275inject(me),e.\u0275\u0275inject(se),e.\u0275\u0275inject(De),e.\u0275\u0275inject(Rt),e.\u0275\u0275inject(He,8))},J.\u0275mod=e.\u0275\u0275defineNgModule({type:J}),J.\u0275inj=e.\u0275\u0275defineInjector({}),J})(),an=(()=>{class J{static forRoot(Ce,We={}){return{ngModule:Rt,providers:[{provide:ve,useFactory:T,deps:[[ye,new e.Optional,new e.SkipSelf]]},{provide:Oe,useValue:We.initialState},{provide:Le,useFactory:mi,deps:[Oe]},{provide:b,useValue:Ce},{provide:R,useExisting:Ce instanceof e.InjectionToken?Ce:b},{provide:P,deps:[e.Injector,b,[new e.Inject(R)]],useFactory:On},{provide:ze,useValue:We.metaReducers?We.metaReducers:[]},{provide:xe,deps:[Ge,ze],useFactory:$r},{provide:m,useValue:We.reducerFactory?We.reducerFactory:Ye},{provide:be,deps:[m,xe],useFactory:he},ee,ut,D,de,Me,wr(We.runtimeChecks),Zn()]}}static forFeature(Ce,We,pt={}){return{ngModule:wn,providers:[{provide:ne,multi:!0,useValue:Ce instanceof Object?{}:pt},{provide:_,multi:!0,useValue:{key:Ce instanceof Object?Ce.name:Ce,reducerFactory:pt instanceof e.InjectionToken||!pt.reducerFactory?Ye:pt.reducerFactory,metaReducers:pt instanceof e.InjectionToken||!pt.metaReducers?[]:pt.metaReducers,initialState:pt instanceof e.InjectionToken||!pt.initialState?void 0:pt.initialState}},{provide:me,deps:[e.Injector,ne,_],useFactory:$n},{provide:E,multi:!0,useValue:Ce instanceof Object?Ce.reducer:We},{provide:Ee,multi:!0,useExisting:We instanceof e.InjectionToken?We:E},{provide:se,multi:!0,deps:[e.Injector,E,[new e.Inject(Ee)]],useFactory:Kn},Zn()]}}}return J.\u0275fac=function(Ce){return new(Ce||J)},J.\u0275mod=e.\u0275\u0275defineNgModule({type:J}),J.\u0275inj=e.\u0275\u0275defineInjector({}),J})();function On(J,ge){return ge instanceof e.InjectionToken?J.get(ge):ge}function $n(J,ge,Ce){return Ce.map((We,pt)=>{if(ge[pt]instanceof e.InjectionToken){const dt=J.get(ge[pt]);return{key:We.key,reducerFactory:dt.reducerFactory?dt.reducerFactory:Ye,metaReducers:dt.metaReducers?dt.metaReducers:[],initialState:dt.initialState}}return We})}function Kn(J,ge){return ge.map(We=>We instanceof e.InjectionToken?J.get(We):We)}function mi(J){return"function"==typeof J?J():J}function $r(J,ge){return J.concat(ge)}function T(J){if(J)throw new TypeError("StoreModule.forRoot() called twice. Feature modules should use StoreModule.forFeature() instead.");return"guarded"}function M(...J){return{reducer:J.pop(),types:J.map(We=>We.type)}}function Y(J,...ge){const Ce=new Map;for(const We of ge)for(const pt of We.types){const dt=Ce.get(pt);Ce.set(pt,dt?(Mt,Nt)=>We.reducer(dt(Mt,Nt),Nt):We.reducer)}return function(We=J,pt){const dt=Ce.get(pt.type);return dt?dt(We,pt):We}}},3271:(it,K,u)=>{u.d(K,{uQ:()=>Z,pl:()=>b,jE:()=>m,ny:()=>_,$v:()=>R});var e=u(1670),n=u(9263),y=u(7451),x=u(635),$=u(9337),c=u(3192),d=u(6102),p=u(8433),z=u(2341),S=(()=>{return(Ee=S||(S={})).Login="[Auth] Login",Ee.Logout="[Auth] Logout",Ee.CompleteAuthentication="[Auth] CompleteAuthentication",Ee.SetUser="[Auth] SetUser",S;var Ee})();class V{constructor(){this.type=S.Login}}class N{constructor(){this.type=S.Logout}}class U{constructor(){this.type=S.CompleteAuthentication}}class H{constructor(se){this.payload=se,this.type=S.SetUser}}var Z=Object.freeze({__proto__:null,get AuthActionTypes(){return S},Login:V,Logout:N,CompleteAuthentication:U,SetUser:H,fromAuthActions:{Login:V,Logout:N,CompleteAuthentication:U,SetUser:H}});const G={user:void 0,cookies:new Map};function X(Ee=G,se){switch(se.type){case S.SetUser:Ee={...Ee,user:se.payload};break;case S.Logout:Ee={...Ee,user:void 0}}return Ee}const ve=(0,n.ZF)("auth"),Le={getUser:(0,n.P1)(ve,Ee=>Ee.user)};let m=(()=>{class Ee{constructor(ze){this.store=ze,this.getUser$=this.store.pipe((0,n.Ys)(Le.getUser)),this.token$=this.store.pipe((0,n.Ys)(Le.getUser),(0,x.U)(Ge=>Ge?`${Ge.token_type} ${Ge.access_token}`:void 0))}login(){this.store.dispatch(new V)}logout(){this.store.dispatch(new N)}setUser(ze){this.store.dispatch(new H(ze))}completeAuthentication(){this.store.dispatch(new U)}}return Ee.\u0275fac=function(ze){return new(ze||Ee)(y.\u0275\u0275inject(n.yh))},Ee.\u0275prov=y.\u0275\u0275defineInjectable({token:Ee,factory:Ee.\u0275fac,providedIn:"root"}),Ee})();const P={PublicUserProfile:{entityName:"PublicUserProfile"}};let b=(()=>{class Ee{constructor(ze,Ge,xe,qe){this.authFacade=ze,this.router=Ge,this.route=xe,this.platformId=qe}ngOnInit(){var ze=this;return(0,e.Z)(function*(){ze.authFacade.completeAuthentication(),ze.router.navigate(["/playground"],{queryParams:{cacheBuster:(0,d.Z)()}})})()}}return Ee.\u0275fac=function(ze){return new(ze||Ee)(y.\u0275\u0275directiveInject(m),y.\u0275\u0275directiveInject(p.Router),y.\u0275\u0275directiveInject(p.ActivatedRoute),y.\u0275\u0275directiveInject(y.PLATFORM_ID))},Ee.\u0275cmp=y.\u0275\u0275defineComponent({type:Ee,selectors:[["classifieds-ui-auth-callback"]],decls:2,vars:0,template:function(ze,Ge){1&ze&&(y.\u0275\u0275elementStart(0,"p"),y.\u0275\u0275text(1,"auth-callback works!"),y.\u0275\u0275elementEnd())},styles:[""]}),Ee})(),_=(()=>{class Ee{constructor(ze){ze.registerMetadataMap(P)}static forRoot(){return{ngModule:Ee,providers:[m]}}}return Ee.\u0275fac=function(ze){return new(ze||Ee)(y.\u0275\u0275inject(z.f0))},Ee.\u0275mod=y.\u0275\u0275defineNgModule({type:Ee}),Ee.\u0275inj=y.\u0275\u0275defineInjector({imports:[[c.CommonModule,n.Aw.forFeature("auth",X)]]}),Ee})(),R=(()=>{class Ee{constructor(ze,Ge){this.authFacade=ze,this.router=Ge}intercept(ze,Ge){return Ge.handle(ze).pipe((0,$.b)({error:xe=>{}}))}}return Ee.\u0275fac=function(ze){return new(ze||Ee)(y.\u0275\u0275inject(m),y.\u0275\u0275inject(p.Router))},Ee.\u0275prov=y.\u0275\u0275defineInjectable({token:Ee,factory:Ee.\u0275fac}),Ee})()},6088:(it,K,u)=>{u.d(K,{Yz:()=>z,NR:()=>V,F5:()=>S});var e=u(7451),n=u(3599),y=u(2341),x=u(635),$=u(9337),c=u(3271),d=u(7478);let p=(()=>{class N{constructor(H,Q){this.actions$=H,this.entityActionFactory=Q,this.setUser=(0,n.GW)(()=>this.actions$.pipe((0,n.l4)(c.uQ.AuthActionTypes.SetUser),(0,x.U)(()=>this.entityActionFactory.create("Cookie",y.WD.QUERY_ALL)))),this.loadCookies$=(0,n.GW)(()=>this.actions$.pipe((0,y.Qo)("Cookie"),(0,y.TR)([y.WD.QUERY_ALL_SUCCESS]),(0,$.b)(Z=>console.log(Z.payload.data)),(0,$.b)(Z=>{Z.payload.data.forEach(ue=>d.set(ue.name,ue.value,{expires:new Date((new Date).getTime()+36e5)}))})),{dispatch:!1})}}return N.\u0275fac=function(H){return new(H||N)(e.\u0275\u0275inject(n.eX),e.\u0275\u0275inject(y.xb))},N.\u0275prov=e.\u0275\u0275defineInjectable({token:N,factory:N.\u0275fac}),N})(),z=(()=>{class N{}return N.\u0275fac=function(H){return new(H||N)},N.\u0275mod=e.\u0275\u0275defineNgModule({type:N}),N.\u0275inj=e.\u0275\u0275defineInjector({imports:[[n.sQ.forFeature([p])]]}),N})();class S{constructor(U){U&&(this.identityPoolId=U.identityPoolId,this.region=U.region,this.userPoolId=U.userPoolId)}}const V=new e.InjectionToken("CognitoSettings")},9367:(it,K,u)=>{u.d(K,{UG:()=>c,$M:()=>z,D5:()=>V,LS:()=>$});var e=u(7451),n=u(6853),y=u(745),x=u(2063);let $=(()=>{class N{}return N.\u0275fac=function(H){return new(H||N)},N.\u0275prov=e.\u0275\u0275defineInjectable({token:N,factory:N.\u0275fac,providedIn:"root"}),N})();class c extends n.Plugin{constructor(U){super(U),U&&(this.build=U.build)}}const d=N=>()=>new Promise(U=>{N.build(),U()});let z=(()=>{class N extends n.BasePluginManager{constructor(H,Q){super(H,Q)}pluginDef(){return(0,y.of)(new n.PluginDef({name:"bridgebuilder"}))}}return N.\u0275fac=function(H){return new(H||N)(e.\u0275\u0275inject(n.PluginConfigurationManager),e.\u0275\u0275inject(x.ModuleLoaderService))},N.\u0275prov=e.\u0275\u0275defineInjectable({token:N,factory:N.\u0275fac,providedIn:"root"}),N})(),S=(()=>{class N{constructor(H){this.bpm=H}build(){try{console.log("build bridge..."),this.bpm.getPlugins().subscribe(H=>{Array.from(H).forEach(([Q,Z])=>{Z.build(),console.log("bridge build: "+Q)})}),console.log("bridge built.")}catch{}}}return N.\u0275fac=function(H){return new(H||N)(e.\u0275\u0275inject(z))},N.\u0275prov=e.\u0275\u0275defineInjectable({token:N,factory:N.\u0275fac,providedIn:"root"}),N})(),V=(()=>{class N{constructor(H){console.log("bridge constructor"),H.register(new c({id:"test",title:"Test",build:()=>{$.prototype.sayHello2=()=>{alert("say hello 2")}}}))}}return N.\u0275fac=function(H){return new(H||N)(e.\u0275\u0275inject(z))},N.\u0275mod=e.\u0275\u0275defineNgModule({type:N}),N.\u0275inj=e.\u0275\u0275defineInjector({providers:[{provide:e.APP_INITIALIZER,useFactory:d,deps:[S],multi:!0}],imports:[[]]}),N})()},8448:(it,K,u)=>{u.d(K,{tT:()=>B,xv:()=>Ut,Lu:()=>st,eO:()=>Ye,UV:()=>g,Js:()=>ht,a$:()=>Qe,$U:()=>Ue,GO:()=>qt,NH:()=>Me});var e=u(7451),n=u(3192),y=u(8163),x=u(2508),$=u(1276),c=u(8698),d=u(919),p=u(8193),z=u(6853),S=u(9367),V=u(635),N=u(9337),U=u(2673),H=u(9295),Q=u(116),Z=u(4503),ue=u(4744),G=u(1989),X=u(8714),ee=u(6317),ve=u(5330),Oe=u(745),Le=u(6646),be=u(6562),m=u(6067),P=u(1640),b=u(5276),_=u(5074),R=u(7371),E=u(207),ne=u(2062),me=u(1611),Ee=u(9263),se=u(2063),ze=u(6722),Ge=u(8562),xe=u(6102);function qe(Lt,zt){if(1&Lt&&(e.\u0275\u0275elementStart(0,"mat-option",3),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&Lt){const $e=zt.$implicit;e.\u0275\u0275property("value",$e),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate($e)}}function Xe(Lt,zt){if(1&Lt&&(e.\u0275\u0275elementStart(0,"mat-option",5),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&Lt){const $e=zt.$implicit;e.\u0275\u0275property("value",$e.value.name),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate($e.value.title)}}function lt(Lt,zt){}const He=new e.InjectionToken("ContextPlugin");class Ye extends z.Plugin{constructor(zt){super(zt),this.global=!1,zt&&(this.name=this.id,this.title=zt.title,this.baseObject=zt.baseObject,this.resolver=zt.resolver,this.global=void 0!==zt.global&&zt.global,this.internal=void 0!==zt.internal&&zt.internal,this.group=void 0!==zt.group?zt.group:void 0,zt.editorComponent&&(this.editorComponent=zt.editorComponent))}}class ht{constructor(zt){this.name=zt.name,this.adaptor=zt.adaptor,zt.plugin&&(this.plugin=zt.plugin),"rest"===this.adaptor?this.rest=new p.kr(zt.rest):"snippet"===this.adaptor||"json"===this.adaptor?this.snippet=new d.pP(zt.snippet):"data"===this.adaptor?this.data=zt.data:"token"===this.adaptor?this.tokens=new Map([...zt.tokens]):"datasource"===this.adaptor&&(this.datasource=new p.Yh(zt.datasource))}}class Se{constructor(zt){zt&&(this.name=zt.name)}}let he=(()=>{class Lt{constructor($e,Ot){this.fb=$e,this.attributeSerializer=Ot,this.contexts=[],this.settings$=new ee.X(void 0),this.formGroup=this.fb.group({name:this.fb.control("",[x.kI.required])}),this.settingsSub=this.settings$.pipe((0,V.U)(Ke=>Ke?new Se(this.attributeSerializer.deserializeAsObject(Ke)):void 0)).subscribe(Ke=>{Ke?this.formGroup.get("name").setValue(Ke.name):this.formGroup.get("name").setValue("")}),this.onTouched=()=>{}}set settings($e){this.settings$.next($e)}writeValue($e){$e&&this.formGroup.setValue($e,{emitEvent:!1})}registerOnChange($e){this.formGroup.valueChanges.subscribe($e)}registerOnTouched($e){this.onTouched=$e}setDisabledState($e){$e?this.formGroup.disable():this.formGroup.enable()}validate($e){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}}}return Lt.\u0275fac=function($e){return new($e||Lt)(e.\u0275\u0275directiveInject(x.qu),e.\u0275\u0275directiveInject(b.AttributeSerializerService))},Lt.\u0275cmp=e.\u0275\u0275defineComponent({type:Lt,selectors:[["classifieds-ui-context-datasource-form"]],inputs:{contexts:"contexts",settings:"settings"},features:[e.\u0275\u0275ProvidersFeature([{provide:x.JU,useExisting:(0,e.forwardRef)(()=>Lt),multi:!0},{provide:x.Cf,useExisting:(0,e.forwardRef)(()=>Lt),multi:!0}])],decls:6,vars:2,consts:[[3,"formGroup"],["required","","formControlName","name"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function($e,Ot){1&$e&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"mat-form-field"),e.\u0275\u0275elementStart(2,"mat-label"),e.\u0275\u0275text(3,"Context"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"mat-select",1),e.\u0275\u0275template(5,qe,2,2,"mat-option",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&$e&&(e.\u0275\u0275property("formGroup",Ot.formGroup),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",Ot.contexts))},directives:[_.KE,R.gD,E.ey,x.JL,x.sg,_.hX,x.Q7,x.JJ,x.u,n.NgForOf],styles:[""]}),Lt})(),pe=(()=>{class Lt{constructor($e){this.controlContainer=$e,this.contexts=[],this.settings=[]}}return Lt.\u0275fac=function($e){return new($e||Lt)(e.\u0275\u0275directiveInject(x.gN))},Lt.\u0275cmp=e.\u0275\u0275defineComponent({type:Lt,selectors:[["classifieds-ui-context-datasource"]],inputs:{contexts:"contexts",settings:"settings"},decls:2,vars:3,consts:[[3,"formGroup"],["formControlName","settings",3,"contexts","settings"]],template:function($e,Ot){1&$e&&(e.\u0275\u0275elementContainerStart(0,0),e.\u0275\u0275element(1,"classifieds-ui-context-datasource-form",1),e.\u0275\u0275elementContainerEnd()),2&$e&&(e.\u0275\u0275property("formGroup",Ot.controlContainer.control),e.\u0275\u0275advance(1),e.\u0275\u0275property("contexts",Ot.contexts)("settings",Ot.settings))},directives:[he,x.JL,x.sg,x.JJ,x.u],encapsulation:2}),Lt})(),Fe=(()=>{class Lt{constructor($e,Ot,Ke){this.fb=$e,this.controlContainer=Ot,this.attributeSerializer=Ke}ngOnInit(){this.controlContainer.control.addControl("adaptor",this.fb.control("datasource",x.kI.required)),this.controlContainer.control.addControl("datasource",this.fb.control("")),this.controlContainer.control.addControl("_proxy",this.fb.control("")),this.proxyControlSub=this.controlContainer.control.get("_proxy").valueChanges.pipe((0,V.U)($e=>$e?new p.Yh({...$e,settings:this.attributeSerializer.serialize($e.settings,"settings").attributes}):new p.Yh),(0,N.b)($e=>this.controlContainer.control.get("datasource").setValue($e))).subscribe()}}return Lt.\u0275fac=function($e){return new($e||Lt)(e.\u0275\u0275directiveInject(x.qu),e.\u0275\u0275directiveInject(x.gN),e.\u0275\u0275directiveInject(b.AttributeSerializerService))},Lt.\u0275cmp=e.\u0275\u0275defineComponent({type:Lt,selectors:[["classifieds-ui-datasource-context-editor"]],viewQuery:function($e,Ot){if(1&$e&&e.\u0275\u0275viewQuery(p.df,7),2&$e){let Ke;e.\u0275\u0275queryRefresh(Ke=e.\u0275\u0275loadQuery())&&(Ot.datasourceFormComp=Ke.first)}},decls:2,vars:1,consts:[[3,"formGroup"],["formControlName","_proxy"]],template:function($e,Ot){1&$e&&(e.\u0275\u0275elementContainerStart(0,0),e.\u0275\u0275element(1,"classifieds-ui-datasource-form",1),e.\u0275\u0275elementContainerEnd()),2&$e&&e.\u0275\u0275property("formGroup",Ot.controlContainer.control)},directives:[p.df,x.JL,x.sg,x.JJ,x.u],encapsulation:2}),Lt})();const Je=Lt=>new Ye({id:"route",name:"route",title:"Route",global:!0,baseObject:{path:"",arg0:"",arg2:"",arg3:"",arg4:"",arg5:""},resolver:Lt});let D=(()=>{class Lt{constructor($e){this.routerStore=$e}resolve($e,Ot){const{selectCurrentRoute:Ke}=(0,me.Ug)(rt=>rt.router);return this.routerStore.pipe((0,Ee.Ys)(Ke),(0,V.U)(rt=>({path:`/pages/panelpage/${rt.params.panelPageId}`})))}}return Lt.\u0275fac=function($e){return new($e||Lt)(e.\u0275\u0275inject(Ee.yh))},Lt.\u0275prov=e.\u0275\u0275defineInjectable({token:Lt,factory:Lt.\u0275fac}),Lt})(),C=(()=>{class Lt{constructor($e){this.viewContainerRef=$e}}return Lt.\u0275fac=function($e){return new($e||Lt)(e.\u0275\u0275directiveInject(e.ViewContainerRef))},Lt.\u0275dir=e.\u0275\u0275defineDirective({type:Lt,selectors:[["","classifiedsUiContextEditorHost",""]]}),Lt})(),g=(()=>{class Lt extends z.BasePluginManager{constructor($e,Ot){super($e,Ot)}pluginDef(){return(0,Oe.of)(new z.PluginDef({name:"context"}))}}return Lt.\u0275fac=function($e){return new($e||Lt)(e.\u0275\u0275inject(z.PluginConfigurationManager),e.\u0275\u0275inject(se.ModuleLoaderService))},Lt.\u0275prov=e.\u0275\u0275defineInjectable({token:Lt,factory:Lt.\u0275fac,providedIn:"root"}),Lt})(),B=(()=>{class Lt{constructor($e,Ot,Ke){this.fb=$e,this.componentFactoryResolver=Ot,this.cpm=Ke,this.contextForm=this.fb.group({name:this.fb.control("",x.kI.required),plugin:this.fb.control("",x.kI.required)}),this.context$=new ee.X(void 0),this.onTouched=()=>{}}set context($e){this.context$.next($e)}ngOnInit(){this.contextPlugins=this.cpm.getPlugins().pipe((0,V.U)($e=>new Map(Array.from($e).filter(([Ot,Ke],rt)=>!Ke.internal).map(([Ot,Ke],rt)=>[Ke.name,Ke])))),this.contextForm.get("plugin").valueChanges.pipe((0,U.w)($e=>this.cpm.getPlugin($e))).subscribe($e=>{$e.editorComponent?this.renderEditor($e):this.editorHost.viewContainerRef.clear()}),this.context$.pipe((0,Q.h)(()=>!!this.componentRef)).subscribe($e=>{this.componentRef.instance.context=$e})}writeValue($e){$e&&this.contextForm.setValue($e,{emitEvent:!1})}registerOnChange($e){this.contextForm.valueChanges.subscribe($e)}registerOnTouched($e){this.onTouched=$e}setDisabledState($e){$e?this.contextForm.disable():this.contextForm.enable()}validate($e){return this.contextForm.valid?null:{invalidForm:{valid:!1,message:"context is invalid"}}}renderEditor($e){const Ot=this.componentFactoryResolver.resolveComponentFactory($e.editorComponent),Ke=this.editorHost.viewContainerRef;Ke.clear(),this.componentRef=Ke.createComponent(Ot),this.componentRef.instance.context=this.context$.value}}return Lt.\u0275fac=function($e){return new($e||Lt)(e.\u0275\u0275directiveInject(x.qu),e.\u0275\u0275directiveInject(e.ComponentFactoryResolver),e.\u0275\u0275directiveInject(g))},Lt.\u0275cmp=e.\u0275\u0275defineComponent({type:Lt,selectors:[["classifieds-ui-context-form"]],viewQuery:function($e,Ot){if(1&$e&&e.\u0275\u0275viewQuery(C,7),2&$e){let Ke;e.\u0275\u0275queryRefresh(Ke=e.\u0275\u0275loadQuery())&&(Ot.editorHost=Ke.first)}},inputs:{context:"context"},features:[e.\u0275\u0275ProvidersFeature([{provide:x.JU,useExisting:(0,e.forwardRef)(()=>Lt),multi:!0},{provide:x.Cf,useExisting:(0,e.forwardRef)(()=>Lt),multi:!0}])],decls:12,vars:6,consts:[["fxLayout","column",3,"formGroup"],["matInput","","formControlName","name","placeholder","Name","required",""],["required","","formControlName","plugin"],[3,"value",4,"ngFor","ngForOf"],["classifiedsUiContextEditorHost",""],[3,"value"]],template:function($e,Ot){1&$e&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"mat-form-field"),e.\u0275\u0275element(2,"input",1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"mat-form-field"),e.\u0275\u0275elementStart(4,"mat-label"),e.\u0275\u0275text(5,"Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"mat-select",2),e.\u0275\u0275template(7,Xe,2,2,"mat-option",3),e.\u0275\u0275pipe(8,"keyvalue"),e.\u0275\u0275pipe(9,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerStart(10),e.\u0275\u0275template(11,lt,0,0,"ng-template",4),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()),2&$e&&(e.\u0275\u0275property("formGroup",Ot.contextForm),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(8,2,e.\u0275\u0275pipeBind1(9,4,Ot.contextPlugins))))},directives:[_.KE,R.gD,E.ey,ze.xw,x.JL,x.sg,Ge.Nt,x.Fj,x.JJ,x.u,x.Q7,_.hX,n.NgForOf,C],pipes:[n.KeyValuePipe,n.AsyncPipe],styles:[""]}),Lt})(),de=(()=>{class Lt{constructor($e){this.dpm=$e}resolve($e,Ot,Ke){return(0,Oe.of)(new p.qz).pipe((0,V.U)(()=>new p.Yh(Ot)),(0,U.w)(rt=>this.dpm.getPlugin(rt.plugin).pipe((0,V.U)(Be=>({ds:rt,p:Be})))),(0,U.w)(({ds:rt,p:Be})=>Be.fetch({settings:rt.settings,metadata:Ke})),(0,V.U)(rt=>rt))}}return Lt.\u0275fac=function($e){return new($e||Lt)(e.\u0275\u0275inject(p.Ar))},Lt.\u0275prov=e.\u0275\u0275defineInjectable({token:Lt,factory:Lt.\u0275fac}),Lt})(),Me=(()=>{class Lt extends z.BasePluginManager{constructor($e,Ot){super($e,Ot),this.add$=new m.t(1)}pluginDef(){return(0,Oe.of)(new z.PluginDef({name:"resolved_context"}))}register($e){const Ot=this.pluginInstances.has($e.id);super.register($e),Ot||this.add$.next(void 0)}}return Lt.\u0275fac=function($e){return new($e||Lt)(e.\u0275\u0275inject(z.PluginConfigurationManager),e.\u0275\u0275inject(se.ModuleLoaderService))},Lt.\u0275prov=e.\u0275\u0275defineInjectable({token:Lt,factory:Lt.\u0275fac,providedIn:"root"}),Lt})(),Qe=(()=>{class Lt extends class ye{constructor(zt,$e){this.cpm=zt,this.rcm=$e}resolveGlobals(zt=xe.Z()){return this.cpm.getPlugins().pipe((0,V.U)($e=>Array.from($e.values()).filter(Ot=>!0===Ot.global)),(0,U.w)($e=>(0,Le.T)(...$e.map(Ot=>Ot.resolver.resolve(Ot,{}).pipe((0,V.U)(Ke=>[Ot.name,Ke,$e.length])))).pipe((0,Z.R)((Ot,[Ke,rt,Be])=>new Map([...Ot,[`_${Ke}`,rt],["__len",Be]]),new Map([])),(0,Q.h)(Ot=>Ot.size-1==+Ot.get("__len")),(0,V.U)(Ot=>Object.assign({},...[...Ot.entries()].filter(([Ke,rt])=>"__len"!==Ke).map(([Ke,rt])=>({[Ke]:rt})))))))}resolveGlobalsSingle(zt=xe.Z()){return this.cpm.getPlugins().pipe((0,V.U)($e=>Array.from($e.values()).filter(Ot=>!0===Ot.global)),(0,U.w)($e=>(0,Le.T)(...$e.map(Ot=>Ot.resolver.resolve(Ot,{}).pipe((0,V.U)(Ke=>[Ot.name,Ke]))))))}resolveAll(zt,$e=xe.Z()){return(0,Le.T)(...zt.map(Ot=>this.resolve(Ot,$e).pipe((0,V.U)(Ke=>[Ot.name,Array.isArray(Ke)?Ke.length>0?Ke[0]:void 0:Ke])))).pipe((0,Z.R)((Ot,[Ke,rt])=>new Map([...Ot,[Ke,rt]]),new Map),(0,Q.h)(Ot=>Ot.size===zt.length),(0,V.U)(Ot=>Object.assign({},...[...Ot.entries()].map(([Ke,rt])=>({[Ke]:rt})))))}resolveAllSingle(zt,$e=xe.Z()){return(0,Le.T)(...zt.map(Ot=>this.resolve(Ot,$e).pipe((0,V.U)(Ke=>[Ot.name,Array.isArray(Ke)?Ke.length>0?Ke[0]:void 0:Ke])))).pipe((0,V.U)(([Ot,Ke])=>[Ot,Ke]))}resolveMerged(zt,$e=xe.Z()){return this.rcm.getPlugins().pipe((0,U.w)(()=>this.rcm.add$.pipe((0,ue.d)(void 0))),(0,U.w)(()=>this.rcm.getPlugins()),(0,U.w)(Ot=>(0,be.a)([...Array.from(Ot).map(([Ke,rt])=>rt.resolve()),this.resolveGlobals($e),0===zt.length?(0,Oe.of)({}):this.resolveAll(zt,$e)]).pipe((0,G.b)(0),(0,V.U)(Ke=>Ke.reduce((rt,Be)=>({...rt,...Be}),{})))))}resolveMergedSingle(zt,$e=xe.Z()){return 0!==zt.length?this.rcm.getPlugins().pipe((0,U.w)(Ot=>(0,Le.T)(...Array.from(Ot).map(([Ke,rt])=>rt.resolveSingle()),this.resolveGlobalsSingle(),this.resolveAllSingle(zt)))):this.rcm.getPlugins().pipe((0,U.w)(Ot=>(0,Le.T)(...Array.from(Ot).map(([Ke,rt])=>rt.resolveSingle()),this.resolveGlobalsSingle())))}resolve(zt,$e=xe.Z()){return zt.plugin?this.cpm.getPlugin(zt.plugin).pipe((0,U.w)(Ot=>Ot.resolver.resolve(Ot,this.getDataObject(zt),new Map([["name",zt.name]])))):(0,Oe.of)(this.getDataObject(zt))}getDataObject(zt){switch(zt.adaptor){case"rest":return zt.rest;case"snippet":return zt.snippet;case"json":return JSON.parse(zt.snippet.content);case"data":return zt.data;case"token":return zt.tokens;case"datasource":return zt.datasource;default:return}}}{constructor($e,Ot){super($e,Ot)}}return Lt.\u0275fac=function($e){return new($e||Lt)(e.\u0275\u0275inject(g),e.\u0275\u0275inject(Me))},Lt.\u0275prov=e.\u0275\u0275defineInjectable({token:Lt,factory:Lt.\u0275fac,providedIn:"root"}),Lt})(),st=(()=>{class Lt{constructor($e,Ot,Ke,rt,Be,et,wt,Ft,dn){$e.forEach(Vt=>rt.register(Vt)),Be.register(((Lt,zt)=>new S.UG({id:"context",title:"Context",build:()=>{S.LS.prototype.resolveContext=($e,Ot)=>new Promise(Ke=>{Lt.getPlugin($e).pipe((0,U.w)(rt=>rt.resolver.resolve(rt,Ot).pipe((0,H.q)(1)))).subscribe(rt=>{Ke(rt)})}),S.LS.prototype.resolveMergedContext=$e=>new Promise(Ot=>{zt.resolveMerged($e).pipe((0,N.b)(Ke=>Ot(Ke)),(0,H.q)(1)).subscribe()})}}))(rt,Ot)),wt.register(((Lt,zt)=>new X.BL({id:"context",title:"Context",evalParam:({param:$e,metadata:Ot})=>{const Ke=$e.mapping.context&&""!==$e.mapping.context?new ht(Ot.get("contexts").find(rt=>rt.name===$e.mapping.context)):void 0;return Ke?Lt.resolve(Ke).pipe((0,H.q)(1),(0,U.w)(rt=>(0,ve.s)(()=>$e.mapping.value&&""!==$e.mapping.value,(0,Oe.of)(rt).pipe((0,V.U)(Be=>zt.generateGenericTokens(Array.isArray(Be)?Be[0]:Be)),(0,V.U)(Be=>zt.replaceTokens(`[${$e.mapping.value}]`,Be)),(0,H.q)(1)),(0,Oe.of)(Array.isArray(rt)?rt[0]:rt)).pipe((0,H.q)(1)))):(0,Oe.of)()},usedContexts:({param:$e})=>(0,Oe.of)([$e.mapping.context])}))(Ot,Ke)),et.register(((Lt,zt)=>new p.Sn({id:"context",title:"Context",editor:pe,fetch:({settings:$e,metadata:Ot})=>(0,Oe.of)(new p.qz).pipe((0,V.U)(()=>new Se(zt.deserializeAsObject($e))),(0,V.U)(Ke=>Ot.get("contexts").find(rt=>rt.name===Ke.name)),(0,U.w)(Ke=>Lt.resolve(Ke).pipe((0,V.U)(rt=>rt instanceof p.qz?rt:new p.qz({results:Array.isArray(rt)?rt:[rt]})),(0,H.q)(1)))),getBindings:({settings:$e})=>(0,Oe.of)([]).pipe((0,V.U)(()=>new Se(zt.deserializeAsObject($e))),(0,V.U)(Ke=>[new ne.ContentBinding({id:Ke.name,type:"context"})]))}))(Ot,Ft)),rt.register((Lt=>{const zt={dataset:new p.qz};return new Ye({id:"datasource",name:"datasource",title:"Datasource",baseObject:zt,resolver:Lt,editorComponent:Fe})})(dn))}}return Lt.\u0275fac=function($e){return new($e||Lt)(e.\u0275\u0275inject(He),e.\u0275\u0275inject(Qe),e.\u0275\u0275inject(c.G),e.\u0275\u0275inject(g),e.\u0275\u0275inject(S.$M),e.\u0275\u0275inject(p.Ar),e.\u0275\u0275inject(X.bL),e.\u0275\u0275inject(b.AttributeSerializerService),e.\u0275\u0275inject(de))},Lt.\u0275mod=e.\u0275\u0275defineNgModule({type:Lt}),Lt.\u0275inj=e.\u0275\u0275defineInjector({providers:[{provide:D,useClass:D},{provide:de,useClass:de},{provide:He,useFactory:Je,multi:!0,deps:[D]}],imports:[[n.CommonModule,x.UX,x.u5,$.MaterialModule,y.o9,c.W,d.J9,p.zG]]}),Lt})(),Ut=(()=>{class Lt{constructor($e){this.contextPlugins=$e}getAll($e){return void 0===$e?this.contextPlugins:this.contextPlugins.filter($e?Ot=>Ot.global:Ot=>!Ot.global)}getAllObjects(){return this.contextPlugins.map($e=>$e.baseObject)}lookupContext($e){return this.contextPlugins.find(Ot=>Ot.name===$e)}register($e){this.contextPlugins.push($e)}}return Lt.\u0275fac=function($e){return new($e||Lt)(e.\u0275\u0275inject(He))},Lt.\u0275prov=e.\u0275\u0275defineInjectable({token:Lt,factory:Lt.\u0275fac,providedIn:"root"}),Lt})();class qt extends z.Plugin{constructor(zt){super(zt),this.resolve=zt.resolve,this.resolveSingle=zt.resolveSingle}}let Ue=(()=>{class Lt{constructor($e){this.ppm=$e}extractContexts($e){return(0,P.D)($e.map(Ot=>this.ppm.getPlugin(Ot.mapping.type).pipe((0,U.w)(Ke=>(0,ve.s)(()=>!!Ke&&!!Ke.usedContexts,Ke&&Ke.usedContexts?Ke.usedContexts({param:Ot,metadata:new Map([])}):(0,Oe.of)([]),(0,Oe.of)([])))))).pipe((0,V.U)(Ot=>Ot.reduce((Ke,rt)=>[...Ke,...rt.filter(Be=>!Ke.includes(Be))],[])))}}return Lt.\u0275fac=function($e){return new($e||Lt)(e.\u0275\u0275inject(X.bL))},Lt.\u0275prov=e.\u0275\u0275defineInjectable({token:Lt,factory:Lt.\u0275fac,providedIn:"root"}),Lt})()},2044:(it,K,u)=>{u.d(K,{e8:()=>se,YS:()=>lt,f0:()=>He,XN:()=>Se,Z5:()=>Ye});var e=u(3192),n=u(7451),y=u(2508),x=u(8448),$=u(8714),c=u(1276),d=u(6317),p=u(6562),z=u(745),S=u(1640),V=u(5330),N=u(3336),U=u(6067),H=u(635),Q=u(9337),Z=u(116),ue=u(3350),G=u(1989),X=u(2673),ee=u(9295),ve=u(4744),Oe=u(3670),Le=u(6853),be=u(5276),m=u(5074),P=u(8562),b=u(8193),_=u(9376),R=u(6102),E=u(2063),ne=u(78),me=u(8055),Ee=u(2727);class se extends Le.Plugin{constructor(pe){super(pe),pe&&(this.create=pe.create,this.read=pe.read,this.update=pe.update,this.delete=pe.delete,pe.query&&(this.query=pe.query))}}class ze{constructor(pe){this.options=[],this.params=[],pe&&(this.adaptorName=pe.adaptorName,this.optionsString=pe.optionsString?pe.optionsString:void 0,this.paramsString=pe.paramsString?pe.paramsString:void 0,pe.options&&Array.isArray(pe.options)&&(this.options=pe.options.map(Fe=>new $.dO(Fe))),pe.params&&Array.isArray(pe.params)&&(this.params=pe.params.map(Fe=>new $.dO(Fe))))}}let Ge=(()=>{class he{constructor(Fe,Je){this.fb=Fe,this.attributeSerializer=Je,this.contexts=[],this.settings$=new d.X(void 0),this.datasource$=new d.X(void 0),this.optionValues$=new d.X([]),this.paramValues$=new d.X([]),this.formGroup=this.fb.group({adaptorName:this.fb.control(""),optionsString:this.fb.control(""),paramsString:this.fb.control(""),options:this.fb.control([]),params:this.fb.control([])}),this.settingsSub=this.settings$.pipe((0,H.U)(we=>we?new ze(this.attributeSerializer.deserializeAsObject(we)):void 0),(0,Q.b)(we=>setTimeout(()=>this.datasource$.next(we)))).subscribe(we=>{we?(this.formGroup.get("adaptorName").setValue(we.adaptorName),this.formGroup.get("optionsString").setValue(we.optionsString?we.optionsString:""),this.formGroup.get("paramsString").setValue(we.paramsString?we.paramsString:"")):(this.formGroup.get("adaptorName").setValue(""),this.formGroup.get("optionsString").setValue(""),this.formGroup.get("paramsString").setValue(""),setTimeout(()=>this.optionValues$.next([]),2),setTimeout(()=>this.optionValues$.next([]),2))}),this.datasourceOptionsSub=(0,p.a)([this.datasource$,this.formGroup.get("optionsString").valueChanges]).pipe((0,Z.h)(([we])=>void 0!==we),(0,ue.g)(1),(0,Q.b)(([we])=>this.optionValues$.next(we.options))).subscribe(),this.datasourceParamsSub=(0,p.a)([this.datasource$,this.formGroup.get("paramsString").valueChanges]).pipe((0,Z.h)(([we])=>void 0!==we),(0,ue.g)(1),(0,Q.b)(([we])=>this.paramValues$.next(we.params))).subscribe(),this.optionsStringChangeSub=this.formGroup.get("optionsString").valueChanges.pipe((0,G.b)(500)).subscribe(we=>{const De=Oe.parse("?"+we);this.optionsParsed=De}),this.paramsStringChangeSub=this.formGroup.get("paramsString").valueChanges.pipe((0,G.b)(500)).subscribe(we=>{const De=Oe.parse("?"+we);this.paramsParsed=De}),this.onTouched=()=>{}}set settings(Fe){this.settings$.next(Fe)}ngOnInit(){}writeValue(Fe){Fe&&this.formGroup.setValue(Fe,{emitEvent:!1})}registerOnChange(Fe){this.formGroup.valueChanges.subscribe(Fe)}registerOnTouched(Fe){this.onTouched=Fe}setDisabledState(Fe){Fe?this.formGroup.disable():this.formGroup.enable()}validate(Fe){return this.formGroup.valid?null:this.formGroup.errors}}return he.\u0275fac=function(Fe){return new(Fe||he)(n.\u0275\u0275directiveInject(y.qu),n.\u0275\u0275directiveInject(be.AttributeSerializerService))},he.\u0275cmp=n.\u0275\u0275defineComponent({type:he,selectors:[["classifieds-ui-crud-adaptor-datasource-form"]],inputs:{contexts:"contexts",settings:"settings"},features:[n.\u0275\u0275ProvidersFeature([{provide:y.JU,useExisting:(0,n.forwardRef)(()=>he),multi:!0},{provide:y.Cf,useExisting:(0,n.forwardRef)(()=>he),multi:!0}])],decls:14,vars:7,consts:[[3,"formGroup"],["matInput","","placeholder","Adaptor","formControlName","adaptorName","required",""],[1,"options-container"],["matInput","","placeholder","Options","formControlName","optionsString"],["formControlName","options",3,"params","paramValues","contexts"],[1,"params-container"],["matInput","","placeholder","Params","formControlName","paramsString"],["formControlName","params",3,"params","paramValues","contexts"]],template:function(Fe,Je){1&Fe&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275elementStart(1,"div"),n.\u0275\u0275elementStart(2,"mat-form-field"),n.\u0275\u0275element(3,"input",1),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"div",2),n.\u0275\u0275elementStart(5,"div"),n.\u0275\u0275elementStart(6,"mat-form-field"),n.\u0275\u0275element(7,"input",3),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(8,"classifieds-ui-params-form",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(9,"div",5),n.\u0275\u0275elementStart(10,"div"),n.\u0275\u0275elementStart(11,"mat-form-field"),n.\u0275\u0275element(12,"input",6),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(13,"classifieds-ui-params-form",7),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&Fe&&(n.\u0275\u0275property("formGroup",Je.formGroup),n.\u0275\u0275advance(8),n.\u0275\u0275property("params",Je.optionsParsed)("paramValues",Je.optionValues$.value)("contexts",Je.contexts),n.\u0275\u0275advance(5),n.\u0275\u0275property("params",Je.paramsParsed)("paramValues",Je.paramValues$.value)("contexts",Je.contexts))},directives:[m.KE,$.Op,y.JL,y.sg,P.Nt,y.Fj,y.JJ,y.u,y.Q7],styles:[""]}),he})(),xe=(()=>{class he{constructor(Fe){this.controlContainer=Fe,this.settings=[],this.contexts=[]}}return he.\u0275fac=function(Fe){return new(Fe||he)(n.\u0275\u0275directiveInject(y.gN))},he.\u0275cmp=n.\u0275\u0275defineComponent({type:he,selectors:[["classifieds-ui-crud-adaptor-datasource"]],inputs:{settings:"settings",contexts:"contexts"},decls:2,vars:3,consts:[[3,"formGroup"],["formControlName","settings",3,"settings","contexts"]],template:function(Fe,Je){1&Fe&&(n.\u0275\u0275elementContainerStart(0,0),n.\u0275\u0275element(1,"classifieds-ui-crud-adaptor-datasource-form",1),n.\u0275\u0275elementContainerEnd()),2&Fe&&(n.\u0275\u0275property("formGroup",Je.controlContainer.control),n.\u0275\u0275advance(1),n.\u0275\u0275property("settings",Je.settings)("contexts",Je.contexts))},directives:[Ge,y.JL,y.sg,y.JJ,y.u],encapsulation:2}),he})(),lt=(()=>{class he extends Le.BasePluginManager{constructor(Fe,Je){super(Fe,Je)}pluginDef(){return(0,z.of)(new Le.PluginDef({name:"crud_adaptor"}))}}return he.\u0275fac=function(Fe){return new(Fe||he)(n.\u0275\u0275inject(Le.PluginConfigurationManager),n.\u0275\u0275inject(E.ModuleLoaderService))},he.\u0275prov=n.\u0275\u0275defineInjectable({token:he,factory:he.\u0275fac,providedIn:"root"}),he})(),He=(()=>{class he{constructor(Fe){this.crud=Fe,this.cachedCollectionQueries=[],this.cachedCollectionIgnore={p:{create:void 0,update:void 0,delete:void 0,query:void 0,read:void 0},input:{identity:void 0}}}evaluatePlugins({object:Fe,plugins:Je,op:we,parentObject:De}){const le=Object.keys(Je).filter(D=>!Je[D].ops||Je[D].ops.includes(we)).map(D=>this.crud.getPlugin(D).pipe((0,H.U)(C=>({p:C,params:Je[D].params?Object.keys(Je[D].params).reduce((g,B)=>({...g,[B]:Je[D].params[B]instanceof $.dO?Je[D].params[B]:new $.dO({flags:[],mapping:{type:"static",value:Je[D].params[B],context:void 0,testValue:Je[D].params[B]}})}),{}):{}})),(0,X.w)(({p:C,params:g})=>C[we]({rule:void 0,object:Fe,parentObject:De,params:g,identity:({object:B,parentObject:de})=>(0,z.of)({identity:B.id?B.id:de?de.id:void 0})})),(0,X.w)(C=>(0,V.s)(()=>Je[D].plugins&&0!==Object.keys(Je[D].plugins).length,Je[D].plugins&&0!==Object.keys(Je[D].plugins).length?this.evaluatePlugins({plugins:Je[D].plugins,object:C.entity?C.entity:Fe,parentObject:C.originalEntity?C.originalEntity:Fe,op:we}):(0,z.of)(C),(0,z.of)(C)))));return(0,S.D)(le).pipe((0,H.U)(()=>Fe))}evaluateCollectionPlugins({query:Fe,objects:Je,plugins:we,op:De,parentObjects:ut}){console.log("evaluate collection plugins");const D=Object.keys(we).filter(C=>!we[C].ops||we[C].ops.includes(De)).map(C=>this.crud.getPlugin(C).pipe((0,H.U)(g=>({p:g,params:we[C].params?Object.keys(we[C].params).reduce((B,de)=>({...B,[de]:we[C].params[de]instanceof $.dO?we[C].params[de]:new $.dO({flags:[],mapping:{type:"static",value:we[C].params[de],context:void 0,testValue:we[C].params[de]}})}),{}):{}})),(0,X.w)(({p:g,params:B})=>this.buildQueryRule({params:Fe,config:we[C]}).pipe((0,H.U)(({rule:de})=>({p:g,params:B,rule:de})))),(0,X.w)(({p:g,params:B,rule:de})=>this.flightAndCacheAwareCollectionQuery({p:g,input:{rule:de,objects:Je,parentObjects:ut,params:B,identity:({object:ye,parentObject:Me})=>(0,z.of)({identity:ye.id?ye.id:Me?Me.id:void 0})}}).pipe((0,Q.b)(()=>console.log("end of crud query call")))),(0,X.w)(g=>(0,V.s)(()=>we[C].plugins&&0!==Object.keys(we[C].plugins).length,this.evaluateCollectionPlugins({query:Fe,plugins:we[C].plugins&&0!==Object.keys(we[C].plugins).length?we[C].plugins:{},objects:g.entities?g.entities:Je,parentObjects:g.originalEntities?g.originalEntities:Je,op:De}),(0,z.of)(g))),(0,Q.b)(g=>console.log("end of op",g))));return 1===D.length?D[0].pipe((0,H.U)(C=>[...C.entities])):(0,S.D)(D).pipe((0,H.U)(C=>C.reduce((g,B)=>[...g,...B.entities],[])),(0,ve.d)([]))}buildQueryRule({params:Fe,config:Je}){return new N.y(we=>{const De=[];"string"==typeof Fe&&Fe.split("&").map(D=>D.split("=",2)).reduce((D,[C,g])=>new Map([...Array.from(D).filter(([B,de])=>B!==C),[C,[...D.has(C)?D.get(C):[],g]]]),new Map).forEach((D,C)=>De.push({any:D.map(g=>({fact:"identity"===C?"identity":"entity",operator:Je.queryMappings&&Je.queryMappings.has(C)&&Je.queryMappings.get(C).defaultOperator?Je.queryMappings.get(C).defaultOperator:"equal",value:g,..."identity"===C?{}:{path:`$.${C}`}}))}));const ut=De.length>0?new ne.Rule({conditions:{all:De},event:{type:"visible"}}):void 0;we.next({rule:ut}),we.complete()})}flightAndCacheAwareCollectionQuery(Fe){let Je=this.cachedCollectionQueries.findIndex(({p:we,input:De})=>{const ut=(0,me.getDiff)({...Fe.p,...this.cachedCollectionIgnore.p},{...we,...this.cachedCollectionIgnore.p}),le=(0,me.getDiff)({...Fe.input,...this.cachedCollectionIgnore.input},{...De,...this.cachedCollectionIgnore.input});return 0===ut.length&&0===le.length});return-1===Je&&(this.cachedCollectionQueries.push({p:Fe.p,input:Fe.input,query$:new U.t}),Je=this.cachedCollectionQueries.length-1,Fe.p.query(Fe.input).pipe((0,Q.b)(we=>this.cachedCollectionQueries[Je].query$.next(we)),(0,ee.q)(1)).subscribe()),this.cachedCollectionQueries[Je].query$.pipe((0,ee.q)(1))}}return he.\u0275fac=function(Fe){return new(Fe||he)(n.\u0275\u0275inject(lt))},he.\u0275prov=n.\u0275\u0275defineInjectable({token:he,factory:he.\u0275fac,providedIn:"root"}),he})(),Ye=(()=>{class he{constructor(Fe,Je,we,De,ut,le,D,C){Fe.register(((he,pe,Fe,Je,we,De)=>new b.Sn({id:"crud_adaptor",title:"Crud Adaptor",editor:xe,fetch:({settings:ut,metadata:le})=>(0,z.of)(new b.qz).pipe((0,H.U)(()=>pe.deserializeAsObject(ut)),(0,H.U)(D=>new ze(D)),(0,X.w)(D=>Fe.getPlugin(D.adaptorName).pipe((0,H.U)(C=>({plugin:C,ds:D})))),(0,H.U)(({plugin:D,ds:C})=>({plugin:D,ds:C,optionNames:C.optionsString?C.optionsString.split("&").filter(g=>-1!==g.indexOf("=:")).map(g=>g.split("=",2)[1].substr(1)):[]})),(0,X.w)(({plugin:D,ds:C,optionNames:g})=>(0,S.D)([Je.paramValues(C.options.reduce((B,de,ye)=>new Map([...B,[g[ye],de]]),new Map)).pipe((0,H.U)(B=>Array.from(B).reduce((de,[ye,Me])=>({...de,[ye]:Me}),{}))),C.paramsString&&""!==C.paramsString?De.getUrl("?"+C.paramsString,C.params,le).pipe((0,ee.q)(1)):(0,z.of)(void 0)]).pipe((0,H.U)(([B,de])=>({plugin:D,options:B,query:de})))),(0,X.w)(({plugin:D,options:C,query:g})=>we.evaluateCollectionPlugins({plugins:{[D.id]:{params:C}},op:"query",query:g&&g.substr(1)})),(0,H.U)(D=>new b.qz({results:D}))),editorOptions:()=>(0,z.of)(new b.se({fullscreen:!0})),getBindings:({})=>(0,z.of)([])}))(0,ut,Je,le,D,C)),we.register((({crudDataHelper:he,attributeSerializer:pe})=>new _.DR({id:"crud",title:"Crud",editor:xe,send:Fe=>(0,z.of)(new _.yt({})).pipe((0,H.U)(()=>({settings:pe.deserializeAsObject(Fe.settings)})),(0,Q.b)(({settings:Je})=>console.log("crud data duct",Je)),(0,H.U)(({settings:Je})=>({plugins:{[`${Je.adaptorName}`]:{plugin:`${Je.adaptorName}`,ops:["create"],params:`${Je.optionsString}`.split("&").reduce((we,De,ut)=>({...we,[De.split("=",1)[0]]:new $.dO(Je.options[ut])}),{})}}})),(0,X.w)(({plugins:Je})=>he.evaluatePlugins({object:Fe.data,plugins:Je,op:"create",parentObject:{id:R.Z()}})),(0,H.U)(()=>new _.yt({})))}))({crudDataHelper:D,attributeSerializer:ut}))}}return he.\u0275fac=function(Fe){return new(Fe||he)(n.\u0275\u0275inject(b.Ar),n.\u0275\u0275inject(lt),n.\u0275\u0275inject(_.S0),n.\u0275\u0275inject(x.$U),n.\u0275\u0275inject(be.AttributeSerializerService),n.\u0275\u0275inject($.nU),n.\u0275\u0275inject(He),n.\u0275\u0275inject(Ee.o))},he.\u0275mod=n.\u0275\u0275defineNgModule({type:he}),he.\u0275inj=n.\u0275\u0275defineInjector({imports:[[e.CommonModule,y.UX,y.u5,c.MaterialModule,x.Lu,$.bI]]}),he})();class Se{constructor(pe,Fe,Je,we){this.crud=Fe,this.entityDefinitionService=Je,this.crudDataHelperService=we,this._name=`${pe} CrudDataService`,this.entityName=pe}get name(){return this._name}add(pe){const Fe=this.entityDefinitionService.getDefinition(this.entityName).metadata;return this.crudDataHelperService.evaluatePlugins({object:pe,plugins:Fe.crud,op:"create"})}update(pe){const Fe=this.entityDefinitionService.getDefinition(this.entityName).metadata;return this.crudDataHelperService.evaluatePlugins({object:pe.changes,plugins:Fe.crud,op:"update"})}upsert(pe){const Fe=this.entityDefinitionService.getDefinition(this.entityName).metadata;return this.crudDataHelperService.evaluatePlugins({object:pe,plugins:Fe.crud,op:"update"})}delete(pe){const Fe=this.entityDefinitionService.getDefinition(this.entityName).metadata;return this.getById(pe).pipe((0,X.w)(Je=>this.crudDataHelperService.evaluatePlugins({object:Je,plugins:Fe.crud,op:"delete"})),(0,H.U)(()=>pe))}getAll(){const pe=this.entityDefinitionService.getDefinition(this.entityName).metadata;return this.crudDataHelperService.evaluateCollectionPlugins({plugins:pe.crud,op:"query"})}getById(pe){const Fe=this.entityDefinitionService.getDefinition(this.entityName).metadata;return this.crudDataHelperService.evaluateCollectionPlugins({query:`identity=${pe}`,plugins:Fe.crud,op:"query"}).pipe((0,H.U)(Je=>Je&&0!==Je.length?Je[0]:void 0))}getWithQuery(pe){const Fe=this.entityDefinitionService.getDefinition(this.entityName).metadata;return this.crudDataHelperService.evaluateCollectionPlugins({query:pe,plugins:Fe.crud,op:"query"})}}},8193:(it,K,u)=>{u.d(K,{qz:()=>qe,Yh:()=>lt,Bc:()=>g,se:()=>He,A7:()=>ye,df:()=>Fe,zG:()=>C,CD:()=>Xe,wL:()=>Se,Sn:()=>ze,Ar:()=>pe,Th:()=>xe,kr:()=>Ge,Nx:()=>de,$m:()=>B,Ef:()=>Ye,c_:()=>ht});var e=u(3192),n=u(7451),y=u(2508),x=u(1276),$=u(2727),c=u(745),d=u(6317),p=u(253),z=u(6562),S=u(1640),V=u(2062),N=u(919),U=u(8714),H=u(6853),Q=u(5276),Z=u(5074),ue=u(4792),G=u(8562),X=u(116),ee=u(2673),ve=u(9337),Oe=u(635),Le=u(3350),be=u(3158),m=u(4744),P=u(2063),b=u(7371),_=u(207),R=u(2341),E=u(6152);function ne(Me,Qe){if(1&Me&&(n.\u0275\u0275elementStart(0,"mat-option",8),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&Me){const st=Qe.$implicit;n.\u0275\u0275property("value",st.value.id),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(st.value.title)}}function me(Me,Qe){}function Ee(Me,Qe){if(1&Me&&(n.\u0275\u0275elementStart(0,"mat-option",8),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&Me){const st=Qe.$implicit;n.\u0275\u0275property("value",st),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(st)}}function se(Me,Qe){if(1&Me){const st=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",9),n.\u0275\u0275elementStart(1,"mat-form-field"),n.\u0275\u0275elementStart(2,"mat-label"),n.\u0275\u0275text(3,"Binding"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"mat-select",10),n.\u0275\u0275template(5,Ee,2,2,"mat-option",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"button",6),n.\u0275\u0275listener("click",function(){const Ue=n.\u0275\u0275restoreView(st).index;return n.\u0275\u0275nextContext().removeBinding(Ue)}),n.\u0275\u0275text(7,"Remove"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()}if(2&Me){const st=Qe.index,Ut=n.\u0275\u0275nextContext();n.\u0275\u0275property("formGroupName",st),n.\u0275\u0275advance(5),n.\u0275\u0275property("ngForOf",Ut.bindableOptions)}}class ze extends H.Plugin{constructor(Qe){super(Qe),Qe&&(this.editor=Qe.editor,this.fetch=Qe.fetch,this.getBindings=Qe.getBindings?Qe.getBindings:()=>(0,c.of)([]),this.editorOptions=Qe.editorOptions?Qe.editorOptions:()=>(0,c.of)(new He))}}class Ge{constructor(Qe){Qe&&(this.url=Qe.url,this.method=Qe.method?Qe.method:void 0,void 0!==Qe.renderer&&(this.renderer=new xe(Qe.renderer)),void 0!==Qe.params&&(this.params=Qe.params.map(st=>new U.dO(st))),Qe.body&&(this.body=new N.pP(Qe.body)))}}class xe{constructor(Qe){Qe&&(this.type=Qe.type,this.query=Qe.query,this.trackBy=Qe.trackBy,void 0!==Qe.data&&(this.data=new N.pP(Qe.data)),void 0!==Qe.bindings&&(this.bindings=Qe.bindings.map(st=>new V.ContentBinding(st))))}}class qe{constructor(Qe){this.results=[],Qe&&(this.results=Qe.results)}}class Xe{constructor(Qe){Qe&&(this.query=Qe.query,this.trackBy=Qe.trackBy,this.idMapping=Qe.idMapping,this.labelMapping=Qe.labelMapping,this.valueMapping=Qe.valueMapping,this.multiple=Qe.multiple,this.limit=Qe.limit)}}class lt{constructor(Qe){this.settings=[],this.params=[],Qe&&(this.plugin=Qe.plugin,Qe.renderer&&(this.renderer=new xe(Qe.renderer)),Qe.settings&&(this.settings=Qe.settings.map(st=>new Q.AttributeValue(st))),Qe.params&&(this.params=Qe.params.map(st=>new U.dO(st))))}}class He{constructor(Qe){this.fullscreen=!1,Qe&&(this.fullscreen=Qe.fullscreen)}}const Ye=new Xe({query:"",trackBy:"",idMapping:"",labelMapping:"",valueMapping:"",multiple:!1,limit:0}),ht=new Ge({url:"",renderer:{type:"",data:{content:"",contentType:""},query:"",trackBy:"",bindings:[]},params:[]});let Se=(()=>{class Me{constructor(st){this.fb=st,this.datasourceOptions$=new d.X(Ye),this.formGroup=this.fb.group({query:this.fb.control(""),trackBy:this.fb.control(""),valueMapping:this.fb.control(""),labelMapping:this.fb.control(""),idMapping:this.fb.control(""),multiple:this.fb.control(""),limit:this.fb.control("")}),this.datasourceOptionsSub=this.datasourceOptions$.subscribe(Ut=>{this.formGroup.setValue(Ut),this.formGroup.updateValueAndValidity()}),this.onTouched=()=>{}}set datasourceOptions(st){this.datasourceOptions$.next(st)}writeValue(st){st&&this.formGroup.setValue(st,{emitEvent:!1})}registerOnChange(st){this.formGroup.valueChanges.subscribe(st)}registerOnTouched(st){this.onTouched=st}setDisabledState(st){st?this.formGroup.disable():this.formGroup.enable()}validate(st){return this.formGroup.valid?null:{datasourceOptions:{valid:!1}}}}return Me.\u0275fac=function(st){return new(st||Me)(n.\u0275\u0275directiveInject(y.qu))},Me.\u0275cmp=n.\u0275\u0275defineComponent({type:Me,selectors:[["classifieds-ui-datasource-options"]],inputs:{datasourceOptions:"datasourceOptions"},features:[n.\u0275\u0275ProvidersFeature([{provide:y.JU,useExisting:(0,n.forwardRef)(()=>Me),multi:!0},{provide:y.Cf,useExisting:(0,n.forwardRef)(()=>Me),multi:!0}])],decls:16,vars:1,consts:[[3,"formGroup"],["matInput","","formControlName","query","placeholder","Query"],["matInput","","formControlName","trackBy","placeholder","Track By"],["matInput","","formControlName","idMapping","placeholder","Id"],["matInput","","formControlName","valueMapping","placeholder","Value"],["matInput","","formControlName","labelMapping","placeholder","Label"],["formControlName","multiple"],["matInput","","formControlName","limit","placeholder","Limit"]],template:function(st,Ut){1&st&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275elementStart(1,"mat-form-field"),n.\u0275\u0275element(2,"input",1),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"mat-form-field"),n.\u0275\u0275element(4,"input",2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"mat-form-field"),n.\u0275\u0275element(6,"input",3),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(7,"mat-form-field"),n.\u0275\u0275element(8,"input",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(9,"mat-form-field"),n.\u0275\u0275element(10,"input",5),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(11,"div"),n.\u0275\u0275elementStart(12,"mat-checkbox",6),n.\u0275\u0275text(13,"Multiple"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(14,"mat-form-field"),n.\u0275\u0275element(15,"input",7),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&st&&n.\u0275\u0275property("formGroup",Ut.formGroup)},directives:[Z.KE,ue.oG,y.JL,y.sg,G.Nt,y.Fj,y.JJ,y.u],encapsulation:2}),Me})(),he=(()=>{class Me{constructor(st){this.viewContainerRef=st}}return Me.\u0275fac=function(st){return new(st||Me)(n.\u0275\u0275directiveInject(n.ViewContainerRef))},Me.\u0275dir=n.\u0275\u0275defineDirective({type:Me,selectors:[["","classifiedsUiDatasourceRendererHost",""]]}),Me})(),pe=(()=>{class Me extends H.BasePluginManager{constructor(st,Ut){super(st,Ut)}pluginDef(){return(0,c.of)(new H.PluginDef({name:"datasource"}))}}return Me.\u0275fac=function(st){return new(st||Me)(n.\u0275\u0275inject(H.PluginConfigurationManager),n.\u0275\u0275inject(P.ModuleLoaderService))},Me.\u0275prov=n.\u0275\u0275defineInjectable({token:Me,factory:Me.\u0275fac,providedIn:"root"}),Me})(),Fe=(()=>{class Me{constructor(st,Ut,qt){this.fb=st,this.componentFactoryResolver=Ut,this.dpm=qt,this.datasources$=this.dpm.getPlugins(),this.formGroup=this.fb.group({plugin:this.fb.control("",[y.kI.required]),settings:this.fb.control(""),renderer:this.fb.group({type:this.fb.control("pane"),bindings:this.fb.array([])})}),this.bindableOptions=[],this.contexts=[],this.settings$=new d.X([]),this.componentRef$=new d.X(void 0),this.datasource$=new d.X(void 0),this.afterViewInit$=new p.x,this.contextForwardingSub=this.componentRef$.pipe((0,X.h)(Ue=>!!Ue)).subscribe(Ue=>{Ue.instance.contexts=this.contexts,Ue.instance.settings=this.settings$.value}),this.rendererSub=(0,z.a)([this.formGroup.get("plugin").valueChanges,this.afterViewInit$]).pipe((0,ee.w)(([Ue,Lt])=>Ue&&""!==Ue?this.dpm.getPlugin(Ue):(0,c.of)(void 0))).subscribe(Ue=>{Ue&&this.renderPlugin(Ue)}),this.settingsSub=(0,z.a)([this.componentRef$,this.settings$]).pipe((0,X.h)(([Ue,Lt])=>!!Ue)).subscribe(([Ue,Lt])=>{Ue.instance.settings=Lt}),this.datasourceSub=this.datasource$.pipe((0,ve.b)(Ue=>{setTimeout(()=>this.settings$.next(Ue?Ue.settings:[]))})).subscribe(Ue=>{this.formGroup.get("renderer").get("bindings").clear(),Ue?(this.formGroup.get("plugin").setValue(Ue.plugin),this.formGroup.get("renderer").get("type").setValue("pane"),Ue.renderer&&Ue.renderer.bindings&&Ue.renderer.bindings.forEach(Lt=>{this.addBinding(Lt)})):(this.formGroup.get("plugin").setValue(""),this.formGroup.get("renderer").get("type").setValue("pane"))}),this.onTouched=()=>{}}set datasource(st){this.datasource$.next(st)}get bindings(){return this.formGroup.get("renderer").get("bindings")}ngOnInit(){}ngAfterViewInit(){this.afterViewInit$.next(void 0)}renderPlugin(st){const Ut=this.componentFactoryResolver.resolveComponentFactory(st.editor),qt=this.datasourceHost.viewContainerRef;qt.clear(),this.componentRef$.next(qt.createComponent(Ut))}writeValue(st){st&&this.formGroup.setValue(st,{emitEvent:!1})}registerOnChange(st){this.formGroup.valueChanges.subscribe(st)}registerOnTouched(st){this.onTouched=st}setDisabledState(st){st?this.formGroup.disable():this.formGroup.enable()}validate(st){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}}addBinding(st){this.bindings.push(this.fb.group({type:this.fb.control("pane",y.kI.required),id:this.fb.control(st?st.id:"",y.kI.required)}))}removeBinding(st){this.bindings.removeAt(st)}}return Me.\u0275fac=function(st){return new(st||Me)(n.\u0275\u0275directiveInject(y.qu),n.\u0275\u0275directiveInject(n.ComponentFactoryResolver),n.\u0275\u0275directiveInject(pe))},Me.\u0275cmp=n.\u0275\u0275defineComponent({type:Me,selectors:[["classifieds-ui-datasource-form"]],viewQuery:function(st,Ut){if(1&st&&n.\u0275\u0275viewQuery(he,7),2&st){let qt;n.\u0275\u0275queryRefresh(qt=n.\u0275\u0275loadQuery())&&(Ut.datasourceHost=qt.first)}},inputs:{bindableOptions:"bindableOptions",contexts:"contexts",datasource:"datasource"},features:[n.\u0275\u0275ProvidersFeature([{provide:y.JU,useExisting:(0,n.forwardRef)(()=>Me),multi:!0},{provide:y.Cf,useExisting:(0,n.forwardRef)(()=>Me),multi:!0}])],decls:16,vars:7,consts:[[3,"formGroup"],["required","","formControlName","plugin"],[3,"value",4,"ngFor","ngForOf"],["classifiedsUiDatasourceRendererHost",""],["formGroupName","renderer"],["formArrayName","bindings"],["type","button",3,"click"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"value"],[3,"formGroupName"],["required","","formControlName","id"]],template:function(st,Ut){1&st&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275elementStart(1,"mat-form-field"),n.\u0275\u0275elementStart(2,"mat-label"),n.\u0275\u0275text(3,"Datasource"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"mat-select",1),n.\u0275\u0275template(5,ne,2,2,"mat-option",2),n.\u0275\u0275pipe(6,"keyvalue"),n.\u0275\u0275pipe(7,"async"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerStart(8),n.\u0275\u0275template(9,me,0,0,"ng-template",3),n.\u0275\u0275elementContainerEnd(),n.\u0275\u0275elementStart(10,"div",4),n.\u0275\u0275elementStart(11,"div",5),n.\u0275\u0275elementStart(12,"button",6),n.\u0275\u0275listener("click",function(){return Ut.addBinding()}),n.\u0275\u0275text(13,"Add Binding"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(14,"div"),n.\u0275\u0275template(15,se,8,2,"div",7),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&st&&(n.\u0275\u0275property("formGroup",Ut.formGroup),n.\u0275\u0275advance(5),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind1(6,3,n.\u0275\u0275pipeBind1(7,5,Ut.datasources$))),n.\u0275\u0275advance(10),n.\u0275\u0275property("ngForOf",Ut.bindings.controls))},directives:[Z.KE,b.gD,_.ey,y.JL,y.sg,Z.hX,y.Q7,y.JJ,y.u,e.NgForOf,he,y.x0,y.CE],pipes:[e.KeyValuePipe,e.AsyncPipe],styles:[""]}),Me})(),Je=(()=>{class Me{constructor(st,Ut){this.fb=st,this.attributeSerializer=Ut,this.settings$=new d.X(void 0),this.formGroup=this.fb.group({data:this.fb.control("")}),this.settingsSub=this.settings$.pipe((0,Oe.U)(qt=>qt?this.attributeSerializer.deserializeAsObject(qt):void 0)).subscribe(qt=>{qt&&qt.data?this.formGroup.get("data").setValue(qt.data):this.formGroup.get("data").setValue("")}),this.onTouched=()=>{}}set settings(st){this.settings$.next(st)}ngOnInit(){}writeValue(st){st&&this.formGroup.setValue(st,{emitEvent:!1})}registerOnChange(st){this.formGroup.valueChanges.subscribe(st)}registerOnTouched(st){this.onTouched=st}setDisabledState(st){st?this.formGroup.disable():this.formGroup.enable()}validate(st){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}}}return Me.\u0275fac=function(st){return new(st||Me)(n.\u0275\u0275directiveInject(y.qu),n.\u0275\u0275directiveInject(Q.AttributeSerializerService))},Me.\u0275cmp=n.\u0275\u0275defineComponent({type:Me,selectors:[["classifieds-ui-data-source-form"]],inputs:{settings:"settings"},features:[n.\u0275\u0275ProvidersFeature([{provide:y.JU,useExisting:(0,n.forwardRef)(()=>Me),multi:!0},{provide:y.Cf,useExisting:(0,n.forwardRef)(()=>Me),multi:!0}])],decls:2,vars:1,consts:[[3,"formGroup"],["formControlName","data","cols","60","rows","20"]],template:function(st,Ut){1&st&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275element(1,"textarea",1),n.\u0275\u0275elementEnd()),2&st&&n.\u0275\u0275property("formGroup",Ut.formGroup)},directives:[y.JL,y.sg,y.Fj,y.JJ,y.u],styles:[""]}),Me})(),we=(()=>{class Me{constructor(st){this.controlContainer=st,this.settings=[]}}return Me.\u0275fac=function(st){return new(st||Me)(n.\u0275\u0275directiveInject(y.gN))},Me.\u0275cmp=n.\u0275\u0275defineComponent({type:Me,selectors:[["classifieds-ui-data-datasource"]],inputs:{settings:"settings"},decls:2,vars:2,consts:[[3,"formGroup"],["formControlName","settings",3,"settings"]],template:function(st,Ut){1&st&&(n.\u0275\u0275elementContainerStart(0,0),n.\u0275\u0275element(1,"classifieds-ui-data-source-form",1),n.\u0275\u0275elementContainerEnd()),2&st&&(n.\u0275\u0275property("formGroup",Ut.controlContainer.control),n.\u0275\u0275advance(1),n.\u0275\u0275property("settings",Ut.settings))},directives:[Je,y.JL,y.sg,y.JJ,y.u],encapsulation:2}),Me})(),De=(()=>{class Me{constructor(st,Ut){this.fb=st,this.attributeSerializer=Ut,this.settings$=new d.X(void 0),this.formGroup=this.fb.group({data:this.fb.control("")}),this.settingsSub=this.settings$.pipe((0,Oe.U)(qt=>qt?this.attributeSerializer.deserializeAsObject(qt):void 0)).subscribe(qt=>{}),this.onTouched=()=>{}}set settings(st){this.settings$.next(st)}ngOnInit(){}writeValue(st){st&&this.formGroup.setValue(st,{emitEvent:!1})}registerOnChange(st){this.formGroup.valueChanges.subscribe(st)}registerOnTouched(st){this.onTouched=st}setDisabledState(st){st?this.formGroup.disable():this.formGroup.enable()}validate(st){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}}}return Me.\u0275fac=function(st){return new(st||Me)(n.\u0275\u0275directiveInject(y.qu),n.\u0275\u0275directiveInject(Q.AttributeSerializerService))},Me.\u0275cmp=n.\u0275\u0275defineComponent({type:Me,selectors:[["classifieds-ui-datasource-source-form"]],inputs:{settings:"settings"},features:[n.\u0275\u0275ProvidersFeature([{provide:y.JU,useExisting:(0,n.forwardRef)(()=>Me),multi:!0},{provide:y.Cf,useExisting:(0,n.forwardRef)(()=>Me),multi:!0}])],decls:2,vars:0,template:function(st,Ut){1&st&&(n.\u0275\u0275elementStart(0,"p"),n.\u0275\u0275text(1,"Datasource"),n.\u0275\u0275elementEnd())},styles:[""]}),Me})(),ut=(()=>{class Me{constructor(st){this.controlContainer=st,this.settings=[]}}return Me.\u0275fac=function(st){return new(st||Me)(n.\u0275\u0275directiveInject(y.gN))},Me.\u0275cmp=n.\u0275\u0275defineComponent({type:Me,selectors:[["classifieds-ui-datasource-source"]],inputs:{settings:"settings"},decls:2,vars:2,consts:[[3,"formGroup"],["formControlName","settings",3,"settings"]],template:function(st,Ut){1&st&&(n.\u0275\u0275elementContainerStart(0,0),n.\u0275\u0275element(1,"classifieds-ui-datasource-source-form",1),n.\u0275\u0275elementContainerEnd()),2&st&&(n.\u0275\u0275property("formGroup",Ut.controlContainer.control),n.\u0275\u0275advance(1),n.\u0275\u0275property("settings",Ut.settings))},directives:[De,y.JL,y.sg,y.JJ,y.u],encapsulation:2}),Me})();const le=Me=>new ze({id:"data",title:"Data",editor:we,fetch:({settings:Qe})=>(0,c.of)(new qe).pipe((0,Oe.U)(()=>Me.deserializeAsObject(Qe)),(0,Oe.U)(st=>new qe({results:JSON.parse(st.data)})))});let C=(()=>{class Me{constructor(st,Ut){[le(Ut),new ze({id:"datasource_datasource",title:"Datasource",editor:ut,fetch:({})=>(0,c.of)(new qe)})].forEach(qt=>st.register(qt))}}return Me.\u0275fac=function(st){return new(st||Me)(n.\u0275\u0275inject(pe),n.\u0275\u0275inject(Q.AttributeSerializerService))},Me.\u0275mod=n.\u0275\u0275defineNgModule({type:Me}),Me.\u0275inj=n.\u0275\u0275defineInjector({imports:[[e.CommonModule,y.UX,x.MaterialModule,$.Q]]}),Me})(),g=(()=>{class Me{constructor(st,Ut){this.config=st,this.http=Ut,this.cache=new Map}getData(st){return this.cache.has(st)?(0,c.of)(this.cache.get(st)).pipe((0,Le.g)(0)):this.http.get(`${st}`).pipe((0,be.K)(()=>(0,c.of)([])),(0,Oe.U)(Ut=>Array.isArray(Ut)?Ut:[Ut]),(0,ve.b)(Ut=>this.cache.set(st,Ut)))}postData({url:st,body:Ut=""}){return this.http.post(`${st}`,Ut).pipe((0,Oe.U)(qt=>Array.isArray(qt)?qt:[qt]))}}return Me.\u0275fac=function(st){return new(st||Me)(n.\u0275\u0275inject(R.jh),n.\u0275\u0275inject(E.HttpClient))},Me.\u0275prov=n.\u0275\u0275defineInjectable({token:Me,factory:Me.\u0275fac,providedIn:"root"}),Me})();class B{constructor(Qe){Qe&&(this.label=Qe.label,this.dataItem=Qe.dataItem,void 0!==Qe.value&&(this.value=Qe.value))}}class de{constructor(Qe){Qe&&(this.value=Qe.value,this.label=Qe.label,this.id=Qe.id,this.multiple=Qe.multiple,this.limit=Qe.limit)}}let ye=(()=>{class Me{constructor(st,Ut){this.dpm=st,this.attributeSerializer=Ut}evalDatasource({datasource:st,metadata:Ut,datasources:qt}){return(0,c.of)(st).pipe((0,ee.w)(Ue=>this.dpm.getPlugin(Ue.plugin).pipe((0,Oe.U)(Lt=>[Ue,Lt]))),(0,ee.w)(([Ue,Lt])=>Lt.fetch({settings:Ue.settings,metadata:Ut,datasource:Ue,datasources:qt}).pipe((0,Oe.U)(zt=>[Ue,zt]))),(0,ee.w)(([Ue,Lt])=>(0,S.D)(Ue.renderer.bindings.reduce((zt,$e)=>[...zt,...qt&&qt.has($e.id)?[(0,c.of)(qt.get($e.id))]:[]],[])).pipe((0,ee.w)(zt=>zt.reduce(($e,Ot)=>$e.pipe((0,ee.w)(Ke=>this.dpm.getPlugin(Ot.plugin).pipe((0,Oe.U)(rt=>[rt,Ke,Ot]))),(0,ee.w)(([Ke,rt,Be])=>Ke.fetch({settings:Ot.settings,dataset:rt,metadata:Ut,datasource:Be,datasources:qt}))),(0,c.of)(Lt))),(0,Oe.U)(zt=>zt),(0,m.d)(Lt))))}}return Me.\u0275fac=function(st){return new(st||Me)(n.\u0275\u0275inject(pe),n.\u0275\u0275inject(Q.AttributeSerializerService))},Me.\u0275prov=n.\u0275\u0275defineInjectable({token:Me,factory:Me.\u0275fac,providedIn:"root"}),Me})()},8714:(it,K,u)=>{u.d(K,{bI:()=>qe,vs:()=>Ee,dO:()=>me,nU:()=>xe,BL:()=>R,bL:()=>ze,Op:()=>Ge});var e=u(7451),n=u(6853),y=u(745),x=u(5330),$=u(6317),c=u(253),d=u(6562),p=u(1640),z=u(635),S=u(2673),V=u(9337),N=u(1989),U=u(4744),H=u(2508),Q=u(2063),Z=u(5074),ue=u(7371),G=u(207),X=u(4792),ee=u(3192),ve=u(8562),Oe=u(1276),Le=u(8698);function be(Xe,lt){if(1&Xe&&(e.\u0275\u0275elementStart(0,"mat-option",10),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&Xe){const He=lt.$implicit;e.\u0275\u0275property("value",He.value.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(He.value.title)}}function m(Xe,lt){if(1&Xe&&(e.\u0275\u0275elementStart(0,"mat-option",10),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&Xe){const He=lt.$implicit;e.\u0275\u0275property("value",He),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(He)}}function P(Xe,lt){if(1&Xe&&(e.\u0275\u0275elementStart(0,"mat-form-field",2),e.\u0275\u0275elementStart(1,"mat-label"),e.\u0275\u0275text(2,"Context"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"mat-select",11),e.\u0275\u0275template(4,m,2,2,"mat-option",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&Xe){const He=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",He.contexts)}}function b(Xe,lt){if(1&Xe&&(e.\u0275\u0275elementStart(0,"div",12),e.\u0275\u0275elementStart(1,"mat-checkbox",13),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&Xe){const He=lt.index,Ye=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("formGroupName",He),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(Ye.flagsAsArray[He])}}function _(Xe,lt){if(1&Xe&&(e.\u0275\u0275elementStart(0,"div",1),e.\u0275\u0275elementStart(1,"div"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"mat-form-field",2),e.\u0275\u0275elementStart(4,"mat-label"),e.\u0275\u0275text(5,"Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"mat-select",3),e.\u0275\u0275template(7,be,2,2,"mat-option",4),e.\u0275\u0275pipe(8,"keyvalue"),e.\u0275\u0275pipe(9,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,P,5,1,"mat-form-field",5),e.\u0275\u0275elementStart(11,"mat-form-field",2),e.\u0275\u0275element(12,"input",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"mat-form-field",2),e.\u0275\u0275element(14,"input",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",8),e.\u0275\u0275template(16,b,3,2,"div",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&Xe){const He=lt.$implicit,Ye=lt.index,ht=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",He),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(ht.paramName(Ye)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(8,5,e.\u0275\u0275pipeBind1(9,7,ht.paramPlugins$))),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","context"==He.get("mapping").get("type").value),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",He.get("flags").controls)}}class R extends n.Plugin{constructor(lt){super(lt),lt&&(this.evalParam=lt.evalParam,lt.condition&&(this.condition=lt.condition),lt.usedContexts&&(this.usedContexts=lt.usedContexts))}}class me{constructor(lt){lt&&(this.mapping=new Ee(lt.mapping),void 0!==lt.flags&&(this.flags=lt.flags.map(He=>new se(He))))}}class Ee{constructor(lt){lt&&(this.type=lt.type,this.value=lt.value,this.testValue=lt.testValue,this.context=lt.context)}}class se{constructor(lt){lt&&(this.name=lt.name,this.enabled=lt.enabled)}}let ze=(()=>{class Xe extends n.BasePluginManager{constructor(He,Ye){super(He,Ye)}pluginDef(){return(0,y.of)(new n.PluginDef({name:"param"}))}}return Xe.\u0275fac=function(He){return new(He||Xe)(e.\u0275\u0275inject(n.PluginConfigurationManager),e.\u0275\u0275inject(Q.ModuleLoaderService))},Xe.\u0275prov=e.\u0275\u0275defineInjectable({token:Xe,factory:Xe.\u0275fac,providedIn:"root"}),Xe})(),Ge=(()=>{class Xe{constructor(He,Ye){this.fb=He,this.ppm=Ye,this.contexts=[],this.params$=new $.X({}),this.paramValues$=new $.X([]),this.init$=new c.x,this.formArray=this.fb.array([]),this.paramPlugins$=this.ppm.getPlugins(),this.flags=new Map,this.savedParams=new Map,this.paramIndexes=new Map,this.paramsSub=this.params$.pipe((0,V.b)(ht=>{const Se=new Map([...this.paramIndexes]);this.formArray.clear(),this.paramIndexes.clear();let he=0;for(const pe in ht)Array.isArray(ht[pe])?(ht[pe].forEach(Fe=>this.buildParams(Fe,he,Se)),he++):0===ht[pe].indexOf(":")&&(this.buildParams(ht[pe],he,Se),he++)})).subscribe(),this.savedParamsSub=this.formArray.valueChanges.pipe((0,N.b)(1e3),(0,V.b)(ht=>{const Se=ht.length;for(let he=0;he<Se;he++)this.savedParams.set(this.paramName(he),new me(ht[he]))})).subscribe(),this.paramValuesSub=(0,d.a)([this.paramValues$,this.params$,this.init$]).pipe((0,V.b)(([ht])=>{const Se=ht.length;for(let he=0;he<Se;he++){const pe=Array.from(this.paramIndexes).find(([Fe,Je])=>Je===he);void 0!==pe&&this.savedParams.set(pe[0],ht[he])}})).subscribe(),this.onTouched=()=>{},this.flags.set("page","Page"),this.flags.set("limit","Limit"),this.flags.set("offset","Offset"),this.flags.set("searchString","Search String")}set params(He){this.params$.next(He)}set paramValues(He){this.paramValues$.next(He)}get flagsAsArray(){const He=[];return this.flags.forEach((Ye,ht)=>{He.push(ht)}),He}ngOnInit(){this.init$.next(void 0)}writeValue(He){He&&this.formArray.setValue(He,{emitEvent:!1})}registerOnChange(He){this.formArray.valueChanges.subscribe(He)}registerOnTouched(He){this.onTouched=He}setDisabledState(He){He?this.formArray.disable():this.formArray.enable()}validate(He){return this.formArray.valid?null:this.formArray.errors}buildParams(He,Ye,ht){console.log(`build param ${He}`),this.paramIndexes.set(He,Ye),this.formArray.push(this.fb.group({mapping:this.fb.group({type:this.fb.control("",H.kI.required),value:this.fb.control("",H.kI.required),testValue:this.fb.control(""),context:this.fb.control("")}),flags:this.fb.array(this.flagsAsArray.map(Se=>this.fb.group({name:Se,enabled:this.fb.control(!1)})))})),this.savedParams.has(He)?this.formArray.at(Ye).setValue(this.savedParams.get(He)):Ye<this.paramValues$.value.length&&-1===Array.from(ht).findIndex(([Se,he])=>he===Ye)&&this.formArray.at(Ye).setValue(this.paramValues$.value[Ye])}paramName(He){let Ye=0;for(const ht in this.params$.value)if(Array.isArray(this.params$.value[ht]))for(let Se=0;Se<this.params$.value[ht].length;Se++){if(He===Ye)return this.params$.value[ht][Se];Ye++}else if(0===this.params$.value[ht].indexOf(":")){if(Ye===He)return this.params$.value[ht];Ye++}}}return Xe.\u0275fac=function(He){return new(He||Xe)(e.\u0275\u0275directiveInject(H.qu),e.\u0275\u0275directiveInject(ze))},Xe.\u0275cmp=e.\u0275\u0275defineComponent({type:Xe,selectors:[["classifieds-ui-params-form"]],inputs:{contexts:"contexts",params:"params",paramValues:"paramValues"},features:[e.\u0275\u0275ProvidersFeature([{provide:H.JU,useExisting:(0,e.forwardRef)(()=>Xe),multi:!0},{provide:H.Cf,useExisting:(0,e.forwardRef)(()=>Xe),multi:!0}])],decls:1,vars:1,consts:[[3,"formGroup",4,"ngFor","ngForOf"],[3,"formGroup"],["formGroupName","mapping"],["required","","formControlName","type"],[3,"value",4,"ngFor","ngForOf"],["formGroupName","mapping",4,"ngIf"],["matInput","","formControlName","value","placeholder","value","required",""],["matInput","","formControlName","testValue","placeholder","Test Value","required",""],["formArrayName","flags"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"value"],["formControlName","context"],[3,"formGroupName"],["formControlName","enabled"]],template:function(He,Ye){1&He&&e.\u0275\u0275template(0,_,17,9,"div",0),2&He&&e.\u0275\u0275property("ngForOf",Ye.formArray.controls)},directives:[Z.KE,ue.gD,G.ey,X.oG,ee.NgForOf,H.JL,H.sg,H.x0,Z.hX,H.Q7,H.JJ,H.u,ee.NgIf,ve.Nt,H.Fj,H.CE],pipes:[ee.KeyValuePipe,ee.AsyncPipe],styles:[""]}),Xe})(),xe=(()=>{class Xe{constructor(He,Ye){this.paramPluginManager=He,this.tokenizerService=Ye}paramValue(He,Ye){return this.paramPluginManager.getPlugins().pipe((0,z.U)(ht=>Array.from(ht).map(([Se,he])=>he)),(0,z.U)(ht=>ht.find(Se=>Se.condition&&Se.condition({param:He,metadata:Ye})||!Se.condition&&Se.id===He.mapping.type)),(0,S.w)(ht=>(0,x.s)(()=>!!ht,ht?ht.evalParam({param:He,metadata:Ye}):(0,y.of)(),(0,y.of)(He.mapping.value))),(0,z.U)(ht=>He.mapping.value&&"string"==typeof ht&&0===this.tokenizerService.discoverTokens(ht).length?ht:He.mapping.testValue))}paramValues(He){return(0,p.D)(Array.from(He.keys()).map(Ye=>this.paramValue(He.get(Ye),new Map).pipe((0,z.U)(ht=>[Ye,ht])))).pipe((0,z.U)(Ye=>Ye.reduce((ht,Se)=>new Map([...ht,Se]),new Map)),(0,U.d)(new Map))}resolveParams({params:He}){return(0,S.w)(()=>(0,x.s)(()=>Object.keys(He).length>1,(0,p.D)(Object.keys(He).map(Ye=>this.paramValue(He[Ye],new Map).pipe((0,z.U)(ht=>({[Ye]:ht}))))).pipe((0,z.U)(Ye=>Ye.reduce((ht,Se)=>({...ht,...Se}),{})),(0,z.U)(Ye=>({options:Ye}))),(0,x.s)(()=>0!==Object.keys(He).length,this.paramValue(0!==Object.keys(He).length?He[Object.keys(He)[0]]:new me,new Map).pipe((0,z.U)(Ye=>({options:{[Object.keys(He)[0]]:Ye}}))),(0,y.of)({options:{}}))))}}return Xe.\u0275fac=function(He){return new(He||Xe)(e.\u0275\u0275inject(ze),e.\u0275\u0275inject(Le.G))},Xe.\u0275prov=e.\u0275\u0275defineInjectable({token:Xe,factory:Xe.\u0275fac,providedIn:"root"}),Xe})(),qe=(()=>{class Xe{constructor(He,Ye){He.register(new R({id:"static",title:"Static",evalParam:({param:Xe})=>(0,y.of)(Xe.mapping.value)})),He.register((Xe=>new R({id:"inputparam",title:"Input Param",evalParam:({param:lt,metadata:He})=>(0,y.of)(lt.mapping.value).pipe((0,z.U)(Ye=>He.has("inputparams")&&He.get("inputparams").has(Ye)?He.get("inputparams").get(Ye):void 0),(0,S.w)(Ye=>(0,x.s)(()=>void 0!==Ye,void 0!==Ye?Xe.paramValue(Ye,He):(0,y.of)(lt.mapping.testValue),(0,y.of)(lt.mapping.testValue))))}))(Ye))}}return Xe.\u0275fac=function(He){return new(He||Xe)(e.\u0275\u0275inject(ze),e.\u0275\u0275inject(xe))},Xe.\u0275mod=e.\u0275\u0275defineNgModule({type:Xe}),Xe.\u0275inj=e.\u0275\u0275defineInjector({imports:[[ee.CommonModule,H.u5,H.UX,Oe.MaterialModule]]}),Xe})()},2727:(it,K,u)=>{u.d(K,{Q:()=>ue,o:()=>G});var e=u(7451),n=u(8714),y=u(745),x=u(1640),$=u(1611),c=u(9263),d=u(635),p=u(2673),z=u(4744),S=u(9337),V=u(3670);let ue=(()=>{class X{constructor(ve){[new n.BL({id:"page",title:"Page",usedContexts:()=>(0,y.of)(["_page"]),condition:({param:X,metadata:ee})=>X.flags.findIndex(ve=>ve.enabled&&"page"===ve.name)>-1&&ee.has("page"),evalParam:({metadata:ee})=>(0,y.of)(`${ee.get("page")}`)}),new n.BL({id:"searchstring",title:"Searchstring",condition:({param:X,metadata:ee})=>X.flags.findIndex(ve=>ve.enabled)>-1&&ee.has("searchString"),evalParam:({metadata:ee})=>(0,y.of)(`${ee.get("searchString")}`)}),new n.BL({id:"route",title:"Route",usedContexts:()=>(0,y.of)(["_route"]),evalParam:({param:X,metadata:ee})=>{const ve=ee.get("_route");return(0,y.of)(ve.params[X.mapping.value])}}),new n.BL({id:"querystring",title:"Querystring",usedContexts:()=>(0,y.of)(["_page"]),evalParam:({param:X,metadata:ee})=>{const ve=ee.get("_route");return(0,y.of)(ve.queryParams[X.mapping.value])}}),new n.BL({id:"standardpagination",title:"Standard Pagination",usedContexts:()=>(0,y.of)(["_page"]),condition:({param:X,metadata:ee})=>X.flags.findIndex(ve=>ve.enabled&&"offset"===ve.name)>-1&&ee.has("limit")&&ee.has("page"),evalParam:({metadata:ee})=>(0,y.of)(""+ +ee.get("limit")*(+ee.get("page")-1))})].forEach(Oe=>ve.register(Oe))}}return X.\u0275fac=function(ve){return new(ve||X)(e.\u0275\u0275inject(n.bL))},X.\u0275mod=e.\u0275\u0275defineNgModule({type:X}),X.\u0275inj=e.\u0275\u0275defineInjector({imports:[[n.bI]]}),X})(),G=(()=>{class X{constructor(ve,Oe,Le){this.routerStore=ve,this.paramPluginManager=Oe,this.paramEvaluatorService=Le}getUrl(ve,Oe,Le){const{selectCurrentRoute:be}=(0,$.Ug)(m=>m.router);return this.routerStore.pipe((0,c.Ys)(be),(0,d.U)(m=>[m,ve,ve?ve.indexOf("?"):-1]),(0,d.U)(([m,P,b])=>[m,b>-1?P.substring(0,b):P,b>-1?P.substring(b+1):""]),(0,p.w)(([m,P,b])=>{const _=V.parse(b),R=P?P.split("/"):[],E=new Map([...Le,["_route",m]]),ne=this.paramNames(ve),me=Oe.reduce((ze,Ge,xe)=>new Map([...ze,[ne[xe],Ge]]),new Map),Ee=R.reduce((ze,Ge,xe)=>0===Ge.indexOf(":")?[...ze,this.paramEvaluatorService.paramValue(me.get(Ge),E)]:[...ze,(0,y.of)(R[xe])],[]),se=[];for(const ze in _)Array.isArray(_[ze])?_[ze].forEach(Ge=>se.push(this.paramEvaluatorService.paramValue(me.get(Ge),E).pipe((0,d.U)(xe=>[ze,xe,!0])))):"string"==typeof _[ze]&&_[ze].indexOf(":")>-1?se.push(this.paramEvaluatorService.paramValue(me.get(_[ze]),E).pipe((0,d.U)(Ge=>[ze,Ge,!1]))):se.push((0,y.of)([ze,_[ze],Array.isArray(_[ze])]));return(0,x.D)([(0,x.D)(Ee).pipe((0,d.U)(ze=>ze.filter(Ge=>null!=Ge&&""!==Ge&&"undefined"!==Ge).map((Ge,xe)=>0===xe&&0===Ge.indexOf("http")?`${Ge}/`:Ge).join("/")),(0,z.d)(P)),(0,x.D)(se).pipe((0,S.b)(ze=>console.log(ze)),(0,d.U)(ze=>ze.reduce((Ge,[xe,qe,Xe])=>{if(null==qe||""===qe||"undefined"===qe){const lt={...Ge};return delete lt[xe],lt}return Xe?{...Ge,[xe]:[...void 0!==Ge[xe]?Ge[xe]:[],qe]}:{...Ge,[xe]:qe}},this.rebuildQueryString(_))),(0,S.b)(ze=>console.log(ze)),(0,d.U)(ze=>V.stringify(ze,{arrayFormat:"repeat",indices:!1})),(0,z.d)(b))]).pipe((0,d.U)(ze=>ze.join("?")))}))}paramNames(ve){const Oe=ve?ve.indexOf("?"):-1,be={...(Oe>-1?ve.substring(0,Oe):ve||"").split("/").reduce((P,b,_)=>0===b.indexOf(":")?{...P,[b.substr(1)]:b}:P,{}),...V.parse(ve?ve.substring(ve.indexOf("?")+1):"")},m=[];for(const P in be)Array.isArray(be[P])?be[P].forEach(b=>m.push(b)):0===be[P].indexOf(":")&&m.push(be[P]);return m}rebuildQueryString(ve){const Oe={};for(const Le in ve)Array.isArray(ve[Le])?Oe[Le]=[]:null!=Le[ve]&&""!==Le[ve]&&"undefined"!==Le[ve]&&(Oe[Le]=Le[ve]);return V.parse(Oe)}}return X.\u0275fac=function(ve){return new(ve||X)(e.\u0275\u0275inject(c.yh),e.\u0275\u0275inject(n.bL),e.\u0275\u0275inject(n.nU))},X.\u0275prov=e.\u0275\u0275defineInjectable({token:X,factory:X.\u0275fac,providedIn:"root"}),X})()},1923:(it,K,u)=>{u.d(K,{$Z:()=>$r,xu:()=>St,s5:()=>J,Yj:()=>ge});var e=u(7451),n=u(3192),y=u(8163),x=u(2508),$=u(8828),c=u(1276),d=u(5008),p=u(5276),z=u(8698),S=u(2063),V=u(2522),N=u(2570),U=u(6722),H=u(3704),Q=u(2673),Z=u(116),ue=u(1484),G=u(4522),X=u(745),ee=u(6853),ve=u(7822),Oe=u(8589),Le=u(5074),be=u(7371),m=u(207),P=u(8085);const b=["innerGridItem"];function _(tt,At){1&tt&&e.\u0275\u0275elementContainer(0)}const R=function(tt){return{i:tt}};function E(tt,At){if(1&tt&&(e.\u0275\u0275elementStart(0,"div",2),e.\u0275\u0275elementStart(1,"p",4),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",5),e.\u0275\u0275template(4,_,1,0,"ng-container",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&tt){const oe=At.index,O=e.\u0275\u0275nextContext().index,I=e.\u0275\u0275nextContext();e.\u0275\u0275property("fxFlex",I.dashboard[I.itemIndex(O,oe)].cols),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate3("row: ",O," | column: ",oe," | size: ",I.dashboard[I.itemIndex(O,oe)].cols,""),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngStyle",I.gridItemInnerStyles(O,oe)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",I.innerGridItemTmpl)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(7,R,I.itemIndex(O,oe)))}}const ne=function(){return{height:"100%"}};function me(tt,At){if(1&tt&&(e.\u0275\u0275elementStart(0,"div",2),e.\u0275\u0275elementStart(1,"div",3),e.\u0275\u0275template(2,E,5,9,"div",1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&tt){const oe=At.index,O=e.\u0275\u0275nextContext();e.\u0275\u0275property("fxFlex",O.rowFlex(oe)),e.\u0275\u0275advance(1),e.\u0275\u0275property("fxLayout",O.rowDirection(oe))("ngStyle",e.\u0275\u0275pureFunction0(4,ne)),e.\u0275\u0275advance(1),e.\u0275\u0275property("for",O.totalColumns(oe))}}const Ee=["gridItemActions"],se=["extraActions"],ze=["mainControls"],Ge=["itemHeader"];function xe(tt,At){1&tt&&e.\u0275\u0275elementContainer(0)}function qe(tt,At){1&tt&&e.\u0275\u0275elementContainer(0)}function Xe(tt,At){1&tt&&e.\u0275\u0275elementContainer(0)}function lt(tt,At){if(1&tt){const oe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"gridster-item",8),e.\u0275\u0275elementStart(1,"div",9),e.\u0275\u0275elementStart(2,"div",10,11),e.\u0275\u0275template(4,qe,1,0,"ng-container",12),e.\u0275\u0275elementStart(5,"button",13),e.\u0275\u0275listener("mousedown",function(){const ce=e.\u0275\u0275restoreView(oe).index;return e.\u0275\u0275nextContext().removeItem(ce)})("touchstart",function(){const ce=e.\u0275\u0275restoreView(oe).index;return e.\u0275\u0275nextContext().removeItem(ce)}),e.\u0275\u0275text(6,"Delete"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",14),e.\u0275\u0275template(8,Xe,1,0,"ng-container",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&tt){const oe=At.$implicit,O=At.index,I=e.\u0275\u0275nextContext();e.\u0275\u0275property("item",oe),e.\u0275\u0275advance(2),e.\u0275\u0275property("hidden",!I.displayItemHeader),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngTemplateOutlet",I.gridItemActionsTmpl)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(6,R,O)),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngTemplateOutlet",I.innerGridItemTmpl)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(8,R,O))}}function He(tt,At){1&tt&&e.\u0275\u0275elementContainer(0)}function Ye(tt,At){1&tt&&e.\u0275\u0275elementContainer(0)}function ht(tt,At){1&tt&&e.\u0275\u0275elementContainer(0)}const Se=function(){return{i:0}};function he(tt,At){1&tt&&e.\u0275\u0275elementContainer(0)}function pe(tt,At){1&tt&&e.\u0275\u0275elementContainer(0)}function Fe(tt,At){1&tt&&e.\u0275\u0275elementContainer(0)}function Je(tt,At){if(1&tt&&(e.\u0275\u0275elementStart(0,"as-split-area",15),e.\u0275\u0275elementStart(1,"div",16),e.\u0275\u0275elementStart(2,"div",17,18),e.\u0275\u0275template(4,pe,1,0,"ng-container",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",20),e.\u0275\u0275template(6,Fe,1,0,"ng-container",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&tt){const oe=At.index,O=e.\u0275\u0275nextContext().index,I=e.\u0275\u0275nextContext();e.\u0275\u0275property("size",I.itemSize(O,oe)),e.\u0275\u0275advance(2),e.\u0275\u0275property("hidden",!I.displayItemHeader),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngTemplateOutlet",I.gridItemActionsTmpl)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(6,R,I.itemIndex(O,oe))),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngTemplateOutlet",I.innerGridItemTmpl)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(8,R,I.itemIndex(O,oe)))}}function we(tt,At){if(1&tt){const oe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",6),e.\u0275\u0275elementStart(1,"div",7),e.\u0275\u0275elementStart(2,"button",8),e.\u0275\u0275elementStart(3,"mat-icon"),e.\u0275\u0275text(4,"menu"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"mat-menu",null,9),e.\u0275\u0275elementStart(7,"button",10),e.\u0275\u0275listener("mousedown",function(){const ce=e.\u0275\u0275restoreView(oe).index;return e.\u0275\u0275nextContext().addColumn(ce)}),e.\u0275\u0275text(8,"Add Column"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"button",10),e.\u0275\u0275listener("mousedown",function(){const ce=e.\u0275\u0275restoreView(oe).index;return e.\u0275\u0275nextContext().layoutSettings("row",ce)}),e.\u0275\u0275text(10,"Layout Settings"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"button",11),e.\u0275\u0275listener("mousedown",function(){const ce=e.\u0275\u0275restoreView(oe).index;return e.\u0275\u0275nextContext().removeRow(ce)}),e.\u0275\u0275text(12,"Delete"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",12),e.\u0275\u0275elementStart(14,"as-split",13),e.\u0275\u0275listener("dragEnd",function(I){const Te=e.\u0275\u0275restoreView(oe).index;return e.\u0275\u0275nextContext().dragEnd(Te,I)}),e.\u0275\u0275template(15,Je,7,10,"as-split-area",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&tt){const oe=At.index,O=e.\u0275\u0275reference(6),I=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("matMenuTriggerFor",O),e.\u0275\u0275advance(13),e.\u0275\u0275property("for",I.totalColumns(oe))}}function De(tt,At){1&tt&&(e.\u0275\u0275elementStart(0,"mat-icon"),e.\u0275\u0275text(1,"menu"),e.\u0275\u0275elementEnd())}function ut(tt,At){1&tt&&(e.\u0275\u0275elementStart(0,"mat-icon"),e.\u0275\u0275text(1,"arrow_drop_down"),e.\u0275\u0275elementEnd())}function le(tt,At){1&tt&&e.\u0275\u0275elementContainer(0)}function D(tt,At){if(1&tt&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,le,1,0,"ng-container",14),e.\u0275\u0275elementContainerEnd()),2&tt){const oe=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",oe.contextsMenuTpl)}}function C(tt,At){if(1&tt&&(e.\u0275\u0275elementStart(0,"div",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&tt){const oe=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(oe.editor.panelStyleTitle(0))}}function g(tt,At){1&tt&&e.\u0275\u0275element(0,"span",27)}function B(tt,At){1&tt&&e.\u0275\u0275elementContainer(0)}function de(tt,At){1&tt&&(e.\u0275\u0275elementStart(0,"div",28),e.\u0275\u0275text(1,"d r u i d"),e.\u0275\u0275elementEnd())}function ye(tt,At){if(1&tt&&(e.\u0275\u0275elementStart(0,"button",10),e.\u0275\u0275template(1,De,2,0,"mat-icon",11),e.\u0275\u0275template(2,ut,2,0,"mat-icon",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div"),e.\u0275\u0275template(4,D,2,1,"ng-container",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,C,2,1,"div",12),e.\u0275\u0275template(6,g,1,0,"span",13),e.\u0275\u0275template(7,B,1,0,"ng-container",14),e.\u0275\u0275elementStart(8,"div",15),e.\u0275\u0275elementStart(9,"mat-form-field"),e.\u0275\u0275elementStart(10,"mat-select",16),e.\u0275\u0275elementStart(11,"mat-option",17),e.\u0275\u0275text(12,"page"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"mat-option",18),e.\u0275\u0275text(14,"form"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"mat-option",19),e.\u0275\u0275text(16,"json"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",20),e.\u0275\u0275elementStart(18,"mat-form-field"),e.\u0275\u0275elementStart(19,"mat-select",21),e.\u0275\u0275elementStart(20,"mat-option",22),e.\u0275\u0275text(21,"grid"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"mat-option",23),e.\u0275\u0275text(23,"gridless"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"mat-option",24),e.\u0275\u0275text(25,"split"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(26,de,2,0,"div",25)),2&tt){const oe=e.\u0275\u0275nextContext(),O=e.\u0275\u0275reference(8);e.\u0275\u0275property("matMenuTriggerFor",O),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!oe.nested),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",oe.nested),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",oe.savable),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",oe.editor.hasPanelStyle(0)&&oe.nested),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",oe.nested),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",oe.extraActionsAreaTmpl),e.\u0275\u0275advance(19),e.\u0275\u0275property("ngIf",!oe.nested)}}function Me(tt,At){if(1&tt&&(e.\u0275\u0275elementStart(0,"button",10),e.\u0275\u0275elementStart(1,"mat-icon"),e.\u0275\u0275text(2,"arrow_drop_down"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&tt){e.\u0275\u0275nextContext(2);const oe=e.\u0275\u0275reference(8);e.\u0275\u0275property("matMenuTriggerFor",oe)}}function Qe(tt,At){if(1&tt&&(e.\u0275\u0275elementStart(0,"div",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&tt){const oe=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(oe.editor.panelStyleTitle(0))}}function st(tt,At){if(1&tt&&(e.\u0275\u0275template(0,Me,3,1,"button",29),e.\u0275\u0275template(1,Qe,2,1,"div",12)),2&tt){const oe=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",!oe.nested),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",oe.editor.hasPanelStyle(0)&&!oe.nested)}}function Ut(tt,At){1&tt&&e.\u0275\u0275elementContainer(0)}const qt=function(tt,At){return{i:tt,j:At}};function Ue(tt,At){if(1&tt&&(e.\u0275\u0275elementStart(0,"div",33),e.\u0275\u0275template(1,Ut,1,0,"ng-container",34),e.\u0275\u0275elementEnd()),2&tt){const oe=At.index,O=e.\u0275\u0275nextContext().i,I=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",I.editablePaneTpl)("ngTemplateOutletContext",e.\u0275\u0275pureFunction2(2,qt,O,oe))}}function Lt(tt,At){if(1&tt){const oe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ngx-dropzone",30),e.\u0275\u0275listener("change",function(I){const Te=e.\u0275\u0275restoreView(oe).i;return e.\u0275\u0275nextContext().editor.onFileChange(I,Te)})("cdkDropListDropped",function(I){return e.\u0275\u0275restoreView(oe),e.\u0275\u0275nextContext().editor.onDrop(I)}),e.\u0275\u0275elementStart(1,"div",null,31),e.\u0275\u0275template(3,Ue,2,5,"div",32),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&tt){const oe=At.i,O=e.\u0275\u0275nextContext();e.\u0275\u0275property("cdkDropListData",oe)("multiple",!0)("disableClick",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",O.editor.panelPanes(oe).controls)}}function zt(tt,At){if(1&tt){const oe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",35),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(oe),e.\u0275\u0275nextContext().editor.submit()}),e.\u0275\u0275text(1,"Save"),e.\u0275\u0275elementEnd()}}function $e(tt,At){if(1&tt){const oe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",36),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(oe),e.\u0275\u0275nextContext().editor.onPropertiesClick()}),e.\u0275\u0275text(1,"Properties"),e.\u0275\u0275elementEnd()}}function Ot(tt,At){if(1&tt){const oe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",36),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(oe),e.\u0275\u0275nextContext().editor.onDeleteClick()}),e.\u0275\u0275text(1,"Delete"),e.\u0275\u0275elementEnd()}}function Ke(tt,At){if(1&tt){const oe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",36),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(oe),e.\u0275\u0275nextContext().editor.onRulesClick()}),e.\u0275\u0275text(1,"Rules"),e.\u0275\u0275elementEnd()}}function rt(tt,At){if(1&tt){const oe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",37),e.\u0275\u0275listener("mousedown",function(){return e.\u0275\u0275restoreView(oe),e.\u0275\u0275nextContext().editor.onPersistenceClick()}),e.\u0275\u0275text(1,"Persistence"),e.\u0275\u0275elementEnd()}}function Be(tt,At){if(1&tt){const oe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",38),e.\u0275\u0275listener("mousedown",function(){return e.\u0275\u0275restoreView(oe),e.\u0275\u0275nextContext().editor.applyStyle(0)})("touchstart",function(){return e.\u0275\u0275restoreView(oe),e.\u0275\u0275nextContext().editor.applyStyle(0)}),e.\u0275\u0275text(1,"Apply Style"),e.\u0275\u0275elementEnd()}}function et(tt,At){if(1&tt){const oe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",38),e.\u0275\u0275listener("mousedown",function(){return e.\u0275\u0275restoreView(oe),e.\u0275\u0275nextContext().editor.removeStyle(0)})("touchstart",function(){return e.\u0275\u0275restoreView(oe),e.\u0275\u0275nextContext().editor.removeStyle(0)}),e.\u0275\u0275text(1,"Remove Style"),e.\u0275\u0275elementEnd()}}function wt(tt,At){1&tt&&e.\u0275\u0275elementContainer(0)}function Ft(tt,At){if(1&tt&&e.\u0275\u0275template(0,wt,1,0,"ng-container",2),2&tt){const oe=At.i,O=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngTemplateOutlet",O.renderPanelTpl)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(2,R,oe))}}function dn(tt,At){if(1&tt){const oe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",25),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(oe),e.\u0275\u0275nextContext(2).editor.submit()}),e.\u0275\u0275text(1,"Save"),e.\u0275\u0275elementEnd()}}function Vt(tt,At){if(1&tt){const oe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",26),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(oe),e.\u0275\u0275nextContext(2).editor.onRulesClick()}),e.\u0275\u0275text(1,"Rules"),e.\u0275\u0275elementEnd()}}function ct(tt,At){if(1&tt){const oe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",8),e.\u0275\u0275listener("mousedown",function(){return e.\u0275\u0275restoreView(oe),e.\u0275\u0275nextContext(2).editor.onPersistenceClick()}),e.\u0275\u0275text(1,"Persistence"),e.\u0275\u0275elementEnd()}}function kt(tt,At){if(1&tt){const oe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",26),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(oe),e.\u0275\u0275nextContext(2).editor.onDeleteClick()}),e.\u0275\u0275text(1,"Delete"),e.\u0275\u0275elementEnd()}}function Pt(tt,At){1&tt&&e.\u0275\u0275element(0,"span",27)}function Yt(tt,At){1&tt&&e.\u0275\u0275elementContainer(0)}function Bt(tt,At){if(1&tt&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Yt,1,0,"ng-container",23),e.\u0275\u0275elementContainerEnd()),2&tt){const oe=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",oe.contextsMenuTpl)}}function pn(tt,At){1&tt&&e.\u0275\u0275elementContainer(0)}function _n(tt,At){1&tt&&(e.\u0275\u0275elementStart(0,"div",28),e.\u0275\u0275text(1,"d r u i d"),e.\u0275\u0275elementEnd())}function Cn(tt,At){if(1&tt){const oe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",5),e.\u0275\u0275elementStart(1,"mat-icon"),e.\u0275\u0275text(2,"menu"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"mat-menu",null,6),e.\u0275\u0275template(5,dn,2,0,"button",7),e.\u0275\u0275elementStart(6,"button",8),e.\u0275\u0275listener("mousedown",function(){return e.\u0275\u0275restoreView(oe),e.\u0275\u0275nextContext(),e.\u0275\u0275reference(1).addRow()}),e.\u0275\u0275text(7,"Add Row"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"button",9),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(oe),e.\u0275\u0275nextContext().editor.onPropertiesClick()}),e.\u0275\u0275text(9,"Props"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"button",8),e.\u0275\u0275listener("mousedown",function(){return e.\u0275\u0275restoreView(oe),e.\u0275\u0275nextContext(),e.\u0275\u0275reference(1).layoutSettings("global")}),e.\u0275\u0275text(11,"Layout Settings"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,Vt,2,0,"button",10),e.\u0275\u0275template(13,ct,2,0,"button",11),e.\u0275\u0275template(14,kt,2,0,"button",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(15,Pt,1,0,"span",12),e.\u0275\u0275elementStart(16,"div"),e.\u0275\u0275template(17,Bt,2,1,"ng-container",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div",14),e.\u0275\u0275elementStart(19,"mat-form-field"),e.\u0275\u0275elementStart(20,"mat-select",15),e.\u0275\u0275elementStart(21,"mat-option",16),e.\u0275\u0275text(22,"page"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"mat-option",17),e.\u0275\u0275text(24,"form"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"mat-option",18),e.\u0275\u0275text(26,"json"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"div",19),e.\u0275\u0275elementStart(28,"mat-form-field"),e.\u0275\u0275elementStart(29,"mat-select",20),e.\u0275\u0275elementStart(30,"mat-option",21),e.\u0275\u0275text(31,"gridless"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"mat-option",22),e.\u0275\u0275text(33,"split"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(34,pn,1,0,"ng-container",23),e.\u0275\u0275template(35,_n,2,0,"div",24)}if(2&tt){const oe=e.\u0275\u0275reference(4),O=e.\u0275\u0275nextContext();e.\u0275\u0275property("matMenuTriggerFor",oe),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",O.savable),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",O.nested),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",O.savable),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",O.nested),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",O.nested),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",O.savable),e.\u0275\u0275advance(17),e.\u0275\u0275property("ngTemplateOutlet",O.extraActionsAreaTmpl),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!O.nested)}}function xn(tt,At){if(1&tt){const oe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",35),e.\u0275\u0275listener("mousedown",function(){e.\u0275\u0275restoreView(oe);const I=e.\u0275\u0275nextContext().i;return e.\u0275\u0275nextContext().editor.applyStyle(I)})("touchstart",function(){e.\u0275\u0275restoreView(oe);const I=e.\u0275\u0275nextContext().i;return e.\u0275\u0275nextContext().editor.applyStyle(I)}),e.\u0275\u0275text(1,"Apply Style"),e.\u0275\u0275elementEnd()}}function Qn(tt,At){if(1&tt){const oe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",35),e.\u0275\u0275listener("mousedown",function(){e.\u0275\u0275restoreView(oe);const I=e.\u0275\u0275nextContext().i;return e.\u0275\u0275nextContext().editor.removeStyle(I)})("touchstart",function(){e.\u0275\u0275restoreView(oe);const I=e.\u0275\u0275nextContext().i;return e.\u0275\u0275nextContext().editor.removeStyle(I)}),e.\u0275\u0275text(1,"Remove Style"),e.\u0275\u0275elementEnd()}}function dr(tt,At){if(1&tt&&(e.\u0275\u0275elementStart(0,"div",36),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&tt){const oe=e.\u0275\u0275nextContext().i,O=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(O.editor.panelStyleTitle(oe))}}function ur(tt,At){if(1&tt){const oe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",29),e.\u0275\u0275elementStart(1,"mat-icon"),e.\u0275\u0275text(2,"arrow_drop_down"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"mat-menu",null,30),e.\u0275\u0275elementStart(5,"button",8),e.\u0275\u0275listener("mousedown",function(){const ce=e.\u0275\u0275restoreView(oe).i;return e.\u0275\u0275nextContext(),e.\u0275\u0275reference(1).layoutSettings("column",ce)}),e.\u0275\u0275text(6,"Layout Settings"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"button",31),e.\u0275\u0275listener("mousedown",function(){const ce=e.\u0275\u0275restoreView(oe).i;return e.\u0275\u0275nextContext().editor.addContent(ce)})("touchstart",function(){const ce=e.\u0275\u0275restoreView(oe).i;return e.\u0275\u0275nextContext().editor.addContent(ce)}),e.\u0275\u0275text(8,"Add Content"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"button",31),e.\u0275\u0275listener("mousedown",function(){const ce=e.\u0275\u0275restoreView(oe).i;return e.\u0275\u0275nextContext().editor.editPanelProps(ce)})("touchstart",function(){const ce=e.\u0275\u0275restoreView(oe).i;return e.\u0275\u0275nextContext().editor.editPanelProps(ce)}),e.\u0275\u0275text(10,"Props"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,xn,2,0,"button",32),e.\u0275\u0275template(12,Qn,2,0,"button",32),e.\u0275\u0275elementStart(13,"button",33),e.\u0275\u0275listener("mousedown",function(){const ce=e.\u0275\u0275restoreView(oe).i;return e.\u0275\u0275nextContext(),e.\u0275\u0275reference(1).removeColumn2(ce)})("touchstart",function(){const ce=e.\u0275\u0275restoreView(oe).i;return e.\u0275\u0275nextContext(),e.\u0275\u0275reference(1).removeColumn2(ce)}),e.\u0275\u0275text(14,"Delete"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(15,dr,2,1,"div",34)}if(2&tt){const oe=At.i,O=e.\u0275\u0275reference(4),I=e.\u0275\u0275nextContext();e.\u0275\u0275property("matMenuTriggerFor",O),e.\u0275\u0275advance(11),e.\u0275\u0275property("ngIf",!I.editor.hasPanelStyle(oe)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",I.editor.hasPanelStyle(oe)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",I.editor.hasPanelStyle(oe))}}function Xn(tt,At){1&tt&&e.\u0275\u0275elementContainer(0)}function ir(tt,At){if(1&tt&&(e.\u0275\u0275elementStart(0,"div",40),e.\u0275\u0275template(1,Xn,1,0,"ng-container",41),e.\u0275\u0275elementEnd()),2&tt){const oe=At.index,O=e.\u0275\u0275nextContext().i,I=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",I.editablePaneTpl)("ngTemplateOutletContext",e.\u0275\u0275pureFunction2(2,qt,O,oe))}}function mr(tt,At){if(1&tt){const oe=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ngx-dropzone",37),e.\u0275\u0275listener("change",function(I){const Te=e.\u0275\u0275restoreView(oe).i;return e.\u0275\u0275nextContext().editor.onFileChange(I,Te)})("cdkDropListDropped",function(I){return e.\u0275\u0275restoreView(oe),e.\u0275\u0275nextContext().editor.onDrop(I)}),e.\u0275\u0275elementStart(1,"div",null,38),e.\u0275\u0275template(3,ir,2,5,"div",39),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&tt){const oe=At.i,O=e.\u0275\u0275nextContext();e.\u0275\u0275property("cdkDropListData",oe)("multiple",!0)("disableClick",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",O.editor.panelPanes(oe).controls)}}function hr(tt,At){1&tt&&e.\u0275\u0275elementContainer(0)}function Or(tt,At){if(1&tt&&e.\u0275\u0275template(0,hr,1,0,"ng-container",2),2&tt){const oe=At.i,O=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngTemplateOutlet",O.renderPanelTpl)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(2,R,oe))}}let mi=(()=>{class tt{constructor(oe){this.attributeMatcher=oe,this.dashboard=[],this.layoutSetting=new N.yw,this.rowSettings=[],this.columnSettings=[]}get totalRows(){return 0==this.dashboard.length?0:this.dashboard.reduce((oe,O)=>O.y>oe?O.y:oe,0)+1}get direction(){const oe=this.attributeMatcher.getComputedValue("direction",this.layoutSetting?this.layoutSetting.settings:[]);return!oe||"column"!==oe.trim()&&"row"!==oe.trim()?"column":oe}ngOnInit(){console.log(this.dashboard)}itemIndex(oe,O){return this.dashboard.findIndex(I=>I.y===oe&&I.x===O)}totalColumns(oe){return this.dashboard.reduce((O,I)=>I.y===oe?O+1:O,0)}rowDirection(oe){const O=this.attributeMatcher.getComputedValue("direction",this.rowSettings&&this.rowSettings[oe]?this.rowSettings[oe].settings:[]);return!O||"column"!==O.trim()&&"row"!==O.trim()?"row":O}rowFlex(oe){return["flexGrow","flexShrink","flexBasis"].map(Te=>this.attributeMatcher.getComputedValue(Te,this.rowSettings&&this.rowSettings[oe]?this.rowSettings[oe].settings:[])).map(Te=>null!=Te&&""!==Te&&""!==Te.trim()?`${Te.trim()}`:"").join(" ")}gridItemInnerStyles(oe,O){const I=this.itemIndex(oe,O);return{height:this.calculateHeight(this.attributeMatcher.getComputedValue("height",this.columnSettings&&this.columnSettings[I]?this.columnSettings[I].settings:[]))}}calculateHeight(oe){return null!=oe?oe.trim():"auto"}}return tt.\u0275fac=function(oe){return new(oe||tt)(e.\u0275\u0275directiveInject(p.AttributeMatcherService))},tt.\u0275cmp=e.\u0275\u0275defineComponent({type:tt,selectors:[["classifieds-ui-flex-layout"]],contentQueries:function(oe,O,I){if(1&oe&&e.\u0275\u0275contentQuery(I,b,5),2&oe){let ce;e.\u0275\u0275queryRefresh(ce=e.\u0275\u0275loadQuery())&&(O.innerGridItemTmpl=ce.first)}},inputs:{dashboard:"dashboard",layoutSetting:"layoutSetting",rowSettings:"rowSettings",columnSettings:"columnSettings"},decls:2,vars:2,consts:[["fxFill","",3,"fxLayout"],[3,"fxFlex",4,"for"],[3,"fxFlex"],[3,"fxLayout","ngStyle"],["hidden",""],[1,"grid-item-inner",3,"ngStyle"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(oe,O){1&oe&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,me,3,5,"div",1),e.\u0275\u0275elementEnd()),2&oe&&(e.\u0275\u0275property("fxLayout",O.direction),e.\u0275\u0275advance(1),e.\u0275\u0275property("for",O.totalRows))},directives:[U.s9,U.xw,S.ForDirective,U.yH,n.NgStyle,H.Zl,n.NgTemplateOutlet],styles:[""]}),tt})(),$r=(()=>{class tt{constructor(){this.itemAdded=new e.EventEmitter,this.itemRemoved=new e.EventEmitter,this.dashboard=[],this.displayMainControls=!0,this.displayItemHeader=!0,this.itemHeights=[],this.rows=0}get grid(){return this.dashboard}get cumulativeHeight(){const oe=[];return this.heightsMatrix.forEach(O=>{oe.push(this.itemHeights.reduce((I,ce)=>ce>I?ce:I))}),oe.reduce((O,I)=>O+I)}get heightsMatrix(){return this.dashboard.reduce((oe,O,I)=>(oe[O.y]=void 0!==oe[O.y]?[...oe[O.y],this.itemHeights[I]]:[this.itemHeights[I]],oe),[])}ngOnInit(){}removeItem(oe){this.dashboard.splice(oe,1),this.itemHeights.splice(oe,1),this.itemRemoved.emit(oe)}addColumn(){console.log("add column grid"),this.dashboard.push({cols:1,rows:1,y:0,x:this.dashboard.length}),this.itemAdded.emit()}addRow(){this.dashboard.push({cols:1,rows:1,y:this.rows++,x:0}),this.itemAdded.emit()}setItemContentHeight(oe,O){this.itemHeights[oe]=O+(this.displayItemHeader?this.itemHeaderHeight(oe):0),this.refreshGridHeight()}refreshGridHeight(){this.gridster.calculateLayout(),this.gridHeight=this.cumulativeHeight+16*this.gridster.rows}itemHeaderHeight(oe){return this.itemHeaders.find((O,I)=>I===oe).nativeElement.offsetHeight}}return tt.\u0275fac=function(oe){return new(oe||tt)},tt.\u0275cmp=e.\u0275\u0275defineComponent({type:tt,selectors:[["classifieds-ui-grid-layout"]],contentQueries:function(oe,O,I){if(1&oe&&(e.\u0275\u0275contentQuery(I,Ee,5),e.\u0275\u0275contentQuery(I,b,5),e.\u0275\u0275contentQuery(I,se,5)),2&oe){let ce;e.\u0275\u0275queryRefresh(ce=e.\u0275\u0275loadQuery())&&(O.gridItemActionsTmpl=ce.first),e.\u0275\u0275queryRefresh(ce=e.\u0275\u0275loadQuery())&&(O.innerGridItemTmpl=ce.first),e.\u0275\u0275queryRefresh(ce=e.\u0275\u0275loadQuery())&&(O.extraActionsTmpl=ce.first)}},viewQuery:function(oe,O){if(1&oe&&(e.\u0275\u0275viewQuery(d.sm,5),e.\u0275\u0275viewQuery(ze,5),e.\u0275\u0275viewQuery(Ge,5)),2&oe){let I;e.\u0275\u0275queryRefresh(I=e.\u0275\u0275loadQuery())&&(O.gridster=I.first),e.\u0275\u0275queryRefresh(I=e.\u0275\u0275loadQuery())&&(O.mainControls=I.first),e.\u0275\u0275queryRefresh(I=e.\u0275\u0275loadQuery())&&(O.itemHeaders=I)}},inputs:{dashboard:"dashboard",displayMainControls:"displayMainControls",displayItemHeader:"displayItemHeader",options:"options"},outputs:{itemAdded:"itemAdded",itemRemoved:"itemRemoved"},decls:11,vars:6,consts:[[1,"layout-wrapper"],[1,"main-controls",3,"hidden"],["mainControls",""],["type","button",3,"mousedown"],[4,"ngTemplateOutlet"],[1,"layout-inner"],[3,"options"],[3,"item",4,"ngFor","ngForOf"],[3,"item"],["fxLayout","column","fxFill",""],["fxFlex","0 1 auto",1,"grid-item-header",3,"hidden"],["itemHeader",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button",1,"delete",3,"mousedown","touchstart"],["fxFlex","",1,"grid-item-inner"]],template:function(oe,O){1&oe&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"div",1,2),e.\u0275\u0275elementStart(3,"button",3),e.\u0275\u0275listener("mousedown",function(){return O.addColumn()}),e.\u0275\u0275text(4,"Add Column"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"button",3),e.\u0275\u0275listener("mousedown",function(){return O.addRow()}),e.\u0275\u0275text(6,"Add Row"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,xe,1,0,"ng-container",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",5),e.\u0275\u0275elementStart(9,"gridster",6),e.\u0275\u0275template(10,lt,9,10,"gridster-item",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&oe&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("hidden",!O.displayMainControls),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngTemplateOutlet",O.extraActionsTmpl),e.\u0275\u0275advance(1),e.\u0275\u0275styleProp("height",O.gridHeight,"px"),e.\u0275\u0275advance(1),e.\u0275\u0275property("options",O.options),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",O.dashboard))},directives:[d.sm,d.IM,n.NgTemplateOutlet,n.NgForOf,U.xw,U.s9,U.yH],styles:[".layout-wrapper[_ngcontent-%COMP%], .layout-inner[_ngcontent-%COMP%]{height:100%}.grid-item-header[_ngcontent-%COMP%]{background-color:#ccc;padding:.5em}button.delete[_ngcontent-%COMP%]{float:right}.main-controls[_ngcontent-%COMP%]{background-color:#fff;padding:.5em}"]}),tt})(),T=(()=>{class tt{constructor(){this.displayMainControls=!0,this.displayItemHeader=!0,this.nested=!1}ngOnInit(){}}return tt.\u0275fac=function(oe){return new(oe||tt)},tt.\u0275cmp=e.\u0275\u0275defineComponent({type:tt,selectors:[["classifieds-ui-gridless-layout"]],contentQueries:function(oe,O,I){if(1&oe&&(e.\u0275\u0275contentQuery(I,Ee,5),e.\u0275\u0275contentQuery(I,b,5),e.\u0275\u0275contentQuery(I,se,5)),2&oe){let ce;e.\u0275\u0275queryRefresh(ce=e.\u0275\u0275loadQuery())&&(O.gridItemActionsTmpl=ce.first),e.\u0275\u0275queryRefresh(ce=e.\u0275\u0275loadQuery())&&(O.innerGridItemTmpl=ce.first),e.\u0275\u0275queryRefresh(ce=e.\u0275\u0275loadQuery())&&(O.extraActionsTmpl=ce.first)}},hostVars:2,hostBindings:function(oe,O){2&oe&&e.\u0275\u0275classProp("is-nested",O.nested)},inputs:{displayMainControls:"displayMainControls",displayItemHeader:"displayItemHeader",nested:"nested"},decls:11,vars:9,consts:[[1,"layout-wrapper"],[1,"main-controls",3,"hidden"],["mainControls",""],[4,"ngTemplateOutlet"],[1,"layout-inner"],["fxLayout","column","fxFill",""],["fxFlex","0 1 auto",1,"grid-item-header",3,"hidden"],["itemHeader",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["fxFlex","",1,"grid-item-inner"]],template:function(oe,O){1&oe&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"div",1,2),e.\u0275\u0275template(3,He,1,0,"ng-container",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275elementStart(5,"div",5),e.\u0275\u0275elementStart(6,"div",6,7),e.\u0275\u0275template(8,Ye,1,0,"ng-container",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",9),e.\u0275\u0275template(10,ht,1,0,"ng-container",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&oe&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("hidden",!O.displayMainControls),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngTemplateOutlet",O.extraActionsTmpl),e.\u0275\u0275advance(3),e.\u0275\u0275property("hidden",!O.displayItemHeader),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngTemplateOutlet",O.gridItemActionsTmpl)("ngTemplateOutletContext",e.\u0275\u0275pureFunction0(7,Se)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngTemplateOutlet",O.innerGridItemTmpl)("ngTemplateOutletContext",e.\u0275\u0275pureFunction0(8,Se)))},directives:[n.NgTemplateOutlet,U.xw,U.s9,U.yH],styles:[".layout-wrapper[_ngcontent-%COMP%], .layout-inner[_ngcontent-%COMP%]{height:100%}.is-nested[_nghost-%COMP%]   .layout-wrapper[_ngcontent-%COMP%]{padding:0 .25em;border:1px solid #ccc}.main-controls[_ngcontent-%COMP%]{display:flex;padding:0;align-items:baseline;border-bottom:1px solid #ccc;margin-bottom:.25em}.grid-item-header[_ngcontent-%COMP%]{padding:0;display:flex;align-items:baseline}"]}),tt})(),M=(()=>{class tt{constructor(oe){this.fb=oe,this.settingValues=[],this.layoutForm=this.fb.group({settings:this.fb.control("")}),this.onTouched=()=>{}}get attributes(){return this.layout.settings.has(this.type)?this.layout.settings.get(this.type):[]}ngOnInit(){}writeValue(oe){oe&&this.layoutForm.setValue(oe,{emitEvent:!1})}registerOnChange(oe){this.layoutForm.valueChanges.subscribe(oe)}registerOnTouched(oe){this.onTouched=oe}setDisabledState(oe){oe?this.layoutForm.disable():this.layoutForm.enable()}validate(oe){return this.layoutForm.valid?null:{invalidForm:{valid:!1,message:"layout is invalid"}}}}return tt.\u0275fac=function(oe){return new(oe||tt)(e.\u0275\u0275directiveInject(x.qu))},tt.\u0275cmp=e.\u0275\u0275defineComponent({type:tt,selectors:[["druid-layout-form"]],inputs:{layout:"layout",type:"type",settingValues:"settingValues"},features:[e.\u0275\u0275ProvidersFeature([{provide:x.JU,useExisting:(0,e.forwardRef)(()=>tt),multi:!0},{provide:x.Cf,useExisting:(0,e.forwardRef)(()=>tt),multi:!0}])],decls:2,vars:3,consts:[[3,"formGroup"],["formControlName","settings",3,"attributes","attributeValues"]],template:function(oe,O){1&oe&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"classifieds-ui-attributes-builder",1),e.\u0275\u0275elementEnd()),2&oe&&(e.\u0275\u0275property("formGroup",O.layoutForm),e.\u0275\u0275advance(1),e.\u0275\u0275property("attributes",O.attributes)("attributeValues",O.settingValues))},directives:[p.AttributesBuilderComponent,x.JL,x.sg,x.JJ,x.u],styles:[""]}),tt})(),Y=(()=>{class tt{constructor(oe,O,I,ce){this.data=oe,this.dialogRef=O,this.valueComputerService=I,this.fb=ce,this.settingValues=[],this.dialogForm=this.fb.group({layout:this.fb.control("")})}get attrValues(){return""===this.dialogForm.get("layout").value?this.settingValues:this.dialogForm.get("layout").value.settings.map(oe=>new p.AttributeValue(oe))}ngOnInit(){this.layout=this.data.layout,this.type=this.data.type,this.settingValues=this.data.settingValues}submit(){console.log(this.attrValues);const oe=this.valueComputerService.compute(this.attrValues);this.dialogRef.close(oe)}}return tt.\u0275fac=function(oe){return new(oe||tt)(e.\u0275\u0275directiveInject(ue.WI),e.\u0275\u0275directiveInject(ue.so),e.\u0275\u0275directiveInject(p.ValueComputerService),e.\u0275\u0275directiveInject(x.qu))},tt.\u0275cmp=e.\u0275\u0275defineComponent({type:tt,selectors:[["druid-layout-dialog"]],decls:6,vars:5,consts:[[1,"layout-form",3,"formGroup","ngSubmit"],["formControlName","layout",3,"layout","type","settingValues"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"]],template:function(oe,O){1&oe&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("ngSubmit",function(){return O.submit()}),e.\u0275\u0275elementStart(1,"mat-dialog-content"),e.\u0275\u0275element(2,"druid-layout-form",1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"mat-dialog-actions"),e.\u0275\u0275elementStart(4,"button",2),e.\u0275\u0275text(5,"Save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&oe&&(e.\u0275\u0275property("formGroup",O.dialogForm),e.\u0275\u0275advance(2),e.\u0275\u0275property("layout",O.layout)("type",O.type)("settingValues",O.settingValues),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",!O.dialogForm.valid))},directives:[M,G.lW,x._Y,x.JL,x.sg,ue.xY,x.JJ,x.u,ue.H8,ue.ZT],styles:[""]}),tt})(),J=(()=>{class tt extends ee.BasePluginManager{constructor(oe,O){super(oe,O)}pluginDef(){return(0,X.of)(new ee.PluginDef({name:"layout"}))}}return tt.\u0275fac=function(oe){return new(oe||tt)(e.\u0275\u0275inject(ee.PluginConfigurationManager),e.\u0275\u0275inject(S.ModuleLoaderService))},tt.\u0275prov=e.\u0275\u0275defineInjectable({token:tt,factory:tt.\u0275fac,providedIn:"root"}),tt})(),ge=(()=>{class tt{constructor(oe,O,I){this.el=oe,this.dialog=O,this.lpm=I,this.itemAdded=new e.EventEmitter,this.itemRemoved=new e.EventEmitter,this.dashboard=[],this.displayMainControls=!0,this.displayItemHeader=!0,this.nested=!1,this.layoutSettingChange=new e.EventEmitter,this.rowSettingsChange=new e.EventEmitter,this.columnSettingsChange=new e.EventEmitter,this.rows=0,this.sizes=[]}get totalRows(){return 0==this.dashboard.length?0:this.dashboard.reduce((oe,O)=>O.y>oe?O.y:oe,0)+1}ngOnInit(){if(0===this.dashboard.length)this.addRow();else{for(let O=0;O<this.totalRows;O++){const I=this.totalColumns(O);this.sizes.push([]);for(let ce=0;ce<I;ce++){const Te=this.itemIndex(O,ce);this.sizes[O].push(this.dashboard[Te].cols)}}if(this.totalRows!==this.rowSettings.length&&0===this.rowSettings.length){const O=[];for(let I=0;I<this.totalRows;I++)O.push(new N.yw);this.rowSettings=O,this.rowSettingsChange.emit(this.rowSettings)}let oe=0;for(let O=0;O<this.totalRows;O++)oe+=this.totalColumns(O);if(oe!==this.columnSettings.length&&0===this.columnSettings.length){const O=[];for(let I=0;I<this.totalRows;I++)for(let ce=0;ce<this.totalColumns(I);ce++)O.push(new N.yw);this.columnSettings=O,this.columnSettingsChange.emit(this.columnSettings)}}}removeRow(oe){const O=this.dashboard.reduce((Te,at,Tt)=>[...Te,...at.y===oe?[Tt]:[]],[]);let I=O.length,ce=0;for(let Te=0;Te<I;Te++)this.dashboard.splice(O[Te]-ce,1),this.rowSettings.splice(oe,1),ce++,this.itemRemoved.emit(O[Te]),this.rowSettingsChange.emit(this.rowSettings);I=this.dashboard.length;for(let Te=0;Te<I;Te++)this.dashboard[Te].y>oe&&(this.dashboard[Te].y=this.dashboard[Te].y-1)}removeColumn(oe,O){const I=this.itemIndex(oe,O);this.dashboard.splice(I,1),this.itemRemoved.emit(I)}removeColumn2(oe){this.dashboard.splice(oe,1),this.itemRemoved.emit(oe)}addRow(){this.sizes.push([]),this.rowSettings=[...this.rowSettings.map(oe=>new N.yw(oe)),new N.yw],this.addColumn(0===this.totalRows?0:this.totalRows),this.rowSettingsChange.emit(this.rowSettings)}addColumn(oe){const O=this.totalColumns(oe),I=0===O?100:100/(O+1);this.sizes[oe][O]=I,this.dashboard.push({cols:I,rows:1,y:oe,x:O}),this.itemAdded.emit(),setTimeout(()=>this.resetGutter())}dragEnd(oe,{sizes:O}){const I=this.dashboard.length;let ce=0;this.sizes[oe]=[...O];const Te=this.dashboard.map(at=>({...at}));for(let at=0;at<I;at++)this.dashboard[at].y===oe&&(Te[at].cols=O[ce],ce+=1);this.dashboard=Te}itemIndex(oe,O){return this.dashboard.findIndex(I=>I.y===oe&&I.x===O)}itemSize(oe,O){return this.dashboard[this.itemIndex(oe,O)].cols}totalColumns(oe){return this.dashboard.reduce((O,I)=>I.y===oe?O+1:O,0)}resetGutter(){this.el.nativeElement.querySelectorAll(".as-split-gutter").forEach(oe=>{oe.style.height="auto"})}settingValues(oe,O){switch(oe){case"column":return this.columnSettings[O].settings;case"row":return this.rowSettings[O].settings;case"global":return this.layoutSetting.settings;default:return[]}}layoutSettings(oe,O){this.lpm.getPlugin("split").pipe((0,Q.w)(I=>this.dialog.open(Y,{data:{layout:I,type:oe,settingValues:this.settingValues(oe,O)}}).afterClosed()),(0,Z.h)(I=>!!I)).subscribe(I=>{switch(oe){case"column":this.columnSettings=this.columnSettings.map((ce,Te)=>new N.yw(Te===O?{settings:I.map(at=>new p.AttributeValue(at))}:ce)),console.log(this.columnSettings),this.columnSettingsChange.emit(this.columnSettings);break;case"row":this.rowSettings=this.rowSettings.map((ce,Te)=>new N.yw(Te===O?{settings:I.map(at=>new p.AttributeValue(at))}:ce)),console.log(this.rowSettings),this.rowSettingsChange.emit(this.rowSettings);break;case"global":this.layoutSetting=new N.yw({settings:I.map(ce=>new p.AttributeValue(ce))}),this.layoutSettingChange.emit(this.layoutSetting)}})}}return tt.\u0275fac=function(oe){return new(oe||tt)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(ue.uw),e.\u0275\u0275directiveInject(J))},tt.\u0275cmp=e.\u0275\u0275defineComponent({type:tt,selectors:[["classifieds-ui-split-layout"]],contentQueries:function(oe,O,I){if(1&oe&&(e.\u0275\u0275contentQuery(I,Ee,5),e.\u0275\u0275contentQuery(I,b,5),e.\u0275\u0275contentQuery(I,se,5)),2&oe){let ce;e.\u0275\u0275queryRefresh(ce=e.\u0275\u0275loadQuery())&&(O.gridItemActionsTmpl=ce.first),e.\u0275\u0275queryRefresh(ce=e.\u0275\u0275loadQuery())&&(O.innerGridItemTmpl=ce.first),e.\u0275\u0275queryRefresh(ce=e.\u0275\u0275loadQuery())&&(O.extraActionsTmpl=ce.first)}},viewQuery:function(oe,O){if(1&oe&&(e.\u0275\u0275viewQuery(ze,5),e.\u0275\u0275viewQuery(Ge,5),e.\u0275\u0275viewQuery($.zE,5)),2&oe){let I;e.\u0275\u0275queryRefresh(I=e.\u0275\u0275loadQuery())&&(O.mainControls=I.first),e.\u0275\u0275queryRefresh(I=e.\u0275\u0275loadQuery())&&(O.itemHeaders=I),e.\u0275\u0275queryRefresh(I=e.\u0275\u0275loadQuery())&&(O.splitAreas=I)}},hostVars:2,hostBindings:function(oe,O){2&oe&&e.\u0275\u0275classProp("is-nested",O.nested)},inputs:{dashboard:"dashboard",displayMainControls:"displayMainControls",displayItemHeader:"displayItemHeader",nested:"nested",layoutSetting:"layoutSetting",rowSettings:"rowSettings",columnSettings:"columnSettings"},outputs:{itemAdded:"itemAdded",itemRemoved:"itemRemoved",layoutSettingChange:"layoutSettingChange",rowSettingsChange:"rowSettingsChange",columnSettingsChange:"columnSettingsChange"},decls:6,vars:3,consts:[[1,"layout-wrapper"],[1,"main-controls",3,"hidden"],["mainControls",""],[4,"ngTemplateOutlet"],[1,"layout-inner"],["class","rows-wrapper",4,"for"],[1,"rows-wrapper"],[1,"row-controls"],["mat-button","","type","button",3,"matMenuTriggerFor"],["rowActions","matMenu"],["type","button","mat-menu-item","",3,"mousedown"],["type","button","mat-menu-item","",1,"remove-row",3,"mousedown"],[1,"rows-inner"],["unit","percent","direction","horizontal",3,"dragEnd"],[3,"size",4,"for"],[3,"size"],["fxLayout","column","fxFill",""],[1,"grid-item-header",3,"hidden"],["itemHeader",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["fxFlex","",1,"grid-item-inner"]],template:function(oe,O){1&oe&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"div",1,2),e.\u0275\u0275template(3,he,1,0,"ng-container",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275template(5,we,16,2,"div",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&oe&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("hidden",!O.displayMainControls),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngTemplateOutlet",O.extraActionsTmpl),e.\u0275\u0275advance(2),e.\u0275\u0275property("for",O.totalRows))},directives:[G.lW,ve.Hw,Oe.VK,Oe.OP,$.Mq,n.NgTemplateOutlet,S.ForDirective,Oe.p6,$.zE,U.xw,U.s9,U.yH],styles:[".layout-wrapper[_ngcontent-%COMP%], .layout-inner[_ngcontent-%COMP%]{height:100%}.grid-item-header[_ngcontent-%COMP%]{padding:0;display:flex;align-items:baseline}button.delete[_ngcontent-%COMP%]{float:right}.main-controls[_ngcontent-%COMP%]{display:flex;padding:0;align-items:baseline}.rows-inner[_ngcontent-%COMP%]{height:auto;background-color:#fff}.row-controls[_ngcontent-%COMP%]{background-color:gray;padding:0}.remove-row[_ngcontent-%COMP%]{float:right}.is-nested[_nghost-%COMP%]   .layout-wrapper[_ngcontent-%COMP%]{padding:0 .25em;border:1px solid #ccc}.mat-menu-trigger[_ngcontent-%COMP%]{min-width:0;padding:0;margin:0;color:#fff}.mat-menu-trigger[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{transform:rotate(-90deg)}"]}),tt})();class Ce extends ee.Plugin{constructor(At){if(super(At),this.settings=new Map,At.settings){const oe=[];this.renderer=At.renderer,this.editor=At.editor,At.settings.forEach((O,I)=>{oe.push([I,O.map(ce=>new p.Attribute(ce))])}),this.settings=new Map(oe)}}}let We=(()=>{class tt extends N.z1{constructor(oe){super(oe),this.controlContainer=oe}ngOnInit(){}}return tt.\u0275fac=function(oe){return new(oe||tt)(e.\u0275\u0275directiveInject(x.gN))},tt.\u0275cmp=e.\u0275\u0275defineComponent({type:tt,selectors:[["classifieds-ui-gridless-layout-editor"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:20,vars:9,consts:[["cdkDropListGroup","",3,"formGroup","nested"],["extraActions",""],["gridItemActions",""],["innerGridItem",""],["topActions","matMenu"],["mat-menu-item","","type","submit",3,"click",4,"ngIf"],["type","button","mat-menu-item","",3,"click",4,"ngIf"],["type","button","mat-menu-item","",3,"mousedown",4,"ngIf"],["type","button","mat-menu-item","",3,"mousedown","touchstart"],["mat-menu-item","","type","button",3,"mousedown","touchstart",4,"ngIf"],["mat-button","","type","button",3,"matMenuTriggerFor"],[4,"ngIf"],["class","style-title",4,"ngIf"],["class","spacer",4,"ngIf"],[4,"ngTemplateOutlet"],[1,"display-type"],["required","","formControlName","displayType"],["value","page"],["value","form"],["value","json"],[1,"layout-type"],["required","","formControlName","layoutType"],["value","grid"],["value","gridless"],["value","split"],["class","brand",4,"ngIf"],[1,"style-title"],[1,"spacer"],[1,"brand"],["mat-button","","type","button",3,"matMenuTriggerFor",4,"ngIf"],["cdkDropList","",1,"panel-dropzone",3,"cdkDropListData","multiple","disableClick","change","cdkDropListDropped"],["panes",""],["cdkDrag","",4,"ngFor","ngForOf"],["cdkDrag",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["mat-menu-item","","type","submit",3,"click"],["type","button","mat-menu-item","",3,"click"],["type","button","mat-menu-item","",3,"mousedown"],["mat-menu-item","","type","button",3,"mousedown","touchstart"]],template:function(oe,O){1&oe&&(e.\u0275\u0275elementStart(0,"classifieds-ui-gridless-layout",0),e.\u0275\u0275template(1,ye,27,8,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(3,st,2,2,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(5,Lt,4,4,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"mat-menu",null,4),e.\u0275\u0275template(9,zt,2,0,"button",5),e.\u0275\u0275template(10,$e,2,0,"button",6),e.\u0275\u0275template(11,Ot,2,0,"button",6),e.\u0275\u0275template(12,Ke,2,0,"button",6),e.\u0275\u0275template(13,rt,2,0,"button",7),e.\u0275\u0275elementStart(14,"button",8),e.\u0275\u0275listener("mousedown",function(){return O.editor.addContent(0)})("touchstart",function(){return O.editor.addContent(0)}),e.\u0275\u0275text(15,"Add Content"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"button",8),e.\u0275\u0275listener("mousedown",function(){return O.editor.editPanelProps(0)})("touchstart",function(){return O.editor.editPanelProps(0)}),e.\u0275\u0275text(17,"Props"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(18,Be,2,0,"button",9),e.\u0275\u0275template(19,et,2,0,"button",9),e.\u0275\u0275elementEnd()),2&oe&&(e.\u0275\u0275property("formGroup",O.controlContainer.control)("nested",O.nested),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",O.savable),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",O.savable||O.nested),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",O.nested),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",O.nested),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",O.savable),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",!O.editor.hasPanelStyle(0)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",O.editor.hasPanelStyle(0)))},directives:[T,G.lW,ve.Hw,Le.KE,be.gD,m.ey,V._f,Oe.VK,Oe.OP,P.Fd,x.JL,x.sg,Oe.p6,n.NgIf,n.NgTemplateOutlet,x.Q7,x.JJ,x.u,P.Wj,n.NgForOf,P.Zt],styles:[".layout-type[_ngcontent-%COMP%]     .mat-form-field-wrapper, .display-type[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0}.layout-type[_ngcontent-%COMP%]     .mat-form-field-label-wrapper, .display-type[_ngcontent-%COMP%]     .mat-form-field-label-wrapper{display:none}.layout-type[_ngcontent-%COMP%]     .mat-form-field-infix, .display-type[_ngcontent-%COMP%]     .mat-form-field-infix{border-top:none;padding:0;margin:0}.layout-type[_ngcontent-%COMP%]     .mat-form-field, .display-type[_ngcontent-%COMP%]     .mat-form-field{width:70px}.layout-type[_ngcontent-%COMP%]     .mat-select-value, .display-type[_ngcontent-%COMP%]     .mat-select-value{text-align:right}.layout-type[_ngcontent-%COMP%]     .mat-form-field-underline, .display-type[_ngcontent-%COMP%]     .mat-form-field-underline{display:none}.mat-menu-trigger[_ngcontent-%COMP%]{min-width:0;padding:0;margin:0}.cdk-drag[_ngcontent-%COMP%]{padding:.25em}.brand[_ngcontent-%COMP%]{font-family:sans-serif;text-align:right;flex:1}.spacer[_ngcontent-%COMP%]{flex:1}.style-title[_ngcontent-%COMP%]{font-family:sans-serif;font-weight:500;text-transform:lowercase;color:#000}.mat-icon[_ngcontent-%COMP%]{transform:rotate(-90deg);color:#000}"]}),tt})(),pt=(()=>{class tt extends N.Jr{constructor(oe){super(oe),this.controlContainer=oe}ngOnInit(){}}return tt.\u0275fac=function(oe){return new(oe||tt)(e.\u0275\u0275directiveInject(x.gN,8))},tt.\u0275cmp=e.\u0275\u0275defineComponent({type:tt,selectors:[["classifieds-ui-gridless-layout-renderer"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[3,"displayMainControls","displayItemHeader"],["innerGridItem",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(oe,O){1&oe&&(e.\u0275\u0275elementStart(0,"classifieds-ui-gridless-layout",0),e.\u0275\u0275template(1,Ft,1,4,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&oe&&e.\u0275\u0275property("displayMainControls",O.displayMainControls)("displayItemHeader",O.displayItemHeader)},directives:[T,n.NgTemplateOutlet],styles:["[_nghost-%COMP%]{height:100%}"]}),tt})(),dt=(()=>{class tt extends N.z1{constructor(oe){super(oe),this.controlContainer=oe}get gridItems(){return this.dashboard.map((oe,O)=>({...oe,cols:Math.floor(oe.cols),weight:O}))}ngOnInit(){}}return tt.\u0275fac=function(oe){return new(oe||tt)(e.\u0275\u0275directiveInject(x.gN))},tt.\u0275cmp=e.\u0275\u0275defineComponent({type:tt,selectors:[["classifieds-ui-split-layout-editor"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:8,vars:6,consts:[["cdkDropListGroup","",3,"nested","formGroup","dashboard","layoutSetting","rowSettings","columnSettings","itemAdded","itemRemoved","layoutSettingChange","rowSettingsChange","columnSettingsChange"],["splitLayout",""],["extraActions",""],["gridItemActions",""],["innerGridItem",""],["mat-button","","type","button",3,"matMenuTriggerFor"],["topActions","matMenu"],["mat-menu-item","","type","submit",3,"click",4,"ngIf"],["type","button","mat-menu-item","",3,"mousedown"],["type","button","mat-menu-item","",3,"click"],["mat-menu-item","","type","button",3,"click",4,"ngIf"],["type","button","mat-menu-item","",3,"mousedown",4,"ngIf"],["class","spacer",4,"ngIf"],[4,"ngIf"],[1,"display-type"],["required","","formControlName","displayType"],["value","page"],["value","form"],["value","json"],[1,"layout-type"],["required","","formControlName","layoutType"],["value","gridless"],["value","split"],[4,"ngTemplateOutlet"],["class","brand",4,"ngIf"],["mat-menu-item","","type","submit",3,"click"],["mat-menu-item","","type","button",3,"click"],[1,"spacer"],[1,"brand"],["mat-button","","type","button",1,"panel-actions-btn",3,"matMenuTriggerFor"],["panelActions","matMenu"],["type","button","mat-menu-item","",3,"mousedown","touchstart"],["mat-menu-item","","type","button",3,"mousedown","touchstart",4,"ngIf"],["type","button","mat-menu-item","",1,"delete",3,"mousedown","touchstart"],["class","style-title",4,"ngIf"],["mat-menu-item","","type","button",3,"mousedown","touchstart"],[1,"style-title"],["cdkDropList","",1,"panel-dropzone",3,"cdkDropListData","multiple","disableClick","change","cdkDropListDropped"],["panes",""],["cdkDrag","",4,"ngFor","ngForOf"],["cdkDrag",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(oe,O){1&oe&&(e.\u0275\u0275elementStart(0,"classifieds-ui-split-layout",0,1),e.\u0275\u0275listener("itemAdded",function(){return O.editor.onItemAdded()})("itemRemoved",function(ce){return O.editor.onItemRemoved(ce)})("layoutSettingChange",function(ce){return O.editor.onLayoutSettingChange(ce)})("rowSettingsChange",function(ce){return O.editor.onRowSettingsChange(ce)})("columnSettingsChange",function(ce){return O.editor.onColumnSettingsChange(ce)}),e.\u0275\u0275template(2,Cn,36,9,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(4,ur,16,4,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(6,mr,4,4,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&oe&&e.\u0275\u0275property("nested",O.nested)("formGroup",O.controlContainer.control)("dashboard",O.dashboard)("layoutSetting",O.layoutSetting)("rowSettings",O.rowSettings)("columnSettings",O.columnSettings)},directives:[ge,G.lW,ve.Hw,Oe.VK,Oe.OP,Le.KE,be.gD,m.ey,V._f,P.Fd,x.JL,x.sg,Oe.p6,n.NgIf,n.NgTemplateOutlet,x.Q7,x.JJ,x.u,P.Wj,n.NgForOf,P.Zt],styles:[".layout-type[_ngcontent-%COMP%]     .mat-form-field-wrapper, .display-type[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0}.layout-type[_ngcontent-%COMP%]     .mat-form-field-label-wrapper, .display-type[_ngcontent-%COMP%]     .mat-form-field-label-wrapper{display:none}.layout-type[_ngcontent-%COMP%]     .mat-form-field-infix, .display-type[_ngcontent-%COMP%]     .mat-form-field-infix{border-top:none;padding:0;margin:0}.layout-type[_ngcontent-%COMP%]     .mat-form-field, .display-type[_ngcontent-%COMP%]     .mat-form-field{width:70px}.layout-type[_ngcontent-%COMP%]     .mat-select-value, .display-type[_ngcontent-%COMP%]     .mat-select-value{text-align:right}.layout-type[_ngcontent-%COMP%]     .mat-form-field-underline, .display-type[_ngcontent-%COMP%]     .mat-form-field-underline{display:none}.mat-menu-trigger[_ngcontent-%COMP%]{min-width:0;padding:0;margin:0}.cdk-drag[_ngcontent-%COMP%]{padding:.25em}.panel-actions-btn[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{transform:rotate(-90deg)}.brand[_ngcontent-%COMP%]{font-family:sans-serif;text-align:right;flex:1}.spacer[_ngcontent-%COMP%]{flex:1}.style-title[_ngcontent-%COMP%]{font-family:sans-serif;font-weight:500;text-transform:lowercase;color:#000}"]}),tt})(),xt=(()=>{class tt extends N.Jr{constructor(oe){super(oe),this.controlContainer=oe}ngOnInit(){}}return tt.\u0275fac=function(oe){return new(oe||tt)(e.\u0275\u0275directiveInject(x.gN,8))},tt.\u0275cmp=e.\u0275\u0275defineComponent({type:tt,selectors:[["classifieds-ui-flex-layout-renderer"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[[3,"dashboard","layoutSetting","rowSettings","columnSettings"],["innerGridItem",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(oe,O){1&oe&&(e.\u0275\u0275elementStart(0,"classifieds-ui-flex-layout",0),e.\u0275\u0275template(1,Or,1,4,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&oe&&e.\u0275\u0275property("dashboard",null==O.panelPage?null:O.panelPage.gridItems)("layoutSetting",O.panelPage.layoutSetting)("rowSettings",O.panelPage.rowSettings)("columnSettings",O.columnSettings)},directives:[mi,n.NgTemplateOutlet],encapsulation:2}),tt})();const Mt=()=>{const tt=new Map([["row",[new p.Attribute({name:"flexGrow",type:p.AttributeTypes.Text,label:"Flex Grow",required:!1,widget:"text",options:{},attributes:[]}),new p.Attribute({name:"flexShrink",type:p.AttributeTypes.Text,label:"Flex Shrink",required:!1,widget:"text",options:{},attributes:[]}),new p.Attribute({name:"flexBasis",type:p.AttributeTypes.Text,label:"Flex Basis",required:!1,widget:"text",options:{},attributes:[]}),new p.Attribute({name:"height",type:p.AttributeTypes.Text,label:"Height",required:!1,widget:"text",options:{},attributes:[]}),new p.Attribute({name:"direction",type:p.AttributeTypes.Text,label:"Direction",required:!1,widget:"text",options:{},attributes:[]})]],["column",[new p.Attribute({name:"height",type:p.AttributeTypes.Text,label:"Height",required:!1,widget:"text",options:{},attributes:[]})]],["global",[new p.Attribute({name:"direction",type:p.AttributeTypes.Text,label:"Direction",required:!1,widget:"text",options:{},attributes:[]})]]]);return new Ce({id:"split",title:"Split",editor:dt,renderer:xt,settings:tt})};let St=(()=>{class tt{constructor(oe){[Mt(),new Ce({id:"gridless",title:"Gridless",editor:We,renderer:pt,settings:new Map})].forEach(O=>{oe.register(O)})}}return tt.\u0275fac=function(oe){return new(oe||tt)(e.\u0275\u0275inject(J))},tt.\u0275mod=e.\u0275\u0275defineNgModule({type:tt}),tt.\u0275inj=e.\u0275\u0275defineInjector({imports:[[n.CommonModule,x.u5,x.UX,c.MaterialModule,y.o9,$.fX,d.IX,V.bB,S.UtilsModule,z.W,p.AttributesModule]]}),tt})()},2579:(it,K,u)=>{u.d(K,{nS:()=>Uy,yk:()=>ip,xt:()=>op,cO:()=>By,rB:()=>Ly});var t,e=u(7451),n=u(3192),y=u(2062),x=u(3336),$=u(1640),c=u(745),d=u(4363),p=u(6088),z=u(635),S=u(4929),V=function(){function t(){this.onabort=null,this._aborted=!1,Object.defineProperty(this,"_aborted",{value:!1,writable:!0})}return Object.defineProperty(t.prototype,"aborted",{get:function(){return this._aborted},enumerable:!1,configurable:!0}),t.prototype.abort=function(){this._aborted=!0,this.onabort&&(this.onabort(this),this.onabort=null)},t}(),N=function(){function t(){this.signal=new V}return t.prototype.abort=function(){this.signal.abort()},t}(),ee=(u(9709),u(6510)),ve=function(t){return"string"==typeof t&&0===t.indexOf("arn:")&&t.split(":").length>=6},be=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,m=/(\d+\.){3}\d+/,P=/\.\./,b=/\./,_=/^(.+\.)?s3(-fips)?(\.dualstack)?[.-]([a-z0-9-]+)\./,R=/^s3(-external-1)?\.amazonaws\.com$/,E="amazonaws.com",Ee=function(t){var l=t.match(_);return[l[4],t.replace(new RegExp("^"+l[0]),"")]},He=function(t,l){if(""===t)throw new Error("ARN region is empty");if(l.useFipsEndpoint){if(!l.allowFipsRegion)throw new Error("FIPS region is not supported");if(!ht(t,l.clientRegion))throw new Error("Client FIPS region "+l.clientRegion+" doesn't match region "+t+" in ARN")}if(!l.useArnRegion&&!ht(t,l.clientRegion||"")&&!ht(t,l.clientSigningRegion||""))throw new Error("Region in ARN is incompatible, got "+t+" but expected "+l.clientRegion)},Ye=function(t){if(["s3-external-1","aws-global"].includes(t))throw new Error("Client region "+t+" is not regional")},ht=function(t,l){return t===l},he=function(t,l){if(void 0===l&&(l={tlsCompatible:!0}),t.length>=64||!/^[a-z0-9][a-z0-9.-]*[a-z0-9]$/.test(t)||/(\d+\.){3}\d+/.test(t)||/[.-]{2}/.test(t)||(null==l?void 0:l.tlsCompatible)&&b.test(t))throw new Error("Invalid DNS label "+t)},Je=function(t){if(t)throw new Error("Dualstack endpoint is not supported with Outpost or Multi-region Access Point ARN.")},ut=function(t){return function(t){if(t.isCustomEndpoint){if(t.dualstackEndpoint)throw new Error("Dualstack endpoint is not supported with custom endpoint");if(t.accelerateEndpoint)throw new Error("Accelerate endpoint is not supported with custom endpoint")}}(t),function(t){return"string"==typeof t.bucketName}(t)?le(t):D(t)},le=function(t){var l=t.accelerateEndpoint,r=void 0!==l&&l,j=t.baseHostname,L=t.bucketName,W=t.dualstackEndpoint,F=void 0!==W&&W,je=t.pathStyleEndpoint,vt=void 0!==je&&je,Et=t.tlsCompatible,ft=void 0===Et||Et,ln=t.isCustomEndpoint,sr=(0,S.CR)(void 0!==ln&&ln?[t.clientRegion,j]:function(t){return R.test(t)?["us-east-1",E]:Ee(t)}(j),2),yr=sr[0],si=sr[1];return vt||!function(t){return be.test(t)&&!m.test(t)&&!P.test(t)}(L)||ft&&b.test(L)?{bucketEndpoint:!1,hostname:F?"s3.dualstack."+yr+"."+si:j}:(r?j="s3-accelerate"+(F?".dualstack":"")+"."+si:F&&(j="s3.dualstack."+yr+"."+si),{bucketEndpoint:!0,hostname:L+"."+j})},D=function(t){var r=t.baseHostname,a=t.clientRegion,j=t.isCustomEndpoint?r:function(t){return R.test(t)?[t.replace("."+E,""),E]:Ee(t)}(r)[1],W=t.accelerateEndpoint,je=t.tlsCompatible,vt=void 0===je||je,Et=t.bucketName,ft=t.clientPartition,ln=void 0===ft?"aws":ft;!function(t){if(t.pathStyleEndpoint)throw new Error("Path-style S3 endpoint is not supported when bucket is an ARN");if(t.accelerateEndpoint)throw new Error("Accelerate endpoint is not supported when bucket is an ARN");if(!t.tlsCompatible)throw new Error("HTTPS is required when bucket is an ARN")}({pathStyleEndpoint:t.pathStyleEndpoint,accelerateEndpoint:void 0!==W&&W,tlsCompatible:vt});var Wn=Et.service,sr=Et.partition,yr=Et.accountId,si=Et.region,ei=Et.resource;(function(t){if("s3"!==t&&"s3-outposts"!==t&&"s3-object-lambda"!==t)throw new Error("Expect 's3' or 's3-outposts' or 's3-object-lambda' in ARN service component")})(Wn),function(t,l){if(t!==l.clientPartition)throw new Error('Partition in ARN is incompatible, got "'+t+'" but expected "'+l.clientPartition+'"')}(sr,{clientPartition:ln}),function(t){if(!/[0-9]{12}/.exec(t))throw new Error("Access point ARN accountID does not match regex '[0-9]{12}'")}(yr);var ii=function(t){var l=t.includes(":")?":":"/",r=(0,S.CR)(t.split(l)),a=r[0],j=r.slice(1);if("accesspoint"===a){if(1!==j.length||""===j[0])throw new Error("Access Point ARN should have one resource accesspoint"+l+"{accesspointname}");return{accesspointName:j[0]}}if("outpost"===a){if(!j[0]||"accesspoint"!==j[1]||!j[2]||3!==j.length)throw new Error("Outpost ARN should have resource outpost"+l+"{outpostId}"+l+"accesspoint"+l+"{accesspointName}");var L=(0,S.CR)(j,3);return{outpostId:L[0],accesspointName:L[2]}}throw new Error("ARN resource should begin with 'accesspoint"+l+"' or 'outpost"+l+"'")}(ei),Ri=ii.accesspointName,vs=ii.outpostId;return"s3-object-lambda"===Wn?C((0,S.pi)((0,S.pi)({},t),{tlsCompatible:vt,bucketName:Et,accesspointName:Ri,hostnameSuffix:j})):""===si?g((0,S.pi)((0,S.pi)({},t),{clientRegion:a,mrapAlias:Ri,hostnameSuffix:j})):vs?B((0,S.pi)((0,S.pi)({},t),{clientRegion:a,outpostId:vs,accesspointName:Ri,hostnameSuffix:j})):de((0,S.pi)((0,S.pi)({},t),{clientRegion:a,accesspointName:Ri,hostnameSuffix:j}))},C=function(t){var l=t.dualstackEndpoint,r=void 0!==l&&l,a=t.fipsEndpoint,j=void 0!==a&&a,L=t.tlsCompatible,W=void 0===L||L,F=t.useArnRegion,_e=t.clientRegion,Ie=t.clientSigningRegion,je=void 0===Ie?_e:Ie,vt=t.accesspointName,Et=t.bucketName,ft=t.hostnameSuffix,ln=Et.accountId,Wn=Et.region,sr=Et.service;Ye(_e),He(Wn,{useArnRegion:F,clientRegion:_e,clientSigningRegion:je,allowFipsRegion:!0,useFipsEndpoint:j}),Je(r);var yr=vt+"-"+ln;return he(yr,{tlsCompatible:W}),{bucketEndpoint:!0,hostname:yr+"."+sr+(j?"-fips":"")+"."+(F?Wn:_e)+"."+ft,signingRegion:F?Wn:je,signingService:sr}},g=function(t){var r=t.dualstackEndpoint,a=void 0!==r&&r,j=t.isCustomEndpoint,L=t.mrapAlias,W=t.hostnameSuffix;if(!0===t.disableMultiregionAccessPoints)throw new Error("SDK is attempting to use a MRAP ARN. Please enable to feature.");return function(t){try{t.split(".").forEach(function(l){he(l)})}catch{throw new Error('"'+t+'" is not a DNS compatible name.')}}(L),Je(a),{bucketEndpoint:!0,hostname:L+(j?"":".accesspoint.s3-global")+"."+W,signingRegion:"*"}},B=function(t){var l=t.useArnRegion,r=t.clientRegion,a=t.clientSigningRegion,j=void 0===a?r:a,L=t.bucketName,W=t.outpostId,F=t.dualstackEndpoint,_e=void 0!==F&&F,Ie=t.fipsEndpoint,je=void 0!==Ie&&Ie,vt=t.tlsCompatible,Et=void 0===vt||vt,ft=t.accesspointName,ln=t.isCustomEndpoint,Wn=t.hostnameSuffix;Ye(r),He(L.region,{useArnRegion:l,clientRegion:r,clientSigningRegion:j,useFipsEndpoint:je});var sr=ft+"-"+L.accountId;he(sr,{tlsCompatible:Et});var yr=l?L.region:r,si=l?L.region:j;return function(t){if("s3-outposts"!==t)throw new Error("Expect 's3-posts' in Outpost ARN service component")}(L.service),he(W,{tlsCompatible:Et}),Je(_e),function(t){if(t)throw new Error("FIPS region is not supported with Outpost.")}(je),{bucketEndpoint:!0,hostname:sr+"."+W+(ln?"":".s3-outposts."+yr)+"."+Wn,signingRegion:si,signingService:"s3-outposts"}},de=function(t){var l=t.useArnRegion,r=t.clientRegion,a=t.clientSigningRegion,j=void 0===a?r:a,L=t.bucketName,W=t.dualstackEndpoint,F=void 0!==W&&W,_e=t.fipsEndpoint,Ie=void 0!==_e&&_e,je=t.tlsCompatible,vt=void 0===je||je,Et=t.accesspointName,ft=t.isCustomEndpoint,ln=t.hostnameSuffix;Ye(r),He(L.region,{useArnRegion:l,clientRegion:r,clientSigningRegion:j,allowFipsRegion:!0,useFipsEndpoint:Ie});var Wn=Et+"-"+L.accountId;he(Wn,{tlsCompatible:vt});var sr=l?L.region:r,yr=l?L.region:j;return function(t){if("s3"!==t)throw new Error("Expect 's3' in Accesspoint ARN service component")}(L.service),{bucketEndpoint:!0,hostname:Wn+(ft?"":".s3-accesspoint"+(Ie?"-fips":"")+(F?".dualstack":"")+"."+sr)+"."+ln,signingRegion:yr}},Me={tags:["BUCKET_ENDPOINT"],name:"bucketEndpointMiddleware",relation:"before",toMiddleware:"hostHeaderMiddleware",override:!0},Qe=function(t){return{applyToStack:function(l){l.addRelativeTo(function(t){return function(l,r){return function(a){return(0,S.mG)(void 0,void 0,void 0,function(){var j,L,W,F,_e,Ie,je,vt,Et,ft,ln,Wn,sr,yr,si,ei,ii,Ri,vs,ys,Mo,Jd;return(0,S.Jh)(this,function(_s){switch(_s.label){case 0:return j=a.input.Bucket,L=t.bucketEndpoint,ee.aW.isInstance(W=a.request)?t.bucketEndpoint?(W.hostname=j,[3,12]):[3,1]:[3,13];case 1:return ve(j)?(F=function(t){var l=t.split(":");if(l.length<6||"arn"!==l[0])throw new Error("Malformed ARN");var r=(0,S.CR)(l);return{partition:r[1],service:r[2],region:r[3],accountId:r[4],resource:r.slice(5).join(":")}}(j),[4,t.region()]):[3,8];case 2:return ei=_s.sent(),[4,t.useDualstackEndpoint()];case 3:return _e=_s.sent(),[4,t.useFipsEndpoint()];case 4:return Ie=_s.sent(),[4,t.regionInfoProvider(ei,{useDualstackEndpoint:_e,useFipsEndpoint:Ie})];case 5:return je=_s.sent()||{},vt=je.partition,ft=void 0===(Et=je.signingRegion)?ei:Et,[4,t.useArnRegion()];case 6:return ln=_s.sent(),si=ut,Jd={bucketName:F,baseHostname:W.hostname,accelerateEndpoint:t.useAccelerateEndpoint,dualstackEndpoint:_e,fipsEndpoint:Ie,pathStyleEndpoint:t.forcePathStyle,tlsCompatible:"https:"===W.protocol,useArnRegion:ln,clientPartition:vt,clientSigningRegion:ft,clientRegion:ei,isCustomEndpoint:t.isCustomEndpoint},[4,t.disableMultiregionAccessPoints()];case 7:return Wn=si.apply(void 0,[(Jd.disableMultiregionAccessPoints=_s.sent(),Jd)]),ys=Wn.hostname,Mo=Wn.bucketEndpoint,yr=Wn.signingService,(sr=Wn.signingRegion)&&sr!==ft&&(r.signing_region=sr),yr&&"s3"!==yr&&(r.signing_service=yr),W.hostname=ys,L=Mo,[3,12];case 8:return[4,t.region()];case 9:return ei=_s.sent(),[4,t.useDualstackEndpoint()];case 10:return ii=_s.sent(),[4,t.useFipsEndpoint()];case 11:Ri=_s.sent(),vs=ut({bucketName:j,clientRegion:ei,baseHostname:W.hostname,accelerateEndpoint:t.useAccelerateEndpoint,dualstackEndpoint:ii,fipsEndpoint:Ri,pathStyleEndpoint:t.forcePathStyle,tlsCompatible:"https:"===W.protocol,isCustomEndpoint:t.isCustomEndpoint}),Mo=vs.bucketEndpoint,W.hostname=ys=vs.hostname,L=Mo,_s.label=12;case 12:L&&(W.path=W.path.replace(/^(\/)?[^\/]+/,""),""===W.path&&(W.path="/")),_s.label=13;case 13:return[2,l((0,S.pi)((0,S.pi)({},a),{request:W}))]}})})}}}(t),Me)}}},Ut=u(5068),qt=function(t){return void 0!==t&&"string"!=typeof t&&!ArrayBuffer.isView(t)&&!(0,Ut.e)(t)},Lt=function(t,l){var r=l.streamHasher,a=l.checksumAlgorithmFn,j=l.base64Encoder;return(0,S.mG)(void 0,void 0,void 0,function(){var L,W;return(0,S.Jh)(this,function(F){switch(F.label){case 0:return L=qt(t)?r(a,t):function(t,l){var r=new t;return r.update(l||""),r.digest()}(a,t),W=j,[4,L];case 1:return[2,W.apply(void 0,[F.sent()])]}})})},zt=(()=>{return(t=zt||(zt={})).MD5="MD5",t.CRC32="CRC32",t.CRC32C="CRC32C",t.SHA1="SHA1",t.SHA256="SHA256",zt;var t})(),Ot=[zt.CRC32,zt.CRC32C,zt.SHA1,zt.SHA256],Ke=[zt.CRC32,zt.CRC32C,zt.SHA1,zt.SHA256],Be=function(t){return t===zt.MD5?"content-md5":"x-amz-checksum-"+t.toLowerCase()},wt=u(2562),Ft=u(5423),dn=function(t,l){var r;return(r={},r[zt.MD5]=l.md5,r[zt.CRC32]=wt.AwsCrc32,r[zt.CRC32C]=Ft.AwsCrc32c,r[zt.SHA1]=l.sha1,r[zt.SHA256]=l.sha256,r)[t]},kt=function(t,l){return function(r){return function(a){return(0,S.mG)(void 0,void 0,void 0,function(){var j,L,W,F,_e,Ie,Et,ft,ln,Wn,sr,ei,ii,Ri,vs,ys;return(0,S.Jh)(this,function(Mo){switch(Mo.label){case 0:return ee.aW.isInstance(a.request)?(L=(j=a.request).body,W=j.headers,F=t.base64Encoder,_e=t.streamHasher,Et=function(t,l){var a=l.requestAlgorithmMember;if(!a||!t[a])return l.requestChecksumRequired?zt.MD5:void 0;var j=t[a];if(!Ot.includes(j))throw new Error('The checksum algorithm "'+j+'" is not supported by the client. Select one of '+Ot+".");return j}(Ie=l.input,{requestChecksumRequired:l.requestChecksumRequired,requestAlgorithmMember:l.requestAlgorithmMember}),ft=L,ln=W,Et?(Wn=Be(Et),sr=dn(Et,t),qt(L)?(ft=(0,t.getAwsChunkedEncodingStream)(L,{base64Encoder:F,bodyLengthChecker:t.bodyLengthChecker,checksumLocationName:Wn,checksumAlgorithmFn:sr,streamHasher:_e}),delete(ln=(0,S.pi)((0,S.pi)({},W),{"content-encoding":"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":W["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":Wn}))["content-length"],[3,3]):[3,1]):[3,3]):[2,r(a)];case 1:return function(t,l){var r,a,j=t.toLowerCase();try{for(var L=(0,S.XA)(Object.keys(l)),W=L.next();!W.done;W=L.next())if(j===W.value.toLowerCase())return!0}catch(_e){r={error:_e}}finally{try{W&&!W.done&&(a=L.return)&&a.call(L)}finally{if(r)throw r.error}}return!1}(Wn,W)?[3,3]:[4,Lt(L,{streamHasher:_e,checksumAlgorithmFn:sr,base64Encoder:F})];case 2:ei=Mo.sent(),ln=(0,S.pi)((0,S.pi)({},W),((ys={})[Wn]=ei,ys)),Mo.label=3;case 3:return[4,r((0,S.pi)((0,S.pi)({},a),{request:(0,S.pi)((0,S.pi)({},j),{headers:ln,body:ft})}))];case 4:return ii=Mo.sent(),vs=l.responseAlgorithms,(Ri=l.requestValidationModeMember)&&"ENABLED"===Ie[Ri]&&function(t,l){var r=l.config,a=l.responseAlgorithms;(0,S.mG)(void 0,void 0,void 0,function(){var j,L,W,F,_e,Ie,je,vt,Et,Wn,sr,yr,si;return(0,S.Jh)(this,function(ei){switch(ei.label){case 0:j=function(t){var l,r;void 0===t&&(t=[]);var a=[];try{for(var j=(0,S.XA)(Ke),L=j.next();!L.done;L=j.next()){var W=L.value;!t.includes(W)||!Ot.includes(W)||a.push(W)}}catch(F){l={error:F}}finally{try{L&&!L.done&&(r=j.return)&&r.call(j)}finally{if(l)throw l.error}}return a}(a),L=t.body,W=t.headers,ei.label=1;case 1:ei.trys.push([1,6,7,8]),F=(0,S.XA)(j),_e=F.next(),ei.label=2;case 2:return _e.done?[3,5]:(je=Be(Ie=_e.value),(vt=W[je])?(Et=dn(Ie,r),[4,Lt(L,{streamHasher:r.streamHasher,checksumAlgorithmFn:Et,base64Encoder:r.base64Encoder})]):[3,4]);case 3:if((Wn=ei.sent())===vt)return[3,5];throw new Error('Checksum mismatch: expected "'+Wn+'" but received "'+vt+'" in response header "'+je+'".');case 4:return _e=F.next(),[3,2];case 5:return[3,8];case 6:return sr=ei.sent(),yr={error:sr},[3,8];case 7:try{_e&&!_e.done&&(si=F.return)&&si.call(F)}finally{if(yr)throw yr.error}return[7];case 8:return[2]}})})}(ii.response,{config:t,responseAlgorithms:vs}),[2,ii]}})})}}},Pt={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},Yt=function(t,l){return{applyToStack:function(r){r.add(kt(t,l),Pt)}}},Bt=u(9266),_n={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},Cn=function(t){return{applyToStack:function(l){l.add(function pn(t){var l=this;return function(r){return function(a){return(0,S.mG)(l,void 0,void 0,function(){var j,L,W,F,_e,Ie,je,vt,Et,ft,ln,Wn,sr,yr,si,ei,ii;return(0,S.Jh)(this,function(Ri){switch(Ri.label){case 0:j=(0,S.pi)({},a.input),L=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}],Ri.label=1;case 1:Ri.trys.push([1,6,7,8]),W=(0,S.XA)(L),F=W.next(),Ri.label=2;case 2:return F.done?[3,5]:(Ie=j[(_e=F.value).target])?(je=ArrayBuffer.isView(Ie)?new Uint8Array(Ie.buffer,Ie.byteOffset,Ie.byteLength):"string"==typeof Ie?t.utf8Decoder(Ie):new Uint8Array(Ie),vt=t.base64Encoder(je),(Et=new t.md5).update(je),ft=[(0,S.pi)({},j)],(ii={})[_e.target]=vt,ln=_e.hash,sr=(Wn=t).base64Encoder,[4,Et.digest()]):[3,4];case 3:j=S.pi.apply(void 0,ft.concat([(ii[ln]=sr.apply(Wn,[Ri.sent()]),ii)])),Ri.label=4;case 4:return F=W.next(),[3,2];case 5:return[3,8];case 6:return yr=Ri.sent(),si={error:yr},[3,8];case 7:try{F&&!F.done&&(ei=W.return)&&ei.call(W)}finally{if(si)throw si.error}return[7];case 8:return[2,r((0,S.pi)((0,S.pi)({},a),{input:j}))]}})})}}}(t),_n)}}},xn=u(4198),Qn=function(t){function l(r){var a=t.call(this,r)||this;return Object.setPrototypeOf(a,l.prototype),a}return(0,S.ZT)(l,t),l}(xn.sI),Dn=((0,S.ZT)(function l(r){var a=t.call(this,(0,S.pi)({name:"NoSuchUpload",$fault:"client"},r))||this;return a.name="NoSuchUpload",a.$fault="client",Object.setPrototypeOf(a,l.prototype),a},t=Qn),(()=>((Dn||(Dn={})).filterSensitiveLog=function(l){return(0,S.pi)((0,S.pi)({},l),l.SSEKMSKeyId&&{SSEKMSKeyId:xn.oc})},Dn))()),wr=(()=>((wr||(wr={})).filterSensitiveLog=function(l){return(0,S.pi)((0,S.pi)({},l),l.SSECustomerKey&&{SSECustomerKey:xn.oc})},wr))(),$r=(function(t){(0,S.ZT)(function l(r){var a=t.call(this,(0,S.pi)({name:"ObjectNotInActiveTierError",$fault:"client"},r))||this;return a.name="ObjectNotInActiveTierError",a.$fault="client",Object.setPrototypeOf(a,l.prototype),a},t)}(Qn),function(t){(0,S.ZT)(function l(r){var a=t.call(this,(0,S.pi)({name:"BucketAlreadyExists",$fault:"client"},r))||this;return a.name="BucketAlreadyExists",a.$fault="client",Object.setPrototypeOf(a,l.prototype),a},t)}(Qn),function(t){(0,S.ZT)(function l(r){var a=t.call(this,(0,S.pi)({name:"BucketAlreadyOwnedByYou",$fault:"client"},r))||this;return a.name="BucketAlreadyOwnedByYou",a.$fault="client",Object.setPrototypeOf(a,l.prototype),a},t)}(Qn),(()=>(($r||($r={})).filterSensitiveLog=function(l){return(0,S.pi)((0,S.pi)((0,S.pi)({},l),l.SSEKMSKeyId&&{SSEKMSKeyId:xn.oc}),l.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:xn.oc})},$r))()),T=(()=>((T||(T={})).filterSensitiveLog=function(l){return(0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)({},l),l.SSECustomerKey&&{SSECustomerKey:xn.oc}),l.SSEKMSKeyId&&{SSEKMSKeyId:xn.oc}),l.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:xn.oc})},T))(),nt=(function(t){(0,S.ZT)(function l(r){var a=t.call(this,(0,S.pi)({name:"InvalidObjectState",$fault:"client"},r))||this;return a.name="InvalidObjectState",a.$fault="client",Object.setPrototypeOf(a,l.prototype),a.StorageClass=r.StorageClass,a.AccessTier=r.AccessTier,a},t)}(Qn),function(t){(0,S.ZT)(function l(r){var a=t.call(this,(0,S.pi)({name:"NoSuchKey",$fault:"client"},r))||this;return a.name="NoSuchKey",a.$fault="client",Object.setPrototypeOf(a,l.prototype),a},t)}(Qn),function(t){(0,S.ZT)(function l(r){var a=t.call(this,(0,S.pi)({name:"NotFound",$fault:"client"},r))||this;return a.name="NotFound",a.$fault="client",Object.setPrototypeOf(a,l.prototype),a},t)}(Qn),function(t){(0,S.ZT)(function l(r){var a=t.call(this,(0,S.pi)({name:"NoSuchBucket",$fault:"client"},r))||this;return a.name="NoSuchBucket",a.$fault="client",Object.setPrototypeOf(a,l.prototype),a},t)}(Qn),(()=>((nt||(nt={})).filterSensitiveLog=function(l){return(0,S.pi)((0,S.pi)((0,S.pi)({},l),l.SSEKMSKeyId&&{SSEKMSKeyId:xn.oc}),l.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:xn.oc})},nt))()),Dt=(()=>((Dt||(Dt={})).filterSensitiveLog=function(l){return(0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)({},l),l.SSECustomerKey&&{SSECustomerKey:xn.oc}),l.SSEKMSKeyId&&{SSEKMSKeyId:xn.oc}),l.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:xn.oc})},Dt))();function Gr(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}var Lr=function(){function t(l,r){void 0===r&&(r=[]),this.name=l,this.children=r,this.attributes={}}return t.prototype.withName=function(l){return this.name=l,this},t.prototype.addAttribute=function(l,r){return this.attributes[l]=r,this},t.prototype.addChildNode=function(l){return this.children.push(l),this},t.prototype.removeAttribute=function(l){return delete this.attributes[l],this},t.prototype.toString=function(){var l,r,a=Boolean(this.children.length),j="<"+this.name,L=this.attributes;try{for(var W=(0,S.XA)(Object.keys(L)),F=W.next();!F.done;F=W.next()){var _e=F.value,Ie=L[_e];null!=Ie&&(j+=" "+_e+'="'+Gr(""+Ie)+'"')}}catch(je){l={error:je}}finally{try{F&&!F.done&&(r=W.return)&&r.call(W)}finally{if(l)throw l.error}}return j+(a?">"+this.children.map(function(je){return je.toString()}).join("")+"</"+this.name+">":"/>")},t}(),Xr=function(){function t(l){this.value=l}return t.prototype.toString=function(){return function di(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}(""+this.value)},t}(),Si=u(1945),Zi=u(9083),qa=function(t,l){return(0,S.mG)(void 0,void 0,void 0,function(){var r,a,j,L,W,F;return(0,S.Jh)(this,function(_e){switch(_e.label){case 0:return a=[(0,S.pi)({},t)],F={},[4,In(t.body,l)];case 1:throw r=S.pi.apply(void 0,a.concat([(F.body=_e.sent(),F)])),L=zn(t,r.body),j=new Qn({name:(W=r.body).code||W.Code||L,$fault:"client",$metadata:sn(t)}),(0,xn.to)(j,W)}})})},Xc=function(t,l){return(0,S.mG)(void 0,void 0,void 0,function(){var r,a,j,L,W,F;return(0,S.Jh)(this,function(_e){switch(_e.label){case 0:return a=[(0,S.pi)({},t)],F={},[4,In(t.body,l)];case 1:throw r=S.pi.apply(void 0,a.concat([(F.body=_e.sent(),F)])),L=zn(t,r.body),j=new Qn({name:(W=r.body).code||W.Code||L,$fault:"client",$metadata:sn(t)}),(0,xn.to)(j,W)}})})},Ud=function(t,l){return(0,S.mG)(void 0,void 0,void 0,function(){var r,a,j,L,W,F;return(0,S.Jh)(this,function(_e){switch(_e.label){case 0:return a=[(0,S.pi)({},t)],F={},[4,In(t.body,l)];case 1:throw r=S.pi.apply(void 0,a.concat([(F.body=_e.sent(),F)])),L=zn(t,r.body),j=new Qn({name:(W=r.body).code||W.Code||L,$fault:"client",$metadata:sn(t)}),(0,xn.to)(j,W)}})})},Qt=function(t,l){return(0,S.mG)(void 0,void 0,void 0,function(){var r,a,j,L,W,F;return(0,S.Jh)(this,function(_e){switch(_e.label){case 0:return a=[(0,S.pi)({},t)],F={},[4,In(t.body,l)];case 1:throw r=S.pi.apply(void 0,a.concat([(F.body=_e.sent(),F)])),L=zn(t,r.body),j=new Qn({name:(W=r.body).code||W.Code||L,$fault:"client",$metadata:sn(t)}),(0,xn.to)(j,W)}})})},Ti=function(t,l){return(0,S.mG)(void 0,void 0,void 0,function(){var r,a,j,L,W,F;return(0,S.Jh)(this,function(_e){switch(_e.label){case 0:return a=[(0,S.pi)({},t)],F={},[4,In(t.body,l)];case 1:throw r=S.pi.apply(void 0,a.concat([(F.body=_e.sent(),F)])),L=zn(t,r.body),j=new Qn({name:(W=r.body).code||W.Code||L,$fault:"client",$metadata:sn(t)}),(0,xn.to)(j,W)}})})},cf=function(t,l){var r=new Lr("CompletedMultipartUpload");return null!=t.Parts&&bp(t.Parts,l).map(function(j){j=j.withName("Part"),r.addChildNode(j)}),r},bp=function(t,l){return t.filter(function(r){return null!=r}).map(function(r){if(null===r)return null;var a=function(t,l){var r=new Lr("CompletedPart");if(null!=t.ETag){var a=new Lr("ETag").addChildNode(new Xr(t.ETag)).withName("ETag");r.addChildNode(a)}return null!=t.ChecksumCRC32&&(a=new Lr("ChecksumCRC32").addChildNode(new Xr(t.ChecksumCRC32)).withName("ChecksumCRC32"),r.addChildNode(a)),null!=t.ChecksumCRC32C&&(a=new Lr("ChecksumCRC32C").addChildNode(new Xr(t.ChecksumCRC32C)).withName("ChecksumCRC32C"),r.addChildNode(a)),null!=t.ChecksumSHA1&&(a=new Lr("ChecksumSHA1").addChildNode(new Xr(t.ChecksumSHA1)).withName("ChecksumSHA1"),r.addChildNode(a)),null!=t.ChecksumSHA256&&(a=new Lr("ChecksumSHA256").addChildNode(new Xr(t.ChecksumSHA256)).withName("ChecksumSHA256"),r.addChildNode(a)),null!=t.PartNumber&&(a=new Lr("PartNumber").addChildNode(new Xr(String(t.PartNumber))).withName("PartNumber"),r.addChildNode(a)),r}(r);return a.withName("member")})},hd=function(t,l){var r=new Lr("Tagging");if(null!=t.TagSet){var a=Ic(t.TagSet,l),j=new Lr("TagSet");a.map(function(L){j.addChildNode(L)}),r.addChildNode(j)}return r},Ic=function(t,l){return t.filter(function(r){return null!=r}).map(function(r){return null===r?null:function(t,l){var r=new Lr("Tag");if(null!=t.Key){var a=new Lr("ObjectKey").addChildNode(new Xr(t.Key)).withName("Key");r.addChildNode(a)}return null!=t.Value&&(a=new Lr("Value").addChildNode(new Xr(t.Value)).withName("Value"),r.addChildNode(a)),r}(r).withName("Tag")})},sn=function(t){var l;return{httpStatusCode:t.statusCode,requestId:null!==(l=t.headers["x-amzn-requestid"])&&void 0!==l?l:t.headers["x-amzn-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}},Ir=function(t,l){return void 0===t&&(t=new Uint8Array),t instanceof Uint8Array?Promise.resolve(t):l.streamCollector(t)||Promise.resolve(new Uint8Array)},yt=function(t){return!(null==t||""===t||Object.getOwnPropertyNames(t).includes("length")&&0==t.length||Object.getOwnPropertyNames(t).includes("size")&&0==t.size)},In=function(t,l){return function(t,l){return Ir(t,l).then(function(r){return l.utf8Encoder(r)})}(t,l).then(function(r){if(r.length){var a=(0,Zi.parse)(r,{attributeNamePrefix:"",ignoreAttributes:!1,parseNodeValue:!1,trimValues:!1,tagValueProcessor:function(F){return""===F.trim()&&F.includes("\n")?"":(0,Si.p1)(F)}}),j="#text",L=Object.keys(a)[0],W=a[L];return W[j]&&(W[L]=W[j],delete W[j]),(0,xn.sT)(W)}return{}})},zn=function(t,l){return void 0!==l.Code?l.Code:404==t.statusCode?"NotFound":""},fv=function(t){function l(r){var a=t.call(this)||this;return a.input=r,a}return(0,S.ZT)(l,t),l.prototype.resolveMiddleware=function(r,a,j){this.middlewareStack.use((0,Bt.p2)(a,this.serialize,this.deserialize)),this.middlewareStack.use(Cn(a)),this.middlewareStack.use(Qe(a)),this.middlewareStack.use(Yt(a,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!1}));var L=r.concat(this.middlewareStack),je=a.requestHandler;return L.resolve(function(vt){return je.handle(vt.request,j||{})},{logger:a.logger,clientName:"S3Client",commandName:"PutObjectCommand",inputFilterSensitiveLog:Dt.filterSensitiveLog,outputFilterSensitiveLog:nt.filterSensitiveLog})},l.prototype.serialize=function(r,a){return function(t,l){return(0,S.mG)(void 0,void 0,void 0,function(){var r,a,j,L,W,F,_e,Ie,je,Et;return(0,S.Jh)(this,function(ln){switch(ln.label){case 0:return[4,l.endpoint()];case 1:if(r=ln.sent(),a=r.hostname,L=void 0===(j=r.protocol)?"https":j,W=r.port,F=r.path,_e=(0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)({"content-type":"application/octet-stream"},yt(t.ACL)&&{"x-amz-acl":t.ACL}),yt(t.CacheControl)&&{"cache-control":t.CacheControl}),yt(t.ContentDisposition)&&{"content-disposition":t.ContentDisposition}),yt(t.ContentEncoding)&&{"content-encoding":t.ContentEncoding}),yt(t.ContentLanguage)&&{"content-language":t.ContentLanguage}),yt(t.ContentLength)&&{"content-length":t.ContentLength.toString()}),yt(t.ContentMD5)&&{"content-md5":t.ContentMD5}),yt(t.ContentType)&&{"content-type":t.ContentType}),yt(t.ChecksumAlgorithm)&&{"x-amz-sdk-checksum-algorithm":t.ChecksumAlgorithm}),yt(t.ChecksumCRC32)&&{"x-amz-checksum-crc32":t.ChecksumCRC32}),yt(t.ChecksumCRC32C)&&{"x-amz-checksum-crc32c":t.ChecksumCRC32C}),yt(t.ChecksumSHA1)&&{"x-amz-checksum-sha1":t.ChecksumSHA1}),yt(t.ChecksumSHA256)&&{"x-amz-checksum-sha256":t.ChecksumSHA256}),yt(t.Expires)&&{expires:(0,xn._w)(t.Expires).toString()}),yt(t.GrantFullControl)&&{"x-amz-grant-full-control":t.GrantFullControl}),yt(t.GrantRead)&&{"x-amz-grant-read":t.GrantRead}),yt(t.GrantReadACP)&&{"x-amz-grant-read-acp":t.GrantReadACP}),yt(t.GrantWriteACP)&&{"x-amz-grant-write-acp":t.GrantWriteACP}),yt(t.ServerSideEncryption)&&{"x-amz-server-side-encryption":t.ServerSideEncryption}),yt(t.StorageClass)&&{"x-amz-storage-class":t.StorageClass}),yt(t.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":t.WebsiteRedirectLocation}),yt(t.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":t.SSECustomerAlgorithm}),yt(t.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":t.SSECustomerKey}),yt(t.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":t.SSECustomerKeyMD5}),yt(t.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":t.SSEKMSKeyId}),yt(t.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":t.SSEKMSEncryptionContext}),yt(t.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":t.BucketKeyEnabled.toString()}),yt(t.RequestPayer)&&{"x-amz-request-payer":t.RequestPayer}),yt(t.Tagging)&&{"x-amz-tagging":t.Tagging}),yt(t.ObjectLockMode)&&{"x-amz-object-lock-mode":t.ObjectLockMode}),yt(t.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(t.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),yt(t.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":t.ObjectLockLegalHoldStatus}),yt(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),void 0!==t.Metadata&&Object.keys(t.Metadata).reduce(function(Wn,sr){var yr;return(0,S.pi)((0,S.pi)({},Wn),((yr={})["x-amz-meta-"+sr.toLowerCase()]=t.Metadata[sr],yr))},{})),Ie=((null==F?void 0:F.endsWith("/"))?F.slice(0,-1):F||"")+"/{Bucket}/{Key+}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((je=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(Ie=Ie.replace("{Bucket}",(0,xn.jc)(je)),void 0===t.Key)throw new Error("No value provided for input HTTP label: Key.");if((je=t.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return Ie=Ie.replace("{Key+}",je.split("/").map(function(Wn){return(0,xn.jc)(Wn)}).join("/")),void 0!==t.Body&&(Et=t.Body),void 0!==t.Body&&(Et=t.Body),[2,new ee.aW({protocol:L,hostname:a,port:W,method:"PUT",headers:_e,path:Ie,query:{"x-id":"PutObject"},body:Et})]}})})}(r,a)},l.prototype.deserialize=function(r,a){return function(t,l){return(0,S.mG)(void 0,void 0,void 0,function(){var r;return(0,S.Jh)(this,function(a){switch(a.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Ud(t,l)]:(r={$metadata:sn(t),BucketKeyEnabled:void 0,ChecksumCRC32:void 0,ChecksumCRC32C:void 0,ChecksumSHA1:void 0,ChecksumSHA256:void 0,ETag:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==t.headers["x-amz-expiration"]&&(r.Expiration=t.headers["x-amz-expiration"]),void 0!==t.headers.etag&&(r.ETag=t.headers.etag),void 0!==t.headers["x-amz-checksum-crc32"]&&(r.ChecksumCRC32=t.headers["x-amz-checksum-crc32"]),void 0!==t.headers["x-amz-checksum-crc32c"]&&(r.ChecksumCRC32C=t.headers["x-amz-checksum-crc32c"]),void 0!==t.headers["x-amz-checksum-sha1"]&&(r.ChecksumSHA1=t.headers["x-amz-checksum-sha1"]),void 0!==t.headers["x-amz-checksum-sha256"]&&(r.ChecksumSHA256=t.headers["x-amz-checksum-sha256"]),void 0!==t.headers["x-amz-server-side-encryption"]&&(r.ServerSideEncryption=t.headers["x-amz-server-side-encryption"]),void 0!==t.headers["x-amz-version-id"]&&(r.VersionId=t.headers["x-amz-version-id"]),void 0!==t.headers["x-amz-server-side-encryption-customer-algorithm"]&&(r.SSECustomerAlgorithm=t.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==t.headers["x-amz-server-side-encryption-customer-key-md5"]&&(r.SSECustomerKeyMD5=t.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==t.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(r.SSEKMSKeyId=t.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==t.headers["x-amz-server-side-encryption-context"]&&(r.SSEKMSEncryptionContext=t.headers["x-amz-server-side-encryption-context"]),void 0!==t.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(r.BucketKeyEnabled=(0,xn.gx)(t.headers["x-amz-server-side-encryption-bucket-key-enabled"])),void 0!==t.headers["x-amz-request-charged"]&&(r.RequestCharged=t.headers["x-amz-request-charged"]),[4,Ir(t.body,l)]);case 1:return a.sent(),[2,Promise.resolve(r)]}})})}(r,a)},l}(xn.mY),pv=function(t){function l(r){var a=t.call(this)||this;return a.input=r,a}return(0,S.ZT)(l,t),l.prototype.resolveMiddleware=function(r,a,j){this.middlewareStack.use((0,Bt.p2)(a,this.serialize,this.deserialize)),this.middlewareStack.use(Cn(a)),this.middlewareStack.use(Qe(a));var L=r.concat(this.middlewareStack),je=a.requestHandler;return L.resolve(function(vt){return je.handle(vt.request,j||{})},{logger:a.logger,clientName:"S3Client",commandName:"CreateMultipartUploadCommand",inputFilterSensitiveLog:T.filterSensitiveLog,outputFilterSensitiveLog:$r.filterSensitiveLog})},l.prototype.serialize=function(r,a){return function(t,l){return(0,S.mG)(void 0,void 0,void 0,function(){var r,a,j,L,W,F,_e,Ie,je;return(0,S.Jh)(this,function(ft){switch(ft.label){case 0:return[4,l.endpoint()];case 1:if(r=ft.sent(),a=r.hostname,L=void 0===(j=r.protocol)?"https":j,W=r.port,F=r.path,_e=(0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)({},yt(t.ACL)&&{"x-amz-acl":t.ACL}),yt(t.CacheControl)&&{"cache-control":t.CacheControl}),yt(t.ContentDisposition)&&{"content-disposition":t.ContentDisposition}),yt(t.ContentEncoding)&&{"content-encoding":t.ContentEncoding}),yt(t.ContentLanguage)&&{"content-language":t.ContentLanguage}),yt(t.ContentType)&&{"content-type":t.ContentType}),yt(t.Expires)&&{expires:(0,xn._w)(t.Expires).toString()}),yt(t.GrantFullControl)&&{"x-amz-grant-full-control":t.GrantFullControl}),yt(t.GrantRead)&&{"x-amz-grant-read":t.GrantRead}),yt(t.GrantReadACP)&&{"x-amz-grant-read-acp":t.GrantReadACP}),yt(t.GrantWriteACP)&&{"x-amz-grant-write-acp":t.GrantWriteACP}),yt(t.ServerSideEncryption)&&{"x-amz-server-side-encryption":t.ServerSideEncryption}),yt(t.StorageClass)&&{"x-amz-storage-class":t.StorageClass}),yt(t.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":t.WebsiteRedirectLocation}),yt(t.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":t.SSECustomerAlgorithm}),yt(t.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":t.SSECustomerKey}),yt(t.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":t.SSECustomerKeyMD5}),yt(t.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":t.SSEKMSKeyId}),yt(t.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":t.SSEKMSEncryptionContext}),yt(t.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":t.BucketKeyEnabled.toString()}),yt(t.RequestPayer)&&{"x-amz-request-payer":t.RequestPayer}),yt(t.Tagging)&&{"x-amz-tagging":t.Tagging}),yt(t.ObjectLockMode)&&{"x-amz-object-lock-mode":t.ObjectLockMode}),yt(t.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(t.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),yt(t.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":t.ObjectLockLegalHoldStatus}),yt(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),yt(t.ChecksumAlgorithm)&&{"x-amz-checksum-algorithm":t.ChecksumAlgorithm}),void 0!==t.Metadata&&Object.keys(t.Metadata).reduce(function(ln,Wn){var sr;return(0,S.pi)((0,S.pi)({},ln),((sr={})["x-amz-meta-"+Wn.toLowerCase()]=t.Metadata[Wn],sr))},{})),Ie=((null==F?void 0:F.endsWith("/"))?F.slice(0,-1):F||"")+"/{Bucket}/{Key+}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((je=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(Ie=Ie.replace("{Bucket}",(0,xn.jc)(je)),void 0===t.Key)throw new Error("No value provided for input HTTP label: Key.");if((je=t.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return Ie=Ie.replace("{Key+}",je.split("/").map(function(ln){return(0,xn.jc)(ln)}).join("/")),[2,new ee.aW({protocol:L,hostname:a,port:W,method:"POST",headers:_e,path:Ie,query:{uploads:"","x-id":"CreateMultipartUpload"},body:void 0})]}})})}(r,a)},l.prototype.deserialize=function(r,a){return function(t,l){return(0,S.mG)(void 0,void 0,void 0,function(){var r,a,j,L;return(0,S.Jh)(this,function(W){switch(W.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Xc(t,l)]:(r={$metadata:sn(t),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,BucketKeyEnabled:void 0,ChecksumAlgorithm:void 0,Key:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,UploadId:void 0},void 0!==t.headers["x-amz-abort-date"]&&(r.AbortDate=(0,xn.CE)((0,xn.oT)(t.headers["x-amz-abort-date"]))),void 0!==t.headers["x-amz-abort-rule-id"]&&(r.AbortRuleId=t.headers["x-amz-abort-rule-id"]),void 0!==t.headers["x-amz-server-side-encryption"]&&(r.ServerSideEncryption=t.headers["x-amz-server-side-encryption"]),void 0!==t.headers["x-amz-server-side-encryption-customer-algorithm"]&&(r.SSECustomerAlgorithm=t.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==t.headers["x-amz-server-side-encryption-customer-key-md5"]&&(r.SSECustomerKeyMD5=t.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==t.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(r.SSEKMSKeyId=t.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==t.headers["x-amz-server-side-encryption-context"]&&(r.SSEKMSEncryptionContext=t.headers["x-amz-server-side-encryption-context"]),void 0!==t.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(r.BucketKeyEnabled=(0,xn.gx)(t.headers["x-amz-server-side-encryption-bucket-key-enabled"])),void 0!==t.headers["x-amz-request-charged"]&&(r.RequestCharged=t.headers["x-amz-request-charged"]),void 0!==t.headers["x-amz-checksum-algorithm"]&&(r.ChecksumAlgorithm=t.headers["x-amz-checksum-algorithm"]),j=xn.CE,L=xn.Wh,[4,In(t.body,l)]);case 1:return void 0!==(a=j.apply(void 0,[L.apply(void 0,[W.sent()]),"body"])).Bucket&&(r.Bucket=(0,xn.pY)(a.Bucket)),void 0!==a.Key&&(r.Key=(0,xn.pY)(a.Key)),void 0!==a.UploadId&&(r.UploadId=(0,xn.pY)(a.UploadId)),[2,Promise.resolve(r)]}})})}(r,a)},l}(xn.mY),Td=(()=>((Td||(Td={})).filterSensitiveLog=function(l){return(0,S.pi)({},l)},Td))(),Rd=(()=>((Rd||(Rd={})).filterSensitiveLog=function(l){return(0,S.pi)({},l)},Rd))(),Od=(function(t){(0,S.ZT)(function l(r){var a=t.call(this,(0,S.pi)({name:"ObjectAlreadyInActiveTierError",$fault:"client"},r))||this;return a.name="ObjectAlreadyInActiveTierError",a.$fault="client",Object.setPrototypeOf(a,l.prototype),a},t)}(Qn),(()=>((Od||(Od={})).filterSensitiveLog=function(l){return(0,S.pi)((0,S.pi)({},l),l.SSEKMSKeyId&&{SSEKMSKeyId:xn.oc})},Od))()),Md=(()=>((Md||(Md={})).filterSensitiveLog=function(l){return(0,S.pi)((0,S.pi)({},l),l.SSECustomerKey&&{SSECustomerKey:xn.oc})},Md))(),hv=function(t){function l(r){var a=t.call(this)||this;return a.input=r,a}return(0,S.ZT)(l,t),l.prototype.resolveMiddleware=function(r,a,j){this.middlewareStack.use((0,Bt.p2)(a,this.serialize,this.deserialize)),this.middlewareStack.use(Cn(a)),this.middlewareStack.use(Qe(a)),this.middlewareStack.use(Yt(a,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!1}));var L=r.concat(this.middlewareStack),je=a.requestHandler;return L.resolve(function(vt){return je.handle(vt.request,j||{})},{logger:a.logger,clientName:"S3Client",commandName:"UploadPartCommand",inputFilterSensitiveLog:Md.filterSensitiveLog,outputFilterSensitiveLog:Od.filterSensitiveLog})},l.prototype.serialize=function(r,a){return function(t,l){return(0,S.mG)(void 0,void 0,void 0,function(){var r,a,j,L,W,F,_e,Ie,je,vt,Et;return(0,S.Jh)(this,function(ln){switch(ln.label){case 0:return[4,l.endpoint()];case 1:if(r=ln.sent(),a=r.hostname,L=void 0===(j=r.protocol)?"https":j,W=r.port,F=r.path,_e=(0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)({"content-type":"application/octet-stream"},yt(t.ContentLength)&&{"content-length":t.ContentLength.toString()}),yt(t.ContentMD5)&&{"content-md5":t.ContentMD5}),yt(t.ChecksumAlgorithm)&&{"x-amz-sdk-checksum-algorithm":t.ChecksumAlgorithm}),yt(t.ChecksumCRC32)&&{"x-amz-checksum-crc32":t.ChecksumCRC32}),yt(t.ChecksumCRC32C)&&{"x-amz-checksum-crc32c":t.ChecksumCRC32C}),yt(t.ChecksumSHA1)&&{"x-amz-checksum-sha1":t.ChecksumSHA1}),yt(t.ChecksumSHA256)&&{"x-amz-checksum-sha256":t.ChecksumSHA256}),yt(t.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":t.SSECustomerAlgorithm}),yt(t.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":t.SSECustomerKey}),yt(t.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":t.SSECustomerKeyMD5}),yt(t.RequestPayer)&&{"x-amz-request-payer":t.RequestPayer}),yt(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),Ie=((null==F?void 0:F.endsWith("/"))?F.slice(0,-1):F||"")+"/{Bucket}/{Key+}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((je=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(Ie=Ie.replace("{Bucket}",(0,xn.jc)(je)),void 0===t.Key)throw new Error("No value provided for input HTTP label: Key.");if((je=t.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return Ie=Ie.replace("{Key+}",je.split("/").map(function(Wn){return(0,xn.jc)(Wn)}).join("/")),vt=(0,S.pi)((0,S.pi)({"x-id":"UploadPart"},void 0!==t.PartNumber&&{partNumber:t.PartNumber.toString()}),void 0!==t.UploadId&&{uploadId:t.UploadId}),void 0!==t.Body&&(Et=t.Body),void 0!==t.Body&&(Et=t.Body),[2,new ee.aW({protocol:L,hostname:a,port:W,method:"PUT",headers:_e,path:Ie,query:vt,body:Et})]}})})}(r,a)},l.prototype.deserialize=function(r,a){return function(t,l){return(0,S.mG)(void 0,void 0,void 0,function(){var r;return(0,S.Jh)(this,function(a){switch(a.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Ti(t,l)]:(r={$metadata:sn(t),BucketKeyEnabled:void 0,ChecksumCRC32:void 0,ChecksumCRC32C:void 0,ChecksumSHA1:void 0,ChecksumSHA256:void 0,ETag:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0},void 0!==t.headers["x-amz-server-side-encryption"]&&(r.ServerSideEncryption=t.headers["x-amz-server-side-encryption"]),void 0!==t.headers.etag&&(r.ETag=t.headers.etag),void 0!==t.headers["x-amz-checksum-crc32"]&&(r.ChecksumCRC32=t.headers["x-amz-checksum-crc32"]),void 0!==t.headers["x-amz-checksum-crc32c"]&&(r.ChecksumCRC32C=t.headers["x-amz-checksum-crc32c"]),void 0!==t.headers["x-amz-checksum-sha1"]&&(r.ChecksumSHA1=t.headers["x-amz-checksum-sha1"]),void 0!==t.headers["x-amz-checksum-sha256"]&&(r.ChecksumSHA256=t.headers["x-amz-checksum-sha256"]),void 0!==t.headers["x-amz-server-side-encryption-customer-algorithm"]&&(r.SSECustomerAlgorithm=t.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==t.headers["x-amz-server-side-encryption-customer-key-md5"]&&(r.SSECustomerKeyMD5=t.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==t.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(r.SSEKMSKeyId=t.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==t.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(r.BucketKeyEnabled=(0,xn.gx)(t.headers["x-amz-server-side-encryption-bucket-key-enabled"])),void 0!==t.headers["x-amz-request-charged"]&&(r.RequestCharged=t.headers["x-amz-request-charged"]),[4,Ir(t.body,l)]);case 1:return a.sent(),[2,Promise.resolve(r)]}})})}(r,a)},l}(xn.mY),mv=u(7193),gv=function(){function t(l){this.sigv4Signer=new mv.L1(l),this.signerOptions=l}return t.prototype.sign=function(l,r){return void 0===r&&(r={}),(0,S.mG)(this,void 0,void 0,function(){return(0,S.Jh)(this,function(a){if("*"===r.signingRegion){if("node"!==this.signerOptions.runtime)throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return[2,this.getSigv4aSigner().sign(l,r)]}return[2,this.sigv4Signer.sign(l,r)]})})},t.prototype.presign=function(l,r){return void 0===r&&(r={}),(0,S.mG)(this,void 0,void 0,function(){return(0,S.Jh)(this,function(a){if("*"===r.signingRegion){if("node"!==this.signerOptions.runtime)throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return[2,this.getSigv4aSigner().presign(l,r)]}return[2,this.sigv4Signer.presign(l,r)]})})},t.prototype.getSigv4aSigner=function(){if(!this.sigv4aSigner){var l;try{if("function"!=typeof(l=u(3743).CrtSignerV4))throw new Error}catch(r){throw r.message=r.message+'\nPlease check if you have installed "@aws-sdk/signature-v4-crt" package explicitly. \nFor more information please go to https://github.com/aws/aws-sdk-js-v3#known-issues',r}this.sigv4aSigner=new l((0,S.pi)((0,S.pi)({},this.signerOptions),{signingAlgorithm:1}))}return this.sigv4aSigner},t}(),Hf=function(t,l){return void 0===t&&(t=new Uint8Array),t instanceof Uint8Array?Promise.resolve(t):l.streamCollector(t)||Promise.resolve(new Uint8Array)},yv=function(t,l){return Hf(t,l).then(function(r){return l.utf8Encoder(r)})},_v={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},Cv={step:"build",tags:["USE_REGIONAL_ENDPOINT","S3"],name:"useRegionalEndpointMiddleware",override:!0},Sv={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},Pv=function(t){function l(r){var a=t.call(this)||this;return a.input=r,a}return(0,S.ZT)(l,t),l.prototype.resolveMiddleware=function(r,a,j){this.middlewareStack.use((0,Bt.p2)(a,this.serialize,this.deserialize)),this.middlewareStack.use(function(t){return{applyToStack:function(l){l.addRelativeTo(function(t){return function(l){return function(r){return(0,S.mG)(void 0,void 0,void 0,function(){var a,j,L,W,F,_e,Ie;return(0,S.Jh)(this,function(je){switch(je.label){case 0:return[4,l(r)];case 1:return a=je.sent(),ee.Zn.isInstance(j=a.response)?(W=j.body,(L=j.statusCode)<200&&L>=300?[2,a]:[4,Hf(W,t)]):[2,a];case 2:return F=je.sent(),[4,yv(F,t)];case 3:if(_e=je.sent(),0===F.length)throw(Ie=new Error("S3 aborted request")).name="InternalError",Ie;return _e&&_e.match("<Error>")&&(j.statusCode=400),j.body=F,[2,a]}})})}}}(t),_v)}}}(a)),this.middlewareStack.use(Cn(a)),this.middlewareStack.use(Qe(a));var L=r.concat(this.middlewareStack),je=a.requestHandler;return L.resolve(function(vt){return je.handle(vt.request,j||{})},{logger:a.logger,clientName:"S3Client",commandName:"CompleteMultipartUploadCommand",inputFilterSensitiveLog:wr.filterSensitiveLog,outputFilterSensitiveLog:Dn.filterSensitiveLog})},l.prototype.serialize=function(r,a){return function(t,l){return(0,S.mG)(void 0,void 0,void 0,function(){var r,a,j,L,W,F,_e,Ie,je,vt,Et,ft;return(0,S.Jh)(this,function(ln){switch(ln.label){case 0:return[4,l.endpoint()];case 1:if(r=ln.sent(),a=r.hostname,L=void 0===(j=r.protocol)?"https":j,W=r.port,F=r.path,_e=(0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)({"content-type":"application/xml"},yt(t.ChecksumCRC32)&&{"x-amz-checksum-crc32":t.ChecksumCRC32}),yt(t.ChecksumCRC32C)&&{"x-amz-checksum-crc32c":t.ChecksumCRC32C}),yt(t.ChecksumSHA1)&&{"x-amz-checksum-sha1":t.ChecksumSHA1}),yt(t.ChecksumSHA256)&&{"x-amz-checksum-sha256":t.ChecksumSHA256}),yt(t.RequestPayer)&&{"x-amz-request-payer":t.RequestPayer}),yt(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),yt(t.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":t.SSECustomerAlgorithm}),yt(t.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":t.SSECustomerKey}),yt(t.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":t.SSECustomerKeyMD5}),Ie=((null==F?void 0:F.endsWith("/"))?F.slice(0,-1):F||"")+"/{Bucket}/{Key+}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((je=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(Ie=Ie.replace("{Bucket}",(0,xn.jc)(je)),void 0===t.Key)throw new Error("No value provided for input HTTP label: Key.");if((je=t.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return Ie=Ie.replace("{Key+}",je.split("/").map(function(Wn){return(0,xn.jc)(Wn)}).join("/")),vt=(0,S.pi)({"x-id":"CompleteMultipartUpload"},void 0!==t.UploadId&&{uploadId:t.UploadId}),void 0!==t.MultipartUpload&&(Et=cf(t.MultipartUpload,l)),void 0!==t.MultipartUpload&&(ft=(ft=cf(t.MultipartUpload,l)).withName("CompleteMultipartUpload"),Et='<?xml version="1.0" encoding="UTF-8"?>',ft.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),Et+=ft.toString()),[2,new ee.aW({protocol:L,hostname:a,port:W,method:"POST",headers:_e,path:Ie,query:vt,body:Et})]}})})}(r,a)},l.prototype.deserialize=function(r,a){return function(t,l){return(0,S.mG)(void 0,void 0,void 0,function(){var r,a,j,L;return(0,S.Jh)(this,function(W){switch(W.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,qa(t,l)]:(r={$metadata:sn(t),Bucket:void 0,BucketKeyEnabled:void 0,ChecksumCRC32:void 0,ChecksumCRC32C:void 0,ChecksumSHA1:void 0,ChecksumSHA256:void 0,ETag:void 0,Expiration:void 0,Key:void 0,Location:void 0,RequestCharged:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==t.headers["x-amz-expiration"]&&(r.Expiration=t.headers["x-amz-expiration"]),void 0!==t.headers["x-amz-server-side-encryption"]&&(r.ServerSideEncryption=t.headers["x-amz-server-side-encryption"]),void 0!==t.headers["x-amz-version-id"]&&(r.VersionId=t.headers["x-amz-version-id"]),void 0!==t.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(r.SSEKMSKeyId=t.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==t.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(r.BucketKeyEnabled=(0,xn.gx)(t.headers["x-amz-server-side-encryption-bucket-key-enabled"])),void 0!==t.headers["x-amz-request-charged"]&&(r.RequestCharged=t.headers["x-amz-request-charged"]),j=xn.CE,L=xn.Wh,[4,In(t.body,l)]);case 1:return void 0!==(a=j.apply(void 0,[L.apply(void 0,[W.sent()]),"body"])).Bucket&&(r.Bucket=(0,xn.pY)(a.Bucket)),void 0!==a.ChecksumCRC32&&(r.ChecksumCRC32=(0,xn.pY)(a.ChecksumCRC32)),void 0!==a.ChecksumCRC32C&&(r.ChecksumCRC32C=(0,xn.pY)(a.ChecksumCRC32C)),void 0!==a.ChecksumSHA1&&(r.ChecksumSHA1=(0,xn.pY)(a.ChecksumSHA1)),void 0!==a.ChecksumSHA256&&(r.ChecksumSHA256=(0,xn.pY)(a.ChecksumSHA256)),void 0!==a.ETag&&(r.ETag=(0,xn.pY)(a.ETag)),void 0!==a.Key&&(r.Key=(0,xn.pY)(a.Key)),void 0!==a.Location&&(r.Location=(0,xn.pY)(a.Location)),[2,Promise.resolve(r)]}})})}(r,a)},l}(xn.mY),Iv=function(t){function l(r){var a=t.call(this)||this;return a.input=r,a}return(0,S.ZT)(l,t),l.prototype.resolveMiddleware=function(r,a,j){this.middlewareStack.use((0,Bt.p2)(a,this.serialize,this.deserialize)),this.middlewareStack.use(Qe(a)),this.middlewareStack.use(Yt(a,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!0}));var L=r.concat(this.middlewareStack),je=a.requestHandler;return L.resolve(function(vt){return je.handle(vt.request,j||{})},{logger:a.logger,clientName:"S3Client",commandName:"PutObjectTaggingCommand",inputFilterSensitiveLog:Rd.filterSensitiveLog,outputFilterSensitiveLog:Td.filterSensitiveLog})},l.prototype.serialize=function(r,a){return function(t,l){return(0,S.mG)(void 0,void 0,void 0,function(){var r,a,j,L,W,F,_e,Ie,je,vt,Et,ft;return(0,S.Jh)(this,function(ln){switch(ln.label){case 0:return[4,l.endpoint()];case 1:if(r=ln.sent(),a=r.hostname,L=void 0===(j=r.protocol)?"https":j,W=r.port,F=r.path,_e=(0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)({"content-type":"application/xml"},yt(t.ContentMD5)&&{"content-md5":t.ContentMD5}),yt(t.ChecksumAlgorithm)&&{"x-amz-sdk-checksum-algorithm":t.ChecksumAlgorithm}),yt(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),yt(t.RequestPayer)&&{"x-amz-request-payer":t.RequestPayer}),Ie=((null==F?void 0:F.endsWith("/"))?F.slice(0,-1):F||"")+"/{Bucket}/{Key+}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((je=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(Ie=Ie.replace("{Bucket}",(0,xn.jc)(je)),void 0===t.Key)throw new Error("No value provided for input HTTP label: Key.");if((je=t.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return Ie=Ie.replace("{Key+}",je.split("/").map(function(Wn){return(0,xn.jc)(Wn)}).join("/")),vt=(0,S.pi)({tagging:""},void 0!==t.VersionId&&{versionId:t.VersionId}),void 0!==t.Tagging&&(Et=hd(t.Tagging,l)),void 0!==t.Tagging&&(ft=hd(t.Tagging,l),Et='<?xml version="1.0" encoding="UTF-8"?>',ft.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),Et+=ft.toString()),[2,new ee.aW({protocol:L,hostname:a,port:W,method:"PUT",headers:_e,path:Ie,query:vt,body:Et})]}})})}(r,a)},l.prototype.deserialize=function(r,a){return function(t,l){return(0,S.mG)(void 0,void 0,void 0,function(){var r;return(0,S.Jh)(this,function(a){switch(a.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Qt(t,l)]:(r={$metadata:sn(t),VersionId:void 0},void 0!==t.headers["x-amz-version-id"]&&(r.VersionId=t.headers["x-amz-version-id"]),[4,Ir(t.body,l)]);case 1:return a.sent(),[2,Promise.resolve(r)]}})})}(r,a)},l}(xn.mY),Tv=u(3358),Rv=u(6399),Mv=(0,S.pi)((0,S.pi)({},{lstatSync:function(){}}),{runtime:"node",lstatSync:Rv.lstatSync}),Kd=function(t){if(null==t)return 0;if("string"==typeof t&&(t=Buffer.from(t)),"number"==typeof t.byteLength)return t.byteLength;if("number"==typeof t.length)return t.length;if("number"==typeof t.size)return t.size;if("string"==typeof t.path)try{return Mv.lstatSync(t.path).size}catch{return}},Rc=u(5603),kv=u(574);function Kf(t,l){return(0,S.FC)(this,arguments,function(){var a,j,L;return(0,S.Jh)(this,function(W){switch(W.label){case 0:a=1,j=0,L=l,W.label=1;case 1:return L<t.byteLength?[4,(0,S.qq)({partNumber:a,data:t.slice(j,L)})]:[3,4];case 2:return[4,W.sent()];case 3:return W.sent(),a+=1,L=(j=L)+l,[3,1];case 4:return[4,(0,S.qq)({partNumber:a,data:t.slice(j),lastPart:!0})];case 5:return[4,W.sent()];case 6:return W.sent(),[2]}})})}function qd(t,l,r){return(0,S.FC)(this,arguments,function(){var j,L,W,F,_e,Ie,je,vt,Et;return(0,S.Jh)(this,function(ft){switch(ft.label){case 0:j=1,L={chunks:[],length:0},ft.label=1;case 1:ft.trys.push([1,9,10,15]),W=(0,S.KL)(r(t)),ft.label=2;case 2:return[4,(0,S.qq)(W.next())];case 3:if((F=ft.sent()).done)return[3,8];L.chunks.push(_e=F.value),L.length+=_e.length,ft.label=4;case 4:return L.length>=l?(Ie=L.chunks.length>1?Rc.lW.concat(L.chunks):L.chunks[0],[4,(0,S.qq)({partNumber:j,data:Ie.slice(0,l)})]):[3,7];case 5:return[4,ft.sent()];case 6:return ft.sent(),L.chunks=[Ie.slice(l)],L.length=L.chunks[0].length,j+=1,[3,4];case 7:return[3,2];case 8:return[3,15];case 9:return je=ft.sent(),vt={error:je},[3,15];case 10:return ft.trys.push([10,,13,14]),F&&!F.done&&(Et=W.return)?[4,(0,S.qq)(Et.call(W))]:[3,12];case 11:ft.sent(),ft.label=12;case 12:return[3,14];case 13:if(vt)throw vt.error;return[7];case 14:return[7];case 15:return[4,(0,S.qq)({partNumber:j,data:Rc.lW.concat(L.chunks),lastPart:!0})];case 16:return[4,ft.sent()];case 17:return ft.sent(),[2]}})})}function Fv(t){return(0,S.FC)(this,arguments,function(){var r,a,L,W,F;return(0,S.Jh)(this,function(_e){switch(_e.label){case 0:_e.trys.push([0,7,8,13]),r=(0,S.KL)(t),_e.label=1;case 1:return[4,(0,S.qq)(r.next())];case 2:return(a=_e.sent()).done?[3,6]:[4,(0,S.qq)(Rc.lW.from(a.value))];case 3:return[4,_e.sent()];case 4:_e.sent(),_e.label=5;case 5:return[3,1];case 6:return[3,13];case 7:return L=_e.sent(),W={error:L},[3,13];case 8:return _e.trys.push([8,,11,12]),a&&!a.done&&(F=r.return)?[4,(0,S.qq)(F.call(r))]:[3,10];case 9:_e.sent(),_e.label=10;case 10:return[3,12];case 11:if(W)throw W.error;return[7];case 12:return[7];case 13:return[2]}})})}function qf(t){return(0,S.FC)(this,arguments,function(){var r,a,L;return(0,S.Jh)(this,function(F){switch(F.label){case 0:r=t.getReader(),F.label=1;case 1:F.trys.push([1,9,10,11]),F.label=2;case 2:return[4,(0,S.qq)(r.read())];case 3:return a=F.sent(),L=a.value,a.done?[4,(0,S.qq)(void 0)]:[3,5];case 4:return[2,F.sent()];case 5:return[4,(0,S.qq)(Rc.lW.from(L))];case 6:return[4,F.sent()];case 7:return F.sent(),[3,2];case 8:return[3,11];case 9:throw F.sent();case 10:return r.releaseLock(),[7];case 11:return[2]}})})}var Wd=5242880,Nv=function(t){function l(r){var a=t.call(this)||this;return a.MAX_PARTS=1e4,a.queueSize=4,a.partSize=Wd,a.leavePartsOnError=!1,a.tags=[],a.concurrentUploaders=[],a.uploadedParts=[],a.isMultiPart=!0,a.queueSize=r.queueSize||a.queueSize,a.partSize=r.partSize||a.partSize,a.leavePartsOnError=r.leavePartsOnError||a.leavePartsOnError,a.tags=r.tags||a.tags,a.client=r.client,a.params=r.params,a.__validateInput(),a.totalBytes=Kd(a.params.Body),a.bytesUploadedSoFar=0,a.abortController=new N,a}return(0,S.ZT)(l,t),l.prototype.abort=function(){return(0,S.mG)(this,void 0,void 0,function(){return(0,S.Jh)(this,function(r){return this.abortController.abort(),[2]})})},l.prototype.done=function(){return(0,S.mG)(this,void 0,void 0,function(){return(0,S.Jh)(this,function(r){switch(r.label){case 0:return[4,Promise.race([this.__doMultipartUpload(),this.__abortTimeout(this.abortController.signal)])];case 1:return[2,r.sent()]}})})},l.prototype.on=function(r,a){this.uploadEvent=r,t.prototype.on.call(this,r,a)},l.prototype.__uploadUsingPut=function(r){return(0,S.mG)(this,void 0,void 0,function(){var a,j,L;return(0,S.Jh)(this,function(W){switch(W.label){case 0:return this.isMultiPart=!1,a=(0,S.pi)((0,S.pi)({},this.params),{Body:r.data}),[4,this.client.send(new fv(a))];case 1:return j=W.sent(),this.putResponse=j,L=Kd(r.data),this.__notifyProgress({loaded:L,total:L,part:1,Key:this.params.Key,Bucket:this.params.Bucket}),[2]}})})},l.prototype.__createMultipartUpload=function(){return(0,S.mG)(this,void 0,void 0,function(){var r,a;return(0,S.Jh)(this,function(j){switch(j.label){case 0:return this.createMultiPartPromise||(r=(0,S.pi)((0,S.pi)({},this.params),{Body:void 0}),this.createMultiPartPromise=this.client.send(new pv(r))),[4,this.createMultiPartPromise];case 1:return a=j.sent(),this.uploadId=a.UploadId,[2]}})})},l.prototype.__doConcurrentUpload=function(r){var a,j,L,W;return(0,S.mG)(this,void 0,void 0,function(){var F,_e,Ie,je;return(0,S.Jh)(this,function(vt){switch(vt.label){case 0:vt.trys.push([0,12,13,18]),a=(0,S.KL)(r),vt.label=1;case 1:return[4,a.next()];case 2:if((j=vt.sent()).done)return[3,11];if(F=j.value,this.uploadedParts.length>this.MAX_PARTS)throw new Error("Exceeded "+this.MAX_PARTS+" as part of the upload to "+this.params.Key+" and "+this.params.Bucket+".");vt.label=3;case 3:return vt.trys.push([3,9,,10]),this.abortController.signal.aborted?[2]:1===F.partNumber&&F.lastPart?[4,this.__uploadUsingPut(F)]:[3,5];case 4:return[2,vt.sent()];case 5:return this.uploadId?[3,7]:[4,this.__createMultipartUpload()];case 6:if(vt.sent(),this.abortController.signal.aborted)return[2];vt.label=7;case 7:return[4,this.client.send(new hv((0,S.pi)((0,S.pi)({},this.params),{UploadId:this.uploadId,Body:F.data,PartNumber:F.partNumber})))];case 8:return _e=vt.sent(),this.abortController.signal.aborted?[2]:(this.uploadedParts.push((0,S.pi)((0,S.pi)((0,S.pi)((0,S.pi)({PartNumber:F.partNumber,ETag:_e.ETag},_e.ChecksumCRC32&&{ChecksumCRC32:_e.ChecksumCRC32}),_e.ChecksumCRC32C&&{ChecksumCRC32C:_e.ChecksumCRC32C}),_e.ChecksumSHA1&&{ChecksumSHA1:_e.ChecksumSHA1}),_e.ChecksumSHA256&&{ChecksumSHA256:_e.ChecksumSHA256})),this.bytesUploadedSoFar+=Kd(F.data),this.__notifyProgress({loaded:this.bytesUploadedSoFar,total:this.totalBytes,part:F.partNumber,Key:this.params.Key,Bucket:this.params.Bucket}),[3,10]);case 9:if(Ie=vt.sent(),!this.uploadId||this.leavePartsOnError)throw Ie;return[3,10];case 10:return[3,1];case 11:return[3,18];case 12:return je=vt.sent(),L={error:je},[3,18];case 13:return vt.trys.push([13,,16,17]),j&&!j.done&&(W=a.return)?[4,W.call(a)]:[3,15];case 14:vt.sent(),vt.label=15;case 15:return[3,17];case 16:if(L)throw L.error;return[7];case 17:return[7];case 18:return[2]}})})},l.prototype.__doMultipartUpload=function(){return(0,S.mG)(this,void 0,void 0,function(){var r,a,j,L,W;return(0,S.Jh)(this,function(F){switch(F.label){case 0:for(r=function(t,l){if(t instanceof Rc.lW)return Kf(t,l);if(t instanceof kv.Readable)return qd(t,l,Fv);if(t instanceof String||"string"==typeof t||t instanceof Uint8Array)return Kf(Rc.lW.from(t),l);if("function"==typeof t.stream)return qd(t.stream(),l,qf);if(t instanceof ReadableStream)return qd(t,l,qf);throw new Error("Body Data is unsupported format, expected data to be one of: string | Uint8Array | Buffer | Readable | ReadableStream | Blob;.")}(this.params.Body,this.partSize),a=0;a<this.queueSize;a++)j=this.__doConcurrentUpload(r),this.concurrentUploaders.push(j);return[4,Promise.all(this.concurrentUploaders)];case 1:if(F.sent(),this.abortController.signal.aborted)throw Object.assign(new Error("Upload aborted."),{name:"AbortError"});return this.isMultiPart?(this.uploadedParts.sort(function(_e,Ie){return _e.PartNumber-Ie.PartNumber}),W=(0,S.pi)((0,S.pi)({},this.params),{Body:void 0,UploadId:this.uploadId,MultipartUpload:{Parts:this.uploadedParts}}),[4,this.client.send(new Pv(W))]):[3,3];case 2:return L=F.sent(),[3,4];case 3:L=this.putResponse,F.label=4;case 4:return this.tags.length?[4,this.client.send(new Iv((0,S.pi)((0,S.pi)({},this.params),{Tagging:{TagSet:this.tags}})))]:[3,6];case 5:F.sent(),F.label=6;case 6:return[2,L]}})})},l.prototype.__notifyProgress=function(r){this.uploadEvent&&this.emit(this.uploadEvent,r)},l.prototype.__abortTimeout=function(r){return(0,S.mG)(this,void 0,void 0,function(){return(0,S.Jh)(this,function(a){return[2,new Promise(function(j,L){r.onabort=function(){var W=new Error("Upload aborted.");W.name="AbortError",L(W)}})]})})},l.prototype.__validateInput=function(){if(!this.params)throw new Error("InputError: Upload requires params to be passed to upload.");if(!this.client)throw new Error("InputError: Upload requires a AWS client to do uploads with.");if(this.partSize<Wd)throw new Error("EntityTooSmall: Your proposed upload partsize ["+this.partSize+"] is smaller than the minimum allowed size ["+Wd+"] (5MB)");if(this.queueSize<1)throw new Error("Queue size: Must have at least one uploading queue.")},l}(Tv.EventEmitter),jv=u(6102),Bv=u(7878),Lv=u(884),md=u(6683),zv=u(6467),$v={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},Wf=u(5147),Hv=u(9014),kd=u(9972),Xf=u(2356),Qf=u(1703);var qv=u(6982),Wv=u(4907),Jf=u(7502),Uu=u(9775),Xd=function(){function t(l){if(this.bytes=l,8!==l.byteLength)throw new Error("Int64 buffers must be exactly 8 bytes")}return t.fromNumber=function(l){if(l>0x8000000000000000||l<-0x8000000000000000)throw new Error(l+" is too large (or, if negative, too small) to represent as an Int64");for(var r=new Uint8Array(8),a=7,j=Math.abs(Math.round(l));a>-1&&j>0;a--,j/=256)r[a]=j;return l<0&&Yf(r),new t(r)},t.prototype.valueOf=function(){var l=this.bytes.slice(0),r=128&l[0];return r&&Yf(l),parseInt((0,Uu.N)(l),16)*(r?-1:1)},t.prototype.toString=function(){return String(this.valueOf())},t}();function Yf(t){for(var l=0;l<8;l++)t[l]^=255;for(l=7;l>-1&&(t[l]++,0===t[l]);l--);}var Xv=function(){function t(l,r){this.toUtf8=l,this.fromUtf8=r}return t.prototype.format=function(l){var r,a,j,L,W=[];try{for(var F=(0,S.XA)(Object.keys(l)),_e=F.next();!_e.done;_e=F.next()){var Ie=_e.value,je=this.fromUtf8(Ie);W.push(Uint8Array.from([je.byteLength]),je,this.formatHeaderValue(l[Ie]))}}catch(sr){r={error:sr}}finally{try{_e&&!_e.done&&(a=F.return)&&a.call(F)}finally{if(r)throw r.error}}var vt=new Uint8Array(W.reduce(function(sr,yr){return sr+yr.byteLength},0)),Et=0;try{for(var ft=(0,S.XA)(W),ln=ft.next();!ln.done;ln=ft.next()){var Wn=ln.value;vt.set(Wn,Et),Et+=Wn.byteLength}}catch(sr){j={error:sr}}finally{try{ln&&!ln.done&&(L=ft.return)&&L.call(ft)}finally{if(j)throw j.error}}return vt},t.prototype.formatHeaderValue=function(l){switch(l.type){case"boolean":return Uint8Array.from([l.value?0:1]);case"byte":return Uint8Array.from([2,l.value]);case"short":var r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,l.value,!1),new Uint8Array(r.buffer);case"integer":var a=new DataView(new ArrayBuffer(5));return a.setUint8(0,4),a.setInt32(1,l.value,!1),new Uint8Array(a.buffer);case"long":var j=new Uint8Array(9);return j[0]=5,j.set(l.value.bytes,1),j;case"binary":var L=new DataView(new ArrayBuffer(3+l.value.byteLength));L.setUint8(0,6),L.setUint16(1,l.value.byteLength,!1);var W=new Uint8Array(L.buffer);return W.set(l.value,3),W;case"string":var F=this.fromUtf8(l.value),_e=new DataView(new ArrayBuffer(3+F.byteLength));_e.setUint8(0,7),_e.setUint16(1,F.byteLength,!1);var Ie=new Uint8Array(_e.buffer);return Ie.set(F,3),Ie;case"timestamp":var je=new Uint8Array(9);return je[0]=8,je.set(Xd.fromNumber(l.value.valueOf()).bytes,1),je;case"uuid":if(!iy.test(l.value))throw new Error("Invalid UUID received: "+l.value);var vt=new Uint8Array(17);return vt[0]=9,vt.set((0,Uu.H)(l.value.replace(/\-/g,"")),1),vt}},t.prototype.parse=function(l){for(var r={},a=0;a<l.byteLength;){var j=l.getUint8(a++),L=this.toUtf8(new Uint8Array(l.buffer,l.byteOffset+a,j));switch(a+=j,l.getUint8(a++)){case 0:r[L]={type:Zf,value:!0};break;case 1:r[L]={type:Zf,value:!1};break;case 2:r[L]={type:Qv,value:l.getInt8(a++)};break;case 3:r[L]={type:Jv,value:l.getInt16(a,!1)},a+=2;break;case 4:r[L]={type:Yv,value:l.getInt32(a,!1)},a+=4;break;case 5:r[L]={type:Zv,value:new Xd(new Uint8Array(l.buffer,l.byteOffset+a,8))},a+=8;break;case 6:var W=l.getUint16(a,!1);a+=2,r[L]={type:ey,value:new Uint8Array(l.buffer,l.byteOffset+a,W)},a+=W;break;case 7:var F=l.getUint16(a,!1);a+=2,r[L]={type:ty,value:this.toUtf8(new Uint8Array(l.buffer,l.byteOffset+a,F))},a+=F;break;case 8:r[L]={type:ny,value:new Date(new Xd(new Uint8Array(l.buffer,l.byteOffset+a,8)).valueOf())},a+=8;break;case 9:var _e=new Uint8Array(l.buffer,l.byteOffset+a,16);a+=16,r[L]={type:ry,value:(0,Uu.N)(_e.subarray(0,4))+"-"+(0,Uu.N)(_e.subarray(4,6))+"-"+(0,Uu.N)(_e.subarray(6,8))+"-"+(0,Uu.N)(_e.subarray(8,10))+"-"+(0,Uu.N)(_e.subarray(10))};break;default:throw new Error("Unrecognized header type tag")}}return r},t}(),Zf="boolean",Qv="byte",Jv="short",Yv="integer",Zv="long",ey="binary",ty="string",ny="timestamp",ry="uuid",iy=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,tp=function(){function t(l,r){this.headerMarshaller=new Xv(l,r)}return t.prototype.marshall=function(l){var a=l.body,j=this.headerMarshaller.format(l.headers),L=j.byteLength+a.byteLength+16,W=new Uint8Array(L),F=new DataView(W.buffer,W.byteOffset,W.byteLength),_e=new Jf.Crc32;return F.setUint32(0,L,!1),F.setUint32(4,j.byteLength,!1),F.setUint32(8,_e.update(W.subarray(0,8)).digest(),!1),W.set(j,12),W.set(a,j.byteLength+12),F.setUint32(L-4,_e.update(W.subarray(8,L-4)).digest(),!1),W},t.prototype.unmarshall=function(l){var r=function sy(t){var l=t.byteLength,r=t.byteOffset,a=t.buffer;if(l<16)throw new Error("Provided message too short to accommodate event stream message overhead");var j=new DataView(a,r,l),L=j.getUint32(0,!1);if(l!==L)throw new Error("Reported message length does not match received message length");var W=j.getUint32(4,!1),F=j.getUint32(8,!1),_e=j.getUint32(l-4,!1),Ie=(new Jf.Crc32).update(new Uint8Array(a,r,8));if(F!==Ie.digest())throw new Error("The prelude checksum specified in the message ("+F+") does not match the calculated CRC32 checksum ("+Ie.digest()+")");if(Ie.update(new Uint8Array(a,r+8,l-12)),_e!==Ie.digest())throw new Error("The message checksum ("+Ie.digest()+") did not match the expected value of "+_e);return{headers:new DataView(a,r+8+4,W),body:new Uint8Array(a,r+8+4+W,L-W-16)}}(l),j=r.body;return{headers:this.headerMarshaller.parse(r.headers),body:j}},t.prototype.formatHeaders=function(l){return this.headerMarshaller.format(l)},t}(),uy=function(){function t(l){var r=l.utf8Encoder;this.eventMarshaller=new tp(r,l.utf8Decoder),this.utfEncoder=r}return t.prototype.deserialize=function(l,r){var a=function ay(t){var l,r=0,a=0,j=null,L=null,W=function(_e){if("number"!=typeof _e)throw new Error("Attempted to allocate an event message where size was not a number: "+_e);r=_e,a=4,j=new Uint8Array(_e),new DataView(j.buffer).setUint32(0,_e,!1)};return(l={})[Symbol.asyncIterator]=function(){return(0,S.FC)(this,arguments,function(){var _e,Ie,je,Et,ft,ln,Wn,sr;return(0,S.Jh)(this,function(yr){switch(yr.label){case 0:_e=t[Symbol.asyncIterator](),yr.label=1;case 1:return[4,(0,S.qq)(_e.next())];case 2:return Ie=yr.sent(),je=Ie.value,Ie.done?r?[3,4]:[4,(0,S.qq)(void 0)]:[3,10];case 3:return[2,yr.sent()];case 4:return r!==a?[3,7]:[4,(0,S.qq)(j)];case 5:return[4,yr.sent()];case 6:return yr.sent(),[3,8];case 7:throw new Error("Truncated event message received.");case 8:return[4,(0,S.qq)(void 0)];case 9:return[2,yr.sent()];case 10:Et=je.length,ft=0,yr.label=11;case 11:if(!(ft<Et))return[3,15];if(!j){if(ln=Et-ft,L||(L=new Uint8Array(4)),Wn=Math.min(4-a,ln),L.set(je.slice(ft,ft+Wn),a),ft+=Wn,(a+=Wn)<4)return[3,15];W(new DataView(L.buffer).getUint32(0,!1)),L=null}return sr=Math.min(r-a,Et-ft),j.set(je.slice(ft,ft+sr),a),a+=sr,ft+=sr,r&&r===a?[4,(0,S.qq)(j)]:[3,14];case 12:return[4,yr.sent()];case 13:yr.sent(),j=null,r=0,a=0,yr.label=14;case 14:return[3,11];case 15:return[3,1];case 16:return[2]}})})},l}(l),j=function ly(t,l){var r;return(r={})[Symbol.asyncIterator]=function(){return(0,S.FC)(this,arguments,function(){var a,j,W,F,_e,Ie,vt,Et,ln,Wn,sr,yr,si,ei;return(0,S.Jh)(this,function(ii){switch(ii.label){case 0:ii.trys.push([0,12,13,18]),a=(0,S.KL)(t),ii.label=1;case 1:return[4,(0,S.qq)(a.next())];case 2:if((j=ii.sent()).done)return[3,11];if(W=l.eventMarshaller.unmarshall(j.value),"error"!==(F=W.headers[":message-type"].value))return[3,3];throw(_e=new Error(W.headers[":error-message"].value||"UnknownError")).name=W.headers[":error-code"].value,_e;case 3:return"exception"!==F?[3,5]:((sr={})[Ie=W.headers[":exception-type"].value]=W,[4,(0,S.qq)(l.deserializer(sr))]);case 4:throw(vt=ii.sent()).$unknown?((Et=new Error(l.toUtf8(W.body))).name=Ie,Et):vt[Ie];case 5:return"event"!==F?[3,9]:((yr={})[W.headers[":event-type"].value]=W,[4,(0,S.qq)(l.deserializer(yr))]);case 6:return(ln=ii.sent()).$unknown?[3,10]:[4,(0,S.qq)(ln)];case 7:return[4,ii.sent()];case 8:return ii.sent(),[3,10];case 9:throw Error("Unrecognizable event type: "+W.headers[":event-type"].value);case 10:return[3,1];case 11:return[3,18];case 12:return Wn=ii.sent(),si={error:Wn},[3,18];case 13:return ii.trys.push([13,,16,17]),j&&!j.done&&(ei=a.return)?[4,(0,S.qq)(ei.call(a))]:[3,15];case 14:ii.sent(),ii.label=15;case 15:return[3,17];case 16:if(si)throw si.error;return[7];case 17:return[7];case 18:return[2]}})})},r}(a,{eventMarshaller:this.eventMarshaller,deserializer:r,toUtf8:this.utfEncoder});return j},t.prototype.serialize=function(l,r){var a,j=this;return(a={})[Symbol.asyncIterator]=function(){return(0,S.FC)(this,arguments,function(){var W,F,Ie,je,vt,Et;return(0,S.Jh)(this,function(ft){switch(ft.label){case 0:ft.trys.push([0,7,8,13]),W=(0,S.KL)(l),ft.label=1;case 1:return[4,(0,S.qq)(W.next())];case 2:return(F=ft.sent()).done?[3,6]:(Ie=j.eventMarshaller.marshall(r(F.value)),[4,(0,S.qq)(Ie)]);case 3:return[4,ft.sent()];case 4:ft.sent(),ft.label=5;case 5:return[3,1];case 6:return[3,13];case 7:return je=ft.sent(),vt={error:je},[3,13];case 8:return ft.trys.push([8,,11,12]),F&&!F.done&&(Et=W.return)?[4,(0,S.qq)(Et.call(W))]:[3,10];case 9:ft.sent(),ft.label=10;case 10:return[3,12];case 11:if(vt)throw vt.error;return[7];case 12:return[7];case 13:return[4,(0,S.qq)(new Uint8Array(0))];case 14:return[4,ft.sent()];case 15:return ft.sent(),[2]}})})},a},t}(),fy=function(){function t(l){var r=l.utf8Encoder,a=l.utf8Decoder;this.eventMarshaller=new tp(r,a),this.universalMarshaller=new uy({utf8Decoder:a,utf8Encoder:r})}return t.prototype.deserialize=function(l,r){var a=py(l)?function(t){var l;return(l={})[Symbol.asyncIterator]=function(){return(0,S.FC)(this,arguments,function(){var r,a,L;return(0,S.Jh)(this,function(W){switch(W.label){case 0:r=t.getReader(),W.label=1;case 1:W.trys.push([1,,9,10]),W.label=2;case 2:return[4,(0,S.qq)(r.read())];case 3:return a=W.sent(),L=a.value,a.done?[4,(0,S.qq)(void 0)]:[3,5];case 4:return[2,W.sent()];case 5:return[4,(0,S.qq)(L)];case 6:return[4,W.sent()];case 7:return W.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})},l}(l):l;return this.universalMarshaller.deserialize(a,r)},t.prototype.serialize=function(l,r){var a=this.universalMarshaller.serialize(l,r);return"function"==typeof ReadableStream?function(t){var l=t[Symbol.asyncIterator]();return new ReadableStream({pull:function(r){return(0,S.mG)(this,void 0,void 0,function(){var a,L;return(0,S.Jh)(this,function(W){switch(W.label){case 0:return[4,l.next()];case 1:return a=W.sent(),L=a.value,a.done?[2,r.close()]:(r.enqueue(L),[2])}})})}})}(a):a},t}(),py=function(t){return"function"==typeof ReadableStream&&t instanceof ReadableStream},hy=function(t){return new fy(t)},np=u(1237);function my(t,l,r){return void 0===r&&(r=1048576),new Promise(function(a,j){var L=new FileReader;L.addEventListener("error",j),L.addEventListener("abort",j);var W=t.size,F=0;function _e(){F>=W?a():L.readAsArrayBuffer(t.slice(F,Math.min(W,F+r)))}L.addEventListener("load",function(Ie){var je=Ie.target.result;l(new Uint8Array(je)),F+=je.byteLength,_e()}),_e()})}var gy=function(l,r){return(0,S.mG)(this,void 0,void 0,function(){var a;return(0,S.Jh)(this,function(j){switch(j.label){case 0:return a=new l,[4,my(r,function(L){a.update(L)})];case 1:return j.sent(),[2,a.digest()]}})})},vy=u(6752),Qd=u(2093),_y=[1732584193,4023233417,2562383102,271733878],by=function(){function t(){this.state=Uint32Array.from(_y),this.buffer=new DataView(new ArrayBuffer(64)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return t.prototype.update=function(l){if(!function wy(t){return"string"==typeof t?0===t.length:0===t.byteLength}(l)){if(this.finished)throw new Error("Attempted to update an already finished hash.");var r=function Cy(t){return"string"==typeof t?(0,Qd.fromUtf8)(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}(l),a=0,j=r.byteLength;for(this.bytesHashed+=j;j>0;)this.buffer.setUint8(this.bufferLength++,r[a++]),j--,64===this.bufferLength&&(this.hashBuffer(),this.bufferLength=0)}},t.prototype.digest=function(){return(0,S.mG)(this,void 0,void 0,function(){var l,r,a,L,W,F;return(0,S.Jh)(this,function(_e){if(!this.finished){if(a=(l=this).bufferLength,L=8*l.bytesHashed,(r=l.buffer).setUint8(this.bufferLength++,128),a%64>=56){for(F=this.bufferLength;F<64;F++)r.setUint8(F,0);this.hashBuffer(),this.bufferLength=0}for(F=this.bufferLength;F<56;F++)r.setUint8(F,0);r.setUint32(56,L>>>0,!0),r.setUint32(60,Math.floor(L/4294967296),!0),this.hashBuffer(),this.finished=!0}for(W=new DataView(new ArrayBuffer(16)),F=0;F<4;F++)W.setUint32(4*F,this.state[F],!0);return[2,new Uint8Array(W.buffer,W.byteOffset,W.byteLength)]})})},t.prototype.hashBuffer=function(){var r=this.buffer,a=this.state,j=a[0],L=a[1],W=a[2],F=a[3];j=fo(j,L,W,F,r.getUint32(0,!0),7,3614090360),F=fo(F,j,L,W,r.getUint32(4,!0),12,3905402710),W=fo(W,F,j,L,r.getUint32(8,!0),17,606105819),L=fo(L,W,F,j,r.getUint32(12,!0),22,3250441966),j=fo(j,L,W,F,r.getUint32(16,!0),7,4118548399),F=fo(F,j,L,W,r.getUint32(20,!0),12,1200080426),W=fo(W,F,j,L,r.getUint32(24,!0),17,2821735955),L=fo(L,W,F,j,r.getUint32(28,!0),22,4249261313),j=fo(j,L,W,F,r.getUint32(32,!0),7,1770035416),F=fo(F,j,L,W,r.getUint32(36,!0),12,2336552879),W=fo(W,F,j,L,r.getUint32(40,!0),17,4294925233),L=fo(L,W,F,j,r.getUint32(44,!0),22,2304563134),j=fo(j,L,W,F,r.getUint32(48,!0),7,1804603682),F=fo(F,j,L,W,r.getUint32(52,!0),12,4254626195),W=fo(W,F,j,L,r.getUint32(56,!0),17,2792965006),j=po(j,L=fo(L,W,F,j,r.getUint32(60,!0),22,1236535329),W,F,r.getUint32(4,!0),5,4129170786),F=po(F,j,L,W,r.getUint32(24,!0),9,3225465664),W=po(W,F,j,L,r.getUint32(44,!0),14,643717713),L=po(L,W,F,j,r.getUint32(0,!0),20,3921069994),j=po(j,L,W,F,r.getUint32(20,!0),5,3593408605),F=po(F,j,L,W,r.getUint32(40,!0),9,38016083),W=po(W,F,j,L,r.getUint32(60,!0),14,3634488961),L=po(L,W,F,j,r.getUint32(16,!0),20,3889429448),j=po(j,L,W,F,r.getUint32(36,!0),5,568446438),F=po(F,j,L,W,r.getUint32(56,!0),9,3275163606),W=po(W,F,j,L,r.getUint32(12,!0),14,4107603335),L=po(L,W,F,j,r.getUint32(32,!0),20,1163531501),j=po(j,L,W,F,r.getUint32(52,!0),5,2850285829),F=po(F,j,L,W,r.getUint32(8,!0),9,4243563512),W=po(W,F,j,L,r.getUint32(28,!0),14,1735328473),j=ho(j,L=po(L,W,F,j,r.getUint32(48,!0),20,2368359562),W,F,r.getUint32(20,!0),4,4294588738),F=ho(F,j,L,W,r.getUint32(32,!0),11,2272392833),W=ho(W,F,j,L,r.getUint32(44,!0),16,1839030562),L=ho(L,W,F,j,r.getUint32(56,!0),23,4259657740),j=ho(j,L,W,F,r.getUint32(4,!0),4,2763975236),F=ho(F,j,L,W,r.getUint32(16,!0),11,1272893353),W=ho(W,F,j,L,r.getUint32(28,!0),16,4139469664),L=ho(L,W,F,j,r.getUint32(40,!0),23,3200236656),j=ho(j,L,W,F,r.getUint32(52,!0),4,681279174),F=ho(F,j,L,W,r.getUint32(0,!0),11,3936430074),W=ho(W,F,j,L,r.getUint32(12,!0),16,3572445317),L=ho(L,W,F,j,r.getUint32(24,!0),23,76029189),j=ho(j,L,W,F,r.getUint32(36,!0),4,3654602809),F=ho(F,j,L,W,r.getUint32(48,!0),11,3873151461),W=ho(W,F,j,L,r.getUint32(60,!0),16,530742520),j=mo(j,L=ho(L,W,F,j,r.getUint32(8,!0),23,3299628645),W,F,r.getUint32(0,!0),6,4096336452),F=mo(F,j,L,W,r.getUint32(28,!0),10,1126891415),W=mo(W,F,j,L,r.getUint32(56,!0),15,2878612391),L=mo(L,W,F,j,r.getUint32(20,!0),21,4237533241),j=mo(j,L,W,F,r.getUint32(48,!0),6,1700485571),F=mo(F,j,L,W,r.getUint32(12,!0),10,2399980690),W=mo(W,F,j,L,r.getUint32(40,!0),15,4293915773),L=mo(L,W,F,j,r.getUint32(4,!0),21,2240044497),j=mo(j,L,W,F,r.getUint32(32,!0),6,1873313359),F=mo(F,j,L,W,r.getUint32(60,!0),10,4264355552),W=mo(W,F,j,L,r.getUint32(24,!0),15,2734768916),L=mo(L,W,F,j,r.getUint32(52,!0),21,1309151649),j=mo(j,L,W,F,r.getUint32(16,!0),6,4149444226),F=mo(F,j,L,W,r.getUint32(44,!0),10,3174756917),W=mo(W,F,j,L,r.getUint32(8,!0),15,718787259),L=mo(L,W,F,j,r.getUint32(36,!0),21,3951481745),a[0]=j+a[0]&4294967295,a[1]=L+a[1]&4294967295,a[2]=W+a[2]&4294967295,a[3]=F+a[3]&4294967295},t}();function Fd(t,l,r,a,j,L){return((l=(l+t&4294967295)+(a+L&4294967295)&4294967295)<<j|l>>>32-j)+r&4294967295}function fo(t,l,r,a,j,L,W){return Fd(l&r|~l&a,t,l,j,L,W)}function po(t,l,r,a,j,L,W){return Fd(l&a|r&~a,t,l,j,L,W)}function ho(t,l,r,a,j,L,W){return Fd(l^r^a,t,l,j,L,W)}function mo(t,l,r,a,j,L,W){return Fd(r^(l|~a),t,l,j,L,W)}var rp=u(1187),xy=u(2845),Ey=function(t,l){var r=l.base64Encoder,a=l.bodyLengthChecker,j=l.checksumAlgorithmFn,L=l.checksumLocationName,W=l.streamHasher,F=void 0!==r&&void 0!==a&&void 0!==j&&void 0!==L&&void 0!==W,_e=F?W(j,t):void 0,Ie=t.getReader();return new ReadableStream({pull:function(je){return(0,S.mG)(this,void 0,void 0,function(){var vt,Et,ln,Wn;return(0,S.Jh)(this,function(sr){switch(sr.label){case 0:return[4,Ie.read()];case 1:return vt=sr.sent(),Et=vt.value,vt.done?(je.enqueue("0\r\n"),F?(Wn=r,[4,_e]):[3,3]):[3,4];case 2:ln=Wn.apply(void 0,[sr.sent()]),je.enqueue(L+":"+ln+"\r\n"),je.enqueue("\r\n"),sr.label=3;case 3:return je.close(),[3,5];case 4:je.enqueue((a(Et)||0).toString(16)+"\r\n"+Et+"\r\n"),sr.label=5;case 5:return[2]}})})}})},Sy=u(3018),Ay=u(4707),Py={"af-south-1":{variants:[{hostname:"s3.dualstack.af-south-1.amazonaws.com",tags:["dualstack"]}]},"ap-east-1":{variants:[{hostname:"s3.dualstack.ap-east-1.amazonaws.com",tags:["dualstack"]}]},"ap-northeast-1":{variants:[{hostname:"s3.ap-northeast-1.amazonaws.com",tags:[]},{hostname:"s3.dualstack.ap-northeast-1.amazonaws.com",tags:["dualstack"]}]},"ap-northeast-2":{variants:[{hostname:"s3.dualstack.ap-northeast-2.amazonaws.com",tags:["dualstack"]}]},"ap-northeast-3":{variants:[{hostname:"s3.dualstack.ap-northeast-3.amazonaws.com",tags:["dualstack"]}]},"ap-south-1":{variants:[{hostname:"s3.dualstack.ap-south-1.amazonaws.com",tags:["dualstack"]}]},"ap-southeast-1":{variants:[{hostname:"s3.ap-southeast-1.amazonaws.com",tags:[]},{hostname:"s3.dualstack.ap-southeast-1.amazonaws.com",tags:["dualstack"]}]},"ap-southeast-2":{variants:[{hostname:"s3.ap-southeast-2.amazonaws.com",tags:[]},{hostname:"s3.dualstack.ap-southeast-2.amazonaws.com",tags:["dualstack"]}]},"ap-southeast-3":{variants:[{hostname:"s3.dualstack.ap-southeast-3.amazonaws.com",tags:["dualstack"]}]},"aws-global":{variants:[{hostname:"s3.amazonaws.com",tags:[]}],signingRegion:"us-east-1"},"ca-central-1":{variants:[{hostname:"s3-fips.ca-central-1.amazonaws.com",tags:["fips"]},{hostname:"s3-fips.dualstack.ca-central-1.amazonaws.com",tags:["dualstack","fips"]},{hostname:"s3.dualstack.ca-central-1.amazonaws.com",tags:["dualstack"]}]},"cn-north-1":{variants:[{hostname:"s3.dualstack.cn-north-1.amazonaws.com.cn",tags:["dualstack"]}]},"cn-northwest-1":{variants:[{hostname:"s3.dualstack.cn-northwest-1.amazonaws.com.cn",tags:["dualstack"]}]},"eu-central-1":{variants:[{hostname:"s3.dualstack.eu-central-1.amazonaws.com",tags:["dualstack"]}]},"eu-north-1":{variants:[{hostname:"s3.dualstack.eu-north-1.amazonaws.com",tags:["dualstack"]}]},"eu-south-1":{variants:[{hostname:"s3.dualstack.eu-south-1.amazonaws.com",tags:["dualstack"]}]},"eu-west-1":{variants:[{hostname:"s3.eu-west-1.amazonaws.com",tags:[]},{hostname:"s3.dualstack.eu-west-1.amazonaws.com",tags:["dualstack"]}]},"eu-west-2":{variants:[{hostname:"s3.dualstack.eu-west-2.amazonaws.com",tags:["dualstack"]}]},"eu-west-3":{variants:[{hostname:"s3.dualstack.eu-west-3.amazonaws.com",tags:["dualstack"]}]},"me-south-1":{variants:[{hostname:"s3.dualstack.me-south-1.amazonaws.com",tags:["dualstack"]}]},"s3-external-1":{variants:[{hostname:"s3-external-1.amazonaws.com",tags:[]}],signingRegion:"us-east-1"},"sa-east-1":{variants:[{hostname:"s3.sa-east-1.amazonaws.com",tags:[]},{hostname:"s3.dualstack.sa-east-1.amazonaws.com",tags:["dualstack"]}]},"us-east-1":{variants:[{hostname:"s3.us-east-1.amazonaws.com",tags:[]},{hostname:"s3-fips.dualstack.us-east-1.amazonaws.com",tags:["dualstack","fips"]},{hostname:"s3-fips.us-east-1.amazonaws.com",tags:["fips"]},{hostname:"s3.dualstack.us-east-1.amazonaws.com",tags:["dualstack"]}]},"us-east-2":{variants:[{hostname:"s3-fips.dualstack.us-east-2.amazonaws.com",tags:["dualstack","fips"]},{hostname:"s3-fips.us-east-2.amazonaws.com",tags:["fips"]},{hostname:"s3.dualstack.us-east-2.amazonaws.com",tags:["dualstack"]}]},"us-gov-east-1":{variants:[{hostname:"s3.us-gov-east-1.amazonaws.com",tags:[]},{hostname:"s3-fips.us-gov-east-1.amazonaws.com",tags:["fips"]},{hostname:"s3.dualstack.us-gov-east-1.amazonaws.com",tags:["dualstack"]}]},"us-gov-west-1":{variants:[{hostname:"s3.us-gov-west-1.amazonaws.com",tags:[]},{hostname:"s3-fips.us-gov-west-1.amazonaws.com",tags:["fips"]},{hostname:"s3.dualstack.us-gov-west-1.amazonaws.com",tags:["dualstack"]}]},"us-west-1":{variants:[{hostname:"s3.us-west-1.amazonaws.com",tags:[]},{hostname:"s3-fips.dualstack.us-west-1.amazonaws.com",tags:["dualstack","fips"]},{hostname:"s3-fips.us-west-1.amazonaws.com",tags:["fips"]},{hostname:"s3.dualstack.us-west-1.amazonaws.com",tags:["dualstack"]}]},"us-west-2":{variants:[{hostname:"s3.us-west-2.amazonaws.com",tags:[]},{hostname:"s3-fips.dualstack.us-west-2.amazonaws.com",tags:["dualstack","fips"]},{hostname:"s3-fips.us-west-2.amazonaws.com",tags:["fips"]},{hostname:"s3.dualstack.us-west-2.amazonaws.com",tags:["dualstack"]}]}},Iy={aws:{regions:["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-northeast-3","ap-south-1","ap-southeast-1","ap-southeast-2","ap-southeast-3","aws-global","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","fips-ca-central-1","fips-us-east-1","fips-us-east-2","fips-us-west-1","fips-us-west-2","me-south-1","s3-external-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"],regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",variants:[{hostname:"s3.{region}.amazonaws.com",tags:[]},{hostname:"s3-fips.{region}.amazonaws.com",tags:["fips"]},{hostname:"s3-fips.dualstack.{region}.amazonaws.com",tags:["dualstack","fips"]},{hostname:"s3.dualstack.{region}.amazonaws.com",tags:["dualstack"]}]},"aws-cn":{regions:["cn-north-1","cn-northwest-1"],regionRegex:"^cn\\-\\w+\\-\\d+$",variants:[{hostname:"s3.{region}.amazonaws.com.cn",tags:[]},{hostname:"s3-fips.{region}.amazonaws.com.cn",tags:["fips"]},{hostname:"s3-fips.{region}.api.amazonwebservices.com.cn",tags:["dualstack","fips"]},{hostname:"s3.dualstack.{region}.amazonaws.com.cn",tags:["dualstack"]}]},"aws-iso":{regions:["us-iso-east-1","us-iso-west-1"],regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",variants:[{hostname:"s3.{region}.c2s.ic.gov",tags:[]},{hostname:"s3-fips.{region}.c2s.ic.gov",tags:["fips"]}]},"aws-iso-b":{regions:["us-isob-east-1"],regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",variants:[{hostname:"s3.{region}.sc2s.sgov.gov",tags:[]},{hostname:"s3-fips.{region}.sc2s.sgov.gov",tags:["fips"]}]},"aws-us-gov":{regions:["fips-us-gov-east-1","fips-us-gov-west-1","us-gov-east-1","us-gov-west-1"],regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",variants:[{hostname:"s3.{region}.amazonaws.com",tags:[]},{hostname:"s3-fips.{region}.amazonaws.com",tags:["fips"]},{hostname:"s3-fips.dualstack.{region}.amazonaws.com",tags:["dualstack","fips"]},{hostname:"s3.dualstack.{region}.amazonaws.com",tags:["dualstack"]}]}},Ty=function(t,l){return(0,S.mG)(void 0,void 0,void 0,function(){return(0,S.Jh)(this,function(r){return[2,(0,md.iF)(t,(0,S.pi)((0,S.pi)({},l),{signingService:"s3",regionHash:Py,partitionHash:Iy}))]})})},Oy=u(8959),ky=function(t){function l(r){var a=this,j=function(t){var l,r,a,j,L,W,F,_e,Ie,je,vt,Et,ft,ln,Wn,sr,yr,si,ei,ii,Ri=(0,Oy.j)(t),vs=function(){return Ri().then(xn.jv)},ys=function(t){var l,r,a,j,L,W,F,_e;return{apiVersion:"2006-03-01",disableHostPrefix:null!==(l=null==t?void 0:t.disableHostPrefix)&&void 0!==l&&l,logger:null!==(r=null==t?void 0:t.logger)&&void 0!==r?r:{},regionInfoProvider:null!==(a=null==t?void 0:t.regionInfoProvider)&&void 0!==a?a:Ty,serviceId:null!==(j=null==t?void 0:t.serviceId)&&void 0!==j?j:"S3",signerConstructor:null!==(L=null==t?void 0:t.signerConstructor)&&void 0!==L?L:gv,signingEscapePath:null!==(W=null==t?void 0:t.signingEscapePath)&&void 0!==W&&W,urlParser:null!==(F=null==t?void 0:t.urlParser)&&void 0!==F?F:Ay.e,useArnRegion:null!==(_e=null==t?void 0:t.useArnRegion)&&void 0!==_e&&_e}}(t);return(0,S.pi)((0,S.pi)((0,S.pi)({},ys),t),{runtime:"browser",defaultsMode:Ri,base64Decoder:null!==(l=null==t?void 0:t.base64Decoder)&&void 0!==l?l:rp.G,base64Encoder:null!==(r=null==t?void 0:t.base64Encoder)&&void 0!==r?r:rp.s,bodyLengthChecker:null!==(a=null==t?void 0:t.bodyLengthChecker)&&void 0!==a?a:xy.W,credentialDefaultProvider:null!==(j=null==t?void 0:t.credentialDefaultProvider)&&void 0!==j?j:function(Mo){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:null!==(L=null==t?void 0:t.defaultUserAgentProvider)&&void 0!==L?L:(0,Sy.f)({serviceId:ys.serviceId,clientVersion:"3.54.0"}),eventStreamSerdeProvider:null!==(W=null==t?void 0:t.eventStreamSerdeProvider)&&void 0!==W?W:hy,getAwsChunkedEncodingStream:null!==(F=null==t?void 0:t.getAwsChunkedEncodingStream)&&void 0!==F?F:Ey,maxAttempts:null!==(_e=null==t?void 0:t.maxAttempts)&&void 0!==_e?_e:kd.J,md5:null!==(Ie=null==t?void 0:t.md5)&&void 0!==Ie?Ie:by,region:null!==(je=null==t?void 0:t.region)&&void 0!==je?je:(0,vy.n)("Region is missing"),requestHandler:null!==(vt=null==t?void 0:t.requestHandler)&&void 0!==vt?vt:new np.B(vs),retryMode:null!==(Et=null==t?void 0:t.retryMode)&&void 0!==Et?Et:function(){return(0,S.mG)(void 0,void 0,void 0,function(){return(0,S.Jh)(this,function(Mo){switch(Mo.label){case 0:return[4,vs()];case 1:return[2,Mo.sent().retryMode||kd.CA]}})})},sha1:null!==(ft=null==t?void 0:t.sha1)&&void 0!==ft?ft:qv.Sha1,sha256:null!==(ln=null==t?void 0:t.sha256)&&void 0!==ln?ln:Wv.Sha256,streamCollector:null!==(Wn=null==t?void 0:t.streamCollector)&&void 0!==Wn?Wn:np.C,streamHasher:null!==(sr=null==t?void 0:t.streamHasher)&&void 0!==sr?sr:gy,useDualstackEndpoint:null!==(yr=null==t?void 0:t.useDualstackEndpoint)&&void 0!==yr?yr:function(){return Promise.resolve(md.JY)},useFipsEndpoint:null!==(si=null==t?void 0:t.useFipsEndpoint)&&void 0!==si?si:function(){return Promise.resolve(md.Fh)},utf8Decoder:null!==(ei=null==t?void 0:t.utf8Decoder)&&void 0!==ei?ei:Qd.fromUtf8,utf8Encoder:null!==(ii=null==t?void 0:t.utf8Encoder)&&void 0!==ii?ii:Qd.toUtf8})}(r),L=(0,md.Xb)(j),W=(0,md.g4)(L),F=(0,kd.BC)(W),_e=(0,Wf.S8)(F),je=function st(t){var l=t.bucketEndpoint,r=void 0!==l&&l,a=t.forcePathStyle,j=void 0!==a&&a,L=t.useAccelerateEndpoint,W=void 0!==L&&L,F=t.useArnRegion,_e=void 0!==F&&F,Ie=t.disableMultiregionAccessPoints,je=void 0!==Ie&&Ie;return(0,S.pi)((0,S.pi)({},t),{bucketEndpoint:r,forcePathStyle:j,useAccelerateEndpoint:W,useArnRegion:"function"==typeof _e?_e:function(){return Promise.resolve(_e)},disableMultiregionAccessPoints:"function"==typeof je?je:function(){return Promise.resolve(je)}})}((0,Xf.A$)(_e)),Et=function(t){return(0,S.pi)((0,S.pi)({},t),{eventStreamMarshaller:t.eventStreamSerdeProvider(t)})}((0,Qf.er)(je));return(a=t.call(this,Et)||this).config=Et,a.middlewareStack.use((0,kd.NQ)(a.config)),a.middlewareStack.use((0,zv.VG)(a.config)),a.middlewareStack.use((0,Wf.G2)(a.config)),a.middlewareStack.use((0,Hv.cV)(a.config)),a.middlewareStack.use((0,Xf.yt)(a.config)),a.middlewareStack.use({applyToStack:function(l){l.add(function Ev(){var t=this;return function(l){return function(r){return(0,S.mG)(t,void 0,void 0,function(){var a,j;return(0,S.Jh)(this,function(L){if("string"==typeof(a=r.input.Bucket)&&!ve(a)&&a.indexOf("/")>=0)throw(j=new Error("Bucket name shouldn't contain '/', received '"+a+"'")).name="InvalidBucketName",j;return[2,l((0,S.pi)({},r))]})})}}}(),Sv)}}),a.middlewareStack.use(function(t){return{applyToStack:function(l){l.add(function(t){return function(l){return function(r){return(0,S.mG)(void 0,void 0,void 0,function(){var a,j;return(0,S.Jh)(this,function(L){switch(L.label){case 0:return!ee.aW.isInstance(a=r.request)||t.isCustomEndpoint?[2,l((0,S.pi)({},r))]:"s3.amazonaws.com"!==a.hostname?[3,1]:(a.hostname="s3.us-east-1.amazonaws.com",[3,3]);case 1:return j="aws-global",[4,t.region()];case 2:j===L.sent()&&(a.hostname="s3.amazonaws.com"),L.label=3;case 3:return[2,l((0,S.pi)({},r))]}})})}}}(t),Cv)}}}(a.config)),a.middlewareStack.use(function(t){return{applyToStack:function(l){l.add(function Gv(t){var l=this;return function(r){return function(a){return(0,S.mG)(l,void 0,void 0,function(){var j;return(0,S.Jh)(this,function(L){return ee.aW.isInstance(j=a.request)&&j.body&&"node"===t.runtime&&(j.headers=(0,S.pi)((0,S.pi)({},j.headers),{Expect:"100-continue"})),[2,r((0,S.pi)((0,S.pi)({},a),{request:j}))]})})}}}(t),$v)}}}(a.config)),a.middlewareStack.use((0,Qf.XJ)(a.config)),a}return(0,S.ZT)(l,t),l.prototype.destroy=function(){t.prototype.destroy.call(this)},l}(xn.KU),Fy=u(6152),Dy=u(3271);let Ny=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-mediafile-pane-renderer"]],decls:1,vars:0,template:function(r,a){1&r&&e.\u0275\u0275text(0,"Media File")},styles:[""]}),t})(),By=(()=>{class t{constructor(r){r.register(new y.ContentPlugin({id:"media_file",title:"Media File",selectionComponent:void 0,editorComponent:void 0,renderComponent:Ny,handler:void 0}))}}return t.\u0275fac=function(r){return new(r||t)(e.\u0275\u0275inject(y.ContentPluginManager))},t.\u0275mod=e.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=e.\u0275\u0275defineInjector({imports:[[n.CommonModule]]}),t})();const ip=new e.InjectionToken("Media Settings");class Ly{constructor(l){l&&(this.endpointUrl=l.endpointUrl,this.cloudinaryUrl=l.cloudinaryUrl,this.uploadPreset=l.uploadPreset,this.imageUrl=l.imageUrl,this.bucket=l.bucket,this.prefix=l.prefix)}}class op{constructor(l){l&&(this.id=l.id,this.contentType=l.contentType,this.contentDisposition=l.contentDisposition,this.path=l.path,this.fileName=l.fileName,this.length=l.length,this.extension=l.extension?l.extension:void 0,this.realPath=l.realPath&&""!==l.realPath?l.realPath:void 0)}}let Uy=(()=>{class t{constructor(r,a,j,L){this.settings=r,this.cognitoSettings=a,this.http=j,this.authFacade=L}bulkUpload({files:r,fileNameOverride:a,nocache:j}){const L=[];return r.forEach(W=>{W&&L.push(new x.y(F=>{const _e=a||jv.Z(),[Ie,je]=W.name.split(".",2),vt=_e+(je?"."+je:"");new Nv({client:this.buildClient(),params:{Bucket:this.settings.bucket,Key:this.settings.prefix+vt,Body:W,ContentType:W.type,...j?{CacheControl:"no-cache"}:{}}}).done().then(()=>{F.next(new op({id:_e,contentType:W.type,contentDisposition:"",path:vt,realPath:this.settings.prefix+vt,length:W.size,fileName:W.name,extension:je&&""!==je?je:void 0})),F.complete()})}))}),L.length>0?(0,$.D)(L):(0,c.of)([])}convertToFiles(r){const a=r.map(j=>new x.y(L=>{fetch(`${this.settings.imageUrl}/${j.path}`).then(W=>{W.blob().then(F=>{new Promise(_e=>{let Ie=new FileReader;Ie.onload=()=>_e(Ie.result),Ie.readAsDataURL(F)}).then(_e=>{const Ie=this.convertDataURIToBinary(_e),je=new File([Ie],j.fileName,{type:j.contentType});L.next(je),L.complete()})})})}));return(0,$.D)(a)}convertDataURIToBinary(r){for(var a=";base64,",j=r.indexOf(a)+a.length,L=r.substring(j),W=window.atob(L),F=W.length,_e=new Uint8Array(new ArrayBuffer(F)),Ie=0;Ie<F;Ie++)_e[Ie]=W.charCodeAt(Ie);return _e}buildClient(){return new ky({region:this.cognitoSettings.region,credentials:(0,Bv.s)({client:new Lv.Q({region:this.cognitoSettings.region}),identityPoolId:this.cognitoSettings.identityPoolId,logins:{[`cognito-idp.${this.cognitoSettings.region}.amazonaws.com/${this.cognitoSettings.userPoolId}`]:()=>(0,d.z)(this.authFacade.getUser$.pipe((0,z.U)(r=>r?r.id_token:void 0)))}})})}isImage({file:r}){return r.type&&0===r.type.indexOf("image/")}isVideo({file:r}){return r.type&&0===r.type.indexOf("video/")}}return t.\u0275fac=function(r){return new(r||t)(e.\u0275\u0275inject(ip),e.\u0275\u0275inject(p.NR),e.\u0275\u0275inject(Fy.HttpClient),e.\u0275\u0275inject(Dy.jE))},t.\u0275prov=e.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},811:(it,K,u)=>{u.r(K),u.d(K,{CatchAllGuard:()=>bl,CatchAllRouterComponent:()=>ru,EditPanelPageComponent:()=>bi,PAGES_SETTINGS:()=>ta,PagesModule:()=>Yi,PagesSettings:()=>iu,PanelPageRouterComponent:()=>Fn,attributeContentPluginFactory:()=>Zl,createEditMatcher:()=>eu,createMatcher:()=>_l,formContextFactory:()=>ni,formDatasourcePluginFactory:()=>ea,formParamPluginFactory:()=>Fi,formResolvedContextPluginFactory:()=>Zs,formSerializationEntityCrudAdaptorPluginFactory:()=>yl,mediaContentPluginFactory:()=>Fa,pageContextFactory:()=>ui,pageStateContextFactory:()=>Go,pagesFormBridgeFactory:()=>vl,paneStateContextFactory:()=>Ei,restContentPluginFactory:()=>os,restContextFactory:()=>zo,sliceContentPluginFactory:()=>oi,snippetContentPluginFactory:()=>gl,tabsStylePluginFactory:()=>ss});var e=u(7451),n=u(3192),y=u(8433),x=u(2508),$=u(982),c=u(8163),d=u(8828),p=u(2522),z=u(1276),S=u(6124);function Q(te,Re,A,ie){var Dt,Pe=arguments.length,nt=Pe<3?Re:null===ie?ie=Object.getOwnPropertyDescriptor(Re,A):ie;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)nt=Reflect.decorate(te,Re,A,ie);else for(var Wt=te.length-1;Wt>=0;Wt--)(Dt=te[Wt])&&(nt=(Pe<3?Dt(nt):Pe>3?Dt(Re,A,nt):Dt(Re,A))||nt);return Pe>3&&nt&&Object.defineProperty(Re,A,nt),nt}function ue(te,Re){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(te,Re)}var ze=function(){function te(Re){this.template=Re}return te.ctorParameters=function(){return[{type:e.TemplateRef}]},(te=Q([ue("design:paramtypes",[e.TemplateRef])],te)).\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(e.TemplateRef))},te.\u0275dir=e.\u0275\u0275defineDirective({type:te,selectors:[["","queryOperator",""]]}),te}(),Ge=function(){function te(Re){this.template=Re}return te.ctorParameters=function(){return[{type:e.TemplateRef}]},(te=Q([ue("design:paramtypes",[e.TemplateRef])],te)).\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(e.TemplateRef))},te.\u0275dir=e.\u0275\u0275defineDirective({type:te,selectors:[["","queryField",""]]}),te}(),xe=function(){function te(Re){this.template=Re}return te.ctorParameters=function(){return[{type:e.TemplateRef}]},(te=Q([ue("design:paramtypes",[e.TemplateRef])],te)).\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(e.TemplateRef))},te.\u0275dir=e.\u0275\u0275defineDirective({type:te,selectors:[["","queryEntity",""]]}),te}(),qe=function(){function te(Re){this.template=Re}return te.ctorParameters=function(){return[{type:e.TemplateRef}]},(te=Q([ue("design:paramtypes",[e.TemplateRef])],te)).\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(e.TemplateRef))},te.\u0275dir=e.\u0275\u0275defineDirective({type:te,selectors:[["","querySwitchGroup",""]]}),te}(),Xe=function(){function te(Re){this.template=Re}return te.ctorParameters=function(){return[{type:e.TemplateRef}]},(te=Q([ue("design:paramtypes",[e.TemplateRef])],te)).\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(e.TemplateRef))},te.\u0275dir=e.\u0275\u0275defineDirective({type:te,selectors:[["","queryButtonGroup",""]]}),te}(),lt=function(){function te(Re){this.template=Re}return Object.defineProperty(te.prototype,"queryInputType",{get:function(){return this._type},set:function(Re){!Re||(this._type=Re)},enumerable:!0,configurable:!0}),te.ctorParameters=function(){return[{type:e.TemplateRef}]},Q([(0,e.Input)(),ue("design:type",String),ue("design:paramtypes",[String])],te.prototype,"queryInputType",null),(te=Q([ue("design:paramtypes",[e.TemplateRef])],te)).\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(e.TemplateRef))},te.\u0275dir=e.\u0275\u0275defineDirective({type:te,selectors:[["","queryInput",""]],inputs:{queryInputType:"queryInputType"}}),te}(),He=function(){function te(Re){this.template=Re}return te.ctorParameters=function(){return[{type:e.TemplateRef}]},(te=Q([ue("design:paramtypes",[e.TemplateRef])],te)).\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(e.TemplateRef))},te.\u0275dir=e.\u0275\u0275defineDirective({type:te,selectors:[["","queryRemoveButton",""]]}),te}(),Ye=function(){function te(Re){this.template=Re}return te.ctorParameters=function(){return[{type:e.TemplateRef}]},(te=Q([ue("design:paramtypes",[e.TemplateRef])],te)).\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(e.TemplateRef))},te.\u0275dir=e.\u0275\u0275defineDirective({type:te,selectors:[["","queryEmptyWarning",""]]}),te}(),ht=function(){function te(Re){this.template=Re}return te.ctorParameters=function(){return[{type:e.TemplateRef}]},(te=Q([ue("design:paramtypes",[e.TemplateRef])],te)).\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(e.TemplateRef))},te.\u0275dir=e.\u0275\u0275defineDirective({type:te,selectors:[["","queryArrowIcon",""]]}),te}(),Se=["treeContainer"];function he(te,Re){if(1&te&&e.\u0275\u0275element(0,"i",0),2&te){var A=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass",A.getClassNames("arrowIcon"))}}function pe(te,Re){1&te&&e.\u0275\u0275elementContainer(0)}function Fe(te,Re){if(1&te&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,pe,1,0,"ng-container",10),e.\u0275\u0275elementContainerEnd()),2&te){var A=Re.ngIf,ie=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",A)("ngTemplateOutletContext",ie.getArrowIconContext())}}function Je(te,Re){if(1&te){var A=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"a",9),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext().toggleCollapse()}),e.\u0275\u0275template(1,Fe,2,2,"ng-container",3),e.\u0275\u0275elementEnd()}if(2&te){var ie=e.\u0275\u0275nextContext(),Pe=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngClass",ie.getClassNames("arrowIconButton",ie.data.collapsed?"collapsed":null)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",ie.getArrowIconTemplate())("ngIfElse",Pe)}}function we(te,Re){1&te&&e.\u0275\u0275elementContainer(0)}function De(te,Re){if(1&te&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",0),e.\u0275\u0275template(2,we,1,0,"ng-container",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&te){var A=Re.ngIf,ie=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",ie.getClassNames("buttonGroup","rightAlign")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",A)("ngTemplateOutletContext",ie.getButtonGroupContext())}}function ut(te,Re){if(1&te){var A=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",11),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext(2).addRuleSet()}),e.\u0275\u0275element(1,"i",0),e.\u0275\u0275text(2," Ruleset "),e.\u0275\u0275elementEnd()}if(2&te){var ie=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",ie.getClassNames("button"))("disabled",ie.disabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",ie.getClassNames("addIcon"))}}function le(te,Re){if(1&te){var A=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"button",11),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext(2).removeRuleSet()}),e.\u0275\u0275element(2,"i",0),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&te){var ie=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",ie.getClassNames("button","removeButton"))("disabled",ie.disabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",ie.getClassNames("removeIcon"))}}function D(te,Re){if(1&te){var A=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"button",11),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext().addRule()}),e.\u0275\u0275element(2,"i",0),e.\u0275\u0275text(3," Rule "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,ut,3,3,"button",12),e.\u0275\u0275template(5,le,3,3,"ng-container",13),e.\u0275\u0275elementEnd()}if(2&te){var ie=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass",ie.getClassNames("buttonGroup","rightAlign")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",ie.getClassNames("button"))("disabled",ie.disabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",ie.getClassNames("addIcon")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",ie.allowRuleset),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!!ie.parentValue&&ie.allowRuleset)}}function C(te,Re){1&te&&e.\u0275\u0275elementContainer(0)}function g(te,Re){if(1&te&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,C,1,0,"ng-container",10),e.\u0275\u0275elementContainerEnd()),2&te){var A=Re.ngIf,ie=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",A)("ngTemplateOutletContext",ie.getSwitchGroupContext())}}function B(te,Re){if(1&te){var A=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"div",0),e.\u0275\u0275elementStart(2,"input",14,15),e.\u0275\u0275listener("ngModelChange",function(nt){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext(2).data.condition=nt}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"label",9),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(A);var nt=e.\u0275\u0275reference(3);return e.\u0275\u0275nextContext(2).changeCondition(nt.value)}),e.\u0275\u0275text(5,"AND"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",0),e.\u0275\u0275elementStart(7,"input",16,17),e.\u0275\u0275listener("ngModelChange",function(nt){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext(2).data.condition=nt}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"label",9),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(A);var nt=e.\u0275\u0275reference(8);return e.\u0275\u0275nextContext(2).changeCondition(nt.value)}),e.\u0275\u0275text(10,"OR"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&te){var ie=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",ie.getClassNames("switchGroup","transition")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",ie.getClassNames("switchControl")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",ie.getClassNames("switchRadio"))("ngModel",ie.data.condition)("disabled",ie.disabled),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",ie.getClassNames("switchLabel")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",ie.getClassNames("switchControl")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",ie.getClassNames("switchRadio"))("ngModel",ie.data.condition)("disabled",ie.disabled),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",ie.getClassNames("switchLabel"))}}function de(te,Re){if(1&te&&e.\u0275\u0275template(0,B,11,11,"div",8),2&te){var A=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",A.data)}}function ye(te,Re){1&te&&e.\u0275\u0275elementContainer(0)}function Me(te,Re){if(1&te&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",0),e.\u0275\u0275template(2,ye,1,0,"ng-container",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&te){var A=Re.ngIf,ie=e.\u0275\u0275nextContext(3).$implicit,Pe=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",Pe.getClassNames("buttonGroup","rightAlign")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",A)("ngTemplateOutletContext",Pe.getRemoveButtonContext(ie))}}function Qe(te,Re){if(1&te){var A=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"button",11),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(A);var nt=e.\u0275\u0275nextContext(3).$implicit,Dt=e.\u0275\u0275nextContext(2);return Dt.removeRule(nt,Dt.data)}),e.\u0275\u0275element(2,"i",0),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&te){var ie=e.\u0275\u0275nextContext(5);e.\u0275\u0275property("ngClass",ie.getClassNames("removeButtonSize","rightAlign")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",ie.getClassNames("button","removeButton"))("disabled",ie.disabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",ie.getClassNames("removeIcon"))}}function st(te,Re){1&te&&e.\u0275\u0275elementContainer(0)}function Ut(te,Re){if(1&te&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,st,1,0,"ng-container",10),e.\u0275\u0275elementContainerEnd()),2&te){var A=Re.ngIf,ie=e.\u0275\u0275nextContext(4).$implicit,Pe=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",A)("ngTemplateOutletContext",Pe.getEntityContext(ie))}}function qt(te,Re){if(1&te&&(e.\u0275\u0275elementStart(0,"div",27),e.\u0275\u0275template(1,Ut,2,2,"ng-container",3),e.\u0275\u0275elementEnd()),2&te){e.\u0275\u0275nextContext();var A=e.\u0275\u0275reference(6),ie=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",ie.getEntityTemplate())("ngIfElse",A)}}function Ue(te,Re){if(1&te&&(e.\u0275\u0275elementStart(0,"option",30),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&te){var A=Re.$implicit;e.\u0275\u0275property("ngValue",A.value),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",A.name," ")}}function Lt(te,Re){if(1&te){var A=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"select",28),e.\u0275\u0275listener("ngModelChange",function(Dt){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext(3).$implicit.entity=Dt})("ngModelChange",function(Dt){e.\u0275\u0275restoreView(A);var Wt=e.\u0275\u0275nextContext(3),mn=Wt.$implicit,Pn=Wt.index,br=e.\u0275\u0275nextContext(2);return br.changeEntity(Dt,mn,Pn,br.data)}),e.\u0275\u0275template(2,Ue,2,2,"option",29),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&te){var ie=e.\u0275\u0275nextContext(3).$implicit,Pe=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",Pe.getClassNames("entityControlSize")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",Pe.getClassNames("entityControl"))("ngModel",ie.entity)("disabled",Pe.disabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",Pe.entities)}}function zt(te,Re){1&te&&e.\u0275\u0275elementContainer(0)}function $e(te,Re){if(1&te&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,zt,1,0,"ng-container",10),e.\u0275\u0275elementContainerEnd()),2&te){var A=Re.ngIf,ie=e.\u0275\u0275nextContext(3).$implicit,Pe=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",A)("ngTemplateOutletContext",Pe.getFieldContext(ie))}}function Ot(te,Re){if(1&te&&(e.\u0275\u0275elementStart(0,"option",30),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&te){var A=Re.$implicit;e.\u0275\u0275property("ngValue",A.value),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",A.name," ")}}function Ke(te,Re){if(1&te){var A=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"select",28),e.\u0275\u0275listener("ngModelChange",function(Dt){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext(3).$implicit.field=Dt})("ngModelChange",function(Dt){e.\u0275\u0275restoreView(A);var Wt=e.\u0275\u0275nextContext(3).$implicit;return e.\u0275\u0275nextContext(2).changeField(Dt,Wt)}),e.\u0275\u0275template(2,Ot,2,2,"option",29),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&te){var ie=e.\u0275\u0275nextContext(3).$implicit,Pe=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",Pe.getClassNames("fieldControlSize")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",Pe.getClassNames("fieldControl"))("ngModel",ie.field)("disabled",Pe.disabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",Pe.getFields(ie.entity))}}function rt(te,Re){1&te&&e.\u0275\u0275elementContainer(0)}function Be(te,Re){if(1&te&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,rt,1,0,"ng-container",10),e.\u0275\u0275elementContainerEnd()),2&te){var A=Re.ngIf,ie=e.\u0275\u0275nextContext(3).$implicit,Pe=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",A)("ngTemplateOutletContext",Pe.getOperatorContext(ie))}}function et(te,Re){if(1&te&&(e.\u0275\u0275elementStart(0,"option",30),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&te){var A=Re.$implicit;e.\u0275\u0275property("ngValue",A),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",A," ")}}function wt(te,Re){if(1&te){var A=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"select",28),e.\u0275\u0275listener("ngModelChange",function(Dt){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext(3).$implicit.operator=Dt})("ngModelChange",function(){e.\u0275\u0275restoreView(A);var Dt=e.\u0275\u0275nextContext(3).$implicit;return e.\u0275\u0275nextContext(2).changeOperator(Dt)}),e.\u0275\u0275template(2,et,2,2,"option",29),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&te){var ie=e.\u0275\u0275nextContext(3).$implicit,Pe=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",Pe.getClassNames("operatorControlSize")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",Pe.getClassNames("operatorControl"))("ngModel",ie.operator)("disabled",Pe.disabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",Pe.getOperators(ie.field))}}function Ft(te,Re){1&te&&e.\u0275\u0275elementContainer(0)}function dn(te,Re){if(1&te&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Ft,1,0,"ng-container",10),e.\u0275\u0275elementContainerEnd()),2&te){var A=Re.ngIf,ie=e.\u0275\u0275nextContext(3).$implicit,Pe=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",A)("ngTemplateOutletContext",Pe.getInputContext(ie))}}function Vt(te,Re){if(1&te){var A=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"input",39),e.\u0275\u0275listener("ngModelChange",function(Dt){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext(4).$implicit.value=Dt})("ngModelChange",function(){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext(6).changeInput()}),e.\u0275\u0275elementEnd()}if(2&te){var ie=e.\u0275\u0275nextContext(4).$implicit,Pe=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",Pe.getClassNames("inputControl"))("ngModel",ie.value)("disabled",Pe.disabled)}}function ct(te,Re){if(1&te){var A=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"input",40),e.\u0275\u0275listener("ngModelChange",function(Dt){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext(4).$implicit.value=Dt})("ngModelChange",function(){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext(6).changeInput()}),e.\u0275\u0275elementEnd()}if(2&te){var ie=e.\u0275\u0275nextContext(4).$implicit,Pe=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",Pe.getClassNames("inputControl"))("ngModel",ie.value)("disabled",Pe.disabled)}}function kt(te,Re){if(1&te){var A=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"input",41),e.\u0275\u0275listener("ngModelChange",function(Dt){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext(4).$implicit.value=Dt})("ngModelChange",function(){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext(6).changeInput()}),e.\u0275\u0275elementEnd()}if(2&te){var ie=e.\u0275\u0275nextContext(4).$implicit,Pe=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",Pe.getClassNames("inputControl"))("ngModel",ie.value)("disabled",Pe.disabled)}}function Pt(te,Re){if(1&te){var A=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"input",42),e.\u0275\u0275listener("ngModelChange",function(Dt){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext(4).$implicit.value=Dt})("ngModelChange",function(){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext(6).changeInput()}),e.\u0275\u0275elementEnd()}if(2&te){var ie=e.\u0275\u0275nextContext(4).$implicit,Pe=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",Pe.getClassNames("inputControl"))("ngModel",ie.value)("disabled",Pe.disabled)}}function Yt(te,Re){if(1&te&&(e.\u0275\u0275elementStart(0,"option",30),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&te){var A=Re.$implicit;e.\u0275\u0275property("ngValue",A.value),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",A.name," ")}}function Bt(te,Re){if(1&te){var A=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"select",28),e.\u0275\u0275listener("ngModelChange",function(Dt){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext(4).$implicit.value=Dt})("ngModelChange",function(){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext(6).changeInput()}),e.\u0275\u0275template(1,Yt,2,2,"option",29),e.\u0275\u0275elementEnd()}if(2&te){var ie=e.\u0275\u0275nextContext(4).$implicit,Pe=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",Pe.getClassNames("inputControl"))("ngModel",ie.value)("disabled",Pe.disabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",Pe.getOptions(ie.field))}}function pn(te,Re){if(1&te&&(e.\u0275\u0275elementStart(0,"option",30),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&te){var A=Re.$implicit;e.\u0275\u0275property("ngValue",A.value),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",A.name," ")}}function _n(te,Re){if(1&te){var A=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"select",43),e.\u0275\u0275listener("ngModelChange",function(Dt){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext(4).$implicit.value=Dt})("ngModelChange",function(){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext(6).changeInput()}),e.\u0275\u0275template(2,pn,2,2,"option",29),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&te){var ie=e.\u0275\u0275nextContext(4).$implicit,Pe=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",Pe.getClassNames("inputControl"))("ngModel",ie.value)("disabled",Pe.disabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",Pe.getOptions(ie.field))}}function Cn(te,Re){if(1&te){var A=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"input",44),e.\u0275\u0275listener("ngModelChange",function(Dt){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext(4).$implicit.value=Dt})("ngModelChange",function(){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext(6).changeInput()}),e.\u0275\u0275elementEnd()}if(2&te){var ie=e.\u0275\u0275nextContext(4).$implicit,Pe=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",Pe.getClassNames("inputControl"))("ngModel",ie.value)("disabled",Pe.disabled)}}function xn(te,Re){if(1&te&&(e.\u0275\u0275elementStart(0,"div",31),e.\u0275\u0275template(1,Vt,1,3,"input",32),e.\u0275\u0275template(2,ct,1,3,"input",33),e.\u0275\u0275template(3,kt,1,3,"input",34),e.\u0275\u0275template(4,Pt,1,3,"input",35),e.\u0275\u0275template(5,Bt,2,4,"select",36),e.\u0275\u0275template(6,_n,3,4,"ng-container",37),e.\u0275\u0275template(7,Cn,1,3,"input",38),e.\u0275\u0275elementEnd()),2&te){var A=e.\u0275\u0275nextContext(3).$implicit,ie=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",ie.getClassNames("inputControlSize"))("ngSwitch",ie.getInputType(A.field,A.operator)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","string"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","number"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","date"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","time"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","category"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","multiselect"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","boolean")}}function Qn(te,Re){if(1&te&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Me,3,3,"ng-container",3),e.\u0275\u0275template(2,Qe,3,4,"ng-template",null,21,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(4,qt,2,2,"div",22),e.\u0275\u0275template(5,Lt,3,5,"ng-template",null,23,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(7,$e,2,2,"ng-container",3),e.\u0275\u0275template(8,Ke,3,5,"ng-template",null,24,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(10,Be,2,2,"ng-container",3),e.\u0275\u0275template(11,wt,3,5,"ng-template",null,25,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(13,dn,2,2,"ng-container",3),e.\u0275\u0275template(14,xn,8,9,"ng-template",null,26,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementContainerEnd()),2&te){var A=e.\u0275\u0275reference(3),ie=e.\u0275\u0275reference(9),Pe=e.\u0275\u0275reference(12),nt=e.\u0275\u0275reference(15),Dt=e.\u0275\u0275nextContext(2).$implicit,Wt=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",Wt.getRemoveButtonTemplate())("ngIfElse",A),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",(null==Wt.entities?null:Wt.entities.length)>0),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",Wt.getFieldTemplate())("ngIfElse",ie),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",Wt.getOperatorTemplate())("ngIfElse",Pe),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",Wt.findTemplateForRule(Dt))("ngIfElse",nt)}}function dr(te,Re){if(1&te&&e.\u0275\u0275element(0,"query-builder",45),2&te){var A=e.\u0275\u0275nextContext(2).$implicit,ie=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("data",A)("disabled",ie.disabled)("parentTouchedCallback",ie.parentTouchedCallback||ie.onTouchedCallback)("parentChangeCallback",ie.parentChangeCallback||ie.onChangeCallback)("parentInputTemplates",ie.parentInputTemplates||ie.inputTemplates)("parentOperatorTemplate",ie.parentOperatorTemplate||ie.operatorTemplate)("parentFieldTemplate",ie.parentFieldTemplate||ie.fieldTemplate)("parentEntityTemplate",ie.parentEntityTemplate||ie.entityTemplate)("parentSwitchGroupTemplate",ie.parentSwitchGroupTemplate||ie.switchGroupTemplate)("parentButtonGroupTemplate",ie.parentButtonGroupTemplate||ie.buttonGroupTemplate)("parentRemoveButtonTemplate",ie.parentRemoveButtonTemplate||ie.removeButtonTemplate)("parentEmptyWarningTemplate",ie.parentEmptyWarningTemplate||ie.emptyWarningTemplate)("parentArrowIconTemplate",ie.parentArrowIconTemplate||ie.arrowIconTemplate)("parentValue",ie.data)("classNames",ie.classNames)("config",ie.config)("allowRuleset",ie.allowRuleset)("allowCollapse",ie.allowCollapse)("emptyMessage",ie.emptyMessage)("operatorMap",ie.operatorMap)}}function ur(te,Re){1&te&&e.\u0275\u0275elementContainer(0)}function Xn(te,Re){if(1&te&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,ur,1,0,"ng-container",10),e.\u0275\u0275elementContainerEnd()),2&te){var A=e.\u0275\u0275nextContext().ngIf,ie=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",A)("ngTemplateOutletContext",ie.getEmptyWarningContext())}}function ir(te,Re){if(1&te&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Xn,2,2,"ng-container",13),e.\u0275\u0275elementContainerEnd()),2&te){var A=e.\u0275\u0275nextContext().ngIf;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",A.invalid)}}function mr(te,Re){if(1&te&&(e.\u0275\u0275elementStart(0,"p",0),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&te){var A=e.\u0275\u0275nextContext(5);e.\u0275\u0275property("ngClass",A.getClassNames("emptyWarning")),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",A.emptyMessage," ")}}function hr(te,Re){if(1&te&&e.\u0275\u0275template(0,mr,2,2,"p",8),2&te){var A=e.\u0275\u0275nextContext().ngIf;e.\u0275\u0275property("ngIf",A.invalid)}}function Or(te,Re){if(1&te&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"li",0),e.\u0275\u0275template(2,Qn,16,9,"ng-container",13),e.\u0275\u0275template(3,dr,1,20,"query-builder",19),e.\u0275\u0275template(4,ir,2,1,"ng-container",3),e.\u0275\u0275template(5,hr,1,1,"ng-template",null,20,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&te){var A=Re.ngIf,ie=e.\u0275\u0275reference(6),Pe=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",Pe.getQueryItemClassName(A)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!A.ruleset),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",A.ruleset),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",Pe.getEmptyWarningTemplate())("ngIfElse",ie)}}var fr=function(te,Re){return{ruleset:te,invalid:Re}};function Hr(te,Re){if(1&te&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Or,7,5,"ng-container",13),e.\u0275\u0275elementContainerEnd()),2&te){var A=Re.$implicit,ie=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",e.\u0275\u0275pureFunction2(1,fr,!!A.rules,!ie.config.allowEmptyRulesets&&A.rules&&0===A.rules.length))}}function xr(te,Re){if(1&te&&(e.\u0275\u0275elementStart(0,"ul",0),e.\u0275\u0275template(1,Hr,2,4,"ng-container",18),e.\u0275\u0275elementEnd()),2&te){var A=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass",A.getClassNames("tree")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",A.data.rules)}}var Dn={provide:x.JU,useExisting:(0,e.forwardRef)(function(){return Er}),multi:!0},pr={provide:x.Cf,useExisting:(0,e.forwardRef)(function(){return Er}),multi:!0},Er=function(){function te(Re){var A=this;this.changeDetectorRef=Re,this.defaultClassNames={arrowIconButton:"q-arrow-icon-button",arrowIcon:"q-icon q-arrow-icon",removeIcon:"q-icon q-remove-icon",addIcon:"q-icon q-add-icon",button:"q-button",buttonGroup:"q-button-group",removeButton:"q-remove-button",switchGroup:"q-switch-group",switchLabel:"q-switch-label",switchRadio:"q-switch-radio",rightAlign:"q-right-align",transition:"q-transition",collapsed:"q-collapsed",treeContainer:"q-tree-container",tree:"q-tree",row:"q-row",connector:"q-connector",rule:"q-rule",ruleSet:"q-ruleset",invalidRuleSet:"q-invalid-ruleset",emptyWarning:"q-empty-warning",fieldControl:"q-field-control",fieldControlSize:"q-control-size",entityControl:"q-entity-control",entityControlSize:"q-control-size",operatorControl:"q-operator-control",operatorControlSize:"q-control-size",inputControl:"q-input-control",inputControlSize:"q-control-size"},this.defaultOperatorMap={string:["=","!=","contains","like"],number:["=","!=",">",">=","<","<="],time:["=","!=",">",">=","<","<="],date:["=","!=",">",">=","<","<="],category:["=","!=","in","not in"],boolean:["="]},this.data={condition:"and",rules:[]},this.allowRuleset=!0,this.allowCollapse=!1,this.emptyMessage="A ruleset cannot be empty. Please add a rule or remove it all together.",this.config={fields:{}},this.persistValueOnFieldChange=!1,this.defaultTemplateTypes=["string","number","time","date","category","boolean","multiselect"],this.defaultPersistValueTypes=["string","number","time","date","boolean"],this.defaultEmptyList=[],this.inputContextCache=new Map,this.operatorContextCache=new Map,this.fieldContextCache=new Map,this.entityContextCache=new Map,this.removeButtonContextCache=new Map,this.getDisabledState=function(){return A.disabled}}return te.prototype.ngOnInit=function(){},te.prototype.ngOnChanges=function(Re){var A=this.config,ie=typeof A;if("object"!==ie)throw new Error("Expected 'config' must be a valid object, got "+ie+" instead.");this.fields=Object.keys(A.fields).map(function(Pe){var nt=A.fields[Pe];return nt.value=nt.value||Pe,nt}),this.entities=A.entities?Object.keys(A.entities).map(function(Pe){var nt=A.entities[Pe];return nt.value=nt.value||Pe,nt}):null,this.operatorsCache={}},te.prototype.validate=function(Re){var A={},ie=[],Pe=!1;return!this.config.allowEmptyRulesets&&this.checkEmptyRuleInRuleset(this.data)&&(A.empty="Empty rulesets are not allowed.",Pe=!0),this.validateRulesInRuleset(this.data,ie),ie.length&&(A.rules=ie,Pe=!0),Pe?A:null},Object.defineProperty(te.prototype,"value",{get:function(){return this.data},set:function(Re){this.data=Re||{condition:"and",rules:[]},this.handleDataChange()},enumerable:!0,configurable:!0}),te.prototype.writeValue=function(Re){this.value=Re},te.prototype.registerOnChange=function(Re){var A=this;this.onChangeCallback=function(){return Re(A.data)}},te.prototype.registerOnTouched=function(Re){var A=this;this.onTouchedCallback=function(){return Re(A.data)}},te.prototype.setDisabledState=function(Re){this.disabled=Re,this.changeDetectorRef.detectChanges()},te.prototype.findTemplateForRule=function(Re){var A=this.getInputType(Re.field,Re.operator);if(A){var ie=this.findQueryInput(A);return ie?ie.template:(-1===this.defaultTemplateTypes.indexOf(A)&&console.warn("Could not find template for field with type: "+A),null)}},te.prototype.findQueryInput=function(Re){return(this.parentInputTemplates||this.inputTemplates).find(function(ie){return ie.queryInputType===Re})},te.prototype.getOperators=function(Re){if(this.operatorsCache[Re])return this.operatorsCache[Re];var A=this.defaultEmptyList,ie=this.config.fields[Re];if(this.config.getOperators)return this.config.getOperators(Re,ie);var Pe=ie.type;return ie&&ie.operators?A=ie.operators:Pe?(0===(A=this.operatorMap&&this.operatorMap[Pe]||this.defaultOperatorMap[Pe]||this.defaultEmptyList).length&&console.warn("No operators found for field '"+Re+"' with type "+ie.type+". Please define an 'operators' property on the field or use the 'operatorMap' binding to fix this."),ie.nullable&&(A=A.concat(["is null","is not null"]))):console.warn("No 'type' property found on field: '"+Re+"'"),this.operatorsCache[Re]=A,A},te.prototype.getFields=function(Re){return this.entities&&Re?this.fields.filter(function(A){return A&&A.entity===Re}):this.fields},te.prototype.getInputType=function(Re,A){if(this.config.getInputType)return this.config.getInputType(Re,A);if(!this.config.fields[Re])throw new Error("No configuration for field '"+Re+"' could be found! Please add it to config.fields.");var ie=this.config.fields[Re].type;switch(A){case"is null":case"is not null":return null;case"in":case"not in":return"category"===ie||"boolean"===ie?"multiselect":ie;default:return ie}},te.prototype.getOptions=function(Re){return this.config.getOptions?this.config.getOptions(Re):this.config.fields[Re].options||this.defaultEmptyList},te.prototype.getClassNames=function(){for(var Re=this,A=[],ie=0;ie<arguments.length;ie++)A[ie]=arguments[ie];var Pe=this.classNames?this.classNames:this.defaultClassNames,nt=A.map(function(Dt){return Pe[Dt]||Re.defaultClassNames[Dt]}).filter(function(Dt){return!!Dt});return nt.length?nt.join(" "):null},te.prototype.getDefaultField=function(Re){if(Re){if(void 0!==Re.defaultField)return this.getDefaultValue(Re.defaultField);var A=this.fields.filter(function(ie){return ie&&ie.entity===Re.value});return A&&A.length?A[0]:(console.warn("No fields found for entity '"+Re.name+"'. A 'defaultOperator' is also not specified on the field config. Operator value will default to null."),null)}return null},te.prototype.getDefaultOperator=function(Re){if(Re&&void 0!==Re.defaultOperator)return this.getDefaultValue(Re.defaultOperator);var A=this.getOperators(Re.value);return A&&A.length?A[0]:(console.warn("No operators found for field '"+Re.value+"'. A 'defaultOperator' is also not specified on the field config. Operator value will default to null."),null)},te.prototype.addRule=function(Re){if(!this.disabled){if(Re=Re||this.data,this.config.addRule)this.config.addRule(Re);else{var A=this.fields[0];Re.rules=Re.rules.concat([{field:A.value,operator:this.getDefaultOperator(A),value:this.getDefaultValue(A.defaultValue),entity:A.entity}])}this.handleTouched(),this.handleDataChange()}},te.prototype.removeRule=function(Re,A){this.disabled||(A=A||this.data,this.config.removeRule?this.config.removeRule(Re,A):A.rules=A.rules.filter(function(ie){return ie!==Re}),this.inputContextCache.delete(Re),this.operatorContextCache.delete(Re),this.fieldContextCache.delete(Re),this.entityContextCache.delete(Re),this.removeButtonContextCache.delete(Re),this.handleTouched(),this.handleDataChange())},te.prototype.addRuleSet=function(Re){this.disabled||(Re=Re||this.data,this.config.addRuleSet?this.config.addRuleSet(Re):Re.rules=Re.rules.concat([{condition:"and",rules:[]}]),this.handleTouched(),this.handleDataChange())},te.prototype.removeRuleSet=function(Re,A){this.disabled||(Re=Re||this.data,A=A||this.parentValue,this.config.removeRuleSet?this.config.removeRuleSet(Re,A):A.rules=A.rules.filter(function(ie){return ie!==Re}),this.handleTouched(),this.handleDataChange())},te.prototype.transitionEnd=function(Re){this.treeContainer.nativeElement.style.maxHeight=null},te.prototype.toggleCollapse=function(){var Re=this;this.computedTreeContainerHeight(),setTimeout(function(){Re.data.collapsed=!Re.data.collapsed},100)},te.prototype.computedTreeContainerHeight=function(){var Re=this.treeContainer.nativeElement;Re&&Re.firstElementChild&&(Re.style.maxHeight=Re.firstElementChild.clientHeight+8+"px")},te.prototype.changeCondition=function(Re){this.disabled||(this.data.condition=Re,this.handleTouched(),this.handleDataChange())},te.prototype.changeOperator=function(Re){this.disabled||(Re.value=this.config.coerceValueForOperator?this.config.coerceValueForOperator(Re.operator,Re.value,Re):this.coerceValueForOperator(Re.operator,Re.value,Re),this.handleTouched(),this.handleDataChange())},te.prototype.coerceValueForOperator=function(Re,A,ie){return"multiselect"!==this.getInputType(ie.field,Re)||Array.isArray(A)?A:[A]},te.prototype.changeInput=function(){this.disabled||(this.handleTouched(),this.handleDataChange())},te.prototype.changeField=function(Re,A){if(!this.disabled){var ie=this.inputContextCache.get(A),nt=this.config.fields[Re],Dt=this.calculateFieldChangeValue(ie&&ie.field,nt,A.value);void 0!==Dt?A.value=Dt:delete A.value,A.operator=this.getDefaultOperator(nt),this.inputContextCache.delete(A),this.operatorContextCache.delete(A),this.fieldContextCache.delete(A),this.entityContextCache.delete(A),this.getInputContext(A),this.getFieldContext(A),this.getOperatorContext(A),this.getEntityContext(A),this.handleTouched(),this.handleDataChange()}},te.prototype.changeEntity=function(Re,A,ie,Pe){if(!this.disabled){var nt=ie,Dt=Pe,Wt=this.entities.find(function(Pn){return Pn.value===Re}),mn=this.getDefaultField(Wt);Dt||(nt=(Dt=this.data).rules.findIndex(function(Pn){return Pn===A})),A.field=mn.value,Dt.rules[nt]=A,mn?this.changeField(mn.value,A):(this.handleTouched(),this.handleDataChange())}},te.prototype.getDefaultValue=function(Re){return"function"==typeof Re?Re():Re},te.prototype.getOperatorTemplate=function(){var Re=this.parentOperatorTemplate||this.operatorTemplate;return Re?Re.template:null},te.prototype.getFieldTemplate=function(){var Re=this.parentFieldTemplate||this.fieldTemplate;return Re?Re.template:null},te.prototype.getEntityTemplate=function(){var Re=this.parentEntityTemplate||this.entityTemplate;return Re?Re.template:null},te.prototype.getArrowIconTemplate=function(){var Re=this.parentArrowIconTemplate||this.arrowIconTemplate;return Re?Re.template:null},te.prototype.getButtonGroupTemplate=function(){var Re=this.parentButtonGroupTemplate||this.buttonGroupTemplate;return Re?Re.template:null},te.prototype.getSwitchGroupTemplate=function(){var Re=this.parentSwitchGroupTemplate||this.switchGroupTemplate;return Re?Re.template:null},te.prototype.getRemoveButtonTemplate=function(){var Re=this.parentRemoveButtonTemplate||this.removeButtonTemplate;return Re?Re.template:null},te.prototype.getEmptyWarningTemplate=function(){var Re=this.parentEmptyWarningTemplate||this.emptyWarningTemplate;return Re?Re.template:null},te.prototype.getQueryItemClassName=function(Re){var A=this.getClassNames("row","connector","transition");return A+=" "+this.getClassNames(Re.ruleset?"ruleSet":"rule"),Re.invalid&&(A+=" "+this.getClassNames("invalidRuleSet")),A},te.prototype.getButtonGroupContext=function(){return this.buttonGroupContext||(this.buttonGroupContext={addRule:this.addRule.bind(this),addRuleSet:this.allowRuleset&&this.addRuleSet.bind(this),removeRuleSet:this.allowRuleset&&this.parentValue&&this.removeRuleSet.bind(this),getDisabledState:this.getDisabledState,$implicit:this.data}),this.buttonGroupContext},te.prototype.getRemoveButtonContext=function(Re){return this.removeButtonContextCache.has(Re)||this.removeButtonContextCache.set(Re,{removeRule:this.removeRule.bind(this),getDisabledState:this.getDisabledState,$implicit:Re}),this.removeButtonContextCache.get(Re)},te.prototype.getFieldContext=function(Re){return this.fieldContextCache.has(Re)||this.fieldContextCache.set(Re,{onChange:this.changeField.bind(this),getFields:this.getFields.bind(this),getDisabledState:this.getDisabledState,fields:this.fields,$implicit:Re}),this.fieldContextCache.get(Re)},te.prototype.getEntityContext=function(Re){return this.entityContextCache.has(Re)||this.entityContextCache.set(Re,{onChange:this.changeEntity.bind(this),getDisabledState:this.getDisabledState,entities:this.entities,$implicit:Re}),this.entityContextCache.get(Re)},te.prototype.getSwitchGroupContext=function(){return{onChange:this.changeCondition.bind(this),getDisabledState:this.getDisabledState,$implicit:this.data}},te.prototype.getArrowIconContext=function(){return{getDisabledState:this.getDisabledState,$implicit:this.data}},te.prototype.getEmptyWarningContext=function(){return{getDisabledState:this.getDisabledState,message:this.emptyMessage,$implicit:this.data}},te.prototype.getOperatorContext=function(Re){return this.operatorContextCache.has(Re)||this.operatorContextCache.set(Re,{onChange:this.changeOperator.bind(this),getDisabledState:this.getDisabledState,operators:this.getOperators(Re.field),$implicit:Re}),this.operatorContextCache.get(Re)},te.prototype.getInputContext=function(Re){return this.inputContextCache.has(Re)||this.inputContextCache.set(Re,{onChange:this.changeInput.bind(this),getDisabledState:this.getDisabledState,options:this.getOptions(Re.field),field:this.config.fields[Re.field],$implicit:Re}),this.inputContextCache.get(Re)},te.prototype.calculateFieldChangeValue=function(Re,A,ie){return null!=this.config.calculateFieldChangeValue?this.config.calculateFieldChangeValue(Re,A,ie):this.persistValueOnFieldChange&&null!=Re&&null!=A&&Re.type===A.type&&-1!==this.defaultPersistValueTypes.indexOf(Re.type)?ie:A&&void 0!==A.defaultValue?this.getDefaultValue(A.defaultValue):void 0},te.prototype.checkEmptyRuleInRuleset=function(Re){var A=this;return!Re||!Re.rules||0===Re.rules.length||Re.rules.some(function(ie){return!!ie.rules&&A.checkEmptyRuleInRuleset(ie)})},te.prototype.validateRulesInRuleset=function(Re,A){var ie=this;Re&&Re.rules&&Re.rules.length>0&&Re.rules.forEach(function(Pe){if(Pe.rules)return ie.validateRulesInRuleset(Pe,A);if(Pe.field){var nt=ie.config.fields[Pe.field];if(nt&&nt.validator&&nt.validator.apply){var Dt=nt.validator(Pe,Re);null!=Dt&&A.push(Dt)}}})},te.prototype.handleDataChange=function(){this.changeDetectorRef.markForCheck(),this.onChangeCallback&&this.onChangeCallback(),this.parentChangeCallback&&this.parentChangeCallback()},te.prototype.handleTouched=function(){this.onTouchedCallback&&this.onTouchedCallback(),this.parentTouchedCallback&&this.parentTouchedCallback()},te.ctorParameters=function(){return[{type:e.ChangeDetectorRef}]},Q([(0,e.Input)(),ue("design:type",Boolean)],te.prototype,"disabled",void 0),Q([(0,e.Input)(),ue("design:type",Object)],te.prototype,"data",void 0),Q([(0,e.Input)(),ue("design:type",Boolean)],te.prototype,"allowRuleset",void 0),Q([(0,e.Input)(),ue("design:type",Boolean)],te.prototype,"allowCollapse",void 0),Q([(0,e.Input)(),ue("design:type",String)],te.prototype,"emptyMessage",void 0),Q([(0,e.Input)(),ue("design:type",Object)],te.prototype,"classNames",void 0),Q([(0,e.Input)(),ue("design:type",Object)],te.prototype,"operatorMap",void 0),Q([(0,e.Input)(),ue("design:type",Object)],te.prototype,"parentValue",void 0),Q([(0,e.Input)(),ue("design:type",Object)],te.prototype,"config",void 0),Q([(0,e.Input)(),ue("design:type",ht)],te.prototype,"parentArrowIconTemplate",void 0),Q([(0,e.Input)(),ue("design:type",e.QueryList)],te.prototype,"parentInputTemplates",void 0),Q([(0,e.Input)(),ue("design:type",ze)],te.prototype,"parentOperatorTemplate",void 0),Q([(0,e.Input)(),ue("design:type",Ge)],te.prototype,"parentFieldTemplate",void 0),Q([(0,e.Input)(),ue("design:type",xe)],te.prototype,"parentEntityTemplate",void 0),Q([(0,e.Input)(),ue("design:type",qe)],te.prototype,"parentSwitchGroupTemplate",void 0),Q([(0,e.Input)(),ue("design:type",Xe)],te.prototype,"parentButtonGroupTemplate",void 0),Q([(0,e.Input)(),ue("design:type",He)],te.prototype,"parentRemoveButtonTemplate",void 0),Q([(0,e.Input)(),ue("design:type",Ye)],te.prototype,"parentEmptyWarningTemplate",void 0),Q([(0,e.Input)(),ue("design:type",Function)],te.prototype,"parentChangeCallback",void 0),Q([(0,e.Input)(),ue("design:type",Function)],te.prototype,"parentTouchedCallback",void 0),Q([(0,e.Input)(),ue("design:type",Boolean)],te.prototype,"persistValueOnFieldChange",void 0),Q([(0,e.ViewChild)("treeContainer",{static:!0}),ue("design:type",e.ElementRef)],te.prototype,"treeContainer",void 0),Q([(0,e.ContentChild)(Xe),ue("design:type",Xe)],te.prototype,"buttonGroupTemplate",void 0),Q([(0,e.ContentChild)(qe),ue("design:type",qe)],te.prototype,"switchGroupTemplate",void 0),Q([(0,e.ContentChild)(Ge),ue("design:type",Ge)],te.prototype,"fieldTemplate",void 0),Q([(0,e.ContentChild)(xe),ue("design:type",xe)],te.prototype,"entityTemplate",void 0),Q([(0,e.ContentChild)(ze),ue("design:type",ze)],te.prototype,"operatorTemplate",void 0),Q([(0,e.ContentChild)(He),ue("design:type",He)],te.prototype,"removeButtonTemplate",void 0),Q([(0,e.ContentChild)(Ye),ue("design:type",Ye)],te.prototype,"emptyWarningTemplate",void 0),Q([(0,e.ContentChildren)(lt),ue("design:type",e.QueryList)],te.prototype,"inputTemplates",void 0),Q([(0,e.ContentChild)(ht),ue("design:type",ht)],te.prototype,"arrowIconTemplate",void 0),Q([(0,e.Input)(),ue("design:type",Object),ue("design:paramtypes",[Object])],te.prototype,"value",null),(te=Q([ue("design:paramtypes",[e.ChangeDetectorRef])],te)).\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(e.ChangeDetectorRef))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["query-builder"]],contentQueries:function(A,ie,Pe){var nt;1&A&&(e.\u0275\u0275contentQuery(Pe,Xe,5),e.\u0275\u0275contentQuery(Pe,qe,5),e.\u0275\u0275contentQuery(Pe,Ge,5),e.\u0275\u0275contentQuery(Pe,xe,5),e.\u0275\u0275contentQuery(Pe,ze,5),e.\u0275\u0275contentQuery(Pe,He,5),e.\u0275\u0275contentQuery(Pe,Ye,5),e.\u0275\u0275contentQuery(Pe,ht,5),e.\u0275\u0275contentQuery(Pe,lt,4)),2&A&&(e.\u0275\u0275queryRefresh(nt=e.\u0275\u0275loadQuery())&&(ie.buttonGroupTemplate=nt.first),e.\u0275\u0275queryRefresh(nt=e.\u0275\u0275loadQuery())&&(ie.switchGroupTemplate=nt.first),e.\u0275\u0275queryRefresh(nt=e.\u0275\u0275loadQuery())&&(ie.fieldTemplate=nt.first),e.\u0275\u0275queryRefresh(nt=e.\u0275\u0275loadQuery())&&(ie.entityTemplate=nt.first),e.\u0275\u0275queryRefresh(nt=e.\u0275\u0275loadQuery())&&(ie.operatorTemplate=nt.first),e.\u0275\u0275queryRefresh(nt=e.\u0275\u0275loadQuery())&&(ie.removeButtonTemplate=nt.first),e.\u0275\u0275queryRefresh(nt=e.\u0275\u0275loadQuery())&&(ie.emptyWarningTemplate=nt.first),e.\u0275\u0275queryRefresh(nt=e.\u0275\u0275loadQuery())&&(ie.arrowIconTemplate=nt.first),e.\u0275\u0275queryRefresh(nt=e.\u0275\u0275loadQuery())&&(ie.inputTemplates=nt))},viewQuery:function(A,ie){var Pe;1&A&&e.\u0275\u0275viewQuery(Se,7),2&A&&e.\u0275\u0275queryRefresh(Pe=e.\u0275\u0275loadQuery())&&(ie.treeContainer=Pe.first)},inputs:{data:"data",allowRuleset:"allowRuleset",allowCollapse:"allowCollapse",emptyMessage:"emptyMessage",config:"config",persistValueOnFieldChange:"persistValueOnFieldChange",value:"value",disabled:"disabled",classNames:"classNames",operatorMap:"operatorMap",parentValue:"parentValue",parentArrowIconTemplate:"parentArrowIconTemplate",parentInputTemplates:"parentInputTemplates",parentOperatorTemplate:"parentOperatorTemplate",parentFieldTemplate:"parentFieldTemplate",parentEntityTemplate:"parentEntityTemplate",parentSwitchGroupTemplate:"parentSwitchGroupTemplate",parentButtonGroupTemplate:"parentButtonGroupTemplate",parentRemoveButtonTemplate:"parentRemoveButtonTemplate",parentEmptyWarningTemplate:"parentEmptyWarningTemplate",parentChangeCallback:"parentChangeCallback",parentTouchedCallback:"parentTouchedCallback"},features:[e.\u0275\u0275ProvidersFeature([Dn,pr]),e.\u0275\u0275NgOnChangesFeature],decls:13,vars:8,consts:[[3,"ngClass"],["defaultArrowIcon",""],[3,"ngClass","click",4,"ngIf"],[4,"ngIf","ngIfElse"],["defaultButtonGroup",""],["defaultSwitchGroup",""],[3,"ngClass","transitionend"],["treeContainer",""],[3,"ngClass",4,"ngIf"],[3,"ngClass","click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button",3,"ngClass","disabled","click"],["type","button",3,"ngClass","disabled","click",4,"ngIf"],[4,"ngIf"],["type","radio","value","and",3,"ngClass","ngModel","disabled","ngModelChange"],["andOption",""],["type","radio","value","or",3,"ngClass","ngModel","disabled","ngModelChange"],["orOption",""],[4,"ngFor","ngForOf"],[3,"data","disabled","parentTouchedCallback","parentChangeCallback","parentInputTemplates","parentOperatorTemplate","parentFieldTemplate","parentEntityTemplate","parentSwitchGroupTemplate","parentButtonGroupTemplate","parentRemoveButtonTemplate","parentEmptyWarningTemplate","parentArrowIconTemplate","parentValue","classNames","config","allowRuleset","allowCollapse","emptyMessage","operatorMap",4,"ngIf"],["defaultEmptyWarning",""],["defaultRemoveButton",""],["class","q-inline-block-display",4,"ngIf"],["defaultEntity",""],["defaultField",""],["defaultOperator",""],["defaultInput",""],[1,"q-inline-block-display"],[3,"ngClass","ngModel","disabled","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[3,"ngClass","ngSwitch"],["type","text",3,"ngClass","ngModel","disabled","ngModelChange",4,"ngSwitchCase"],["type","number",3,"ngClass","ngModel","disabled","ngModelChange",4,"ngSwitchCase"],["type","date",3,"ngClass","ngModel","disabled","ngModelChange",4,"ngSwitchCase"],["type","time",3,"ngClass","ngModel","disabled","ngModelChange",4,"ngSwitchCase"],[3,"ngClass","ngModel","disabled","ngModelChange",4,"ngSwitchCase"],[4,"ngSwitchCase"],["type","checkbox",3,"ngClass","ngModel","disabled","ngModelChange",4,"ngSwitchCase"],["type","text",3,"ngClass","ngModel","disabled","ngModelChange"],["type","number",3,"ngClass","ngModel","disabled","ngModelChange"],["type","date",3,"ngClass","ngModel","disabled","ngModelChange"],["type","time",3,"ngClass","ngModel","disabled","ngModelChange"],["multiple","",3,"ngClass","ngModel","disabled","ngModelChange"],["type","checkbox",3,"ngClass","ngModel","disabled","ngModelChange"],[3,"data","disabled","parentTouchedCallback","parentChangeCallback","parentInputTemplates","parentOperatorTemplate","parentFieldTemplate","parentEntityTemplate","parentSwitchGroupTemplate","parentButtonGroupTemplate","parentRemoveButtonTemplate","parentEmptyWarningTemplate","parentArrowIconTemplate","parentValue","classNames","config","allowRuleset","allowCollapse","emptyMessage","operatorMap"]],template:function(A,ie){if(1&A&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,he,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(3,Je,2,3,"a",2),e.\u0275\u0275template(4,De,3,3,"ng-container",3),e.\u0275\u0275template(5,D,6,6,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(7,g,2,2,"ng-container",3),e.\u0275\u0275template(8,de,1,1,"ng-template",null,5,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",6,7),e.\u0275\u0275listener("transitionend",function(Wt){return ie.transitionEnd(Wt)}),e.\u0275\u0275template(12,xr,2,2,"ul",8),e.\u0275\u0275elementEnd()),2&A){var Pe=e.\u0275\u0275reference(6),nt=e.\u0275\u0275reference(9);e.\u0275\u0275property("ngClass",ie.getClassNames("switchRow")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",ie.allowCollapse),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",ie.getButtonGroupTemplate())("ngIfElse",Pe),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",ie.getSwitchGroupTemplate())("ngIfElse",nt),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngClass",ie.getClassNames("treeContainer",ie.data.collapsed?"collapsed":null)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",ie.data&&ie.data.rules)}},directives:[n.NgClass,n.NgIf,n.NgTemplateOutlet,x._,x.Fj,x.JJ,x.On,n.NgForOf,x.EJ,x.YN,x.Kr,n.NgSwitch,n.NgSwitchCase,x.wV,x.K7,x.Wl,te],styles:["@charset \"UTF-8\";[_nghost-%COMP%]{display:block;width:100%}[_nghost-%COMP%]   .q-icon[_ngcontent-%COMP%]{font-style:normal;font-size:12px}[_nghost-%COMP%]   .q-remove-icon[_ngcontent-%COMP%]::before{content:'\u274c'}[_nghost-%COMP%]   .q-arrow-icon-button[_ngcontent-%COMP%]{float:left;margin:4px 6px 4px 0;-webkit-transform:rotate(90deg);transform:rotate(90deg);-webkit-transition:transform .25s linear;transition:transform .25s linear;cursor:pointer}[_nghost-%COMP%]   .q-arrow-icon-button.q-collapsed[_ngcontent-%COMP%]{-webkit-transform:rotate(0);transform:rotate(0)}[_nghost-%COMP%]   .q-arrow-icon[_ngcontent-%COMP%]::before{content:'\u25b6'}[_nghost-%COMP%]   .q-add-icon[_ngcontent-%COMP%]{color:#555}[_nghost-%COMP%]   .q-add-icon[_ngcontent-%COMP%]::before{content:'\u2795'}[_nghost-%COMP%]   .q-remove-button[_ngcontent-%COMP%]{color:#b3415d;width:31px}[_nghost-%COMP%]   .q-button-group[_ngcontent-%COMP%], [_nghost-%COMP%]   .q-switch-group[_ngcontent-%COMP%]{font-family:\"Lucida Grande\",Tahoma,Verdana,sans-serif;overflow:hidden}[_nghost-%COMP%]   .q-right-align[_ngcontent-%COMP%]{float:right}[_nghost-%COMP%]   .q-button[_ngcontent-%COMP%]{margin-left:8px;padding:0 8px;background-color:#fff}[_nghost-%COMP%]   .q-button[_ngcontent-%COMP%]:disabled{display:none}[_nghost-%COMP%]   .q-control-size[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;padding-right:10px}[_nghost-%COMP%]   .q-entity-control[_ngcontent-%COMP%], [_nghost-%COMP%]   .q-field-control[_ngcontent-%COMP%], [_nghost-%COMP%]   .q-input-control[_ngcontent-%COMP%], [_nghost-%COMP%]   .q-operator-control[_ngcontent-%COMP%]{display:inline-block;padding:5px 8px;color:#555;background-color:#fff;background-image:none;border:1px solid #ccc;border-radius:4px;box-sizing:border-box;width:auto}[_nghost-%COMP%]   .q-entity-control[_ngcontent-%COMP%]:disabled, [_nghost-%COMP%]   .q-field-control[_ngcontent-%COMP%]:disabled, [_nghost-%COMP%]   .q-input-control[_ngcontent-%COMP%]:disabled, [_nghost-%COMP%]   .q-operator-control[_ngcontent-%COMP%]:disabled{border-color:transparent}[_nghost-%COMP%]   .q-entity-control[_ngcontent-%COMP%], [_nghost-%COMP%]   .q-field-control[_ngcontent-%COMP%], [_nghost-%COMP%]   .q-input-control[_ngcontent-%COMP%]:not([type=checkbox]), [_nghost-%COMP%]   .q-operator-control[_ngcontent-%COMP%]{min-height:32px;-webkit-appearance:none}[_nghost-%COMP%]   .q-button[_ngcontent-%COMP%], [_nghost-%COMP%]   .q-switch-label[_ngcontent-%COMP%]{float:left;margin-bottom:0;font-size:14px;line-height:30px;font-weight:400;text-align:center;text-shadow:none;border:1px solid rgba(0,0,0,.2);box-sizing:border-box}[_nghost-%COMP%]   .q-button[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .q-switch-label[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#f0f0f0}[_nghost-%COMP%]   .q-switch-label[_ngcontent-%COMP%]{background-color:#e4e4e4;padding:0 8px}[_nghost-%COMP%]   .q-switch-radio[_ngcontent-%COMP%]{position:absolute;clip:rect(0,0,0,0);height:1px;width:1px;border:0;overflow:hidden}[_nghost-%COMP%]   .q-switch-radio[_ngcontent-%COMP%]:checked + .q-switch-label[_ngcontent-%COMP%]{border:1px solid #619ed7;background:#fff;color:#3176b3}[_nghost-%COMP%]   .q-switch-radio[_ngcontent-%COMP%]:disabled + .q-switch-label[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .q-switch-radio[_ngcontent-%COMP%]:checked:disabled + .q-switch-label[_ngcontent-%COMP%]{display:initial;color:initial;cursor:default;border-color:transparent}[_nghost-%COMP%]   .q-invalid-ruleset[_ngcontent-%COMP%]{border:1px solid rgba(179,65,93,.5)!important;background:rgba(179,65,93,.1)!important}[_nghost-%COMP%]   .q-empty-warning[_ngcontent-%COMP%]{color:#8d252e;text-align:center}[_nghost-%COMP%]   .q-ruleset[_ngcontent-%COMP%]{border:1px solid #ccc}[_nghost-%COMP%]   .q-rule[_ngcontent-%COMP%]{border:1px solid #ccc;background:#fff}[_nghost-%COMP%]   .q-transition[_ngcontent-%COMP%]{-webkit-transition:.1s ease-in-out;transition:.1s ease-in-out}[_nghost-%COMP%]   .q-tree-container[_ngcontent-%COMP%]{width:100%;overflow:hidden;-webkit-transition:max-height .25s ease-in;transition:max-height .25s ease-in}[_nghost-%COMP%]   .q-tree-container.q-collapsed[_ngcontent-%COMP%]{max-height:0!important}[_nghost-%COMP%]   .q-tree[_ngcontent-%COMP%]{list-style:none;margin:4px 0 2px}[_nghost-%COMP%]   .q-row[_ngcontent-%COMP%]{padding:6px 8px;margin-top:6px}[_nghost-%COMP%]   .q-connector[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .q-connector[_ngcontent-%COMP%]::before{top:-5px;border-width:0 0 2px 2px}[_nghost-%COMP%]   .q-connector[_ngcontent-%COMP%]::after{border-width:0 0 0 2px;top:50%}[_nghost-%COMP%]   .q-connector[_ngcontent-%COMP%]::after, [_nghost-%COMP%]   .q-connector[_ngcontent-%COMP%]::before{content:'';left:-12px;border-color:#ccc;border-style:solid;width:9px;height:calc(50% + 6px);position:absolute}[_nghost-%COMP%]   .q-connector[_ngcontent-%COMP%]:last-child::after{content:none}[_nghost-%COMP%]   .q-inline-block-display[_ngcontent-%COMP%]{display:inline-block;vertical-align:top}"]}),te}(),wr=function(){function te(){}return te.\u0275fac=function(A){return new(A||te)},te.\u0275mod=e.\u0275\u0275defineNgModule({type:te}),te.\u0275inj=e.\u0275\u0275defineInjector({imports:[[n.CommonModule,x.u5]]}),te}(),Zn=u(2579),Nr=u(2063),kr=u(8698),Rt=u(5276),wn=u(1923),an=u(760),On=u(919),$n=u(2062),Kn=u(8448),mi=u(5008),$r=u(4865),T=u(1484),M=u(5892),Y=u(6517),J=u(207),ge=u(3336),Ce=u(745),We=u(253),pt=u(6317),dt=u(6562),xt=u(1640),Mt=u(5330),Nt=u(7400),$t=u(6646),St=u(635),tt=u(2673),At=u(9337),oe=u(116),O=u(1989),I=u(3350),ce=u(9295),Te=u(538),at=u(8977),Tt=u(4744),tn=u(7260),on=u(3158),bn=u(8193),vn=u(6102),Ht=u(2570),Jn=u(9376),er=u(1005),rr=u(4522),Ln=u(5074),Nn=u(6722),Mn=u(8562),kn=u(7822),jn=u(3012),Gn=u(8589),nr=u(3704),Sr=u(4567),bt=u(9263),_t=u(2341),Ze=u(8085),jt=u(1611),Jt=u(2044),en=u(5383),nn=u(4379),un=u(2727),rn=u(7371),cn=u(4792),Sn=u(2922),Vn=u(8550),tr=u(8714),Wr=u(9367),Ci=u(6328),Oi=u(3670),Tr=u(5288),vi=u(2197),ai=u(6853),li=u(6152);function ko(te,Re){if(1&te){const A=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"a",4),e.\u0275\u0275listener("click",function(){const nt=e.\u0275\u0275restoreView(A).$implicit;return e.\u0275\u0275nextContext().onEntitySelected(nt.value)}),e.\u0275\u0275elementStart(1,"span",5),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&te){const A=Re.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(A.value.title)}}function Qi(te,Re){}function xi(te,Re){if(1&te){const A=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"classifieds-ui-dynamic-content-viewer",1),e.\u0275\u0275listener("docRendered",function(){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext().onDocRendered()}),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275elementEnd()}if(2&te){const A=e.\u0275\u0275nextContext();e.\u0275\u0275property("content",e.\u0275\u0275pipeBind1(1,1,A.content$))}}function Fo(te,Re){if(1&te){const A=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"classifieds-ui-dynamic-content-viewer",1),e.\u0275\u0275listener("docRendered",function(){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext().onDocRendered()}),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275elementEnd()}if(2&te){const A=e.\u0275\u0275nextContext();e.\u0275\u0275property("content",e.\u0275\u0275pipeBind1(1,1,A.content$))}}function Do(te,Re){if(1&te){const A=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"a",4),e.\u0275\u0275listener("click",function(){const nt=e.\u0275\u0275restoreView(A).$implicit;return e.\u0275\u0275nextContext().onStyleSelected(nt.value)}),e.\u0275\u0275elementStart(1,"span",5),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&te){const A=Re.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(A.value.title)}}function Jo(te,Re){}const no=["contentEditor"];function bs(te,Re){1&te&&e.\u0275\u0275elementContainer(0)}function zs(te,Re){if(1&te){const A=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",19),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext(2).onOverrideClick()}),e.\u0275\u0275text(1,"Override"),e.\u0275\u0275elementEnd()}}function ro(te,Re){if(1&te){const A=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",19),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext(2).onRemoveOverrideClick()}),e.\u0275\u0275text(1,"Remove Override"),e.\u0275\u0275elementEnd()}}function Ui(te,Re){}const Yo=function(te){return{settings:te}},_a=function(te){return{visible:te}};function Gs(te,Re){if(1&te){const A=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",9),e.\u0275\u0275elementStart(1,"div",10),e.\u0275\u0275elementStart(2,"div",11),e.\u0275\u0275elementStart(3,"button",12),e.\u0275\u0275elementStart(4,"mat-icon"),e.\u0275\u0275text(5,"more_vert"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"mat-expansion-panel",13),e.\u0275\u0275listener("afterCollapse",function(){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext().onAfterCollapse()})("afterExpand",function(){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext().onAfterExpand()}),e.\u0275\u0275elementStart(7,"mat-expansion-panel-header"),e.\u0275\u0275elementStart(8,"mat-panel-title"),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",14),e.\u0275\u0275elementStart(11,"ul"),e.\u0275\u0275template(12,bs,1,0,"ng-container",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",16),e.\u0275\u0275template(14,zs,2,0,"button",17),e.\u0275\u0275template(15,ro,2,0,"button",17),e.\u0275\u0275elementContainerStart(16),e.\u0275\u0275template(17,Ui,0,0,"ng-template",18),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&te){const A=e.\u0275\u0275nextContext(),ie=e.\u0275\u0275reference(6),Pe=e.\u0275\u0275reference(2);e.\u0275\u0275advance(3),e.\u0275\u0275property("matMenuTriggerFor",ie),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate2("",A.contentPlugin.title," : ",A.name,""),e.\u0275\u0275advance(1),e.\u0275\u0275property("hidden",A.preview),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngTemplateOutlet",Pe)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(9,Yo,A.settings)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(11,_a,A.preview)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",A.displayOverride&&!A.hasOverride),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",A.displayOverride&&A.hasOverride)}}function ba(te,Re){if(1&te&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"attribute"),e.\u0275\u0275elementEnd()),2&te){const A=e.\u0275\u0275nextContext().$implicit,ie=e.\u0275\u0275nextContext().settings;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(2,1,ie,A.name))}}function wa(te,Re){1&te&&e.\u0275\u0275elementContainer(0)}function $s(te,Re){if(1&te&&(e.\u0275\u0275elementStart(0,"ul"),e.\u0275\u0275template(1,wa,1,0,"ng-container",15),e.\u0275\u0275elementEnd()),2&te){const A=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275nextContext(2);const ie=e.\u0275\u0275reference(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",ie)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(2,Yo,A.attributes))}}function Vs(te,Re){if(1&te&&(e.\u0275\u0275elementStart(0,"li"),e.\u0275\u0275text(1),e.\u0275\u0275template(2,ba,3,4,"span",21),e.\u0275\u0275template(3,$s,2,4,"ul",21),e.\u0275\u0275elementEnd()),2&te){const A=Re.$implicit,ie=e.\u0275\u0275nextContext().settings;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",A.displayName,": "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!A.attributes||0==A.attributes.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",ie.attributes&&A.attributes.length>0)}}function Hs(te,Re){1&te&&e.\u0275\u0275template(0,Vs,4,3,"li",20),2&te&&e.\u0275\u0275property("ngForOf",Re.settings)}function Ks(te,Re){}function Ca(te,Re){if(1&te){const A=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",22),e.\u0275\u0275elementStart(1,"classifieds-ui-content-editor",23,24),e.\u0275\u0275listener("nestedUpdate",function(Pe){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext().onNestedUpdate(Pe)})("delete",function(){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext().onDeleteClick()})("rules",function(){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext().onRulesClick()})("props",function(){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext().onPropsClick()}),e.\u0275\u0275template(3,Ks,0,0,"ng-template",null,25,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&te){const A=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("panelPage",A.panelPage)("savable",!1)("nested",!0)("locked",A.locked)("contexts",A.contexts)("rootContext",A.rootContext)("ancestory",A.paneAncestoryWithSelf)}}function Ws(te,Re){if(1&te){const A=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",26),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext().onPreviewClick()}),e.\u0275\u0275text(1,"Preview"),e.\u0275\u0275elementEnd()}if(2&te){const A=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",A.locked)}}function Ji(te,Re){if(1&te){const A=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",27),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext().onDisablePreviewClick()}),e.\u0275\u0275text(1,"Disable Preview"),e.\u0275\u0275elementEnd()}}const il=["extraActionsArea"],No=["contextsMenuTpl"],xa=["editablePaneTpl"],Xs=["panes"];function vr(te,Re){}const $i=function(te){return{nested:te}};function jr(te,Re){if(1&te){const A=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",7),e.\u0275\u0275listener("ngSubmit",function(){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext().submit()}),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275template(2,vr,0,0,"ng-template",8),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}if(2&te){const A=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",A.contentForm)("ngClass",e.\u0275\u0275pureFunction1(2,$i,A.nested))}}function Mi(te,Re){}function Rr(te,Re){if(1&te&&(e.\u0275\u0275elementStart(0,"div",9),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275template(2,Mi,0,0,"ng-template",8),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()),2&te){const A=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",A.contentForm)("ngClass",e.\u0275\u0275pureFunction1(2,$i,A.nested))}}function yi(te,Re){1&te&&e.\u0275\u0275element(0,"div",12)}function wo(te,Re){if(1&te){const A=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"classifieds-ui-editable-pane",10),e.\u0275\u0275listener("delete",function(){const Pe=e.\u0275\u0275restoreView(A),nt=Pe.i,Dt=Pe.j;return e.\u0275\u0275nextContext().onDeletePane(nt,Dt)})("rules",function(){const Pe=e.\u0275\u0275restoreView(A),nt=Pe.i,Dt=Pe.j;return e.\u0275\u0275nextContext().onRulesPane(nt,Dt)})("nestedUpdate",function(Pe){const nt=e.\u0275\u0275restoreView(A),Dt=nt.i,Wt=nt.j;return e.\u0275\u0275nextContext().onNestedUpdate(Pe,Dt,Wt)})("rendererOverride",function(){const Pe=e.\u0275\u0275restoreView(A),nt=Pe.i,Dt=Pe.j;return e.\u0275\u0275nextContext().onOverrideRenderer(nt,Dt)})("removeRendererOverride",function(){const Pe=e.\u0275\u0275restoreView(A),nt=Pe.i,Dt=Pe.j;return e.\u0275\u0275nextContext().onRemoveOverrideRenderer(nt,Dt)})("edit",function(){const Pe=e.\u0275\u0275restoreView(A),nt=Pe.i,Dt=Pe.j;return e.\u0275\u0275nextContext().onPaneEdit(nt,Dt)})("props",function(){const Pe=e.\u0275\u0275restoreView(A),nt=Pe.i,Dt=Pe.j;return e.\u0275\u0275nextContext().editPaneProps(nt,Dt)})("delete",function(){const Pe=e.\u0275\u0275restoreView(A),nt=Pe.i,Dt=Pe.j;return e.\u0275\u0275nextContext().onPaneDelete(nt,Dt)}),e.\u0275\u0275template(1,yi,1,0,"div",11),e.\u0275\u0275elementEnd()}if(2&te){const A=Re.i,ie=Re.j,Pe=e.\u0275\u0275nextContext();e.\u0275\u0275property("panelIndex",A)("paneIndex",ie)("name",Pe.panelPaneName(A,ie))("label",Pe.panelPaneLabel(A,ie))("locked",Pe.panelPaneLocked(A,ie))("contexts",Pe.contexts)("pluginName",Pe.panelPanePlugin(A,ie))("settings",Pe.panelPaneSettings(A,ie))("ancestory",Pe.ancestory)}}function Kr(te,Re){if(1&te&&(e.\u0275\u0275elementStart(0,"button",13),e.\u0275\u0275text(1,"( x )"),e.\u0275\u0275elementEnd()),2&te){e.\u0275\u0275nextContext();const A=e.\u0275\u0275reference(8);e.\u0275\u0275property("matMenuTriggerFor",A)}}function go(te,Re){if(1&te){const A=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",5),e.\u0275\u0275listener("click",function(){const nt=e.\u0275\u0275restoreView(A).$implicit;return e.\u0275\u0275nextContext().onEditContext(nt.name)}),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()}if(2&te){const A=Re.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(A.name)}}function ws(te,Re){if(1&te){const A=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"a",1),e.\u0275\u0275listener("click",function(){const nt=e.\u0275\u0275restoreView(A).$implicit;return e.\u0275\u0275nextContext().onItemSelect(nt.value)}),e.\u0275\u0275elementStart(1,"span",2),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&te){const A=Re.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(A.value.name)}}function Zo(te,Re){1&te&&e.\u0275\u0275elementContainer(0)}function zi(te,Re){if(1&te&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&te){const A=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",A.displayName,": ")}}function ol(te,Re){if(1&te&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"attribute"),e.\u0275\u0275elementEnd()),2&te){const A=e.\u0275\u0275nextContext().$implicit,ie=e.\u0275\u0275nextContext().settings;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(2,1,ie,A.name))}}function Co(te,Re){1&te&&e.\u0275\u0275elementContainer(0)}function Vi(te,Re){if(1&te&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,Co,1,0,"ng-container",4),e.\u0275\u0275elementEnd()),2&te){const A=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275nextContext(2);const ie=e.\u0275\u0275reference(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",ie)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(2,Yo,A.attributes))}}function Qs(te,Re){if(1&te&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,zi,2,1,"span",2),e.\u0275\u0275template(2,ol,3,4,"span",2),e.\u0275\u0275template(3,Vi,2,4,"div",2),e.\u0275\u0275elementEnd()),2&te){const A=Re.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0==A.attributes.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0==A.attributes.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",A.attributes.length>0)}}function Cs(te,Re){1&te&&e.\u0275\u0275template(0,Qs,4,3,"div",6),2&te&&e.\u0275\u0275property("ngForOf",Re.settings)}function Ea(te,Re){if(1&te&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,Zo,1,0,"ng-container",4),e.\u0275\u0275template(2,Cs,1,1,"ng-template",null,5,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&te){const A=e.\u0275\u0275reference(3),ie=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",A)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(2,Yo,ie.attributeValues))}}function xs(te,Re){if(1&te&&(e.\u0275\u0275elementStart(0,"div",7),e.\u0275\u0275element(1,"classifieds-ui-attributes-builder",8),e.\u0275\u0275elementEnd()),2&te){const A=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("formGroup",A.controlContainer.control),e.\u0275\u0275advance(1),e.\u0275\u0275property("attributes",A.attributes)("attributeValues",A.attributeValues)}}function Es(te,Re){if(1&te&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,Ea,4,4,"div",2),e.\u0275\u0275template(2,xs,2,3,"div",3),e.\u0275\u0275elementEnd()),2&te){const A=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","page"==A.displayType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","form"==A.displayType)}}function ji(te,Re){if(1&te&&e.\u0275\u0275element(0,"classifieds-ui-snippet-pane-renderer",9),2&te){const A=e.\u0275\u0275nextContext();e.\u0275\u0275property("settings",A.rendererSettings)("tokens",A.tokens)}}function sl(te,Re){if(1&te){const A=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ngx-dropzone-image-preview",2),e.\u0275\u0275listener("removed",function(Pe){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext().onRemoveMedia(Pe)}),e.\u0275\u0275elementStart(1,"ngx-dropzone-label"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&te){const A=e.\u0275\u0275nextContext();e.\u0275\u0275property("removable",!0)("file",A.media),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("",A.media.name," (",A.media.type,")")}}const al=["img"];function Sa(te,Re){if(1&te&&(e.\u0275\u0275elementStart(0,"mat-option",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&te){const A=Re.$implicit;e.\u0275\u0275property("value",A),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(A)}}function Aa(te,Re){if(1&te&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275elementStart(1,"mat-form-field",23),e.\u0275\u0275elementStart(2,"mat-label"),e.\u0275\u0275text(3,"Pane"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"mat-select",24),e.\u0275\u0275template(5,Sa,2,2,"mat-option",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&te){const A=Re.index,ie=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroupName",A),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",ie.panes)}}function ll(te,Re){if(1&te){const A=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",20),e.\u0275\u0275elementStart(1,"button",21),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext().addPane()}),e.\u0275\u0275text(2,"Add Pane"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div"),e.\u0275\u0275template(4,Aa,6,2,"div",22),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&te){const A=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",A.bindings.controls)}}function ul(te,Re){1&te&&(e.\u0275\u0275elementStart(0,"div",27),e.\u0275\u0275elementStart(1,"mat-form-field"),e.\u0275\u0275element(2,"input",28),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"mat-form-field"),e.\u0275\u0275element(4,"input",29),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"mat-form-field"),e.\u0275\u0275element(6,"input",30),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div"),e.\u0275\u0275elementStart(8,"mat-checkbox",31),e.\u0275\u0275text(9,"Multiple"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"mat-form-field"),e.\u0275\u0275element(11,"input",32),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}function xo(te,Re){if(1&te&&(e.\u0275\u0275elementStart(0,"mat-option",7),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&te){const A=Re.$implicit;e.\u0275\u0275property("value",A.value),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(A.label)}}function es(te,Re){if(1&te&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"mat-form-field"),e.\u0275\u0275elementStart(2,"mat-label"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"mat-select",5),e.\u0275\u0275template(5,xo,2,2,"mat-option",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&te){const A=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(A.label),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",A.options)}}function cl(te,Re){if(1&te&&(e.\u0275\u0275elementStart(0,"mat-radio-button",7),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&te){const A=Re.$implicit;e.\u0275\u0275property("value",A.value),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(A.label)}}function ts(te,Re){if(1&te&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div"),e.\u0275\u0275elementStart(2,"label"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"mat-radio-group",5),e.\u0275\u0275template(5,cl,2,2,"mat-radio-button",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&te){const A=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(A.label),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",A.options)}}function Pa(te,Re){if(1&te&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275elementStart(1,"div",9),e.\u0275\u0275elementStart(2,"mat-checkbox",10),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&te){const A=Re.$implicit,ie=Re.index;e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroupName",ie),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(A.label)}}function io(te,Re){if(1&te&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div"),e.\u0275\u0275elementStart(2,"div",1),e.\u0275\u0275template(3,Pa,4,2,"div",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&te){const A=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",A.options)}}function jo(te,Re){if(1&te&&(e.\u0275\u0275elementStart(0,"mat-option",7),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&te){const A=Re.$implicit;e.\u0275\u0275property("value",A),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(A.label)}}function Ia(te,Re){if(1&te){const A=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"mat-form-field"),e.\u0275\u0275element(2,"input",11),e.\u0275\u0275elementStart(3,"mat-autocomplete",12,13),e.\u0275\u0275listener("optionSelected",function(Pe){return e.\u0275\u0275restoreView(A),e.\u0275\u0275nextContext().onOptionSelected(Pe)}),e.\u0275\u0275template(5,jo,2,2,"mat-option",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&te){const A=e.\u0275\u0275reference(4),ie=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("placeholder",ie.label)("matAutocomplete",A),e.\u0275\u0275advance(1),e.\u0275\u0275property("displayWith",ie.displayAuto),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",ie.options)}}function Ta(te,Re){if(1&te&&(e.\u0275\u0275elementStart(0,"mat-option",8),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&te){const A=Re.$implicit;e.\u0275\u0275property("value",A.name),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(A.name)}}function Bo(te,Re){if(1&te){const A=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",5),e.\u0275\u0275element(1,"druid-panels-panelpage-linkedlist",6),e.\u0275\u0275elementStart(2,"button",3),e.\u0275\u0275listener("click",function(){const nt=e.\u0275\u0275restoreView(A).index;return e.\u0275\u0275nextContext().onRemoveMapping(nt)}),e.\u0275\u0275text(3,"Remove"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&te){const A=Re.index,ie=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroupName",A),e.\u0275\u0275advance(1),e.\u0275\u0275property("panes",ie.panes)}}function dl(te,Re){if(1&te&&e.\u0275\u0275element(0,"classifieds-ui-render-pane",4),2&te){const A=e.\u0275\u0275nextContext().index,ie=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("pluginName",ie.panes[2*A].contentPlugin)("settings",ie.panes[2*A].settings)("contexts",ie.panes[2*A].contexts)}}function lr(te,Re){if(1&te&&(e.\u0275\u0275elementStart(0,"mat-tab"),e.\u0275\u0275template(1,dl,1,3,"ng-template",3),e.\u0275\u0275element(2,"classifieds-ui-render-pane",4),e.\u0275\u0275elementEnd()),2&te){const A=Re.index,ie=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275property("pluginName",ie.panes[2*A+1].contentPlugin)("settings",ie.panes[2*A+1].settings)("contexts",ie.panes[2*A+1].contexts)}}function ns(te,Re){if(1&te&&(e.\u0275\u0275elementStart(0,"mat-tab-group",1),e.\u0275\u0275template(1,lr,3,3,"mat-tab",2),e.\u0275\u0275elementEnd()),2&te){const A=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("for",A.panes.length/2)}}function fl(te,Re){if(1&te&&(e.\u0275\u0275elementStart(0,"mat-tab",6),e.\u0275\u0275element(1,"classifieds-ui-render-pane",4),e.\u0275\u0275elementEnd()),2&te){const A=Re.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("pluginName",A.contentPlugin)("settings",A.settings)("contexts",A.contexts)}}function Jr(te,Re){if(1&te&&(e.\u0275\u0275elementStart(0,"mat-tab-group",1),e.\u0275\u0275template(1,fl,2,3,"mat-tab",5),e.\u0275\u0275elementEnd()),2&te){const A=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",A.panes)}}function _r(te,Re){if(1&te&&(e.\u0275\u0275elementStart(0,"div",2),e.\u0275\u0275element(1,"classifieds-ui-render-pane",3),e.\u0275\u0275elementEnd()),2&te){const A=Re.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("pluginName",A.contentPlugin)("settings",A.settings)("contexts",A.contexts)("resolvedContext",A.resolvedContext)}}function ti(te,Re){if(1&te&&(e.\u0275\u0275elementStart(0,"th",7),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&te){const A=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(A)}}function Eo(te,Re){if(1&te&&(e.\u0275\u0275elementStart(0,"td",8),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&te){const A=Re.$implicit,ie=e.\u0275\u0275nextContext().$implicit,Pe=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(Pe.rowData(ie,A))}}function vo(te,Re){1&te&&(e.\u0275\u0275elementContainerStart(0,4),e.\u0275\u0275template(1,ti,2,1,"th",5),e.\u0275\u0275template(2,Eo,2,1,"td",6),e.\u0275\u0275elementContainerEnd()),2&te&&e.\u0275\u0275property("matColumnDef",Re.$implicit)}function Ra(te,Re){1&te&&e.\u0275\u0275element(0,"tr",9)}function rs(te,Re){1&te&&e.\u0275\u0275element(0,"tr",10)}const pl={GridLayout:{entityName:"GridLayout"},PanelPageForm:{crud:{panelpageform_serialize:{plugins:{idb_keyval:{params:{prefix:"panelpageform__"}}}}}}};let Lo=(()=>{class te{constructor(A){this.viewContainerRef=A}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(e.ViewContainerRef))},te.\u0275dir=e.\u0275\u0275defineDirective({type:te,selectors:[["","classifiedsUiContentSelectionHost",""]]}),te})(),Oa=(()=>{class te{constructor(A,ie,Pe,nt,Dt,Wt){this.data=A,this.bottomSheetRef=ie,this.dialog=Pe,this.componentFactoryResolver=nt,this.fb=Dt,this.contentPluginManager=Wt,this.selectedIndex=0}ngOnInit(){this.contentPlugins=this.contentPluginManager.getPlugins()}onEntitySelected(A){this.plugin=A,void 0!==this.plugin.selectionComponent?(this.selectedIndex=1,this.renderSelectionComponent()):void 0!==this.plugin.editorComponent?(this.bottomSheetRef.dismiss(),A.handler?this.plugin.handler.editorOptions([]).subscribe(ie=>{this.dialog.open(this.plugin.editorComponent,{data:{panelFormGroup:this.data.panelForm,panelIndex:this.data.panelIndex,pane:void 0,paneIndex:void 0,contexts:this.data.contexts,contentAdded:this.data.contentAdded,plugin:A},...ie.fullscreen?{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%"}:{}})}):this.dialog.open(this.plugin.editorComponent,{data:{panelFormGroup:this.data.panelForm,panelIndex:this.data.panelIndex,pane:void 0,paneIndex:void 0,contexts:this.data.contexts,contentAdded:this.data.contentAdded}})):this.data.panelForm.get("panes").push(this.fb.group({contentPlugin:this.fb.control(this.plugin.id),name:this.fb.control(""),label:this.fb.control(""),settings:this.fb.array([])}))}renderSelectionComponent(){const A=this.componentFactoryResolver.resolveComponentFactory(this.plugin.selectionComponent),ie=this.selectionHost.viewContainerRef;ie.clear();const Pe=ie.createComponent(A);Pe.instance.panelFormGroup=this.data.panelForm,Pe.instance.contexts=this.data.contexts}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject($r.OG),e.\u0275\u0275directiveInject($r.oL),e.\u0275\u0275directiveInject(T.uw),e.\u0275\u0275directiveInject(e.ComponentFactoryResolver),e.\u0275\u0275directiveInject(x.qu),e.\u0275\u0275directiveInject($n.ContentPluginManager))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["classifieds-ui-content-selector"]],viewQuery:function(A,ie){if(1&A&&e.\u0275\u0275viewQuery(Lo,7),2&A){let Pe;e.\u0275\u0275queryRefresh(Pe=e.\u0275\u0275loadQuery())&&(ie.selectionHost=Pe.first)}},decls:10,vars:6,consts:[[1,"content-selector-wrapper"],[3,"selectedIndex"],["mat-list-item","","mat-list-item","",3,"click",4,"ngFor","ngForOf"],["classifiedsUiContentSelectionHost",""],["mat-list-item","","mat-list-item","",3,"click"],["mat-line",""]],template:function(A,ie){1&A&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"mat-tab-group",1),e.\u0275\u0275elementStart(2,"mat-tab"),e.\u0275\u0275elementStart(3,"mat-nav-list"),e.\u0275\u0275template(4,ko,3,1,"a",2),e.\u0275\u0275pipe(5,"keyvalue"),e.\u0275\u0275pipe(6,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"mat-tab"),e.\u0275\u0275elementContainerStart(8),e.\u0275\u0275template(9,Qi,0,0,"ng-template",3),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&A&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("selectedIndex",ie.selectedIndex),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(5,2,e.\u0275\u0275pipeBind1(6,4,ie.contentPlugins))))},directives:[M.SP,M.uX,Y.Hk,Y.Tg,n.NgForOf,J.X2,Lo],pipes:[n.KeyValuePipe,n.AsyncPipe],styles:[".content-selector-wrapper[_ngcontent-%COMP%]     .mat-tab-header{display:none}"]}),te})(),yo=(()=>{class te{constructor(A,ie){this.attributeSerializer=A,this.tokenizrService=ie,this.types=["text/markdown","text/html"]}handleFile(A){return new ge.y(ie=>{const Pe=new FileReader;Pe.onload=()=>{ie.next(this.buildSettings(new On.pP({contentType:A.type,content:`${Pe.result}`}))),ie.complete()},Pe.readAsText(A)})}handlesType(A){return void 0!==this.types.find(ie=>ie===A)}implementsRendererOverride(){return!1}hasRendererOverride(A){return(0,Ce.of)(!1)}isDynamic(A){return!1}isData(A){return!1}getBindings(A,ie,Pe){return"context"===ie?this.toObject(A).pipe((0,St.U)(nt=>this.tokenizrService.discoverTokens(nt.content).map(Wt=>new $n.ContentBinding({id:Wt,type:"context"})))):(0,Ce.of)([])}fetchDynamicData(A,ie){return(0,Ce.of)(new bn.qz)}buildDynamicItems(A,ie){return(0,Ce.of)([])}toObject(A){return(0,Ce.of)(new On.pP(this.attributeSerializer.deserializeAsObject(A)))}buildSettings(A){return this.attributeSerializer.serialize(A,"root").attributes}stateDefinition(A){return(0,Ce.of)({})}editorOptions(A){return(0,Ce.of)(new $n.ContentPluginEditorOptions({fullscreen:!0}))}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275inject(Rt.AttributeSerializerService),e.\u0275\u0275inject(kr.G))},te.\u0275prov=e.\u0275\u0275defineInjectable({token:te,factory:te.\u0275fac}),te})(),Ss=(()=>{class te{constructor(A,ie,Pe,nt){this.hostEl=A,this.handler=ie,this.tokenizerService=Pe,this.markdownService=nt,this.contexts=[],this.afterContentInit$=new We.x,this.content="",this.content$=new pt.X(""),this.settings$=new pt.X([]),this.snippet$=new pt.X(void 0),this.resolvedContext$=new pt.X(void 0),this.docRendered$=new We.x,this.contentSub=(0,dt.a)([this.afterContentInit$,this.content$,this.snippet$,this.docRendered$]).subscribe(([Dt,Wt,mn])=>{mn&&mn.jsScript&&""!==mn.jsScript&&setTimeout(()=>this.appendScript(mn.jsScript))}),this.renderContentSub=(0,dt.a)([this.settings$,this.resolvedContext$]).pipe((0,tt.w)(([Dt,Wt])=>this.handler.toObject(Dt)),(0,tt.w)(Dt=>this.resolveContexts().pipe((0,St.U)(Wt=>[Dt,Wt])))).subscribe(([Dt,Wt])=>{void 0!==Wt&&(this.tokens=Wt),this.contentType=Dt.contentType,this.snippet$.next(Dt);const mn=this.replaceTokens(Dt.content),Pn=Dt.contentType&&-1!==Dt.contentType.indexOf("markdown")?this.markdownService.compile(mn):mn;this.content$.next(Pn)})}set settings(A){this.settings$.next(A)}set resolvedContext(A){this.resolvedContext$.next(A)}ngOnInit(){}ngOnChanges(){console.log("pane changed")}ngAfterContentInit(){this.afterContentInit$.next(),this.afterContentInit$.complete()}replaceTokens(A){return void 0!==this.tokens&&this.tokens.forEach((ie,Pe)=>{A=A.split(`[${Pe}]`).join(`${ie}`)}),A}resolveContexts(){return new ge.y(A=>{let ie=new Map;if(this.resolvedContext$.value)for(const Pe in this.resolvedContext$.value)ie=new Map([...ie,...this.tokenizerService.generateGenericTokens(this.resolvedContext$.value[Pe],"_root"===Pe?"":Pe)]);A.next(ie),A.complete()})}appendScript(A){let ie=document.createElement("script");ie.type="text/javascript",ie.appendChild(document.createTextNode(A)),this.hostEl.nativeElement.appendChild(ie),console.log("add script")}onDocRendered(){this.docRendered$.next(void 0)}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(yo),e.\u0275\u0275directiveInject(kr.G),e.\u0275\u0275directiveInject($.Zy))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["classifieds-ui-snippet-pane-renderer"]],inputs:{settings:"settings",contexts:"contexts",tokens:"tokens",resolvedContext:"resolvedContext"},features:[e.\u0275\u0275NgOnChangesFeature],decls:2,vars:2,consts:[[3,"content","docRendered",4,"ngIf"],[3,"content","docRendered"]],template:function(A,ie){1&A&&(e.\u0275\u0275template(0,xi,2,3,"classifieds-ui-dynamic-content-viewer",0),e.\u0275\u0275template(1,Fo,2,3,"classifieds-ui-dynamic-content-viewer",0)),2&A&&(e.\u0275\u0275property("ngIf","text/markdown"==ie.contentType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","text/html"==ie.contentType))},directives:[Nr.DynamicContentViewer,n.NgIf],pipes:[n.AsyncPipe],styles:[""]}),te})(),So=(()=>{class te{constructor(A){this.snippetHandler=A}handleFile(A){return(0,Ce.of)([])}handlesType(A){return!1}implementsRendererOverride(){return!0}hasRendererOverride(A){return this.rendererSnippet(A).pipe((0,St.U)(ie=>void 0!==ie))}isDynamic(A){return!1}isData(A){return!1}fetchDynamicData(A,ie){return(0,Ce.of)(new bn.qz)}buildDynamicItems(A,ie){return(0,Ce.of)([])}getBindings(A,ie,Pe){return(0,Ce.of)([])}valueSettings(A){const ie=[];return A.forEach(Pe=>{"value"===Pe.name&&ie.push(Pe)}),ie}rendererSnippet(A){let ie;return A.forEach(Pe=>{"_renderer"===Pe.name&&(ie=this.snippetHandler.toObject(Pe.attributes))}),void 0!==ie?ie:(0,Ce.of)(void 0)}rendererOverrideSettings(A){return[new Rt.AttributeValue({name:"_renderer",type:Rt.AttributeTypes.Complex,displayName:"Renderer Override",value:void 0,computedValue:void 0,intValue:0,attributes:this.snippetHandler.buildSettings(A)})]}widgetSettings(A){return[new Rt.AttributeValue({name:"widget",type:A.schema.type,displayName:"Widget",value:A.name,computedValue:A.name,intValue:0,attributes:[]})]}stateDefinition(A){return(0,Ce.of)({})}editorOptions(A){return(0,Ce.of)(new $n.ContentPluginEditorOptions)}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275inject(yo))},te.\u0275prov=e.\u0275\u0275defineInjectable({token:te,factory:te.\u0275fac}),te})(),hl=(()=>{class te{constructor(A,ie,Pe,nt,Dt){this.data=A,this.dialogRef=ie,this.tokenizerService=Pe,this.handler=nt,this.fb=Dt}ngOnInit(){this.tokens=this.tokenizerService.generateTokens(this.data.pane.settings)}submitted(A){this.replaceRenderer(A),this.dialogRef.close()}replaceRenderer(A){let ie;const Pe=this.handler.rendererOverrideSettings(A)[0],nt=this.convertToGroup(Pe),Dt=this.data.panelFormGroup.get("panes").at(this.data.paneIndex).get("settings");Dt.controls.forEach((Wt,mn)=>{"_renderer"===Wt.get("name").value&&(ie=mn)}),void 0!==ie?(Dt.insert(ie,nt),Dt.removeAt(ie+1)):Dt.push(nt)}convertToGroup(A){const ie=this.fb.group({name:new x.NI(A.name,x.kI.required),type:new x.NI(A.type,x.kI.required),displayName:new x.NI(A.displayName,x.kI.required),value:new x.NI(A.value,x.kI.required),computedValue:new x.NI(A.value,x.kI.required),attributes:new x.Oe([])});return A.attributes&&A.attributes.length>0&&A.attributes.forEach(Pe=>{ie.get("attributes").push(this.convertToGroup(Pe))}),ie}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(T.WI),e.\u0275\u0275directiveInject(T.so),e.\u0275\u0275directiveInject(kr.G),e.\u0275\u0275directiveInject(So),e.\u0275\u0275directiveInject(x.qu))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["classifieds-ui-rendering-editor"]],decls:2,vars:1,consts:[[3,"tokens","submitted"]],template:function(A,ie){1&A&&(e.\u0275\u0275elementStart(0,"classifieds-ui-snippet-form",0),e.\u0275\u0275listener("submitted",function(nt){return ie.submitted(nt)}),e.\u0275\u0275element(1,"classifieds-ui-snippet-form"),e.\u0275\u0275elementEnd()),2&A&&e.\u0275\u0275property("tokens",ie.tokens)},directives:[On.l8],styles:[""]}),te})(),ml=(()=>{class te{constructor(A,ie,Pe,nt,Dt,Wt){this.data=A,this.spm=ie,this.bottomSheetRef=Pe,this.dialog=nt,this.componentFactoryResolver=Dt,this.fb=Wt,this.selectedIndex=0}ngOnInit(){this.stylePlugins=this.spm.getPlugins()}onStyleSelected(A){this.plugin=A,void 0!==this.plugin.editorComponent?(this.bottomSheetRef.dismiss(),this.data.panelForm.get("stylePlugin").setValue(this.plugin.name),this.data.panelForm.get("styleTitle").setValue(this.plugin.title),this.data.panelForm.get("settings").clear(),this.dialog.open(this.plugin.editorComponent,{data:{panelFormGroup:this.data.panelForm,panelIndex:this.data.panelIndex,contexts:this.data.contexts}})):(this.data.panelForm.get("stylePlugin").setValue(this.plugin.name),this.data.panelForm.get("styleTitle").setValue(this.plugin.title),this.data.panelForm.get("settings").clear(),this.bottomSheetRef.dismiss())}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject($r.OG),e.\u0275\u0275directiveInject(Ht.er),e.\u0275\u0275directiveInject($r.oL),e.\u0275\u0275directiveInject(T.uw),e.\u0275\u0275directiveInject(e.ComponentFactoryResolver),e.\u0275\u0275directiveInject(x.qu))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["classifieds-ui-style-selector"]],viewQuery:function(A,ie){if(1&A&&e.\u0275\u0275viewQuery(Lo,7),2&A){let Pe;e.\u0275\u0275queryRefresh(Pe=e.\u0275\u0275loadQuery())&&(ie.selectionHost=Pe.first)}},decls:10,vars:6,consts:[[1,"style-selector-wrapper"],[3,"selectedIndex"],["mat-list-item","","mat-list-item","",3,"click",4,"ngFor","ngForOf"],["classifiedsUiContentSelectionHost",""],["mat-list-item","","mat-list-item","",3,"click"],["mat-line",""]],template:function(A,ie){1&A&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"mat-tab-group",1),e.\u0275\u0275elementStart(2,"mat-tab"),e.\u0275\u0275elementStart(3,"mat-nav-list"),e.\u0275\u0275template(4,Do,3,1,"a",2),e.\u0275\u0275pipe(5,"keyvalue"),e.\u0275\u0275pipe(6,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"mat-tab"),e.\u0275\u0275elementContainerStart(8),e.\u0275\u0275template(9,Jo,0,0,"ng-template",3),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&A&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("selectedIndex",ie.selectedIndex),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(5,2,e.\u0275\u0275pipeBind1(6,4,ie.stylePlugins))))},directives:[M.SP,M.uX,Y.Hk,Y.Tg,n.NgForOf,J.X2,Lo],pipes:[n.KeyValuePipe,n.AsyncPipe],styles:[".style-selector-wrapper[_ngcontent-%COMP%]     .mat-tab-header{display:none}"]}),te})(),is=(()=>{class te{constructor(A,ie,Pe,nt,Dt){this.data=A,this.dialogRef=ie,this.fb=Pe,this.inlineContextResolver=nt,this.rulesParser=Dt,this.rulesForm=this.fb.group({rules:this.fb.control("")}),this.config={fields:{}}}ngOnInit(){this.inlineContextResolver.resolveMerged(this.data.contexts).subscribe(A=>{const ie={};for(const Pe in A)this.rulesParser.buildFields(A[Pe],Pe).forEach((nt,Dt)=>{ie[Dt]=nt});this.config={...this.config,fields:ie},void 0!==this.data.rule&&this.rulesForm.get("rules").setValue(this.data.rule)})}submit(){console.log("the rules"),console.log(this.rulesForm.get("rules").value),this.dialogRef.close(this.rulesForm.get("rules").value)}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(T.WI),e.\u0275\u0275directiveInject(T.so),e.\u0275\u0275directiveInject(x.qu),e.\u0275\u0275directiveInject(Kn.a$),e.\u0275\u0275directiveInject(er.Te))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["classifieds-ui-rules-dialog"]],decls:6,vars:3,consts:[[1,"rest-form",3,"formGroup","ngSubmit"],["formControlName","rules",3,"config"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"]],template:function(A,ie){1&A&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("ngSubmit",function(){return ie.submit()}),e.\u0275\u0275elementStart(1,"mat-dialog-content"),e.\u0275\u0275element(2,"query-builder",1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"mat-dialog-actions"),e.\u0275\u0275elementStart(4,"button",2),e.\u0275\u0275text(5,"Save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&A&&(e.\u0275\u0275property("formGroup",ie.rulesForm),e.\u0275\u0275advance(2),e.\u0275\u0275property("config",ie.config),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",!ie.rulesForm.valid))},directives:[Er,rr.lW,x._Y,x.JL,x.sg,T.xY,x.JJ,x.u,T.H8,T.ZT],styles:[""]}),te})(),Uo=(()=>{class te{constructor(A,ie,Pe){this.data=A,this.dialogRef=ie,this.fb=Pe,this.propertiesForm=this.fb.group({name:this.fb.control(this.data.props.name),title:this.fb.control(this.data.props.title),path:this.fb.control(this.data.props.path),cssFile:this.fb.control(this.data.props.cssFile),readUserIds:this.fb.array([this.fb.group({userId:this.fb.control(this.data.props.readUserIds&&this.data.props.readUserIds.length>0?this.data.props.readUserIds[0]:"")})])})}ngOnInit(){}submit(){this.dialogRef.close(new Ht.Ik({...this.propertiesForm.value,readUserIds:this.propertiesForm.value.readUserIds.map(A=>A.userId)}))}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(T.WI),e.\u0275\u0275directiveInject(T.so),e.\u0275\u0275directiveInject(x.qu))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["classifieds-ui-properties-dialog"]],decls:18,vars:2,consts:[[1,"properties-form",3,"formGroup","ngSubmit"],[1,"content-inner"],["fxLayout","column"],["matInput","","formControlName","name","placeholder","Name"],["matInput","","formControlName","title","placeholder","Title"],["matInput","","formControlName","path","placeholder","Path"],["matInput","","formControlName","cssFile","placeholder","Css File"],["formArrayName","readUserIds"],["formGroupName","0"],["matInput","","formControlName","userId","placeholder","Read User Id"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"]],template:function(A,ie){1&A&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("ngSubmit",function(){return ie.submit()}),e.\u0275\u0275elementStart(1,"mat-dialog-content"),e.\u0275\u0275elementStart(2,"div",1),e.\u0275\u0275elementStart(3,"div",2),e.\u0275\u0275elementStart(4,"mat-form-field"),e.\u0275\u0275element(5,"input",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"mat-form-field"),e.\u0275\u0275element(7,"input",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"mat-form-field"),e.\u0275\u0275element(9,"input",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"mat-form-field"),e.\u0275\u0275element(11,"input",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"mat-form-field",7),e.\u0275\u0275elementStart(13,"div",8),e.\u0275\u0275element(14,"input",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"mat-dialog-actions"),e.\u0275\u0275elementStart(16,"button",10),e.\u0275\u0275text(17,"Save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&A&&(e.\u0275\u0275property("formGroup",ie.propertiesForm),e.\u0275\u0275advance(16),e.\u0275\u0275property("disabled",!ie.propertiesForm.valid))},directives:[Ln.KE,rr.lW,x._Y,x.JL,x.sg,T.xY,Nn.xw,Mn.Nt,x.Fj,x.JJ,x.u,x.CE,x.x0,T.H8,T.ZT],styles:[""]}),te})(),Ma=(()=>{class te{constructor(A,ie,Pe){this.data=A,this.dialogRef=ie,this.fb=Pe,this.contextForm=this.fb.group({context:this.fb.control("")}),this.context=A.context}ngOnInit(){}ngAfterViewInit(){this.data.context&&setTimeout(()=>{this.contextFormComp.contextForm.setValue({name:this.data.context.name,plugin:this.data.context.plugin}),"rest"===this.data.context.plugin?setTimeout(()=>{this.contextFormComp.componentRef.instance.restSourceFormComp.restSource={url:this.data.context.rest.url,params:this.data.context.rest.params}}):"datasource"===this.data.context.plugin&&setTimeout(()=>{this.contextFormComp.componentRef.instance.datasourceFormComp.datasource=this.data.context.datasource})})}submit(){""!==this.contextForm.get("context").value.name?this.dialogRef.close(new Kn.Js(this.contextForm.get("context").value)):this.dialogRef.close()}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(T.WI),e.\u0275\u0275directiveInject(T.so),e.\u0275\u0275directiveInject(x.qu))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["classifieds-ui-context-dialog"]],viewQuery:function(A,ie){if(1&A&&e.\u0275\u0275viewQuery(Kn.tT,5),2&A){let Pe;e.\u0275\u0275queryRefresh(Pe=e.\u0275\u0275loadQuery())&&(ie.contextFormComp=Pe.first)}},decls:6,vars:3,consts:[[1,"context-form",3,"formGroup","ngSubmit"],["formControlName","context",3,"context"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"]],template:function(A,ie){1&A&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("ngSubmit",function(){return ie.submit()}),e.\u0275\u0275elementStart(1,"mat-dialog-content"),e.\u0275\u0275element(2,"classifieds-ui-context-form",1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"mat-dialog-actions"),e.\u0275\u0275elementStart(4,"button",2),e.\u0275\u0275text(5,"Save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&A&&(e.\u0275\u0275property("formGroup",ie.contextForm),e.\u0275\u0275advance(2),e.\u0275\u0275property("context",ie.context),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",!ie.contextForm.valid))},directives:[Kn.tT,rr.lW,x._Y,x.JL,x.sg,T.xY,x.JJ,x.u,T.H8,T.ZT],styles:[""]}),te})(),ae=(()=>{class te{constructor(A,ie,Pe){this.data=A,this.dialogRef=ie,this.fb=Pe,this.propsForm=this.fb.group({name:this.fb.control(this.data.props.name),label:this.fb.control(this.data.props.label)})}ngOnInit(){}submit(){this.dialogRef.close(new Ht.hT(this.propsForm.value))}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(T.WI),e.\u0275\u0275directiveInject(T.so),e.\u0275\u0275directiveInject(x.qu))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["classifieds-ui-panel-props-dialog"]],decls:11,vars:2,consts:[[1,"props-form",3,"formGroup","ngSubmit"],[1,"content-inner"],["fxLayout","column"],["matInput","","formControlName","name","placeholder","Name"],["matInput","","formControlName","label","placeholder","Label"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"]],template:function(A,ie){1&A&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("ngSubmit",function(){return ie.submit()}),e.\u0275\u0275elementStart(1,"mat-dialog-content"),e.\u0275\u0275elementStart(2,"div",1),e.\u0275\u0275elementStart(3,"div",2),e.\u0275\u0275elementStart(4,"mat-form-field"),e.\u0275\u0275element(5,"input",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"mat-form-field"),e.\u0275\u0275element(7,"input",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"mat-dialog-actions"),e.\u0275\u0275elementStart(9,"button",5),e.\u0275\u0275text(10,"Save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&A&&(e.\u0275\u0275property("formGroup",ie.propsForm),e.\u0275\u0275advance(9),e.\u0275\u0275property("disabled",!ie.propsForm.valid))},directives:[Ln.KE,rr.lW,x._Y,x.JL,x.sg,T.xY,Nn.xw,Mn.Nt,x.Fj,x.JJ,x.u,T.H8,T.ZT],styles:[""]}),te})(),Ae=(()=>{class te{constructor(A,ie,Pe){this.data=A,this.dialogRef=ie,this.fb=Pe,this.propsForm=this.fb.group({name:this.fb.control(this.data.props.name),label:this.fb.control(this.data.props.label)})}ngOnInit(){}submit(){this.dialogRef.close(new Ht.RD(this.propsForm.value))}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(T.WI),e.\u0275\u0275directiveInject(T.so),e.\u0275\u0275directiveInject(x.qu))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["classifieds-ui-pane-props-dialog"]],decls:11,vars:2,consts:[[1,"props-form",3,"formGroup","ngSubmit"],[1,"content-inner"],["fxLayout","column"],["matInput","","formControlName","name","placeholder","Name"],["matInput","","formControlName","label","placeholder","Label"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"]],template:function(A,ie){1&A&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("ngSubmit",function(){return ie.submit()}),e.\u0275\u0275elementStart(1,"mat-dialog-content"),e.\u0275\u0275elementStart(2,"div",1),e.\u0275\u0275elementStart(3,"div",2),e.\u0275\u0275elementStart(4,"mat-form-field"),e.\u0275\u0275element(5,"input",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"mat-form-field"),e.\u0275\u0275element(7,"input",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"mat-dialog-actions"),e.\u0275\u0275elementStart(9,"button",5),e.\u0275\u0275text(10,"Save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&A&&(e.\u0275\u0275property("formGroup",ie.propsForm),e.\u0275\u0275advance(9),e.\u0275\u0275property("disabled",!ie.propsForm.valid))},directives:[Ln.KE,rr.lW,x._Y,x.JL,x.sg,T.xY,Nn.xw,Mn.Nt,x.Fj,x.JJ,x.u,T.H8,T.ZT],styles:[""]}),te})(),Ne=(()=>{class te{constructor(A){this.viewContainerRef=A}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(e.ViewContainerRef))},te.\u0275dir=e.\u0275\u0275defineDirective({type:te,selectors:[["","classifiedsUiLayoutEditorHost",""]]}),te})(),ot=(()=>{class te{constructor(A){this.viewContainerRef=A}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(e.ViewContainerRef))},te.\u0275dir=e.\u0275\u0275defineDirective({type:te,selectors:[["","classifiedsUiPaneContentHost",""]]}),te})(),Gt=(()=>{class te{constructor(A,ie){this.entityServices=A,this.attributeSerializer=ie}get entityCollectionService(){return this.entityServices.getEntityCollectionService("PanelPageState")}resolve(A,ie){const Pe=mn=>mn.entities,Wt="$."+ie.selectionPath.map((mn,Pn)=>`${(Pn+1)%2==0?"panes":(0===Pn?"":"nestedPage.")+"panels"}[${mn}]`).join(".");return this.entityCollectionService.collection$.pipe((0,bt.Ys)((({id:mn,path:Pn})=>(0,bt.P1)((({id:mn})=>(0,bt.P1)(Pe,Pn=>Pn[mn]?Pn[mn]:void 0))({id:mn}),br=>(0,Sr.JSONPath)({path:Pn,json:br})))({id:ie.id,path:Wt})),(0,St.U)(mn=>mn&&Array.isArray(mn)&&0!==mn.length?mn[0]:this.defaultPaneState(ie.value?ie.value:{})),(0,St.U)(mn=>this.attributeSerializer.deserialize(mn.state)),(0,St.U)(mn=>mn?mn.root?mn.root:mn:{}),(0,At.b)(mn=>{console.log(`resolved panestate[id=${ie.id}]${Wt}`),console.log(mn)}))}defaultPaneState(A){return new Ht.Mn({state:this.attributeSerializer.serialize(A,"root")})}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275inject(_t.jn),e.\u0275\u0275inject(Rt.AttributeSerializerService))},te.\u0275prov=e.\u0275\u0275defineInjectable({token:te,factory:te.\u0275fac}),te})(),Kt=(()=>{class te{constructor(A,ie,Pe){this.componentFactoryResolver=A,this.panelHandler=ie,this.cpm=Pe,this.settings=[],this.locked=!1,this.contexts=[],this.edit=new e.EventEmitter,this.props=new e.EventEmitter,this.delete=new e.EventEmitter,this.rules=new e.EventEmitter,this.rendererOverride=new e.EventEmitter,this.removeRendererOverride=new e.EventEmitter,this.nestedUpdate=new e.EventEmitter,this.heightChange=new e.EventEmitter,this.displayOverride=!1,this.hasOverride=!1,this.preview=!1,this.schedulePluginChange=new We.x,this.pluginChangeSub=this.schedulePluginChange.pipe((0,tt.w)(nt=>this.cpm.getPlugin(this.pluginName).pipe((0,tt.w)(Dt=>Dt.handler.hasRendererOverride(this.settings).pipe((0,St.U)(Wt=>[nt,Dt,Wt])))))).subscribe(([nt,Dt,Wt])=>{this.contentPlugin=Dt,this.displayOverride=Dt.handler.implementsRendererOverride(),this.hasOverride=!!Wt,nt&&"panel"===this.pluginName&&this.panelHandler.toObject(this.settings).subscribe(mn=>{this.panelPage=mn})}),this.ancestory$=new We.x,this.panelIndex$=new We.x,this.paneIndex$=new We.x,this.paneAncestoryWithSelf=[],this.paneAncestoryWithSelfSub=(0,dt.a)([this.ancestory$,this.panelIndex$,this.paneIndex$]).pipe((0,St.U)(([nt,Dt,Wt])=>[...nt,Dt,Wt])).subscribe(nt=>{this.paneAncestoryWithSelf=nt})}set panelIndex(A){this.panelIndex$.next(A)}set paneIndex(A){this.paneIndex$.next(A)}set ancestory(A){this.ancestory$.next(A)}ngOnInit(){this.schedulePluginChange.next(!0),console.log("here 1")}ngOnChanges(A){this.schedulePluginChange.next(!1),console.log("here 2"),console.log(A)}onEditClick(){this.edit.emit()}onPropsClick(){this.props.emit()}onRulesClick(){this.rules.emit()}onDeleteClick(){this.delete.emit()}onPreviewClick(){this.preview=!0,void 0!==this.contentPaneHost&&this.renderPaneContent(),setTimeout(()=>this.heightChange.emit())}onOverrideClick(){this.rendererOverride.emit()}onRemoveOverrideClick(){this.removeRendererOverride.emit()}onNestedUpdate(A){this.nestedUpdate.emit(A)}onDisablePreviewClick(){this.preview=!1,void 0!==this.contentPaneHost&&this.contentPaneHost.viewContainerRef.clear(),setTimeout(()=>this.heightChange.emit())}onAfterCollapse(){this.heightChange.emit()}onAfterExpand(){this.heightChange.emit()}renderPaneContent(){const A=this.componentFactoryResolver.resolveComponentFactory(this.contentPlugin.renderComponent),ie=this.contentPaneHost.viewContainerRef;ie.clear(),ie.createComponent(A).instance.settings=this.settings}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(e.ComponentFactoryResolver),e.\u0275\u0275directiveInject(Ht.iE),e.\u0275\u0275directiveInject($n.ContentPluginManager))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["classifieds-ui-editable-pane"]],viewQuery:function(A,ie){if(1&A&&(e.\u0275\u0275viewQuery(ot,5),e.\u0275\u0275viewQuery(no,5)),2&A){let Pe;e.\u0275\u0275queryRefresh(Pe=e.\u0275\u0275loadQuery())&&(ie.contentPaneHost=Pe.first),e.\u0275\u0275queryRefresh(Pe=e.\u0275\u0275loadQuery())&&(ie.contentEditor=Pe.first)}},inputs:{pluginName:"pluginName",settings:"settings",name:"name",label:"label",panelIndex:"panelIndex",paneIndex:"paneIndex",locked:"locked",rootContext:"rootContext",contexts:"contexts",ancestory:"ancestory"},outputs:{edit:"edit",props:"props",delete:"delete",rules:"rules",rendererOverride:"rendererOverride",removeRendererOverride:"removeRendererOverride",nestedUpdate:"nestedUpdate",heightChange:"heightChange"},features:[e.\u0275\u0275NgOnChangesFeature],decls:17,vars:6,consts:[["class","editable-pane-wrapper",4,"ngIf","ngIfElse"],["settingsTmpl",""],["nestedPanelTpl",""],["paneMenu","matMenu"],["type","button","mat-menu-item","",3,"disabled","click"],["type","button","mat-menu-item","",3,"click"],["mat-menu-item","","type","button",3,"disabled","click",4,"ngIf"],["mat-menu-item","","type","button",3,"click",4,"ngIf"],["type","button","mat-menu-item","",1,"delete",3,"click"],[1,"editable-pane-wrapper"],["fxLayout","row",1,"inner-pane-wrapper"],[1,"pane-menu-trigger-wrapper"],["mat-button","","type","button",3,"matMenuTriggerFor"],["fxFlex","",3,"afterCollapse","afterExpand"],[3,"hidden"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"preview-area",3,"ngClass"],["class","override","type","button",3,"click",4,"ngIf"],["classifiedsUiPaneContentHost",""],["type","button",1,"override",3,"click"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"nested-panel-wrapper"],[3,"panelPage","savable","nested","locked","contexts","rootContext","ancestory","nestedUpdate","delete","rules","props"],["contentEditor",""],["extraActionsArea",""],["mat-menu-item","","type","button",3,"disabled","click"],["mat-menu-item","","type","button",3,"click"]],template:function(A,ie){if(1&A&&(e.\u0275\u0275template(0,Gs,18,13,"div",0),e.\u0275\u0275template(1,Hs,1,1,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(3,Ca,5,7,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(5,"mat-menu",null,3),e.\u0275\u0275elementStart(7,"button",4),e.\u0275\u0275listener("click",function(){return ie.onEditClick()}),e.\u0275\u0275text(8,"Edit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"button",4),e.\u0275\u0275listener("click",function(){return ie.onPropsClick()}),e.\u0275\u0275text(10,"Props"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"button",5),e.\u0275\u0275listener("click",function(){return ie.onRulesClick()}),e.\u0275\u0275text(12,"Rules"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,Ws,2,1,"button",6),e.\u0275\u0275template(14,Ji,2,0,"button",7),e.\u0275\u0275elementStart(15,"button",8),e.\u0275\u0275listener("click",function(){return ie.onDeleteClick()}),e.\u0275\u0275text(16,"Delete"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&A){const Pe=e.\u0275\u0275reference(4);e.\u0275\u0275property("ngIf","panel"!=ie.pluginName||ie.locked)("ngIfElse",Pe),e.\u0275\u0275advance(7),e.\u0275\u0275property("disabled",ie.locked),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",ie.locked&&0!==ie.settings.length),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",!ie.preview),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",ie.preview)}},directives:function(){return[rr.lW,kn.Hw,jn.ib,jn.yz,Tn,Gn.VK,Gn.OP,n.NgIf,Nn.xw,Gn.p6,Nn.yH,jn.yK,n.NgTemplateOutlet,n.NgClass,nr.oO,ot,n.NgForOf]},pipes:function(){return[Rt.AttributePipe]},styles:[".editable-pane-wrapper[_ngcontent-%COMP%]{margin-bottom:.25em;border-radius:4px;padding-left:.25em;box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f}.nested-panel-wrapper[_ngcontent-%COMP%]{margin-bottom:.25em}.inner-pane-wrapper[_ngcontent-%COMP%]{padding:0}.pane-header[_ngcontent-%COMP%]{background-color:#ccc;padding:0}.mat-menu-trigger[_ngcontent-%COMP%]{min-width:0;padding:0;margin:0}button.delete[_ngcontent-%COMP%]{float:right}.preview-area[_ngcontent-%COMP%]{display:none;position:relative}.preview-area.visible[_ngcontent-%COMP%]{display:block;height:300px;overflow-y:scroll;border:1px solid black;padding:.5em}.panel-name[_ngcontent-%COMP%]{float:right;padding-right:.5em}.pane-menu-trigger-wrapper[_ngcontent-%COMP%]{display:flex}.mat-expansion-panel[_ngcontent-%COMP%]{box-shadow:none}.mat-expansion-panel-header[_ngcontent-%COMP%]{padding:0 1em 0 .25em}"]}),te})(),Tn=(()=>{class te{constructor(A,ie,Pe,nt,Dt,Wt,mn,Pn,br,Br,Cr,Gr,Lr,di){this.siteName=A,this.cpm=ie,this.spm=Pe,this.lpm=nt,this.cxtm=Dt,this.fb=Wt,this.bs=mn,this.dialog=Pn,this.panelHandler=br,this.tokenizerService=Br,this.componentFactoryResolver=Cr,this.pageBuilderFacade=Gr,this.paneStateContextResolver=Lr,this.panelsContextService=di,this.submitted=new e.EventEmitter,this.nestedUpdate=new e.EventEmitter,this.delete=new e.EventEmitter,this.rules=new e.EventEmitter,this.props=new e.EventEmitter,this.savable=!0,this.nested=!1,this.locked=!1,this.pageBuilder=!1,this.contexts=[],this.contentAdded=new We.x,this.contentAdddedSub=this.contentAdded.subscribe(([Xr,Si])=>{this.resolvePaneContexts(Xr,Si)}),this.dashboard=[],this.pageProperties=new Ht.Ik,this.persistence=new Jn.DB,this.layoutSetting=new Ht.yw,this.rowSettings=[],this.ancestory$=new pt.X([]),this.onTouched=()=>{},this.contentForm=this.fb.group({name:this.fb.control(""),title:this.fb.control(""),layoutType:this.fb.control("split",x.kI.required),displayType:this.fb.control("page",x.kI.required),panels:this.fb.array([])}),this.options={gridType:mi.tQ.Fit,displayGrid:mi.KY.Always,pushItems:!0,draggable:{enabled:!0},resizable:{enabled:!0},mobileBreakpoint:0,itemChangeCallback:(Xr,Si)=>{},itemInitCallback:(Xr,Si)=>{if(this.nested&&0!==Xr.y){const Zi=this.gridLayout.grid.findIndex($o=>$o.x===Xr.x&&$o.y===Xr.y&&$o.cols===Xr.cols&&$o.rows===Xr.rows);0===this.panelPanes(Zi).length&&this.gridLayout.setItemContentHeight(Zi,200)}}},this.ancestorySub=this.ancestory$.pipe((0,oe.h)(()=>!!this.layoutEditorRef)).subscribe(Xr=>{this.layoutEditorRef.instance.ancestory=Xr})}set ancestory(A){this.ancestory$.next(A)}get ancestory(){return this.ancestory$.value}get panels(){return this.contentForm.get("panels")}get layoutType(){return this.contentForm.get("layoutType")}get displayType(){return this.contentForm.get("displayType")}get columnSettings(){const A=this.panels.length;let ie=[];for(let Pe=0;Pe<A;Pe++)ie=[...ie,new Ht.yw(this.panels.at(Pe).get("columnSetting").value)];return ie}ngOnInit(){this.contentForm.valueChanges.pipe((0,oe.h)(()=>this.nested),(0,O.b)(500)).subscribe(()=>{this.nestedUpdate.emit(this.packageFormData())}),this.contentForm.get("layoutType").valueChanges.pipe((0,oe.h)(A=>"gridless"===A),(0,I.g)(1)).subscribe(A=>{0===this.panels.length&&this.panels.push(this.fb.group({name:new x.NI(""),label:new x.NI(""),stylePlugin:new x.NI(""),styleTitle:new x.NI(""),settings:new x.Oe([]),panes:this.fb.array([]),columnSetting:this.fb.group({settings:this.fb.array([])})}))}),this.contentForm.valueChanges.pipe((0,oe.h)(()=>!this.nested),(0,O.b)(500)).subscribe(()=>{const A=this.packageFormData();this.pageBuilderFacade.setPage(A)})}ngAfterViewInit(){this.layoutType.valueChanges.pipe((0,oe.h)(()=>!!this.layoutEditorHost)).subscribe(A=>{this.renderEditorLayout(A)}),this.layoutType.value&&this.renderEditorLayout(this.layoutType.value)}ngAfterContentInit(){setTimeout(()=>{this.panelPage||this.contentForm.get("layoutType").setValue("split")},1e3)}ngOnChanges(A){A.panelPage&&A.panelPage.previousValue!==A.panelPage.currentValue&&(this.panels.clear(),this.panelPageId=A.panelPage.currentValue.panelPageId,this.dashboard=A.panelPage.currentValue.gridItems.map(ie=>Object.assign({},ie)),this.layoutType.setValue(A.panelPage.currentValue.layoutType),this.layoutSetting=new Ht.yw(A.panelPage.currentValue.layoutSetting),this.rowSettings=A.panelPage.currentValue.rowSettings?A.panelPage.currentValue.rowSettings.map(ie=>new Ht.yw(ie)):[],this.persistence=A.panelPage.currentValue.persistence?new Jn.DB(A.panelPage.currentValue.persistence):new Jn.DB,this.nested?(this.pageProperties=new Ht.Ik({name:A.panelPage.currentValue.name,title:A.panelPage.currentValue.title,path:"",readUserIds:[],cssFile:""}),this.contentForm.get("name").setValue(A.panelPage.currentValue.name),this.contentForm.get("title").setValue(A.panelPage.currentValue.title)):(this.pageProperties=new Ht.Ik({name:A.panelPage.currentValue.name,title:A.panelPage.currentValue.title,path:A.panelPage.currentValue.path,readUserIds:A.panelPage.currentValue.entityPermissions.readUserIds,cssFile:A.panelPage.currentValue.cssFile}),this.contexts=A.panelPage.currentValue.contexts),A.panelPage.currentValue.panels.forEach((ie,Pe)=>{this.panels.push(this.fb.group({name:new x.NI(ie.name),label:new x.NI(ie.label),stylePlugin:new x.NI(ie.stylePlugin),styleTitle:new x.NI(""),settings:this.fb.array(void 0!==ie.settings?ie.settings.map(nt=>this.convertToGroup(nt)):[]),panes:this.fb.array([]),columnSetting:this.fb.group({settings:this.fb.array(ie.columnSetting?ie.columnSetting.settings.map(nt=>this.convertToGroup(nt)):[])})})),ie.stylePlugin&&""!==ie.stylePlugin&&this.spm.getPlugin(ie.stylePlugin).subscribe(nt=>{this.panels.at(Pe).get("styleTitle").setValue(nt.title)}),this.nested&&this.panelPanes(this.panels.length-1).valueChanges.pipe((0,O.b)(5),(0,I.g)(1)).subscribe((nt=>()=>{if(void 0!==this.gridLayout){const Dt=this.paneContainers.find((Wt,mn)=>mn===nt);this.gridLayout.setItemContentHeight(nt,Dt.nativeElement.offsetHeight)}})(this.panels.length-1)),ie.panes.forEach((nt,Dt)=>{this.panels.at(Pe).get("panes").push(this.fb.group({contentPlugin:nt.contentPlugin,name:new x.NI(nt.name),label:new x.NI(nt.label),locked:new x.NI(nt.locked),linkedPageId:new x.NI(nt.linkedPageId),rule:new x.NI(nt.rule&&null!==nt.rule?{...nt.rule,rules:nt.rule.rules&&Array.isArray(nt.rule.rules)?nt.rule.rules:[]}:{condition:"",rules:[]}),settings:new x.Oe(nt.settings.map(Wt=>this.convertToGroup(Wt)))})),setTimeout(()=>this.resolvePaneContexts(Pe,Dt))})}),this.layoutEditorRef&&(this.layoutEditorRef.instance.layoutSetting=this.layoutSetting,this.layoutEditorRef.instance.rowSettings=this.rowSettings,this.layoutEditorRef.instance.columnSettings=this.columnSettings))}addContent(A){console.log(this.panels.at(A)),this.pageBuilderFacade.getPage$.pipe((0,tt.w)(ie=>this.panelsContextService.allActivePageContexts({panelPage:ie})),(0,ce.q)(1)).subscribe(ie=>{this.bs.open(Oa,{data:{panelForm:this.panels.at(A),panelIndex:A,contexts:[...this.rootContext?[this.rootContext]:[],...this.contexts,...ie]}})})}editPanelProps(A){const ie=this.panels.at(A).get("name"),Pe=this.panels.at(A).get("label");this.dialog.open(ae,{data:{props:new Ht.hT({name:ie.value,label:Pe.value})}}).afterClosed().subscribe(nt=>{nt&&(ie.setValue(nt.name),Pe.setValue(nt.label))})}editPaneProps(A,ie){const Pe=this.panelPane(A,ie).get("name"),nt=this.panelPane(A,ie).get("label");this.dialog.open(Ae,{data:{props:new Ht.RD({name:Pe.value,label:nt.value})}}).afterClosed().subscribe(Dt=>{Dt&&(Pe.setValue(Dt.name),nt.setValue(Dt.label))})}applyStyle(A){this.bs.open(ml,{data:{panelForm:this.panels.controls[A],panelIndex:A,contexts:this.contexts}})}removeStyle(A){this.panels.controls[A].get("stylePlugin").setValue(""),this.panels.controls[A].get("styleTitle").setValue("")}onItemAdded(){console.log("item added"),this.panels.push(this.fb.group({name:new x.NI(""),label:new x.NI(""),stylePlugin:new x.NI(""),styleTitle:new x.NI(""),settings:new x.Oe([]),panes:this.fb.array([]),columnSetting:this.fb.group({settings:this.fb.array([])})})),this.nested&&void 0!==this.gridLayout&&setTimeout(()=>{this.paneContainers.forEach((A,ie)=>{this.gridLayout.setItemContentHeight(ie,A.nativeElement.offsetHeight)})}),this.panelPanes(this.panels.length-1).valueChanges.pipe((0,oe.h)(()=>this.nested&&void 0!==this.gridLayout),(0,O.b)(5),(0,I.g)(1)).subscribe((A=>()=>{const ie=this.paneContainers.find((Pe,nt)=>nt===A);this.gridLayout.setItemContentHeight(A,ie.nativeElement.offsetHeight)})(this.panels.length-1)),this.layoutEditorRef&&(this.layoutEditorRef.instance.columnSettings=this.columnSettings)}onItemRemoved(A){this.panels.removeAt(A),this.nested&&void 0!==this.gridLayout&&setTimeout(()=>{this.paneContainers.forEach((ie,Pe)=>{this.gridLayout.setItemContentHeight(Pe,ie.nativeElement.offsetHeight)})}),this.layoutEditorRef&&(this.layoutEditorRef.instance.columnSettings=this.columnSettings)}onDrop(A){console.log(A);const ie=+A.container.data,Pe=+A.previousContainer.data;if(ie===Pe){const nt=A.currentIndex>A.previousIndex?1:-1,Dt=A.previousIndex,Wt=A.currentIndex,mn=this.panelPanes(ie).at(Dt);for(let Pn=Dt;Pn*nt<Wt*nt;Pn+=nt){const br=this.panelPanes(ie).at(Pn+nt);this.panelPanes(ie).setControl(Pn,br)}this.panelPanes(ie).setControl(Wt,mn)}else{const nt=this.panelPanes(Pe).at(A.previousIndex);this.panelPanes(Pe).removeAt(A.previousIndex),this.panelPanes(ie).insert(A.currentIndex,nt)}}onOverrideRenderer(A,ie){const Pe=new Ht.X6(this.panelPane(A,ie).value);this.dialog.open(hl,{data:{panelFormGroup:this.panels.at(A),paneIndex:ie,pane:Pe}})}onRemoveOverrideRenderer(A,ie){const Pe=this.panelPane(A,ie).get("settings");let nt;Pe.controls.forEach((Dt,Wt)=>{"_renderer"===Dt.get("name").value&&(nt=Wt)}),void 0!==nt&&Pe.removeAt(nt)}onNestedUpdate(A,ie,Pe){const nt=this.panelHandler.buildSettings(A),Dt=this.panelPane(ie,Pe).get("settings");Dt.clear(),nt.forEach(Wt=>Dt.push(this.convertToGroup(Wt)))}onPaneHeightChange(A){if(this.nested&&this.gridLayout){const ie=this.paneContainers.find((Pe,nt)=>nt===A);this.gridLayout.setItemContentHeight(A,ie.nativeElement.offsetHeight)}}onDeleteClick(){this.delete.emit()}onRulesClick(){this.rules.emit()}onPropertiesClick(){this.props.emit(),this.dialog.open(Uo,{data:{props:this.pageProperties}}).afterClosed().subscribe(A=>{A&&(this.pageProperties=new Ht.Ik({...A}),this.contentForm.get("name").setValue(A.name),this.contentForm.get("title").setValue(A.title))})}onRulesPane(A,ie){const Pe=new Ht.X6(this.panelPane(A,ie).value),nt=""!==this.panelPane(A,ie).get("rule").value?this.panelPane(A,ie).get("rule").value:void 0,[Dt]=this.editablePanes.filter((Wt,mn)=>Wt.name===Pe.name);this.pageBuilderFacade.getPage$.pipe((0,At.b)(()=>{this.pageBuilderFacade.setSelectionPath([...this.ancestory,A,ie])}),(0,tt.w)(Wt=>this.panelsContextService.allActivePageContexts({panelPage:Wt})),(0,tt.w)(Wt=>this.dialog.open(is,{data:{rule:nt,contexts:[...Dt.rootContext?[Dt.rootContext]:this.rootContext?[this.rootContext]:[],...this.contexts,...Wt]}}).afterClosed()),(0,ce.q)(1)).subscribe(Wt=>{this.panelPane(A,ie).get("rule").setValue(Wt||nt||void 0)})}onDeletePane(A,ie){console.log(`delete nested pane: ${A} | ${ie}`)}onAddContextClick(){const A=this.packageFormData();this.pageBuilderFacade.setPage(A),this.dialog.open(Ma,{data:{}}).afterClosed().subscribe(ie=>{ie&&(this.contexts=[...this.contexts,ie])})}onEditContext(A){const ie=this.contexts.find(Pe=>Pe.name===A);if(console.log(ie),ie){const Pe=this.packageFormData();this.pageBuilderFacade.setPage(Pe),this.dialog.open(Ma,{data:{context:ie}}).afterClosed().subscribe(nt=>{nt&&(this.contexts=this.contexts.map(Dt=>Dt.name===A?new Kn.Js(nt):Dt))})}}onLayoutSettingChange(A){this.layoutSetting=new Ht.yw(A),this.nested&&this.nestedUpdate.emit(this.packageFormData()),this.layoutEditorRef&&(this.layoutEditorRef.instance.layoutSetting=this.layoutSetting)}onRowSettingsChange(A){this.rowSettings=A.map(ie=>new Ht.yw(ie)),this.nested&&this.nestedUpdate.emit(this.packageFormData()),this.layoutEditorRef&&(this.layoutEditorRef.instance.rowSettings=this.rowSettings)}onColumnSettingsChange(A){const ie=this.panels.length;for(let Pe=0;Pe<ie;Pe++){this.panels.at(Pe).get("columnSetting").get("settings").clear();for(let nt=0;nt<A[Pe].settings.length;nt++)this.panels.at(Pe).get("columnSetting").get("settings").push(this.convertToGroup(A[Pe].settings[nt]))}this.nested&&this.nestedUpdate.emit(this.packageFormData()),this.layoutEditorRef&&(this.layoutEditorRef.instance.columnSettings=this.columnSettings)}submit(){this.submitted.emit(this.packageFormData())}packageFormData(){const ie=new Ht.Z8({id:this.panelPageId,title:this.pageProperties.title,name:this.pageProperties.name,site:this.siteName,path:this.pageProperties.path,cssFile:this.pageProperties.cssFile,displayType:this.displayType.value,layoutType:this.layoutType.value,gridItems:this.layoutEditorRef.instance.gridItems,contexts:this.contexts,panels:this.panels.value,layoutSetting:new Ht.yw(this.layoutSetting),rowSettings:this.rowSettings.map(Pe=>new Ht.yw(Pe)),persistence:this.persistence,entityPermissions:{readUserIds:this.pageProperties.readUserIds,writeUserIds:[],deleteUserIds:[]}});return console.log(ie),ie}syncNestedPanelPages(){console.log("sync nested"),this.editablePanes.forEach(A=>{if(void 0!==A.contentEditor){const ie=this.panelHandler.buildSettings(A.contentEditor.packageFormData()),Pe=this.panelPane(A.panelIndex,A.paneIndex).get("settings");Pe.clear(),ie.forEach(nt=>Pe.push(this.convertToGroup(nt)))}})}resolvePaneContexts(A,ie){const Pe=new Ht.X6(this.panelPane(A,ie).value),nt=this.panelPanes(A).controls;this.cpm.getPlugin(Pe.contentPlugin).pipe((0,oe.h)(Dt=>void 0!==Dt.handler&&Dt.handler.isDynamic(Pe.settings)),(0,tt.w)(Dt=>Dt.handler.fetchDynamicData(Pe.settings,new Map([["tag",vn.Z()],["contexts",[...this.contexts]]])).pipe((0,St.U)(Wt=>new Kn.Js({name:"_root",adaptor:"data",data:0!==Wt.length?Wt.results[0]:{}})),(0,tt.w)(Wt=>Dt.handler.getBindings(Pe.settings,"pane").pipe((0,St.U)(mn=>[Wt,mn.map(Pn=>nt.findIndex(br=>new Ht.X6(br.value).name===Pn.id))])))))).subscribe(([Dt,Wt])=>{this.editablePanes.forEach((mn,Pn)=>{Wt.findIndex(br=>br===Pn)>-1&&(mn.rootContext=Dt)})})}onPersistenceClick(){this.dialog.open(Jn.AZ,{data:{persistence:this.persistence,contexts:this.contexts}}).afterClosed().subscribe(A=>{console.log("persistence closed",A),this.persistence=A||this.persistence})}panelPanes(A){return this.panels.at(A).get("panes")}panelPane(A,ie){return this.panelPanes(A).at(ie)}panelPanePlugin(A,ie){return this.panelPane(A,ie).get("contentPlugin").value}panelPaneSettings(A,ie){return this.panelPane(A,ie).get("settings").value}panelPaneName(A,ie){return this.panelPane(A,ie).get("name").value}panelPaneLabel(A,ie){return this.panelPane(A,ie).get("label").value}panelPaneLocked(A,ie){if(this.locked)return this.locked;const Pe=this.panelPane(A,ie).get("locked");return null!==Pe&&Pe.value}panelPaneIsNested(A,ie){return"panel"===this.panelPanePlugin(A,ie)}panelPanePanelPage(A,ie){let Pe;return this.panelHandler.toObject(this.panelPaneSettings(A,ie)).subscribe(nt=>{Pe=nt}),Pe}hasPanelStyle(A){return void 0!==this.panels.at(A).get("stylePlugin").value&&""!==this.panels.at(A).get("stylePlugin").value}panelStyleTitle(A){return this.panels.at(A).get("styleTitle").value}onPaneEdit(A,ie){const Pe=new Ht.X6(this.panelPane(A,ie).value),nt=this.panelPanePlugin(A,ie),[Dt]=this.editablePanes.filter((Wt,mn)=>Wt.name===Pe.name);this.cpm.getPlugin(nt).pipe((0,oe.h)(Wt=>void 0!==Wt.editorComponent),(0,tt.w)(Wt=>this.pageBuilderFacade.getPage$.pipe((0,tt.w)(mn=>this.panelsContextService.allActivePageContexts({panelPage:mn}).pipe((0,St.U)(Pn=>[Wt,Pn]),(0,ce.q)(1))),(0,ce.q)(1))),(0,tt.w)(([Wt,mn])=>Wt.handler?Wt.handler.editorOptions(Pe.settings).pipe((0,St.U)(Pn=>[Wt,mn,Pn])):(0,Ce.of)([Wt,mn,new $n.ContentPluginEditorOptions]))).subscribe(([Wt,mn,Pn])=>{this.dialog.open(Wt.editorComponent,{data:{panelFormGroup:this.panels.at(A),panelIndex:A,paneIndex:ie,contexts:[...Dt.rootContext?[Dt.rootContext]:this.rootContext?[this.rootContext]:[],...this.contexts,...mn],contentAdded:this.contentAdded,pane:Pe},...Pn.fullscreen?{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%"}:{}}).afterClosed().subscribe(()=>{this.resolvePaneContexts(A,ie)})})}onPaneDelete(A,ie){this.panelPanes(A).removeAt(ie)}onFileChange(A,ie){const Pe=A.addedFiles[0];this.cpm.getPlugins().pipe((0,St.U)(nt=>Array.from(nt.values()).filter(Dt=>void 0!==Dt.handler).find(Dt=>Dt.handler.handlesType(Pe.type))),(0,oe.h)(nt=>void 0!==nt)).subscribe(nt=>{nt.handler.handleFile(Pe).subscribe(Dt=>{this.panelPanes(ie).push(this.fb.group({contentPlugin:nt.id,name:new x.NI(""),label:new x.NI(""),settings:this.fb.array(Dt.map(Wt=>this.fb.group({name:new x.NI(Wt.name,x.kI.required),type:new x.NI(Wt.type,x.kI.required),displayName:new x.NI(Wt.displayName,x.kI.required),value:new x.NI(Wt.value,x.kI.required),computedValue:new x.NI(Wt.value,x.kI.required)})))}))})})}writeValue(A){A&&this.contentForm.setValue(A,{emitEvent:!1})}registerOnChange(A){this.contentForm.valueChanges.subscribe(A)}registerOnTouched(A){this.onTouched=A}setDisabledState(A){A?this.contentForm.disable():this.contentForm.enable()}validate(A){return this.contentForm.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}}convertToGroup(A){const ie=this.fb.group({name:new x.NI(A.name,x.kI.required),type:new x.NI(A.type,x.kI.required),displayName:new x.NI(A.displayName,x.kI.required),value:new x.NI(A.value,x.kI.required),computedValue:new x.NI(A.value,x.kI.required),attributes:new x.Oe([])});return A.attributes&&A.attributes.length>0&&A.attributes.forEach(Pe=>{ie.get("attributes").push(this.convertToGroup(Pe))}),ie}renderEditorLayout(A){console.log(`render editor layout ${A}`),this.lpm.getPlugin(A).subscribe(ie=>{const Pe=this.componentFactoryResolver.resolveComponentFactory(ie.editor),nt=this.layoutEditorHost.viewContainerRef;nt.clear(),this.layoutEditorRef=nt.createComponent(Pe),this.layoutEditorRef.instance.savable=this.savable,this.layoutEditorRef.instance.nested=this.nested,this.layoutEditorRef.instance.ancestory=this.ancestory,this.layoutEditorRef.instance.editor=this,this.layoutEditorRef.instance.extraActionsAreaTmpl=this.extraActionsAreaTmpl,this.layoutEditorRef.instance.contextsMenuTpl=this.contextsMenuTpl,this.layoutEditorRef.instance.editablePaneTpl=this.editablePaneTpl,this.layoutEditorRef.instance.dashboard=this.dashboard,this.layoutEditorRef.instance.layoutSetting=this.layoutSetting,this.layoutEditorRef.instance.rowSettings=this.rowSettings,this.layoutEditorRef.instance.columnSettings=this.columnSettings})}updateEditorLayoutVars(){this.layoutEditorRef.instance.savable=this.savable,this.layoutEditorRef.instance.nested=this.nested,this.layoutEditorRef.instance.ancestory=this.ancestory,this.layoutEditorRef.instance.editor=this,this.layoutEditorRef.instance.extraActionsAreaTmpl=this.extraActionsAreaTmpl,this.layoutEditorRef.instance.contextsMenuTpl=this.contextsMenuTpl,this.layoutEditorRef.instance.editablePaneTpl=this.editablePaneTpl,this.layoutEditorRef.instance.dashboard=this.dashboard,this.layoutEditorRef.instance.layoutSetting=this.layoutSetting,this.layoutEditorRef.instance.rowSettings=this.rowSettings,this.layoutEditorRef.instance.columnSettings=this.columnSettings}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(Nr.SITE_NAME),e.\u0275\u0275directiveInject($n.ContentPluginManager),e.\u0275\u0275directiveInject(Ht.er),e.\u0275\u0275directiveInject(wn.s5),e.\u0275\u0275directiveInject(Kn.UV),e.\u0275\u0275directiveInject(x.qu),e.\u0275\u0275directiveInject($r.ch),e.\u0275\u0275directiveInject(T.uw),e.\u0275\u0275directiveInject(Ht.iE),e.\u0275\u0275directiveInject(kr.G),e.\u0275\u0275directiveInject(e.ComponentFactoryResolver),e.\u0275\u0275directiveInject(Ht.QK),e.\u0275\u0275directiveInject(Gt),e.\u0275\u0275directiveInject(Ht.WX))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["classifieds-ui-content-editor"]],contentQueries:function(A,ie,Pe){if(1&A&&e.\u0275\u0275contentQuery(Pe,il,5),2&A){let nt;e.\u0275\u0275queryRefresh(nt=e.\u0275\u0275loadQuery())&&(ie.extraActionsAreaTmpl=nt.first)}},viewQuery:function(A,ie){if(1&A&&(e.\u0275\u0275viewQuery(wn.$Z,5),e.\u0275\u0275viewQuery(wn.Yj,5),e.\u0275\u0275viewQuery(Ne,5),e.\u0275\u0275viewQuery(No,7),e.\u0275\u0275viewQuery(xa,7),e.\u0275\u0275viewQuery(Xs,5),e.\u0275\u0275viewQuery(Kt,5)),2&A){let Pe;e.\u0275\u0275queryRefresh(Pe=e.\u0275\u0275loadQuery())&&(ie.gridLayout=Pe.first),e.\u0275\u0275queryRefresh(Pe=e.\u0275\u0275loadQuery())&&(ie.splitLayout=Pe.first),e.\u0275\u0275queryRefresh(Pe=e.\u0275\u0275loadQuery())&&(ie.layoutEditorHost=Pe.first),e.\u0275\u0275queryRefresh(Pe=e.\u0275\u0275loadQuery())&&(ie.contextsMenuTpl=Pe.first),e.\u0275\u0275queryRefresh(Pe=e.\u0275\u0275loadQuery())&&(ie.editablePaneTpl=Pe.first),e.\u0275\u0275queryRefresh(Pe=e.\u0275\u0275loadQuery())&&(ie.paneContainers=Pe),e.\u0275\u0275queryRefresh(Pe=e.\u0275\u0275loadQuery())&&(ie.editablePanes=Pe)}},inputs:{panelPage:"panelPage",savable:"savable",nested:"nested",locked:"locked",pageBuilder:"pageBuilder",contexts:"contexts",rootContext:"rootContext",ancestory:"ancestory"},outputs:{submitted:"submitted",nestedUpdate:"nestedUpdate",delete:"delete",rules:"rules",props:"props"},features:[e.\u0275\u0275ProvidersFeature([{provide:x.JU,useExisting:(0,e.forwardRef)(()=>te),multi:!0},{provide:x.Cf,useExisting:(0,e.forwardRef)(()=>te),multi:!0}]),e.\u0275\u0275NgOnChangesFeature],decls:12,vars:3,consts:[["class","content-editor-wrapper",3,"formGroup","ngClass","ngSubmit",4,"ngIf","ngIfElse"],["nestedTpl",""],["editablePaneTpl",""],["contextsMenuTpl",""],["contextMenu","matMenu"],["type","button","mat-menu-item","",3,"click"],["type","button","mat-menu-item","",3,"click",4,"ngFor","ngForOf"],[1,"content-editor-wrapper",3,"formGroup","ngClass","ngSubmit"],["classifiedsUiLayoutEditorHost",""],[1,"content-editor-wrapper",3,"formGroup","ngClass"],[1,"editable-pane",3,"panelIndex","paneIndex","name","label","locked","contexts","pluginName","settings","ancestory","delete","rules","nestedUpdate","rendererOverride","removeRendererOverride","edit","props"],["class","custom-placeholder",4,"cdkDragPlaceholder"],[1,"custom-placeholder"],["type","button","mat-menu-item","",1,"context-button",3,"matMenuTriggerFor"]],template:function(A,ie){if(1&A&&(e.\u0275\u0275template(0,jr,3,4,"form",0),e.\u0275\u0275template(1,Rr,3,4,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(3,wo,2,9,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(5,Kr,2,1,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(7,"mat-menu",null,4),e.\u0275\u0275elementStart(9,"button",5),e.\u0275\u0275listener("click",function(){return ie.onAddContextClick()}),e.\u0275\u0275text(10,"define variable"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,go,2,1,"button",6),e.\u0275\u0275elementEnd()),2&A){const Pe=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",!ie.nested&&!ie.pageBuilder)("ngIfElse",Pe),e.\u0275\u0275advance(11),e.\u0275\u0275property("ngForOf",ie.contexts)}},directives:[Kt,Gn.OP,Gn.VK,n.NgIf,x._Y,x.JL,x.sg,n.NgClass,nr.oO,Ne,Ze.Hk,Gn.p6,n.NgForOf],styles:[".content-editor-wrapper[_ngcontent-%COMP%]{height:100%}.panel-inner[_ngcontent-%COMP%]{padding:1em}.content-editor-wrapper[_ngcontent-%COMP%]     ngx-dropzone{height:100%;display:block;padding:0;border:none}.content-editor-wrapper.nested[_ngcontent-%COMP%]     .grid-item-header{border-bottom:1px solid white}.layout-type[_ngcontent-%COMP%], .display-type[_ngcontent-%COMP%]{float:right}.layout-type[_ngcontent-%COMP%]     .mat-form-field-wrapper, .display-type[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:1.5em}.layout-type[_ngcontent-%COMP%]     .mat-form-field-label-wrapper, .display-type[_ngcontent-%COMP%]     .mat-form-field-label-wrapper{display:none}.layout-type[_ngcontent-%COMP%]     .mat-form-field-infix, .display-type[_ngcontent-%COMP%]     .mat-form-field-infix{border-top:none;padding:0;margin:0}.layout-type[_ngcontent-%COMP%]     .mat-form-field, .display-type[_ngcontent-%COMP%]     .mat-form-field{width:85px}.layout-type[_ngcontent-%COMP%]     .mat-select-value, .display-type[_ngcontent-%COMP%]     .mat-select-value{text-align:right}.layout-type[_ngcontent-%COMP%]     .mat-form-field-underline, .display-type[_ngcontent-%COMP%]     .mat-form-field-underline{display:none}classifieds-ui-gridless-layout[_ngcontent-%COMP%]     .main-controls{background-color:#ccc}classifieds-ui-gridless-layout[_ngcontent-%COMP%]     .layout-inner{background-color:#ccc;padding:.75em}classifieds-ui-gridless-layout[_ngcontent-%COMP%]     .editable-pane-wrapper{border:none;margin-bottom:0}classifieds-ui-gridless-layout[_ngcontent-%COMP%]     .pane-header{background-color:#fff}classifieds-ui-gridless-layout[_ngcontent-%COMP%]     .nested-panel-wrapper{padding:.75em;margin-bottom:0}.custom-placeholder[_ngcontent-%COMP%]{background:#ccc;border:dotted 3px #999;transition:transform .25s cubic-bezier(0,0,.2,1)}.context-button[_ngcontent-%COMP%]{font-style:italic;font-family:serif;font-weight:bolder;font-size:medium}"]}),te})(),hn=(()=>{class te{constructor(A,ie,Pe){this.data=A,this.fb=ie,this.handler=Pe}ngOnInit(){void 0!==this.data.pane&&this.handler.toObject(this.data.pane.settings).subscribe(A=>{this.snippet=A})}onSubmit(A){if(void 0===this.data.paneIndex)this.data.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:"snippet",name:new x.NI(""),label:new x.NI(""),rule:new x.NI(""),settings:new x.Oe(this.buildSettings(A))}));else{const ie=this.data.panelFormGroup.get("panes").at(this.data.paneIndex);ie.get("settings").clear(),this.buildSettings(A).forEach(Pe=>{ie.get("settings").push(Pe)})}}buildSettings(A){return[this.fb.group({name:new x.NI("contentType",x.kI.required),type:new x.NI(Rt.AttributeTypes.Text,x.kI.required),displayName:new x.NI("Content Type",x.kI.required),value:new x.NI(A.contentType,x.kI.required),computedValue:new x.NI(A.contentType,x.kI.required)}),this.fb.group({name:new x.NI("content",x.kI.required),type:new x.NI(Rt.AttributeTypes.Text,x.kI.required),displayName:new x.NI("Content",x.kI.required),value:new x.NI(A.content,x.kI.required),computedValue:new x.NI(A.content,x.kI.required)}),this.fb.group({name:new x.NI("jsScript",x.kI.required),type:new x.NI(Rt.AttributeTypes.Text,x.kI.required),displayName:new x.NI("jsScript",x.kI.required),value:new x.NI(A.jsScript),computedValue:new x.NI(A.jsScript)})]}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(T.WI),e.\u0275\u0275directiveInject(x.qu),e.\u0275\u0275directiveInject(yo))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["classifieds-ui-snippet-editor2"]],decls:1,vars:1,consts:[[3,"snippet","submitted"]],template:function(A,ie){1&A&&(e.\u0275\u0275elementStart(0,"classifieds-ui-snippet-form",0),e.\u0275\u0275listener("submitted",function(nt){return ie.onSubmit(nt)}),e.\u0275\u0275elementEnd()),2&A&&e.\u0275\u0275property("snippet",ie.snippet)},directives:[On.l8],styles:[""]}),te})(),Fn=(()=>{class te{constructor(A,ie,Pe,nt,Dt,Wt,mn){this.route=A,this.pageBuilderFacade=ie,this.routerStore=Pe,this.asyncApiCallHelperSvc=nt,this.crudDataHelperService=Dt,this.entityDefinitionService=Wt,this.paramMapSub=this.route.paramMap.pipe((0,At.b)(()=>console.log("param map panelPageId")),(0,St.U)(Pn=>Pn.get("panelPageId")),(0,oe.h)(Pn=>void 0!==Pn),(0,tt.w)(()=>this.route.data),(0,Te.M)(this.routerStore.pipe((0,bt.Ys)((0,jt.Ug)(Pn=>Pn.router).selectCurrentRoute),(0,St.U)(Pn=>Pn.params),(0,ce.q)(1))),(0,At.b)(([Pn,br])=>{console.log("route page"),this.pageBuilderFacade.setPageInfo(new Ht.Q8({id:Pn.panelPageListItem.id,realPath:"/pages/panelpage/"+Pn.panelPageListItem.id,path:Pn.panelPageListItem.path,args:br})),this.panelPageId=Pn.panelPageListItem.id})).subscribe(),this.panelPageService=mn.getEntityCollectionService("PanelPage")}ngOnInit(){const{selectCurrentRoute:A}=(0,jt.Ug)(ie=>ie.router);this.route.paramMap.pipe((0,At.b)(()=>console.log("param map page builder facade info")),(0,Te.M)(this.pageBuilderFacade.getPageInfo$),(0,oe.h)(([ie,Pe])=>void 0!==Pe&&void 0!==ie.get("panelPageId")&&ie.get("panelPageId")===Pe.id),(0,tt.w)(([ie,Pe])=>this.routerStore.pipe((0,bt.Ys)(A),(0,St.U)(nt=>[Pe,nt.params]),(0,ce.q)(1)))).subscribe(([ie,Pe])=>{this.pageBuilderFacade.setPageInfo(new Ht.Q8({...ie,args:Pe}))})}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(y.ActivatedRoute),e.\u0275\u0275directiveInject(Ht.QK),e.\u0275\u0275directiveInject(bt.yh),e.\u0275\u0275directiveInject(Nr.AsyncApiCallHelperService),e.\u0275\u0275directiveInject(Jt.f0),e.\u0275\u0275directiveInject(_t.f0),e.\u0275\u0275directiveInject(_t.jn))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["classifieds-ui-panel-page-router"]],decls:1,vars:1,consts:[[3,"id"]],template:function(A,ie){1&A&&e.\u0275\u0275element(0,"classifieds-ui-panel-page",0),2&A&&e.\u0275\u0275property("id",ie.panelPageId)},directives:[en.hT],styles:[""]}),te})(),Zt=(()=>{class te{constructor(A){this.panelPageService=A.getEntityCollectionService("PanelPage"),this.panelPageListItemService=A.getEntityCollectionService("PanelPageListItem")}ngOnInit(){console.log("here")}onSubmit(A){console.log("create panel page",A),A.id=vn.Z(),this.panelPageService.add(A).subscribe(()=>{console.log("panel page created");const ie=new Ht.WP({...A});this.panelPageListItemService.add(ie).subscribe(()=>{console.log("panel page list item created")})})}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(_t.jn))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["classifieds-ui-create-panel-page"]],decls:1,vars:0,consts:[[3,"submitted"]],template:function(A,ie){1&A&&(e.\u0275\u0275elementStart(0,"classifieds-ui-content-editor",0),e.\u0275\u0275listener("submitted",function(nt){return ie.onSubmit(nt)}),e.\u0275\u0275elementEnd())},directives:[Tn],styles:[""]}),te})(),bi=(()=>{class te{constructor(A,ie,Pe,nt,Dt){this.route=A,this.pageBuilderFacade=ie,this.routerStore=Pe,this.moduleLoader=nt,this.panelPageService=Dt.getEntityCollectionService("PanelPage"),this.panelPageListItemService=Dt.getEntityCollectionService("PanelPageListItem")}ngOnInit(){this.route.paramMap.pipe((0,St.U)(A=>A.get("panelPageId")),(0,oe.h)(A=>void 0!==A),(0,at.x)(),(0,tt.w)(A=>this.panelPageService.getByKey(A)),(0,tt.w)(A=>A?(0,xt.D)(A.contexts.filter(ie=>"module"===ie.plugin).map(ie=>this.moduleLoader.loadModule(()=>(0,nn.V)({type:"module",remoteEntry:ie.data.remoteEntry,exposedModule:ie.data.exposedModule}).then(Pe=>Pe[ie.data.moduleName])))).pipe((0,I.g)(1),(0,St.U)(()=>A),(0,Tt.d)(A)):(0,Ce.of)(A)),(0,tt.w)(A=>this.routerStore.pipe((0,bt.Ys)((0,jt.Ug)(ie=>ie.router).selectCurrentRoute),(0,St.U)(ie=>[A,ie.params]),(0,ce.q)(1))),(0,At.b)(([A,ie])=>this.pageBuilderFacade.setPageInfo(new Ht.Q8({id:A.id,realPath:`/pages/panelpage/${A.id}`,path:A.path,args:ie})))).subscribe(([A])=>{console.log(A),this.panelPage=A})}onSubmit(A){console.log("submitted"),this.panelPageService.update(new Ht.Z8({...A,id:this.panelPage.id})).subscribe(()=>{alert("panel page updated");const ie=new Ht.WP({...A,id:this.panelPage.id});this.panelPageListItemService.update(ie).subscribe(()=>{console.log("panel page list item created")})})}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(y.ActivatedRoute),e.\u0275\u0275directiveInject(Ht.QK),e.\u0275\u0275directiveInject(bt.yh),e.\u0275\u0275directiveInject(Nr.ModuleLoaderService),e.\u0275\u0275directiveInject(_t.jn))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["classifieds-ui-edit-panel-page"]],decls:1,vars:1,consts:[[3,"panelPage","submitted"]],template:function(A,ie){1&A&&(e.\u0275\u0275elementStart(0,"classifieds-ui-content-editor",0),e.\u0275\u0275listener("submitted",function(nt){return ie.onSubmit(nt)}),e.\u0275\u0275elementEnd()),2&A&&e.\u0275\u0275property("panelPage",ie.panelPage)},directives:[Tn],styles:[""]}),te})(),ri=(()=>{class te{constructor(A,ie,Pe,nt,Dt,Wt){this.bottomSheetRef=A,this.handler=ie,this.fb=Pe,this.dialog=nt,this.cpm=Dt,this.wpm=Wt}ngOnInit(){this.attributeWidgets=this.wpm.getPlugins()}onItemSelect(A){console.log(A),this.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:"attribute",name:new x.NI(""),label:new x.NI(""),rule:new x.NI(""),settings:this.fb.array(this.handler.widgetSettings(A).map(Dt=>this.fb.group({name:new x.NI(Dt.name,x.kI.required),type:new x.NI(Dt.type,x.kI.required),displayName:new x.NI(Dt.displayName,x.kI.required),value:new x.NI(Dt.value,x.kI.required),computedValue:new x.NI(Dt.computedValue,x.kI.required)})))}));const ie=this.panelFormGroup.get("panes"),Pe=ie.length-1,nt=new Ht.X6(ie.at(Pe).value);this.cpm.getPlugin("attribute").subscribe(Dt=>{this.dialog.open(Dt.editorComponent,{data:{panelFormGroup:this.panelFormGroup,pane:nt,paneIndex:Pe}})}),this.bottomSheetRef.dismiss()}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject($r.oL),e.\u0275\u0275directiveInject(So),e.\u0275\u0275directiveInject(x.qu),e.\u0275\u0275directiveInject(T.uw),e.\u0275\u0275directiveInject($n.ContentPluginManager),e.\u0275\u0275directiveInject(Rt.WidgetPluginManager))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["classifieds-ui-attribute-selector"]],inputs:{panelFormGroup:"panelFormGroup"},decls:4,vars:5,consts:[["mat-list-item","","mat-list-item","",3,"click",4,"ngFor","ngForOf"],["mat-list-item","","mat-list-item","",3,"click"],["mat-line",""]],template:function(A,ie){1&A&&(e.\u0275\u0275elementStart(0,"mat-nav-list"),e.\u0275\u0275template(1,ws,3,1,"a",0),e.\u0275\u0275pipe(2,"keyvalue"),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275elementEnd()),2&A&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(2,1,e.\u0275\u0275pipeBind1(3,3,ie.attributeWidgets))))},directives:[Y.Hk,Y.Tg,n.NgForOf,J.X2],pipes:[n.KeyValuePipe,n.AsyncPipe],styles:[""]}),te})(),oo=(()=>{class te{constructor(A,ie,Pe,nt,Dt){this.data=A,this.dialogRef=Pe,this.fb=nt,this.handler=Dt,this.attributes=[],this.attributeValues=[],this.attributesFormGroup=this.fb.group({name:new x.NI(""),label:new x.NI(""),attributes:new x.NI("")});const Wt=this.data.pane.settings.find(mn=>"widget"===mn.name);this.widget=ie.find(mn=>mn.name===Wt.value)}get name(){return this.attributesFormGroup.get("name")}get label(){return this.attributesFormGroup.get("label")}ngOnInit(){const A=this.data.pane.settings.find(nt=>"value"===nt.name);this.attributes=[new Rt.Attribute({...this.widget.schema,widget:this.widget.name,label:"Value",name:"value"})];const ie=this.data.panelFormGroup.get("panes").at(this.data.paneIndex).get("name").value,Pe=this.data.panelFormGroup.get("panes").at(this.data.paneIndex).get("label").value;this.attributesFormGroup.get("name").setValue(ie),this.attributesFormGroup.get("label").setValue(Pe),void 0!==A?(this.attributeValues=this.handler.valueSettings(this.data.pane.settings),console.log(this.attributeValues)):this.attributeValues=[new Rt.AttributeValue({name:"value",type:this.widget.schema.type,displayName:"Value",value:"",computedValue:"",intValue:0,attributes:[]})]}submit(){const A=this.name.value,ie=this.label.value;this.data.panelFormGroup.get("panes").at(this.data.paneIndex).get("name").setValue(A),this.data.panelFormGroup.get("panes").at(this.data.paneIndex).get("label").setValue(ie);const Pe=new Ht.X6({name:A,label:ie,contentPlugin:"attribute",settings:""===this.attributesFormGroup.get("attributes").value?[]:this.attributesFormGroup.get("attributes").value});0!==Pe.settings.length?this.handler.rendererSnippet(this.data.pane.settings).subscribe(nt=>{const Dt=void 0!==nt?this.handler.rendererOverrideSettings(nt):[],Wt=this.data.panelFormGroup.get("panes").at(this.data.paneIndex).get("settings");Wt.clear(),[...this.handler.widgetSettings(this.widget),...Pe.settings,...Dt].forEach(mn=>Wt.push(this.convertToGroup(mn))),this.dialogRef.close()}):this.dialogRef.close()}convertToGroup(A){const ie=this.fb.group({name:new x.NI(A.name,x.kI.required),type:new x.NI(A.type,x.kI.required),displayName:new x.NI(A.displayName,x.kI.required),value:new x.NI(A.value,x.kI.required),computedValue:new x.NI(A.value,x.kI.required),attributes:new x.Oe([])});return A.attributes&&A.attributes.length>0&&A.attributes.forEach(Pe=>{ie.get("attributes").push(this.convertToGroup(Pe))}),ie}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(T.WI),e.\u0275\u0275directiveInject(Rt.ATTRIBUTE_WIDGET),e.\u0275\u0275directiveInject(T.so),e.\u0275\u0275directiveInject(x.qu),e.\u0275\u0275directiveInject(So))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["classifieds-ui-attribute-editor"]],decls:10,vars:3,consts:[[3,"formGroup","ngSubmit"],["fxLayout","column"],["matInput","","placeholder","Name","formControlName","name"],["matInput","","placeholder","Label","formControlName","label"],["formControlName","attributes",3,"attributes","attributeValues"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close",""]],template:function(A,ie){1&A&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("ngSubmit",function(){return ie.submit()}),e.\u0275\u0275elementStart(1,"mat-dialog-content",1),e.\u0275\u0275elementStart(2,"mat-form-field"),e.\u0275\u0275element(3,"input",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"mat-form-field"),e.\u0275\u0275element(5,"input",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(6,"classifieds-ui-attributes-builder",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"mat-dialog-actions"),e.\u0275\u0275elementStart(8,"button",5),e.\u0275\u0275text(9,"Save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&A&&(e.\u0275\u0275property("formGroup",ie.attributesFormGroup),e.\u0275\u0275advance(6),e.\u0275\u0275property("attributes",ie.attributes)("attributeValues",ie.attributeValues))},directives:[Ln.KE,Rt.AttributesBuilderComponent,rr.lW,x._Y,x.JL,x.sg,T.xY,Nn.xw,Mn.Nt,x.Fj,x.JJ,x.u,T.H8,T.ZT],styles:[""]}),te})(),qr=(()=>{class te{constructor(A,ie,Pe,nt,Dt){this.widgets=A,this.handler=ie,this.tokenizerService=Pe,this.fb=nt,this.controlContainer=Dt,this.settings=[],this.appearance="legacy",this.attributes=[]}ngOnInit(){this.attributes=[new Rt.Attribute({...this.widgets.find(A=>A.name===this.settings.find(ie=>"widget"===ie.name).value).schema,name:"value",label:"Value"})],this.attributeValues=this.handler.valueSettings(this.settings),this.tokens=this.tokenizerService.generateTokens(this.attributeValues),this.handler.rendererSnippet(this.settings).subscribe(A=>{this.rendererOverride=A,void 0!==A&&(this.rendererSettings=this.handler.rendererOverrideSettings(A)[0].attributes)})}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(Rt.ATTRIBUTE_WIDGET),e.\u0275\u0275directiveInject(So),e.\u0275\u0275directiveInject(kr.G),e.\u0275\u0275directiveInject(x.qu),e.\u0275\u0275directiveInject(x.gN,8))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["classifieds-ui-attribute-pane-renderer"]],inputs:{settings:"settings",appearance:"appearance",name:"name",label:"label",displayType:"displayType"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["overrideTpl",""],[4,"ngIf"],[3,"formGroup",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["settingsTmpl",""],[4,"ngFor","ngForOf"],[3,"formGroup"],["formControlName","settings",3,"attributes","attributeValues"],[3,"settings","tokens"]],template:function(A,ie){if(1&A&&(e.\u0275\u0275template(0,Es,3,2,"div",0),e.\u0275\u0275template(1,ji,1,2,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)),2&A){const Pe=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",!ie.rendererOverride)("ngIfElse",Pe)}},directives:[Rt.AttributesBuilderComponent,Ss,n.NgIf,n.NgTemplateOutlet,n.NgForOf,x.JL,x.sg,x.JJ,x.u],pipes:[Rt.AttributePipe],styles:[".override[_ngcontent-%COMP%]{position:absolute;top:.5em;right:.5em}"]}),te})(),ki=(()=>{class te{constructor(A,ie){this.filesService=A,this.attributeSerializer=ie,this.types=["image/png","image/jpg","image/jpeg","image/gif"]}handleFile(A){return this.filesService.bulkUpload({files:[A]}).pipe((0,St.U)(ie=>this.buildSettings(ie[0])))}handlesType(A){return void 0!==this.types.find(ie=>ie===A)}implementsRendererOverride(){return!1}hasRendererOverride(A){return(0,Ce.of)(!1)}isDynamic(A){return!1}isData(A){return!1}buildDynamicItems(A,ie){return(0,Ce.of)([])}fetchDynamicData(A,ie){return(0,Ce.of)(new bn.qz)}getBindings(A,ie,Pe){return(0,Ce.of)([])}toObject(A){return(0,Ce.of)(this.attributeSerializer.deserializeAsObject(A))}buildSettings(A){return A.fileName="placeholdername",this.attributeSerializer.serialize(A,"root").attributes}stateDefinition(A){return(0,Ce.of)({mediaLoading:"y",mediaLoaded:"n",loadError:"n",loadDuration:"y"})}editorOptions(A){return(0,Ce.of)(new $n.ContentPluginEditorOptions)}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275inject(Zn.nS),e.\u0275\u0275inject(Rt.AttributeSerializerService))},te.\u0275prov=e.\u0275\u0275defineInjectable({token:te,factory:te.\u0275fac}),te})(),Hi=(()=>{class te{constructor(A,ie,Pe,nt,Dt){this.data=A,this.dialogRef=ie,this.fb=Pe,this.filesService=nt,this.handler=Dt,this.mediaTypes=".png,.jpg,.jpeg,.gif"}ngOnInit(){void 0!==this.data.pane&&this.handler.toObject(this.data.pane.settings).pipe((0,tt.w)(A=>this.filesService.convertToFiles([A]))).subscribe(A=>{this.media=A[0]})}onSelectMedia(A){this.media=A.addedFiles[0],this.handler.handleFile(this.media).subscribe(ie=>{void 0===this.data.paneIndex&&this.data.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:"media",name:new x.NI(""),label:new x.NI(""),rule:new x.NI(""),settings:new x.Oe(ie.map(Pe=>this.fb.group({name:new x.NI(Pe.name,x.kI.required),type:new x.NI(Pe.type,x.kI.required),displayName:new x.NI(Pe.displayName,x.kI.required),value:new x.NI(Pe.value,x.kI.required),computedValue:new x.NI(Pe.value,x.kI.required)})))})),this.dialogRef.close()})}onRemoveMedia(A){this.media=void 0}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(T.WI),e.\u0275\u0275directiveInject(T.so),e.\u0275\u0275directiveInject(x.qu),e.\u0275\u0275directiveInject(Zn.nS),e.\u0275\u0275directiveInject(ki))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["classifieds-ui-media-editor"]],decls:4,vars:3,consts:[[3,"multiple","accept","change"],[3,"removable","file","removed",4,"ngIf"],[3,"removable","file","removed"]],template:function(A,ie){1&A&&(e.\u0275\u0275elementStart(0,"ngx-dropzone",0),e.\u0275\u0275listener("change",function(nt){return ie.onSelectMedia(nt)}),e.\u0275\u0275elementStart(1,"ngx-dropzone-label"),e.\u0275\u0275text(2,"Drag and Drop Media Here"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,sl,3,4,"ngx-dropzone-image-preview",1),e.\u0275\u0275elementEnd()),2&A&&(e.\u0275\u0275property("multiple",!1)("accept",ie.mediaTypes),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",ie.media))},directives:[p._f,p.sv,p.NP,n.NgIf],styles:[""]}),te})(),_i=(()=>{class te{constructor(A,ie,Pe,nt){this.mediaSettings=A,this.handler=ie,this.attributeSerializer=Pe,this.settings=[],this.ancestory=[],this.state={},this.stateChange=new e.EventEmitter,this.panelPageStateService=nt.getEntityCollectionService("PanelPageState")}ngOnInit(){console.log("media ancestory is"),console.log(this.ancestory),console.log("my state is:"),console.log(this.state),this.mediaBaseUrl=this.mediaSettings.imageUrl,this.handler.toObject(this.settings).subscribe(A=>{this.mediaFile=A})}ngAfterViewInit(){this.image.nativeElement.onload=()=>{console.log("image loaded"),this.stateChange.emit({mediaLoading:"n"})}}ngOnChanges(){this.mediaBaseUrl=this.mediaSettings.imageUrl,this.handler.toObject(this.settings).subscribe(A=>{this.mediaFile=A})}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(Zn.yk),e.\u0275\u0275directiveInject(ki),e.\u0275\u0275directiveInject(Rt.AttributeSerializerService),e.\u0275\u0275directiveInject(_t.jn))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["classifieds-ui-media-pane-renderer"]],viewQuery:function(A,ie){if(1&A&&e.\u0275\u0275viewQuery(al,7),2&A){let Pe;e.\u0275\u0275queryRefresh(Pe=e.\u0275\u0275loadQuery())&&(ie.image=Pe.first)}},inputs:{settings:"settings",ancestory:"ancestory",state:"state"},outputs:{stateChange:"stateChange"},features:[e.\u0275\u0275NgOnChangesFeature],decls:2,vars:2,consts:[[3,"src"],["img",""]],template:function(A,ie){1&A&&e.\u0275\u0275element(0,"img",0,1),2&A&&e.\u0275\u0275propertyInterpolate2("src","",ie.mediaBaseUrl,"/",ie.mediaFile.path,"",e.\u0275\u0275sanitizeUrl)},styles:["img[_ngcontent-%COMP%]{max-width:100%}"]}),te})(),Ao=(()=>{class te{constructor(A,ie,Pe,nt,Dt,Wt,mn,Pn,br){this.siteName=A,this.snippetHandler=ie,this.pageBuilderFacade=Pe,this.store=nt,this.tokenizerService=Dt,this.panelHandler=Wt,this.urlGeneratorService=mn,this.attributeSerializer=Pn,this.rulesResolver=br}handleFile(A){return(0,Ce.of)([])}handlesType(A){return!1}implementsRendererOverride(){return!0}hasRendererOverride(A){return(0,Ce.of)(!1)}isDynamic(A){return["snippet","pane"].indexOf(this.getRenderType(A))>-1}isData(A){return!1}fetchDynamicData(A,ie){const Pe=new We.x;return this.toObject(A).pipe((0,tt.w)(nt=>this.urlGeneratorService.getUrl(nt.url,nt.params,ie).pipe((0,St.U)(Dt=>[nt,Dt])))).subscribe(([nt,Dt])=>{this.pageBuilderFacade.loadRestData(`${ie.get("tag")}`,new bn.kr({...nt,url:Dt})),this.store.pipe((0,bt.Ys)((0,Ht.Wb)(`${ie.get("tag")}`)),(0,oe.h)(Wt=>void 0!==Wt)).subscribe(Wt=>{Pe.next(Wt),Pe.complete()})}),Pe}buildDynamicItems(A,ie){const Pe=new We.x;return console.log("build dynamic items rest"),this.toObject(A).pipe((0,tt.w)(nt=>this.urlGeneratorService.getUrl(nt.url,nt.params,ie).pipe((0,St.U)(Dt=>[nt,Dt])))).subscribe(([nt,Dt])=>{console.log("Load in rest data"),this.pageBuilderFacade.loadRestData(`${ie.get("tag")}`,new bn.kr({...nt,url:Dt})),this.store.pipe((0,bt.Ys)((0,Ht.Wb)(`${ie.get("tag")}`)),(0,oe.h)(Wt=>void 0!==Wt),(0,tt.w)(Wt=>this.getBindings(A,"pane").pipe((0,St.U)(mn=>[Wt,mn]))),(0,tt.w)(([Wt,mn])=>(0,Mt.s)(()=>0!==Wt.results.length&&mn.length>0,new ge.y(Pn=>{(0,xt.D)(Wt.results.map(br=>(0,Nt.D)(mn).pipe((0,St.U)(Br=>ie.get("panes").find(Cr=>Cr.name===Br.id)),(0,tt.w)(Br=>(0,Mt.s)(()=>Br.rule&&null!==Br.rule&&""!==Br.rule.condition,this.rulesResolver.evaluate(Br.rule,[...ie.get("contexts"),...void 0!==Br.contexts?Br.contexts:[],new Kn.Js({name:"_root",adaptor:"data",data:br})]).pipe((0,St.U)(Cr=>[Br,Cr])),(0,Ce.of)(!1).pipe((0,St.U)(Cr=>[Br,Cr])))),(0,oe.h)(([Br,Cr])=>Cr),(0,St.U)(([Br,Cr])=>Br.name),(0,Tt.d)(mn[0].id),(0,ce.q)(1)))).pipe((0,St.U)(br=>[Wt,br])).subscribe(br=>{Pn.next(br),Pn.complete()})}),new ge.y(Pn=>{Pn.next([Wt]),Pn.complete()}))),(0,St.U)(([Wt,mn])=>Wt.results.map("pane"===nt.renderer.type?(Pn,br)=>{const Br=ie.get("panes").find(Gr=>Gr.name===mn[br]),Cr=vn.Z();return new Ht.X6({...Br,rule:void 0,label:Cr,contexts:[...ie.get("contexts"),new Kn.Js({name:"_root",adaptor:"data",data:Pn})]})}:Pn=>new Ht.X6({contentPlugin:"snippet",name:vn.Z(),label:void 0,contexts:[...ie.get("contexts"),new Kn.Js({name:"_root",adaptor:"data",data:Pn})],settings:this.snippetHandler.buildSettings({...nt.renderer.data,content:nt.renderer.data.content})}))),(0,St.U)(Wt=>new Ht.s_({stylePlugin:void 0,settings:[],panes:Wt,columnSetting:new Ht.yw})),(0,St.U)(Wt=>this.panelHandler.buildSettings(new Ht.Z8({id:void 0,layoutType:"grid",displayType:"page",site:this.siteName,gridItems:[],layoutSetting:new Ht.yw,rowSettings:[],panels:[Wt]})))).subscribe(Wt=>{Pe.next(Wt.find(mn=>"panels"===mn.name).attributes[0].attributes.find(mn=>"panes"===mn.name).attributes),Pe.complete()})}),Pe}buildSelectOptionItems(A,ie){return this.toObject(A).pipe((0,tt.w)(Pe=>this.urlGeneratorService.getUrl(Pe.url,Pe.params,ie).pipe((0,St.U)(nt=>[Pe,nt]))),(0,St.U)(([Pe,nt])=>new bn.kr({...Pe,url:nt}))).subscribe(Pe=>{this.pageBuilderFacade.loadRestData(`${ie.get("tag")}`,Pe)}),this.store.pipe((0,bt.Ys)((0,Ht.Wb)(`${ie.get("tag")}`)),(0,oe.h)(Pe=>void 0!==Pe),(0,St.U)(Pe=>[Pe,Pe.results.map(nt=>this.tokenizerService.generateGenericTokens(nt))]),(0,St.U)(([Pe,nt])=>[Pe,nt,new bn.Nx(JSON.parse(ie.get("snippet").content))]),(0,St.U)(([Pe,nt,Dt])=>nt.map((Wt,mn)=>new bn.$m({dataItem:Pe.results[mn],value:this.attributeSerializer.serialize("[.]"===Dt.value?Pe.results[mn]:this.tokenizerService.replaceTokens(Dt.value,Wt),"value"),label:this.tokenizerService.replaceTokens(Dt.label,Wt)}))))}getBindings(A,ie,Pe){return"context"===ie?this.toObject(A).pipe((0,St.U)(nt=>nt.params.reduce((Dt,Wt)=>[...Dt,..."form"===Wt.mapping.type?[new $n.ContentBinding({id:`form__${Wt.mapping.value.split(".",2)[0].trim()}`,type:"context"})]:[]],[]))):this.toObject(A).pipe((0,tt.w)(nt=>(0,Mt.s)(()=>nt.renderer.type===ie,(0,Ce.of)(nt.renderer.bindings),(0,Ce.of)([]))))}toObject(A){return(0,Ce.of)(this.attributeSerializer.deserializeAsObject(A))}buildSettings(A){return this.attributeSerializer.serialize(A,"root").attributes}getRenderType(A){const ie=[A.find(Pe=>"renderer"===Pe.name)].map(Pe=>Pe.attributes.find(nt=>"type"===nt.name));return ie.length>0?ie[0].value:void 0}stateDefinition(A){return(0,Ce.of)({autocomplete:{input:""}})}editorOptions(A){return(0,Ce.of)(new $n.ContentPluginEditorOptions)}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275inject(Nr.SITE_NAME),e.\u0275\u0275inject(yo),e.\u0275\u0275inject(Ht.QK),e.\u0275\u0275inject(bt.yh),e.\u0275\u0275inject(kr.G),e.\u0275\u0275inject(Ht.iE),e.\u0275\u0275inject(un.o),e.\u0275\u0275inject(Rt.AttributeSerializerService),e.\u0275\u0275inject(er.iL))},te.\u0275prov=e.\u0275\u0275defineInjectable({token:te,factory:te.\u0275fac}),te})(),Po=(()=>{class te{constructor(A,ie){this.fb=A,this.tokenizerService=ie,this.panes=[],this.submitted=new e.EventEmitter,this.contexts=[],this.forms=[],this.snippetValidation=!0,this.restForm=this.fb.group({source:this.fb.control(""),renderer:this.fb.group({type:"snippet",query:this.fb.control(""),trackBy:this.fb.control(""),data:this.fb.control(""),bindings:this.fb.array([]),select:this.fb.group({value:this.fb.control(""),label:this.fb.control(""),id:this.fb.control(""),multiple:this.fb.control(""),limit:this.fb.control("")})})})}set rest(A){if(void 0!==A){this._rest=A;const ie={value:"",label:"",id:"",multiple:"",limit:""};this.restForm.setValue({renderer:{trackBy:"",query:"",...A.renderer,data:A.renderer.data?{...A.renderer.data,jsScript:A.renderer.data.jsScript?A.renderer.data.jsScript:""}:{content:"",contentType:"",jsScript:""},select:["pane","snippet"].findIndex(Pe=>Pe===A.renderer.type)>-1?ie:JSON.parse(A.renderer.data.content),bindings:[]},source:{url:"",params:[],method:"",body:""}}),"pane"===A.renderer.type&&(this.bindings.clear(),A.renderer.bindings.forEach(Pe=>{"pane"===Pe.type&&this.bindings.push(this.fb.group({id:this.fb.control(Pe.id,x.kI.required),type:this.fb.control(Pe.type,x.kI.required)}))})),"pane"===A.renderer.type?this.restForm.get("renderer").get("data").disable():this.restForm.get("renderer").get("data").enable(),setTimeout(()=>{this.restSource={url:A.url,params:A.params,method:A.method?A.method:"",body:A.body?{...A.body,jsScript:""}:""},this.sourceForm.refreshData$.next(void 0)})}}get rendererType(){return this.restForm.get("renderer").get("type")}get isSelectable(){return this.restForm.get("renderer").get("type").value&&"snippet"!==this.restForm.get("renderer").get("type").value&&"pane"!==this.restForm.get("renderer").get("type").value}get bindings(){return this.restForm.get("renderer").get("bindings")}get valid(){return this.restForm.valid}ngOnInit(){console.log(this.contexts),this.restForm.get("renderer").get("type").valueChanges.subscribe(A=>{"pane"===this.rendererType.value?this.restForm.get("renderer").get("data").disable():this.restForm.get("renderer").get("data").enable(),this.restForm.get("renderer").get("data").setValue({contentType:"",content:"",jsScript:""})}),this.restForm.get("renderer").get("select").valueChanges.subscribe(A=>{this.restForm.get("renderer").get("data").setValue({contentType:"application/json",content:JSON.stringify({value:A.value,label:A.label,id:A.id,multiple:A.multiple,limit:A.limit}),jsScript:""})})}ngAfterViewInit(){}onDataChange(A){this.tokens=this.tokenizerService.generateGenericTokens(A[0])}addPane(){this.bindings.push(this.fb.group({type:this.fb.control("pane",x.kI.required),id:this.fb.control("",x.kI.required)}))}submit(){const A=new bn.kr({...this.restForm.value,url:this.restForm.value.source.url,params:this.restForm.value.source.params,method:this.restForm.value.source.method,body:this.restForm.value.source.body});this.submitted.emit(A)}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(x.qu),e.\u0275\u0275directiveInject(kr.G))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["classifieds-ui-rest-form"]],viewQuery:function(A,ie){if(1&A&&e.\u0275\u0275viewQuery(an.aS,7),2&A){let Pe;e.\u0275\u0275queryRefresh(Pe=e.\u0275\u0275loadQuery())&&(ie.sourceForm=Pe.first)}},inputs:{panes:"panes",contexts:"contexts",rest:"rest"},outputs:{submitted:"submitted"},decls:34,vars:9,consts:[[1,"rest-form",3,"formGroup","ngSubmit"],["direction","vertical",1,"content-inner"],["as-split-area","","size","50"],["formControlName","source",3,"contexts","restSource","dataChange"],["size","50","formGroupName","renderer"],["matInput","","formControlName","query","placeholder","Query"],["matInput","","formControlName","trackBy","placeholder","Track By"],["required","","formControlName","type"],["label","Output"],["value","snippet"],["value","pane"],["label","Input"],["value","select"],["value","radiogroup"],["value","checkboxgroup"],["value","autocomplete"],["formControlName","data","splitDirection","horizontal","rows","10","cols","40",3,"hidden","rootForm","tokens"],["formArrayName","bindings",4,"ngIf"],["formGroupName","select",4,"ngIf"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"],["formArrayName","bindings"],["type","button",3,"click"],[4,"ngFor","ngForOf"],[3,"formGroupName"],["required","","formControlName","id"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["formGroupName","select"],["matInput","","formControlName","id","placeholder","Id"],["matInput","","formControlName","value","placeholder","Value"],["matInput","","formControlName","label","placeholder","Label"],["formControlName","multiple"],["matInput","","formControlName","limit","placeholder","Limit"]],template:function(A,ie){1&A&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("ngSubmit",function(){return ie.submit()}),e.\u0275\u0275elementStart(1,"mat-dialog-content"),e.\u0275\u0275elementStart(2,"as-split",1),e.\u0275\u0275elementStart(3,"div",2),e.\u0275\u0275elementStart(4,"classifieds-ui-rest-source-form",3),e.\u0275\u0275listener("dataChange",function(nt){return ie.onDataChange(nt)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"as-split-area",4),e.\u0275\u0275elementStart(6,"mat-form-field"),e.\u0275\u0275element(7,"input",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"mat-form-field"),e.\u0275\u0275element(9,"input",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"mat-form-field"),e.\u0275\u0275elementStart(11,"mat-label"),e.\u0275\u0275text(12,"Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"mat-select",7),e.\u0275\u0275elementStart(14,"mat-optgroup",8),e.\u0275\u0275elementStart(15,"mat-option",9),e.\u0275\u0275text(16,"Snippet"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"mat-option",10),e.\u0275\u0275text(18,"Pane"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"mat-optgroup",11),e.\u0275\u0275elementStart(20,"mat-option",12),e.\u0275\u0275text(21,"Select"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"mat-option",13),e.\u0275\u0275text(23,"Radio Group"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"mat-option",14),e.\u0275\u0275text(25,"Checkbox Group"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"mat-option",15),e.\u0275\u0275text(27,"Autocomplete"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(28,"classifieds-ui-snippet-form",16),e.\u0275\u0275template(29,ll,5,1,"div",17),e.\u0275\u0275template(30,ul,12,0,"div",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"mat-dialog-actions"),e.\u0275\u0275elementStart(32,"button",19),e.\u0275\u0275text(33,"Save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&A&&(e.\u0275\u0275property("formGroup",ie.restForm),e.\u0275\u0275advance(4),e.\u0275\u0275property("contexts",ie.contexts)("restSource",ie.restSource),e.\u0275\u0275advance(24),e.\u0275\u0275property("hidden","snippet"!=ie.rendererType.value)("rootForm",!1)("tokens",ie.tokens),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","pane"==ie.rendererType.value),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",ie.isSelectable),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",!ie.valid))},directives:[d.Mq,an.aS,Ln.KE,rn.gD,J.Nv,J.ey,On.l8,cn.oG,rr.lW,x._Y,x.JL,x.sg,T.xY,d.zE,x.JJ,x.u,x.x0,Mn.Nt,x.Fj,Ln.hX,x.Q7,n.NgIf,x.CE,n.NgForOf,T.H8,T.ZT],styles:[".rest-form[_ngcontent-%COMP%]     .content-inner{height:auto}"]}),te})(),Js=(()=>{class te{constructor(A,ie,Pe,nt){this.data=A,this.dialogRef=ie,this.fb=Pe,this.handler=nt,this.panes=[],this.contexts=[],this.contexts=this.data.contexts}ngOnInit(){this.panes=this.data.panelFormGroup.get("panes").controls.reduce((A,ie)=>ie.get("name").value?[...A,ie.get("name").value]:[...A],[]),void 0!==this.data.pane&&this.handler.toObject(this.data.pane.settings).subscribe(A=>{this.rest=A})}submitted(A){const ie=this.data.panelFormGroup.get("panes");if(void 0===this.data.paneIndex)ie.push(this.fb.group({contentPlugin:"rest",name:new x.NI(""),label:new x.NI(""),rule:new x.NI(""),settings:this.fb.array(this.handler.buildSettings(A).map(Pe=>this.convertToGroup(Pe)))})),this.data.contentAdded.next([this.data.panelIndex,ie.length-1]);else{const Pe=ie.at(this.data.paneIndex);Pe.get("settings").clear(),this.handler.buildSettings(A).forEach(nt=>{Pe.get("settings").push(this.convertToGroup(nt))})}this.dialogRef.close()}convertToGroup(A){const ie=this.fb.group({name:new x.NI(A.name,x.kI.required),type:new x.NI(A.type,x.kI.required),displayName:new x.NI(A.displayName,x.kI.required),value:new x.NI(A.value,x.kI.required),computedValue:new x.NI(A.value,x.kI.required),attributes:new x.Oe([])});return A.attributes&&A.attributes.length>0&&A.attributes.forEach(Pe=>{ie.get("attributes").push(this.convertToGroup(Pe))}),ie}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(T.WI),e.\u0275\u0275directiveInject(T.so),e.\u0275\u0275directiveInject(x.qu),e.\u0275\u0275directiveInject(Ao))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["classifieds-ui-rest-editor"]],decls:1,vars:3,consts:[[3,"panes","rest","contexts","submitted"]],template:function(A,ie){1&A&&(e.\u0275\u0275elementStart(0,"classifieds-ui-rest-form",0),e.\u0275\u0275listener("submitted",function(nt){return ie.submitted(nt)}),e.\u0275\u0275elementEnd()),2&A&&e.\u0275\u0275property("panes",ie.panes)("rest",ie.rest)("contexts",ie.contexts)},directives:[Po],styles:[""]}),te})(),As=(()=>{class te{constructor(A,ie,Pe){this.fb=A,this.attributeSerializer=ie,this.tokenizerService=Pe,this.searchChange=new e.EventEmitter,this.selectionForm=this.fb.group({attributes:this.fb.array([])}),this.onTouched=()=>{},this.displayAuto=nt=>Pe.replaceTokens(this.selectMapping.label,this.tokenizerService.generateGenericTokens(nt.dataItem))}set values(A){this.options=A,this.buildOptions()}get attributesArray(){return this.selectionForm.get("attributes")}ngOnInit(){this.attributesArray.push(this.fb.group({name:new x.NI("value",x.kI.required),type:new x.NI(Rt.AttributeTypes.Array,x.kI.required),displayName:new x.NI("Value",x.kI.required),value:new x.NI(""),attributes:["checkboxgroup"].findIndex(A=>A===this.renderType)>-1?this.fb.array([]):new x.NI("")})),"autocomplete"===this.renderType&&(this.attributesArray.at(0).addControl("_proxy",this.fb.control("")),this.attributesArray.at(0).get("_proxy").valueChanges.pipe((0,at.x)(),(0,O.b)(500)).subscribe(A=>{this.searchChange.emit(A)}))}onOptionSelected(A){this.attributesArray.at(0).get("attributes").setValue(A.option.value.value),this.attributesArray.at(0).get("attributes").updateValueAndValidity()}writeValue(A){A&&this.attributesArray.setValue(A,{emitEvent:!1})}registerOnChange(A){this.attributesArray.valueChanges.subscribe(A)}registerOnTouched(A){this.onTouched=A}setDisabledState(A){A?this.attributesArray.disable():this.attributesArray.enable()}validate(A){return this.selectionForm.valid?null:{invalidForm:{valid:!1,message:"selection is invalid"}}}buildOptions(){if("checkboxgroup"===this.renderType&&void 0!==this.options){const A=this.attributesArray.controls[0].get("attributes");A.clear(),this.options.forEach(ie=>{const Pe=this.attributeSerializer.convertToGroup(ie.value);Pe.addControl("_store",new x.NI(!1)),A.push(Pe)})}}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(x.qu),e.\u0275\u0275directiveInject(Rt.AttributeSerializerService),e.\u0275\u0275directiveInject(kr.G))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["classifieds-ui-selection"]],inputs:{name:"name",label:"label",values:"values",renderType:"renderType",selectMapping:"selectMapping"},outputs:{searchChange:"searchChange"},features:[e.\u0275\u0275ProvidersFeature([{provide:x.JU,useExisting:(0,e.forwardRef)(()=>te),multi:!0},{provide:x.Cf,useExisting:(0,e.forwardRef)(()=>te),multi:!0}])],decls:9,vars:6,consts:[[3,"formGroup"],["formArrayName","attributes"],["formGroupName","0"],[3,"ngSwitch"],[4,"ngSwitchCase"],["formControlName","attributes"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[4,"ngFor","ngForOf"],[3,"formGroupName"],["formControlName","_store"],["matInput","","formControlName","_proxy",3,"placeholder","matAutocomplete"],[3,"displayWith","optionSelected"],["autocomplete","matAutocomplete"]],template:function(A,ie){1&A&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"div"),e.\u0275\u0275elementContainerStart(4,3),e.\u0275\u0275template(5,es,6,2,"ng-container",4),e.\u0275\u0275template(6,ts,6,2,"ng-container",4),e.\u0275\u0275template(7,io,4,1,"ng-container",4),e.\u0275\u0275template(8,Ia,6,4,"ng-container",4),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&A&&(e.\u0275\u0275property("formGroup",ie.selectionForm),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngSwitch",ie.renderType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","select"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","radiogroup"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","checkboxgroup"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","autocomplete"))},directives:[Ln.KE,rn.gD,J.ey,Sn.U0,cn.oG,Vn.XC,x.JL,x.sg,x.CE,x.x0,n.NgSwitch,n.NgSwitchCase,Ln.hX,x.JJ,x.u,n.NgForOf,Sn.VQ,Mn.Nt,x.Fj,Vn.ZL],styles:[""]}),te})(),ka=(()=>{class te{constructor(A,ie){this.restHandler=A,this.controlContainer=ie,this.settings=[],this.contexts=[],this.state={},this.stateChange=new e.EventEmitter,this.tag=vn.Z(),this.searchChange$=new We.x}get renderType(){return this.restHandler.getRenderType(this.settings)}ngOnInit(){this.restHandler.toObject(this.settings).pipe((0,At.b)(A=>{this.snippet=A.renderer.data,this.selectMapping=new bn.Nx(JSON.parse(this.snippet.content))}),(0,oe.h)(()=>"autocomplete"!==this.renderType),(0,tt.w)(A=>this.restHandler.buildSelectOptionItems(this.settings,new Map([["tag",this.tag],["snippet",A.renderer.data],["contexts",this.contexts]])))).subscribe(A=>{this.options=A}),this.searchChange$.pipe((0,At.b)(A=>{this.stateChange.emit({autocomplete:{input:A}})}),(0,tt.w)(A=>this.restHandler.buildSelectOptionItems(this.settings,new Map([["tag",vn.Z()],["snippet",this.snippet],["contexts",this.contexts]])))).subscribe(A=>{this.options=A})}onSearchChange(A){this.searchChange$.next(A)}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(Ao),e.\u0275\u0275directiveInject(x.gN))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["classifieds-ui-rest-pane-renderer"]],inputs:{settings:"settings",name:"name",label:"label",displayType:"displayType",contexts:"contexts",state:"state"},outputs:{stateChange:"stateChange"},decls:2,vars:6,consts:[[3,"formGroup"],["formControlName","settings",3,"name","label","renderType","values","selectMapping","searchChange"]],template:function(A,ie){1&A&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"classifieds-ui-selection",1),e.\u0275\u0275listener("searchChange",function(nt){return ie.onSearchChange(nt)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&A&&(e.\u0275\u0275property("formGroup",ie.controlContainer.control),e.\u0275\u0275advance(1),e.\u0275\u0275property("name",ie.name)("label",ie.label)("renderType",ie.renderType)("values",ie.options)("selectMapping",ie.selectMapping))},directives:[As,x.JL,x.sg,x.JJ,x.u],styles:[""]}),te})(),so=(()=>{class te{constructor(A,ie,Pe,nt,Dt,Wt){this.siteName=A,this.tokenizerService=ie,this.panelHandler=Pe,this.mediaHandler=nt,this.attributeSerializer=Dt,this.inlineContextResolver=Wt}handleFile(A){return(0,Ce.of)()}handlesType(A){return!1}implementsRendererOverride(){return!1}hasRendererOverride(A){return(0,Ce.of)(!1)}isDynamic(A){return!0}isData(A){return!1}fetchDynamicData(A,ie){return(0,Ce.of)(new bn.qz)}buildDynamicItems(A,ie){return this.toObject(A).pipe((0,St.U)(Pe=>[Pe,ie.get("contexts").find(nt=>nt.name===Pe.context)]),(0,tt.w)(([Pe,nt])=>this.extractDataArray(nt,Pe.query).pipe((0,St.U)(Dt=>[Pe,nt,Dt]))),(0,tt.w)(([Pe,nt,Dt])=>this.transformDataArray(Dt,Pe.plugin)),(0,St.U)(Pe=>new Ht.s_({stylePlugin:void 0,settings:[],panes:Pe,columnSetting:new Ht.yw})),(0,St.U)(Pe=>this.panelHandler.buildSettings(new Ht.Z8({id:void 0,layoutType:"grid",displayType:"page",site:this.siteName,gridItems:[],layoutSetting:new Ht.yw,rowSettings:[],panels:[Pe]}))),(0,St.U)(Pe=>Pe.find(nt=>"panels"===nt.name).attributes[0].attributes.find(nt=>"panes"===nt.name).attributes))}getBindings(A,ie,Pe){return"context"===ie?this.toObject(A).pipe((0,St.U)(nt=>[new $n.ContentBinding({id:nt.context,type:"context"})])):(0,Ce.of)([])}toObject(A){return(0,Ce.of)(this.attributeSerializer.deserializeAsObject(A))}buildSettings(A){return this.attributeSerializer.serialize(A,"root").attributes}extractDataArray(A,ie){return this.inlineContextResolver.resolve(A).pipe((0,St.U)(Pe=>{const nt=ie.split("."),Dt=nt.length;if(void 0===A)return(0,Ce.of)([]);let Wt=Array.isArray(Pe)?Pe[0]:Pe;for(let mn=0;mn<Dt;mn++)""!==nt[mn]&&(Wt=Wt[nt[mn]]);return Wt}))}transformDataArray(A,ie){return"media"===ie?(0,Ce.of)(A.map(Pe=>new Zn.xt(Pe)).map(Pe=>new Ht.X6({contentPlugin:"media",name:void 0,label:void 0,settings:this.mediaHandler.buildSettings(Pe)}))):(0,Ce.of)()}stateDefinition(A){return(0,Ce.of)({})}editorOptions(A){return(0,Ce.of)(new $n.ContentPluginEditorOptions)}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275inject(Nr.SITE_NAME),e.\u0275\u0275inject(kr.G),e.\u0275\u0275inject(Ht.iE),e.\u0275\u0275inject(ki),e.\u0275\u0275inject(Rt.AttributeSerializerService),e.\u0275\u0275inject(Kn.a$))},te.\u0275prov=e.\u0275\u0275defineInjectable({token:te,factory:te.\u0275fac}),te})();class Oc{constructor(Re){Re&&(this.context=Re.context,this.query=Re.query,this.plugin=Re.plugin)}}let Mc=(()=>{class te{constructor(A){this.fb=A,this.contexts=[],this.submitted=new e.EventEmitter,this.sliceForm=this.fb.group({context:this.fb.control("",x.kI.required),query:this.fb.control("",x.kI.required),plugin:this.fb.control("",x.kI.required)})}ngOnInit(){}submit(){const A=new Oc(this.sliceForm.value);this.submitted.emit(A)}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(x.qu))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["classifieds-ui-slice-form"]],inputs:{contexts:"contexts"},outputs:{submitted:"submitted"},decls:20,vars:3,consts:[[1,"slice-form",3,"formGroup","ngSubmit"],["required","","formControlName","context"],["value","_root"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Query","formControlName","query","required",""],["required","","formControlName","plugin"],["value","media"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"],[3,"value"]],template:function(A,ie){1&A&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("ngSubmit",function(){return ie.submit()}),e.\u0275\u0275elementStart(1,"mat-dialog-content"),e.\u0275\u0275elementStart(2,"mat-form-field"),e.\u0275\u0275elementStart(3,"mat-label"),e.\u0275\u0275text(4,"Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"mat-select",1),e.\u0275\u0275elementStart(6,"mat-option",2),e.\u0275\u0275text(7,"_root"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,Ta,2,2,"mat-option",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"mat-form-field"),e.\u0275\u0275element(10,"input",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"mat-form-field"),e.\u0275\u0275elementStart(12,"mat-label"),e.\u0275\u0275text(13,"Plugin"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"mat-select",5),e.\u0275\u0275elementStart(15,"mat-option",6),e.\u0275\u0275text(16,"Media"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"mat-dialog-actions"),e.\u0275\u0275elementStart(18,"button",7),e.\u0275\u0275text(19,"Save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&A&&(e.\u0275\u0275property("formGroup",ie.sliceForm),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngForOf",ie.contexts),e.\u0275\u0275advance(10),e.\u0275\u0275property("disabled",!ie.sliceForm.valid))},directives:[Ln.KE,rn.gD,J.ey,rr.lW,x._Y,x.JL,x.sg,T.xY,Ln.hX,x.Q7,x.JJ,x.u,n.NgForOf,Mn.Nt,x.Fj,T.H8,T.ZT],styles:[""]}),te})(),Ps=(()=>{class te{constructor(A,ie,Pe,nt){this.data=A,this.dialogRef=ie,this.fb=Pe,this.handler=nt,this.contexts=[],this.contexts=this.data.contexts}ngOnInit(){}submitted(A){this.data.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:"slice",name:new x.NI(""),label:new x.NI(""),rule:new x.NI(""),settings:this.fb.array(this.handler.buildSettings(A).map(ie=>this.convertToGroup(ie)))})),this.dialogRef.close()}convertToGroup(A){const ie=this.fb.group({name:new x.NI(A.name,x.kI.required),type:new x.NI(A.type,x.kI.required),displayName:new x.NI(A.displayName,x.kI.required),value:new x.NI(A.value,x.kI.required),computedValue:new x.NI(A.value,x.kI.required),attributes:new x.Oe([])});return A.attributes&&A.attributes.length>0&&A.attributes.forEach(Pe=>{ie.get("attributes").push(this.convertToGroup(Pe))}),ie}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(T.WI),e.\u0275\u0275directiveInject(T.so),e.\u0275\u0275directiveInject(x.qu),e.\u0275\u0275directiveInject(so))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["classifieds-ui-slice-editor"]],decls:1,vars:1,consts:[[3,"contexts","submitted"]],template:function(A,ie){1&A&&(e.\u0275\u0275elementStart(0,"classifieds-ui-slice-form",0),e.\u0275\u0275listener("submitted",function(nt){return ie.submitted(nt)}),e.\u0275\u0275elementEnd()),2&A&&e.\u0275\u0275property("contexts",ie.contexts)},directives:[Mc],styles:[""]}),te})(),Gu=(()=>{class te{constructor(A,ie){this.fb=A,this.controlContainer=ie}ngOnInit(){this.controlContainer.control.addControl("adaptor",this.fb.control("rest",x.kI.required)),this.controlContainer.control.addControl("rest",this.fb.control(""))}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(x.qu),e.\u0275\u0275directiveInject(x.gN))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["classifieds-ui-context-editor"]],viewQuery:function(A,ie){if(1&A&&e.\u0275\u0275viewQuery(an.aS,7),2&A){let Pe;e.\u0275\u0275queryRefresh(Pe=e.\u0275\u0275loadQuery())&&(ie.restSourceFormComp=Pe.first)}},decls:2,vars:1,consts:[[3,"formGroup"],["formControlName","rest"]],template:function(A,ie){1&A&&(e.\u0275\u0275elementContainerStart(0,0),e.\u0275\u0275element(1,"classifieds-ui-rest-source-form",1),e.\u0275\u0275elementContainerEnd()),2&A&&e.\u0275\u0275property("formGroup",ie.controlContainer.control)},directives:[an.aS,x.JL,x.sg,x.JJ,x.u],styles:[""]}),te})(),kc=(()=>{class te{constructor(A,ie,Pe,nt){this.data=A,this.dialogRef=ie,this.fb=Pe,this.attributeSerializer=nt,this.contexts=[],this.panes=[],this.formGroup=this.fb.group({labels:this.fb.array([this.buildLabelGroup()])}),this.contexts=this.data.contexts}get labels(){return this.formGroup.get("labels")}ngOnInit(){this.panes=new Ht.s_(this.data.panelFormGroup.value).panes}submit(){this.data.panelFormGroup.get("settings").clear(),this.attributeSerializer.serialize(this.formGroup.value,"root").attributes.forEach(A=>{console.log("label mappings"),console.log(this.attributeSerializer.convertToGroup(A)),this.data.panelFormGroup.get("settings").push(this.attributeSerializer.convertToGroup(A))})}onRemoveMapping(A){this.labels.removeAt(A)}onAddMapping(){this.labels.push(this.buildLabelGroup())}buildLabelGroup(){return this.fb.group({mapping:this.fb.control("")})}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(T.WI),e.\u0275\u0275directiveInject(T.so),e.\u0275\u0275directiveInject(x.qu),e.\u0275\u0275directiveInject(Rt.AttributeSerializerService))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["druid-tabs-panel-editor"]],decls:7,vars:3,consts:[[3,"formGroup","ngSubmit"],["formArrayName","labels"],[3,"formGroupName",4,"ngFor","ngForOf"],["type","button","mat-raised-button","","color","primary",3,"click"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"],[3,"formGroupName"],["formControlName","mapping",3,"panes"]],template:function(A,ie){1&A&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("ngSubmit",function(){return ie.submit()}),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275template(2,Bo,4,2,"div",2),e.\u0275\u0275elementStart(3,"button",3),e.\u0275\u0275listener("click",function(){return ie.onAddMapping()}),e.\u0275\u0275text(4,"Add"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"button",4),e.\u0275\u0275text(6,"Save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&A&&(e.\u0275\u0275property("formGroup",ie.formGroup),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",ie.labels.controls),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",!ie.formGroup.valid))},directives:[Ht.Ly,rr.lW,x._Y,x.JL,x.sg,x.CE,n.NgForOf,x.x0,x.JJ,x.u,T.ZT],encapsulation:2}),te})(),Fc=(()=>{class te{constructor(A){this.attributeSerializer=A,this.settings=[],this.panes=[],this.originMappings=[],this.labelMappingsEnabled=!1}ngOnInit(){console.log("tabs panels contexts"),console.log(this.panes);const A=this.attributeSerializer.deserialize(new Rt.AttributeValue({name:"",displayName:"",computedValue:"",type:Rt.AttributeTypes.Complex,value:"",intValue:0,attributes:this.settings}));this.labelMappingsEnabled=!!(A&&void 0!==A.labels&&Array.isArray(A.labels)&&A.labels.length>0)}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(Rt.AttributeSerializerService))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["classifieds-ui-tabs-panel-renderer"]],inputs:{settings:"settings",panes:"panes",originPanes:"originPanes",originMappings:"originMappings"},decls:2,vars:2,consts:[["mat-align-tabs","start",4,"ngIf"],["mat-align-tabs","start"],[4,"for"],["mat-tab-label",""],[3,"pluginName","settings","contexts"],["label","The Label",4,"ngFor","ngForOf"],["label","The Label"]],template:function(A,ie){1&A&&(e.\u0275\u0275template(0,ns,2,1,"mat-tab-group",0),e.\u0275\u0275template(1,Jr,2,1,"mat-tab-group",0)),2&A&&(e.\u0275\u0275property("ngIf",ie.labelMappingsEnabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!ie.labelMappingsEnabled))},directives:[M.SP,M.uX,en.rQ,n.NgIf,Nr.ForDirective,M.uD,n.NgForOf],styles:[""]}),te})(),Yl=(()=>{class te{constructor(A,ie){this.fb=A,this.controlContainer=ie,this.panelPages=[],this.panelPage$=new pt.X(new Ht.Z8),this.context$=new pt.X(void 0),this.formGroup=this.fb.group({state:this.fb.control("",[x.kI.required])}),this.stateCtrl=this.fb.control(""),this.stateCtrlSub=this.stateCtrl.valueChanges.pipe((0,O.b)(250),(0,at.x)(),(0,oe.h)(Pe=>{try{return JSON.parse(Pe),!0}catch{return!1}}),(0,St.U)(Pe=>JSON.parse(Pe))).subscribe(Pe=>{console.log("write state"),console.log(Pe),this.formGroup.get("state").setValue(Pe)}),this.onTouched=()=>{}}set panelPage(A){this.panelPage$.next(A)}set context(A){this.context$.next(A)}ngOnInit(){this.panelPage$.subscribe(A=>{this.panelPages=[A]}),this.context$.subscribe(A=>{this.stateCtrl.setValue(A?JSON.stringify(A.data.state):"")})}writeValue(A){A&&this.formGroup.setValue(A,{emitEvent:!1})}registerOnChange(A){this.formGroup.valueChanges.subscribe(A)}registerOnTouched(A){this.onTouched=A}setDisabledState(A){A?this.formGroup.disable():this.formGroup.enable()}validate(A){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"source is invalid"}}}flattenSelector(A){const ie=[];return null!=A.panel&&ie.push(A.panel),null!=A.pane&&ie.push(A.pane),null!=A.nested&&"object"==typeof A.nested&&this.flattenSelector(A.nested).forEach(Pe=>ie.push(Pe)),ie}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(x.qu),e.\u0275\u0275directiveInject(x.gN))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["classifieds-ui-page-state-form"]],inputs:{panelPage:"panelPage",context:"context"},features:[e.\u0275\u0275ProvidersFeature([{provide:x.JU,useExisting:(0,e.forwardRef)(()=>te),multi:!0},{provide:x.Cf,useExisting:(0,e.forwardRef)(()=>te),multi:!0}])],decls:3,vars:2,consts:[[3,"formGroup"],["cols","40","rows","20","required","",3,"formControl"]],template:function(A,ie){1&A&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275text(1," <"),e.\u0275\u0275element(2,"textarea",1),e.\u0275\u0275elementEnd()),2&A&&(e.\u0275\u0275property("formGroup",ie.formGroup),e.\u0275\u0275advance(2),e.\u0275\u0275property("formControl",ie.stateCtrl))},directives:[x.JL,x.sg,x.Fj,x.Q7,x.JJ,x.oH],styles:[""]}),te})(),$u=(()=>{class te{constructor(A,ie,Pe){this.fb=A,this.pageBuilderFacade=ie,this.controlContainer=Pe}ngOnInit(){this.controlContainer.control.addControl("adaptor",this.fb.control("data",x.kI.required)),this.controlContainer.control.addControl("data",this.fb.control("")),this.pageBuilderFacade.getPage$.pipe((0,ce.q)(1)).subscribe(A=>{this.panelPage=A})}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(x.qu),e.\u0275\u0275directiveInject(Ht.QK),e.\u0275\u0275directiveInject(x.gN))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["classifieds-ui-page-state-editor"]],viewQuery:function(A,ie){if(1&A&&e.\u0275\u0275viewQuery(Yl,7),2&A){let Pe;e.\u0275\u0275queryRefresh(Pe=e.\u0275\u0275loadQuery())&&(ie.restSourceFormComp=Pe.first)}},inputs:{context:"context"},decls:2,vars:3,consts:[[3,"formGroup"],["formControlName","data",3,"panelPage","context"]],template:function(A,ie){1&A&&(e.\u0275\u0275elementContainerStart(0,0),e.\u0275\u0275element(1,"classifieds-ui-page-state-form",1),e.\u0275\u0275elementContainerEnd()),2&A&&(e.\u0275\u0275property("formGroup",ie.controlContainer.control),e.\u0275\u0275advance(1),e.\u0275\u0275property("panelPage",ie.panelPage)("context",ie.context))},directives:[Yl,x.JL,x.sg,x.JJ,x.u],styles:[""]}),te})(),Vu=(()=>{class te{constructor(A,ie){this.fb=A,this.attributeSerializer=ie,this.settings$=new pt.X(void 0),this.formGroup=this.fb.group({name:this.fb.control("",[x.kI.required]),field:this.fb.control("",[x.kI.required])}),this.settingsSub=this.settings$.pipe((0,St.U)(Pe=>Pe?new Ht.Ac(this.attributeSerializer.deserializeAsObject(Pe)):void 0)).subscribe(Pe=>{Pe?(this.formGroup.get("name").setValue(Pe.name),this.formGroup.get("field").setValue(Pe.field)):(this.formGroup.get("name").setValue(""),this.formGroup.get("field").setValue(""))}),this.onTouched=()=>{}}set settings(A){this.settings$.next(A)}ngOnInit(){}writeValue(A){A&&this.formGroup.setValue(A,{emitEvent:!1})}registerOnChange(A){this.formGroup.valueChanges.subscribe(A)}registerOnTouched(A){this.onTouched=A}setDisabledState(A){A?this.formGroup.disable():this.formGroup.enable()}validate(A){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(x.qu),e.\u0275\u0275directiveInject(Rt.AttributeSerializerService))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["classifieds-ui-form-datasource-form"]],inputs:{settings:"settings"},features:[e.\u0275\u0275ProvidersFeature([{provide:x.JU,useExisting:(0,e.forwardRef)(()=>te),multi:!0},{provide:x.Cf,useExisting:(0,e.forwardRef)(()=>te),multi:!0}])],decls:11,vars:1,consts:[[3,"formGroup"],["matInput","","formControlName","name","required",""],["matInput","","formControlName","field","required",""]],template:function(A,ie){1&A&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"div"),e.\u0275\u0275elementStart(2,"mat-form-field"),e.\u0275\u0275elementStart(3,"mat-label"),e.\u0275\u0275text(4,"Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"input",1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div"),e.\u0275\u0275elementStart(7,"mat-form-field"),e.\u0275\u0275elementStart(8,"mat-label"),e.\u0275\u0275text(9,"Field"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(10,"input",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&A&&e.\u0275\u0275property("formGroup",ie.formGroup)},directives:[Ln.KE,x.JL,x.sg,Ln.hX,Mn.Nt,x.Fj,x.JJ,x.u,x.Q7],styles:[""]}),te})(),Ys=(()=>{class te{constructor(A){this.controlContainer=A,this.settings=[]}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(x.gN))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["classifieds-ui-form-datasource"]],inputs:{settings:"settings"},decls:2,vars:2,consts:[[3,"formGroup"],["formControlName","settings",3,"settings"]],template:function(A,ie){1&A&&(e.\u0275\u0275elementContainerStart(0,0),e.\u0275\u0275element(1,"classifieds-ui-form-datasource-form",1),e.\u0275\u0275elementContainerEnd()),2&A&&(e.\u0275\u0275property("formGroup",ie.controlContainer.control),e.\u0275\u0275advance(1),e.\u0275\u0275property("settings",ie.settings))},directives:[Vu,x.JL,x.sg,x.JJ,x.u],encapsulation:2}),te})();const gl=te=>new $n.ContentPlugin({id:"snippet",title:"Snippet",selectionComponent:void 0,editorComponent:hn,renderComponent:Ss,handler:te}),Zl=te=>new $n.ContentPlugin({id:"attribute",title:"Attribute",selectionComponent:ri,editorComponent:oo,renderComponent:qr,handler:te}),Fa=te=>new $n.ContentPlugin({id:"media",title:"Media",selectionComponent:void 0,editorComponent:Hi,renderComponent:_i,handler:te}),os=te=>new $n.ContentPlugin({id:"rest",title:"REST",selectionComponent:void 0,editorComponent:Js,renderComponent:ka,handler:te}),oi=te=>new $n.ContentPlugin({id:"slice",title:"Slice",selectionComponent:void 0,editorComponent:Ps,renderComponent:void 0,handler:te}),ui=te=>new Kn.eO({id:"page",name:"page",title:"Page",global:!0,group:"pages",baseObject:{path:""},resolver:te}),zo=te=>{const Re={dataset:new bn.qz};return new Kn.eO({id:"rest",name:"rest",title:"Rest",baseObject:Re,resolver:te,editorComponent:Gu})},ni=te=>{const Re={dataset:new bn.qz};return new Kn.eO({id:"form",name:"form",title:"Form",baseObject:Re,resolver:te})},Ei=te=>{const Re=new Ht.Mn({state:new Rt.AttributeValue});return new Kn.eO({id:"panestate",name:"panestate",title:"Pane State",internal:!0,baseObject:Re,resolver:te})},Go=te=>{const Re=new Ht.Mn({state:new Rt.AttributeValue});return new Kn.eO({id:"pagestate",name:"pagestate",title:"Page State",internal:!0,baseObject:Re,resolver:te,editorComponent:$u})},ss=te=>new Ht.tA({id:"tabs",name:"tabs",title:"Tabs",handler:te,editorComponent:kc,renderComponent:Fc}),Fi=(te,Re,A)=>new tr.BL({id:"form",title:"Form",usedContexts:({param:ie})=>(0,Ce.of)([`form__${ie.mapping.value.substr(0,ie.mapping.value.indexOf("."))}`]),evalParam:({param:ie})=>{const nt=ie.mapping.value.substr(0,ie.mapping.value.indexOf(".")),Dt=ie.mapping.value.substr(ie.mapping.value.indexOf(".")+1);return console.log(`form: ${nt} || ${Dt}`),A.getForm$(nt).pipe((0,ce.q)(1),(0,St.U)(Wt=>Wt||new Ht.zd),(0,St.U)(Wt=>Re.serializeForm(Wt)),(0,St.U)(Wt=>te.generateGenericTokens(Wt)),(0,At.b)(Wt=>console.log(Wt)),(0,St.U)(Wt=>Wt.has(`.${Dt}`)?te.replaceTokens(`[.${Dt}]`,Wt):""),(0,At.b)(Wt=>{console.log("form value"),console.log(Wt)}))}}),Zs=te=>new Kn.GO({id:"form",title:"Form",resolve:()=>te.getFormNames$.pipe((0,tt.w)(Re=>0===Re.length?(0,Ce.of)([]):(0,dt.a)(Re.map(A=>te.getForm$(A).pipe((0,St.U)(ie=>[A,ie]))))),(0,St.U)(Re=>Re.reduce((A,[ie,Pe])=>({...A,[`form__${ie}`]:Pe}),{}))),resolveSingle:()=>te.getFormNames$.pipe((0,tt.w)(Re=>(0,$t.T)(...Re.map(A=>te.getForm$(A).pipe((0,St.U)(ie=>[`form__${A}`,ie]))))))}),vl=te=>new Wr.UG({id:"pages_form",title:"Pages Form",build:()=>{Wr.LS.prototype.serializePageForm=Re=>new Promise(A=>{A(te.serializeForm(Re))})}}),yl=(te,Re)=>new Jt.e8({id:"panelpageform_serialize",title:"Panelpageform Serialize",create:({object:A})=>(0,Ce.of)({success:!1,entity:Re.serializeForm(new Ht.zd(A))}),read:({})=>(0,Ce.of)({success:!1}),update:({})=>(0,Ce.of)({success:!1}),delete:({})=>(0,Ce.of)({success:!1})}),ea=(te,Re,A)=>new bn.Sn({id:"form",title:"Form",editor:Ys,fetch:({settings:ie})=>(0,Ce.of)(new bn.qz).pipe((0,St.U)(()=>new Ht.Ac(te.deserializeAsObject(ie))),(0,tt.w)(Pe=>Re.getForm$(Pe.name).pipe((0,St.U)(nt=>[Pe,nt||new Ht.zd]),(0,Tt.d)([Pe,new Ht.zd]),(0,ce.q)(1))),(0,St.U)(([Pe,nt])=>[Pe,A.serializeForm(nt)]),(0,St.U)(([Pe,nt])=>new bn.qz({results:(0,Sr.JSONPath)({path:`$.${Pe.field}.*`,json:nt})}))),getBindings:({settings:ie})=>(0,Ce.of)([]).pipe((0,St.U)(()=>new Ht.Ac(te.deserializeAsObject(ie))),(0,St.U)(nt=>[new $n.ContentBinding({id:`form__${nt.name}`,type:"context"})]))}),_l=te=>Re=>{if(0===("/"+Re.map(A=>A.path).join("/")).indexOf(te.path)){const A=te.path.substr(1).split("/").length;return{consumed:Re,posParams:Re.reduce((ie,Pe,nt)=>0===nt?{...ie,panelPageId:new y.UrlSegment(te.id,{})}:nt>A-1?{...ie,["arg"+(nt-A)]:new y.UrlSegment(Pe.path,{})}:{...ie},{})}}return null},eu=te=>Re=>0===("/"+Re.map(A=>A.path).join("/")).indexOf(te.path)&&Re.map(A=>A.path).join("/").indexOf("/manage")>-1?(te.path.substr(1).split("/"),{consumed:Re,posParams:Re.reduce((ie,Pe,nt)=>0===nt?{...ie,panelPageId:new y.UrlSegment(te.id,{})}:{...ie},{})}):null;let nu=(()=>{class te{constructor(A,ie,Pe,nt){this.tokenizerService=A,this.panelResolverService=ie,this.styleResolverService=Pe,this.paneDatasource=nt,this.settings=[],this.panes=[],this.originMappings=[],this.resolvedContext={}}ngOnInit(){this.paneDatasource.pageChange$.pipe((0,tn.T)(1),(0,tt.w)(A=>this.panelResolverService.resolvePanes({panes:this.originPanes.map(ie=>new Ht.X6({...ie,metadata:new Map([...ie.metadata?ie.metadata:[],["page",A],["limit",this.paneDatasource.pageSize]])})),contexts:this.contexts,resolvedContext:this.resolvedContext})),(0,tt.w)(({resolvedPanes:A,originMappings:ie})=>this.styleResolverService.alterResolvedPanes({panel:this.panel,resolvedPanes:A,originMappings:ie}))).subscribe(({resolvedPanes:A,originMappings:ie})=>{this.originMappings=ie,this.paneDatasource.panes=A}),this.paneDatasource.panes=this.panes,this.trackByTpl="[._root.id]"}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(kr.G),e.\u0275\u0275directiveInject(Ht.Si),e.\u0275\u0275directiveInject(Ht.tF),e.\u0275\u0275directiveInject(Ht.x9))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["classifieds-ui-virtual-list-panel-renderer"]],inputs:{settings:"settings",panes:"panes",originPanes:"originPanes",originMappings:"originMappings",contexts:"contexts",resolvedContext:"resolvedContext",panel:"panel"},features:[e.\u0275\u0275ProvidersFeature([Ht.x9])],decls:2,vars:2,consts:[[1,"panes-viewport",3,"itemSize"],["class","pane-item",4,"cdkVirtualFor","cdkVirtualForOf"],[1,"pane-item"],[3,"pluginName","settings","contexts","resolvedContext"]],template:function(A,ie){1&A&&(e.\u0275\u0275elementStart(0,"cdk-virtual-scroll-viewport",0),e.\u0275\u0275template(1,_r,2,4,"div",1),e.\u0275\u0275elementEnd()),2&A&&(e.\u0275\u0275property("itemSize",75),e.\u0275\u0275advance(1),e.\u0275\u0275property("cdkVirtualForOf",ie.paneDatasource))},directives:[Ci.N7,en.rQ,Ci.xd,Ci.x0],styles:["[_nghost-%COMP%]{position:relative}.panes-viewport[_ngcontent-%COMP%]{height:100%;width:100%}"]}),te})(),Na=(()=>{class te{constructor(A){this.router=A}ngOnInit(){}onClick(){this.router.navigateByUrl(this.href)}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(y.Router))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["classifieds-ui-page-router-link"]],inputs:{href:"href",text:"text"},decls:2,vars:1,consts:[[3,"click"]],template:function(A,ie){1&A&&(e.\u0275\u0275elementStart(0,"a",0),e.\u0275\u0275listener("click",function(){return ie.onClick()}),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&A&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(ie.text))},styles:["[_nghost-%COMP%]:hover{cursor:pointer}"]}),te})(),ru=(()=>{class te{constructor(A,ie,Pe){this.routerStore=A,this.router=ie,this.panelPageListItemsService=Pe.getEntityCollectionService("PanelPageListItem")}ngOnInit(){}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(bt.yh),e.\u0275\u0275directiveInject(y.Router),e.\u0275\u0275directiveInject(_t.jn))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["classifieds-ui-catch-all-router"]],decls:2,vars:0,template:function(A,ie){1&A&&(e.\u0275\u0275elementStart(0,"p"),e.\u0275\u0275text(1,"Page Not Found"),e.\u0275\u0275elementEnd())},styles:[""]}),te})();const ta=new e.InjectionToken("PagesSettings");class iu{constructor(Re){this.disableRouting=!1,Re&&(this.disableRouting=Re.disableRouting)}}let bl=(()=>{class te{constructor(A,ie,Pe,nt){this.siteName=A,this.pagesSettings=ie,this.router=Pe,this.routesLoaded=!1,this.panelPageListItemsService=nt.getEntityCollectionService("PanelPageListItem")}canActivate(A,ie){return new Promise(this.pagesSettings.disableRouting?Pe=>Pe(!0):Pe=>{let nt=ie.url;-1!==nt.indexOf("?")&&(nt=ie.url.substr(0,nt.indexOf("?")));const Dt="path="+nt.substr(1).split("/").reduce((Wt,mn,Pn)=>[...Wt,0===Pn?`/${mn}`:`${Wt[Pn-1]}/${mn}`],[]).map(Wt=>this.encodePathComponent(Wt)).join("&path=")+`&site=${encodeURIComponent(`{"term":{"site.keyword":{"value":"${this.siteName}"}}}`)}`;(0,xt.D)([(0,Mt.s)(()=>!this.routesLoaded,this.panelPageListItemsService.getWithQuery(`site=${encodeURIComponent(`{"term":{"site.keyword":{"value":"${this.siteName}"}}}`)}&path={"wildcard":{"path.keyword":{"value":"*"}}}`).pipe((0,At.b)(()=>console.log("loaded page list items")),(0,St.U)(Wt=>Wt.filter(mn=>void 0!==mn.path&&""!==mn.path)),(0,St.U)(Wt=>Wt.map(mn=>new Ht.Z8(mn)).sort((mn,Pn)=>mn.path.split("/").length===Pn.path.split("/").length?mn.path.split("/")[mn.path.split("/").length-1]>Pn.path.split("/")[Pn.path.split("/").length-1]?-1:1:mn.path.split("/").length>Pn.path.split("/").length?-1:1)),(0,At.b)(Wt=>Wt.sort((mn,Pn)=>mn.path.length>Pn.path.length?1:-1)),(0,At.b)(Wt=>{const mn=this.router.config[0]._loadedConfig.routes;Wt.forEach(Pn=>{mn.unshift({matcher:_l(Pn),component:Fn,data:{panelPageListItem:Pn}}),mn.unshift({matcher:eu(Pn),component:bi}),console.log(`panels matcher: ${Pn.path}`)}),this.routesLoaded=!0}),(0,St.U)(()=>[])),(0,Ce.of)([])),this.panelPageListItemsService.getWithQuery(Dt).pipe((0,on.K)(Wt=>(0,Ce.of)([])),(0,At.b)(()=>console.log("loaded specific matched")),(0,St.U)(Wt=>Wt.reduce((mn,Pn)=>void 0===mn||mn.path.split("/").length<Pn.path.split("/").length?Pn:mn,void 0)),(0,St.U)(Wt=>{const mn=ie.url.substr(1).split("/").slice(Wt.path.split("/").length-1).join("/");return[Wt,mn]}))]).pipe((0,St.U)(([Wt,[mn,Pn]])=>[mn,Pn])).subscribe(([Wt,mn])=>{const Pn=`${Wt.path}${""===mn?"":`/${mn}`}?${Oi.stringify(A.queryParams)}`,br=this.router.parseUrl(Pn);console.log(`panels garud navigate: ${Wt.path}${""===mn?"":`/${mn}`}?${Oi.stringify(A.queryParams)}`),Pe(br)})})}encodePathComponent(A){return`{"term":{"path.keyword":{"value":"${A}"}}}`}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275inject(Nr.SITE_NAME),e.\u0275\u0275inject(ta),e.\u0275\u0275inject(y.Router),e.\u0275\u0275inject(_t.jn))},te.\u0275prov=e.\u0275\u0275defineInjectable({token:te,factory:te.\u0275fac}),te})(),wl=(()=>{class te{constructor(A){this.pageBuilderFacade=A}resolve(A,ie){return this.pageBuilderFacade.getPageInfo$}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275inject(Ht.QK))},te.\u0275prov=e.\u0275\u0275defineInjectable({token:te,factory:te.\u0275fac}),te})(),Cl=(()=>{class te{constructor(A,ie,Pe,nt){this.pageBuilderFacade=A,this.store=ie,this.urlGeneratorService=Pe,this.routerStore=nt}resolve(A,ie){const Pe=new bn.kr(ie);return(Pe.params&&Array.isArray(Pe.params)&&Pe.params.length>0?this.changePipeline(Pe.params):(0,Ce.of)([])).pipe((0,tt.w)(()=>Pe.params&&Array.isArray(Pe.params)&&Pe.params.length>0?this.rebuildParams(Pe.params):(0,Ce.of)([])),(0,St.U)(nt=>[nt,new Map([["tag",vn.Z()]])]),(0,tt.w)(([nt,Dt])=>this.urlGeneratorService.getUrl(Pe.url,nt,Dt).pipe((0,St.U)(Wt=>[Wt,Dt]))),(0,tt.w)(([nt,Dt])=>(this.pageBuilderFacade.loadRestData(`${Dt.get("tag")}`,new bn.kr({...Pe,url:nt})),this.store.pipe((0,bt.Ys)((0,Ht.Wb)(`${Dt.get("tag")}`)),(0,oe.h)(Wt=>void 0!==Wt),(0,St.U)(Wt=>Wt.results),(0,ce.q)(1)))))}changePipeline(A){const ie=A.reduce((Pe,nt)=>{switch(nt.mapping.type){case"route":return[...Pe,this.routeArgChange(nt.mapping.value)];case"querystring":return[...Pe,this.queryStringChange(nt.mapping.value)];case"form":return[...Pe,this.formChange(nt.mapping.value)];default:return[...Pe]}},[]);return(0,$t.T)(...ie)}routeArgChange(A){return this.pageBuilderFacade.getPageInfo$.pipe((0,St.U)(()=>{}))}queryStringChange(A){return new We.x}formChange(A){const[ie,Pe]=A.split(".",2);return this.pageBuilderFacade.getForm$(ie).pipe((0,At.b)(()=>console.log("form change")),(0,St.U)(()=>{}))}rebuildParams(A){return this.pageBuilderFacade.getPageInfo$.pipe((0,St.U)(ie=>ie?A:this.testParams(A)))}testParams(A){const ie=[],Pe=A.length;for(let nt=0;nt<Pe;nt++)ie.push(new tr.dO("route"===A[nt].mapping.type?{...A[nt],mapping:{type:"static",value:A[nt].mapping.testValue,context:void 0,testValue:void 0}}:A[nt]));return ie}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275inject(Ht.QK),e.\u0275\u0275inject(bt.yh),e.\u0275\u0275inject(un.o),e.\u0275\u0275inject(bt.yh))},te.\u0275prov=e.\u0275\u0275defineInjectable({token:te,factory:te.\u0275fac}),te})(),xl=(()=>{class te{constructor(A){this.pageBuilderFacade=A}resolve(A,ie){return this.pageBuilderFacade.getForm$(ie)}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275inject(Ht.QK))},te.\u0275prov=e.\u0275\u0275defineInjectable({token:te,factory:te.\u0275fac}),te})(),Hu=(()=>{class te extends Ht.DP{constructor(A,ie){super(),this.tokenizerService=A,this.paneDatasource=ie,this.trackByMapping=(Pe,nt)=>this.tokenizerService.replaceTokens(this.trackByTpl,this.tokenizerService.generateGenericTokens(nt.contexts[0].data))}get displayedColumns(){const A=this.panes.findIndex(ie=>ie.contexts.findIndex(Pe=>"_root"===Pe.name)>-1);return A>-1?Object.keys(this.panes[A].contexts.find(ie=>"_root"===ie.name).data):[]}ngOnInit(){console.log(this.panes),this.paneDatasource.panes=this.panes}rowData(A,ie){return console.log(`name: ${A}`),`${ie.contexts.find(Pe=>"_root"===Pe.name).data[A]}`}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275directiveInject(kr.G),e.\u0275\u0275directiveInject(Ht.x9))},te.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["lib-table-panel-renderer"]],features:[e.\u0275\u0275ProvidersFeature([Ht.x9]),e.\u0275\u0275InheritDefinitionFeature],decls:4,vars:4,consts:[["mat-table","","matSort","",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(A,ie){1&A&&(e.\u0275\u0275elementStart(0,"table",0),e.\u0275\u0275template(1,vo,3,1,"ng-container",1),e.\u0275\u0275template(2,Ra,1,0,"tr",2),e.\u0275\u0275template(3,rs,1,0,"tr",3),e.\u0275\u0275elementEnd()),2&A&&(e.\u0275\u0275property("dataSource",ie.paneDatasource),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",ie.displayedColumns),e.\u0275\u0275advance(1),e.\u0275\u0275property("matHeaderRowDef",ie.displayedColumns),e.\u0275\u0275advance(1),e.\u0275\u0275property("matRowDefColumns",ie.displayedColumns))},directives:[Tr.BZ,vi.nU,Tr.XQ,Tr.Gk,vi.YE,n.NgForOf,Tr.w1,Tr.fO,Tr.ge,Tr.Dz,Tr.ev,Tr.as,Tr.nj],styles:[""]}),te})(),Ku=(()=>{class te{constructor(A){this.attributeSerializer=A}handleFile(A){return(0,Ce.of)()}handlesType(A){return!1}implementsRendererOverride(){return!1}hasRendererOverride(A){return(0,Ce.of)(!1)}isDynamic(A){return!1}isData(A){return!1}buildDynamicItems(A,ie){return(0,Ce.of)([])}fetchDynamicData(A,ie){return(0,Ce.of)(new bn.qz)}getBindings(A,ie){return(0,Ce.of)([])}toObject(A){return(0,Ce.of)(this.attributeSerializer.deserializeAsObject(A))}buildSettings(A){return this.attributeSerializer.serialize(A,"root").attributes}fromPanes(A){return A.map(ie=>new Ht.X6(this.attributeSerializer.deserialize(ie)))}wrapPanel(A){return new Ht.s_({stylePlugin:void 0,settings:[],panes:A,columnSetting:new Ht.yw})}stateDefinition(A){return(0,Ce.of)({})}editorOptions(A){return(0,Ce.of)(new $n.ContentPluginEditorOptions)}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275inject(Rt.AttributeSerializerService))},te.\u0275prov=e.\u0275\u0275defineInjectable({token:te,factory:te.\u0275fac,providedIn:"root"}),te})(),ao=(()=>{class te{constructor(A,ie,Pe,nt){this.panelHandler=A,this.attributeSerializer=ie,this.panelsLoaderService=Pe,this.panelsSelectorService=nt}alterResolvedPanes({settings:A,resolvedPanes:ie,originMappings:Pe}){const nt=this.attributeSerializer.deserialize(new Rt.AttributeValue({name:"",displayName:"",computedValue:"",type:Rt.AttributeTypes.Complex,value:"",intValue:0,attributes:A})),Dt=nt&&void 0!==nt.labels&&Array.isArray(nt.labels)?nt.labels.map(mn=>new Ht.MQ(mn.mapping)):[];let Wt=[];return 0===Dt.length?(0,Ce.of)({resolvedPanes:ie,originMappings:Pe}):(Wt=ie.length!==Dt.length?ie.map((mn,Pn)=>new Ht.MQ({...Pn<Dt.length?Dt[Pn]:Dt[Dt.length-1],pane:Pn})).map(mn=>this.flattenSelector(mn)):Dt.map(mn=>this.flattenSelector(mn)),(0,xt.D)(ie.map((mn,Pn)=>this.panelsLoaderService.reducePanes([],mn,0)[0])).pipe((0,St.U)(mn=>mn.reduce((Pn,[br,Br])=>[...Pn,Br],[])),(0,St.U)(mn=>{const Pn=Wt.map(di=>this.selectWithTarget(di)),br=Wt.map(di=>this.selectWithoutTarget(di)),Br=Pn.map((di,Xr)=>this.panelsSelectorService.rebuildPage(mn[Wt[Xr][0]],di.slice(1))),Cr=br.map((di,Xr)=>this.panelsSelectorService.rebuildPage(mn[Wt[Xr][0]],di.slice(1))),Gr=[],Lr=ie.length;for(let di=0;di<Lr;di++)Gr.push(new Ht.X6({...ie[di],settings:this.panelHandler.buildSettings(Br[di])})),Gr.push(new Ht.X6({...ie[di],settings:this.panelHandler.buildSettings(Cr[di])}));return{resolvedPanes:Gr,originMappings:Pe}})))}stateDefinition(A){return(0,Ce.of)({})}flattenSelector(A){const ie=[];return null!=A.panel&&ie.push(A.panel),null!=A.pane&&ie.push(A.pane),null!=A.nested&&"object"==typeof A.nested&&this.flattenSelector(A.nested).forEach(Pe=>ie.push(Pe)),ie}selectWithTarget(A){return A.map(ie=>ie+1)}selectWithoutTarget(A){return A.map((ie,Pe)=>Pe===A.length-1?-1*(ie+1):0)}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275inject(Ku),e.\u0275\u0275inject(Rt.AttributeSerializerService),e.\u0275\u0275inject(Ht.eY),e.\u0275\u0275inject(Ht.S4))},te.\u0275prov=e.\u0275\u0275defineInjectable({token:te,factory:te.\u0275fac}),te})(),na=(()=>{class te{constructor(A,ie,Pe,nt){this.entityServices=A,this.pageBuilderFacade=ie,this.panelStateConverterService=Pe,this.attributeSerializer=nt,this.resolverCache$=new Map}get emptyPaneState(){return new Ht.Mn({state:this.attributeSerializer.serialize({displayAssociatedPane:""},"root")})}get entities$(){return this.entityServices.getEntityCollectionService("PanelPageState").entities$.pipe((0,At.b)(A=>{console.log("entities in store"),console.log(A)}))}get panelPage$(){return(0,dt.a)([this.pageBuilderFacade.getPageInfo$,this.entityServices.getEntityCollectionService("PanelPage").entities$]).pipe((0,St.U)(([A,ie])=>A&&void 0!==A.id&&""!==A.id&&null!==A.id&&-1!==ie.findIndex(Pe=>Pe.id===A.id)?ie.find(Pe=>Pe.id===A.id):void 0))}get fakePageInfo(){return new Ht.Q8({id:"948d6e7b-12ab-11ec-8ecd-661fdd19e6df",path:"",realPath:"",args:new Map})}resolve(A,ie){const Pe=ie&&ie.selectionMethod&&0!==ie.selectionMethod.length&&ie.id&&null!==ie.id&&""!==ie.id?`ps[id=${ie.id}]${ie.selectionMethod.map(nt=>`${nt}`).join("")}`:void 0;if(Pe&&this.resolverCache$.has(Pe))return this.resolverCache$.get(Pe);{const nt=this.resolve$(A,ie);return Pe&&this.resolverCache$.set(Pe,nt),nt}}resolve$(A,ie){return(0,dt.a)([this.panelPage$,this.entities$]).pipe((0,St.U)(([Pe,nt])=>[Pe,Pe&&-1!==nt.findIndex(Dt=>Dt.id===Pe.id)?nt.find(Dt=>Dt.id===Pe.id):new Ht.sY]),(0,tt.w)(([Pe,nt])=>this.pageBuilderFacade.getSelectionPath$.pipe((0,St.U)(Dt=>ie&&ie.selectionPath?ie.selectionPath:Dt),(0,At.b)(Dt=>Dt.join(",")),(0,St.U)(Dt=>Dt.map((Wt,mn)=>`${(mn+1)%2==0?"panes":(0===mn?"":"nestedPage.")+"panels"}[${Wt}]`)),(0,St.U)(Dt=>0===Dt.length?void 0:"$."+Dt.join(".")),(0,St.U)(Dt=>[Pe,nt,Dt]))),(0,At.b)(([Pe,nt,Dt])=>{console.log("page state context resolver"),console.log(Pe),console.log("query: "+Dt)}),(0,tt.w)(([Pe,nt,Dt])=>(0,Mt.s)(()=>!!Pe&&!nt,this.panelStateConverterService.convertPageToState(Pe).pipe((0,St.U)(Wt=>new Ht.sY({...Wt,panels:Wt.panels.map(mn=>new Ht.Cg({...mn,panes:mn.panes.map(Pn=>new Ht.Mn({...Pn,state:this.attributeSerializer.serialize({displayAssociatedPane:"y"},"root")}))}))})),(0,St.U)(Wt=>[Wt,Dt])),(0,Ce.of)([nt,Dt]))),(0,At.b)(([Pe,nt])=>{console.log("rebuilt state from realtime page"),console.log(Pe)}),(0,St.U)(([Pe,nt])=>nt?(0,Sr.JSONPath)({path:nt,json:Pe}):this.emptyPaneState),(0,St.U)(Pe=>Pe&&Array.isArray(Pe)&&0!==Pe.length?Pe[0]:this.emptyPaneState),(0,At.b)(Pe=>{console.log("json path match"),console.log(Pe)}),(0,St.U)(Pe=>this.attributeSerializer.deserializeAsObject(Pe.state)),(0,At.b)(Pe=>{console.log("final state"),console.log(Pe)}))}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275inject(_t.jn),e.\u0275\u0275inject(Ht.QK),e.\u0275\u0275inject(Ht.ty),e.\u0275\u0275inject(Rt.AttributeSerializerService))},te.\u0275prov=e.\u0275\u0275defineInjectable({token:te,factory:te.\u0275fac}),te})();const as=[{path:"pages",children:[{path:"create-panel-page",component:Zt},{path:"panelpage/:panelPageId/manage",component:bi}]}];let Yi=(()=>{class te{constructor(A,ie,Pe,nt,Dt,Wt,mn,Pn,br,Br,Cr,Gr,Lr,di,Xr,Si,Zi,$o,Is,Ai,ls,su,ra,qu,ja,au,Ba,La,Wu){Wt.registerMetadataMap(pl),[ui(di),zo(Xr),ni(Si),Ei(Zi),Go($o)].forEach(Vo=>{nt.register(Vo)}),A.forEach(Vo=>Pe.register(Vo)),ie.forEach(Vo=>Dt.register(Vo)),mn.register(Fi(Cr,Gr,Lr)),Pn.register(Zs(Lr)),Is.register(vl(Gr)),Is.getPlugin("pages_form").subscribe(Vo=>Vo.build()),ra.register(yl(au,Gr)),Ba.register(ea(La,Lr,Gr))}}return te.\u0275fac=function(A){return new(A||te)(e.\u0275\u0275inject($n.CONTENT_PLUGIN),e.\u0275\u0275inject(Ht.GR),e.\u0275\u0275inject($n.ContentPluginManager),e.\u0275\u0275inject(Kn.UV),e.\u0275\u0275inject(Ht.er),e.\u0275\u0275inject(_t.f0),e.\u0275\u0275inject(tr.bL),e.\u0275\u0275inject(Kn.NH),e.\u0275\u0275inject(ai.PluginConfigurationManager),e.\u0275\u0275inject(Kn.xv),e.\u0275\u0275inject(kr.G),e.\u0275\u0275inject(Ht.oL),e.\u0275\u0275inject(Ht.QK),e.\u0275\u0275inject(wl),e.\u0275\u0275inject(Cl),e.\u0275\u0275inject(xl),e.\u0275\u0275inject(Gt),e.\u0275\u0275inject(na),e.\u0275\u0275inject(Wr.$M),e.\u0275\u0275inject(li.HttpClient),e.\u0275\u0275inject(_t.xc),e.\u0275\u0275inject(_t.jh),e.\u0275\u0275inject(Jt.YS),e.\u0275\u0275inject(_t.f0),e.\u0275\u0275inject(_t.sP),e.\u0275\u0275inject(tr.nU),e.\u0275\u0275inject(bn.Ar),e.\u0275\u0275inject(Rt.AttributeSerializerService),e.\u0275\u0275inject(Jt.f0))},te.\u0275mod=e.\u0275\u0275defineNgModule({type:te}),te.\u0275inj=e.\u0275\u0275defineInjector({providers:[bl,wl,Cl,xl,Gt,na,{provide:Nr.EMBEDDABLE_COMPONENT,useValue:Na,multi:!0},{provide:Nr.EMBEDDABLE_COMPONENT,useValue:$.lF,multi:!0},{provide:Nr.EMBEDDABLE_COMPONENT,useValue:Fn,multi:!0},{provide:yo,useClass:yo},{provide:So,useClass:So},{provide:ki,useClass:ki},{provide:Ao,useClass:Ao},{provide:so,useClass:so},{provide:ao,useClass:ao},{provide:$n.CONTENT_PLUGIN,useFactory:gl,multi:!0,deps:[yo]},{provide:$n.CONTENT_PLUGIN,useFactory:Zl,multi:!0,deps:[So]},{provide:$n.CONTENT_PLUGIN,useFactory:Fa,multi:!0,deps:[ki]},{provide:$n.CONTENT_PLUGIN,useFactory:os,multi:!0,deps:[Ao]},{provide:$n.CONTENT_PLUGIN,useFactory:oi,multi:!0,deps:[so]},{provide:Ht.GR,useValue:new Ht.tA({id:"virtuallist",name:"virtuallist",title:"Virtual List",editorComponent:void 0,renderComponent:nu}),multi:!0},{provide:Ht.GR,useFactory:ss,multi:!0,deps:[ao]},{provide:Ht.GR,useValue:new Ht.tA({id:"table",name:"table",title:"Table",editorComponent:void 0,renderComponent:Hu}),multi:!0}],imports:[[n.CommonModule,x.u5,x.UX,z.MaterialModule,c.o9,d.fX,y.RouterModule.forChild(as),S.s,$.JP.forChild(),p.bB,mi.IX,Nr.UtilsModule,kr.W,Kn.Lu,Rt.AttributesModule,Zn.cO,wn.xu,wr,Ht.r9,an.cb,On.J9,tr.bI,Wr.D5,bn.zG,en.sm]]}),te})()},2570:(it,K,u)=>{u.d(K,{M0:()=>Sr,i9:()=>hr,Ac:()=>Mn,YZ:()=>nr,oL:()=>jn,fr:()=>Gn,z1:()=>J,Jr:()=>ge,yw:()=>_n,Xt:()=>T,QK:()=>vn,X6:()=>Bt,x9:()=>O,RD:()=>er,Mn:()=>mr,ms:()=>kn,s_:()=>Yt,iE:()=>xn,Z8:()=>ct,zd:()=>rr,Ly:()=>Qn,WP:()=>kt,MQ:()=>Y,sY:()=>Xn,Q8:()=>an,hT:()=>Jn,Si:()=>At,Cg:()=>ir,ty:()=>dt,DP:()=>Ce,WX:()=>Mt,eY:()=>We,r9:()=>M,S4:()=>pt,ki:()=>Vt,Ik:()=>Ht,GR:()=>$r,tA:()=>oe,er:()=>St,tF:()=>tt,Wb:()=>ce,YA:()=>kr,D8:()=>Zn});var e=u(3192),n=u(7451),y=u(2341),x=u(2508),$=u(745),c=u(6317),d=u(5330),p=u(1640),z=u(3336),S=u(253),V=u(7714),N=u(635),U=u(2673),H=u(116),Q=u(4744),Z=u(3158),ue=u(3853),G=u(9337),X=u(9295),ee=u(5276),ve=u(8448),Oe=u(9376),Le=u(2062),be=u(8193),m=u(5074),P=u(7371),b=u(207),_=u(2063),R=u(1276),E=u(6102),ne=u(4865),me=u(1484),Ee=u(5892),se=u(6517),ze=u(9367),Ge=u(2044),xe=u(1005),Xe=(u(1562),u(3271)),lt=u(6088),He=u(884),Ye=u(7878),ht=u(7400),Se=u(4363),he=u(7193),pe=u(6510),Fe=u(9984),Je=u(8714),we=u(6152);const le=({body:bt,headers:_t,hostname:Ze,method:jt="GET",path:Jt="/",port:en=443,protocol:nn="https:",query:un,service:rn,cognitoSettings:cn,authFacade:Sn})=>(0,$.of)(new pe.aW({body:bt,headers:_t,hostname:Ze,method:jt,path:Jt,port:en,protocol:nn,query:un})).pipe((0,G.b)(()=>console.log(".marker({ event: BEGIN , context: s3, entity: sig , op: signv4 , meta: {  } })")),(0,U.w)(Vn=>(0,ht.D)(new he.L1({credentials:(0,Ye.s)({client:new He.Q({region:cn.region}),identityPoolId:cn.identityPoolId,logins:{[`cognito-idp.${cn.region}.amazonaws.com/${cn.userPoolId}`]:()=>(0,Se.z)(Sn.getUser$.pipe((0,N.U)(tr=>tr?tr.id_token:void 0)))}}),region:cn.region,service:rn,sha256:Fe.Sha256}).sign(Vn).then(tr=>(console.log(".marker({ event: RESOLVED, entity: s3 , op: signv4 , meta: {  } })"),tr))).pipe((0,G.b)(()=>console.log(".marker({ /s3/sign/after/sig })")),(0,X.q)(1))),(0,N.U)(Vn=>Vn),(0,G.b)(()=>console.log(".marker({ event: END , context: s3, entity: sig , op: signv4 , meta: {  } })")));let D=(()=>{class bt{constructor(Ze,jt,Jt,en,nn,un,rn){Jt.register(((bt,_t,Ze,jt,Jt,en)=>new Ge.e8({id:"aws_s3_entity",title:"AWS S3 Entity",create:({object:nn,identity:un,params:rn,parentObject:cn})=>(0,$.of)({success:!1}).pipe(jt.resolveParams({params:rn}),(0,U.w)(({options:Sn})=>un({object:nn,parentObject:cn}).pipe((0,N.U)(({identity:Vn})=>({identity:Vn,options:Sn})))),(0,U.w)(({options:Sn,identity:Vn})=>le({method:"PUT",body:JSON.stringify(nn),headers:{"Content-Type":"application/json",host:`${Sn.bucket}.s3.amazonaws.com`},hostname:`${Sn.bucket}.s3.amazonaws.com`,path:`${Sn.prefix}${Vn}.json`,protocol:"https:",service:"s3",cognitoSettings:Ze,authFacade:_t}).pipe((0,N.U)(tr=>({signedHttpRequest:tr,options:Sn})))),(0,G.b)(({signedHttpRequest:Sn})=>delete Sn.headers.host),(0,N.U)(({signedHttpRequest:Sn,options:Vn})=>({signedHttpRequest:Sn,options:Vn,url:`https://${Vn.bucket}.s3.amazonaws.com${Sn.path}`})),(0,U.w)(({signedHttpRequest:Sn,url:Vn})=>Jt.put(Vn,JSON.stringify(nn),{headers:Sn.headers,withCredentials:!1})),(0,N.U)(()=>({success:!0}))),read:({})=>(0,$.of)({success:!1}),update:({object:nn,identity:un,params:rn})=>(0,$.of)({success:!1}).pipe(jt.resolveParams({params:rn}),(0,U.w)(({options:cn})=>un({object:nn}).pipe((0,N.U)(({identity:Sn})=>({identity:Sn,options:cn})))),(0,U.w)(({options:cn,identity:Sn})=>le({method:"PUT",body:JSON.stringify(nn),headers:{"Content-Type":"application/json",host:`${cn.bucket}.s3.amazonaws.com`},hostname:`${cn.bucket}.s3.amazonaws.com`,path:`${cn.prefix}${Sn}.json`,protocol:"https:",service:"s3",cognitoSettings:Ze,authFacade:_t}).pipe((0,N.U)(Vn=>({signedHttpRequest:Vn,options:cn})))),(0,G.b)(({signedHttpRequest:cn})=>delete cn.headers.host),(0,N.U)(({signedHttpRequest:cn,options:Sn})=>({signedHttpRequest:cn,options:Sn,url:`https://${Sn.bucket}.s3.amazonaws.com${cn.path}`})),(0,U.w)(({signedHttpRequest:cn,url:Sn})=>Jt.put(Sn,JSON.stringify(nn),{headers:cn.headers,withCredentials:!1})),(0,N.U)(()=>({success:!0}))),delete:({})=>(0,$.of)({success:!1}),query:({rule:nn,params:un})=>(0,$.of)({entities:[],success:!1}).pipe(jt.resolveParams({params:un}),(0,N.U)(({options:rn})=>({options:rn,identityCondition:nn.conditions.all.map(cn=>cn.any.find(Sn=>"identity"===Sn.fact)).find(cn=>!!cn)})),(0,U.w)(({identityCondition:rn,options:cn})=>(0,d.s)(()=>void 0!==rn&&rn&&"identity"===rn.fact&&cn&&cn.bucket,le({method:"GET",body:void 0,headers:{"Content-Type":"application/json",host:`${cn?cn.bucket:""}.s3.amazonaws.com`},hostname:`${cn?cn.bucket:""}.s3.amazonaws.com`,path:`${cn&&cn.prefix?cn.prefix:""}${rn?rn.value:""}.json`,protocol:"https:",service:"s3",cognitoSettings:Ze,authFacade:_t}).pipe((0,G.b)(()=>console.log(".marker({ event: AFTER , entity: s3 , op: query , meta: { action: createSignedRequest } })")),(0,G.b)(Sn=>delete Sn.headers.host),(0,N.U)(Sn=>({signedHttpRequest:Sn,options:cn,url:`https://${cn.bucket}.s3.amazonaws.com${Sn.path}`})),(0,G.b)(()=>console.log(".marker({ event: BEFORE , entity: crud , op: query , meta: { http: get } })")),(0,U.w)(({signedHttpRequest:Sn,url:Vn})=>Jt.get(Vn,{headers:Sn.headers,withCredentials:!1})),(0,G.b)(()=>console.log(".marker({ event: AFTER , entity: s3 , op: query , meta: { http: get } })")),(0,N.U)(Sn=>({entities:Sn?[Sn]:[],success:!!Sn}))),(0,$.of)({entities:[],success:!1}))))}))(0,en,Ze,nn,un))}}return bt.\u0275fac=function(Ze){return new(Ze||bt)(n.\u0275\u0275inject(lt.NR),n.\u0275\u0275inject(n.PLATFORM_ID),n.\u0275\u0275inject(Ge.YS),n.\u0275\u0275inject(Xe.jE),n.\u0275\u0275inject(Je.nU),n.\u0275\u0275inject(we.HttpClient),n.\u0275\u0275inject(_.AsyncApiCallHelperService))},bt.\u0275mod=n.\u0275\u0275defineNgModule({type:bt}),bt.\u0275inj=n.\u0275\u0275defineInjector({imports:[[_.UtilsModule,Xe.ny,Ge.Z5]]}),bt})();const B=({body:bt,headers:_t,hostname:Ze,method:jt="GET",path:Jt="/",port:en=443,protocol:nn="https:",query:un,service:rn,cognitoSettings:cn,authFacade:Sn})=>(0,$.of)(new pe.aW({body:bt,headers:_t,hostname:Ze,method:jt,path:Jt,port:en,protocol:nn,query:un})).pipe((0,G.b)(()=>console.log(".marker({ event: BEGIN , context: os, entity: sig , op: signv4 , meta: {  } })")),(0,U.w)(Vn=>(0,ht.D)(new he.L1({credentials:(0,Ye.s)({client:new He.Q({region:cn.region}),identityPoolId:cn.identityPoolId,logins:{[`cognito-idp.${cn.region}.amazonaws.com/${cn.userPoolId}`]:()=>(0,Se.z)(Sn.getUser$.pipe((0,N.U)(tr=>tr?tr.id_token:void 0)))}}),region:cn.region,service:rn,sha256:Fe.Sha256,applyChecksum:!1}).sign(Vn).then(tr=>(console.log(".marker({ event: RESOLVED, entity: os , op: signv4 , meta: {  } })"),tr))).pipe((0,G.b)(()=>console.log(".marker({ /os/sign/after/sig })")),(0,X.q)(1))),(0,N.U)(Vn=>Vn),(0,G.b)(()=>console.log(".marker({ event: END , context: os, entity: sig , op: signv4 , meta: {  } })")));let de=(()=>{class bt{constructor(Ze,jt,Jt,en,nn,un){Jt.register(((bt,_t,Ze,jt,Jt)=>new Ge.e8({id:"aws_opensearch_template",title:"AWS Opensearch Template",create:({})=>(0,$.of)({success:!1}),read:({})=>(0,$.of)({success:!1}),update:({})=>(0,$.of)({success:!1}),delete:({})=>(0,$.of)({success:!1}),query:({rule:en,params:nn})=>(0,$.of)({entities:[],success:!1}).pipe((0,U.w)(()=>nn&&0!==Object.keys(nn).length?(0,p.D)(Object.keys(nn).map(un=>jt.paramValue(nn[un],new Map).pipe((0,N.U)(rn=>({[un]:rn}))))).pipe((0,N.U)(un=>un.reduce((rn,cn)=>({...rn,...cn}),{})),(0,N.U)(un=>({options:un}))):(0,$.of)({options:{}})),(0,N.U)(({options:un})=>({options:un,body:JSON.stringify({id:un.id,params:en?en.conditions.all.reduce((rn,cn)=>({...rn,...cn.any.reduce((Sn,Vn)=>({...Sn,[Vn.path.substr(2)]:[...Sn[Vn.path.substr(2)]?Sn[Vn.path.substr(2)]:[],JSON.parse(decodeURIComponent(Vn.value))]}),{})}),{}):{}})})),(0,G.b)(({body:un})=>console.log("open search template query body",un)),(0,U.w)(({options:un,body:rn})=>B({method:"POST",body:rn,headers:{"Content-Type":"application/json",host:`${un.domain}.${un.region}.es.amazonaws.com`},hostname:`${un.domain}.${un.region}.es.amazonaws.com`,path:`/${un.index}/_search/template`,protocol:"https:",service:"es",cognitoSettings:Ze,authFacade:_t}).pipe((0,N.U)(cn=>({signedHttpRequest:cn,options:un})))),(0,U.w)(({signedHttpRequest:un,options:rn})=>(delete un.headers.host,Jt.post(`https://${rn.domain}.${rn.region}.es.amazonaws.com/${rn.index}/_search/template`,un.body,{headers:un.headers,withCredentials:!1}).pipe((0,N.U)(Sn=>({res:Sn,options:rn}))))),(0,N.U)(({res:un,options:rn})=>({entities:rn.hits&&un&&un.hits&&un.hits.hits?un.hits.hits.map(cn=>rn.source?cn._source:cn):[un],success:!0})))}))(0,en,Ze,nn,un)),Jt.register(((bt,_t,Ze,jt)=>new Ge.e8({id:"aws_opensearch_entity",title:"AWS Opensearch Entity",create:({object:Jt,identity:en,params:nn,parentObject:un})=>(0,$.of)({success:!1}).pipe(Ze.resolveParams({params:nn}),(0,U.w)(({options:rn})=>en({object:Jt,parentObject:un}).pipe((0,N.U)(({identity:cn})=>({identity:cn,options:rn})))),(0,U.w)(({options:rn,identity:cn})=>B({method:"PUT",body:JSON.stringify(Jt),headers:{"Content-Type":"application/json",host:`${rn.domain}.${rn.region}.es.amazonaws.com`},hostname:`${rn.domain}.${rn.region}.es.amazonaws.com`,path:`/${rn.index}/_doc/${cn}`,protocol:"https:",service:"es",...rn.pipeline?{query:{pipeline:rn.pipeline}}:{},cognitoSettings:_t,authFacade:bt}).pipe((0,N.U)(Sn=>({signedHttpRequest:Sn,options:rn,identity:cn})))),(0,U.w)(({signedHttpRequest:rn,options:cn,identity:Sn})=>(delete rn.headers.host,jt.put(`https://${cn.domain}.${cn.region}.es.amazonaws.com/${cn.index}/_doc/${Sn}`,JSON.stringify(Jt),{headers:rn.headers,withCredentials:!1,params:{...cn.pipeline?{pipeline:cn.pipeline}:{}}}).pipe((0,N.U)(tr=>({res:tr,options:cn}))))),(0,N.U)(()=>({success:!0}))),read:({})=>(0,$.of)({success:!1}),update:({object:Jt,identity:en,params:nn,parentObject:un})=>(0,$.of)({success:!1}).pipe(Ze.resolveParams({params:nn}),(0,U.w)(({options:rn})=>en({object:Jt,parentObject:un}).pipe((0,N.U)(({identity:cn})=>({identity:cn,options:rn})))),(0,U.w)(({options:rn,identity:cn})=>B({method:"PUT",body:JSON.stringify(Jt),headers:{"Content-Type":"application/json",host:`${rn.domain}.${rn.region}.es.amazonaws.com`},hostname:`${rn.domain}.${rn.region}.es.amazonaws.com`,path:`/${rn.index}/_doc/${cn}`,protocol:"https:",service:"es",...rn.pipeline?{query:{pipeline:rn.pipeline}}:{},cognitoSettings:_t,authFacade:bt}).pipe((0,N.U)(Sn=>({signedHttpRequest:Sn,options:rn,identity:cn})))),(0,U.w)(({signedHttpRequest:rn,options:cn,identity:Sn})=>(delete rn.headers.host,jt.put(`https://${cn.domain}.${cn.region}.es.amazonaws.com/${cn.index}/_doc/${Sn}`,JSON.stringify(Jt),{headers:rn.headers,withCredentials:!1,params:{...cn.pipeline?{pipeline:cn.pipeline}:{}}}).pipe((0,N.U)(tr=>({res:tr,options:cn}))))),(0,N.U)(()=>({success:!0}))),delete:({})=>(0,$.of)({success:!1}),query:({rule:Jt,params:en})=>(0,$.of)({entities:[],success:!1}).pipe((0,G.b)(()=>{console.log("crud open search query",Jt,en)}),Ze.resolveParams({params:en}),(0,N.U)(({options:nn})=>({options:nn,identityCondition:Jt.conditions.all.map(un=>un.any.find(rn=>"identity"===rn.fact)).find(un=>!!un)})),(0,U.w)(({options:nn,identityCondition:un})=>B({method:"GET",headers:{"Content-Type":"application/json",host:`${nn.domain}.${nn.region}.es.amazonaws.com`},hostname:`${nn.domain}.${nn.region}.es.amazonaws.com`,path:`/${nn.index}/_doc/${un?un.value:""}`,protocol:"https:",service:"es",cognitoSettings:_t,authFacade:bt}).pipe((0,G.b)(()=>console.log(".marker({ event: AFTER , entity: opensearch , op: query , meta: { action: createSignedRequest } })")),(0,G.b)(rn=>delete rn.headers.host),(0,N.U)(rn=>({signedHttpRequest:rn,options:nn,url:`https://${nn.domain}.${nn.region}.es.amazonaws.com${rn.path}`})),(0,G.b)(()=>console.log(".marker({ event: BEFORE , entity: crud , op: query , meta: { http: get } })")),(0,U.w)(({signedHttpRequest:rn,url:cn})=>jt.get(cn,{headers:rn.headers,withCredentials:!1}).pipe((0,Z.K)(()=>(0,$.of)(void 0)))),(0,G.b)(()=>console.log(".marker({ event: AFTER , entity: opensearch , op: query , meta: { http: get } })")),(0,N.U)(rn=>({entities:rn?[rn._source]:[],success:!!rn})))))}))(en,Ze,nn,un))}}return bt.\u0275fac=function(Ze){return new(Ze||bt)(n.\u0275\u0275inject(lt.NR),n.\u0275\u0275inject(n.PLATFORM_ID),n.\u0275\u0275inject(Ge.YS),n.\u0275\u0275inject(Xe.jE),n.\u0275\u0275inject(Je.nU),n.\u0275\u0275inject(we.HttpClient))},bt.\u0275mod=n.\u0275\u0275defineNgModule({type:bt}),bt.\u0275inj=n.\u0275\u0275defineInjector({imports:[[Xe.ny,Ge.Z5]]}),bt})();var ye=u(3599),Me=u(4567),Qe=u(9263),st=u(919),Ut=u(6853),qt=u(1755),Ue=u(2375),Lt=u(9066);function zt(bt,_t){if(1&bt&&(n.\u0275\u0275elementStart(0,"mat-option",5),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&bt){const Ze=_t.index;n.\u0275\u0275property("value",Ze),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1("panel page | level: ",Ze,"")}}function $e(bt,_t){if(1&bt&&(n.\u0275\u0275elementStart(0,"mat-form-field"),n.\u0275\u0275elementStart(1,"mat-select",3),n.\u0275\u0275template(2,zt,2,2,"mat-option",4),n.\u0275\u0275pipe(3,"async"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&bt){const Ze=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind1(3,1,Ze.panelPages$))}}function Ot(bt,_t){if(1&bt&&(n.\u0275\u0275elementStart(0,"mat-option",5),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&bt){const Ze=_t.index;n.\u0275\u0275property("value",Ze),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1("panel | ",Ze,"")}}function Ke(bt,_t){if(1&bt&&(n.\u0275\u0275elementStart(0,"mat-form-field"),n.\u0275\u0275elementStart(1,"mat-select",6),n.\u0275\u0275template(2,Ot,2,2,"mat-option",4),n.\u0275\u0275pipe(3,"async"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&bt){const Ze=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind1(3,1,Ze.panels$))}}function rt(bt,_t){if(1&bt&&(n.\u0275\u0275elementStart(0,"mat-option",5),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&bt){const Ze=_t.index;n.\u0275\u0275property("value",Ze),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1("pane | ",Ze,"")}}function Be(bt,_t){if(1&bt&&(n.\u0275\u0275elementStart(0,"mat-form-field"),n.\u0275\u0275elementStart(1,"mat-select",7),n.\u0275\u0275template(2,rt,2,2,"mat-option",4),n.\u0275\u0275pipe(3,"async"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&bt){const Ze=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind1(3,1,Ze.panes$))}}function et(bt,_t){if(1&bt&&n.\u0275\u0275element(0,"druid-panels-panelpage-linkedlist",8),2&bt){const Ze=n.\u0275\u0275nextContext();n.\u0275\u0275property("panelPages",Ze.nested)}}function wt(bt,_t){if(1&bt){const Ze=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"a",2),n.\u0275\u0275listener("click",function(){const en=n.\u0275\u0275restoreView(Ze).$implicit;return n.\u0275\u0275nextContext(2).onItemSelect(en.id)}),n.\u0275\u0275elementStart(1,"span",6),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()}if(2&bt){const Ze=_t.$implicit;n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate2("",Ze.title," [",Ze.id,"]")}}function Ft(bt,_t){if(1&bt&&(n.\u0275\u0275elementStart(0,"mat-nav-list"),n.\u0275\u0275template(1,wt,3,2,"a",5),n.\u0275\u0275pipe(2,"async"),n.\u0275\u0275elementEnd()),2&bt){const Ze=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind1(2,1,Ze.panels$))}}class Vt{constructor(_t){_t&&(this.openSearchDomain=_t.openSearchDomain,this.s3Bucket=_t.s3Bucket)}}class ct{constructor(_t){this.gridItems=[],this.panels=[],this.contexts=[],this.rowSettings=[],this.entityPermissions=new Cn,_t&&(this.id=_t.id,this.layoutType=_t.layoutType,this.displayType=_t.displayType,this.name=_t.name?_t.name:void 0,this.title=_t.title?_t.title:void 0,this.site=_t.site?_t.site:void 0,this.userId=_t.userId?_t.userId:void 0,this.path=_t.path?_t.path:void 0,this.persistence=_t.persistence?new Oe.DB(_t.persistence):void 0,_t.panels&&(this.panels=_t.panels.map(Ze=>new Yt(Ze))),_t.gridItems&&(this.gridItems=_t.gridItems.map(Ze=>new pn(Ze))),_t.contexts&&(this.contexts=_t.contexts.map(Ze=>new ve.Js(Ze))),_t.layoutSetting&&(this.layoutSetting=new _n(_t.layoutSetting)),_t.rowSettings&&Array.isArray(_t.rowSettings)&&(this.rowSettings=_t.rowSettings.map(Ze=>new _n(Ze))),_t.entityPermissions&&(this.entityPermissions=new Cn(_t.entityPermissions)),_t.cssFile&&(this.cssFile=_t.cssFile))}}class kt extends ct{}class Yt{constructor(_t){this.settings=[],this.panes=[],_t&&(this.name=_t.name?_t.name:void 0,this.label=_t.label?_t.label:void 0,this.stylePlugin=_t.stylePlugin,_t.settings&&(this.settings=_t.settings.map(Ze=>new ee.AttributeValue(Ze))),_t.panes&&(this.panes=_t.panes.map(Ze=>new Bt(Ze))),_t.columnSetting&&(this.columnSetting=new _n(_t.columnSetting)))}}class Bt{constructor(_t){this.settings=[],this.locked=!1,this.contexts=[],_t&&(this.name=_t.name,this.label=_t.label,this.contentPlugin=_t.contentPlugin,this.locked=void 0!==_t.locked&&_t.locked,_t.linkedPageId&&(this.linkedPageId=_t.linkedPageId),void 0!==_t.metadata&&(this.metadata=new Map([..._t.metadata])),void 0!==_t.settings&&(this.settings=_t.settings.map(Ze=>new ee.AttributeValue(Ze))),void 0!==_t.contexts&&(this.contexts=_t.contexts.map(Ze=>new ve.Js(Ze))),void 0!==_t.rule&&"string"!=typeof _t.rule&&(this.rule={..._t.rule}),_t.nestedPage&&(this.nestedPage=new ct(_t.nestedPage)),_t.resolvedContext&&(this.resolvedContext={..._t.resolvedContext}))}}class pn{constructor(_t){_t&&(this.cols=_t.cols,this.rows=_t.rows,this.x=_t.x,this.y=_t.y,this.weight=_t.weight)}}class _n{constructor(_t){this.settings=[],_t&&_t.settings&&Array.isArray(_t.settings)&&(this.settings=_t.settings.map(Ze=>new ee.AttributeValue(Ze)))}}class Cn{constructor(_t){this.readUserIds=[],this.writeUserIds=[],this.deleteUserIds=[],_t&&(this.readUserIds=_t.readUserIds?_t.readUserIds.map(Ze=>Ze):[],this.writeUserIds=_t.writeUserIds?_t.writeUserIds.map(Ze=>Ze):[],this.deleteUserIds=_t.deleteUserIds?_t.deleteUserIds.map(Ze=>Ze):[])}}let xn=(()=>{class bt{constructor(Ze){this.attributeSerializer=Ze}handleFile(Ze){return(0,$.of)()}handlesType(Ze){return!1}implementsRendererOverride(){return!1}hasRendererOverride(Ze){return(0,$.of)(!1)}isDynamic(Ze){return!1}isData(Ze){return!1}buildDynamicItems(Ze,jt){return(0,$.of)([])}fetchDynamicData(Ze,jt){return(0,$.of)(new be.qz)}getBindings(Ze,jt){return(0,$.of)([])}toObject(Ze){return(0,$.of)(this.attributeSerializer.deserializeAsObject(Ze))}buildSettings(Ze){return this.attributeSerializer.serialize(Ze,"root").attributes}fromPanes(Ze){return Ze.map(jt=>new Bt(this.attributeSerializer.deserialize(jt)))}wrapPanel(Ze){return new Yt({stylePlugin:void 0,settings:[],panes:Ze,columnSetting:new _n})}stateDefinition(Ze){return(0,$.of)({})}editorOptions(Ze){return(0,$.of)(new Le.ContentPluginEditorOptions)}}return bt.\u0275fac=function(Ze){return new(Ze||bt)(n.\u0275\u0275inject(ee.AttributeSerializerService))},bt.\u0275prov=n.\u0275\u0275defineInjectable({token:bt,factory:bt.\u0275fac,providedIn:"root"}),bt})(),Qn=(()=>{class bt{constructor(Ze,jt){this.fb=Ze,this.panelHandler=jt,this.panelPages$=new c.X([]),this.panels$=new c.X([]),this.panes$=new c.X([]),this.nested$=new c.X([]),this.formGroup=this.fb.group({panelPage:this.fb.control(void 0),panel:this.fb.control(void 0),pane:this.fb.control(void 0),nested:this.fb.control(void 0)}),this.panelPageSub=this.formGroup.get("panelPage").valueChanges.subscribe(Jt=>{this.panels$.next(new ct(this.panelPages$.value[Jt]).panels)}),this.panelSub=this.formGroup.get("panel").valueChanges.subscribe(Jt=>{this.panes$.next(new Yt(this.panels$.value[Jt]).panes)}),this.paneSub=this.formGroup.get("pane").valueChanges.pipe((0,N.U)(Jt=>this.panes$.value[Jt]),(0,U.w)(Jt=>(0,d.s)(()=>"panel"===Jt.contentPlugin,this.panelHandler.toObject(Jt.settings),(0,$.of)(void 0))),(0,H.h)(Jt=>!!Jt)).subscribe(Jt=>{this.nested$.next([Jt])}),this.onTouched=()=>{}}set panelPages(Ze){this.panelPages$.next(Ze)}set panels(Ze){this.panels$.next(Ze)}set panes(Ze){this.panes$.next(Ze)}get panelPages(){return this.panelPages$.value&&Array.isArray(this.panelPages$.value)?this.panelPages$.value:[]}get panels(){return this.panels$.value&&Array.isArray(this.panels$.value)?this.panels$.value:[]}get panes(){return this.panes$.value&&Array.isArray(this.panes$.value)?this.panes$.value:[]}get nested(){return this.nested$.value&&void 0!==typeof this.nested$.value&&this.nested$.value.length>0?[...this.nested$.value]:void 0}writeValue(Ze){Ze&&this.formGroup.setValue(Ze,{emitEvent:!1})}registerOnChange(Ze){this.formGroup.valueChanges.subscribe(Ze)}registerOnTouched(Ze){this.onTouched=Ze}setDisabledState(Ze){Ze?this.formGroup.disable():this.formGroup.enable()}validate(Ze){return this.formGroup.valid?null:{invalidForm:{valid:!1}}}}return bt.\u0275fac=function(Ze){return new(Ze||bt)(n.\u0275\u0275directiveInject(x.qu),n.\u0275\u0275directiveInject(xn))},bt.\u0275cmp=n.\u0275\u0275defineComponent({type:bt,selectors:[["druid-panels-panelpage-linkedlist"]],inputs:{panelPages:"panelPages",panels:"panels",panes:"panes"},features:[n.\u0275\u0275ProvidersFeature([{provide:x.JU,useExisting:(0,n.forwardRef)(()=>bt),multi:!0},{provide:x.Cf,useExisting:(0,n.forwardRef)(()=>bt),multi:!0}])],decls:5,vars:5,consts:[[3,"formGroup"],[4,"ngIf"],["formControlName","nested",3,"panelPages",4,"ngIf"],["required","","formControlName","panelPage"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["required","","formControlName","panel"],["required","","formControlName","pane"],["formControlName","nested",3,"panelPages"]],template:function(Ze,jt){1&Ze&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275template(1,$e,4,3,"mat-form-field",1),n.\u0275\u0275template(2,Ke,4,3,"mat-form-field",1),n.\u0275\u0275template(3,Be,4,3,"mat-form-field",1),n.\u0275\u0275template(4,et,1,1,"druid-panels-panelpage-linkedlist",2),n.\u0275\u0275elementEnd()),2&Ze&&(n.\u0275\u0275property("formGroup",jt.formGroup),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",jt.panelPages.length>0),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",jt.panels.length>0),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",jt.panes.length>0),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",jt.nested))},directives:[m.KE,P.gD,b.ey,bt,x.JL,x.sg,e.NgIf,x.Q7,x.JJ,x.u,e.NgForOf],pipes:[e.AsyncPipe],encapsulation:2}),bt})(),dr=(()=>{class bt{constructor(Ze,jt,Jt,en,nn,un){this.siteName=Ze,this.bottomSheetRef=jt,this.handler=Jt,this.dialog=en,this.fb=nn,this.selectedIndex=0,this.panelPagesService=un.getEntityCollectionService("PanelPage"),this.panelPageListItemsService=un.getEntityCollectionService("PanelPageListItem")}ngOnInit(){}onNewSelect(){const Ze=E.Z(),jt=new ct({id:void 0,layoutType:"split",displayType:"page",site:this.siteName,gridItems:[],panels:[],layoutSetting:new _n,rowSettings:[]});this.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:"panel",name:Ze,label:Ze,rule:new x.NI(""),settings:this.fb.array(this.handler.buildSettings(jt).map(Jt=>this.convertToGroup(Jt)))})),this.bottomSheetRef.dismiss()}onLinkSelect(){this.selectedIndex=1,this.panels$=this.panelPageListItemsService.getWithQuery(`site=${encodeURIComponent(this.siteName)}`)}onEmbedSelect(){const Ze=E.Z();this.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:"panel",name:Ze,label:Ze,rule:new x.NI(""),locked:new x.NI(!0),settings:this.fb.array([])})),this.bottomSheetRef.dismiss()}onItemSelect(Ze){const jt=E.Z();this.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:"panel",name:jt,label:jt,rule:new x.NI(""),linkedPageId:new x.NI(Ze,x.kI.required),locked:new x.NI(!0),settings:this.fb.array([])})),this.bottomSheetRef.dismiss()}convertToGroup(Ze){const jt=this.fb.group({name:new x.NI(Ze.name,x.kI.required),type:new x.NI(Ze.type,x.kI.required),displayName:new x.NI(Ze.displayName,x.kI.required),value:new x.NI(Ze.value,x.kI.required),computedValue:new x.NI(Ze.value,x.kI.required),attributes:new x.Oe([])});return Ze.attributes&&Ze.attributes.length>0&&Ze.attributes.forEach(Jt=>{jt.get("attributes").push(this.convertToGroup(Jt))}),jt}}return bt.\u0275fac=function(Ze){return new(Ze||bt)(n.\u0275\u0275directiveInject(_.SITE_NAME),n.\u0275\u0275directiveInject(ne.oL),n.\u0275\u0275directiveInject(xn),n.\u0275\u0275directiveInject(me.uw),n.\u0275\u0275directiveInject(x.qu),n.\u0275\u0275directiveInject(y.jn))},bt.\u0275cmp=n.\u0275\u0275defineComponent({type:bt,selectors:[["classifieds-ui-panel-selector"]],inputs:{panelFormGroup:"panelFormGroup"},decls:11,vars:1,consts:[["mat-align-tabs","start",3,"selectedIndex"],["label","Type"],["mat-list-item","","mat-list-item","",3,"click"],["label","Search"],["matTabContent",""],["mat-list-item","","mat-list-item","",3,"click",4,"ngFor","ngForOf"],["mat-line",""]],template:function(Ze,jt){1&Ze&&(n.\u0275\u0275elementStart(0,"mat-tab-group",0),n.\u0275\u0275elementStart(1,"mat-tab",1),n.\u0275\u0275elementStart(2,"mat-nav-list"),n.\u0275\u0275elementStart(3,"a",2),n.\u0275\u0275listener("click",function(){return jt.onNewSelect()}),n.\u0275\u0275text(4,"New Panel"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"a",2),n.\u0275\u0275listener("click",function(){return jt.onLinkSelect()}),n.\u0275\u0275text(6,"Link Panel"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(7,"a",2),n.\u0275\u0275listener("click",function(){return jt.onEmbedSelect()}),n.\u0275\u0275text(8,"Embed Panel"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(9,"mat-tab",3),n.\u0275\u0275template(10,Ft,3,3,"ng-template",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&Ze&&n.\u0275\u0275property("selectedIndex",jt.selectedIndex)},directives:[Ee.SP,Ee.uX,se.Hk,se.Tg,Ee.Vc,e.NgForOf,b.X2],pipes:[e.AsyncPipe],styles:[""]}),bt})(),ur=(()=>{class bt{constructor(){}ngOnInit(){}}return bt.\u0275fac=function(Ze){return new(Ze||bt)},bt.\u0275cmp=n.\u0275\u0275defineComponent({type:bt,selectors:[["classifieds-ui-panel-editor"]],decls:2,vars:0,template:function(Ze,jt){1&Ze&&(n.\u0275\u0275elementStart(0,"p"),n.\u0275\u0275text(1,"panel-editor works!"),n.\u0275\u0275elementEnd())},styles:[""]}),bt})();class Xn{constructor(_t){this.panels=[],_t&&(this.id=_t.id,void 0!==_t.panels&&Array.isArray(_t.panels)&&(this.panels=_t.panels.map(Ze=>new ir(Ze))))}}class ir{constructor(_t){this.panes=[],_t&&void 0!==_t.panes&&Array.isArray(_t.panes)&&(this.panes=_t.panes.map(Ze=>new mr(Ze)))}}class mr{constructor(_t){_t&&(void 0!==_t.state&&(this.state=new ee.AttributeValue(_t.state)),null!=_t.nestedPage&&(this.nestedPage=new Xn(_t.nestedPage)))}}let hr=(()=>{class bt{constructor(Ze,jt,Jt,en,nn,un){this.siteName=Ze,this.panelHandler=jt,this.attributeSerializer=Jt,this.rulesResolver=en,this.dpm=nn,this.datasourceEvalutator=un}handleFile(Ze){return(0,$.of)([])}handlesType(Ze){return!1}implementsRendererOverride(){return!0}hasRendererOverride(Ze){return(0,$.of)(!1)}isDynamic(Ze){return!0}isData(Ze){return!0}fetchDynamicData(Ze,jt){const Jt=jt.has("dataPanes")?new Map(jt.get("dataPanes").map(nn=>[nn.name,nn])):new Map([]),en=new Map(Array.from(Jt).map(([nn,un])=>[nn,new be.Yh(this.attributeSerializer.deserializeAsObject(un.settings))]));return this.toObject(Ze).pipe((0,U.w)(nn=>this.datasourceEvalutator.evalDatasource({datasource:nn,metadata:jt,datasources:en})))}buildDynamicItems(Ze,jt){const Jt=new Map(jt.get("dataPanes").map(en=>[en.name,en]));return this.fetchDynamicData(Ze,jt).pipe((0,U.w)(en=>this.toObject(Ze).pipe((0,N.U)(nn=>[nn,en]))),(0,U.w)(([en,nn])=>this.getBindings(Ze,"pane").pipe((0,N.U)(un=>[en,nn,un]))),(0,U.w)(([en,nn,un])=>(0,d.s)(()=>0!==nn.results.length&&un.length>0,(0,p.D)(nn.results.map(rn=>(0,p.D)(un.filter(cn=>!Jt.has(cn.id)).map(cn=>(0,$.of)(jt.get("panes").find(Sn=>Sn.name===cn.id)).pipe((0,U.w)(Sn=>(0,d.s)(()=>Sn&&Sn.rule&&null!==Sn.rule&&""!==Sn.rule.condition,Sn?this.rulesResolver.evaluate(Sn.rule,[...jt.get("contexts"),...void 0!==Sn.contexts?Sn.contexts:[],new ve.Js({name:"_root",adaptor:"data",data:rn})]).pipe((0,N.U)(Vn=>[Sn,Vn])):(0,$.of)([Sn,!1]),(0,$.of)(!1).pipe((0,N.U)(Vn=>[Sn,Vn])))),(0,H.h)(([Sn,Vn])=>Vn),(0,N.U)(([Sn,Vn])=>Sn.name),(0,Q.d)(cn.id)))).pipe((0,N.U)(cn=>cn.reduce((Sn,Vn)=>[...Sn,Vn],[]))))).pipe((0,N.U)(rn=>[en,nn,rn])),new z.y(rn=>{rn.next([en,nn,[]]),rn.complete()}))),(0,N.U)(([en,nn,un])=>nn.results.reduce((rn,cn,Sn)=>[...rn,...un[Sn]?un[Sn].map(Vn=>new Bt({...jt.get("panes").find(tr=>tr.name===Vn),rule:void 0,label:E.Z(),contexts:[...jt.get("contexts"),new ve.Js({name:"_root",adaptor:"data",data:cn})]})):[]],[])),(0,N.U)(en=>new Yt({stylePlugin:void 0,settings:[],panes:en,columnSetting:new _n})),(0,N.U)(en=>this.panelHandler.buildSettings(new ct({id:void 0,layoutType:"grid",displayType:"page",site:this.siteName,gridItems:[],layoutSetting:new _n,rowSettings:[],panels:[en]}))),(0,N.U)(en=>en.find(nn=>"panels"===nn.name).attributes[0].attributes.find(nn=>"panes"===nn.name).attributes))}getBindings(Ze,jt,Jt){const en=Jt?new Map(Jt.get("dataPanes").map(nn=>[nn.name,nn])):new Map;return"context"===jt?this.toObject(Ze).pipe((0,N.U)(nn=>[nn,nn.params?nn.params.reduce((un,rn)=>[...un,..."form"===rn.mapping.type?[new Le.ContentBinding({id:`form__${rn.mapping.value.split(".",2)[0].trim()}`,type:"context"})]:[]],[]):[]]),(0,U.w)(([nn,un])=>this.dpm.getPlugin(nn.plugin).pipe((0,U.w)(rn=>rn.getBindings({settings:nn.settings,metadata:Jt}).pipe((0,N.U)(cn=>[nn,cn]))))),(0,U.w)(([nn,un])=>(0,p.D)(nn.renderer.bindings.reduce((rn,cn)=>[...rn,...en.has(cn.id)?[this.toObject(en.get(cn.id).settings)]:[]],[])).pipe((0,U.w)(rn=>(0,p.D)(rn.map(cn=>this.dpm.getPlugin(cn.plugin).pipe((0,U.w)(Sn=>Sn.getBindings({settings:cn.settings,metadata:Jt}))))).pipe((0,N.U)(cn=>cn.reduce((Sn,Vn)=>[...Sn,...Vn],un)),(0,Q.d)(un))),(0,Q.d)(un)))):this.toObject(Ze).pipe((0,U.w)(nn=>(0,d.s)(()=>nn.renderer.type===jt,(0,$.of)(nn.renderer.bindings),(0,$.of)([]))))}toObject(Ze){return(0,$.of)(this.attributeSerializer.deserializeAsObject(Ze))}buildSettings(Ze){return this.attributeSerializer.serialize(Ze,"root").attributes}getRenderType(Ze){const jt=[Ze.find(Jt=>"renderer"===Jt.name)].map(Jt=>Jt.attributes.find(en=>"type"===en.name));return jt.length>0?jt[0].value:void 0}stateDefinition(Ze){return(0,$.of)({autocomplete:{input:""},loading:"y"})}editorOptions(Ze){return this.toObject(Ze).pipe((0,U.w)(jt=>this.dpm.getPlugin(jt&&jt.plugin?jt.plugin:"data").pipe((0,N.U)(Jt=>[jt,Jt]))),(0,U.w)(([jt,Jt])=>Jt.editorOptions?Jt.editorOptions({settings:jt&&jt.settings?jt.settings:[]}):(0,$.of)(void 0)),(0,N.U)(jt=>new Le.ContentPluginEditorOptions({fullscreen:!!jt&&jt.fullscreen})))}}return bt.\u0275fac=function(Ze){return new(Ze||bt)(n.\u0275\u0275inject(_.SITE_NAME),n.\u0275\u0275inject(xn),n.\u0275\u0275inject(ee.AttributeSerializerService),n.\u0275\u0275inject(xe.iL),n.\u0275\u0275inject(be.Ar),n.\u0275\u0275inject(be.A7))},bt.\u0275prov=n.\u0275\u0275defineInjectable({token:bt,factory:bt.\u0275fac,providedIn:"root"}),bt})(),Or=(()=>{class bt{constructor(Ze,jt,Jt,en,nn){this.data=Ze,this.dialogRef=jt,this.fb=Jt,this.attributeSerializer=en,this.datasourceHandler=nn,this.datasource=new be.Yh,this.bindableOptions=[],this.contexts=[],this.formGroup=this.fb.group({source:this.fb.control("")})}ngOnInit(){const Ze=this.data.panelFormGroup.get("panes");if(this.bindableOptions=Ze.controls.reduce((jt,Jt)=>Jt.get("name").value?[...jt,Jt.get("name").value]:[...jt],[]),this.contexts=this.data.contexts.map(jt=>jt.name),void 0!==this.data.panelIndex&&this.data.paneIndex<Ze.length){const jt=Ze.at(this.data.paneIndex).get("settings").value.map(Jt=>new ee.AttributeValue(Jt));this.datasourceHandler.toObject(jt).subscribe(Jt=>{this.datasource=Jt})}}onSubmit(){const Ze=this.attributeSerializer.serialize(this.formGroup.value.source,"source"),jt=this.data.panelFormGroup.get("panes").at(this.data.paneIndex);void 0===this.data.paneIndex?(this.data.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:"datasource",name:new x.NI(""),label:new x.NI(""),rule:new x.NI(""),settings:this.fb.array(Ze.attributes.map(Jt=>this.attributeSerializer.convertToGroup(Jt)))})),console.log(this.data.panelFormGroup.get("panes").value)):(jt.get("settings").clear(),Ze.attributes.forEach(Jt=>jt.get("settings").push(this.attributeSerializer.convertToGroup(Jt)))),this.dialogRef.close()}}return bt.\u0275fac=function(Ze){return new(Ze||bt)(n.\u0275\u0275directiveInject(me.WI),n.\u0275\u0275directiveInject(me.so),n.\u0275\u0275directiveInject(x.qu),n.\u0275\u0275directiveInject(ee.AttributeSerializerService),n.\u0275\u0275directiveInject(hr))},bt.\u0275cmp=n.\u0275\u0275defineComponent({type:bt,selectors:[["classifieds-ui-datasource-editor"]],decls:4,vars:4,consts:[[3,"formGroup","ngSubmit"],["formControlName","source",3,"bindableOptions","contexts","datasource"],["type","submit"]],template:function(Ze,jt){1&Ze&&(n.\u0275\u0275elementStart(0,"form",0),n.\u0275\u0275listener("ngSubmit",function(){return jt.onSubmit()}),n.\u0275\u0275element(1,"classifieds-ui-datasource-form",1),n.\u0275\u0275elementStart(2,"button",2),n.\u0275\u0275text(3,"Save"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&Ze&&(n.\u0275\u0275property("formGroup",jt.formGroup),n.\u0275\u0275advance(1),n.\u0275\u0275property("bindableOptions",jt.bindableOptions)("contexts",jt.contexts)("datasource",jt.datasource))},directives:[be.df,x._Y,x.JL,x.sg,x.JJ,x.u],styles:[""]}),bt})();const fr=bt=>new Le.ContentPlugin({id:"panel",title:"Panel",selectionComponent:dr,editorComponent:ur,renderComponent:void 0,handler:bt}),Hr=bt=>new Le.ContentPlugin({id:"datasource",title:"Datasource",selectionComponent:void 0,editorComponent:Or,renderComponent:void 0,handler:bt}),pr=(0,Qe.PH)("[PageBuilder] Load Rest Data",(0,Qe.Ky)()),Er=(0,Qe.PH)("[PageBuilder] Load Rest Data Success",(0,Qe.Ky)()),Zn=((0,Qe.PH)("[PageBuilder] Load Rest Data Error",(0,Qe.Ky)()),(0,Qe.PH)("[PageBuilder] Set Page Info",(0,Qe.Ky)())),Nr=(0,Qe.PH)("[PageBuilder] Set Form",(0,Qe.Ky)()),kr=(0,Qe.PH)("[PageBuilder] Set Page",(0,Qe.Ky)()),Rt=(0,Qe.PH)("[PageBuilder] Selection Path",(0,Qe.Ky)());let wn=(()=>{class bt{constructor(Ze,jt,Jt){this.actions$=Ze,this.datasourceApi=jt,this.snippetParserService=Jt,this.loadRestData$=(0,ye.GW)(()=>this.actions$.pipe((0,ye.l4)(pr),(0,ue.b)(en=>this.fetchRestdata$(en.rest).pipe((0,Z.K)(()=>[]),(0,N.U)(nn=>void 0!==en.rest.renderer&&void 0!==en.rest.renderer.query&&""!==en.rest.renderer.query?(0,Me.JSONPath)({path:en.rest.renderer.query,json:nn}):nn),(0,N.U)(nn=>Er({tag:en.tag,data:new be.qz({results:nn})}))))))}fetchRestdata$(Ze){switch(Ze.method?Ze.method:"get"){case"post":case"POST":return(0,$.of)([]).pipe((0,U.w)(()=>this.snippetParserService.parseSnippet({snippet:Ze.body})),(0,U.w)(Jt=>this.datasourceApi.postData({url:Ze.url,body:Jt})));default:return this.datasourceApi.getData(Ze.url)}}}return bt.\u0275fac=function(Ze){return new(Ze||bt)(n.\u0275\u0275inject(ye.eX),n.\u0275\u0275inject(be.Bc),n.\u0275\u0275inject(st.TC))},bt.\u0275prov=n.\u0275\u0275defineInjectable({token:bt,factory:bt.\u0275fac}),bt})();class an{constructor(_t){_t&&(this.id=_t.id,this.path=_t.path,this.realPath=_t.realPath,this.args=_t.args)}}const On="pageBuilder",Kn=(0,Qe.Lq)({dataTags:[],datasets:[],pageInfo:void 0,formNames:[],forms:[],page:void 0,selectionPath:[]},(0,Qe.on)(Er,(bt,_t)=>{const Ze=bt.dataTags.findIndex(jt=>jt===_t.tag);if(Ze>-1&&void 0!==bt.forms[Ze]){const jt={...bt};return jt.datasets[Ze].push(_t.data),jt}return{...bt,dataTags:[...bt.dataTags,_t.tag],datasets:[...bt.datasets,[_t.data]]}}),(0,Qe.on)(Nr,(bt,_t)=>{const Ze=bt.formNames.findIndex(jt=>jt===_t.name);return Ze>-1&&void 0!==bt.forms[Ze]?{...bt,forms:bt.forms.map((jt,Jt)=>Jt===Ze?_t.form:jt)}:{...bt,formNames:[...bt.formNames,_t.name],forms:[...bt.forms,_t.form]}}),(0,Qe.on)(Zn,(bt,_t)=>({...bt,pageInfo:void 0!==_t.info?new an(_t.info):void 0})),(0,Qe.on)(kr,(bt,_t)=>({...bt,page:void 0!==_t.page?new ct(_t.page):void 0})),(0,Qe.on)(Rt,(bt,_t)=>({...bt,selectionPath:void 0!==_t.path?_t.path:[]})));function mi(bt,_t){return Kn(bt,_t)}const $r=new n.InjectionToken("StylePlugin"),T=new n.InjectionToken("PanelsSettings");let M=(()=>{class bt{constructor(Ze,jt,Jt,en,nn,un,rn,cn,Sn,Vn,tr,Wr){const Ci={PanelPageListItem:{entityName:"PanelPageListItem",crud:{aws_opensearch_template:{ops:["query"],params:{id:"panelpagelistitems",index:"classified_panelpages",hits:!0,source:!0,domain:(_t=Jt).openSearchDomain,region:"us-east-1"}},aws_opensearch_entity:{ops:["create","update"],params:{index:"classified_panelpages",domain:_t.openSearchDomain,region:"us-east-1"}}}},PanelPage:{entityName:"PanelPage",crud:{aws_s3_entity:{ops:["query","create","update"],params:{bucket:_t.s3Bucket,prefix:"panelpages/"}}}},PanelPageState:{entityName:"PanelPageState"}};var _t;en.registerMetadataMap(Ci),un.registerService("PanelPageState",new _.NoopDataService("PanelPageState")),un.registerService("PanelPage",new Ge.XN("PanelPage",Vn,tr,Wr)),un.registerService("PanelPageListItem",new Ge.XN("PanelPageListItem",Vn,tr,Wr)),jt.forEach(Oi=>nn.register(Oi)),rn.register(((bt,_t)=>new ze.UG({id:"panels",title:"Panels",build:()=>{ze.LS.prototype.writePaneState=(Ze,jt)=>new Promise(Jt=>{const en=bt.getEntityCollectionService("PanelPageState");en.getByKey(Ze.id).pipe((0,Z.K)(()=>(0,$.of)(new Xn({id:Ze.id,panels:[]}))),(0,N.U)(nn=>void 0===nn?new Xn({id:Ze.id,panels:[]}):nn),(0,N.U)(nn=>{const un=_t.serialize(jt,"root");let rn=new Xn({...nn,panels:[]});for(let cn=0;cn<Ze.panelIndex+1;cn++){rn.panels.push(cn<nn.panels.length?new ir({...nn.panels[cn],panes:[]}):new ir);for(let Sn=0;Sn<Ze.paneIndex+1;Sn++)rn.panels[cn].panes.push(cn===Ze.panelIndex&&Sn===Ze.paneIndex?new mr(cn<nn.panels.length&&Sn<nn.panels[cn].panes.length?{...nn.panels[cn].panes[Sn],state:un}:{state:un}):cn<nn.panels.length&&Sn<nn.panels[cn].panes.length?new mr({...nn.panels[cn].panes[Sn]}):new mr)}return rn}),(0,U.w)(nn=>en.upsert(nn))).subscribe(nn=>{Jt(nn)})})}}))(cn,Sn)),un.registerService("PanelPageForm",new Ge.XN("PanelPageForm",Vn,tr,Wr))}}return bt.\u0275fac=function(Ze){return new(Ze||bt)(n.\u0275\u0275inject(n.PLATFORM_ID),n.\u0275\u0275inject(Le.CONTENT_PLUGIN),n.\u0275\u0275inject(T),n.\u0275\u0275inject(y.f0),n.\u0275\u0275inject(Le.ContentPluginManager),n.\u0275\u0275inject(y.sP),n.\u0275\u0275inject(ze.$M),n.\u0275\u0275inject(y.jn),n.\u0275\u0275inject(ee.AttributeSerializerService),n.\u0275\u0275inject(Ge.YS),n.\u0275\u0275inject(y.f0),n.\u0275\u0275inject(Ge.f0))},bt.\u0275mod=n.\u0275\u0275defineNgModule({type:bt}),bt.\u0275inj=n.\u0275\u0275defineInjector({providers:[{provide:xn,useClass:xn},{provide:Le.CONTENT_PLUGIN,useFactory:fr,multi:!0,deps:[xn]},{provide:Le.CONTENT_PLUGIN,useFactory:Hr,multi:!0,deps:[hr]},{provide:y.xc,useClass:y.QB}],imports:[[e.CommonModule,x.u5,x.UX,Qe.Aw.forFeature(On,mi),ye.sQ.forFeature([wn]),R.MaterialModule,be.zG,Xe.ny,D,de,Ge.Z5]]}),bt})();class Y{constructor(_t){_t&&(this.panelPage=_t.panelPage,null!=_t.panel&&(this.panel=_t.panel),null!=_t.pane&&(this.pane=_t.pane),null!=_t.nested&&"object"==typeof _t.nested&&(this.nested=new Y(_t.nested)))}}let J=(()=>{class bt{constructor(Ze){this.controlContainer=Ze,this.savable=!0,this.nested=!1,this.dashboard=[],this.layoutSetting=new _n,this.rowSettings=[],this.ancestory=[]}get gridItems(){return[]}}return bt.\u0275fac=function(Ze){return new(Ze||bt)(n.\u0275\u0275directiveInject(x.gN))},bt.\u0275cmp=n.\u0275\u0275defineComponent({type:bt,selectors:[["classifieds-ui-layout-editor-base"]],inputs:{savable:"savable",nested:"nested",editor:"editor",dashboard:"dashboard",layoutSetting:"layoutSetting",rowSettings:"rowSettings",columnSettings:"columnSettings",editablePaneTpl:"editablePaneTpl",extraActionsAreaTmpl:"extraActionsAreaTmpl",contextsMenuTpl:"contextsMenuTpl",ancestory:"ancestory"},decls:0,vars:0,template:function(Ze,jt){},encapsulation:2}),bt})(),ge=(()=>{class bt{constructor(Ze){this.controlContainer=Ze,this.displayMainControls=!1,this.displayItemHeader=!1}get columnSettings(){return this.panelPage?this.panelPage.panels.reduce((jt,Jt)=>[...jt,new _n(Jt.columnSetting)],[]):[]}}return bt.\u0275fac=function(Ze){return new(Ze||bt)(n.\u0275\u0275directiveInject(x.gN,8))},bt.\u0275cmp=n.\u0275\u0275defineComponent({type:bt,selectors:[["classifieds-ui-layout-renderer-base"]],inputs:{panelPage:"panelPage",displayMainControls:"displayMainControls",displayItemHeader:"displayItemHeader",renderPanelTpl:"renderPanelTpl"},decls:0,vars:0,template:function(Ze,jt){},encapsulation:2}),bt})(),Ce=(()=>{class bt{constructor(){this.settings=[],this.panes=[],this.originMappings=[],this.ancestory=[]}mergeContexts(Ze){if(void 0!==Ze||void 0!==this.contexts)return void 0!==Ze&&void 0!==this.contexts?[...Ze,...this.contexts]:void 0!==Ze?Ze:this.contexts}}return bt.\u0275fac=function(Ze){return new(Ze||bt)},bt.\u0275cmp=n.\u0275\u0275defineComponent({type:bt,selectors:[["classifieds-ui-panel-style-renderer-base"]],inputs:{settings:"settings",panes:"panes",originPanes:"originPanes",originMappings:"originMappings",contexts:"contexts",ancestory:"ancestory"},decls:0,vars:0,template:function(Ze,jt){},encapsulation:2}),bt})(),We=(()=>{class bt{constructor(Ze,jt){this.es=Ze,this.panelHandler=jt}get panelPageService(){return this.es.getEntityCollectionService("PanelPage")}reducePage(Ze){return Ze.panels.reduce((jt,Jt,en)=>this.reducePanels(jt,Jt,en),[])}reducePanels(Ze,jt,Jt){return[...Ze,...jt.panes.reduce((en,nn,un)=>this.reducePanes(en,nn,un).map(rn=>rn.pipe((0,N.U)(([cn,Sn])=>[Jt,cn,Sn]))),[])]}reducePanes(Ze,jt,Jt){return[...Ze,..."panel"===jt.contentPlugin?[this.nestedPage$(jt).pipe((0,N.U)(en=>[Jt,en]))]:[]]}nestedPage$(Ze){return console.log("get nested panel page"),Ze.linkedPageId&&""!==Ze.linkedPageId?this.getByKey(Ze.linkedPageId).pipe((0,G.b)(()=>console.log(`get(${Ze.linkedPageId})`))):this.getEmbedded(Ze.settings).pipe((0,G.b)(()=>console.log("toObject()")))}remapNested(Ze,jt){jt.forEach(([Jt,en,nn])=>{Ze.panels[Jt].panes[en].nestedPage=nn})}getByKey(Ze){return this.panelPageService.getByKey(Ze).pipe((0,N.U)(jt=>new ct(jt)),(0,U.w)(jt=>(0,d.s)(()=>this.reducePage(jt).length>0,(0,p.D)(this.reducePage(jt)).pipe((0,G.b)(Jt=>this.remapNested(jt,Jt)),(0,N.U)(()=>jt)),(0,$.of)(jt))))}getEmbedded(Ze){return this.panelHandler.toObject(Ze).pipe((0,N.U)(jt=>new ct(jt)),(0,U.w)(jt=>(0,d.s)(()=>this.reducePage(jt).length>0,(0,p.D)(this.reducePage(jt)).pipe((0,G.b)(Jt=>this.remapNested(jt,Jt)),(0,N.U)(()=>jt)),(0,$.of)(jt))))}}return bt.\u0275fac=function(Ze){return new(Ze||bt)(n.\u0275\u0275inject(y.jn),n.\u0275\u0275inject(xn))},bt.\u0275prov=n.\u0275\u0275defineInjectable({token:bt,factory:bt.\u0275fac,providedIn:"root"}),bt})(),pt=(()=>{class bt{constructor(Ze){this.panelHandler=Ze}rebuildPage(Ze,jt){return new ct({...Ze,panels:this.rebuildPanels(Ze.panels,[...jt])})}rebuildPanels(Ze,jt){return Ze.filter((Jt,en)=>this.rebuildCondition(jt[0],en)).map(Jt=>new Yt({...Jt,panes:this.rebuildPanes(Jt.panes,jt.slice(1))}))}rebuildPanes(Ze,jt){return Ze.filter((Jt,en)=>this.rebuildCondition(jt[0],en)).map(Jt=>new Bt("panel"===Jt.contentPlugin?{...Jt,nestedPage:void 0,settings:this.panelHandler.buildSettings(this.rebuildPage(Jt.nestedPage,jt.slice(1)))}:{...Jt}))}rebuildCondition(Ze,jt){return 0===Ze||(Ze>-1?jt===Ze+-1*Ze:jt!==-1*Ze+Ze)}}return bt.\u0275fac=function(Ze){return new(Ze||bt)(n.\u0275\u0275inject(xn))},bt.\u0275prov=n.\u0275\u0275defineInjectable({token:bt,factory:bt.\u0275fac,providedIn:"root"}),bt})(),dt=(()=>{class bt{constructor(Ze){this.panelHandler=Ze}convertPageToState(Ze){return(0,$.of)(new Xn).pipe((0,U.w)(()=>(0,p.D)(Ze.panels.map(jt=>this.convertPanelToState(jt)))),(0,N.U)(jt=>new Xn({id:Ze.id,panels:jt})))}convertPanelToState(Ze){return(0,$.of)(new ir).pipe((0,U.w)(()=>(0,p.D)(Ze.panes.map(jt=>this.convertPaneToState(jt)))),(0,N.U)(jt=>new ir({panes:jt})))}convertPaneToState(Ze){return(0,$.of)(new mr).pipe((0,U.w)(jt=>(0,d.s)(()=>this.hasNestedPanelPage(Ze),this.panelHandler.toObject(Ze.settings).pipe((0,U.w)(Jt=>this.convertPageToState(Jt)),(0,N.U)(Jt=>new mr({state:new ee.AttributeValue,nestedPage:Jt}))),(0,$.of)(jt))))}hasNestedPanelPage(Ze){return"panel"===Ze.contentPlugin&&(null==Ze.linkedPageId||""===Ze.linkedPageId)}}return bt.\u0275fac=function(Ze){return new(Ze||bt)(n.\u0275\u0275inject(xn))},bt.\u0275prov=n.\u0275\u0275defineInjectable({token:bt,factory:bt.\u0275fac,providedIn:"root"}),bt})(),xt=(()=>{class bt{constructor(Ze){this.panelsLoaderService=Ze}walkPageHierarchy({panelPage:Ze,visitorFunc:jt,defaultv:Jt,ancestory:en}){return new z.y(nn=>{const un=Ze.panels.length,rn=[];for(let cn=0;cn<un;cn++){const Sn=Ze.panels[cn].panes.length;for(let Vn=0;Vn<Sn;Vn++)rn.push(jt({pane:Ze.panels[cn].panes[Vn],panelPage:Ze,ancestoryWithSelf:[...en,cn,Vn]})),Ze.panels[cn].panes[Vn].nestedPage&&Ze.panels[cn].panes[Vn].nestedPage.panels&&0!==Ze.panels[cn].panes[Vn].nestedPage.panels.length&&rn.push(this.walkPageHierarchy({panelPage:Ze,visitorFunc:jt,defaultv:Jt,ancestory:[...en,cn,Vn]}))}0===rn.length?(nn.next(Jt),nn.complete()):(0,p.D)(rn).pipe((0,N.U)(cn=>cn.reduce((Sn,Vn)=>[...Sn,...Vn],Jt)),(0,G.b)(cn=>{nn.next(cn),nn.complete()})).subscribe()})}}return bt.\u0275fac=function(Ze){return new(Ze||bt)(n.\u0275\u0275inject(We))},bt.\u0275prov=n.\u0275\u0275defineInjectable({token:bt,factory:bt.\u0275fac,providedIn:"root"}),bt})(),Mt=(()=>{class bt{constructor(Ze,jt){this.panelsVisitorService=Ze,this.cpm=jt,this.gatherPaneContexts=({pane:Jt,panelPage:en,ancestoryWithSelf:nn})=>this.cpm.getPlugin(Jt.contentPlugin).pipe((0,U.w)(un=>un.handler?un.handler.stateDefinition(Jt.settings):(0,$.of)({})),(0,N.U)(un=>new ve.Js({name:"panestate-"+nn.join("-"),adaptor:"data",plugin:"panestate",data:{id:en?en.id:"",selectionPath:[...nn],value:un}})),(0,N.U)(un=>[un]),(0,X.q)(1))}allActivePageContexts({panelPage:Ze,ancestory:jt=[]}){return this.panelsVisitorService.walkPageHierarchy({panelPage:Ze,ancestory:jt,visitorFunc:this.gatherPaneContexts,defaultv:[]})}}return bt.\u0275fac=function(Ze){return new(Ze||bt)(n.\u0275\u0275inject(xt),n.\u0275\u0275inject(Le.ContentPluginManager))},bt.\u0275prov=n.\u0275\u0275defineInjectable({token:bt,factory:bt.\u0275fac,providedIn:"root"}),bt})(),Nt=(()=>{class bt{constructor(Ze){this.attributeSerializer=Ze}buildToAncestorySpec({panelPageState:Ze,ancestory:jt}){for(let Jt=0;Jt<jt[0]+1;Jt++)if(Ze.panels.length<Jt+1&&Ze.panels.push(new ir),Jt===jt[0]&&jt.length>1)for(let en=0;en<jt[1]+1;en++)Ze.panels[jt[0]].panes.length<en+1&&Ze.panels[jt[0]].panes.push(new mr({state:this.attributeSerializer.serialize({},"root")})),en===jt[1]&&jt.length>2&&(Ze.panels[jt[0]].panes[en].nestedPage||(Ze.panels[jt[0]].panes[en].nestedPage=new Xn),this.buildToAncestorySpec({panelPageState:Ze.panels[jt[0]].panes[en].nestedPage,ancestory:jt.slice(2)}))}}return bt.\u0275fac=function(Ze){return new(Ze||bt)(n.\u0275\u0275inject(ee.AttributeSerializerService))},bt.\u0275prov=n.\u0275\u0275defineInjectable({token:bt,factory:bt.\u0275fac,providedIn:"root"}),bt})(),St=(()=>{class bt extends Ut.BasePluginManager{constructor(Ze,jt){super(Ze,jt)}pluginDef(){return(0,$.of)(new Ut.PluginDef({name:"style"}))}}return bt.\u0275fac=function(Ze){return new(Ze||bt)(n.\u0275\u0275inject(Ut.PluginConfigurationManager),n.\u0275\u0275inject(_.ModuleLoaderService))},bt.\u0275prov=n.\u0275\u0275defineInjectable({token:bt,factory:bt.\u0275fac,providedIn:"root"}),bt})(),tt=(()=>{class bt{constructor(Ze){this.spm=Ze}alterResolvedPanes({panel:Ze,resolvedPanes:jt,originMappings:Jt}){return(0,$.of)(void 0).pipe((0,U.w)(()=>Ze.stylePlugin&&""!==Ze.stylePlugin?this.spm.getPlugin(Ze.stylePlugin):(0,$.of)(void 0)),(0,U.w)(en=>en&&en.handler?en.handler.alterResolvedPanes({settings:Ze.settings,resolvedPanes:jt,originMappings:Jt}):(0,$.of)({resolvedPanes:jt,originMappings:Jt})))}}return bt.\u0275fac=function(Ze){return new(Ze||bt)(n.\u0275\u0275inject(St))},bt.\u0275prov=n.\u0275\u0275defineInjectable({token:bt,factory:bt.\u0275fac,providedIn:"root"}),bt})(),At=(()=>{class bt{constructor(Ze,jt,Jt,en){this.panelHandler=Ze,this.rulesResolver=jt,this.inlineContextResolver=Jt,this.cpm=en}usedContexts(Ze){return this.panesPlugins(Ze).pipe((0,U.w)(jt=>this.dataPanes(Ze).pipe((0,N.U)(Jt=>({plugins:jt,dataPanes:Jt})))),(0,U.w)(({plugins:jt,dataPanes:Jt})=>(0,p.D)(Ze.reduce((en,nn)=>{const un=jt.get(nn.contentPlugin);return void 0!==un.handler?[...en,un.handler.getBindings(nn.settings,"context",new Map([["dataPanes",Jt]])).pipe((0,N.U)(rn=>rn.map(cn=>cn.id)))]:[...en]},[])).pipe((0,N.U)(en=>en.reduce((nn,un)=>[...nn,...un],[])))))}staticPanes(Ze){return this.cpm.getPlugins(Ze.reduce((jt,Jt)=>-1===jt.findIndex(en=>en===Jt.contentPlugin)?[...jt,Jt.contentPlugin]:[...jt],[])).pipe((0,N.U)(jt=>Ze.filter(Jt=>void 0===jt.get(Jt.contentPlugin).handler||!jt.get(Jt.contentPlugin).handler.isDynamic(Jt.settings))))}dataPanes(Ze){return this.cpm.getPlugins(Ze.reduce((jt,Jt)=>-1===jt.findIndex(en=>en===Jt.contentPlugin)?[...jt,Jt.contentPlugin]:[...jt],[])).pipe((0,N.U)(jt=>Ze.filter(Jt=>void 0!==jt.get(Jt.contentPlugin).handler&&jt.get(Jt.contentPlugin).handler.isData(Jt.settings))))}panesPlugins(Ze){return this.cpm.getPlugins(Ze.reduce((jt,Jt)=>-1===jt.findIndex(en=>en===Jt.contentPlugin)?[...jt,Jt.contentPlugin]:[...jt],[]))}resolvePanes({panes:Ze,contexts:jt,resolvedContext:Jt}){return console.log("resolve panes"),this.panesPlugins(Ze).pipe((0,U.w)(en=>(0,p.D)(Ze.reduce((nn,un)=>{const rn=en.get(un.contentPlugin);return void 0!==rn.handler?[...nn,rn.handler.getBindings(un.settings,"pane").pipe((0,N.U)(cn=>cn.map(Sn=>Sn.id)))]:[...nn,(0,$.of)([])]},[])))).pipe((0,N.U)(en=>en.reduce((nn,un)=>[...nn,...un],[])),(0,U.w)(en=>this.panesPlugins(Ze).pipe((0,N.U)(nn=>[en,nn]))),(0,U.w)(([en,nn])=>(0,p.D)(Ze.reduce((un,rn)=>{const cn=nn.get(rn.contentPlugin);return void 0!==cn.handler&&cn.handler.isDynamic(rn.settings)?[...un,cn.handler.isData(rn.settings)&&-1!==en.findIndex(Sn=>Sn===rn.name)?(0,$.of)([]):(0,p.D)([this.staticPanes(Ze),this.dataPanes(Ze)]).pipe((0,U.w)(([Sn,Vn])=>cn.handler.buildDynamicItems(rn.settings,new Map([...void 0===rn.metadata?[]:rn.metadata,["tag",E.Z()],["panes",Sn],["dataPanes",Vn],["contexts",void 0!==jt?jt:[]]])).pipe((0,N.U)(tr=>this.panelHandler.fromPanes(tr)),(0,N.U)(tr=>this.panelHandler.wrapPanel(tr).panes),(0,X.q)(1))))]:""===rn.name||-1===en.findIndex(Sn=>Sn===rn.name)?[...un,(0,$.of)([new Bt({...rn,contexts:[...jt,...rn.contexts?rn.contexts:[]]})]).pipe((0,U.w)(Sn=>(0,d.s)(()=>null!=Sn[0].rule&&""!==Sn[0].rule.condition,this.rulesResolver.evaluate(Sn[0].rule,[...jt,...rn.contexts?rn.contexts:[]]).pipe((0,N.U)(Vn=>Vn?Sn:[])),(0,$.of)(Sn))))]:[...un]},[])).pipe((0,U.w)(un=>(0,d.s)(()=>0===un.reduce((rn,cn)=>[...rn,...cn],[]).length,(0,$.of)([un,[]]),(0,p.D)([...un.reduce((rn,cn)=>[...rn,...cn.map(Sn=>Sn.contexts&&0!==Sn.contexts.length?this.inlineContextResolver.resolveAll(Sn.contexts).pipe((0,X.q)(1)):(0,$.of)({}).pipe((0,X.q)(1)))],[])]).pipe((0,N.U)(rn=>[un,rn.map(cn=>({...cn,...Jt}))])))),(0,N.U)(([un,rn])=>{let cn=[],Sn=[];return un.forEach((Vn,tr)=>{cn=[...void 0===cn?[]:cn,...Vn.map((Wr,Ci)=>new Bt({...Wr,resolvedContext:rn[cn.length+Ci]}))],Sn=[...Sn&&[],...Vn.map(()=>tr)]}),{resolvedPanes:cn,originMappings:Sn}}))))}}return bt.\u0275fac=function(Ze){return new(Ze||bt)(n.\u0275\u0275inject(xn),n.\u0275\u0275inject(xe.iL),n.\u0275\u0275inject(ve.a$),n.\u0275\u0275inject(Le.ContentPluginManager))},bt.\u0275prov=n.\u0275\u0275defineInjectable({token:bt,factory:bt.\u0275fac,providedIn:"root"}),bt})();class oe extends Ut.Plugin{constructor(_t){super(_t),_t&&(this.name=this.id,this.title=_t.title,this.editorComponent=_t.editorComponent?_t.editorComponent:void 0,this.renderComponent=_t.renderComponent?_t.renderComponent:void 0,_t.handler&&(this.handler=_t.handler))}}let O=(()=>{class bt extends qt.o2{constructor(){super(),this.pageChange$=new S.x,this.pageSize=20,this.dataStream=new c.X([]),this.subscription=new V.w0,this.lastPage=0,this.paneItems=[]}set panes(Ze){this.paneItems=[...this.paneItems,...Ze],this.dataStream.next(this.paneItems)}connect(Ze){return this.subscription.add(Ze.viewChange.subscribe(jt=>{const Jt=Math.ceil((jt.end+1)/this.pageSize);Jt>this.lastPage&&(this.lastPage=Jt,this.pageChange$.next(Jt))})),this.dataStream}disconnect(Ze){this.subscription.unsubscribe()}}return bt.\u0275fac=function(Ze){return new(Ze||bt)},bt.\u0275prov=n.\u0275\u0275defineInjectable({token:bt,factory:bt.\u0275fac}),bt})();const I=(0,Qe.ZF)(On),ce=bt=>(0,Qe.P1)(I,_t=>{const Ze=_t.dataTags.findIndex(jt=>jt===bt);if(Ze>-1)return _t.datasets[Ze][_t.datasets[Ze].length-1]}),Te=(0,Qe.P1)(I,bt=>bt.pageInfo),at=(0,Qe.P1)(I,bt=>bt.page),Tt=(0,Qe.P1)(I,bt=>bt.selectionPath),tn=(0,Qe.P1)(I,bt=>bt.formNames),on=(0,Qe.P1)(I,bt=>bt.forms),bn=(0,Qe.P1)(tn,on,(bt,_t,Ze)=>{const jt=bt.findIndex(Jt=>Jt===Ze.name);if(jt>-1)return _t[jt]});let vn=(()=>{class bt{constructor(Ze){this.store=Ze,this.getPageInfo$=this.store.pipe((0,Qe.Ys)(Te)),this.getPage$=this.store.pipe((0,Qe.Ys)(at)),this.getSelectionPath$=this.store.pipe((0,Qe.Ys)(Tt)),this.getFormNames$=this.store.pipe((0,Qe.Ys)(tn)),this.getForm$=jt=>this.store.pipe((0,Qe.Ys)(bn,{name:jt}))}loadRestData(Ze,jt){this.store.dispatch(pr({tag:Ze,rest:jt}))}setPageInfo(Ze){this.store.dispatch(Zn({info:Ze}))}setPage(Ze){this.store.dispatch(kr({page:Ze}))}setSelectionPath(Ze){this.store.dispatch(Rt({path:Ze}))}setForm(Ze,jt){this.store.dispatch(Nr({name:Ze,form:jt}))}}return bt.\u0275fac=function(Ze){return new(Ze||bt)(n.\u0275\u0275inject(Qe.yh))},bt.\u0275prov=n.\u0275\u0275defineInjectable({token:bt,factory:bt.\u0275fac,providedIn:"root"}),bt})();class Ht{constructor(_t){this.readUserIds=[],_t&&(this.title=_t.title,this.name=_t.name,this.path=_t.path,this.cssFile=_t.cssFile,_t.readUserIds&&(this.readUserIds=_t.readUserIds.map(Ze=>Ze)))}}class Jn{constructor(_t){_t&&(this.label=_t.label,this.name=_t.name)}}class er{constructor(_t){_t&&(this.label=_t.label,this.name=_t.name)}}class rr{constructor(_t){this.panels=[],_t&&(this.id=_t.id,this.name=_t.name,this.title=_t.title,this.derivativeId=_t.derivativeId,_t.panels&&(this.panels=_t.panels.map(Ze=>new Ln(Ze))))}}class Ln{constructor(_t){this.panes=[],_t&&(this.name=_t.name,this.label=_t.label,_t.panes&&(this.panes=_t.panes.map(Ze=>new Nn(Ze))))}}class Nn{constructor(_t){this.settings=[],_t&&(this.name=_t.name,this.label=_t.label,this.contentPlugin=_t.contentPlugin,_t.settings&&(this.settings=_t.settings.map(Ze=>new ee.AttributeValue(Ze))))}}class Mn{constructor(_t){_t&&(this.name=_t.name,this.field=_t.field)}}let kn=(()=>{class bt{constructor(Ze,jt,Jt,en){this.pageBuilderFacade=Ze,this.panelStateArchitectService=jt,this.attributeSerializer=Jt,this.selectEntities=nn=>nn.entities,this.selectById=({id:nn})=>(0,Qe.P1)(this.selectEntities,un=>un[nn]?un[nn]:void 0),this.panelPageStateService=en.getEntityCollectionService("PanelPageState")}mergeState({state:Ze,settings:jt,plugin:Jt,ancestory:en}){return(0,$.of)(Ze).pipe((0,U.w)(nn=>this.pageBuilderFacade.getPageInfo$.pipe((0,N.U)(un=>[nn,un]))),(0,U.w)(([nn,un])=>Jt.handler.stateDefinition(jt).pipe((0,N.U)(rn=>[nn,un,rn]))),(0,U.w)(([nn,un,rn])=>this.panelPageStateService.collection$.pipe((0,Qe.Ys)(this.selectById({id:un.id})),(0,N.U)(cn=>[nn,new Xn(cn||{id:un.id,panels:[]}),rn]),(0,X.q)(1))),(0,N.U)(([nn,un,rn])=>{this.panelStateArchitectService.buildToAncestorySpec({panelPageState:un,ancestory:[...en]});const cn="$."+en.map((Vn,tr)=>`${(tr+1)%2==0?"panes":(0===tr?"":"nestedPage.")+"panels"}[${Vn}]`).join(".");return[nn,un,rn,(0,Me.JSONPath)({path:cn,json:un})[0]]}),(0,G.b)(([nn,un,rn,cn])=>{const Sn=cn.state?cn.state.root?this.attributeSerializer.deserialize(cn.state).root:this.attributeSerializer.deserialize(cn.state):{},Vn=Ue(Sn&&0!==Object.keys(Sn).length?Sn:rn,nn);cn.state=this.attributeSerializer.serialize(Vn,"root")}),(0,N.U)(([nn,un,rn,cn])=>({paneState:cn,pageState:un})))}}return bt.\u0275fac=function(Ze){return new(Ze||bt)(n.\u0275\u0275inject(vn),n.\u0275\u0275inject(Nt),n.\u0275\u0275inject(ee.AttributeSerializerService),n.\u0275\u0275inject(y.jn))},bt.\u0275prov=n.\u0275\u0275defineInjectable({token:bt,factory:bt.\u0275fac,providedIn:"root"}),bt})(),jn=(()=>{class bt{constructor(Ze){this.attributeSerializer=Ze}serializeForm(Ze){const jt=Ze.panels.length;let Jt={};for(let en=0;en<jt;en++){const nn=Ze.panels[en].panes.length,un=new Map;for(let rn=0;rn<nn;rn++){const cn=this.serializeFormPane(Ze.panels[en].panes[rn]);if(Ze.panels[en].panes[rn].name&&null!==Ze.panels[en].panes[rn].name&&(Jt[Ze.panels[en].panes[rn].name]||Ze.panels[en].panes[rn].name===(0,Lt._6)(Ze.panels[en].panes[rn].name))){un.has(Ze.panels[en].panes[rn].name)||un.set(Ze.panels[en].panes[rn].name,void 0!==Jt[Ze.panels[en].panes[rn].name]?[Jt[Ze.panels[en].panes[rn].name]]:[]);const Sn=un.get(Ze.panels[en].panes[rn].name);un.set(Ze.panels[en].panes[rn].name,[...Sn,cn])}else Jt=Ze.panels[en].panes[rn].name&&""!==Ze.panels[en].panes[rn].name?{...Jt,[Ze.panels[en].panes[rn].name]:cn}:{...Jt,...cn}}Array.from(un).forEach(([rn,cn])=>Jt[rn]=cn)}return Jt}serializeFormPane(Ze){if("panel"===Ze.contentPlugin)return this.serializeForm(new rr(this.attributeSerializer.deserializeAsObject(Ze.settings,!0)));{const jt=this.attributeSerializer.deserializeAsObject(Ze.settings,!0);return void 0!==jt?jt.value:void 0}}}return bt.\u0275fac=function(Ze){return new(Ze||bt)(n.\u0275\u0275inject(ee.AttributeSerializerService))},bt.\u0275prov=n.\u0275\u0275defineInjectable({token:bt,factory:bt.\u0275fac,providedIn:"root"}),bt})(),Gn=(()=>{class bt{constructor(Ze){this.attributeSerializer=Ze}convertPageToForm({pp:Ze,pp2:jt,ancestory:Jt,debugPath:en=[]}){return(0,$.of)(new Xn).pipe((0,U.w)(()=>(0,p.D)(Ze.panels.map((nn,un)=>this.convertPanelToForm({panel:nn,panel2:jt.panels[un],ancestory:Jt,debugPath:[...en,`convertPageToForm{ index: ${un} }`]})))),(0,N.U)(nn=>new rr({id:Ze.id,panels:nn,name:jt.name,title:jt.title,derivativeId:""})))}convertPanelToForm({panel:Ze,panel2:jt,ancestory:Jt,debugPath:en=[]}){return(0,$.of)(new Ln).pipe((0,U.w)(()=>(0,p.D)(Ze.panes.map((nn,un)=>this.convertPaneToForm({pane:nn,pane2:jt.panes[un],ancestory:Jt,debugPath:[...en,`convertPanelToForm{ index: ${un} }`]})))),(0,N.U)(nn=>new Ln({panes:nn,name:jt.name,label:jt.label})))}convertPaneToForm({pane:Ze,pane2:jt,ancestory:Jt,debugPath:en=[]}){const nn=Ze.state.attributes.find(un=>"value"===un.name);return(0,$.of)(new Nn({settings:nn?[nn]:[],name:jt.name,label:jt.label,contentPlugin:jt.contentPlugin})).pipe((0,U.w)(un=>(0,d.s)(()=>this.hasNestedPanelPage(Ze),Ze.nestedPage?this.convertPageToForm({ancestory:Jt,pp:Ze.nestedPage,pp2:new ct(this.attributeSerializer.deserializeAsObject(jt.settings)),debugPath:[...en,"convertPaneToForm"]}).pipe((0,N.U)(rn=>new Nn({...un,settings:this.attributeSerializer.serialize(rn,"root").attributes}))):(0,$.of)(un),(0,$.of)(un))))}hasNestedPanelPage(Ze){return!!Ze.nestedPage}}return bt.\u0275fac=function(Ze){return new(Ze||bt)(n.\u0275\u0275inject(ee.AttributeSerializerService))},bt.\u0275prov=n.\u0275\u0275defineInjectable({token:bt,factory:bt.\u0275fac,providedIn:"root"}),bt})(),nr=(()=>{class bt{constructor(Ze,jt){this.attributeSerializer=Ze,this.fb=jt}makeFormGroupFromPage(Ze,jt){return(0,$.of)(this.fb.group({panels:this.fb.array([])})).pipe((0,U.w)(Jt=>(0,p.D)(Ze.panels.map((en,nn)=>this.makeFormGroupFromPanel(en,jt.panels[nn]))).pipe((0,N.U)(en=>({panelGroups:en,pageFormGroup:Jt})))),(0,G.b)(({panelGroups:Jt,pageFormGroup:en})=>{const nn=Jt.length;for(let un=0;un<nn;un++)en.get("panels").push(Jt[un])}),(0,N.U)(({pageFormGroup:Jt})=>Jt))}makeFormGroupFromPanel(Ze,jt){return(0,$.of)(this.fb.group({name:this.fb.control(Ze.name),panes:this.fb.array([])})).pipe((0,U.w)(Jt=>(0,p.D)(Ze.panes.map((en,nn)=>this.makeFormGroupFromPane(en,jt.panes[nn]))).pipe((0,N.U)(en=>({paneGroups:en,panelFormGroup:Jt})))),(0,G.b)(({paneGroups:Jt,panelFormGroup:en})=>{const nn=Jt.length;for(let un=0;un<nn;un++)en.get("panes").push(Jt[un])}),(0,N.U)(({panelFormGroup:Jt})=>Jt))}makeFormGroupFromPane(Ze,jt){const Jt=jt?jt.settings.find(en=>"value"===en.name):void 0;return(0,$.of)(this.fb.group({name:this.fb.control(Ze.name),contentPlugin:this.fb.control(""),settings:this.fb.array([])})).pipe((0,U.w)(en=>(0,d.s)(()=>this.hasNestedPanelPage(Ze),this.hasNestedPanelPage(Ze)?this.makeFormGroupFromPage(Ze.nestedPage,new rr(this.attributeSerializer.deserializeAsObject(jt.settings))).pipe((0,G.b)(nn=>{const un=this.attributeSerializer.convertToGroup(this.attributeSerializer.serialize(nn.value,"value").attributes[0]);en.get("contentPlugin").setValue("panel"),en.get("settings").push(un)}),(0,N.U)(()=>en)):(0,$.of)(en).pipe((0,G.b)(()=>{if(Jt){const nn=this.attributeSerializer.convertToGroup(Jt);en.get("settings").push(nn)}})),(0,$.of)(en).pipe((0,G.b)(()=>{if(Jt){const nn=this.attributeSerializer.convertToGroup(Jt);en.get("settings").push(nn)}})))))}hasNestedPanelPage(Ze){return!!Ze.nestedPage}}return bt.\u0275fac=function(Ze){return new(Ze||bt)(n.\u0275\u0275inject(ee.AttributeSerializerService),n.\u0275\u0275inject(x.qu))},bt.\u0275prov=n.\u0275\u0275defineInjectable({token:bt,factory:bt.\u0275fac,providedIn:"root"}),bt})(),Sr=(()=>{class bt{makeJsonNode(){return{attributes:{},children:{}}}reduceCss(Ze,jt,Jt=!0){return Ze&&Ze.children?Object.keys(Ze.children).filter(en=>Jt?0===en.indexOf(jt):0!==en.indexOf(jt)).reduce((en,nn)=>({...en,children:{...en.children,[Jt?nn.substr(nn.indexOf(jt)+jt.length).trim():nn]:Ze.children[nn]}}),this.makeJsonNode()):this.makeJsonNode()}reduceSelector(Ze,jt,Jt=!0){return Ze?Object.keys(Ze).filter(en=>Jt?0===en.indexOf(jt):0!==en.indexOf(jt)).reduce((en,nn)=>({...en,[Jt?nn.substr(nn.indexOf(jt)+jt.length).trim():nn]:Ze[nn]}),{}):{}}}return bt.\u0275fac=function(Ze){return new(Ze||bt)},bt.\u0275prov=n.\u0275\u0275defineInjectable({token:bt,factory:bt.\u0275fac,providedIn:"root"}),bt})()},9376:(it,K,u)=>{u.d(K,{DR:()=>be,S0:()=>E,yt:()=>P,YJ:()=>se,AZ:()=>me,DB:()=>b,ZF:()=>Ee});var e=u(3192),n=u(7451),y=u(2508),x=u(1276),$=u(1484),c=u(6853),d=u(5276),p=u(745),z=u(6317),S=u(253),V=u(6562),N=u(2673),U=u(635),H=u(116),Q=u(9337),Z=u(3350),ue=u(2063),G=u(5074),X=u(7371),ee=u(207),ve=u(4522);function Oe(ze,Ge){if(1&ze&&(n.\u0275\u0275elementStart(0,"mat-option",4),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&ze){const xe=Ge.$implicit;n.\u0275\u0275property("value",xe.value.id),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(xe.value.title)}}function Le(ze,Ge){}class be extends c.Plugin{constructor(Ge){super(Ge),Ge&&(this.editor=Ge.editor,this.send=Ge.send)}}class m{constructor(Ge){this.settings=[],Ge&&(this.data=Ge.data,Ge.settings&&Array.isArray(Ge.settings)&&(this.settings=Ge.settings.map(xe=>new d.AttributeValue(xe))))}}class P{constructor(Ge){}}class b{constructor(Ge){Ge&&(this.dataduct=new _(Ge.dataduct))}}class _{constructor(Ge){this.settings=[],Ge&&(this.plugin=Ge.plugin,Ge.settings&&Array.isArray(Ge.settings)&&(this.settings=Ge.settings.map(xe=>new d.AttributeValue(xe))))}}let R=(()=>{class ze{constructor(xe){this.viewContainerRef=xe}}return ze.\u0275fac=function(xe){return new(xe||ze)(n.\u0275\u0275directiveInject(n.ViewContainerRef))},ze.\u0275dir=n.\u0275\u0275defineDirective({type:ze,selectors:[["","classifiedsUiDataductRendererHost",""]]}),ze})(),E=(()=>{class ze extends c.BasePluginManager{constructor(xe,qe){super(xe,qe)}pluginDef(){return(0,p.of)(new c.PluginDef({name:"dataduct"}))}}return ze.\u0275fac=function(xe){return new(xe||ze)(n.\u0275\u0275inject(c.PluginConfigurationManager),n.\u0275\u0275inject(ue.ModuleLoaderService))},ze.\u0275prov=n.\u0275\u0275defineInjectable({token:ze,factory:ze.\u0275fac,providedIn:"root"}),ze})(),ne=(()=>{class ze{constructor(xe,qe){this.dpm=xe,this.fb=qe,this.contexts=[],this.ductForm=this.fb.group({plugin:this.fb.control("",[y.kI.required]),settings:this.fb.control("")}),this.ducts$=this.dpm.getPlugins(),this.componentRef$=new z.X(void 0),this.persistence$=new z.X(void 0),this.afterViewInit$=new S.x,this.contextForwardingSub=this.componentRef$.pipe((0,H.h)(Xe=>!!Xe)).subscribe(Xe=>{Xe.instance.contexts=this.contexts,Xe.instance.settings=this.persistence$.value&&this.persistence$.value.dataduct?this.persistence$.value.dataduct.settings:[]}),this.persistenceSub=(0,V.a)([this.persistence$,this.afterViewInit$]).pipe((0,U.U)(([Xe])=>Xe),(0,Q.b)(Xe=>{this.ductForm.get("plugin").setValue(Xe&&Xe.dataduct?Xe.dataduct.plugin:"")}),(0,Z.g)(1),(0,Q.b)(Xe=>{this.componentRef$.value&&this.componentRef$.value.instance&&Xe&&(this.componentRef$.value.instance.settings=Xe.dataduct?Xe.dataduct.settings:[])})).subscribe(),this.rendererSub=(0,V.a)([this.ductForm.get("plugin").valueChanges,this.afterViewInit$]).pipe((0,N.w)(([Xe,lt])=>Xe&&""!==Xe?this.dpm.getPlugin(Xe):(0,p.of)(void 0))).subscribe(Xe=>{Xe&&this.renderPlugin(Xe)}),this.onTouched=()=>{}}set persistence(xe){this.persistence$.next(xe)}ngAfterViewInit(){this.afterViewInit$.next(void 0)}writeValue(xe){xe&&this.ductForm.setValue(xe,{emitEvent:!1})}registerOnChange(xe){this.ductForm.valueChanges.subscribe(xe)}registerOnTouched(xe){this.onTouched=xe}setDisabledState(xe){xe?this.ductForm.disable():this.ductForm.enable()}validate(xe){return this.ductForm.valid?null:this.ductForm.errors}renderPlugin(xe){const qe=this.datasourceHost.viewContainerRef;qe.clear(),this.componentRef$.next(qe.createComponent(xe.editor))}}return ze.\u0275fac=function(xe){return new(xe||ze)(n.\u0275\u0275directiveInject(E),n.\u0275\u0275directiveInject(y.qu))},ze.\u0275cmp=n.\u0275\u0275defineComponent({type:ze,selectors:[["classifieds-ui-persistence-form"]],viewQuery:function(xe,qe){if(1&xe&&n.\u0275\u0275viewQuery(R,7),2&xe){let Xe;n.\u0275\u0275queryRefresh(Xe=n.\u0275\u0275loadQuery())&&(qe.datasourceHost=Xe.first)}},inputs:{contexts:"contexts",persistence:"persistence"},features:[n.\u0275\u0275ProvidersFeature([{provide:y.JU,useExisting:(0,n.forwardRef)(()=>ze),multi:!0},{provide:y.Cf,useExisting:(0,n.forwardRef)(()=>ze),multi:!0}])],decls:10,vars:6,consts:[[3,"formGroup"],["required","","formControlName","plugin"],[3,"value",4,"ngFor","ngForOf"],["classifiedsUiDataductRendererHost",""],[3,"value"]],template:function(xe,qe){1&xe&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275elementStart(1,"mat-form-field"),n.\u0275\u0275elementStart(2,"mat-label"),n.\u0275\u0275text(3,"Plugin"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"mat-select",1),n.\u0275\u0275template(5,Oe,2,2,"mat-option",2),n.\u0275\u0275pipe(6,"keyvalue"),n.\u0275\u0275pipe(7,"async"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerStart(8),n.\u0275\u0275template(9,Le,0,0,"ng-template",3),n.\u0275\u0275elementContainerEnd(),n.\u0275\u0275elementEnd()),2&xe&&(n.\u0275\u0275property("formGroup",qe.ductForm),n.\u0275\u0275advance(5),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind1(6,2,n.\u0275\u0275pipeBind1(7,4,qe.ducts$))))},directives:[G.KE,X.gD,ee.ey,y.JL,y.sg,G.hX,y.Q7,y.JJ,y.u,e.NgForOf,R],pipes:[e.KeyValuePipe,e.AsyncPipe],styles:[""]}),ze})(),me=(()=>{class ze{constructor(xe,qe,Xe,lt){this.data=xe,this.dialogRef=qe,this.fb=Xe,this.attributeSerializer=lt,this.persistenceForm=this.fb.group({dataduct:this.fb.control("")}),this.contexts=[],this.persistence=new b,this.contexts=xe.contexts,this.persistence=xe.persistence}submit(){const xe=this.persistenceForm.value;console.log("persistence form",xe);const qe=this.attributeSerializer.serialize(xe.dataduct.settings,"settings");console.log("persistence settings",qe),this.dialogRef.close(new b({...this.persistenceForm.value,dataduct:{...xe.dataduct,settings:qe.attributes}}))}}return ze.\u0275fac=function(xe){return new(xe||ze)(n.\u0275\u0275directiveInject($.WI),n.\u0275\u0275directiveInject($.so),n.\u0275\u0275directiveInject(y.qu),n.\u0275\u0275directiveInject(d.AttributeSerializerService))},ze.\u0275cmp=n.\u0275\u0275defineComponent({type:ze,selectors:[["classifieds-ui-persistence-dialog"]],decls:8,vars:4,consts:[[1,"persistence-form",3,"formGroup","ngSubmit"],[1,"content-inner"],["fxLayout","column"],["formControlName","dataduct",3,"contexts","persistence"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"]],template:function(xe,qe){1&xe&&(n.\u0275\u0275elementStart(0,"form",0),n.\u0275\u0275listener("ngSubmit",function(){return qe.submit()}),n.\u0275\u0275elementStart(1,"mat-dialog-content"),n.\u0275\u0275elementStart(2,"div",1),n.\u0275\u0275elementStart(3,"div",2),n.\u0275\u0275element(4,"classifieds-ui-persistence-form",3),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"mat-dialog-actions"),n.\u0275\u0275elementStart(6,"button",4),n.\u0275\u0275text(7,"Save"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&xe&&(n.\u0275\u0275property("formGroup",qe.persistenceForm),n.\u0275\u0275advance(4),n.\u0275\u0275property("contexts",qe.contexts)("persistence",qe.persistence),n.\u0275\u0275advance(2),n.\u0275\u0275property("disabled",!qe.persistenceForm.valid))},directives:[ne,ve.lW,y._Y,y.JL,y.sg,$.xY,y.JJ,y.u,$.H8,$.ZT],styles:[""]}),ze})(),Ee=(()=>{class ze{}return ze.\u0275fac=function(xe){return new(xe||ze)},ze.\u0275mod=n.\u0275\u0275defineNgModule({type:ze}),ze.\u0275inj=n.\u0275\u0275defineInjector({imports:[[e.CommonModule,y.u5,y.UX,x.MaterialModule]]}),ze})(),se=(()=>{class ze{constructor(xe){this.dpm=xe}persist({data:xe,persistence:qe}){return this.dpm.getPlugin(qe.dataduct.plugin).pipe((0,N.w)(Xe=>Xe.send(new m({data:xe,settings:qe.dataduct.settings}))),(0,U.U)(()=>{}))}}return ze.\u0275fac=function(xe){return new(xe||ze)(n.\u0275\u0275inject(E))},ze.\u0275prov=n.\u0275\u0275defineInjectable({token:ze,factory:ze.\u0275fac,providedIn:"root"}),ze})()},5383:(it,K,u)=>{u.d(K,{hT:()=>Lt,sm:()=>Ke,rQ:()=>zt});var e=u(3192),n=u(7451),y=u(2508),x=u(2063),$=u(1923),c=u(2579),d=u(8448),p=u(2570),z=u(253),S=u(6317),V=u(6562),N=u(5330),U=u(745),H=u(3336),Q=u(1640),Z=u(7714),ue=u(1944),G=u(3945),X=u(9663),ee=u(6936),ve=u(420),Oe=u(1817),be=u(116),m=u(1989),P=u(8977),b=u(635),_=u(2673),R=u(9337),E=u(9295),ne=u(7260),me=u(8951),Ee=u(3350),se=u(3853),ze=u(3158),Ge=u(4744),xe=u(6102),qe=u(7125),Xe=u(9066),lt=u(2375),He=u(9263),Ye=u(2062),ht=u(6152),Se=u(5276),he=u(2044),pe=u(2341),Fe=u(9376);const Je=["renderPanelTpl"];function we(rt,Be){}function De(rt,Be){if(1&rt){const et=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",4),n.\u0275\u0275listener("click",function(){return n.\u0275\u0275restoreView(et),n.\u0275\u0275nextContext().submit()}),n.\u0275\u0275text(1,"Submit"),n.\u0275\u0275elementEnd()}}function ut(rt,Be){if(1&rt&&(n.\u0275\u0275elementContainerStart(0,0),n.\u0275\u0275elementContainerStart(1,5),n.\u0275\u0275element(2,"classifieds-ui-render-panel",6),n.\u0275\u0275elementContainerEnd(),n.\u0275\u0275elementContainerEnd()),2&rt){const et=Be.i,wt=n.\u0275\u0275nextContext();n.\u0275\u0275property("formGroup",wt.pageForm),n.\u0275\u0275advance(2),n.\u0275\u0275property("formControlName",et)("panel",wt.panelPageCached.panels[et])("nested",wt.nested$.value)("contexts",wt.contexts$.value)("resolvedContext",wt.resolvedContext)("contextsChanged",wt.contextsChanged)("displayType",wt.panelPageCached.displayType)("indexPosition",et)("css",wt.filteredCss)("ancestory",wt.ancestory$.value)}}function le(rt,Be){}function D(rt,Be){if(1&rt&&n.\u0275\u0275element(0,"classifieds-ui-panel-page",4),2&rt){const et=n.\u0275\u0275nextContext();n.\u0275\u0275property("panelPage",et.panelPage)("nested",!0)("contexts",et.contexts)("css",et.filteredCss)("ancestory",et.ancestoryWithSelf)}}function C(rt,Be){if(1&rt&&n.\u0275\u0275element(0,"classifieds-ui-panel-page",5),2&rt){const et=n.\u0275\u0275nextContext();n.\u0275\u0275property("id",et.linkedPageId)("nested",!0)("contexts",et.contexts)("ancestory",et.ancestoryWithSelf)}}function g(rt,Be){if(1&rt&&n.\u0275\u0275element(0,"classifieds-ui-panel-page",4),2&rt){const et=n.\u0275\u0275nextContext();n.\u0275\u0275property("panelPage",et.embedPanel)("nested",!0)("contexts",et.contexts)("css",et.filteredCss)("ancestory",et.ancestoryWithSelf)}}const B=["panes"];function de(rt,Be){}function ye(rt,Be){if(1&rt&&n.\u0275\u0275element(0,"classifieds-ui-render-pane",8),2&rt){const et=Be.$implicit,wt=Be.index,Ft=n.\u0275\u0275nextContext(3),dn=n.\u0275\u0275reference(1);n.\u0275\u0275property("formControlName",wt)("pluginName",et.contentPlugin)("settings",et.settings)("name",et.name)("label",et.label)("originPane",Ft.panel.panes[Ft.originMappings[wt]])("contexts",et.contexts)("displayType",Ft.displayType)("resolvedContext",et.resolvedContext)("indexPosition",wt)("css",Ft.filteredCss)("ancestory",Ft.ancestoryWithSelf$.value)("panes",dn)("originPanes",Ft.originPanes)}}function Me(rt,Be){if(1&rt&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div"),n.\u0275\u0275elementStart(2,"div",6),n.\u0275\u0275template(3,ye,1,14,"classifieds-ui-render-pane",7),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&rt){const et=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(3),n.\u0275\u0275property("ngForOf",et.resolvedPanes)}}function Qe(rt,Be){if(1&rt&&n.\u0275\u0275element(0,"classifieds-ui-render-pane",10),2&rt){const et=Be.$implicit,wt=Be.index,Ft=n.\u0275\u0275nextContext(3),dn=n.\u0275\u0275reference(1);n.\u0275\u0275property("pluginName",et.contentPlugin)("settings",et.settings)("name",et.name)("label",et.label)("originPane",Ft.panel.panes[Ft.originMappings[wt]])("contexts",et.contexts)("linkedPageId",et.linkedPageId)("displayType",Ft.displayType)("resolvedContext",et.resolvedContext)("indexPosition",wt)("css",Ft.filteredCss)("ancestory",Ft.ancestoryWithSelf$.value)("panes",dn)("originPanes",Ft.originPanes)}}function st(rt,Be){if(1&rt&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,Qe,1,14,"classifieds-ui-render-pane",9),n.\u0275\u0275elementContainerEnd()),2&rt){const et=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",et.resolvedPanes)}}function Ut(rt,Be){if(1&rt&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275elementContainerStart(1,4),n.\u0275\u0275template(2,Me,4,1,"ng-container",5),n.\u0275\u0275template(3,st,2,1,"ng-container",5),n.\u0275\u0275elementContainerEnd(),n.\u0275\u0275elementEnd()),2&rt){const et=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitch",et.displayType),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase","form"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase","page")}}let qt=(()=>{class rt{constructor(et){this.viewContainerRef=et}}return rt.\u0275fac=function(et){return new(et||rt)(n.\u0275\u0275directiveInject(n.ViewContainerRef))},rt.\u0275dir=n.\u0275\u0275defineDirective({type:rt,selectors:[["","classifiedsUiPaneContentHost",""]]}),rt})(),Ue=(()=>{class rt{constructor(et){this.viewContainerRef=et}}return rt.\u0275fac=function(et){return new(et||rt)(n.\u0275\u0275directiveInject(n.ViewContainerRef))},rt.\u0275dir=n.\u0275\u0275defineDirective({type:rt,selectors:[["","classifiedsUiLayoutRendererHost",""]]}),rt})();class Lt{constructor(Be,et,wt,Ft,dn,Vt,ct,kt,Pt,Yt,Bt,pn,_n,Cn,xn,Qn,dr,ur,Xn,ir,mr,hr,Or,fr,Hr,xr){this.platformId=Be,this.mediaSettings=et,this.routerStore=wt,this.fb=Ft,this.el=dn,this.inlineContextResolver=Vt,this.pageBuilderFacade=ct,this.cpm=kt,this.cxm=Pt,this.lpm=Yt,this.componentFactoryResolver=Bt,this.styleLoader=pn,this.http=_n,this.cssHelper=Cn,this.attributeSerializer=xn,this.formService=Qn,this.panelsContextService=dr,this.asyncApiCallHelperSvc=ur,this.crudDataHelperService=Xn,this.entityDefinitionService=ir,this.ngZone=mr,this.persistService=hr,this.stylizerService=Or,this.classifyService=fr,this.fileService=Hr,this.resolvedContext={},this.contextsChanged=[],this.persistenceEnabled=!1,this.onInit$=new z.x,this.afterViewInit$=new z.x,this.afterContentInit$=new z.x,this.renderLayout$=new z.x,this.id$=new S.X(void 0),this.panelPage$=new S.X(void 0),this.nested$=new S.X(!1),this.ancestory$=new S.X([]),this.contexts$=new S.X([]),this.instanceUniqueIdentity=xe.Z(),this.isStable=!1,this.managedCssCache="",this.managedClassesCache={},this.css$=new S.X({css:this.cssHelper.makeJsonNode(),classes:{}}),this.cssSub=this.css$.subscribe(Dn=>{this.filteredCss=Dn}),this.settingsFormArray=this.fb.array([]),this.pageForm=this.fb.group({panels:this.fb.array([])}),this.bridgeSub=this.pageForm.valueChanges.pipe((0,be.h)(()=>this.nested$.value),(0,m.b)(500)).subscribe(Dn=>{console.log("write page"),console.log(Dn),this.settingsFormArray.clear();const pr=this.attributeSerializer.convertToGroup(this.attributeSerializer.serialize(Dn,"value").attributes[0]);this.settingsFormArray.push(pr),console.log(pr.value)}),this.idOrPanelPageSub=(0,V.a)([this.id$,this.panelPage$]).pipe((0,P.x)(),(0,b.U)(([Dn,pr])=>({id:Dn,panelPage:pr})),(0,be.h)(({id:Dn,panelPage:pr})=>!!Dn||!!pr),(0,_.w)(({id:Dn,panelPage:pr})=>(0,N.s)(()=>!Dn,(0,U.of)({panelPage:pr}),new H.y(Er=>{const wr=this.entityDefinitionService.getDefinition("PanelPage").metadata;return this.crudDataHelperService.evaluateCollectionPlugins({query:`identity=${Dn}`,plugins:wr.crud,op:"query"}).pipe((0,b.U)(Zn=>Zn&&0!==Zn.length?Zn[0]:void 0),(0,R.b)(Zn=>{Er.next({panelPage:Zn}),Er.complete()})).subscribe()}))),(0,_.w)(({panelPage:Dn})=>this.cpm.getPlugins(Dn.panels.reduce((pr,Er)=>(Er.panes.forEach(wr=>{pr.includes(wr.contentPlugin)||pr.push(wr.contentPlugin)}),pr),[])).pipe((0,b.U)(()=>({panelPage:Dn})))),(0,_.w)(({panelPage:Dn})=>(0,N.s)(()=>!this.nested$.value,this.panelsContextService.allActivePageContexts({panelPage:Dn}).pipe((0,b.U)(pr=>({panelPage:Dn,contexts:Array.from(pr)}))),(0,U.of)({panelPage:Dn,contexts:[]}))),(0,R.b)(({panelPage:Dn,contexts:pr})=>{this.hookupFormChange({panelPage:Dn}),this.populatePanelsFormArray({panelPage:Dn}),this.panelPageCached=Dn,this.persistenceEnabled=Dn.persistence&&Dn.persistence.dataduct&&Dn.persistence.dataduct.plugin&&""!==Dn.persistence.dataduct.plugin,this.renderLayout$.next(Dn),this.contexts$.next([...Dn.contexts?Dn.contexts.map(Er=>new d.Js(Er)):[],...pr]),(0,e.isPlatformBrowser)(this.platformId)&&this.hookupCss({file:Dn.cssFile?Dn.cssFile.trim():void 0}),console.log(`cached panel page: ${Dn.id}`)})).subscribe(),this.hookupContextSub=(0,V.a)(this.contexts$,this.afterContentInit$).pipe((0,b.U)(([Dn])=>Dn),(0,_.w)(Dn=>this.inlineContextResolver.resolveMerged(Dn,`panelpage:${xe.Z()}`).pipe((0,_.w)(pr=>this.cxm.getPlugins().pipe((0,b.U)(Er=>({contexts:Dn,resolvedContext:pr,globalPlugins:Array.from(Er.values()).filter(wr=>!0===wr.global)})))),(0,E.q)(1))),(0,R.b)(()=>{this.resolveSub&&this.resolveSub.unsubscribe()}),(0,R.b)(({contexts:Dn,resolvedContext:pr,globalPlugins:Er})=>{this.resolvedContext=pr;const wr=new z.x;if((0,e.isPlatformServer)(this.platformId)){const Zn=setInterval(()=>{0===Lt.registredContextListeners.size&&(wr.next(),wr.complete(),clearInterval(Zn))},1e3)}this.resolveSub=this.inlineContextResolver.resolveMergedSingle(Dn).pipe((0,ne.T)(Er.length+(Dn?Dn.length:0)),(0,R.b)(()=>Lt.registredContextListeners.add(this.instanceUniqueIdentity)),(0,R.b)(Zn=>console.log("buffer",Zn)),function Le(rt,...Be){var et,wt;const Ft=null!==(et=(0,ve.yG)(Be))&&void 0!==et?et:ee.z,dn=null!==(wt=Be[0])&&void 0!==wt?wt:null,Vt=Be[1]||1/0;return(0,ue.e)((ct,kt)=>{let Pt=[],Yt=!1;const Bt=Cn=>{const{buffer:xn,subs:Qn}=Cn;Qn.unsubscribe(),(0,X.P)(Pt,Cn),kt.next(xn),Yt&&pn()},pn=()=>{if(Pt){const Cn=new Z.w0;kt.add(Cn);const Qn={buffer:[],subs:Cn};Pt.push(Qn),(0,Oe.f)(Cn,Ft,()=>Bt(Qn),rt)}};null!==dn&&dn>=0?(0,Oe.f)(kt,Ft,pn,dn,!0):Yt=!0,pn();const _n=(0,G.x)(kt,Cn=>{const xn=Pt.slice();for(const Qn of xn){const{buffer:dr}=Qn;dr.push(Cn),Vt<=dr.length&&Bt(Qn)}},()=>{for(;null==Pt?void 0:Pt.length;)kt.next(Pt.shift().buffer);null==_n||_n.unsubscribe(),kt.complete(),kt.unsubscribe()},void 0,()=>Pt=null);ct.subscribe(_n)})}(1),(0,R.b)(Zn=>{0===Zn.length&&Lt.registredContextListeners.delete(this.instanceUniqueIdentity)}),(0,be.h)(Zn=>0!==Zn.length),(0,R.b)(Zn=>{this.contextsChanged=Zn.reduce((Nr,[kr,Rt])=>[...Nr,...Nr.includes(kr)?[]:[kr]],[]),this.resolvedContext=Zn.reduce((Nr,[kr,Rt])=>({...Nr,[kr]:Rt}),this.resolvedContext)}),(0,R.b)(()=>Lt.registredContextListeners.delete(this.instanceUniqueIdentity)),(0,e.isPlatformServer)(this.platformId)?(0,me.R)(wr):(0,R.b)(()=>{})).subscribe()})).subscribe(),this.renderLayoutSub=(0,V.a)([this.renderLayout$,this.afterViewInit$]).pipe((0,Ee.g)(1),(0,b.U)(([Dn])=>({panelPage:Dn})),(0,_.w)(({panelPage:Dn})=>this.lpm.getPlugin(Dn.layoutType).pipe((0,b.U)(pr=>({panelPage:Dn,plugin:pr})))),(0,R.b)(()=>console.log("start render layout")),(0,b.U)(({plugin:Dn,panelPage:pr})=>({panelPage:pr,plugin:Dn,viewContainerRef:this.layoutRendererHost.viewContainerRef})),(0,R.b)(({viewContainerRef:Dn})=>Dn.clear()),(0,b.U)(({plugin:Dn,viewContainerRef:pr,panelPage:Er})=>({panelPage:Er,layoutRendererRef:pr.createComponent(Dn.renderer)})),(0,R.b)(({layoutRendererRef:Dn})=>this.layoutRendererRef=Dn),(0,R.b)(({layoutRendererRef:Dn,panelPage:pr})=>{Dn.instance.renderPanelTpl=this.renderPanelTpl,Dn.instance.panelPage=pr}),(0,R.b)(()=>console.log("end render layout"))).subscribe(),this.stylizerSub=this.afterViewInit$.pipe((0,be.h)(()=>(0,e.isPlatformBrowser)(this.platformId)),(0,R.b)(()=>{this.stylizerService.stylize({targetNode:this.el.nativeElement})})).subscribe(),this.classifySub=this.afterViewInit$.pipe((0,be.h)(()=>(0,e.isPlatformBrowser)(this.platformId)),(0,R.b)(()=>{this.classifyService.classify({targetNode:this.el.nativeElement})})).subscribe(),this.stylizerMutatedSub=this.stylizerService.mutated$.pipe((0,m.b)(2e3),(0,R.b)(({stylesheet:Dn})=>{console.log("merged css",Dn)}),(0,be.h)(()=>!!this.panelPageCached&&!!this.panelPageCached.id),(0,_.w)(({stylesheet:Dn})=>this.isStable?(0,U.of)({stylesheet:Dn}):this.ngZone.onStable.asObservable().pipe((0,b.U)(()=>({stylesheet:Dn})),(0,E.q)(1))),(0,b.U)(({stylesheet:Dn})=>({stylesheet:(this.managedCssCache&&""!==this.managedCssCache.trim()?this.managedCssCache+"\n":"")+Dn})),(0,se.b)(({stylesheet:Dn})=>this.fileService.bulkUpload({nocache:!0,files:[new File([Dn],`panelpage__${this.panelPageCached.id}.css`)],fileNameOverride:`panelpage__${this.panelPageCached.id}`})),(0,R.b)(()=>{console.log("stylesheet saved.")})).subscribe(),this.classifyMutatedSub=this.classifyService.mutated$.pipe((0,m.b)(2e3),(0,R.b)(({classes:Dn})=>{console.log("merged classes",Dn)}),(0,be.h)(()=>!!this.panelPageCached&&!!this.panelPageCached.id),(0,_.w)(({classes:Dn})=>this.isStable?(0,U.of)({classes:Dn}):this.ngZone.onStable.asObservable().pipe((0,b.U)(()=>({classes:Dn})),(0,E.q)(1))),(0,b.U)(({classes:Dn})=>({classes:Array.from(Dn.keys()).reduce((pr,Er)=>({...pr,[Er]:Array.from(Dn.get(Er).keys()).filter(wr=>Dn.get(Er).get(wr)!==qe.Jf.KEEP).reduce((wr,Zn)=>({...wr,[Zn]:Dn.get(Er).get(Zn)}),{})}),{})})),(0,b.U)(({classes:Dn})=>({classes:lt(this.managedClassesCache,Dn)})),(0,b.U)(({classes:Dn})=>({json:JSON.stringify(Dn)})),(0,se.b)(({json:Dn})=>this.fileService.bulkUpload({nocache:!0,files:[new File([Dn],`panelpage__${this.panelPageCached.id}__classes.json`)],fileNameOverride:`panelpage__${this.panelPageCached.id}__classes`})),(0,R.b)(()=>{console.log("classes saved.")})).subscribe(),this.onStableSub=this.ngZone.onStable.asObservable().pipe((0,R.b)(()=>this.isStable=!0)).subscribe(),this.onUnstableSub=this.ngZone.onUnstable.asObservable().pipe((0,R.b)(()=>this.isStable=!1)).subscribe(),this.onTouched=()=>{},this.panelPageService=xr.getEntityCollectionService("PanelPage"),this.panelPageFormService=xr.getEntityCollectionService("PanelPageForm"),this.panelPageStateService=xr.getEntityCollectionService("PanelPageState")}set id(Be){this.id$.next(Be)}set panelPage(Be){this.panelPage$.next(Be)}set nested(Be){this.nested$.next(Be)}set contexts(Be){this.contexts$.next(Be)}set ancestory(Be){this.ancestory$.next(Be)}set css(Be){this.css$.next(Be)}get panelsArray(){return this.pageForm.get("panels")}ngOnInit(){this.onInit$.next(void 0)}ngAfterViewInit(){this.afterViewInit$.next(void 0)}ngAfterContentInit(){this.afterContentInit$.next(void 0)}ngOnDestroy(){Lt.registredContextListeners.delete(this.instanceUniqueIdentity)}populatePanelsFormArray({panelPage:Be}){this.panelsArray.clear(),Be.panels.forEach(()=>{this.panelsArray.push(this.fb.control(""))})}hookupFormChange({panelPage:Be}){this.pageForm.valueChanges.pipe((0,m.b)(100),(0,be.h)(()=>void 0!==Be&&"form"===Be.displayType)).subscribe(et=>{const wt=new p.zd({...et,name:Be.name,title:Be.title,derivativeId:Be.id});this.pageBuilderFacade.setForm(Be.name,wt)})}hookupCss({file:Be}){(0,Q.D)([this.http.get(Be).pipe((0,ze.K)(()=>(0,U.of)(void 0)),(0,Ge.d)(void 0)),this.panelPageCached.id?this.http.get(`${this.mediaSettings.imageUrl}/panelpage__${this.panelPageCached.id}.css.json`).pipe((0,ze.K)(()=>(0,U.of)(void 0)),(0,Ge.d)(void 0)):(0,U.of)(void 0),this.panelPageCached.id?this.http.get(`${this.mediaSettings.imageUrl}/panelpage__${this.panelPageCached.id}.css`).pipe((0,ze.K)(()=>(0,U.of)(void 0)),(0,Ge.d)(void 0)):(0,U.of)(void 0),this.panelPageCached.id?this.http.get(`${this.mediaSettings.imageUrl}/panelpage__${this.panelPageCached.id}__classes.json`).pipe((0,ze.K)(()=>(0,U.of)(void 0)),(0,Ge.d)(void 0)):(0,U.of)(void 0)]).pipe((0,R.b)(([et,wt,Ft,dn])=>{let Vt={};this.managedCssCache="",this.managedClassesCache=dn,et&&(Vt=lt(Vt,et)),wt&&(this.managedCssCache=Ft,Vt=lt(Vt,wt)),this.filteredCss={css:Vt,classes:dn}})).subscribe()}submit(){const Be=new p.zd({...this.pageForm.value}),et=this.formService.serializeForm(Be);console.log(Be),console.log(this.formService.serializeForm(Be)),console.log("form data",et),this.persistService.persist({data:et,persistence:this.panelPageCached.persistence}).subscribe(()=>{console.log("persisted data")})}writeValue(Be){Be&&this.settingsFormArray.setValue(Be,{emitEvent:!1})}registerOnChange(Be){this.settingsFormArray.valueChanges.subscribe(Be)}registerOnTouched(Be){this.onTouched=Be}setDisabledState(Be){Be?this.settingsFormArray.disable():this.settingsFormArray.enable()}validate(Be){return this.settingsFormArray.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}}}Lt.registredContextListeners=new Set,Lt.\u0275fac=function(Be){return new(Be||Lt)(n.\u0275\u0275directiveInject(n.PLATFORM_ID),n.\u0275\u0275directiveInject(c.yk),n.\u0275\u0275directiveInject(He.yh),n.\u0275\u0275directiveInject(y.qu),n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(d.a$),n.\u0275\u0275directiveInject(p.QK),n.\u0275\u0275directiveInject(Ye.ContentPluginManager),n.\u0275\u0275directiveInject(d.UV),n.\u0275\u0275directiveInject($.s5),n.\u0275\u0275directiveInject(n.ComponentFactoryResolver),n.\u0275\u0275directiveInject(x.StyleLoaderService),n.\u0275\u0275directiveInject(ht.HttpClient),n.\u0275\u0275directiveInject(p.M0),n.\u0275\u0275directiveInject(Se.AttributeSerializerService),n.\u0275\u0275directiveInject(p.oL),n.\u0275\u0275directiveInject(p.WX),n.\u0275\u0275directiveInject(x.AsyncApiCallHelperService),n.\u0275\u0275directiveInject(he.f0),n.\u0275\u0275directiveInject(pe.f0),n.\u0275\u0275directiveInject(n.NgZone),n.\u0275\u0275directiveInject(Fe.YJ),n.\u0275\u0275directiveInject(qe.Cu),n.\u0275\u0275directiveInject(qe.lg),n.\u0275\u0275directiveInject(c.nS),n.\u0275\u0275directiveInject(pe.jn))},Lt.\u0275cmp=n.\u0275\u0275defineComponent({type:Lt,selectors:[["classifieds-ui-panel-page"]],viewQuery:function(Be,et){if(1&Be&&(n.\u0275\u0275viewQuery($.$Z,5),n.\u0275\u0275viewQuery(Je,7),n.\u0275\u0275viewQuery(Ue,5)),2&Be){let wt;n.\u0275\u0275queryRefresh(wt=n.\u0275\u0275loadQuery())&&(et.gridLayout=wt.first),n.\u0275\u0275queryRefresh(wt=n.\u0275\u0275loadQuery())&&(et.renderPanelTpl=wt.first),n.\u0275\u0275queryRefresh(wt=n.\u0275\u0275loadQuery())&&(et.layoutRendererHost=wt.first)}},hostVars:2,hostBindings:function(Be,et){2&Be&&n.\u0275\u0275classProp("panel-page",!0)},inputs:{id:"id",panelPage:"panelPage",nested:"nested",contexts:"contexts",ancestory:"ancestory",css:"css",resolvedContext:"resolvedContext"},features:[n.\u0275\u0275ProvidersFeature([{provide:y.JU,useExisting:(0,n.forwardRef)(()=>Lt),multi:!0},{provide:y.Cf,useExisting:(0,n.forwardRef)(()=>Lt),multi:!0}])],decls:6,vars:2,consts:[[3,"formGroup"],["classifiedsUiLayoutRendererHost",""],["type","button",3,"click",4,"ngIf"],["renderPanelTpl",""],["type","button",3,"click"],["formArrayName","panels"],[3,"formControlName","panel","nested","contexts","resolvedContext","contextsChanged","displayType","indexPosition","css","ancestory"]],template:function(Be,et){1&Be&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275elementContainerStart(1),n.\u0275\u0275template(2,we,0,0,"ng-template",1),n.\u0275\u0275elementContainerEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,De,2,0,"button",2),n.\u0275\u0275template(4,ut,3,11,"ng-template",null,3,n.\u0275\u0275templateRefExtractor)),2&Be&&(n.\u0275\u0275property("formGroup",et.pageForm),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",et.persistenceEnabled))},directives:function(){return[$e,y.JL,y.sg,Ue,e.NgIf,y.CE,y.JJ,y.u]},styles:["[_nghost-%COMP%]     gridster{background-color:#fff}[_nghost-%COMP%]     gridster-item{background-color:#fff}"]});let zt=(()=>{class rt{constructor(et,wt,Ft,dn,Vt,ct,kt,Pt,Yt,Bt,pn){this.document=et,this.platformId=wt,this.el=Ft,this.renderer2=dn,this.componentFactoryResolver=Vt,this.panelHandler=ct,this.fb=kt,this.cpm=Pt,this.cssHelper=Yt,this.paneStateService=Bt,this.settings=[],this.ancestory=[],this.panes=[],this.originPanes=[],this.afterContentInit$=new z.x,this.resolvedContext$=new S.X({}),this.schedulePluginChange=new z.x,this.ancestoryWithSelf=[],this.css$=new S.X({css:this.cssHelper.makeJsonNode(),classes:{}}),this.cssSub=(0,V.a)([this.css$,this.afterContentInit$,this.schedulePluginChange]).pipe((0,be.h)(()=>(0,e.isPlatformBrowser)(this.platformId)),(0,b.U)(([_n])=>_n),(0,b.U)(_n=>({css:this.cssHelper.reduceCss(_n.css,`.pane-${this.indexPosition}`),classes:this.cssHelper.reduceSelector(_n.classes,`.pane-${this.indexPosition}`)})),(0,b.U)(({css:_n,classes:Cn})=>[this.cssHelper.reduceCss(_n,".panel-page",!1),this.cssHelper.reduceCss(_n,".panel-page"),this.cssHelper.reduceSelector(Cn,".panel-page",!1),this.cssHelper.reduceSelector(Cn,".panel-page")]),(0,R.b)(([_n,Cn,xn,Qn])=>this.filteredCss={css:Cn,classes:Qn}),(0,b.U)(([_n,Cn,xn,Qn])=>({css:_n,classes:xn})),(0,Ee.g)(500)).subscribe(({css:_n,classes:Cn})=>{console.log("reduced classes",Cn);const xn=Object.keys(_n.children).filter(dr=>(0,qe.Kl)({selector:dr,document:this.document})),Qn=Object.keys(Cn).filter(dr=>(0,qe.Kl)({selector:dr,document:this.document}));Qn.forEach(dr=>{const ur=""===dr?[this.el.nativeElement]:this.el.nativeElement.querySelectorAll(dr),Xn=ur.length;for(let ir=0;ir<Xn;ir++){const mr=Cn[Qn[ir]],hr=Object.keys(mr),Or=hr.length;for(let fr=0;fr<Or;fr++)mr[hr[fr]]===qe.Jf.REMOVE?(console.log(`remove class ${hr[fr]}`),this.renderer2.removeClass(ur[ir],hr[fr])):(console.log(`add class ${hr[fr]}`),this.renderer2.addClass(ur[ir],hr[fr]))}}),xn.forEach(dr=>{console.log(`search: ${dr}`);const ur=""===dr?[this.el.nativeElement]:this.el.nativeElement.querySelectorAll(dr),Xn=ur.length,ir=Object.keys(_n.children[dr].attributes);for(let mr=0;mr<Xn;mr++)ir.forEach(hr=>{console.log(`${dr} { ${hr}: ${_n.children[dr].attributes[hr]}; }`);const Or=(0,Xe._A)(hr.replace("-","_"),!1);this.renderer2.setStyle(ur[mr],Or,_n.children[dr].attributes[hr])})})}),this.paneForm=this.fb.group({contentPlugin:this.fb.control("",y.kI.required),name:this.fb.control(""),label:this.fb.control(""),settings:this.fb.control("")}),this.paneFormSub=this.paneForm.valueChanges.subscribe(_n=>{console.log(`pane form value plugin: ${this.pluginName}`),console.log(_n)}),this.scheduleStateChange$=new z.x,this.scheduleStateChangeSub=this.scheduleStateChange$.pipe((0,_.w)(({state:_n})=>this.paneStateService.mergeState({state:_n,ancestory:[...this.ancestoryWithSelf],settings:this.settings,plugin:this.contentPlugin}))).subscribe(({pageState:_n})=>{this.panelPageStateService.upsert(_n)}),this.onTouched=()=>{},this.pluginChangeSub=this.schedulePluginChange.pipe((0,be.h)(()=>this.pluginName&&null!==this.pluginName&&""!==this.pluginName),(0,_.w)(()=>this.cpm.getPlugin(this.pluginName))).subscribe(_n=>{this.contentPlugin=_n,this.paneForm.get("contentPlugin").setValue(_n.name),this.paneForm.get("name").setValue(this.name),this.paneForm.get("label").setValue(this.label),"panel"===this.pluginName?this.resolveNestedPanelPage():this.renderPaneContent()}),this.embedPanelSub=this.resolvedContext$.pipe((0,b.U)(_n=>{_n&&_n._root&&!this.linkedPageId&&0===this.settings.length&&(this.embedPanel=new p.Z8(_n._root))})).subscribe(),this.panelPageStateService=pn.getEntityCollectionService("PanelPageState")}set resolvedContext(et){this.resolvedContext$.next(et)}set css(et){this.css$.next(et)}get indexPositionClass(){return`pane-${this.indexPosition}`}get dynamicPanel(){return new p.Z8(this.resolvedContext._root)}ngOnInit(){this.ancestoryWithSelf=[...this.ancestory?this.ancestory:[],...null!=this.indexPosition?[this.indexPosition]:[]],this.schedulePluginChange.next(void 0)}ngOnChanges(et){if(et.ancestory||et.indexPosition){const wt=[...et.ancestory.currentValue?et.ancestory.currentValue:this.ancestory?this.ancestory:[],...null!=et.indexPosition.currentValue?[et.indexPosition.currentValue]:this.indexPosition?[this.indexPosition]:[]];(wt.length!==this.ancestoryWithSelf.length||0!==this.ancestoryWithSelf.filter((Ft,dn)=>wt[dn]!==Ft).length)&&(this.ancestoryWithSelf=wt)}this.schedulePluginChange.next(void 0)}ngAfterContentInit(){this.afterContentInit$.next(void 0)}writeValue(et){et&&this.paneForm.setValue(et,{emitEvent:!1})}registerOnChange(et){this.paneForm.valueChanges.subscribe(et)}registerOnTouched(et){this.onTouched=et}setDisabledState(et){et?this.paneForm.disable():this.paneForm.enable()}validate(et){return this.paneForm.valid?null:{invalidForm:{valid:!1,message:"pane is invalid"}}}resolveNestedPanelPage(){this.panelHandler.toObject(this.settings).subscribe(et=>{this.panelPage=new p.Z8({...et,contexts:this.contexts})})}renderPaneContent(){const et=this.componentFactoryResolver.resolveComponentFactory(this.contentPlugin.renderComponent),wt=this.contentPaneHost.viewContainerRef;wt.clear(),this.componentRef=wt.createComponent(et),this.componentRef.instance.settings=this.settings,this.componentRef.instance.name=this.name,this.componentRef.instance.label=this.label,this.componentRef.instance.panes=this.panes,this.componentRef.instance.originPanes=this.originPanes,this.componentRef.instance.contexts=this.contexts.map(Ft=>new d.Js(Ft)),this.componentRef.instance.displayType=this.displayType,this.componentRef.instance.resolvedContext=this.resolvedContext$.value,this.componentRef.instance.ancestory=this.ancestoryWithSelf,this.componentRef.instance.state&&this.contentPlugin.handler&&this.contentPlugin.handler.stateDefinition(this.settings).pipe((0,E.q)(1)).subscribe(Ft=>{this.componentRef.instance.state=Ft||{}}),this.componentRef.instance.stateChange&&this.componentRef.instance.stateChange.subscribe(Ft=>{this.scheduleStateChange$.next({state:Ft})})}}return rt.\u0275fac=function(et){return new(et||rt)(n.\u0275\u0275directiveInject(e.DOCUMENT),n.\u0275\u0275directiveInject(n.PLATFORM_ID),n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(n.Renderer2),n.\u0275\u0275directiveInject(n.ComponentFactoryResolver),n.\u0275\u0275directiveInject(p.iE),n.\u0275\u0275directiveInject(y.qu),n.\u0275\u0275directiveInject(Ye.ContentPluginManager),n.\u0275\u0275directiveInject(p.M0),n.\u0275\u0275directiveInject(p.ms),n.\u0275\u0275directiveInject(pe.jn))},rt.\u0275cmp=n.\u0275\u0275defineComponent({type:rt,selectors:[["classifieds-ui-render-pane"]],viewQuery:function(et,wt){if(1&et&&n.\u0275\u0275viewQuery(qt,7),2&et){let Ft;n.\u0275\u0275queryRefresh(Ft=n.\u0275\u0275loadQuery())&&(wt.contentPaneHost=Ft.first)}},hostVars:5,hostBindings:function(et,wt){2&et&&(n.\u0275\u0275attribute("data-index",wt.indexPosition),n.\u0275\u0275classMap(wt.indexPositionClass),n.\u0275\u0275classProp("pane",!0))},inputs:{pluginName:"pluginName",settings:"settings",linkedPageId:"linkedPageId",contexts:"contexts",originPane:"originPane",displayType:"displayType",name:"name",label:"label",indexPosition:"indexPosition",ancestory:"ancestory",panes:"panes",originPanes:"originPanes",resolvedContext:"resolvedContext",css:"css"},features:[n.\u0275\u0275ProvidersFeature([{provide:y.JU,useExisting:(0,n.forwardRef)(()=>rt),multi:!0},{provide:y.Cf,useExisting:(0,n.forwardRef)(()=>rt),multi:!0}]),n.\u0275\u0275NgOnChangesFeature],decls:6,vars:4,consts:[["fxFlex","",3,"formGroup"],["classifiedsUiPaneContentHost",""],["fxFlex","","formControlName","settings",3,"panelPage","nested","contexts","css","ancestory",4,"ngIf"],["fxFlex","","formControlName","settings",3,"id","nested","contexts","ancestory",4,"ngIf"],["fxFlex","","formControlName","settings",3,"panelPage","nested","contexts","css","ancestory"],["fxFlex","","formControlName","settings",3,"id","nested","contexts","ancestory"]],template:function(et,wt){1&et&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275elementContainerStart(1),n.\u0275\u0275template(2,le,0,0,"ng-template",1),n.\u0275\u0275elementContainerEnd(),n.\u0275\u0275template(3,D,1,5,"classifieds-ui-panel-page",2),n.\u0275\u0275template(4,C,1,4,"classifieds-ui-panel-page",3),n.\u0275\u0275template(5,g,1,5,"classifieds-ui-panel-page",2),n.\u0275\u0275elementEnd()),2&et&&(n.\u0275\u0275property("formGroup",wt.paneForm),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf","panel"==wt.pluginName&&!wt.linkedPageId&&0!==wt.settings.length),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","panel"==wt.pluginName&&wt.linkedPageId),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","panel"==wt.pluginName&&!wt.linkedPageId&&0===wt.settings.length))},directives:[Lt,y.JL,y.sg,qt,e.NgIf,y.JJ,y.u],styles:["[_nghost-%COMP%]{height:100%}"]}),rt})(),$e=(()=>{class rt{constructor(et,wt,Ft,dn,Vt,ct,kt,Pt,Yt){this.platformId=et,this.hostEl=wt,this.renderer2=Ft,this.componentFactoryResolver=dn,this.fb=Vt,this.panelResolverService=ct,this.spm=kt,this.cssHelper=Pt,this.styleResolverService=Yt,this.nested=!1,this.resolvedContext={},this.heightChange=new n.EventEmitter,this.panelForm=this.fb.group({name:this.fb.control(""),label:this.fb.control(""),panes:this.fb.array([])}),this.panelFormSub=this.panelForm.valueChanges.subscribe(Bt=>{console.log("paneL form value"),console.log(Bt)}),this.afterContentInit$=new z.x,this.schedulePanelRender=new z.x,this.rendered$=new z.x,this.css$=new S.X({css:this.cssHelper.makeJsonNode(),classes:{}}),this.cssSub=(0,V.a)([this.css$,this.afterContentInit$,this.rendered$]).pipe((0,be.h)(()=>(0,e.isPlatformBrowser)(this.platformId)),(0,R.b)(([Bt])=>console.log("css node",Bt.css)),(0,b.U)(([Bt])=>Bt),(0,b.U)(Bt=>({css:this.cssHelper.reduceCss(Bt.css,`.panel-${this.indexPosition$.value}`),classes:this.cssHelper.reduceSelector(Bt.classes,`.panel-${this.indexPosition$.value}`)})),(0,b.U)(({css:Bt,classes:pn})=>[this.cssHelper.reduceCss(Bt,".pane-",!1),Bt,this.cssHelper.reduceSelector(pn,".pane-",!1),pn]),(0,R.b)(([Bt,pn,_n,Cn])=>this.filteredCss={css:pn,classes:Cn}),(0,b.U)(([Bt,pn,_n])=>({css:Bt,classes:_n})),(0,Ee.g)(1)).subscribe(({css:Bt,classes:pn})=>{console.log("classes",pn),Object.keys(Bt.children).forEach(Cn=>{console.log(`search: ${Cn}`);const xn=""===Cn?[this.hostEl.nativeElement]:this.hostEl.nativeElement.querySelectorAll(Cn),Qn=xn.length,dr=Object.keys(Bt.children[Cn].attributes);for(let ur=0;ur<Qn;ur++)dr.forEach(Xn=>{console.log(`${Cn} { ${Xn}: ${Bt.children[Cn].attributes[Xn]}; }`);const ir=(0,Xe._A)(Xn.replace("-","_"),!1);this.renderer2.setStyle(xn[ur],ir,Bt.children[Cn].attributes[Xn])})})}),this.scheduleRender=new z.x,this.scheduleRenderSub=this.scheduleRender.pipe((0,R.b)(()=>console.log(`schdule renderer before [${this.panel.name}]`)),(0,_.w)(([Bt,pn,_n])=>this.panelResolverService.resolvePanes({panes:Bt,contexts:pn,resolvedContext:_n}).pipe((0,b.U)(({resolvedPanes:Cn,originMappings:xn})=>({resolvedPanes:Cn,originMappings:xn,panes:Bt})))),(0,_.w)(({panes:Bt,resolvedPanes:pn,originMappings:_n})=>this.styleResolverService.alterResolvedPanes({panel:this.panel,resolvedPanes:pn,originMappings:_n}).pipe((0,b.U)(({resolvedPanes:Cn,originMappings:xn})=>({panes:Bt,resolvedPanes:Cn,originMappings:xn})))),(0,R.b)(()=>console.log(`schdule renderer after [${this.panel.name}]`))).subscribe(({panes:Bt,resolvedPanes:pn,originMappings:_n})=>{console.log(`render panel: ${this.panel.name}`),this.resolvedPanes=pn,this.originPanes=Bt,this.originMappings=_n,this.populatePanesFormArray(),void 0!==this.stylePlugin?this.renderPanelContent():this.rendered$.next(void 0)}),this.schduleContextChange=new z.x,this.schedulePanelRenderSub=this.schedulePanelRender.pipe((0,_.w)(Bt=>this.spm.getPlugin(Bt))).subscribe(Bt=>{const pn=this.componentFactoryResolver.resolveComponentFactory(Bt.renderComponent),_n=this.panelHost.viewContainerRef;_n.clear();const Cn=_n.createComponent(pn);this.componentRef=Cn,Cn.instance.settings=this.panel.settings,Cn.instance.panes=this.resolvedPanes,Cn.instance.originPanes=this.panel.panes,Cn.instance.originMappings=this.originMappings,Cn.instance.contexts=this.contexts.map(xn=>new d.Js(xn)),Cn.instance.displayType=this.displayType,Cn.instance.ancestory=this.ancestoryWithSelf$.value,Cn.instance.resolvedContext=this.resolvedContext,Cn.instance.panel=this.panel,Cn.instance.indexPosition=this.indexPosition$.value,this.rendered$.next(void 0)}),this.originMappings=[],this.resolvedContexts=[],this.ancestoryWithSelf$=new S.X([]),this.ancestory$=new S.X([]),this.indexPosition$=new S.X(void 0),this.onTouched=()=>{},this.ancestorySub=(0,V.a)([this.ancestory$,this.indexPosition$]).pipe((0,R.b)(([Bt,pn])=>{this.ancestoryWithSelf$.next([...Bt,pn])})).subscribe(),this.counter=rt.COUNTER++}set contextChanged(et){}set contextsChanged(et){et.map(wt=>this.schduleContextChange.next(wt))}set indexPosition(et){this.indexPosition$.next(et)}set ancestory(et){this.ancestory$.next(et)}set css(et){this.css$.next(et)}get indexPositionClass(){return`panel-${this.indexPosition$.value}`}get panesArray(){return this.panelForm.get("panes")}ngOnInit(){this.stylePlugin=void 0!==this.panel.stylePlugin&&""!==this.panel.stylePlugin?this.panel.stylePlugin:void 0,void 0!==this.panel&&void 0!==this.panelHost&&(console.log(`panel render init [${this.panel.name}`),this.panelResolverService.usedContexts(this.panel.panes).pipe((0,b.U)(et=>et.filter(wt=>"_page"!==wt&&"_root"!==wt&&"."!==wt&&0!==wt.indexOf("panestate-"+this.ancestoryWithSelf$.value.join("-")))),(0,R.b)(et=>console.log(`contexts [${this.panel.name}]: ${et.join(",")}`)),(0,_.w)(et=>this.schduleContextChange.pipe((0,R.b)(wt=>console.log(`detected change [${this.panel.name}]: ${wt}`)),(0,b.U)(wt=>[et,wt]))),(0,R.b)(([et,wt])=>console.log(`detected change [${this.panel.name}]: ${wt} : ctx: ${et.join(",")}`)),(0,be.h)(([et,wt])=>Array.isArray(et)&&-1!==et.findIndex(Ft=>Ft===wt)),(0,m.b)(100)).subscribe(([et,wt])=>{console.log(`Context changed [${this.panel.name}]: ${wt}`),console.log(`contexts detected [${this.panel.name}]: ${et.join(",")}`),this.scheduleRender.next([this.panel.panes,this.contexts,this.resolvedContext])}))}ngOnChanges(et){this.stylePlugin=void 0!==this.panel.stylePlugin&&""!==this.panel.stylePlugin?this.panel.stylePlugin:void 0,et.resolvedContext&&void 0===et.resolvedContext.previousValue&&this.scheduleRender.next([this.panel.panes,this.contexts,this.resolvedContext])}ngAfterViewInit(){}ngAfterContentInit(){this.afterContentInit$.next(void 0)}writeValue(et){et&&this.panelForm.setValue(et,{emitEvent:!1})}registerOnChange(et){this.panelForm.valueChanges.subscribe(et)}registerOnTouched(et){this.onTouched=et}setDisabledState(et){et?this.panelForm.disable():this.panelForm.enable()}validate(et){return this.panelForm.valid?null:{invalidForm:{valid:!1,message:"panel are invalid"}}}populatePanesFormArray(){this.panesArray.clear(),this.resolvedPanes.forEach((et,wt)=>{this.panesArray.push(this.fb.control(""))})}renderPanelContent(){this.schedulePanelRender.next(this.stylePlugin)}}return rt.COUNTER=0,rt.\u0275fac=function(et){return new(et||rt)(n.\u0275\u0275directiveInject(n.PLATFORM_ID),n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(n.Renderer2),n.\u0275\u0275directiveInject(n.ComponentFactoryResolver),n.\u0275\u0275directiveInject(y.qu),n.\u0275\u0275directiveInject(p.Si),n.\u0275\u0275directiveInject(p.er),n.\u0275\u0275directiveInject(p.M0),n.\u0275\u0275directiveInject(p.tF))},rt.\u0275cmp=n.\u0275\u0275defineComponent({type:rt,selectors:[["classifieds-ui-render-panel"]],viewQuery:function(et,wt){if(1&et&&(n.\u0275\u0275viewQuery(qt,7),n.\u0275\u0275viewQuery(B,7),n.\u0275\u0275viewQuery(zt,5)),2&et){let Ft;n.\u0275\u0275queryRefresh(Ft=n.\u0275\u0275loadQuery())&&(wt.panelHost=Ft.first),n.\u0275\u0275queryRefresh(Ft=n.\u0275\u0275loadQuery())&&(wt.paneContainer=Ft.first),n.\u0275\u0275queryRefresh(Ft=n.\u0275\u0275loadQuery())&&(wt.renderedPanes=Ft)}},hostVars:5,hostBindings:function(et,wt){2&et&&(n.\u0275\u0275attribute("data-index",wt.indexPosition$.value),n.\u0275\u0275classMap(wt.indexPositionClass),n.\u0275\u0275classProp("panel",!0))},inputs:{panel:"panel",contexts:"contexts",nested:"nested",displayType:"displayType",resolvedContext:"resolvedContext",contextChanged:"contextChanged",contextsChanged:"contextsChanged",indexPosition:"indexPosition",ancestory:"ancestory",css:"css"},outputs:{heightChange:"heightChange"},features:[n.\u0275\u0275ProvidersFeature([{provide:y.JU,useExisting:(0,n.forwardRef)(()=>rt),multi:!0},{provide:y.Cf,useExisting:(0,n.forwardRef)(()=>rt),multi:!0}]),n.\u0275\u0275NgOnChangesFeature],decls:5,vars:2,consts:[[1,"render-panel",3,"formGroup"],["panes",""],["classifiedsUiPaneContentHost",""],[4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],["formArrayName","panes"],[3,"formControlName","pluginName","settings","name","label","originPane","contexts","displayType","resolvedContext","indexPosition","css","ancestory","panes","originPanes",4,"ngFor","ngForOf"],[3,"formControlName","pluginName","settings","name","label","originPane","contexts","displayType","resolvedContext","indexPosition","css","ancestory","panes","originPanes"],[3,"pluginName","settings","name","label","originPane","contexts","linkedPageId","displayType","resolvedContext","indexPosition","css","ancestory","panes","originPanes",4,"ngFor","ngForOf"],[3,"pluginName","settings","name","label","originPane","contexts","linkedPageId","displayType","resolvedContext","indexPosition","css","ancestory","panes","originPanes"]],template:function(et,wt){1&et&&(n.\u0275\u0275elementStart(0,"div",0,1),n.\u0275\u0275elementContainerStart(2),n.\u0275\u0275template(3,de,0,0,"ng-template",2),n.\u0275\u0275elementContainerEnd(),n.\u0275\u0275template(4,Ut,4,3,"div",3),n.\u0275\u0275elementEnd()),2&et&&(n.\u0275\u0275property("formGroup",wt.panelForm),n.\u0275\u0275advance(4),n.\u0275\u0275property("ngIf",!wt.stylePlugin&&wt.resolvedPanes))},directives:[zt,y.JL,y.sg,qt,e.NgIf,e.NgSwitch,e.NgSwitchCase,y.CE,e.NgForOf,y.JJ,y.u],styles:["[_nghost-%COMP%]{height:100%}.render-panel[_ngcontent-%COMP%]{height:100%}"]}),rt})(),Ke=(()=>{class rt{constructor(){}}return rt.\u0275fac=function(et){return new(et||rt)},rt.\u0275mod=n.\u0275\u0275defineNgModule({type:rt}),rt.\u0275inj=n.\u0275\u0275defineInjector({imports:[[e.CommonModule,y.u5,x.UtilsModule,y.UX,p.r9,$.xu]]}),rt})()},760:(it,K,u)=>{u.d(K,{cb:()=>pe,aS:()=>lt});var e=u(3192),n=u(2508),y=u(7451),x=u(1276),$=u(8193),c=u(8828),d=u(6124),p=u(919),z=u(8698),S=u(6317),V=u(253),N=u(745),U=u(3336),H=u(5330),Q=u(5474),Z=u(635),ue=u(9337),G=u(116),X=u(2673),ee=u(3158),ve=u(8951),Oe=u(1989),Le=u(3350),be=u(7580),m=u(3670),P=u(8714),b=u(5074),_=u(7371),R=u(207),E=u(8562),ne=u(5276),me=u(2062),Ee=u(2044),se=u(6152),ze=u(2727),Ge=u(8448),xe=u(2341);function qe(Fe,Je){if(1&Fe&&y.\u0275\u0275element(0,"ngx-json-viewer",12),2&Fe){const we=y.\u0275\u0275nextContext();y.\u0275\u0275property("json",we.jsonData)("expanded",!1)}}class Xe{constructor(Je){this.params=[],Je&&(this.url=Je.url,this.method=Je.method?Je.method:void 0,void 0!==Je.renderer&&(this.renderer=new $.Th(Je.renderer)),void 0!==Je.params&&(this.params=Je.params.map(we=>new P.dO(we))),Je.body&&(this.body=new p.pP(Je.body)))}}let lt=(()=>{class Fe{constructor(we,De,ut){this.fb=we,this.datasourceApi=De,this.tokenizerService=ut,this.dataChange=new y.EventEmitter,this.contexts=[],this.sourceForm=this.fb.group({url:this.fb.control("",n.kI.required),params:this.fb.control([]),body:this.fb.control(""),method:this.fb.control("get",[n.kI.required])}),this.restSource$=new S.X(new Xe),this.componentDestroyed=new V.x,this.refreshData$=new V.x,this.refreshSubscription=this.refreshData$.pipe((0,Z.U)(()=>this.generateUrl()),(0,ue.b)(le=>console.log(le)),(0,G.h)(le=>le&&""!==le.trim()),(0,X.w)(le=>this.datasourceApi.getData(le).pipe((0,ee.K)(D=>(console.log(D),(0,N.of)([]))))),(0,ve.R)(this.componentDestroyed)).subscribe(le=>{this.jsonData=le,this.dataChange.emit(le)}),this.urlChangeSub=this.sourceForm.get("url").valueChanges.pipe((0,Oe.b)(500),(0,G.h)(le=>le&&""!==le.trim()),(0,Z.U)(le=>[le,le.indexOf("?")]),(0,Z.U)(([le,D])=>[D>-1?le.substring(0,D):le,D>-1?le.substring(D+1):""])).subscribe(([le,D])=>{const g={...le.split("/").reduce((B,de,ye)=>0===de.indexOf(":")?{...B,[de.substr(1)]:de}:B,{}),...m.parse(D)};this.paramsParsed=g}),this.restSourceSub=this.restSource$.pipe((0,ue.b)(le=>{le?(this.sourceForm.get("url").setValue(le.url),this.sourceForm.get("method").setValue(le.method?le.method:""),this.sourceForm.get("body").setValue(le.body?{...le.body,jsScript:""}:"")):(this.sourceForm.get("url").setValue(""),this.sourceForm.get("method").setValue(""),this.sourceForm.get("body").setValue(""))})).subscribe(),this.onTouched=()=>{}}set restSource(we){this.restSource$.next(we)}ngOnInit(){this.sourceForm.valueChanges.pipe((0,Oe.b)(1e3)).subscribe(()=>{console.log("refresh data"),this.refreshData$.next(void 0)})}ngOnDestroy(){this.componentDestroyed.next(void 0),this.componentDestroyed.complete()}writeValue(we){we&&this.sourceForm.setValue(we,{emitEvent:!1})}registerOnChange(we){this.sourceForm.valueChanges.subscribe(we)}registerOnTouched(we){this.onTouched=we}setDisabledState(we){we?this.sourceForm.disable():this.sourceForm.enable()}validate(we){return this.sourceForm.valid?null:{invalidForm:{valid:!1,message:"source is invalid"}}}generateUrl(){console.log("generate url");const we=this.sourceForm.get("url").value,[De,ut]=we?we.split("?",2):["",""],le=m.parse(ut),D={},C=De.split("/"),g=C.length,B=[];let de=0;for(let Me=0;Me<g;Me++)if(0===C[Me].indexOf(":")){if(!this.sourceForm.get("params").value[de])return"";const Qe=this.sourceForm.get("params").value[de].mapping;B.push("static"===Qe.value.type?Qe.value.value:Qe.value.testValue),de++}else B.push(C[Me]);for(const Me in le)if("string"==typeof le[Me]&&le[Me].indexOf(":")>-1){if(!this.sourceForm.get("params").value[de])return"";const Qe=this.sourceForm.get("params").value[de].mapping;D[Me]="static"===Qe.type?Qe.value:Qe.testValue,de++}const ye=B.join("/")+(""!==ut?"?"+m.stringify({...le,...D}):"");return console.log(ye),ye}onDataChange(we){this.tokens=this.tokenizerService.generateGenericTokens(we[0])}}return Fe.\u0275fac=function(we){return new(we||Fe)(y.\u0275\u0275directiveInject(n.qu),y.\u0275\u0275directiveInject($.Bc),y.\u0275\u0275directiveInject(z.G))},Fe.\u0275cmp=y.\u0275\u0275defineComponent({type:Fe,selectors:[["classifieds-ui-rest-source-form"]],inputs:{restSource:"restSource",contexts:"contexts"},outputs:{dataChange:"dataChange"},features:[y.\u0275\u0275ProvidersFeature([{provide:n.JU,useExisting:(0,y.forwardRef)(()=>Fe),multi:!0},{provide:n.Cf,useExisting:(0,y.forwardRef)(()=>Fe),multi:!0}])],decls:19,vars:7,consts:[["direction","horizontal",3,"formGroup"],["as-split-area","","size","50"],["required","","formControlName","method"],["value","get"],["value","post"],["value","put"],["value","delete"],["matInput","","placeholder","Url","formControlName","url","required",""],["formControlName","body","rows","10","cols","40",3,"rootForm","tokens"],["formControlName","params",3,"params","paramValues","contexts"],["size","50"],[3,"json","expanded",4,"ngIf"],[3,"json","expanded"]],template:function(we,De){1&we&&(y.\u0275\u0275elementStart(0,"as-split",0),y.\u0275\u0275elementStart(1,"div",1),y.\u0275\u0275elementStart(2,"div"),y.\u0275\u0275elementStart(3,"mat-form-field"),y.\u0275\u0275elementStart(4,"mat-select",2),y.\u0275\u0275elementStart(5,"mat-option",3),y.\u0275\u0275text(6,"GET"),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementStart(7,"mat-option",4),y.\u0275\u0275text(8,"POST"),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementStart(9,"mat-option",5),y.\u0275\u0275text(10,"PUT"),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementStart(11,"mat-option",6),y.\u0275\u0275text(12,"DELETE"),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementStart(13,"mat-form-field"),y.\u0275\u0275element(14,"input",7),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementEnd(),y.\u0275\u0275element(15,"classifieds-ui-snippet-form",8),y.\u0275\u0275element(16,"classifieds-ui-params-form",9),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementStart(17,"as-split-area",10),y.\u0275\u0275template(18,qe,1,2,"ngx-json-viewer",11),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementEnd()),2&we&&(y.\u0275\u0275property("formGroup",De.sourceForm),y.\u0275\u0275advance(15),y.\u0275\u0275property("rootForm",!1)("tokens",De.tokens),y.\u0275\u0275advance(1),y.\u0275\u0275property("params",De.paramsParsed)("paramValues",De.restSource$.value.params)("contexts",De.contexts),y.\u0275\u0275advance(2),y.\u0275\u0275property("ngIf",De.jsonData))},directives:[c.Mq,b.KE,_.gD,R.ey,p.l8,P.Op,d.Y,n.JL,n.sg,c.zE,n.Q7,n.JJ,n.u,E.Nt,n.Fj,e.NgIf],styles:[""]}),Fe})(),He=(()=>{class Fe{constructor(we,De){this.attributeSerializer=we,this.controlContainer=De,this.contexts=[]}set settings(we){this.restSource=we?new Xe(this.attributeSerializer.deserializeAsObject(we)):void 0}}return Fe.\u0275fac=function(we){return new(we||Fe)(y.\u0275\u0275directiveInject(ne.AttributeSerializerService),y.\u0275\u0275directiveInject(n.gN))},Fe.\u0275cmp=y.\u0275\u0275defineComponent({type:Fe,selectors:[["classifieds-ui-rest-datasource"]],inputs:{settings:"settings",contexts:"contexts"},decls:2,vars:3,consts:[[3,"formGroup"],["formControlName","settings",3,"restSource","contexts"]],template:function(we,De){1&we&&(y.\u0275\u0275elementContainerStart(0,0),y.\u0275\u0275element(1,"classifieds-ui-rest-source-form",1),y.\u0275\u0275elementContainerEnd()),2&we&&(y.\u0275\u0275property("formGroup",De.controlContainer.control),y.\u0275\u0275advance(1),y.\u0275\u0275property("restSource",De.restSource)("contexts",De.contexts))},directives:[lt,n.JL,n.sg,n.JJ,n.u],encapsulation:2}),Fe})();const Se=({method:Fe,url:Je,data:we,options:De,params:ut,http:le})=>{if(we instanceof Error)return(0,N.of)([]);let C;switch(Fe){case"DELETE":C=le.delete(Je,De),ut.has("saveDelay")&&(C=C.pipe((0,Le.g)(+ut.get("saveDelay"))));break;case"GET":C=le.get(Je,De),ut.has("getDelay")&&(C=C.pipe((0,Le.g)(+ut.get("getDelay"))));break;case"POST":C=le.post(Je,we,De),ut.has("saveDelay")&&(C=C.pipe((0,Le.g)(+ut.get("saveDelay"))));break;case"PUT":C=le.put(Je,we,De),ut.has("saveDelay")&&(C=C.pipe((0,Le.g)(+ut.get("saveDelay"))));break;default:{const g=new Error("Unimplemented HTTP method, "+Fe);C=(0,Q._)(g)}}return ut.has("timeout")&&(C=C.pipe((0,be.V)(+ut.get("timeout")+ +ut.get("saveDelay")))),C.pipe((0,ee.K)(()=>(0,N.of)([])))};let he=(()=>{class Fe{constructor(we,De,ut,le){this.attrbuteSerializer=we,this.http=De,this.snippetParserService=ut,this.urlGenerator=le}fetchDataset({settings:we,metadata:De}){return(0,N.of)(new $.qz).pipe((0,ue.b)(()=>console.log("START rest fetch")),(0,Z.U)(()=>this.attrbuteSerializer.deserializeAsObject(we)),(0,Z.U)(ut=>new Xe(ut)),(0,X.w)(ut=>this.urlGenerator.getUrl(ut.url,ut.params,De).pipe((0,Z.U)(le=>new Xe({...ut,url:le})))),(0,G.h)(ut=>ut.url&&""!==ut.url.trim()&&ut.url.indexOf("http")>-1),(0,X.w)(ut=>Se({url:ut.url,method:"POST"===ut.method.toUpperCase()?"POST":"GET",http:this.http,params:new Map}).pipe((0,ee.K)(()=>(0,N.of)([])),(0,Z.U)(le=>Array.isArray(le)?le:[le]),(0,Z.U)(le=>new $.qz({results:le})))),(0,ue.b)(()=>console.log("END rest fetch")))}}return Fe.\u0275fac=function(we){return new(we||Fe)(y.\u0275\u0275inject(ne.AttributeSerializerService),y.\u0275\u0275inject(se.HttpClient),y.\u0275\u0275inject(p.TC),y.\u0275\u0275inject(ze.o))},Fe.\u0275prov=y.\u0275\u0275defineInjectable({token:Fe,factory:Fe.\u0275fac}),Fe})(),pe=(()=>{class Fe{constructor(we,De,ut,le,D,C,g,B,de){we.register(((Fe,Je,we)=>new $.Sn({id:"rest",title:"Rest",editor:He,fetch:({settings:De,metadata:ut})=>Fe.fetchDataset({settings:De,metadata:ut}),editorOptions:()=>(0,N.of)(new $.se({fullscreen:!0})),getBindings:({settings:De})=>(0,N.of)([]).pipe((0,Z.U)(()=>we.deserializeAsObject(De)),(0,Z.U)(le=>new $.kr(le)),(0,X.w)(le=>Je.extractContexts(le.params)),(0,Z.U)(le=>le.map(D=>new me.ContentBinding({id:D,type:"context"}))))}))(De,ut,le)),D.register(((Fe,Je,we,De)=>new Ee.e8({id:"rest",title:"Rest",create:({object:ut,params:le})=>(0,N.of)({success:!1}).pipe((0,X.w)(()=>Fe.paramValues(new Map(Object.keys(le).map(D=>[D,le[D]])))),(0,X.w)(D=>Se({method:"POST",url:we.entityResource(D.get("entityName"),D.has("root")?D.get("root"):De.root?De.root:"api"),data:ut||new Error("No entity to add"),params:D,http:Je})),(0,Z.U)(()=>({success:!0,entity:ut}))),read:({})=>(0,N.of)({success:!1}),update:({object:ut,identity:le,params:D,parentObject:C})=>(0,N.of)({success:!1}).pipe((0,X.w)(()=>le({object:ut,parentObject:C})),(0,X.w)(({identity:g})=>Fe.paramValues(new Map(Object.keys(D).map(B=>[B,D[B]]))).pipe((0,Z.U)(B=>({identity:g,options:B})))),(0,X.w)(({identity:g,options:B})=>Se({method:"PUT",url:we.entityResource(B.get("entityName"),B.has("root")?B.get("root"):De.root?De.root:"api")+`${g}`,data:ut||new Error("No entity to add"),params:B,http:Je})),(0,Z.U)(()=>({success:!0,entity:ut}))),delete:({})=>(0,N.of)({success:!1}),query:({params:ut,rule:le})=>(0,N.of)({success:!1}).pipe((0,X.w)(()=>Fe.paramValues(new Map(Object.keys(ut).map(D=>[D,ut[D]])))),(0,X.w)(D=>new U.y(C=>{const g=le?le.conditions.all.reduce((de,ye)=>[...de,...ye.any.filter(Me=>"identity"!==Me.fact).map(Me=>`${Me.path.substr(2)}=${Me.value}`)],[]):[],B=le?le.conditions.all.reduce((de,ye)=>de||ye.any.find(Me=>"identity"===Me.fact),void 0):void 0;C.next({identityFact:B,options:D,query:g.length>0?new se.HttpParams({fromString:g.join("&")}):void 0,path:B?B.value:""}),C.complete()})),(0,X.w)(({options:D,query:C,path:g,identityFact:B})=>(0,H.s)(()=>!!B,Se({method:"GET",url:we.entityResource(D.get("entityName"),D.has("root")?D.get("root"):De.root?De.root:"api")+g,options:{params:C},params:D,http:Je}).pipe((0,Z.U)(de=>({success:!0,entities:Array.isArray(de)?de:[de]}))),Se({method:"GET",url:we.collectionResource(D.get("entityName"),D.has("root")?D.get("root"):De.root?De.root:"api")+g,options:{params:C},params:D,http:Je}).pipe((0,Z.U)(de=>({success:!0,entities:de}))))))}))(C,g,B,de))}}return Fe.\u0275fac=function(we){return new(we||Fe)(y.\u0275\u0275inject($.Ar),y.\u0275\u0275inject(he),y.\u0275\u0275inject(Ge.$U),y.\u0275\u0275inject(ne.AttributeSerializerService),y.\u0275\u0275inject(Ee.YS),y.\u0275\u0275inject(P.nU),y.\u0275\u0275inject(se.HttpClient),y.\u0275\u0275inject(xe.hR),y.\u0275\u0275inject(xe.jh))},Fe.\u0275mod=y.\u0275\u0275defineNgModule({type:Fe}),Fe.\u0275inj=y.\u0275\u0275defineInjector({providers:[he],imports:[[e.CommonModule,n.u5,n.UX,x.MaterialModule,c.fX,d.s,p.J9,$.zG,z.W,Ee.Z5,P.bI]]}),Fe})()},1005:(it,K,u)=>{u.d(K,{Te:()=>N,iL:()=>U});var e=u(7451),n=u(5276),y=u(78),x=u(3336),$=u(9295),c=u(635),d=u(9337),p=u(2673),z=u(6102),S=u(8448);let N=(()=>{class H{constructor(){this.operatorsMap=new Map([["=","equal"],["!=","notEqual"]])}buildFields(Z,ue=""){const G=new Map;return this.genericFields(Z,G,ue,0),G}attributeFields(Z,ue,G,X){Z.forEach((ee,ve)=>{if("widget"!==ee.name)for(const Oe in ee)ee.type===n.AttributeTypes.Complex||"attributes"===Oe&&ee.attributes&&ee.attributes.length>0?this.attributeFields(ee.attributes,ue,ee.type===n.AttributeTypes.Complex?`${G}`:`${G}.${ee.name}`,X+1):"attributes"!==Oe&&(Oe===ee.name?ue.set(`${G}.${Oe}`,{name:`${G}.${Oe}`,type:this.resolveAttributeType(ee.type),defaultValue:ee[Oe]}):ue.set(`${G}.${ee.name}.${Oe}`,{name:`${G}.${ee.name}.${Oe}`,type:this.resolveAttributeType(ee.type),defaultValue:ee[Oe]}))})}genericFields(Z,ue,G,X){for(const ve in Z){const Oe=typeof Z[ve];if("object"!==Oe)ue.set(`${G}.${ve}`,{name:`${G}.${ve}`,type:this.resolveNativeType(Oe),defaultValue:Z[ve]});else if(Array.isArray(Z[ve])&&"attributes"===ve)this.attributeFields(Z[ve],ue,`${G}.${ve}`,X+1);else if(Array.isArray(Z[ve])){var ee=Z[ve].length;for(let Le=0;Le<ee;Le++)this.genericFields(Z[ve][Le],ue,`${G}.${ve}.${Le}`,X+1)}else this.genericFields(Z[ve],ue,`${G}.${ve}`,X+1)}}toEngineRule(Z,ue=0){const G=[];if(void 0!==Z.rules&&Array.isArray(Z.rules)){const X=Z.rules.length;for(let ee=0;ee<X;ee++)if(!("field"in Z.rules[ee])||null!=Z.condition&&""!==Z.condition){const ve=this.toEngineRule(Z.rules[ee],ue+1);G.push(ve.conditions)}else{const ve=Z.rules[ee].field.indexOf("."),Oe=Z.rules[ee].field.substr(0,ve),Le=Z.rules[ee].field.substr(ve+1);G.push({fact:Oe,path:`$.${Le}`,operator:this.operatorsMap.get(Z.rules[ee].operator),value:Z.rules[ee].value})}return new y.Rule("and"===Z.condition?{conditions:{all:G},event:0===ue?{type:"visible"}:void 0}:{conditions:{any:G},event:0===ue?{type:"visible"}:void 0})}{const X=Z.field.indexOf("."),ee=Z.field.substr(0,X),ve=Z.field.substr(X+1);return G.push({fact:ee,path:`$.${ve}`,operator:this.operatorsMap.get(Z.operator),value:Z.value}),new y.Rule({conditions:{all:G},event:0===ue?{type:"visible"}:void 0})}}extractConditions(Z,ue=0){const G=this.toEngineRule(Z);return[...void 0!==G.conditions.any?G.conditions.any:[],...void 0!==G.conditions.all?G.conditions.all:[]]}resolveNativeType(Z){switch(Z){case"number":return"number";case"boolean":return"boolean";default:return"string"}}resolveAttributeType(Z){switch(Z){case n.AttributeTypes.Float:case n.AttributeTypes.Number:return"number";case n.AttributeTypes.Bool:return"boolean";default:return"string"}}}return H.\u0275fac=function(Z){return new(Z||H)},H.\u0275prov=e.\u0275\u0275defineInjectable({token:H,factory:H.\u0275fac,providedIn:"root"}),H})(),U=(()=>{class H{constructor(Z,ue){this.rulesParser=Z,this.inlineContextResolver=ue}evaluate(Z,ue=[]){return this.inlineContextResolver.resolveMerged(ue,`rules:${z.Z()}`).pipe((0,$.q)(1),(0,c.U)(G=>[{...G},new y.Engine]),(0,d.b)(([G,X])=>{const ee=this.rulesParser.toEngineRule(Z);X.addRule(ee)}),(0,p.w)(([G,X])=>new x.y(ee=>{X.run(G).then(ve=>{ee.next(ve.events.findIndex(Oe=>"visible"===Oe.type)>-1),ee.complete()})})))}}return H.\u0275fac=function(Z){return new(Z||H)(e.\u0275\u0275inject(N),e.\u0275\u0275inject(S.a$))},H.\u0275prov=e.\u0275\u0275defineInjectable({token:H,factory:H.\u0275fac,providedIn:"root"}),H})()},7125:(it,K,u)=>{u.d(K,{Jf:()=>m,lg:()=>P,Fw:()=>H,Cu:()=>be,Kl:()=>Q});var e=u(7451),n=u(3192),y=u(6607),x=u(9066),$=u(2375),c=u(253),d=u(116),p=u(1989),z=u(2673),S=u(9337),V=u(3336),N=u(3158),U=u(745);let H=(()=>{class b{}return b.\u0275fac=function(R){return new(R||b)},b.\u0275mod=e.\u0275\u0275defineNgModule({type:b}),b.\u0275inj=e.\u0275\u0275defineInjector({imports:[[]]}),b})();const Q=({selector:b,document:_})=>{const R=_.createDocumentFragment();if(!b||-1!==b.indexOf("undefined"))return!1;try{R.querySelector(b)}catch{return!1}return!0},X=/\/\*[\s\S]*?\*\//g,ee=/([^\:]+):([^\;]*);/,ve=/(\/\*[\s\S]*?\*\/)|([^\s\;\{\}][^\;\{\}]*(?=\{))|(\})|([^\;\{\}]+\;(?!\s*\*\/))/gim,Oe=function(b){return void 0===b||0==b.length||null==b},Le={ordered:!1,comments:!1,stripComments:!1,split:!1};let be=(()=>{class b{constructor(R){this.document=R,this.mutate$=new c.x,this.mutated$=new c.x,this.mutateSub=this.mutate$.pipe((0,d.h)(({record:E})=>"attributes"===E.type&&"style"===E.attributeName&&!!E.target),(0,p.b)(2e3),(0,z.w)(({record:E,overlay:ne})=>this.mapRecord({record:E,overlay:ne})),(0,S.b)(({stylesheet:E})=>this.mutated$.next({stylesheet:E}))).subscribe()}stylize({targetNode:R}){const E=new Map;new MutationObserver(Ee=>{Ee.forEach(se=>{this.mutate$.next({record:se,overlay:E})})}).observe(R,{childList:!0,attributes:!0,subtree:!0,attributeFilter:["style"],attributeOldValue:!0})}mapRecord({record:R,overlay:E}){return new V.y(ne=>{const me=y.default(R.target),Ee=this.toJSON(`${me} { ${R.oldValue} }`),se=Ee.children[me]?Object.keys(Ee.children[me].attributes).reduce((Xe,lt)=>({...Xe,[(0,x._A)(lt.replace("-","_"),!1)]:Ee.children[me].attributes[lt]}),{}):void 0,ze=Object.keys(R.target.style).reduce((Xe,lt)=>NaN!==parseInt(lt)&&R.target.style.hasOwnProperty((0,x._A)(R.target.style[lt].replace("-","_"),!1))?{...Xe,[(0,x._A)(R.target.style[lt].replace("-","_"),!1)]:R.target.style[(0,x._A)(R.target.style[lt].replace("-","_"),!1)]}:Xe,{}),Ge=$(se,ze);E.set(me,Ge);const xe=[];E.forEach((Xe,lt)=>{const Ye=lt.split(" ").reduce((ht,Se,he)=>-1!==Se.indexOf(".pane-")||-1!==Se.indexOf(".panel-")?{selector:[...ht.selector,Se.replace(/^(.*?)(\.pane-|\.panel-page|\.panel-)([0-9]*)(.*?)$/,"$2$3")],chars:ht.chars+Se.length,lastIndex:ht.chars+he+Se.length}:{...ht,chars:ht.chars+Se.length},{selector:[],chars:0,lastIndex:0});if(0!==Ye.selector.length){let ht=(Ye.selector.join(" ")+" "+lt.slice(Ye.lastIndex).split(">").join("")).replace(/(\.ng\-[a-zA-Z0-9_-]*)/gm,"").trim();0===ht.indexOf(".panel-page")&&(ht=ht.substr(12).trim()),Q({selector:ht,document:this.document})&&xe.push(ht+" { "+Object.keys(Xe).reduce((he,pe)=>pe.match(/^[a-zA-Z-]*$/gm)?`${he}${(0,x.H0)((0,x.It)(pe))}: ${Xe[pe]};`:he,"")+" }")}});const qe=xe.join("\n");ne.next({stylesheet:qe}),ne.complete()})}toJSON(R,E=Le){const ze={children:{},attributes:{}};let Ge=null,xe=0;for(E.stripComments&&(E.comments=!1,R=R.replace(X,""));null!=(Ge=ve.exec(R));)if(!Oe(Ge[1])&&E.comments)ze[xe++]=Ge[1].trim();else if(Oe(Ge[2])){if(!Oe(Ge[3]))return ze;if(!Oe(Ge[4])){const qe=Ge[4].trim(),Xe=ee.exec(qe);if(Xe){const lt=Xe[1].trim(),He=Xe[2].trim();if(E.ordered)ze[xe++]={name:lt,value:He,type:"attr"};else if(lt in ze.attributes){const Ye=ze.attributes[lt];Ye instanceof Array||(ze.attributes[lt]=[Ye]),ze.attributes[lt].push(He)}else ze.attributes[lt]=He}else ze[xe++]=qe}}else{const qe=Ge[2].trim(),Xe=this.toJSON(R,E);if(E.ordered)ze[xe++]={name:qe,value:Xe,type:"rule"};else{const lt=E.split?qe.split(","):[qe];for(const He in lt){const Ye=lt[He].trim();if(Ye in ze.children)for(const ht in Xe.attributes)ze.children[Ye].attributes[ht]=Xe.attributes[ht];else ze.children[Ye]=Xe}}}return ze}}return b.\u0275fac=function(R){return new(R||b)(e.\u0275\u0275inject(n.DOCUMENT))},b.\u0275prov=e.\u0275\u0275defineInjectable({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();var m=(()=>{return(b=m||(m={}))[b.KEEP=0]="KEEP",b[b.ADD=1]="ADD",b[b.REMOVE=2]="REMOVE",m;var b})();let P=(()=>{class b{constructor(R){this.document=R,this.mutate=new c.x,this.mutated$=new c.x,this.mutateub=this.mutate.pipe((0,d.h)(({record:E})=>"attributes"===E.type&&"class"===E.attributeName&&!!E.target),(0,p.b)(2e3),(0,z.w)(({record:E,overlay:ne,originals:me})=>this.mapRecord({record:E,overlay:ne,originals:me}).pipe((0,N.K)(Ee=>(0,U.of)({classes:ne})))),(0,S.b)(({classes:E})=>this.mutated$.next({classes:E}))).subscribe()}classify({targetNode:R}){const E=new Map,ne=new Map;new MutationObserver(se=>{se.forEach(ze=>{this.mutate.next({record:ze,overlay:E,originals:ne})})}).observe(R,{childList:!0,attributes:!0,subtree:!0,attributeFilter:["class"],attributeOldValue:!0})}mapRecord({record:R,overlay:E,originals:ne}){return new V.y(me=>{const Ee=y.default(R.target);let se="";const Ge=Ee.split(" ").reduce((lt,He,Ye)=>-1!==He.indexOf(".pane-")||-1!==He.indexOf(".panel-")?{selector:[...lt.selector,He.replace(/^(.*?)(\.pane-|\.panel-page|\.panel-)([0-9]*)(.*?)$/,"$2$3")],chars:lt.chars+He.length,lastIndex:lt.chars+Ye+He.length}:{...lt,chars:lt.chars+He.length},{selector:[],chars:0,lastIndex:0});0!==Ge.selector.length&&(se=(Ge.selector.join(" ")+" "+Ee.slice(Ge.lastIndex).split(">").join("")).replace(/(\.ng\-[a-zA-Z0-9_-]*)/gm,""),0===se.indexOf(".panel-page")&&(se=se.substr(12).trim()));const xe=se.split(" "),[qe]=xe[xe.length-1].split(".",1);if(se=(xe.splice(0,xe.length-2).join(" ")+" "+qe).trim(),Q({selector:se,document:this.document})){ne.has(se)||ne.set(se,new Set(R.oldValue.split(" ").map(ht=>ht.trim())));const lt=R.target.classList,He=new Map(Array.from(lt.values()).map(ht=>[`${ht}`,!ne.has(se)||!ne.get(se).has(`${ht}`)&&0!==`${ht}`.indexOf("ng-")&&0!==`${ht}`.indexOf("mat-")?m.ADD:m.KEEP])),Ye=Array.from(ne.get(se)).reduce((ht,Se)=>[-1===Array.from(lt.values()).findIndex(he=>he===Se)?Se:void 0],[]).filter(ht=>void 0!==ht);0!==Ye.length&&Ye.forEach(ht=>He.set(ht,m.REMOVE)),0===He.size&&E.has(se)?E.delete(se):0!==He.size&&E.set(se,He),me.next({classes:E}),me.complete()}else me.error(new Error('Selector invalid "'+se+'"')),me.complete()})}}return b.\u0275fac=function(R){return new(R||b)(e.\u0275\u0275inject(n.DOCUMENT))},b.\u0275prov=e.\u0275\u0275defineInjectable({token:b,factory:b.\u0275fac,providedIn:"root"}),b})()},919:(it,K,u)=>{u.d(K,{pP:()=>_,l8:()=>R,J9:()=>E,TC:()=>ne});var e=u(7451),n=u(3192),y=u(2508),x=u(8163),$=u(8828),c=u(1276),d=u(6124),p=u(982),z=u(2063),S=u(8977),V=u(1989),N=u(635),U=u(4522),H=u(5074),Q=u(7371),Z=u(207),ue=u(1484),G=u(745);function X(me,Ee){1&me&&e.\u0275\u0275elementContainer(0)}function ee(me,Ee){if(1&me){const se=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",3),e.\u0275\u0275listener("ngSubmit",function(){return e.\u0275\u0275restoreView(se),e.\u0275\u0275nextContext().submit()}),e.\u0275\u0275elementStart(1,"mat-dialog-content"),e.\u0275\u0275elementStart(2,"div",4),e.\u0275\u0275template(3,X,1,0,"ng-container",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"mat-dialog-actions"),e.\u0275\u0275elementStart(5,"button",6),e.\u0275\u0275text(6,"Save"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&me){const se=e.\u0275\u0275nextContext(),ze=e.\u0275\u0275reference(3);e.\u0275\u0275property("formGroup",se.contentForm),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngTemplateOutlet",ze),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",!se.contentForm.valid)}}function ve(me,Ee){1&me&&e.\u0275\u0275elementContainer(0)}function Oe(me,Ee){if(1&me&&(e.\u0275\u0275elementStart(0,"div",4),e.\u0275\u0275template(1,ve,1,0,"ng-container",5),e.\u0275\u0275elementEnd()),2&me){e.\u0275\u0275nextContext();const se=e.\u0275\u0275reference(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",se)}}function Le(me,Ee){if(1&me&&(e.\u0275\u0275elementStart(0,"li"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&me){const se=Ee.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(se.key)}}function be(me,Ee){if(1&me&&(e.\u0275\u0275elementStart(0,"ul",18),e.\u0275\u0275template(1,Le,2,1,"li",19),e.\u0275\u0275pipe(2,"keyvalue"),e.\u0275\u0275elementEnd()),2&me){const se=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(2,2,se.tokens))}}function m(me,Ee){if(1&me&&(e.\u0275\u0275element(0,"classifieds-ui-dynamic-content-viewer",20),e.\u0275\u0275pipe(1,"markdown")),2&me){const se=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("content",e.\u0275\u0275pipeBind1(1,1,se.preview))}}function P(me,Ee){if(1&me&&e.\u0275\u0275element(0,"classifieds-ui-dynamic-content-viewer",20),2&me){const se=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("content",se.preview)}}function b(me,Ee){if(1&me&&(e.\u0275\u0275elementStart(0,"as-split",7),e.\u0275\u0275elementStart(1,"as-split-area",8),e.\u0275\u0275elementStart(2,"div"),e.\u0275\u0275template(3,be,3,4,"ul",9),e.\u0275\u0275elementStart(4,"mat-form-field"),e.\u0275\u0275elementStart(5,"mat-label"),e.\u0275\u0275text(6,"Content Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"mat-select",10),e.\u0275\u0275elementStart(8,"mat-option",11),e.\u0275\u0275text(9,"Markdown"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"mat-option",12),e.\u0275\u0275text(11,"HTML"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"mat-option",13),e.\u0275\u0275text(13,"JSON"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"as-split",14),e.\u0275\u0275elementStart(15,"as-split-area",8),e.\u0275\u0275elementStart(16,"div"),e.\u0275\u0275element(17,"textarea",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"as-split-area",8),e.\u0275\u0275elementStart(19,"div"),e.\u0275\u0275element(20,"textarea",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"as-split-area",8),e.\u0275\u0275template(22,m,2,3,"classifieds-ui-dynamic-content-viewer",17),e.\u0275\u0275template(23,P,1,1,"classifieds-ui-dynamic-content-viewer",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&me){const se=e.\u0275\u0275nextContext();e.\u0275\u0275property("direction",se.splitDirection)("formGroup",se.contentForm),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",se.tokens),e.\u0275\u0275advance(14),e.\u0275\u0275property("cols",se.cols)("rows",se.rows),e.\u0275\u0275advance(3),e.\u0275\u0275property("cols",se.cols)("rows",se.rows),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",se.isMarkdown),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!se.isMarkdown)}}class _{constructor(Ee){Ee&&(this.content=Ee.content,this.contentType=Ee.contentType,Ee.jsFile&&""!==Ee.jsFile&&(this.jsFile=Ee.jsFile),Ee.jsScript&&""!==Ee.jsScript&&(this.jsScript=Ee.jsScript))}}let R=(()=>{class me{constructor(se){this.fb=se,this.submitted=new e.EventEmitter,this.splitDirection="vertical",this.rows=40,this.cols=100,this.rootForm=!0,this.onTouched=()=>{},this.contentForm=this.fb.group({content:this.fb.control("",y.kI.required),contentType:this.fb.control("",y.kI.required),jsScript:this.fb.control("")}),this.isMarkdown=!1,this.contentEditorOptions={theme:"vs-dark",language:"text/html"}}set snippet(se){void 0!==se&&this.contentForm.setValue({...se,jsScript:se.jsScript&&""!==se.jsScript?se.jsScript:""})}ngOnInit(){this.contentForm.get("content").valueChanges.pipe((0,S.x)(),(0,V.b)(500),(0,N.U)(se=>void 0!==this.tokens?this.replaceTokens(se):se)).subscribe(se=>{this.preview=se}),this.contentForm.get("contentType").valueChanges.subscribe(se=>{this.isMarkdown="text/markdown"===se})}writeValue(se){se&&(console.log(`write value: ${se}`),this.contentForm.setValue(se,{emitEvent:!1}))}registerOnChange(se){this.contentForm.valueChanges.subscribe(se)}registerOnTouched(se){this.onTouched=se}setDisabledState(se){se?this.contentForm.disable():this.contentForm.enable()}validate(se){return this.contentForm.valid?null:{invalidForm:{valid:!1,message:"snippet is invalid"}}}submit(){this.submitted.emit(new _({content:this.contentForm.get("content").value,contentType:this.contentForm.get("contentType").value,jsScript:this.contentForm.get("jsScript").value}))}replaceTokens(se){return this.tokens&&this.tokens.forEach((ze,Ge)=>{se=se.replace(`[${Ge}]`,`${ze} [token = '${Ge}']`)}),se}addScript(){let se=document.createElement("script");se.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(se)}}return me.\u0275fac=function(se){return new(se||me)(e.\u0275\u0275directiveInject(y.qu))},me.\u0275cmp=e.\u0275\u0275defineComponent({type:me,selectors:[["classifieds-ui-snippet-form"]],inputs:{tokens:"tokens",splitDirection:"splitDirection",rows:"rows",cols:"cols",rootForm:"rootForm",snippet:"snippet"},outputs:{submitted:"submitted"},features:[e.\u0275\u0275ProvidersFeature([{provide:y.JU,useExisting:(0,e.forwardRef)(()=>me),multi:!0},{provide:y.Cf,useExisting:(0,e.forwardRef)(()=>me),multi:!0}])],decls:4,vars:2,consts:[[3,"formGroup","ngSubmit",4,"ngIf"],["class","content-inner",4,"ngIf"],["formBodyTpl",""],[3,"formGroup","ngSubmit"],[1,"content-inner"],[4,"ngTemplateOutlet"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"],[3,"direction","formGroup"],["size","50"],[3,"hidden",4,"ngIf"],["required","","formControlName","contentType"],["value","text/markdown"],["value","text/html"],["value","application/json"],["direction","horizontal"],["formControlName","content",3,"cols","rows"],["formControlName","jsScript",3,"cols","rows"],[3,"content",4,"ngIf"],[3,"hidden"],[4,"ngFor","ngForOf"],[3,"content"]],template:function(se,ze){1&se&&(e.\u0275\u0275template(0,ee,7,3,"form",0),e.\u0275\u0275template(1,Oe,2,1,"div",1),e.\u0275\u0275template(2,b,24,9,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)),2&se&&(e.\u0275\u0275property("ngIf",ze.rootForm),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!ze.rootForm))},directives:[U.lW,$.Mq,H.KE,Q.gD,Z.ey,z.DynamicContentViewer,n.NgIf,y._Y,y.JL,y.sg,ue.xY,n.NgTemplateOutlet,ue.H8,ue.ZT,$.zE,n.NgForOf,H.hX,y.Q7,y.JJ,y.u,y.Fj],pipes:[n.KeyValuePipe,p.NO],styles:[""]}),me})(),E=(()=>{class me{}return me.\u0275fac=function(se){return new(se||me)},me.\u0275mod=e.\u0275\u0275defineNgModule({type:me}),me.\u0275inj=e.\u0275\u0275defineInjector({imports:[[n.CommonModule,y.UX,y.u5,x.o9,$.fX,c.MaterialModule,d.s,p.JP,z.UtilsModule]]}),me})(),ne=(()=>{class me{parseSnippet({snippet:se}){return(0,G.of)(se.content)}}return me.\u0275fac=function(se){return new(se||me)},me.\u0275prov=e.\u0275\u0275defineInjectable({token:me,factory:me.\u0275fac,providedIn:"root"}),me})()},8698:(it,K,u)=>{u.d(K,{W:()=>x,G:()=>$});var e=u(7451),n=u(3192),y=u(5276);let x=(()=>{class c{}return c.\u0275fac=function(p){return new(p||c)},c.\u0275mod=e.\u0275\u0275defineNgModule({type:c}),c.\u0275inj=e.\u0275\u0275defineInjector({imports:[[n.CommonModule]]}),c})(),$=(()=>{class c{constructor(){}generateTokens(p){const z=new Map;return this.attributeTokens(p,z,"",0),z}generateGenericTokens(p,z=""){const S=new Map;return this.genericTokens(p,S,z,0),S}attributeTokens(p,z,S,V){p.forEach((N,U)=>{if("widget"!==N.name)for(const H in N)N.type===y.AttributeTypes.Complex||"attributes"===H&&N.attributes&&N.attributes.length>0?this.attributeTokens(N.attributes,z,N.type===y.AttributeTypes.Complex?`${S}`:`${S}.${N.name}`,V+1):"attributes"!==H&&z.set(H===N.name?`${S}.${H}`:`${S}.${N.name}.${H}`,N[H])})}genericTokens(p,z,S,V){for(const U in p)if("object"!=typeof p[U])z.set(`${S}.${U}`,p[U]);else if(Array.isArray(p[U])&&"attributes"===U)this.attributeTokens(p[U],z,`${S}.${U}`,V+1);else if(Array.isArray(p[U])){var N=p[U].length;for(let Q=0;Q<N;Q++)this.genericTokens(p[U][Q],z,`${S}.${U}.${Q}`,V+1)}else this.genericTokens(p[U],z,`${S}.${U}`,V+1)}replaceTokens(p,z){return z&&z.forEach((S,V)=>{p=p.replace(`[${V}]`,`${S}`)}),p}matchTokens(p,z){const S=[],V=z.length;for(let N=0;N<V;N++)p.indexOf(`[${z[N]}]`)>-1&&S.push(z[N]);return S}discoverTokens(p,z=!1){const S=p.match(/(\[(?:\[??[^\[]*?\]))/g);return null===S?[]:S.reduce((N,U)=>{if(-1!==U.indexOf(" ")||-1===U.indexOf("."))return N;const[H]=1===U.indexOf(".")?["."]:U.substr(1,U.length-2).split(".");return-1!==N.findIndex(Q=>Q===H)?N:[...N,z?U.substr(1,U.length-2):H]},[])}}return c.\u0275fac=function(p){return new(p||c)},c.\u0275prov=e.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},5008:(it,K,u)=>{u.d(K,{KY:()=>Q,tQ:()=>H,sm:()=>be,IM:()=>De,IX:()=>D});var e=u(7451),n=u(3192);function y(C,g){if(1&C&&e.\u0275\u0275element(0,"div",3),2&C){const B=g.index,de=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngStyle",de.gridRenderer.getGridColumnStyle(B))}}function x(C,g){if(1&C&&e.\u0275\u0275element(0,"div",4),2&C){const B=g.index,de=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngStyle",de.gridRenderer.getGridRowStyle(B))}}const $=["*"];function c(C,g){if(1&C){const B=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",8),e.\u0275\u0275listener("mousedown",function(ye){return e.\u0275\u0275restoreView(B),e.\u0275\u0275nextContext().resize.dragStartDelay(ye)})("touchstart",function(ye){return e.\u0275\u0275restoreView(B),e.\u0275\u0275nextContext().resize.dragStartDelay(ye)}),e.\u0275\u0275elementEnd()}}function d(C,g){if(1&C){const B=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",9),e.\u0275\u0275listener("mousedown",function(ye){return e.\u0275\u0275restoreView(B),e.\u0275\u0275nextContext().resize.dragStartDelay(ye)})("touchstart",function(ye){return e.\u0275\u0275restoreView(B),e.\u0275\u0275nextContext().resize.dragStartDelay(ye)}),e.\u0275\u0275elementEnd()}}function p(C,g){if(1&C){const B=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",10),e.\u0275\u0275listener("mousedown",function(ye){return e.\u0275\u0275restoreView(B),e.\u0275\u0275nextContext().resize.dragStartDelay(ye)})("touchstart",function(ye){return e.\u0275\u0275restoreView(B),e.\u0275\u0275nextContext().resize.dragStartDelay(ye)}),e.\u0275\u0275elementEnd()}}function z(C,g){if(1&C){const B=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",11),e.\u0275\u0275listener("mousedown",function(ye){return e.\u0275\u0275restoreView(B),e.\u0275\u0275nextContext().resize.dragStartDelay(ye)})("touchstart",function(ye){return e.\u0275\u0275restoreView(B),e.\u0275\u0275nextContext().resize.dragStartDelay(ye)}),e.\u0275\u0275elementEnd()}}function S(C,g){if(1&C){const B=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",12),e.\u0275\u0275listener("mousedown",function(ye){return e.\u0275\u0275restoreView(B),e.\u0275\u0275nextContext().resize.dragStartDelay(ye)})("touchstart",function(ye){return e.\u0275\u0275restoreView(B),e.\u0275\u0275nextContext().resize.dragStartDelay(ye)}),e.\u0275\u0275elementEnd()}}function V(C,g){if(1&C){const B=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",13),e.\u0275\u0275listener("mousedown",function(ye){return e.\u0275\u0275restoreView(B),e.\u0275\u0275nextContext().resize.dragStartDelay(ye)})("touchstart",function(ye){return e.\u0275\u0275restoreView(B),e.\u0275\u0275nextContext().resize.dragStartDelay(ye)}),e.\u0275\u0275elementEnd()}}function N(C,g){if(1&C){const B=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",14),e.\u0275\u0275listener("mousedown",function(ye){return e.\u0275\u0275restoreView(B),e.\u0275\u0275nextContext().resize.dragStartDelay(ye)})("touchstart",function(ye){return e.\u0275\u0275restoreView(B),e.\u0275\u0275nextContext().resize.dragStartDelay(ye)}),e.\u0275\u0275elementEnd()}}function U(C,g){if(1&C){const B=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",15),e.\u0275\u0275listener("mousedown",function(ye){return e.\u0275\u0275restoreView(B),e.\u0275\u0275nextContext().resize.dragStartDelay(ye)})("touchstart",function(ye){return e.\u0275\u0275restoreView(B),e.\u0275\u0275nextContext().resize.dragStartDelay(ye)}),e.\u0275\u0275elementEnd()}}var H=(()=>{return(C=H||(H={})).Fit="fit",C.ScrollVertical="scrollVertical",C.ScrollHorizontal="scrollHorizontal",C.Fixed="fixed",C.VerticalFixed="verticalFixed",C.HorizontalFixed="horizontalFixed",H;var C})(),Q=(()=>{return(C=Q||(Q={})).Always="always",C.OnDragAndResize="onDrag&Resize",C.None="none",Q;var C})(),Z=(()=>{return(C=Z||(Z={})).None="none",C.CompactUp="compactUp",C.CompactLeft="compactLeft",C.CompactUpAndLeft="compactUp&Left",C.CompactLeftAndUp="compactLeft&Up",C.CompactRight="compactRight",C.CompactUpAndRight="compactUp&Right",C.CompactRightAndUp="compactRight&Up",C.CompactDown="compactDown",C.CompactDownAndLeft="compactDown&Left",C.CompactLeftAndDown="compactLeft&Down",C.CompactDownAndRight="compactDown&Right",C.CompactRightAndDown="compactRight&Down",Z;var C})(),ue=(()=>{return(C=ue||(ue={})).LTR="ltr",C.RTL="rtl",ue;var C})();class G{constructor(g){this.gridster=g}destroy(){delete this.gridster}checkCompact(){this.gridster.$options.compactType!==Z.None&&(this.gridster.$options.compactType===Z.CompactUp?this.checkCompactMovement("y",-1):this.gridster.$options.compactType===Z.CompactLeft?this.checkCompactMovement("x",-1):this.gridster.$options.compactType===Z.CompactUpAndLeft?(this.checkCompactMovement("y",-1),this.checkCompactMovement("x",-1)):this.gridster.$options.compactType===Z.CompactLeftAndUp?(this.checkCompactMovement("x",-1),this.checkCompactMovement("y",-1)):this.gridster.$options.compactType===Z.CompactRight?this.checkCompactMovement("x",1):this.gridster.$options.compactType===Z.CompactUpAndRight?(this.checkCompactMovement("y",-1),this.checkCompactMovement("x",1)):this.gridster.$options.compactType===Z.CompactRightAndUp?(this.checkCompactMovement("x",1),this.checkCompactMovement("y",-1)):this.gridster.$options.compactType===Z.CompactDown?this.checkCompactMovement("y",1):this.gridster.$options.compactType===Z.CompactDownAndLeft?(this.checkCompactMovement("y",1),this.checkCompactMovement("x",-1)):this.gridster.$options.compactType===Z.CompactDownAndRight?(this.checkCompactMovement("y",1),this.checkCompactMovement("x",1)):this.gridster.$options.compactType===Z.CompactLeftAndDown?(this.checkCompactMovement("x",-1),this.checkCompactMovement("y",1)):this.gridster.$options.compactType===Z.CompactRightAndDown&&(this.checkCompactMovement("x",1),this.checkCompactMovement("y",1)))}checkCompactItem(g){this.gridster.$options.compactType!==Z.None&&(this.gridster.$options.compactType===Z.CompactUp?this.moveTillCollision(g,"y",-1):this.gridster.$options.compactType===Z.CompactLeft?this.moveTillCollision(g,"x",-1):this.gridster.$options.compactType===Z.CompactUpAndLeft?(this.moveTillCollision(g,"y",-1),this.moveTillCollision(g,"x",-1)):this.gridster.$options.compactType===Z.CompactLeftAndUp?(this.moveTillCollision(g,"x",-1),this.moveTillCollision(g,"y",-1)):this.gridster.$options.compactType===Z.CompactUpAndRight?(this.moveTillCollision(g,"y",-1),this.moveTillCollision(g,"x",1)):this.gridster.$options.compactType===Z.CompactDown?this.moveTillCollision(g,"y",1):this.gridster.$options.compactType===Z.CompactDownAndLeft?(this.moveTillCollision(g,"y",1),this.moveTillCollision(g,"x",-1)):this.gridster.$options.compactType===Z.CompactLeftAndDown?(this.moveTillCollision(g,"x",-1),this.moveTillCollision(g,"y",1)):this.gridster.$options.compactType===Z.CompactDownAndRight?(this.moveTillCollision(g,"y",1),this.moveTillCollision(g,"x",1)):this.gridster.$options.compactType===Z.CompactRightAndDown&&(this.moveTillCollision(g,"x",1),this.moveTillCollision(g,"y",1)))}checkCompactMovement(g,B){let de=!1;this.gridster.grid.forEach(ye=>{!1!==ye.$item.compactEnabled&&this.moveTillCollision(ye.$item,g,B)&&(de=!0,ye.item[g]=ye.$item[g],ye.itemChanged())}),de&&this.checkCompact()}moveTillCollision(g,B,de){return g[B]+=de,this.gridster.checkCollision(g)?(g[B]-=de,!1):(this.moveTillCollision(g,B,de),!0)}}const X={gridType:H.Fit,scale:1,fixedColWidth:250,fixedRowHeight:250,keepFixedHeightInMobile:!1,keepFixedWidthInMobile:!1,setGridSize:!1,compactType:Z.None,mobileBreakpoint:640,allowMultiLayer:!1,defaultLayerIndex:0,maxLayerIndex:2,baseLayerIndex:1,minCols:1,maxCols:100,minRows:1,maxRows:100,defaultItemCols:1,defaultItemRows:1,maxItemCols:50,maxItemRows:50,minItemCols:1,minItemRows:1,minItemArea:1,maxItemArea:2500,addEmptyRowsCount:0,rowHeightRatio:1,margin:10,outerMargin:!0,outerMarginTop:null,outerMarginRight:null,outerMarginBottom:null,outerMarginLeft:null,useTransformPositioning:!0,scrollSensitivity:10,scrollSpeed:20,initCallback:void 0,destroyCallback:void 0,gridSizeChangedCallback:void 0,itemChangeCallback:void 0,itemResizeCallback:void 0,itemInitCallback:void 0,itemRemovedCallback:void 0,itemValidateCallback:void 0,enableEmptyCellClick:!1,enableEmptyCellContextMenu:!1,enableEmptyCellDrop:!1,enableEmptyCellDrag:!1,enableOccupiedCellDrop:!1,emptyCellClickCallback:void 0,emptyCellContextMenuCallback:void 0,emptyCellDropCallback:void 0,emptyCellDragCallback:void 0,emptyCellDragMaxCols:50,emptyCellDragMaxRows:50,ignoreMarginInRow:!1,draggable:{delayStart:0,enabled:!1,ignoreContentClass:"gridster-item-content",ignoreContent:!1,dragHandleClass:"drag-handler",stop:void 0,start:void 0,dropOverItems:!1,dropOverItemsCallback:void 0},resizable:{delayStart:0,enabled:!1,handles:{s:!0,e:!0,n:!0,w:!0,se:!0,ne:!0,sw:!0,nw:!0},stop:void 0,start:void 0},swap:!0,swapWhileDragging:!1,pushItems:!1,disablePushOnDrag:!1,disablePushOnResize:!1,pushDirections:{north:!0,east:!0,south:!0,west:!0},pushResizeItems:!1,displayGrid:Q.OnDragAndResize,disableWindowResize:!1,disableWarnings:!1,scrollToNewItems:!1,disableScrollHorizontal:!1,disableScrollVertical:!1,disableAutoPositionOnConflict:!1,dirType:ue.LTR};class ee{static merge(g,B,de){for(const ye in B)void 0!==B[ye]&&de.hasOwnProperty(ye)&&(g[ye]="object"==typeof B[ye]?ee.merge(g[ye],B[ye],de[ye]):B[ye]);return g}static debounce(g,B){let de;return function(){const ye=this,Me=arguments,Qe=()=>{de=void 0,g.apply(ye,Me)};clearTimeout(de),de=setTimeout(Qe,B)}}static checkTouchEvent(g){void 0===g.clientX&&g.touches&&(g.touches&&g.touches.length?(g.clientX=g.touches[0].clientX,g.clientY=g.touches[0].clientY):g.changedTouches&&g.changedTouches.length&&(g.clientX=g.changedTouches[0].clientX,g.clientY=g.changedTouches[0].clientY))}static checkContentClassForEvent(g,B){if(g.$options.draggable.ignoreContent){if(!ee.checkDragHandleClass(B.target,B.currentTarget,g.$options.draggable.dragHandleClass,g.$options.draggable.ignoreContentClass))return!0}else if(ee.checkContentClass(B.target,B.currentTarget,g.$options.draggable.ignoreContentClass))return!0;return!1}static checkContentClassForEmptyCellClickEvent(g,B){return ee.checkContentClass(B.target,B.currentTarget,g.$options.draggable.ignoreContentClass)||ee.checkContentClass(B.target,B.currentTarget,g.$options.draggable.dragHandleClass)}static checkDragHandleClass(g,B,de,ye){if(!g||g===B)return!1;if(g.hasAttribute("class")){const Me=g.getAttribute("class").split(" ");if(Me.indexOf(de)>-1)return!0;if(Me.indexOf(ye)>-1)return!1}return ee.checkDragHandleClass(g.parentNode,B,de,ye)}static checkContentClass(g,B,de){return!(!g||g===B)&&(!!(g.hasAttribute("class")&&g.getAttribute("class").split(" ").indexOf(de)>-1)||ee.checkContentClass(g.parentNode,B,de))}static compareItems(g,B){return g.y>B.y?-1:g.y<B.y?1:g.x>B.x?-1:1}}class ve{constructor(g){this.gridster=g}destroy(){delete this.initialItem,delete this.gridster.movingItem,this.gridster.previewStyle&&this.gridster.previewStyle(),delete this.gridster,this.emptyCellExit&&(this.emptyCellExit(),this.emptyCellExit=null)}updateOptions(){this.gridster.$options.enableEmptyCellClick&&!this.emptyCellClick&&this.gridster.options.emptyCellClickCallback?(this.emptyCellClick=this.gridster.renderer.listen(this.gridster.el,"click",this.emptyCellClickCb.bind(this)),this.emptyCellClickTouch=this.gridster.renderer.listen(this.gridster.el,"touchend",this.emptyCellClickCb.bind(this))):!this.gridster.$options.enableEmptyCellClick&&this.emptyCellClick&&this.emptyCellClickTouch&&(this.emptyCellClick(),this.emptyCellClickTouch(),this.emptyCellClick=null,this.emptyCellClickTouch=null),this.gridster.$options.enableEmptyCellContextMenu&&!this.emptyCellContextMenu&&this.gridster.options.emptyCellContextMenuCallback?this.emptyCellContextMenu=this.gridster.renderer.listen(this.gridster.el,"contextmenu",this.emptyCellContextMenuCb.bind(this)):!this.gridster.$options.enableEmptyCellContextMenu&&this.emptyCellContextMenu&&(this.emptyCellContextMenu(),this.emptyCellContextMenu=null),this.gridster.$options.enableEmptyCellDrop&&!this.emptyCellDrop&&this.gridster.options.emptyCellDropCallback?(this.emptyCellDrop=this.gridster.renderer.listen(this.gridster.el,"drop",this.emptyCellDragDrop.bind(this)),this.gridster.zone.runOutsideAngular(()=>{this.emptyCellMove=this.gridster.renderer.listen(this.gridster.el,"dragover",this.emptyCellDragOver.bind(this))}),this.emptyCellExit=this.gridster.renderer.listen("document","dragend",()=>{this.gridster.movingItem=null,this.gridster.previewStyle()})):!this.gridster.$options.enableEmptyCellDrop&&this.emptyCellDrop&&this.emptyCellMove&&this.emptyCellExit&&(this.emptyCellDrop(),this.emptyCellMove(),this.emptyCellExit(),this.emptyCellMove=null,this.emptyCellDrop=null,this.emptyCellExit=null),this.gridster.$options.enableEmptyCellDrag&&!this.emptyCellDrag&&this.gridster.options.emptyCellDragCallback?(this.emptyCellDrag=this.gridster.renderer.listen(this.gridster.el,"mousedown",this.emptyCellMouseDown.bind(this)),this.emptyCellDragTouch=this.gridster.renderer.listen(this.gridster.el,"touchstart",this.emptyCellMouseDown.bind(this))):!this.gridster.$options.enableEmptyCellDrag&&this.emptyCellDrag&&this.emptyCellDragTouch&&(this.emptyCellDrag(),this.emptyCellDragTouch(),this.emptyCellDrag=null,this.emptyCellDragTouch=null)}emptyCellClickCb(g){if(!this.gridster||this.gridster.movingItem||ee.checkContentClassForEmptyCellClickEvent(this.gridster,g))return;const B=this.getValidItemFromEvent(g);!B||(this.gridster.options.emptyCellClickCallback&&this.gridster.options.emptyCellClickCallback(g,B),this.gridster.cdRef.markForCheck())}emptyCellContextMenuCb(g){if(this.gridster.movingItem||ee.checkContentClassForEmptyCellClickEvent(this.gridster,g))return;g.preventDefault(),g.stopPropagation();const B=this.getValidItemFromEvent(g);!B||(this.gridster.options.emptyCellContextMenuCallback&&this.gridster.options.emptyCellContextMenuCallback(g,B),this.gridster.cdRef.markForCheck())}emptyCellDragDrop(g){const B=this.getValidItemFromEvent(g);!B||(this.gridster.options.emptyCellDropCallback&&this.gridster.options.emptyCellDropCallback(g,B),this.gridster.cdRef.markForCheck())}emptyCellDragOver(g){g.preventDefault(),g.stopPropagation();const B=this.getValidItemFromEvent(g);B?(g.dataTransfer&&(g.dataTransfer.dropEffect="move"),this.gridster.movingItem=B):(g.dataTransfer&&(g.dataTransfer.dropEffect="none"),this.gridster.movingItem=null),this.gridster.previewStyle()}emptyCellMouseDown(g){if(ee.checkContentClassForEmptyCellClickEvent(this.gridster,g))return;g.preventDefault(),g.stopPropagation();const B=this.getValidItemFromEvent(g);!B||1!==g.buttons&&!(g instanceof TouchEvent)||(this.initialItem=B,this.gridster.movingItem=B,this.gridster.previewStyle(),this.gridster.zone.runOutsideAngular(()=>{this.emptyCellMMove=this.gridster.renderer.listen("window","mousemove",this.emptyCellMouseMove.bind(this)),this.emptyCellMMoveTouch=this.gridster.renderer.listen("window","touchmove",this.emptyCellMouseMove.bind(this))}),this.emptyCellUp=this.gridster.renderer.listen("window","mouseup",this.emptyCellMouseUp.bind(this)),this.emptyCellUpTouch=this.gridster.renderer.listen("window","touchend",this.emptyCellMouseUp.bind(this)))}emptyCellMouseMove(g){g.preventDefault(),g.stopPropagation();const B=this.getValidItemFromEvent(g,this.initialItem);!B||(this.gridster.movingItem=B,this.gridster.previewStyle())}emptyCellMouseUp(g){this.emptyCellMMove(),this.emptyCellMMoveTouch(),this.emptyCellUp(),this.emptyCellUpTouch();const B=this.getValidItemFromEvent(g,this.initialItem);B&&(this.gridster.movingItem=B),this.gridster.options.emptyCellDragCallback&&this.gridster.movingItem&&this.gridster.options.emptyCellDragCallback(g,this.gridster.movingItem),setTimeout(()=>{this.initialItem=null,this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle())}),this.gridster.cdRef.markForCheck()}getPixelsX(g,B){const de=this.gridster.options.scale;return de?(g.clientX-B.left)/de+this.gridster.el.scrollLeft-this.gridster.gridRenderer.getLeftMargin():g.clientX+this.gridster.el.scrollLeft-B.left-this.gridster.gridRenderer.getLeftMargin()}getPixelsY(g,B){const de=this.gridster.options.scale;return de?(g.clientY-B.top)/de+this.gridster.el.scrollTop-this.gridster.gridRenderer.getTopMargin():g.clientY+this.gridster.el.scrollTop-B.top-this.gridster.gridRenderer.getTopMargin()}getValidItemFromEvent(g,B){g.preventDefault(),g.stopPropagation(),ee.checkTouchEvent(g);const de=this.gridster.el.getBoundingClientRect(),ye=this.getPixelsX(g,de),Me=this.getPixelsY(g,de),Qe={x:this.gridster.pixelsToPositionX(ye,Math.floor,!0),y:this.gridster.pixelsToPositionY(Me,Math.floor,!0),cols:this.gridster.$options.defaultItemCols,rows:this.gridster.$options.defaultItemRows};if(B&&(Qe.cols=Math.min(Math.abs(B.x-Qe.x)+1,this.gridster.$options.emptyCellDragMaxCols),Qe.rows=Math.min(Math.abs(B.y-Qe.y)+1,this.gridster.$options.emptyCellDragMaxRows),B.x<Qe.x?Qe.x=B.x:B.x-Qe.x>this.gridster.$options.emptyCellDragMaxCols-1&&(Qe.x=this.gridster.movingItem?this.gridster.movingItem.x:0),B.y<Qe.y?Qe.y=B.y:B.y-Qe.y>this.gridster.$options.emptyCellDragMaxRows-1&&(Qe.y=this.gridster.movingItem?this.gridster.movingItem.y:0)),this.gridster.$options.enableOccupiedCellDrop||!this.gridster.checkCollision(Qe))return Qe}}class Oe{constructor(g){this.gridster=g}destroy(){delete this.gridster}updateItem(g,B,de){if(this.gridster.mobile)this.clearCellPosition(de,g),de.setStyle(g,"height",this.gridster.$options.keepFixedHeightInMobile?(B.rows-1)*this.gridster.$options.margin+B.rows*this.gridster.$options.fixedRowHeight+"px":B.rows*this.gridster.curWidth/B.cols+"px"),de.setStyle(g,"width",this.gridster.$options.keepFixedWidthInMobile?this.gridster.$options.fixedColWidth+"px":""),de.setStyle(g,"margin-bottom",this.gridster.$options.margin+"px"),de.setStyle(g,ue.LTR?"margin-right":"margin-left","");else{const ye=Math.round(this.gridster.curColWidth*B.x),Me=Math.round(this.gridster.curRowHeight*B.y),Qe=this.gridster.curColWidth*B.cols-this.gridster.$options.margin,st=this.gridster.curRowHeight*B.rows-this.gridster.$options.margin;this.setCellPosition(de,g,ye,Me),de.setStyle(g,"width",Qe+"px"),de.setStyle(g,"height",st+"px");let Ut=null,qt=null;this.gridster.$options.outerMargin&&(this.gridster.rows===B.rows+B.y&&(Ut=null!==this.gridster.$options.outerMarginBottom?this.gridster.$options.outerMarginBottom+"px":this.gridster.$options.margin+"px"),this.gridster.columns===B.cols+B.x&&(qt=null!==this.gridster.$options.outerMarginBottom?this.gridster.$options.outerMarginRight+"px":this.gridster.$options.margin+"px")),de.setStyle(g,"margin-bottom",Ut),de.setStyle(g,ue.LTR?"margin-right":"margin-left",qt)}}updateGridster(){let g="",B="",de="",ye="";if(this.gridster.$options.gridType===H.Fit)g=H.Fit,B=H.ScrollVertical,de=H.ScrollHorizontal,ye=H.Fixed;else if(this.gridster.$options.gridType===H.ScrollVertical)this.gridster.curRowHeight=this.gridster.curColWidth*this.gridster.$options.rowHeightRatio,g=H.ScrollVertical,B=H.Fit,de=H.ScrollHorizontal,ye=H.Fixed;else if(this.gridster.$options.gridType===H.ScrollHorizontal){const Me=this.gridster.$options.rowHeightRatio;this.gridster.curColWidth=this.gridster.curRowHeight*(Me>=1?Me:Me+1),g=H.ScrollHorizontal,B=H.Fit,de=H.ScrollVertical,ye=H.Fixed}else this.gridster.$options.gridType===H.Fixed?(this.gridster.curColWidth=this.gridster.$options.fixedColWidth+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),this.gridster.curRowHeight=this.gridster.$options.fixedRowHeight+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),g=H.Fixed,B=H.Fit,de=H.ScrollVertical,ye=H.ScrollHorizontal):this.gridster.$options.gridType===H.VerticalFixed?(this.gridster.curRowHeight=this.gridster.$options.fixedRowHeight+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),g=H.ScrollVertical,B=H.Fit,de=H.ScrollHorizontal,ye=H.Fixed):this.gridster.$options.gridType===H.HorizontalFixed&&(this.gridster.curColWidth=this.gridster.$options.fixedColWidth+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),g=H.ScrollHorizontal,B=H.Fit,de=H.ScrollVertical,ye=H.Fixed);this.gridster.mobile||this.gridster.$options.setGridSize&&this.gridster.$options.gridType!==H.Fit?this.gridster.renderer.removeClass(this.gridster.el,g):this.gridster.renderer.addClass(this.gridster.el,g),this.gridster.renderer.removeClass(this.gridster.el,B),this.gridster.renderer.removeClass(this.gridster.el,de),this.gridster.renderer.removeClass(this.gridster.el,ye)}getGridColumnStyle(g){return{...this.getLeftPosition(this.gridster.curColWidth*g),width:this.gridster.curColWidth-this.gridster.$options.margin+"px",height:this.gridster.gridRows.length*this.gridster.curRowHeight-this.gridster.$options.margin+"px"}}getGridRowStyle(g){return{...this.getTopPosition(this.gridster.curRowHeight*g),width:this.gridster.gridColumns.length*this.gridster.curColWidth-this.gridster.$options.margin+"px",height:this.gridster.curRowHeight-this.gridster.$options.margin+"px"}}getLeftPosition(g){const B=this.gridster.$options.dirType===ue.RTL?-g:g;return this.gridster.$options.useTransformPositioning?{transform:"translateX("+B+"px)"}:{left:this.getLeftMargin()+B+"px"}}getTopPosition(g){return this.gridster.$options.useTransformPositioning?{transform:"translateY("+g+"px)"}:{top:this.getTopMargin()+g+"px"}}clearCellPosition(g,B){this.gridster.$options.useTransformPositioning?g.setStyle(B,"transform",""):(g.setStyle(B,"top",""),g.setStyle(B,"left",""))}setCellPosition(g,B,de,ye){const Me=this.gridster.$options.dirType===ue.RTL?-de:de;this.gridster.$options.useTransformPositioning?g.setStyle(B,"transform","translate3d("+Me+"px, "+ye+"px, 0)"):(g.setStyle(B,"left",this.getLeftMargin()+Me+"px"),g.setStyle(B,"top",this.getTopMargin()+ye+"px"))}getLeftMargin(){return this.gridster.$options.outerMargin?null!==this.gridster.$options.outerMarginLeft?this.gridster.$options.outerMarginLeft:this.gridster.$options.margin:0}getTopMargin(){return this.gridster.$options.outerMargin?null!==this.gridster.$options.outerMarginTop?this.gridster.$options.outerMarginTop:this.gridster.$options.margin:0}}let P,b,R,E,ne,me,Ee,se,ze,Le=(()=>{class C{constructor(B,de){this.renderer=de,this.el=B.nativeElement}ngOnInit(){this.sub=this.previewStyle$.subscribe(B=>this.previewStyle(B))}ngOnDestroy(){this.sub.unsubscribe(),delete this.el}previewStyle(B){B?(this.renderer.setStyle(this.el,"display","block"),this.gridRenderer.updateItem(this.el,B,this.renderer)):this.renderer.setStyle(this.el,"display","")}}return C.\u0275fac=function(B){return new(B||C)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(e.Renderer2))},C.\u0275cmp=e.\u0275\u0275defineComponent({type:C,selectors:[["gridster-preview"]],inputs:{previewStyle$:"previewStyle$",gridRenderer:"gridRenderer"},decls:0,vars:0,template:function(B,de){},styles:["gridster-preview{position:absolute;display:none;background:rgba(0,0,0,.15)}\n"],encapsulation:2}),C})(),be=(()=>{class C{constructor(B,de,ye,Me){this.renderer=de,this.cdRef=ye,this.zone=Me,this.columns=0,this.rows=0,this.gridColumns=[],this.gridRows=[],this.previewStyle$=new e.EventEmitter,this.el=B.nativeElement,this.$options=JSON.parse(JSON.stringify(X)),this.calculateLayoutDebounce=ee.debounce(this.calculateLayout.bind(this),0),this.mobile=!1,this.curWidth=0,this.curHeight=0,this.grid=[],this.curColWidth=0,this.curRowHeight=0,this.dragInProgress=!1,this.emptyCell=new ve(this),this.compact=new G(this),this.gridRenderer=new Oe(this)}static checkCollisionTwoItemsForSwaping(B,de){return B.x+(1===B.cols?0:1)<de.x+de.cols&&B.x+B.cols>de.x+(1===de.cols?0:1)&&B.y+(1===B.rows?0:1)<de.y+de.rows&&B.y+B.rows>de.y+(1===de.rows?0:1)}checkCollisionTwoItems(B,de){if(!(B.x<de.x+de.cols&&B.x+B.cols>de.x&&B.y<de.y+de.rows&&B.y+B.rows>de.y))return!1;if(!this.$options.allowMultiLayer)return!0;const Me=this.$options.defaultLayerIndex;return(void 0===B.layerIndex?Me:B.layerIndex)===(void 0===de.layerIndex?Me:de.layerIndex)}ngOnInit(){this.options.initCallback&&this.options.initCallback(this)}ngOnChanges(B){B.options&&(this.setOptions(),this.options.api={optionsChanged:this.optionsChanged.bind(this),resize:this.onResize.bind(this),getNextPossiblePosition:this.getNextPossiblePosition.bind(this),getFirstPossiblePosition:this.getFirstPossiblePosition.bind(this),getLastPossiblePosition:this.getLastPossiblePosition.bind(this),getItemComponent:de=>this.getItemComponent(de)},this.columns=this.$options.minCols,this.rows=this.$options.minRows+this.$options.addEmptyRowsCount,this.setGridSize(),this.calculateLayout())}resize(){let B,de;"fit"!==this.$options.gridType||this.mobile?(de=this.el.clientWidth,B=this.el.clientHeight):(de=this.el.offsetWidth,B=this.el.offsetHeight),(de!==this.curWidth||B!==this.curHeight)&&this.checkIfToResize()&&this.onResize()}setOptions(){this.$options=ee.merge(this.$options,this.options,this.$options),this.$options.disableWindowResize||this.windowResize?this.$options.disableWindowResize&&this.windowResize&&(this.windowResize(),this.windowResize=null):this.windowResize=this.renderer.listen("window","resize",this.onResize.bind(this)),this.emptyCell.updateOptions()}optionsChanged(){this.setOptions();let de,B=this.grid.length-1;for(;B>=0;B--)de=this.grid[B],de.updateOptions();this.calculateLayout()}ngOnDestroy(){this.previewStyle$.complete(),this.windowResize&&this.windowResize(),this.options&&this.options.destroyCallback&&this.options.destroyCallback(this),this.options&&this.options.api&&(this.options.api.resize=void 0,this.options.api.optionsChanged=void 0,this.options.api.getNextPossiblePosition=void 0,this.options.api=void 0),this.emptyCell.destroy(),delete this.emptyCell,this.compact.destroy(),delete this.compact}onResize(){this.el.clientWidth&&(this.options.setGridSize&&(this.renderer.setStyle(this.el,"width",""),this.renderer.setStyle(this.el,"height","")),this.setGridSize(),this.calculateLayout())}checkIfToResize(){const B=this.el.clientWidth,de=this.el.offsetWidth,ye=this.el.scrollWidth,Me=this.el.clientHeight,Qe=this.el.offsetHeight,st=this.el.scrollHeight;return!(B<de&&st>Qe&&st-Qe<de-B||Me<Qe&&ye>de&&ye-de<Qe-Me)}setGridSize(){const B=this.el;let de,ye;this.$options.setGridSize||this.$options.gridType===H.Fit&&!this.mobile?(de=B.offsetWidth,ye=B.offsetHeight):(de=B.clientWidth,ye=B.clientHeight),this.curWidth=de,this.curHeight=ye}setGridDimensions(){this.setGridSize(),!this.mobile&&this.$options.mobileBreakpoint>this.curWidth?(this.mobile=!this.mobile,this.renderer.addClass(this.el,"mobile")):this.mobile&&this.$options.mobileBreakpoint<this.curWidth&&(this.mobile=!this.mobile,this.renderer.removeClass(this.el,"mobile"));let Me,B=this.$options.minRows,de=this.$options.minCols,ye=this.grid.length-1;for(;ye>=0;ye--)Me=this.grid[ye],Me.notPlaced||(B=Math.max(B,Me.$item.y+Me.$item.rows),de=Math.max(de,Me.$item.x+Me.$item.cols));B+=this.$options.addEmptyRowsCount,(this.columns!==de||this.rows!==B)&&(this.columns=de,this.rows=B,this.options.gridSizeChangedCallback&&this.options.gridSizeChangedCallback(this))}calculateLayout(){if(this.compact&&this.compact.checkCompact(),this.setGridDimensions(),this.$options.outerMargin){let ye=-this.$options.margin;null!==this.$options.outerMarginLeft?(ye+=this.$options.outerMarginLeft,this.renderer.setStyle(this.el,"padding-left",this.$options.outerMarginLeft+"px")):(ye+=this.$options.margin,this.renderer.setStyle(this.el,"padding-left",this.$options.margin+"px")),null!==this.$options.outerMarginRight?(ye+=this.$options.outerMarginRight,this.renderer.setStyle(this.el,"padding-right",this.$options.outerMarginRight+"px")):(ye+=this.$options.margin,this.renderer.setStyle(this.el,"padding-right",this.$options.margin+"px")),this.curColWidth=(this.curWidth-ye)/this.columns;let Me=-this.$options.margin;null!==this.$options.outerMarginTop?(Me+=this.$options.outerMarginTop,this.renderer.setStyle(this.el,"padding-top",this.$options.outerMarginTop+"px")):(Me+=this.$options.margin,this.renderer.setStyle(this.el,"padding-top",this.$options.margin+"px")),null!==this.$options.outerMarginBottom?(Me+=this.$options.outerMarginBottom,this.renderer.setStyle(this.el,"padding-bottom",this.$options.outerMarginBottom+"px")):(Me+=this.$options.margin,this.renderer.setStyle(this.el,"padding-bottom",this.$options.margin+"px")),this.curRowHeight=(this.curHeight-Me)/this.rows*this.$options.rowHeightRatio}else this.curColWidth=(this.curWidth+this.$options.margin)/this.columns,this.curRowHeight=(this.curHeight+this.$options.margin)/this.rows*this.$options.rowHeightRatio,this.renderer.setStyle(this.el,"padding-left","0px"),this.renderer.setStyle(this.el,"padding-right","0px"),this.renderer.setStyle(this.el,"padding-top","0px"),this.renderer.setStyle(this.el,"padding-bottom","0px");this.gridRenderer.updateGridster(),this.$options.setGridSize?(this.renderer.addClass(this.el,"gridSize"),this.mobile||(this.renderer.setStyle(this.el,"width",this.columns*this.curColWidth+this.$options.margin+"px"),this.renderer.setStyle(this.el,"height",this.rows*this.curRowHeight+this.$options.margin+"px"))):(this.renderer.removeClass(this.el,"gridSize"),this.renderer.setStyle(this.el,"width",""),this.renderer.setStyle(this.el,"height","")),this.updateGrid();let de,B=this.grid.length-1;for(;B>=0;B--)de=this.grid[B],de.setSize(),de.drag.toggle(),de.resize.toggle();setTimeout(this.resize.bind(this),100)}updateGrid(){"always"!==this.$options.displayGrid||this.mobile?"onDrag&Resize"===this.$options.displayGrid&&this.dragInProgress?this.renderer.addClass(this.el,"display-grid"):("none"===this.$options.displayGrid||!this.dragInProgress||this.mobile)&&this.renderer.removeClass(this.el,"display-grid"):this.renderer.addClass(this.el,"display-grid"),this.setGridDimensions(),this.gridColumns.length=C.getNewArrayLength(this.columns,this.curWidth,this.curColWidth),this.gridRows.length=C.getNewArrayLength(this.rows,this.curHeight,this.curRowHeight),this.cdRef.markForCheck()}addItem(B){void 0===B.$item.cols&&(B.$item.cols=this.$options.defaultItemCols,B.item.cols=B.$item.cols,B.itemChanged()),void 0===B.$item.rows&&(B.$item.rows=this.$options.defaultItemRows,B.item.rows=B.$item.rows,B.itemChanged()),-1===B.$item.x||-1===B.$item.y?this.autoPositionItem(B):this.checkCollision(B.$item)&&(this.$options.disableWarnings||(B.notPlaced=!0,console.warn("Can't be placed in the bounds of the dashboard, trying to auto position!/n"+JSON.stringify(B.item,["cols","rows","x","y"]))),this.$options.disableAutoPositionOnConflict?B.notPlaced=!0:this.autoPositionItem(B)),this.grid.push(B),this.calculateLayoutDebounce()}removeItem(B){this.grid.splice(this.grid.indexOf(B),1),this.calculateLayoutDebounce(),this.options.itemRemovedCallback&&this.options.itemRemovedCallback(B.item,B)}checkCollision(B){let de=!1;if(this.options.itemValidateCallback&&(de=!this.options.itemValidateCallback(B)),!de&&this.checkGridCollision(B)&&(de=!0),!de){const ye=this.findItemWithItem(B);ye&&(de=ye)}return de}checkGridCollision(B){const Ot=B.cols*B.rows;return!(B.y>-1&&B.x>-1&&B.cols+B.x<=this.$options.maxCols&&B.rows+B.y<=this.$options.maxRows&&B.cols<=(void 0===B.maxItemCols?this.$options.maxItemCols:B.maxItemCols)&&B.cols>=(void 0===B.minItemCols?this.$options.minItemCols:B.minItemCols)&&B.rows<=(void 0===B.maxItemRows?this.$options.maxItemRows:B.maxItemRows)&&B.rows>=(void 0===B.minItemRows?this.$options.minItemRows:B.minItemRows)&&(void 0===B.minItemArea?this.$options.minItemArea:B.minItemArea)<=Ot&&(void 0===B.maxItemArea?this.$options.maxItemArea:B.maxItemArea)>=Ot)}findItemWithItem(B){let ye,de=0;for(;de<this.grid.length;de++)if(ye=this.grid[de],ye.$item!==B&&this.checkCollisionTwoItems(ye.$item,B))return ye;return!1}findItemsWithItem(B){const de=[];let Me,ye=0;for(;ye<this.grid.length;ye++)Me=this.grid[ye],Me.$item!==B&&this.checkCollisionTwoItems(Me.$item,B)&&de.push(Me);return de}autoPositionItem(B){this.getNextPossiblePosition(B.$item)?(B.notPlaced=!1,B.item.x=B.$item.x,B.item.y=B.$item.y,B.itemChanged()):(B.notPlaced=!0,this.$options.disableWarnings||console.warn("Can't be placed in the bounds of the dashboard!/n"+JSON.stringify(B.item,["cols","rows","x","y"])))}getNextPossiblePosition(B,de={}){-1===B.cols&&(B.cols=this.$options.defaultItemCols),-1===B.rows&&(B.rows=this.$options.defaultItemRows),this.setGridDimensions();let Me,ye=de.y||0;for(;ye<this.rows;ye++)for(B.y=ye,Me=de.x||0;Me<this.columns;Me++)if(B.x=Me,!this.checkCollision(B))return!0;const Qe=this.$options.maxRows>=this.rows+B.rows;return this.rows<=this.columns&&Qe||!(this.$options.maxCols>=this.columns+B.cols)?!!Qe&&(B.y=this.rows,B.x=0,!0):(B.x=this.columns,B.y=0,!0)}getFirstPossiblePosition(B){const de=Object.assign({},B);return this.getNextPossiblePosition(de),de}getLastPossiblePosition(B){let de={y:0,x:0};de=this.grid.reduce((Me,Qe)=>{const st={y:Qe.$item.y+Qe.$item.rows-1,x:Qe.$item.x+Qe.$item.cols-1};return 1===ee.compareItems(Me,st)?st:Me},de);const ye=Object.assign({},B);return this.getNextPossiblePosition(ye,de),ye}pixelsToPositionX(B,de,ye){const Me=de(B/this.curColWidth);return ye?Me:Math.max(Me,0)}pixelsToPositionY(B,de,ye){const Me=de(B/this.curRowHeight);return ye?Me:Math.max(Me,0)}positionXToPixels(B){return B*this.curColWidth}positionYToPixels(B){return B*this.curRowHeight}getItemComponent(B){return this.grid.find(de=>de.item===B)}checkCollisionForSwaping(B){let de=!1;if(this.options.itemValidateCallback&&(de=!this.options.itemValidateCallback(B)),!de&&this.checkGridCollision(B)&&(de=!0),!de){const ye=this.findItemWithItemForSwapping(B);ye&&(de=ye)}return de}findItemWithItemForSwapping(B){let ye,de=this.grid.length-1;for(;de>-1;de--)if(ye=this.grid[de],ye.$item!==B&&C.checkCollisionTwoItemsForSwaping(ye.$item,B))return ye;return!1}previewStyle(B=!1){this.movingItem?(this.compact&&B&&this.compact.checkCompactItem(this.movingItem),this.previewStyle$.next(this.movingItem)):this.previewStyle$.next(null)}static getNewArrayLength(B,de,ye){const Me=Math.max(B,Math.floor(de/ye));return Me<0?0:Number.isFinite(Me)?Math.floor(Me):0}}return C.\u0275fac=function(B){return new(B||C)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(e.Renderer2),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(e.NgZone))},C.\u0275cmp=e.\u0275\u0275defineComponent({type:C,selectors:[["gridster"]],inputs:{options:"options"},features:[e.\u0275\u0275NgOnChangesFeature],ngContentSelectors:$,decls:4,vars:4,consts:[["class","gridster-column",3,"ngStyle",4,"ngFor","ngForOf"],["class","gridster-row",3,"ngStyle",4,"ngFor","ngForOf"],[1,"gridster-preview",3,"gridRenderer","previewStyle$"],[1,"gridster-column",3,"ngStyle"],[1,"gridster-row",3,"ngStyle"]],template:function(B,de){1&B&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275template(0,y,1,1,"div",0),e.\u0275\u0275template(1,x,1,1,"div",1),e.\u0275\u0275projection(2),e.\u0275\u0275element(3,"gridster-preview",2)),2&B&&(e.\u0275\u0275property("ngForOf",de.gridColumns),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",de.gridRows),e.\u0275\u0275advance(2),e.\u0275\u0275property("gridRenderer",de.gridRenderer)("previewStyle$",de.previewStyle$))},directives:[Le,n.NgForOf,n.NgStyle],styles:["gridster{position:relative;box-sizing:border-box;background:grey;width:100%;height:100%;-webkit-user-select:none;user-select:none;display:block}gridster.fit{overflow-x:hidden;overflow-y:hidden}gridster.scrollVertical{overflow-x:hidden;overflow-y:auto}gridster.scrollHorizontal{overflow-x:auto;overflow-y:hidden}gridster.fixed{overflow:auto}gridster.mobile{overflow-x:hidden;overflow-y:auto}gridster.mobile gridster-item{position:relative}gridster.gridSize{height:initial;width:initial}gridster.gridSize.fit{height:100%;width:100%}gridster .gridster-column,gridster .gridster-row{position:absolute;display:none;transition:.3s;box-sizing:border-box}gridster.display-grid .gridster-column,gridster.display-grid .gridster-row{display:block}gridster .gridster-column{border-left:1px solid white;border-right:1px solid white}gridster .gridster-row{border-top:1px solid white;border-bottom:1px solid white}\n"],encapsulation:2}),C})();class m{constructor(g){this.iteration=0,this.pushedItems=[],this.pushedItemsTemp=[],this.pushedItemsTempPath=[],this.pushedItemsPath=[],this.gridsterItem=g,this.gridster=g.gridster,this.tryPattern={fromEast:[this.tryWest,this.trySouth,this.tryNorth,this.tryEast],fromWest:[this.tryEast,this.trySouth,this.tryNorth,this.tryWest],fromNorth:[this.trySouth,this.tryEast,this.tryWest,this.tryNorth],fromSouth:[this.tryNorth,this.tryEast,this.tryWest,this.trySouth]},this.fromSouth="fromSouth",this.fromNorth="fromNorth",this.fromEast="fromEast",this.fromWest="fromWest"}destroy(){delete this.gridster,delete this.gridsterItem}pushItems(g,B){if(this.gridster.$options.pushItems&&!B){this.pushedItemsOrder=[],this.iteration=0;const de=this.push(this.gridsterItem,g);return de||this.restoreTempItems(),this.pushedItemsOrder=[],this.pushedItemsTemp=[],this.pushedItemsTempPath=[],de}return!1}restoreTempItems(){let g=this.pushedItemsTemp.length-1;for(;g>-1;g--)this.removeFromTempPushed(this.pushedItemsTemp[g])}restoreItems(){let g=0;const B=this.pushedItems.length;let de;for(;g<B;g++)de=this.pushedItems[g],de.$item.x=de.item.x||0,de.$item.y=de.item.y||0,de.setSize();this.pushedItems=[],this.pushedItemsPath=[]}setPushedItems(){let g=0;const B=this.pushedItems.length;let de;for(;g<B;g++)de=this.pushedItems[g],de.checkItemChanges(de.$item,de.item);this.pushedItems=[],this.pushedItemsPath=[]}checkPushBack(){let g=this.pushedItems.length-1,B=!1;for(;g>-1;g--)this.checkPushedItem(this.pushedItems[g],g)&&(B=!0);B&&this.checkPushBack()}push(g,B){if(this.iteration>100)return console.warn("max iteration reached"),!1;if(this.gridster.checkGridCollision(g.$item)||""===B)return!1;const de=this.gridster.findItemsWithItem(g.$item),ye=B===this.fromNorth||B===this.fromWest;de.sort((qt,Ue)=>ye?Ue.$item.y-qt.$item.y||Ue.$item.x-qt.$item.x:qt.$item.y-Ue.$item.y||qt.$item.x-Ue.$item.x);let Qe,Me=0,st=!0;const Ut=[];for(;Me<de.length;Me++){if(Qe=de[Me],Qe===this.gridsterItem)continue;if(!Qe.canBeDragged()){st=!1;break}const qt=this.pushedItemsTemp.indexOf(Qe);if(qt>-1&&this.pushedItemsTempPath[qt].length>10){st=!1;break}if(this.tryPattern[B][0].call(this,Qe,g))this.pushedItemsOrder.push(Qe),Ut.push(Qe);else if(this.tryPattern[B][1].call(this,Qe,g))this.pushedItemsOrder.push(Qe),Ut.push(Qe);else if(this.tryPattern[B][2].call(this,Qe,g))this.pushedItemsOrder.push(Qe),Ut.push(Qe);else{if(!this.tryPattern[B][3].call(this,Qe,g)){st=!1;break}this.pushedItemsOrder.push(Qe),Ut.push(Qe)}}if(!st&&(Me=this.pushedItemsOrder.lastIndexOf(Ut[0]),Me>-1)){let qt=this.pushedItemsOrder.length-1;for(;qt>=Me;qt--)Qe=this.pushedItemsOrder[qt],this.pushedItemsOrder.pop(),this.removeFromTempPushed(Qe),this.removeFromPushedItem(Qe)}return this.iteration++,st}trySouth(g,B){return!!this.gridster.$options.pushDirections.south&&(this.addToTempPushed(g),g.$item.y=B.$item.y+B.$item.rows,this.push(g,this.fromNorth)?(g.setSize(),this.addToPushed(g),!0):(this.removeFromTempPushed(g),!1))}tryNorth(g,B){return!!this.gridster.$options.pushDirections.north&&(this.addToTempPushed(g),g.$item.y=B.$item.y-g.$item.rows,this.push(g,this.fromSouth)?(g.setSize(),this.addToPushed(g),!0):(this.removeFromTempPushed(g),!1))}tryEast(g,B){return!!this.gridster.$options.pushDirections.east&&(this.addToTempPushed(g),g.$item.x=B.$item.x+B.$item.cols,this.push(g,this.fromWest)?(g.setSize(),this.addToPushed(g),!0):(this.removeFromTempPushed(g),!1))}tryWest(g,B){return!!this.gridster.$options.pushDirections.west&&(this.addToTempPushed(g),g.$item.x=B.$item.x-g.$item.cols,this.push(g,this.fromEast)?(g.setSize(),this.addToPushed(g),!0):(this.removeFromTempPushed(g),!1))}addToTempPushed(g){let B=this.pushedItemsTemp.indexOf(g);-1===B&&(B=this.pushedItemsTemp.push(g)-1,this.pushedItemsTempPath[B]=[]),this.pushedItemsTempPath[B].push({x:g.$item.x,y:g.$item.y})}removeFromTempPushed(g){const B=this.pushedItemsTemp.indexOf(g),de=this.pushedItemsTempPath[B].pop();!de||(g.$item.x=de.x,g.$item.y=de.y,g.setSize(),this.pushedItemsTempPath[B].length||(this.pushedItemsTemp.splice(B,1),this.pushedItemsTempPath.splice(B,1)))}addToPushed(g){if(this.pushedItems.indexOf(g)<0)this.pushedItems.push(g),this.pushedItemsPath.push([{x:g.item.x||0,y:g.item.y||0},{x:g.$item.x,y:g.$item.y}]);else{const B=this.pushedItems.indexOf(g);this.pushedItemsPath[B].push({x:g.$item.x,y:g.$item.y})}}removeFromPushed(g){g>-1&&(this.pushedItems.splice(g,1),this.pushedItemsPath.splice(g,1))}removeFromPushedItem(g){const B=this.pushedItems.indexOf(g);B>-1&&(this.pushedItemsPath[B].pop(),this.pushedItemsPath.length||(this.pushedItems.splice(B,1),this.pushedItemsPath.splice(B,1)))}checkPushedItem(g,B){const de=this.pushedItemsPath[B];let Me,Qe,st,ye=de.length-2,Ut=!1;for(;ye>-1;ye--)Me=de[ye],Qe=g.$item.x,st=g.$item.y,g.$item.x=Me.x,g.$item.y=Me.y,this.gridster.findItemWithItem(g.$item)?(g.$item.x=Qe,g.$item.y=st):(g.setSize(),de.splice(ye+1,de.length-ye-1),Ut=!0);return de.length<2&&this.removeFromPushed(B),Ut}}function Ge(C,g,B,de,ye,Me,Qe,st,Ut,qt){P=C.$options.scrollSensitivity,b=C.$options.scrollSpeed,R=C.el,E=Ut,ne=qt;const Ue=R.offsetWidth,zt=R.scrollLeft,$e=R.scrollTop,Ot=B-$e;if(!C.$options.disableScrollVertical)if(Qe.clientY<Me.clientY&&R.offsetHeight+$e-B-ye<P){if(he(),E&&ne&&!ne.s||ze)return;ze=xe(1,st,Qe)}else if(Qe.clientY>Me.clientY&&$e>0&&Ot<P){if(Se(),E&&ne&&!ne.n||se)return;se=xe(-1,st,Qe)}else Qe.clientY!==Me.clientY&&He();const Be=g-zt;if(!C.$options.disableScrollHorizontal)if(Qe.clientX<Me.clientX&&zt+Ue-g-de<=P){if(ht(),E&&ne&&!ne.e||me)return;me=qe(1,st,Qe)}else if(Qe.clientX>Me.clientX&&zt>0&&Be<P){if(Ye(),E&&ne&&!ne.w||Ee)return;Ee=qe(-1,st,Qe)}else Qe.clientX!==Me.clientX&&lt()}function xe(C,g,B){let de=B.clientY;return setInterval(()=>{(!R||-1===C&&R.scrollTop-b<0)&&He(),R.scrollTop+=C*b,de+=C*b,g({clientX:B.clientX,clientY:de})},50)}function qe(C,g,B){let de=B.clientX;return setInterval(()=>{(!R||-1===C&&R.scrollLeft-b<0)&&lt(),R.scrollLeft+=C*b,de+=C*b,g({clientX:de,clientY:B.clientY})},50)}function Xe(){lt(),He(),R=null}function lt(){Ye(),ht()}function He(){he(),Se()}function Ye(){me&&(clearInterval(me),me=0)}function ht(){Ee&&(clearInterval(Ee),Ee=0)}function Se(){ze&&(clearInterval(ze),ze=0)}function he(){se&&(clearInterval(se),se=0)}class pe{constructor(g){this.gridsterItem=g,this.gridster=g.gridster}destroy(){delete this.gridster,delete this.gridsterItem,delete this.swapedItem}swapItems(){this.gridster.$options.swap&&(this.checkSwapBack(),this.checkSwap(this.gridsterItem))}checkSwapBack(){if(this.swapedItem){const g=this.swapedItem.$item.x,B=this.swapedItem.$item.y;this.swapedItem.$item.x=this.swapedItem.item.x||0,this.swapedItem.$item.y=this.swapedItem.item.y||0,this.gridster.checkCollision(this.swapedItem.$item)?(this.swapedItem.$item.x=g,this.swapedItem.$item.y=B):(this.swapedItem.setSize(),this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.swapedItem=void 0)}}restoreSwapItem(){this.swapedItem&&(this.swapedItem.$item.x=this.swapedItem.item.x||0,this.swapedItem.$item.y=this.swapedItem.item.y||0,this.swapedItem.setSize(),this.swapedItem=void 0)}setSwapItem(){this.swapedItem&&(this.swapedItem.checkItemChanges(this.swapedItem.$item,this.swapedItem.item),this.swapedItem=void 0)}checkSwap(g){let B;if(B=this.gridster.$options.swapWhileDragging?this.gridster.checkCollisionForSwaping(g.$item):this.gridster.checkCollision(g.$item),B&&!0!==B&&B.canBeDragged()){const de=B,ye=de.$item.x,Me=de.$item.y,Qe=g.$item.x,st=g.$item.y,Ut=Qe-ye,qt=st-Me;de.$item.x=g.item.x-Ut,de.$item.y=g.item.y-qt,g.$item.x=de.item.x+Ut,g.$item.y=de.item.y+qt,this.gridster.checkCollision(de.$item)||this.gridster.checkCollision(g.$item)?(g.$item.x=Qe,g.$item.y=st,de.$item.x=ye,de.$item.y=Me):(de.setSize(),this.swapedItem=de,this.gridster.$options.swapWhileDragging&&(this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.setSwapItem()))}}}class Fe{constructor(g,B,de){this.zone=de,this.collision=!1,this.gridsterItem=g,this.gridster=B,this.lastMouse={clientX:0,clientY:0},this.path=[]}destroy(){this.gridster.previewStyle&&this.gridster.previewStyle(!0),delete this.gridsterItem,delete this.gridster,delete this.collision,this.mousedown&&(this.mousedown(),this.touchstart())}dragStart(g){g.which&&1!==g.which||(this.gridster.options.draggable&&this.gridster.options.draggable.start&&this.gridster.options.draggable.start(this.gridsterItem.item,this.gridsterItem,g),g.stopPropagation(),g.preventDefault(),this.dragFunction=this.dragMove.bind(this),this.dragStopFunction=this.dragStop.bind(this),this.zone.runOutsideAngular(()=>{this.mousemove=this.gridsterItem.renderer.listen("document","mousemove",this.dragFunction),this.touchmove=this.gridster.renderer.listen(this.gridster.el,"touchmove",this.dragFunction)}),this.mouseup=this.gridsterItem.renderer.listen("document","mouseup",this.dragStopFunction),this.mouseleave=this.gridsterItem.renderer.listen("document","mouseleave",this.dragStopFunction),this.cancelOnBlur=this.gridsterItem.renderer.listen("window","blur",this.dragStopFunction),this.touchend=this.gridsterItem.renderer.listen("document","touchend",this.dragStopFunction),this.touchcancel=this.gridsterItem.renderer.listen("document","touchcancel",this.dragStopFunction),this.gridsterItem.renderer.addClass(this.gridsterItem.el,"gridster-item-moving"),this.margin=this.gridster.$options.margin,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.left=this.gridsterItem.left-this.margin,this.top=this.gridsterItem.top-this.margin,this.originalClientX=g.clientX,this.originalClientY=g.clientY,this.width=this.gridsterItem.width,this.height=this.gridsterItem.height,this.diffLeft=this.gridster.$options.dirType===ue.RTL?g.clientX-this.gridster.el.scrollWidth+this.gridsterItem.left:g.clientX+this.offsetLeft-this.margin-this.left,this.diffTop=g.clientY+this.offsetTop-this.margin-this.top,this.gridster.movingItem=this.gridsterItem.$item,this.gridster.previewStyle(!0),this.push=new m(this.gridsterItem),this.swap=new pe(this.gridsterItem),this.gridster.dragInProgress=!0,this.gridster.updateGrid(),this.path.push({x:this.gridsterItem.item.x||0,y:this.gridsterItem.item.y||0}))}dragMove(g){g.stopPropagation(),g.preventDefault(),ee.checkTouchEvent(g),this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,Ge(this.gridster,this.left,this.top,this.width,this.height,g,this.lastMouse,this.calculateItemPositionFromMousePosition.bind(this)),this.calculateItemPositionFromMousePosition(g)}calculateItemPositionFromMousePosition(g){this.gridster.options.scale?this.calculateItemPositionWithScale(g,this.gridster.options.scale):this.calculateItemPositionWithoutScale(g),this.calculateItemPosition(),this.lastMouse.clientX=g.clientX,this.lastMouse.clientY=g.clientY,this.zone.run(()=>{this.gridster.updateGrid()})}calculateItemPositionWithScale(g,B){this.left=this.gridster.$options.dirType===ue.RTL?this.gridster.el.scrollWidth-this.originalClientX+(g.clientX-this.originalClientX)/B+this.diffLeft:this.originalClientX+(g.clientX-this.originalClientX)/B+this.offsetLeft-this.diffLeft,this.top=this.originalClientY+(g.clientY-this.originalClientY)/B+this.offsetTop-this.diffTop}calculateItemPositionWithoutScale(g){this.left=this.gridster.$options.dirType===ue.RTL?this.gridster.el.scrollWidth-g.clientX+this.diffLeft:g.clientX+this.offsetLeft-this.diffLeft,this.top=g.clientY+this.offsetTop-this.diffTop}dragStop(g){g.stopPropagation(),g.preventDefault(),Xe(),this.cancelOnBlur(),this.mousemove(),this.mouseup(),this.mouseleave(),this.touchmove(),this.touchend(),this.touchcancel(),this.gridsterItem.renderer.removeClass(this.gridsterItem.el,"gridster-item-moving"),this.gridster.dragInProgress=!1,this.gridster.updateGrid(),this.path=[],this.gridster.options.draggable&&this.gridster.options.draggable.stop?Promise.resolve(this.gridster.options.draggable.stop(this.gridsterItem.item,this.gridsterItem,g)).then(this.makeDrag.bind(this),this.cancelDrag.bind(this)):this.makeDrag(),setTimeout(()=>{this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle(!0))})}cancelDrag(){this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.gridsterItem.setSize(),this.push&&this.push.restoreItems(),this.swap&&this.swap.restoreSwapItem(),this.push&&(this.push.destroy(),delete this.push),this.swap&&(this.swap.destroy(),delete this.swap)}makeDrag(){this.gridster.$options.draggable.dropOverItems&&this.gridster.options.draggable&&this.gridster.options.draggable.dropOverItemsCallback&&this.collision&&!0!==this.collision&&this.collision.$item&&this.gridster.options.draggable.dropOverItemsCallback(this.gridsterItem.item,this.collision.item,this.gridster),this.collision=!1,this.gridsterItem.setSize(),this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.push&&this.push.setPushedItems(),this.swap&&this.swap.setSwapItem(),this.push&&(this.push.destroy(),delete this.push),this.swap&&(this.swap.destroy(),delete this.swap)}calculateItemPosition(){if(this.gridster.movingItem=this.gridsterItem.$item,this.positionX=this.gridster.pixelsToPositionX(this.left,Math.round),this.positionY=this.gridster.pixelsToPositionY(this.top,Math.round),this.positionXBackup=this.gridsterItem.$item.x,this.positionYBackup=this.gridsterItem.$item.y,this.gridsterItem.$item.x=this.positionX,this.gridster.checkGridCollision(this.gridsterItem.$item)&&(this.gridsterItem.$item.x=this.positionXBackup),this.gridsterItem.$item.y=this.positionY,this.gridster.checkGridCollision(this.gridsterItem.$item)&&(this.gridsterItem.$item.y=this.positionYBackup),this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,this.left,this.top),this.positionXBackup!==this.gridsterItem.$item.x||this.positionYBackup!==this.gridsterItem.$item.y){const g=this.path[this.path.length-1];let B="";g.x<this.gridsterItem.$item.x?B=this.push.fromWest:g.x>this.gridsterItem.$item.x?B=this.push.fromEast:g.y<this.gridsterItem.$item.y?B=this.push.fromNorth:g.y>this.gridsterItem.$item.y&&(B=this.push.fromSouth),this.push.pushItems(B,this.gridster.$options.disablePushOnDrag),this.swap.swapItems(),this.collision=this.gridster.checkCollision(this.gridsterItem.$item),this.collision?(this.gridsterItem.$item.x=this.positionXBackup,this.gridsterItem.$item.y=this.positionYBackup,this.gridster.$options.draggable.dropOverItems&&!0!==this.collision&&this.collision.$item&&(this.gridster.movingItem=null)):this.path.push({x:this.gridsterItem.$item.x,y:this.gridsterItem.$item.y}),this.push.checkPushBack()}this.gridster.previewStyle(!0)}toggle(){const g=this.gridsterItem.canBeDragged();!this.enabled&&g?(this.enabled=!this.enabled,this.dragStartFunction=this.dragStartDelay.bind(this),this.mousedown=this.gridsterItem.renderer.listen(this.gridsterItem.el,"mousedown",this.dragStartFunction),this.touchstart=this.gridsterItem.renderer.listen(this.gridsterItem.el,"touchstart",this.dragStartFunction)):this.enabled&&!g&&(this.enabled=!this.enabled,this.mousedown(),this.touchstart())}dragStartDelay(g){if(g.target.hasAttribute("class")&&g.target.getAttribute("class").split(" ").indexOf("gridster-item-resizable-handler")>-1||ee.checkContentClassForEvent(this.gridster,g))return;if(ee.checkTouchEvent(g),!this.gridster.$options.draggable.delayStart)return void this.dragStart(g);const B=setTimeout(()=>{this.dragStart(g),Ue()},this.gridster.$options.draggable.delayStart),de=this.gridsterItem.renderer.listen("document","mouseup",Ue),ye=this.gridsterItem.renderer.listen("document","mouseleave",Ue),Me=this.gridsterItem.renderer.listen("window","blur",Ue),Qe=this.gridsterItem.renderer.listen("document","touchmove",function qt(Lt){ee.checkTouchEvent(Lt),(Math.abs(Lt.clientX-g.clientX)>9||Math.abs(Lt.clientY-g.clientY)>9)&&Ue()}),st=this.gridsterItem.renderer.listen("document","touchend",Ue),Ut=this.gridsterItem.renderer.listen("document","touchcancel",Ue);function Ue(){clearTimeout(B),Me(),de(),ye(),Qe(),st(),Ut()}}}class Je{constructor(g){this.pushedItems=[],this.pushedItemsPath=[],this.gridsterItem=g,this.gridster=g.gridster,this.tryPattern={fromEast:this.tryWest,fromWest:this.tryEast,fromNorth:this.trySouth,fromSouth:this.tryNorth},this.fromSouth="fromSouth",this.fromNorth="fromNorth",this.fromEast="fromEast",this.fromWest="fromWest"}destroy(){delete this.gridster,delete this.gridsterItem}pushItems(g){return!!this.gridster.$options.pushResizeItems&&this.push(this.gridsterItem,g)}restoreItems(){let g=0;const B=this.pushedItems.length;let de;for(;g<B;g++)de=this.pushedItems[g],de.$item.x=de.item.x||0,de.$item.y=de.item.y||0,de.$item.cols=de.item.cols||1,de.$item.row=de.item.row||1,de.setSize();this.pushedItems=[],this.pushedItemsPath=[]}setPushedItems(){let g=0;const B=this.pushedItems.length;let de;for(;g<B;g++)de=this.pushedItems[g],de.checkItemChanges(de.$item,de.item);this.pushedItems=[],this.pushedItemsPath=[]}checkPushBack(){let g=this.pushedItems.length-1,B=!1;for(;g>-1;g--)this.checkPushedItem(this.pushedItems[g],g)&&(B=!0);B&&this.checkPushBack()}push(g,B){const de=this.gridster.checkCollision(g.$item);if(de&&!0!==de&&de!==this.gridsterItem&&de.canBeResized()){if(this.tryPattern[B].call(this,de,g,B))return!0}else if(!1===de)return!0;return!1}trySouth(g,B,de){const ye=g.$item.y,Me=g.$item.rows;return g.$item.y=B.$item.y+B.$item.rows,g.$item.rows=Me+ye-g.$item.y,this.gridster.checkCollisionTwoItems(g.$item,B.$item)||this.gridster.checkGridCollision(g.$item)?(g.$item.y=ye,g.$item.rows=Me,!1):(g.setSize(),this.addToPushed(g),this.push(B,de),!0)}tryNorth(g,B,de){const ye=g.$item.rows;return g.$item.rows=B.$item.y-g.$item.y,this.gridster.checkCollisionTwoItems(g.$item,B.$item)||this.gridster.checkGridCollision(g.$item)?(g.$item.rows=ye,!1):(g.setSize(),this.addToPushed(g),this.push(B,de),!0)}tryEast(g,B,de){const ye=g.$item.x,Me=g.$item.cols;return g.$item.x=B.$item.x+B.$item.cols,g.$item.cols=Me+ye-g.$item.x,this.gridster.checkCollisionTwoItems(g.$item,B.$item)||this.gridster.checkGridCollision(g.$item)?(g.$item.x=ye,g.$item.cols=Me,!1):(g.setSize(),this.addToPushed(g),this.push(B,de),!0)}tryWest(g,B,de){const ye=g.$item.cols;return g.$item.cols=B.$item.x-g.$item.x,this.gridster.checkCollisionTwoItems(g.$item,B.$item)||this.gridster.checkGridCollision(g.$item)?(g.$item.cols=ye,!1):(g.setSize(),this.addToPushed(g),this.push(B,de),!0)}addToPushed(g){if(this.pushedItems.indexOf(g)<0)this.pushedItems.push(g),this.pushedItemsPath.push([{x:g.item.x||0,y:g.item.y||0,cols:g.item.cols||0,rows:g.item.rows||0},{x:g.$item.x,y:g.$item.y,cols:g.$item.cols,rows:g.$item.rows}]);else{const B=this.pushedItems.indexOf(g);this.pushedItemsPath[B].push({x:g.$item.x,y:g.$item.y,cols:g.$item.cols,rows:g.$item.rows})}}removeFromPushed(g){g>-1&&(this.pushedItems.splice(g,1),this.pushedItemsPath.splice(g,1))}checkPushedItem(g,B){const de=this.pushedItemsPath[B];let Me,Qe,st,Ut,qt,ye=de.length-2;for(;ye>-1;ye--)Me=de[ye],Qe=g.$item.x,st=g.$item.y,Ut=g.$item.cols,qt=g.$item.rows,g.$item.x=Me.x,g.$item.y=Me.y,g.$item.cols=Me.cols,g.$item.rows=Me.rows,this.gridster.findItemWithItem(g.$item)?(g.$item.x=Qe,g.$item.y=st,g.$item.cols=Ut,g.$item.rows=qt):(g.setSize(),de.splice(ye+1,de.length-1-ye));return de.length<2&&(this.removeFromPushed(B),!0)}}class we{constructor(g,B,de){this.zone=de,this.gridsterItem=g,this.gridster=B,this.lastMouse={clientX:0,clientY:0},this.itemBackup=[0,0,0,0],this.resizeEventScrollType={w:!1,e:!1,n:!1,s:!1}}destroy(){this.gridster.previewStyle&&this.gridster.previewStyle(),delete this.gridsterItem,delete this.gridster}dragStart(g){g.which&&1!==g.which||(this.gridster.options.resizable&&this.gridster.options.resizable.start&&this.gridster.options.resizable.start(this.gridsterItem.item,this.gridsterItem,g),g.stopPropagation(),g.preventDefault(),this.dragFunction=this.dragMove.bind(this),this.dragStopFunction=this.dragStop.bind(this),this.zone.runOutsideAngular(()=>{this.mousemove=this.gridsterItem.renderer.listen("document","mousemove",this.dragFunction),this.touchmove=this.gridster.renderer.listen(this.gridster.el,"touchmove",this.dragFunction)}),this.mouseup=this.gridsterItem.renderer.listen("document","mouseup",this.dragStopFunction),this.mouseleave=this.gridsterItem.renderer.listen("document","mouseleave",this.dragStopFunction),this.cancelOnBlur=this.gridsterItem.renderer.listen("window","blur",this.dragStopFunction),this.touchend=this.gridsterItem.renderer.listen("document","touchend",this.dragStopFunction),this.touchcancel=this.gridsterItem.renderer.listen("document","touchcancel",this.dragStopFunction),this.gridsterItem.renderer.addClass(this.gridsterItem.el,"gridster-item-resizing"),this.lastMouse.clientX=g.clientX,this.lastMouse.clientY=g.clientY,this.left=this.gridsterItem.left,this.top=this.gridsterItem.top,this.originalClientX=g.clientX,this.originalClientY=g.clientY,this.width=this.gridsterItem.width,this.height=this.gridsterItem.height,this.bottom=this.gridsterItem.top+this.gridsterItem.height,this.right=this.gridsterItem.left+this.gridsterItem.width,this.margin=this.gridster.$options.margin,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.diffLeft=g.clientX+this.offsetLeft-this.left,this.diffRight=g.clientX+this.offsetLeft-this.right,this.diffTop=g.clientY+this.offsetTop-this.top,this.diffBottom=g.clientY+this.offsetTop-this.bottom,this.minHeight=this.gridster.positionYToPixels(this.gridsterItem.$item.minItemRows||this.gridster.$options.minItemRows)-this.margin,this.minWidth=this.gridster.positionXToPixels(this.gridsterItem.$item.minItemCols||this.gridster.$options.minItemCols)-this.margin,this.gridster.movingItem=this.gridsterItem.$item,this.gridster.previewStyle(),this.push=new m(this.gridsterItem),this.pushResize=new Je(this.gridsterItem),this.gridster.dragInProgress=!0,this.gridster.updateGrid(),g.target?.hasAttribute("class")&&g.target.getAttribute("class").split(" ").indexOf("handle-n")>-1?(this.resizeEventScrollType.n=!0,this.directionFunction=this.handleN):g.target?.hasAttribute("class")&&g.target.getAttribute("class").split(" ").indexOf("handle-w")>-1?this.gridster.$options.dirType===ue.RTL?(this.resizeEventScrollType.e=!0,this.directionFunction=this.handleE):(this.resizeEventScrollType.w=!0,this.directionFunction=this.handleW):g.target?.hasAttribute("class")&&g.target.getAttribute("class").split(" ").indexOf("handle-s")>-1?(this.resizeEventScrollType.s=!0,this.directionFunction=this.handleS):g.target.hasAttribute("class")&&g.target.getAttribute("class").split(" ").indexOf("handle-e")>-1?this.gridster.$options.dirType===ue.RTL?(this.resizeEventScrollType.w=!0,this.directionFunction=this.handleW):(this.resizeEventScrollType.e=!0,this.directionFunction=this.handleE):g.target.hasAttribute("class")&&g.target.getAttribute("class").split(" ").indexOf("handle-nw")>-1?this.gridster.$options.dirType===ue.RTL?(this.resizeEventScrollType.n=!0,this.resizeEventScrollType.e=!0,this.directionFunction=this.handleNE):(this.resizeEventScrollType.n=!0,this.resizeEventScrollType.w=!0,this.directionFunction=this.handleNW):g.target.hasAttribute("class")&&g.target.getAttribute("class").split(" ").indexOf("handle-ne")>-1?this.gridster.$options.dirType===ue.RTL?(this.resizeEventScrollType.n=!0,this.resizeEventScrollType.w=!0,this.directionFunction=this.handleNW):(this.resizeEventScrollType.n=!0,this.resizeEventScrollType.e=!0,this.directionFunction=this.handleNE):g.target.hasAttribute("class")&&g.target.getAttribute("class").split(" ").indexOf("handle-sw")>-1?this.gridster.$options.dirType===ue.RTL?(this.resizeEventScrollType.s=!0,this.resizeEventScrollType.e=!0,this.directionFunction=this.handleSE):(this.resizeEventScrollType.s=!0,this.resizeEventScrollType.w=!0,this.directionFunction=this.handleSW):g.target.hasAttribute("class")&&g.target.getAttribute("class").split(" ").indexOf("handle-se")>-1&&(this.gridster.$options.dirType===ue.RTL?(this.resizeEventScrollType.s=!0,this.resizeEventScrollType.w=!0,this.directionFunction=this.handleSW):(this.resizeEventScrollType.s=!0,this.resizeEventScrollType.e=!0,this.directionFunction=this.handleSE)))}dragMove(g){g.stopPropagation(),g.preventDefault(),ee.checkTouchEvent(g),this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,Ge(this.gridster,this.left,this.top,this.width,this.height,g,this.lastMouse,this.directionFunction.bind(this),!0,this.resizeEventScrollType);const B=this.gridster.options.scale||1;this.directionFunction({clientX:this.originalClientX+(g.clientX-this.originalClientX)/B,clientY:this.originalClientY+(g.clientY-this.originalClientY)/B}),this.lastMouse.clientX=g.clientX,this.lastMouse.clientY=g.clientY,this.zone.run(()=>{this.gridster.updateGrid()})}dragStop(g){g.stopPropagation(),g.preventDefault(),Xe(),this.mousemove(),this.mouseup(),this.mouseleave(),this.cancelOnBlur(),this.touchmove(),this.touchend(),this.touchcancel(),this.gridster.dragInProgress=!1,this.gridster.updateGrid(),this.gridster.options.resizable&&this.gridster.options.resizable.stop?Promise.resolve(this.gridster.options.resizable.stop(this.gridsterItem.item,this.gridsterItem,g)).then(this.makeResize.bind(this),this.cancelResize.bind(this)):this.makeResize(),setTimeout(()=>{this.gridsterItem.renderer.removeClass(this.gridsterItem.el,"gridster-item-resizing"),this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle())})}cancelResize(){this.gridsterItem.$item.cols=this.gridsterItem.item.cols||1,this.gridsterItem.$item.rows=this.gridsterItem.item.rows||1,this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.gridsterItem.setSize(),this.push.restoreItems(),this.pushResize.restoreItems(),this.push.destroy(),delete this.push,this.pushResize.destroy(),delete this.pushResize}makeResize(){this.gridsterItem.setSize(),this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.push.setPushedItems(),this.pushResize.setPushedItems(),this.push.destroy(),delete this.push,this.pushResize.destroy(),delete this.pushResize}handleN(g){if(this.top=g.clientY+this.offsetTop-this.diffTop,this.height=this.bottom-this.top,this.minHeight>this.height&&(this.height=this.minHeight,this.top=this.bottom-this.minHeight),this.newPosition=this.gridster.pixelsToPositionY(this.top+this.margin,Math.floor),this.gridsterItem.$item.y!==this.newPosition){if(this.itemBackup[1]=this.gridsterItem.$item.y,this.itemBackup[3]=this.gridsterItem.$item.rows,this.gridsterItem.$item.rows+=this.gridsterItem.$item.y-this.newPosition,this.gridsterItem.$item.y=this.newPosition,this.pushResize.pushItems(this.pushResize.fromSouth),this.push.pushItems(this.push.fromSouth,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.y=this.itemBackup[1],this.gridsterItem.$item.rows=this.itemBackup[3],this.setItemTop(this.gridster.positionYToPixels(this.gridsterItem.$item.y)),void this.setItemHeight(this.gridster.positionYToPixels(this.gridsterItem.$item.rows)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemTop(this.top),this.setItemHeight(this.height)}handleW(g){if(this.left=(this.gridster.$options.dirType===ue.RTL?this.originalClientX+(this.originalClientX-g.clientX):g.clientX)+this.offsetLeft-this.diffLeft,this.width=this.right-this.left,this.minWidth>this.width&&(this.width=this.minWidth,this.left=this.right-this.minWidth),this.newPosition=this.gridster.pixelsToPositionX(this.left+this.margin,Math.floor),this.gridsterItem.$item.x!==this.newPosition){if(this.itemBackup[0]=this.gridsterItem.$item.x,this.itemBackup[2]=this.gridsterItem.$item.cols,this.gridsterItem.$item.cols+=this.gridsterItem.$item.x-this.newPosition,this.gridsterItem.$item.x=this.newPosition,this.pushResize.pushItems(this.pushResize.fromEast),this.push.pushItems(this.push.fromEast,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.x=this.itemBackup[0],this.gridsterItem.$item.cols=this.itemBackup[2],this.setItemLeft(this.gridster.positionXToPixels(this.gridsterItem.$item.x)),void this.setItemWidth(this.gridster.positionXToPixels(this.gridsterItem.$item.cols)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemLeft(this.left),this.setItemWidth(this.width)}handleS(g){if(this.height=g.clientY+this.offsetTop-this.diffBottom-this.top,this.minHeight>this.height&&(this.height=this.minHeight),this.bottom=this.top+this.height,this.newPosition=this.gridster.pixelsToPositionY(this.bottom,Math.ceil),this.gridsterItem.$item.y+this.gridsterItem.$item.rows!==this.newPosition){if(this.itemBackup[3]=this.gridsterItem.$item.rows,this.gridsterItem.$item.rows=this.newPosition-this.gridsterItem.$item.y,this.pushResize.pushItems(this.pushResize.fromNorth),this.push.pushItems(this.push.fromNorth,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.rows=this.itemBackup[3],void this.setItemHeight(this.gridster.positionYToPixels(this.gridsterItem.$item.rows)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemHeight(this.height)}handleE(g){if(this.width=(this.gridster.$options.dirType===ue.RTL?this.originalClientX+(this.originalClientX-g.clientX):g.clientX)+this.offsetLeft-this.diffRight-this.left,this.minWidth>this.width&&(this.width=this.minWidth),this.right=this.left+this.width,this.newPosition=this.gridster.pixelsToPositionX(this.right,Math.ceil),this.gridsterItem.$item.x+this.gridsterItem.$item.cols!==this.newPosition){if(this.itemBackup[2]=this.gridsterItem.$item.cols,this.gridsterItem.$item.cols=this.newPosition-this.gridsterItem.$item.x,this.pushResize.pushItems(this.pushResize.fromWest),this.push.pushItems(this.push.fromWest,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.cols=this.itemBackup[2],void this.setItemWidth(this.gridster.positionXToPixels(this.gridsterItem.$item.cols)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemWidth(this.width)}handleNW(g){this.handleN(g),this.handleW(g)}handleNE(g){this.handleN(g),this.handleE(g)}handleSW(g){this.handleS(g),this.handleW(g)}handleSE(g){this.handleS(g),this.handleE(g)}toggle(){this.resizeEnabled=this.gridsterItem.canBeResized()}dragStartDelay(g){if(ee.checkTouchEvent(g),!this.gridster.$options.resizable.delayStart)return void this.dragStart(g);const B=setTimeout(()=>{this.dragStart(g),Ue()},this.gridster.$options.resizable.delayStart),de=this.gridsterItem.renderer.listen("document","mouseup",Ue),ye=this.gridsterItem.renderer.listen("document","mouseleave",Ue),Me=this.gridsterItem.renderer.listen("window","blur",Ue),Qe=this.gridsterItem.renderer.listen("document","touchmove",function qt(Lt){ee.checkTouchEvent(Lt),(Math.abs(Lt.clientX-g.clientX)>9||Math.abs(Lt.clientY-g.clientY)>9)&&Ue()}),st=this.gridsterItem.renderer.listen("document","touchend",Ue),Ut=this.gridsterItem.renderer.listen("document","touchcancel",Ue);function Ue(){clearTimeout(B),Me(),de(),ye(),Qe(),st(),Ut()}}setItemTop(g){this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,this.left,g)}setItemLeft(g){this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,g,this.top)}setItemHeight(g){this.gridsterItem.renderer.setStyle(this.gridsterItem.el,"height",g+"px")}setItemWidth(g){this.gridsterItem.renderer.setStyle(this.gridsterItem.el,"width",g+"px")}}let De=(()=>{class C{constructor(B,de,ye,Me){this.renderer=ye,this.zone=Me,this.itemInit=new e.EventEmitter,this.itemChange=new e.EventEmitter,this.itemResize=new e.EventEmitter,this.el=B.nativeElement,this.$item={cols:-1,rows:-1,x:-1,y:-1},this.gridster=de,this.drag=new Fe(this,de,this.zone),this.resize=new we(this,de,this.zone)}get zIndex(){return this.getLayerIndex()+this.gridster.$options.baseLayerIndex}ngOnInit(){this.gridster.addItem(this)}ngOnChanges(B){B.item&&(this.updateOptions(),this.init||this.gridster.calculateLayoutDebounce()),B.item&&B.item.previousValue&&this.setSize()}updateOptions(){this.$item=ee.merge(this.$item,this.item,{cols:void 0,rows:void 0,x:void 0,y:void 0,layerIndex:void 0,dragEnabled:void 0,resizeEnabled:void 0,compactEnabled:void 0,maxItemRows:void 0,minItemRows:void 0,maxItemCols:void 0,minItemCols:void 0,maxItemArea:void 0,minItemArea:void 0})}ngOnDestroy(){this.gridster.removeItem(this),delete this.gridster,this.drag.destroy(),delete this.drag,this.resize.destroy(),delete this.resize}setSize(){this.renderer.setStyle(this.el,"display",this.notPlaced?"":"block"),this.gridster.gridRenderer.updateItem(this.el,this.$item,this.renderer),this.updateItemSize()}updateItemSize(){const de=this.$item.x*this.gridster.curColWidth,ye=this.$item.cols*this.gridster.curColWidth-this.gridster.$options.margin,Me=this.$item.rows*this.gridster.curRowHeight-this.gridster.$options.margin;this.top=this.$item.y*this.gridster.curRowHeight,this.left=de,!this.init&&ye>0&&Me>0&&(this.init=!0,this.item.initCallback&&this.item.initCallback(this.item,this),this.gridster.options.itemInitCallback&&this.gridster.options.itemInitCallback(this.item,this),this.itemInit.next({item:this.item,itemComponent:this}),this.gridster.$options.scrollToNewItems&&this.el.scrollIntoView(!1)),(ye!==this.width||Me!==this.height)&&(this.width=ye,this.height=Me,this.gridster.options.itemResizeCallback&&this.gridster.options.itemResizeCallback(this.item,this),this.itemResize.next({item:this.item,itemComponent:this}))}itemChanged(){this.gridster.options.itemChangeCallback&&this.gridster.options.itemChangeCallback(this.item,this),this.itemChange.next({item:this.item,itemComponent:this})}checkItemChanges(B,de){B.rows===de.rows&&B.cols===de.cols&&B.x===de.x&&B.y===de.y||(this.gridster.checkCollision(this.$item)?(this.$item.x=de.x||0,this.$item.y=de.y||0,this.$item.cols=de.cols||1,this.$item.rows=de.rows||1,this.setSize()):(this.item.cols=this.$item.cols,this.item.rows=this.$item.rows,this.item.x=this.$item.x,this.item.y=this.$item.y,this.gridster.calculateLayoutDebounce(),this.itemChanged()))}canBeDragged(){const B=this.gridster.$options.draggable.enabled;return!this.gridster.mobile&&B&&(void 0===this.$item.dragEnabled?B:this.$item.dragEnabled)}canBeResized(){const B=this.gridster.$options.resizable.enabled;return!this.gridster.mobile&&B&&(void 0===this.$item.resizeEnabled?B:this.$item.resizeEnabled)}bringToFront(B){if(B&&B<=0)return;const de=this.getLayerIndex(),ye=this.gridster.$options.maxLayerIndex;if(de<ye){const Me=B?de+B:ye;this.item.layerIndex=this.$item.layerIndex=Me>ye?ye:Me}}sendToBack(B){if(B&&B<=0)return;const de=this.getLayerIndex();if(de>0){const ye=B?de-B:0;this.item.layerIndex=this.$item.layerIndex=ye<0?0:ye}}getLayerIndex(){return void 0!==this.item.layerIndex?this.item.layerIndex:void 0!==this.gridster.$options.defaultLayerIndex?this.gridster.$options.defaultLayerIndex:0}}return C.\u0275fac=function(B){return new(B||C)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(be),e.\u0275\u0275directiveInject(e.Renderer2),e.\u0275\u0275directiveInject(e.NgZone))},C.\u0275cmp=e.\u0275\u0275defineComponent({type:C,selectors:[["gridster-item"]],hostVars:2,hostBindings:function(B,de){2&B&&e.\u0275\u0275styleProp("z-index",de.zIndex)},inputs:{item:"item"},outputs:{itemInit:"itemInit",itemChange:"itemChange",itemResize:"itemResize"},features:[e.\u0275\u0275NgOnChangesFeature],ngContentSelectors:$,decls:9,vars:8,consts:[["class","gridster-item-resizable-handler handle-s",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-e",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-n",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-w",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-se",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-ne",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-sw",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-nw",3,"mousedown","touchstart",4,"ngIf"],[1,"gridster-item-resizable-handler","handle-s",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-e",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-n",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-w",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-se",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-ne",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-sw",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-nw",3,"mousedown","touchstart"]],template:function(B,de){1&B&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275projection(0),e.\u0275\u0275template(1,c,1,0,"div",0),e.\u0275\u0275template(2,d,1,0,"div",1),e.\u0275\u0275template(3,p,1,0,"div",2),e.\u0275\u0275template(4,z,1,0,"div",3),e.\u0275\u0275template(5,S,1,0,"div",4),e.\u0275\u0275template(6,V,1,0,"div",5),e.\u0275\u0275template(7,N,1,0,"div",6),e.\u0275\u0275template(8,U,1,0,"div",7)),2&B&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",de.gridster.$options.resizable.handles.s&&de.resize.resizeEnabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",de.gridster.$options.resizable.handles.e&&de.resize.resizeEnabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",de.gridster.$options.resizable.handles.n&&de.resize.resizeEnabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",de.gridster.$options.resizable.handles.w&&de.resize.resizeEnabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",de.gridster.$options.resizable.handles.se&&de.resize.resizeEnabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",de.gridster.$options.resizable.handles.ne&&de.resize.resizeEnabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",de.gridster.$options.resizable.handles.sw&&de.resize.resizeEnabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",de.gridster.$options.resizable.handles.nw&&de.resize.resizeEnabled))},directives:[n.NgIf],styles:["gridster-item{box-sizing:border-box;z-index:1;position:absolute;overflow:hidden;transition:.3s;display:none;background:white;-webkit-user-select:text;user-select:text}gridster-item.gridster-item-moving{cursor:move}gridster-item.gridster-item-resizing,gridster-item.gridster-item-moving{transition:0s;z-index:2;box-shadow:0 0 5px 5px #0003,0 6px 10px #00000024,0 1px 18px #0000001f}.gridster-item-resizable-handler{position:absolute;z-index:2}.gridster-item-resizable-handler.handle-n{cursor:ns-resize;height:10px;right:0;top:0;left:0}.gridster-item-resizable-handler.handle-e{cursor:ew-resize;width:10px;bottom:0;right:0;top:0}.gridster-item-resizable-handler.handle-s{cursor:ns-resize;height:10px;right:0;bottom:0;left:0}.gridster-item-resizable-handler.handle-w{cursor:ew-resize;width:10px;left:0;top:0;bottom:0}.gridster-item-resizable-handler.handle-ne{cursor:ne-resize;width:10px;height:10px;right:0;top:0}.gridster-item-resizable-handler.handle-nw{cursor:nw-resize;width:10px;height:10px;left:0;top:0}.gridster-item-resizable-handler.handle-se{cursor:se-resize;width:0;height:0;right:0;bottom:0;border-style:solid;border-width:0 0 10px 10px;border-color:transparent}.gridster-item-resizable-handler.handle-sw{cursor:sw-resize;width:10px;height:10px;left:0;bottom:0}gridster-item:hover .gridster-item-resizable-handler.handle-se{border-color:transparent transparent #ccc}\n"],encapsulation:2}),C})(),D=(()=>{class C{}return C.\u0275fac=function(B){return new(B||C)},C.\u0275mod=e.\u0275\u0275defineNgModule({type:C}),C.\u0275inj=e.\u0275\u0275defineInjector({imports:[[n.CommonModule]]}),C})()},8828:(it,K,u)=>{u.d(K,{fX:()=>b,zE:()=>P,Mq:()=>m});var e=u(7451),n=u(3192),y=u(253),x=u(3336),$=u(1989);const c=["gutterEls"];function d(_,R){if(1&_){const E=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",2,3),e.\u0275\u0275listener("keydown",function(me){e.\u0275\u0275restoreView(E);const Ee=e.\u0275\u0275nextContext().index;return e.\u0275\u0275nextContext().startKeyboardDrag(me,2*Ee+1,Ee+1)})("mousedown",function(me){e.\u0275\u0275restoreView(E);const Ee=e.\u0275\u0275nextContext().index;return e.\u0275\u0275nextContext().startMouseDrag(me,2*Ee+1,Ee+1)})("touchstart",function(me){e.\u0275\u0275restoreView(E);const Ee=e.\u0275\u0275nextContext().index;return e.\u0275\u0275nextContext().startMouseDrag(me,2*Ee+1,Ee+1)})("mouseup",function(me){e.\u0275\u0275restoreView(E);const Ee=e.\u0275\u0275nextContext().index;return e.\u0275\u0275nextContext().clickGutter(me,Ee+1)})("touchend",function(me){e.\u0275\u0275restoreView(E);const Ee=e.\u0275\u0275nextContext().index;return e.\u0275\u0275nextContext().clickGutter(me,Ee+1)}),e.\u0275\u0275element(2,"div",4),e.\u0275\u0275elementEnd()}if(2&_){const E=e.\u0275\u0275nextContext(),ne=E.index,me=E.$implicit,Ee=e.\u0275\u0275nextContext();e.\u0275\u0275styleProp("flex-basis",Ee.gutterSize,"px")("order",2*ne+1),e.\u0275\u0275attribute("aria-label",Ee.gutterAriaLabel)("aria-orientation",Ee.direction)("aria-valuemin",me.minSize)("aria-valuemax",me.maxSize)("aria-valuenow",me.size)("aria-valuetext",Ee.getAriaAreaSizeText(me.size))}}function p(_,R){1&_&&e.\u0275\u0275template(0,d,3,10,"div",1),2&_&&e.\u0275\u0275property("ngIf",!1===R.last)}const z=["*"];function S(_){if(void 0!==_.changedTouches&&_.changedTouches.length>0)return{x:_.changedTouches[0].clientX,y:_.changedTouches[0].clientY};if(void 0!==_.clientX&&void 0!==_.clientY)return{x:_.clientX,y:_.clientY};if(void 0!==_.currentTarget){const R=_.currentTarget;return{x:R.offsetLeft,y:R.offsetTop}}return null}function V(_,R,E){return Math.abs(_.x-R.x)<=E&&Math.abs(_.y-R.y)<=E}function U(_,R){const E=_.nativeElement.getBoundingClientRect();return"horizontal"===R?E.width:E.height}function H(_){return"boolean"==typeof _?_:"false"!==_}function Q(_,R){return null==_?R:(_=Number(_),!isNaN(_)&&_>=0?_:R)}function Z(_,R){if("percent"===_){const E=R.reduce((ne,me)=>null!==me?ne+me:ne,0);return R.every(ne=>null!==ne)&&E>99.9&&E<100.1}if("pixel"===_)return 1===R.filter(E=>null===E).length}function ue(_){return null===_.size?null:!0===_.component.lockSize?_.size:null===_.component.minSize?null:_.component.minSize>_.size?_.size:_.component.minSize}function G(_){return null===_.size?null:!0===_.component.lockSize?_.size:null===_.component.maxSize?null:_.component.maxSize<_.size?_.size:_.component.maxSize}function X(_,R,E,ne){return R.reduce((me,Ee)=>{const se=function ee(_,R,E,ne){return 0===E?{areaSnapshot:R,pixelAbsorb:0,percentAfterAbsorption:R.sizePercentAtStart,pixelRemain:0}:0===R.sizePixelAtStart&&E<0?{areaSnapshot:R,pixelAbsorb:0,percentAfterAbsorption:0,pixelRemain:E}:"percent"===_?function ve(_,R,E){const me=(_.sizePixelAtStart+R)/E*100;if(R>0){if(null!==_.area.maxSize&&me>_.area.maxSize){const Ee=_.area.maxSize/100*E;return{areaSnapshot:_,pixelAbsorb:Ee,percentAfterAbsorption:_.area.maxSize,pixelRemain:_.sizePixelAtStart+R-Ee}}return{areaSnapshot:_,pixelAbsorb:R,percentAfterAbsorption:me>100?100:me,pixelRemain:0}}if(R<0){if(null!==_.area.minSize&&me<_.area.minSize){const Ee=_.area.minSize/100*E;return{areaSnapshot:_,pixelAbsorb:Ee,percentAfterAbsorption:_.area.minSize,pixelRemain:_.sizePixelAtStart+R-Ee}}return me<0?{areaSnapshot:_,pixelAbsorb:-_.sizePixelAtStart,percentAfterAbsorption:0,pixelRemain:R+_.sizePixelAtStart}:{areaSnapshot:_,pixelAbsorb:R,percentAfterAbsorption:me,pixelRemain:0}}}(R,E,ne):"pixel"===_?function Oe(_,R,E){const ne=_.sizePixelAtStart+R;return R>0?null!==_.area.maxSize&&ne>_.area.maxSize?{areaSnapshot:_,pixelAbsorb:_.area.maxSize-_.sizePixelAtStart,percentAfterAbsorption:-1,pixelRemain:ne-_.area.maxSize}:{areaSnapshot:_,pixelAbsorb:R,percentAfterAbsorption:-1,pixelRemain:0}:R<0?null!==_.area.minSize&&ne<_.area.minSize?{areaSnapshot:_,pixelAbsorb:_.area.minSize+R-ne,percentAfterAbsorption:-1,pixelRemain:ne-_.area.minSize}:ne<0?{areaSnapshot:_,pixelAbsorb:-_.sizePixelAtStart,percentAfterAbsorption:-1,pixelRemain:R+_.sizePixelAtStart}:{areaSnapshot:_,pixelAbsorb:R,percentAfterAbsorption:-1,pixelRemain:0}:void 0}(R,E):void 0}(_,Ee,me.remain,ne);return me.list.push(se),me.remain=se.pixelRemain,me},{remain:E,list:[]})}function Le(_,R){"percent"===_?R.areaSnapshot.area.size=R.percentAfterAbsorption:"pixel"===_&&null!==R.areaSnapshot.area.size&&(R.areaSnapshot.area.size=R.areaSnapshot.sizePixelAtStart+R.pixelAbsorb)}const be=new e.InjectionToken("angular-split-global-config");let m=(()=>{class _{constructor(E,ne,me,Ee,se){this.ngZone=E,this.elRef=ne,this.cdRef=me,this.renderer=Ee,this.gutterClickDeltaPx=2,this._config={direction:"horizontal",unit:"percent",gutterSize:11,gutterStep:1,restrictMove:!1,useTransition:!1,disabled:!1,dir:"ltr",gutterDblClickDuration:0},this.dragStart=new e.EventEmitter(!1),this.dragEnd=new e.EventEmitter(!1),this.gutterClick=new e.EventEmitter(!1),this.gutterDblClick=new e.EventEmitter(!1),this.dragProgressSubject=new y.x,this.dragProgress$=this.dragProgressSubject.asObservable(),this.isDragging=!1,this.isWaitingClear=!1,this.isWaitingInitialMove=!1,this.dragListeners=[],this.snapshot=null,this.startPoint=null,this.endPoint=null,this.displayedAreas=[],this.hiddenAreas=[],this._clickTimeout=null,this.direction=this._direction,this._config=se?Object.assign(this._config,se):this._config,Object.keys(this._config).forEach(ze=>{this[ze]=this._config[ze]})}set direction(E){this._direction="vertical"===E?"vertical":"horizontal",this.renderer.addClass(this.elRef.nativeElement,`as-${this._direction}`),this.renderer.removeClass(this.elRef.nativeElement,"as-"+("vertical"===this._direction?"horizontal":"vertical")),this.build(!1,!1)}get direction(){return this._direction}set unit(E){this._unit="pixel"===E?"pixel":"percent",this.renderer.addClass(this.elRef.nativeElement,`as-${this._unit}`),this.renderer.removeClass(this.elRef.nativeElement,"as-"+("pixel"===this._unit?"percent":"pixel")),this.build(!1,!0)}get unit(){return this._unit}set gutterSize(E){this._gutterSize=Q(E,11),this.build(!1,!1)}get gutterSize(){return this._gutterSize}set gutterStep(E){this._gutterStep=Q(E,1)}get gutterStep(){return this._gutterStep}set restrictMove(E){this._restrictMove=H(E)}get restrictMove(){return this._restrictMove}set useTransition(E){this._useTransition=H(E),this._useTransition?this.renderer.addClass(this.elRef.nativeElement,"as-transition"):this.renderer.removeClass(this.elRef.nativeElement,"as-transition")}get useTransition(){return this._useTransition}set disabled(E){this._disabled=H(E),this._disabled?this.renderer.addClass(this.elRef.nativeElement,"as-disabled"):this.renderer.removeClass(this.elRef.nativeElement,"as-disabled")}get disabled(){return this._disabled}set dir(E){this._dir="rtl"===E?"rtl":"ltr",this.renderer.setAttribute(this.elRef.nativeElement,"dir",this._dir)}get dir(){return this._dir}set gutterDblClickDuration(E){this._gutterDblClickDuration=Q(E,0)}get gutterDblClickDuration(){return this._gutterDblClickDuration}get transitionEnd(){return new x.y(E=>this.transitionEndSubscriber=E).pipe((0,$.b)(20))}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>{setTimeout(()=>this.renderer.addClass(this.elRef.nativeElement,"as-init"))})}getNbGutters(){return 0===this.displayedAreas.length?0:this.displayedAreas.length-1}addArea(E){const ne={component:E,order:0,size:0,minSize:null,maxSize:null,sizeBeforeCollapse:null,gutterBeforeCollapse:0};!0===E.visible?(this.displayedAreas.push(ne),this.build(!0,!0)):this.hiddenAreas.push(ne)}removeArea(E){if(this.displayedAreas.some(ne=>ne.component===E)){const ne=this.displayedAreas.find(me=>me.component===E);this.displayedAreas.splice(this.displayedAreas.indexOf(ne),1),this.build(!0,!0)}else if(this.hiddenAreas.some(ne=>ne.component===E)){const ne=this.hiddenAreas.find(me=>me.component===E);this.hiddenAreas.splice(this.hiddenAreas.indexOf(ne),1)}}updateArea(E,ne,me){!0===E.visible&&this.build(ne,me)}showArea(E){const ne=this.hiddenAreas.find(Ee=>Ee.component===E);if(void 0===ne)return;const me=this.hiddenAreas.splice(this.hiddenAreas.indexOf(ne),1);this.displayedAreas.push(...me),this.build(!0,!0)}hideArea(E){const ne=this.displayedAreas.find(Ee=>Ee.component===E);if(void 0===ne)return;const me=this.displayedAreas.splice(this.displayedAreas.indexOf(ne),1);me.forEach(Ee=>{Ee.order=0,Ee.size=0}),this.hiddenAreas.push(...me),this.build(!0,!0)}getVisibleAreaSizes(){return this.displayedAreas.map(E=>null===E.size?"*":E.size)}setVisibleAreaSizes(E){if(E.length!==this.displayedAreas.length)return!1;const ne=E.map(Ee=>Q(Ee,null));return!1!==Z(this.unit,ne)&&(this.displayedAreas.forEach((Ee,se)=>Ee.component._size=ne[se]),this.build(!1,!0),!0)}build(E,ne){if(this.stopDragging(),!0===E&&(this.displayedAreas.every(me=>null!==me.component.order)&&this.displayedAreas.sort((me,Ee)=>me.component.order-Ee.component.order),this.displayedAreas.forEach((me,Ee)=>{me.order=2*Ee,me.component.setStyleOrder(me.order)})),!0===ne){const me=Z(this.unit,this.displayedAreas.map(Ee=>Ee.component.size));switch(this.unit){case"percent":{const Ee=100/this.displayedAreas.length;this.displayedAreas.forEach(se=>{se.size=me?se.component.size:Ee,se.minSize=ue(se),se.maxSize=G(se)});break}case"pixel":if(me)this.displayedAreas.forEach(Ee=>{Ee.size=Ee.component.size,Ee.minSize=ue(Ee),Ee.maxSize=G(Ee)});else{const Ee=this.displayedAreas.filter(se=>null===se.component.size);if(0===Ee.length&&this.displayedAreas.length>0)this.displayedAreas.forEach((se,ze)=>{se.size=0===ze?null:se.component.size,se.minSize=0===ze?null:ue(se),se.maxSize=0===ze?null:G(se)});else if(Ee.length>1){let se=!1;this.displayedAreas.forEach(ze=>{null===ze.component.size?!1===se?(ze.size=null,ze.minSize=null,ze.maxSize=null,se=!0):(ze.size=100,ze.minSize=null,ze.maxSize=null):(ze.size=ze.component.size,ze.minSize=ue(ze),ze.maxSize=G(ze))})}}}}this.refreshStyleSizes(),this.cdRef.markForCheck()}refreshStyleSizes(){if("percent"===this.unit)if(1===this.displayedAreas.length)this.displayedAreas[0].component.setStyleFlex(0,0,"100%",!1,!1);else{const E=this.getNbGutters()*this.gutterSize;this.displayedAreas.forEach(ne=>{ne.component.setStyleFlex(0,0,`calc( ${ne.size}% - ${ne.size/100*E}px )`,null!==ne.minSize&&ne.minSize===ne.size,null!==ne.maxSize&&ne.maxSize===ne.size)})}else"pixel"===this.unit&&this.displayedAreas.forEach(E=>{null===E.size?E.component.setStyleFlex(1,1,1===this.displayedAreas.length?"100%":"auto",!1,!1):1===this.displayedAreas.length?E.component.setStyleFlex(0,0,"100%",!1,!1):E.component.setStyleFlex(0,0,`${E.size}px`,null!==E.minSize&&E.minSize===E.size,null!==E.maxSize&&E.maxSize===E.size)})}clickGutter(E,ne){const me=S(E);this.startPoint&&V(this.startPoint,me,this.gutterClickDeltaPx)&&(!this.isDragging||this.isWaitingInitialMove)&&(null!==this._clickTimeout?(window.clearTimeout(this._clickTimeout),this._clickTimeout=null,this.notify("dblclick",ne),this.stopDragging()):this._clickTimeout=window.setTimeout(()=>{this._clickTimeout=null,this.notify("click",ne),this.stopDragging()},this.gutterDblClickDuration))}startKeyboardDrag(E,ne,me){if(!0===this.disabled||!0===this.isWaitingClear)return;const Ee=function N(_,R){if("horizontal"===R)switch(_.key){case"ArrowLeft":case"ArrowRight":case"PageUp":case"PageDown":break;default:return null}if("vertical"===R)switch(_.key){case"ArrowUp":case"ArrowDown":case"PageUp":case"PageDown":break;default:return null}const E=_.currentTarget,ne="PageUp"===_.key||"PageDown"===_.key?500:50;let me=E.offsetLeft,Ee=E.offsetTop;switch(_.key){case"ArrowLeft":me-=ne;break;case"ArrowRight":me+=ne;break;case"ArrowUp":Ee-=ne;break;case"ArrowDown":Ee+=ne;break;case"PageUp":"vertical"===R?Ee-=ne:me+=ne;break;case"PageDown":"vertical"===R?Ee+=ne:me-=ne;break;default:return null}return{x:me,y:Ee}}(E,this.direction);null!==Ee&&(this.endPoint=Ee,this.startPoint=S(E),E.preventDefault(),E.stopPropagation(),this.setupForDragEvent(ne,me),this.startDragging(),this.drag(),this.stopDragging())}startMouseDrag(E,ne,me){E.preventDefault(),E.stopPropagation(),this.startPoint=S(E),null!==this.startPoint&&!0!==this.disabled&&!0!==this.isWaitingClear&&(this.setupForDragEvent(ne,me),this.dragListeners.push(this.renderer.listen("document","mouseup",this.stopDragging.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchend",this.stopDragging.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchcancel",this.stopDragging.bind(this))),this.ngZone.runOutsideAngular(()=>{this.dragListeners.push(this.renderer.listen("document","mousemove",this.mouseDragEvent.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchmove",this.mouseDragEvent.bind(this)))}),this.startDragging())}setupForDragEvent(E,ne){this.snapshot={gutterNum:ne,lastSteppedOffset:0,allAreasSizePixel:U(this.elRef,this.direction)-this.getNbGutters()*this.gutterSize,allInvolvedAreasSizePercent:100,areasBeforeGutter:[],areasAfterGutter:[]},this.displayedAreas.forEach(me=>{const Ee={area:me,sizePixelAtStart:U(me.component.elRef,this.direction),sizePercentAtStart:"percent"===this.unit?me.size:-1};me.order<E?!0===this.restrictMove?this.snapshot.areasBeforeGutter=[Ee]:this.snapshot.areasBeforeGutter.unshift(Ee):me.order>E&&(!0===this.restrictMove?0===this.snapshot.areasAfterGutter.length&&(this.snapshot.areasAfterGutter=[Ee]):this.snapshot.areasAfterGutter.push(Ee))}),this.snapshot.allInvolvedAreasSizePercent=[...this.snapshot.areasBeforeGutter,...this.snapshot.areasAfterGutter].reduce((me,Ee)=>me+Ee.sizePercentAtStart,0)}startDragging(){this.displayedAreas.forEach(E=>E.component.lockEvents()),this.isDragging=!0,this.isWaitingInitialMove=!0}mouseDragEvent(E){E.preventDefault(),E.stopPropagation();const ne=S(E);null!==this._clickTimeout&&!V(this.startPoint,ne,this.gutterClickDeltaPx)&&(window.clearTimeout(this._clickTimeout),this._clickTimeout=null),!1!==this.isDragging&&(this.endPoint=S(E),null!==this.endPoint&&this.drag())}drag(){if(this.isWaitingInitialMove){if(this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y)return;this.ngZone.run(()=>{this.isWaitingInitialMove=!1,this.renderer.addClass(this.elRef.nativeElement,"as-dragging"),this.renderer.addClass(this.gutterEls.toArray()[this.snapshot.gutterNum-1].nativeElement,"as-dragged"),this.notify("start",this.snapshot.gutterNum)})}let E="horizontal"===this.direction?this.startPoint.x-this.endPoint.x:this.startPoint.y-this.endPoint.y;"rtl"===this.dir&&(E=-E);const ne=Math.round(E/this.gutterStep)*this.gutterStep;if(ne===this.snapshot.lastSteppedOffset)return;this.snapshot.lastSteppedOffset=ne;let me=X(this.unit,this.snapshot.areasBeforeGutter,-ne,this.snapshot.allAreasSizePixel),Ee=X(this.unit,this.snapshot.areasAfterGutter,ne,this.snapshot.allAreasSizePixel);if(0!==me.remain&&0!==Ee.remain?Math.abs(me.remain)===Math.abs(Ee.remain)||(Math.abs(me.remain)>Math.abs(Ee.remain)?Ee=X(this.unit,this.snapshot.areasAfterGutter,ne+me.remain,this.snapshot.allAreasSizePixel):me=X(this.unit,this.snapshot.areasBeforeGutter,-(ne-Ee.remain),this.snapshot.allAreasSizePixel)):0!==me.remain?Ee=X(this.unit,this.snapshot.areasAfterGutter,ne+me.remain,this.snapshot.allAreasSizePixel):0!==Ee.remain&&(me=X(this.unit,this.snapshot.areasBeforeGutter,-(ne-Ee.remain),this.snapshot.allAreasSizePixel)),"percent"===this.unit){const se=[...me.list,...Ee.list],ze=se.find(Ge=>0!==Ge.percentAfterAbsorption&&Ge.percentAfterAbsorption!==Ge.areaSnapshot.area.minSize&&Ge.percentAfterAbsorption!==Ge.areaSnapshot.area.maxSize);ze&&(ze.percentAfterAbsorption=this.snapshot.allInvolvedAreasSizePercent-se.filter(Ge=>Ge!==ze).reduce((Ge,xe)=>Ge+xe.percentAfterAbsorption,0))}me.list.forEach(se=>Le(this.unit,se)),Ee.list.forEach(se=>Le(this.unit,se)),this.refreshStyleSizes(),this.notify("progress",this.snapshot.gutterNum)}stopDragging(E){if(E&&(E.preventDefault(),E.stopPropagation()),!1!==this.isDragging){for(this.displayedAreas.forEach(ne=>ne.component.unlockEvents());this.dragListeners.length>0;){const ne=this.dragListeners.pop();ne&&ne()}this.isDragging=!1,!1===this.isWaitingInitialMove&&this.notify("end",this.snapshot.gutterNum),this.renderer.removeClass(this.elRef.nativeElement,"as-dragging"),this.renderer.removeClass(this.gutterEls.toArray()[this.snapshot.gutterNum-1].nativeElement,"as-dragged"),this.snapshot=null,this.isWaitingClear=!0,this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.startPoint=null,this.endPoint=null,this.isWaitingClear=!1})})}}notify(E,ne){const me=this.getVisibleAreaSizes();"start"===E?this.dragStart.emit({gutterNum:ne,sizes:me}):"end"===E?this.dragEnd.emit({gutterNum:ne,sizes:me}):"click"===E?this.gutterClick.emit({gutterNum:ne,sizes:me}):"dblclick"===E?this.gutterDblClick.emit({gutterNum:ne,sizes:me}):"transitionEnd"===E?this.transitionEndSubscriber&&this.ngZone.run(()=>this.transitionEndSubscriber.next(me)):"progress"===E&&this.dragProgressSubject.next({gutterNum:ne,sizes:me})}ngOnDestroy(){this.stopDragging()}collapseArea(E,ne,me){const Ee=this.displayedAreas.find(Ge=>Ge.component===E);if(void 0===Ee)return;const se="right"===me?1:-1;Ee.sizeBeforeCollapse||(Ee.sizeBeforeCollapse=Ee.size,Ee.gutterBeforeCollapse=se),Ee.size=ne;const ze=this.gutterEls.find(Ge=>Ge.nativeElement.style.order===`${Ee.order+se}`);ze&&this.renderer.addClass(ze.nativeElement,"as-split-gutter-collapsed"),this.updateArea(E,!1,!1)}expandArea(E){const ne=this.displayedAreas.find(Ee=>Ee.component===E);if(void 0===ne||!ne.sizeBeforeCollapse)return;ne.size=ne.sizeBeforeCollapse,ne.sizeBeforeCollapse=null;const me=this.gutterEls.find(Ee=>Ee.nativeElement.style.order===`${ne.order+ne.gutterBeforeCollapse}`);me&&this.renderer.removeClass(me.nativeElement,"as-split-gutter-collapsed"),this.updateArea(E,!1,!1)}getAriaAreaSizeText(E){return null===E?null:E.toFixed(0)+" "+this.unit}}return _.\u0275fac=function(E){return new(E||_)(e.\u0275\u0275directiveInject(e.NgZone),e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(e.Renderer2),e.\u0275\u0275directiveInject(be,8))},_.\u0275cmp=e.\u0275\u0275defineComponent({type:_,selectors:[["as-split"]],viewQuery:function(E,ne){if(1&E&&e.\u0275\u0275viewQuery(c,5),2&E){let me;e.\u0275\u0275queryRefresh(me=e.\u0275\u0275loadQuery())&&(ne.gutterEls=me)}},inputs:{direction:"direction",unit:"unit",gutterSize:"gutterSize",gutterStep:"gutterStep",restrictMove:"restrictMove",useTransition:"useTransition",disabled:"disabled",dir:"dir",gutterDblClickDuration:"gutterDblClickDuration",gutterClickDeltaPx:"gutterClickDeltaPx",gutterAriaLabel:"gutterAriaLabel"},outputs:{transitionEnd:"transitionEnd",dragStart:"dragStart",dragEnd:"dragEnd",gutterClick:"gutterClick",gutterDblClick:"gutterDblClick"},exportAs:["asSplit"],ngContentSelectors:z,decls:2,vars:1,consts:[["ngFor","",3,"ngForOf"],["role","slider","tabindex","0","class","as-split-gutter",3,"flex-basis","order","keydown","mousedown","touchstart","mouseup","touchend",4,"ngIf"],["role","slider","tabindex","0",1,"as-split-gutter",3,"keydown","mousedown","touchstart","mouseup","touchend"],["gutterEls",""],[1,"as-split-gutter-icon"]],template:function(E,ne){1&E&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275projection(0),e.\u0275\u0275template(1,p,1,1,"ng-template",0)),2&E&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",ne.displayedAreas))},directives:[n.NgForOf,n.NgIf],styles:["[_nghost-%COMP%]{display:flex;flex-wrap:nowrap;justify-content:flex-start;align-items:stretch;overflow:hidden;width:100%;height:100%}[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{border:none;flex-grow:0;flex-shrink:0;background-color:#eee;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%] > .as-split-gutter.as-split-gutter-collapsed[_ngcontent-%COMP%]{flex-basis:1px!important;pointer-events:none}[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%] > .as-split-gutter-icon[_ngcontent-%COMP%]{width:100%;height:100%;background-position:center center;background-repeat:no-repeat}[_nghost-%COMP%]    >.as-split-area{flex-grow:0;flex-shrink:0;overflow-x:hidden;overflow-y:auto}[_nghost-%COMP%]    >.as-split-area.as-hidden{flex:0 1 0px!important;overflow-x:hidden;overflow-y:hidden}.as-horizontal[_nghost-%COMP%]{flex-direction:row}.as-horizontal[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{flex-direction:row;cursor:col-resize;height:100%}.as-horizontal[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%] > .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==)}.as-horizontal[_nghost-%COMP%]    >.as-split-area{height:100%}.as-vertical[_nghost-%COMP%]{flex-direction:column}.as-vertical[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{flex-direction:column;cursor:row-resize;width:100%}.as-vertical[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]   .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFCAMAAABl/6zIAAAABlBMVEUAAADMzMzIT8AyAAAAAXRSTlMAQObYZgAAABRJREFUeAFjYGRkwIMJSeMHlBkOABP7AEGzSuPKAAAAAElFTkSuQmCC)}.as-vertical[_nghost-%COMP%]    >.as-split-area{width:100%}.as-vertical[_nghost-%COMP%]    >.as-split-area.as-hidden{max-width:0}.as-disabled[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{cursor:default}.as-disabled[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]   .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url()}.as-transition.as-init[_nghost-%COMP%]:not(.as-dragging) > .as-split-gutter[_ngcontent-%COMP%], .as-transition.as-init[_nghost-%COMP%]:not(.as-dragging)    >.as-split-area{transition:flex-basis .3s}"],changeDetection:0}),_})(),P=(()=>{class _{constructor(E,ne,me,Ee){this.ngZone=E,this.elRef=ne,this.renderer=me,this.split=Ee,this._order=null,this._size=null,this._minSize=null,this._maxSize=null,this._lockSize=!1,this._visible=!0,this.lockListeners=[],this.renderer.addClass(this.elRef.nativeElement,"as-split-area")}set order(E){this._order=Q(E,null),this.split.updateArea(this,!0,!1)}get order(){return this._order}set size(E){this._size=Q(E,null),this.split.updateArea(this,!1,!0)}get size(){return this._size}set minSize(E){this._minSize=Q(E,null),this.split.updateArea(this,!1,!0)}get minSize(){return this._minSize}set maxSize(E){this._maxSize=Q(E,null),this.split.updateArea(this,!1,!0)}get maxSize(){return this._maxSize}set lockSize(E){this._lockSize=H(E),this.split.updateArea(this,!1,!0)}get lockSize(){return this._lockSize}set visible(E){this._visible=H(E),this._visible?(this.split.showArea(this),this.renderer.removeClass(this.elRef.nativeElement,"as-hidden")):(this.split.hideArea(this),this.renderer.addClass(this.elRef.nativeElement,"as-hidden"))}get visible(){return this._visible}ngOnInit(){this.split.addArea(this),this.ngZone.runOutsideAngular(()=>{this.transitionListener=this.renderer.listen(this.elRef.nativeElement,"transitionend",E=>{"flex-basis"===E.propertyName&&this.split.notify("transitionEnd",-1)})})}setStyleOrder(E){this.renderer.setStyle(this.elRef.nativeElement,"order",E)}setStyleFlex(E,ne,me,Ee,se){this.renderer.setStyle(this.elRef.nativeElement,"flex-grow",E),this.renderer.setStyle(this.elRef.nativeElement,"flex-shrink",ne),this.renderer.setStyle(this.elRef.nativeElement,"flex-basis",me),!0===Ee?this.renderer.addClass(this.elRef.nativeElement,"as-min"):this.renderer.removeClass(this.elRef.nativeElement,"as-min"),!0===se?this.renderer.addClass(this.elRef.nativeElement,"as-max"):this.renderer.removeClass(this.elRef.nativeElement,"as-max")}lockEvents(){this.ngZone.runOutsideAngular(()=>{this.lockListeners.push(this.renderer.listen(this.elRef.nativeElement,"selectstart",()=>!1)),this.lockListeners.push(this.renderer.listen(this.elRef.nativeElement,"dragstart",()=>!1))})}unlockEvents(){for(;this.lockListeners.length>0;){const E=this.lockListeners.pop();E&&E()}}ngOnDestroy(){this.unlockEvents(),this.transitionListener&&this.transitionListener(),this.split.removeArea(this)}collapse(E=0,ne="right"){this.split.collapseArea(this,E,ne)}expand(){this.split.expandArea(this)}}return _.\u0275fac=function(E){return new(E||_)(e.\u0275\u0275directiveInject(e.NgZone),e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(e.Renderer2),e.\u0275\u0275directiveInject(m))},_.\u0275dir=e.\u0275\u0275defineDirective({type:_,selectors:[["as-split-area"],["","as-split-area",""]],inputs:{order:"order",size:"size",minSize:"minSize",maxSize:"maxSize",lockSize:"lockSize",visible:"visible"},exportAs:["asSplitArea"]}),_})(),b=(()=>{class _{static forRoot(){return console.warn("AngularSplitModule.forRoot() is deprecated and will be removed in v6"),{ngModule:_,providers:[]}}static forChild(){return console.warn("AngularSplitModule.forChild() is deprecated and will be removed in v6"),{ngModule:_,providers:[]}}}return _.\u0275fac=function(E){return new(E||_)},_.\u0275mod=e.\u0275\u0275defineNgModule({type:_}),_.\u0275inj=e.\u0275\u0275defineInjector({imports:[[n.CommonModule]]}),_})()},2522:(it,K,u)=>{u.d(K,{_f:()=>Oe,sv:()=>Le,NP:()=>Q,bB:()=>m,dt:()=>ee,yH:()=>be});var e=u(1670),n=u(7451),y=u(3192),x=u(4497);function $(P,b){if(1&P){const _=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"ngx-dropzone-remove-badge",1),n.\u0275\u0275listener("click",function(E){return n.\u0275\u0275restoreView(_),n.\u0275\u0275nextContext()._remove(E)}),n.\u0275\u0275elementEnd()}}const c=[[["ngx-dropzone-label"]]],d=["ngx-dropzone-label"],p=["fileInput"];function z(P,b){1&P&&n.\u0275\u0275projection(0,2,["*ngIf","!_hasPreviews"])}const S=[[["ngx-dropzone-preview"]],"*",[["ngx-dropzone-label"]]],V=["ngx-dropzone-preview","*","ngx-dropzone-label"];function N(P,b){if(1&P){const _=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"ngx-dropzone-remove-badge",2),n.\u0275\u0275listener("click",function(E){return n.\u0275\u0275restoreView(_),n.\u0275\u0275nextContext()._remove(E)}),n.\u0275\u0275elementEnd()}}function U(P,b){if(1&P&&(n.\u0275\u0275elementStart(0,"video",2),n.\u0275\u0275listener("click",function(R){return R.stopPropagation()}),n.\u0275\u0275element(1,"source",3),n.\u0275\u0275elementEnd()),2&P){const _=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("src",_.sanitizedVideoSrc,n.\u0275\u0275sanitizeUrl)}}function H(P,b){if(1&P){const _=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"ngx-dropzone-remove-badge",4),n.\u0275\u0275listener("click",function(E){return n.\u0275\u0275restoreView(_),n.\u0275\u0275nextContext()._remove(E)}),n.\u0275\u0275elementEnd()}}let Q=(()=>{class P{}return P.\u0275fac=function(_){return new(_||P)},P.\u0275dir=n.\u0275\u0275defineDirective({type:P,selectors:[["ngx-dropzone-label"]]}),P})();function Z(P){return null!=P&&"false"!=`${P}`}let G=(()=>{class P{}return P.\u0275fac=function(_){return new(_||P)},P.\u0275cmp=n.\u0275\u0275defineComponent({type:P,selectors:[["ngx-dropzone-remove-badge"]],decls:3,vars:0,consts:[["x1","0","y1","0","x2","10","y2","10"],["x1","0","y1","10","x2","10","y2","0"]],template:function(_,R){1&_&&(n.\u0275\u0275namespaceSVG(),n.\u0275\u0275elementStart(0,"svg"),n.\u0275\u0275element(1,"line",0),n.\u0275\u0275element(2,"line",1),n.\u0275\u0275elementEnd())},styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;height:22px;width:22px;position:absolute;top:5px;right:5px;border-radius:50%;background:#bbb;color:#333;cursor:pointer}[_nghost-%COMP%]:hover{background:#aeaeae}[_nghost-%COMP%] > svg[_ngcontent-%COMP%]{height:10px;width:10px}[_nghost-%COMP%] > svg[_ngcontent-%COMP%] > line[_ngcontent-%COMP%]{stroke-width:2px;stroke:#fff}"]}),P})();var X=(()=>{return(P=X||(X={}))[P.BACKSPACE=8]="BACKSPACE",P[P.DELETE=46]="DELETE",X;var P})();let ee=(()=>{class P{constructor(_){this.sanitizer=_,this._removable=!1,this.removed=new n.EventEmitter,this.tabIndex=0}set file(_){this._file=_}get file(){return this._file}get removable(){return this._removable}set removable(_){this._removable=Z(_)}keyEvent(_){switch(_.keyCode){case X.BACKSPACE:case X.DELETE:this.remove()}}get hostStyle(){return this.sanitizer.bypassSecurityTrustStyle("\n\t\t\tdisplay: flex;\n\t\t\theight: 140px;\n\t\t\tmin-height: 140px;\n\t\t\tmin-width: 180px;\n\t\t\tmax-width: 180px;\n\t\t\tjustify-content: center;\n\t\t\talign-items: center;\n\t\t\tpadding: 0 20px;\n\t\t\tmargin: 10px;\n\t\t\tborder-radius: 5px;\n\t\t\tposition: relative;\n\t\t")}_remove(_){_.stopPropagation(),this.remove()}remove(){this._removable&&this.removed.next(this.file)}readFile(){var _=this;return(0,e.Z)(function*(){return new Promise((R,E)=>{const ne=new FileReader;if(ne.onload=me=>{R(me.target.result)},ne.onerror=me=>{console.error(`FileReader failed on file ${_.file.name}.`),E(me)},!_.file)return E("No file to read. Please provide a file using the [file] Input property.");ne.readAsDataURL(_.file)})})()}}return P.\u0275fac=function(_){return new(_||P)(n.\u0275\u0275directiveInject(x.H7))},P.\u0275cmp=n.\u0275\u0275defineComponent({type:P,selectors:[["ngx-dropzone-preview"]],hostVars:3,hostBindings:function(_,R){1&_&&n.\u0275\u0275listener("keyup",function(ne){return R.keyEvent(ne)}),2&_&&(n.\u0275\u0275hostProperty("tabindex",R.tabIndex),n.\u0275\u0275styleMap(R.hostStyle))},inputs:{file:"file",removable:"removable"},outputs:{removed:"removed"},ngContentSelectors:d,decls:2,vars:1,consts:[[3,"click",4,"ngIf"],[3,"click"]],template:function(_,R){1&_&&(n.\u0275\u0275projectionDef(c),n.\u0275\u0275projection(0),n.\u0275\u0275template(1,$,1,0,"ngx-dropzone-remove-badge",0)),2&_&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",R.removable))},directives:[G,y.NgIf],styles:["[_nghost-%COMP%]{background-image:linear-gradient(to top,#ededed,#efefef,#f1f1f1,#f4f4f4,#f6f6f6)}[_nghost-%COMP%]:hover, [_nghost-%COMP%]:focus{background-image:linear-gradient(to top,#e3e3e3,#ebeaea,#e8e7e7,#ebeaea,#f4f4f4);outline:0}[_nghost-%COMP%]:hover   ngx-dropzone-remove-badge[_ngcontent-%COMP%], [_nghost-%COMP%]:focus   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]     ngx-dropzone-label{overflow-wrap:break-word}"]}),P})(),ve=(()=>{class P{parseFileList(_,R,E,ne){const me=[],Ee=[];for(let ze=0;ze<_.length;ze++){const Ge=_.item(ze);this.isAccepted(Ge,R)?E&&Ge.size>E?this.rejectFile(Ee,Ge,"size"):!ne&&me.length>=1?this.rejectFile(Ee,Ge,"no_multiple"):me.push(Ge):this.rejectFile(Ee,Ge,"type")}return{addedFiles:me,rejectedFiles:Ee}}isAccepted(_,R){if("*"===R)return!0;const E=R.split(",").map(se=>se.toLowerCase().trim()),ne=_.type.toLowerCase(),me=_.name.toLowerCase();return!!E.find(se=>se.endsWith("/*")?ne.split("/")[0]===se.split("/")[0]:se.startsWith(".")?me.endsWith(se):se==ne)}rejectFile(_,R,E){const ne=R;ne.reason=E,_.push(ne)}}return P.\u0275fac=function(_){return new(_||P)},P.\u0275prov=n.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac}),P})(),Oe=(()=>{class P{constructor(_){this.service=_,this.change=new n.EventEmitter,this.accept="*",this._disabled=!1,this._multiple=!0,this._maxFileSize=void 0,this._expandable=!1,this._disableClick=!1,this._processDirectoryDrop=!1,this._isHovered=!1}get _hasPreviews(){return!!this._previewChildren.length}get disabled(){return this._disabled}set disabled(_){this._disabled=Z(_),this._isHovered&&(this._isHovered=!1)}get multiple(){return this._multiple}set multiple(_){this._multiple=Z(_)}get maxFileSize(){return this._maxFileSize}set maxFileSize(_){this._maxFileSize=function ue(P){return isNaN(parseFloat(P))||isNaN(Number(P))?null:Number(P)}(_)}get expandable(){return this._expandable}set expandable(_){this._expandable=Z(_)}get disableClick(){return this._disableClick}set disableClick(_){this._disableClick=Z(_)}get processDirectoryDrop(){return this._processDirectoryDrop}set processDirectoryDrop(_){this._processDirectoryDrop=Z(_)}_onClick(){this.disableClick||this.showFileSelector()}_onDragOver(_){this.disabled||(this.preventDefault(_),this._isHovered=!0)}_onDragLeave(){this._isHovered=!1}_onDrop(_){if(!this.disabled)if(this.preventDefault(_),this._isHovered=!1,this.processDirectoryDrop&&DataTransferItem.prototype.webkitGetAsEntry){const R=_.dataTransfer.items;if(R.length>0){const E=[],ne=[];for(let Ee=0;Ee<R.length;Ee++){const se=R[Ee].webkitGetAsEntry();se.isFile?E.push(_.dataTransfer.files[Ee]):se.isDirectory&&ne.push(se)}const me=new DataTransfer;if(E.forEach(Ee=>{me.items.add(Ee)}),!ne.length&&me.items.length&&this.handleFileDrop(me.files),ne.length){const Ee=[];for(const se of ne)Ee.push(this.extractFilesFromDirectory(se));Promise.all(Ee).then(se=>{se.reduce((ze,Ge)=>[...ze,...Ge]).forEach(ze=>{me.items.add(ze)}),this.handleFileDrop(me.files)})}}}else this.handleFileDrop(_.dataTransfer.files)}extractFilesFromDirectory(_){function R(ne){return E.apply(this,arguments)}function E(){return(E=(0,e.Z)(function*(ne){try{return yield new Promise((me,Ee)=>ne.file(me,Ee))}catch(me){console.log("Error converting a fileEntry to a File: ",me)}})).apply(this,arguments)}return new Promise((ne,me)=>{const Ee=[],se=_.createReader(),ze=()=>{se.readEntries(function(){var Ge=(0,e.Z)(function*(xe){if(xe.length){const qe=xe.filter(Xe=>Xe.isFile);for(const Xe of qe){const lt=yield R(Xe);Ee.push(lt)}ze()}else ne(Ee)});return function(xe){return Ge.apply(this,arguments)}}())};ze()})}showFileSelector(){this.disabled||this._fileInput.nativeElement.click()}_onFilesSelected(_){this.handleFileDrop(_.target.files),this._fileInput.nativeElement.value="",this.preventDefault(_)}handleFileDrop(_){const R=this.service.parseFileList(_,this.accept,this.maxFileSize,this.multiple);this.change.next({addedFiles:R.addedFiles,rejectedFiles:R.rejectedFiles,source:this})}preventDefault(_){_.preventDefault(),_.stopPropagation()}}return P.\u0275fac=function(_){return new(_||P)(n.\u0275\u0275directiveInject(ve,2))},P.\u0275cmp=n.\u0275\u0275defineComponent({type:P,selectors:[["ngx-dropzone"],["","ngx-dropzone",""]],contentQueries:function(_,R,E){if(1&_&&n.\u0275\u0275contentQuery(E,ee,5),2&_){let ne;n.\u0275\u0275queryRefresh(ne=n.\u0275\u0275loadQuery())&&(R._previewChildren=ne)}},viewQuery:function(_,R){if(1&_&&n.\u0275\u0275viewQuery(p,7),2&_){let E;n.\u0275\u0275queryRefresh(E=n.\u0275\u0275loadQuery())&&(R._fileInput=E.first)}},hostVars:8,hostBindings:function(_,R){1&_&&n.\u0275\u0275listener("click",function(){return R._onClick()})("dragover",function(ne){return R._onDragOver(ne)})("dragleave",function(){return R._onDragLeave()})("drop",function(ne){return R._onDrop(ne)}),2&_&&n.\u0275\u0275classProp("ngx-dz-disabled",R.disabled)("expandable",R.expandable)("unclickable",R.disableClick)("ngx-dz-hovered",R._isHovered)},inputs:{accept:"accept",disabled:"disabled",multiple:"multiple",maxFileSize:"maxFileSize",expandable:"expandable",disableClick:"disableClick",processDirectoryDrop:"processDirectoryDrop",id:"id",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedBy:["aria-describedby","ariaDescribedBy"]},outputs:{change:"change"},features:[n.\u0275\u0275ProvidersFeature([ve])],ngContentSelectors:V,decls:5,vars:8,consts:[["type","file",3,"id","multiple","accept","disabled","change"],["fileInput",""],[4,"ngIf"]],template:function(_,R){1&_&&(n.\u0275\u0275projectionDef(S),n.\u0275\u0275elementStart(0,"input",0,1),n.\u0275\u0275listener("change",function(ne){return R._onFilesSelected(ne)}),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(2,z,1,0,"ng-content",2),n.\u0275\u0275projection(3),n.\u0275\u0275projection(4,1)),2&_&&(n.\u0275\u0275property("id",R.id)("multiple",R.multiple)("accept",R.accept)("disabled",R.disabled),n.\u0275\u0275attribute("aria-label",R.ariaLabel)("aria-labelledby",R.ariaLabelledby)("aria-describedby",R.ariaDescribedBy),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",!R._hasPreviews))},directives:[y.NgIf],styles:["[_nghost-%COMP%]{display:flex;align-items:center;height:180px;background:#fff;cursor:pointer;color:#717386;border:2px dashed #717386;border-radius:5px;font-size:16px;overflow-x:auto}.ngx-dz-hovered[_nghost-%COMP%]{border-style:solid}.ngx-dz-disabled[_nghost-%COMP%]{opacity:.5;cursor:no-drop;pointer-events:none}.expandable[_nghost-%COMP%]{overflow:hidden;height:unset;min-height:180px;flex-wrap:wrap}.unclickable[_nghost-%COMP%]{cursor:default}[_nghost-%COMP%]     ngx-dropzone-label{text-align:center;z-index:10;margin:10px auto}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}[_nghost-%COMP%]   input[_ngcontent-%COMP%]:focus +   ngx-dropzone-label{outline:1px dotted #000;outline:-webkit-focus-ring-color auto 5px}"]}),P})(),Le=(()=>{class P extends ee{constructor(_){super(_),this.defaultImgLoading="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBzdHlsZT0ibWFyZ2luOiBhdXRvOyBiYWNrZ3JvdW5kOiByZ2IoMjQxLCAyNDIsIDI0Mykgbm9uZSByZXBlYXQgc2Nyb2xsIDAlIDAlOyBkaXNwbGF5OiBibG9jazsgc2hhcGUtcmVuZGVyaW5nOiBhdXRvOyIgd2lkdGg9IjIyNHB4IiBoZWlnaHQ9IjIyNHB4IiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQiPgo8Y2lyY2xlIGN4PSI1MCIgY3k9IjUwIiByPSIxNCIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2U9IiM4NWEyYjYiIHN0cm9rZS1kYXNoYXJyYXk9IjIxLjk5MTE0ODU3NTEyODU1MiAyMS45OTExNDg1NzUxMjg1NTIiIGZpbGw9Im5vbmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+CiAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIGR1cj0iMS4xNjI3OTA2OTc2NzQ0MTg0cyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGtleVRpbWVzPSIwOzEiIHZhbHVlcz0iMCA1MCA1MDszNjAgNTAgNTAiPjwvYW5pbWF0ZVRyYW5zZm9ybT4KPC9jaXJjbGU+CjxjaXJjbGUgY3g9IjUwIiBjeT0iNTAiIHI9IjEwIiBzdHJva2Utd2lkdGg9IjMiIHN0cm9rZT0iI2JiY2VkZCIgc3Ryb2tlLWRhc2hhcnJheT0iMTUuNzA3OTYzMjY3OTQ4OTY2IDE1LjcwNzk2MzI2Nzk0ODk2NiIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjE1LjcwNzk2MzI2Nzk0ODk2NiIgZmlsbD0ibm9uZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIj4KICA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InJvdGF0ZSIgZHVyPSIxLjE2Mjc5MDY5NzY3NDQxODRzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIga2V5VGltZXM9IjA7MSIgdmFsdWVzPSIwIDUwIDUwOy0zNjAgNTAgNTAiPjwvYW5pbWF0ZVRyYW5zZm9ybT4KPC9jaXJjbGU+CjwhLS0gW2xkaW9dIGdlbmVyYXRlZCBieSBodHRwczovL2xvYWRpbmcuaW8vIC0tPjwvc3ZnPg==",this.imageSrc=this.sanitizer.bypassSecurityTrustUrl(this.defaultImgLoading)}set file(_){this._file=_,this.renderImage()}get file(){return this._file}ngOnInit(){this.renderImage()}renderImage(){this.readFile().then(_=>setTimeout(()=>this.imageSrc=_)).catch(_=>console.error(_))}}return P.\u0275fac=function(_){return new(_||P)(n.\u0275\u0275directiveInject(x.H7))},P.\u0275cmp=n.\u0275\u0275defineComponent({type:P,selectors:[["ngx-dropzone-image-preview"]],inputs:{file:"file"},features:[n.\u0275\u0275ProvidersFeature([{provide:ee,useExisting:P}]),n.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:d,decls:3,vars:2,consts:[[3,"src"],[3,"click",4,"ngIf"],[3,"click"]],template:function(_,R){1&_&&(n.\u0275\u0275projectionDef(c),n.\u0275\u0275element(0,"img",0),n.\u0275\u0275projection(1),n.\u0275\u0275template(2,N,1,0,"ngx-dropzone-remove-badge",1)),2&_&&(n.\u0275\u0275property("src",R.imageSrc,n.\u0275\u0275sanitizeUrl),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",R.removable))},directives:[G,y.NgIf],styles:["[_nghost-%COMP%]{min-width:unset!important;max-width:unset!important;padding:0!important}[_nghost-%COMP%]:hover   img[_ngcontent-%COMP%], [_nghost-%COMP%]:focus   img[_ngcontent-%COMP%]{opacity:.7}[_nghost-%COMP%]:hover   ngx-dropzone-remove-badge[_ngcontent-%COMP%], [_nghost-%COMP%]:focus   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   img[_ngcontent-%COMP%]{max-height:100%;border-radius:5px;opacity:.8}[_nghost-%COMP%]     ngx-dropzone-label{position:absolute;overflow-wrap:break-word}"]}),P})(),be=(()=>{class P extends ee{constructor(_){super(_)}ngOnInit(){this.file?(this.videoSrc=URL.createObjectURL(this.file),this.sanitizedVideoSrc=this.sanitizer.bypassSecurityTrustUrl(this.videoSrc)):console.error("No file to read. Please provide a file using the [file] Input property.")}ngOnDestroy(){URL.revokeObjectURL(this.videoSrc)}}return P.\u0275fac=function(_){return new(_||P)(n.\u0275\u0275directiveInject(x.H7))},P.\u0275cmp=n.\u0275\u0275defineComponent({type:P,selectors:[["ngx-dropzone-video-preview"]],features:[n.\u0275\u0275ProvidersFeature([{provide:ee,useExisting:P}]),n.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:d,decls:3,vars:2,consts:[["controls","",3,"click",4,"ngIf"],[3,"click",4,"ngIf"],["controls","",3,"click"],[3,"src"],[3,"click"]],template:function(_,R){1&_&&(n.\u0275\u0275projectionDef(c),n.\u0275\u0275template(0,U,2,1,"video",0),n.\u0275\u0275projection(1),n.\u0275\u0275template(2,H,1,0,"ngx-dropzone-remove-badge",1)),2&_&&(n.\u0275\u0275property("ngIf",R.sanitizedVideoSrc),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",R.removable))},directives:[G,y.NgIf],styles:["[_nghost-%COMP%]{min-width:unset!important;max-width:unset!important;padding:0!important}[_nghost-%COMP%]:hover   video[_ngcontent-%COMP%], [_nghost-%COMP%]:focus   video[_ngcontent-%COMP%]{opacity:.7}[_nghost-%COMP%]:hover   ngx-dropzone-remove-badge[_ngcontent-%COMP%], [_nghost-%COMP%]:focus   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   video[_ngcontent-%COMP%]{max-height:100%;border-radius:5px}[_nghost-%COMP%]     ngx-dropzone-label{position:absolute;overflow-wrap:break-word}"]}),P})(),m=(()=>{class P{}return P.\u0275fac=function(_){return new(_||P)},P.\u0275mod=n.\u0275\u0275defineNgModule({type:P}),P.\u0275inj=n.\u0275\u0275defineInjector({imports:[[y.CommonModule]]}),P})()},982:(it,K,u)=>{u.d(K,{lF:()=>G,JP:()=>ve,NO:()=>X,Zy:()=>ue,TX:()=>N});var e=u(7451),n=u(3192),y=u(3547),x=u(635),$=u(155),c=u(6152),d=u(4497);const p=["*"];var V=(()=>{return(Oe=V||(V={})).CommandLine="command-line",Oe.LineHighlight="line-highlight",Oe.LineNumbers="line-numbers",V;var Oe})();class N{}const Z=new e.InjectionToken("SECURITY_CONTEXT");let ue=(()=>{class Oe{constructor(be,m,P,b,_){this.platform=be,this.securityContext=m,this.http=P,this.sanitizer=_,this.initialMarkedOptions={renderer:new y.Th},this.options=b}get options(){return this._options}set options(be){this._options={...this.initialMarkedOptions,...be}}get renderer(){return this.options.renderer}set renderer(be){this.options.renderer=be}compile(be,m=!1,P=!1,b=this.options){const _=this.trimIndentation(be),R=m?this.decodeHtml(_):_,E=P?this.renderEmoji(R):R,ne=(0,y.TU)(E,b);return this.sanitizer.sanitize(this.securityContext,ne)||""}getSource(be){if(!this.http)throw new Error("[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information");return this.http.get(be,{responseType:"text"}).pipe((0,x.U)(m=>this.handleExtension(be,m)))}highlight(be){if((0,n.isPlatformBrowser)(this.platform)&&"undefined"!=typeof Prism){be||(be=document);const m=be.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(m,P=>P.classList.add("language-none")),Prism.highlightAllUnder(be)}}renderKatex(be,m){if(!(0,n.isPlatformBrowser)(this.platform))return be;if("undefined"==typeof katex||void 0===katex.renderToString)throw new Error("[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information");return be.replace(/\$([^\s][^$]*?[^\s])\$/gm,(P,b)=>katex.renderToString(b,m))}decodeHtml(be){if(!(0,n.isPlatformBrowser)(this.platform))return be;const m=document.createElement("textarea");return m.innerHTML=be,m.value}handleExtension(be,m){const P=be?be.split("?")[0].split(".").splice(-1).join():"";return"md"!==P?"```"+P+"\n"+m+"\n```":m}renderEmoji(be){if(!(0,n.isPlatformBrowser)(this.platform))return be;if("undefined"==typeof joypixels||void 0===joypixels.shortnameToUnicode)throw new Error("[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information");return joypixels.shortnameToUnicode(be)}trimIndentation(be){if(!be)return"";let m;return be.split("\n").map(P=>{let b=m;return P.length>0&&(b=isNaN(b)?P.search(/\S|$/):Math.min(P.search(/\S|$/),b)),isNaN(m)&&(m=b),b?P.substring(b):P}).join("\n")}}return Oe.\u0275fac=function(be){return new(be||Oe)(e.\u0275\u0275inject(e.PLATFORM_ID),e.\u0275\u0275inject(Z),e.\u0275\u0275inject(c.HttpClient,8),e.\u0275\u0275inject(N,8),e.\u0275\u0275inject(d.H7))},Oe.\u0275prov=e.\u0275\u0275defineInjectable({token:Oe,factory:Oe.\u0275fac}),Oe})(),G=(()=>{class Oe{constructor(be,m){this.element=be,this.markdownService=m,this.error=new e.EventEmitter,this.load=new e.EventEmitter,this.ready=new e.EventEmitter,this._commandLine=!1,this._emoji=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1}get emoji(){return this._emoji}set emoji(be){this._emoji=this.coerceBooleanProperty(be)}get katex(){return this._katex}set katex(be){this._katex=this.coerceBooleanProperty(be)}get lineHighlight(){return this._lineHighlight}set lineHighlight(be){this._lineHighlight=this.coerceBooleanProperty(be)}get lineNumbers(){return this._lineNumbers}set lineNumbers(be){this._lineNumbers=this.coerceBooleanProperty(be)}get commandLine(){return this._commandLine}set commandLine(be){this._commandLine=this.coerceBooleanProperty(be)}ngOnChanges(){null==this.data?null==this.src||this.handleSrc():this.handleData()}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion()}render(be,m=!1){let P=this.markdownService.compile(be,m,this.emoji);P=this.katex?this.markdownService.renderKatex(P,this.katexOptions):P,this.element.nativeElement.innerHTML=P,this.handlePlugins(),this.markdownService.highlight(this.element.nativeElement),this.ready.emit()}coerceBooleanProperty(be){return null!=be&&"false"!=`${String(be)}`}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe(be=>{this.render(be),this.load.emit(be)},be=>this.error.emit(be))}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,V.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,V.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(be,m){const P=be.querySelectorAll("pre");for(let b=0;b<P.length;b++){const _=m instanceof Array?m:[m];P.item(b).classList.add(..._)}}setPluginOptions(be,m){const P=be.querySelectorAll("pre");for(let b=0;b<P.length;b++)Object.keys(m).forEach(_=>{const R=m[_];if(R){const E=this.toLispCase(_);P.item(b).setAttribute(E,R.toString())}})}toLispCase(be){const m=be.match(/([A-Z])/g);if(!m)return be;let P=be.toString();for(let b=0,_=m.length;b<_;b++)P=P.replace(new RegExp(m[b]),"-"+m[b].toLowerCase());return"-"===P.slice(0,1)&&(P=P.slice(1)),P}}return Oe.\u0275fac=function(be){return new(be||Oe)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(ue))},Oe.\u0275cmp=e.\u0275\u0275defineComponent({type:Oe,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},features:[e.\u0275\u0275NgOnChangesFeature],ngContentSelectors:p,decls:1,vars:0,template:function(be,m){1&be&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275projection(0))},encapsulation:2}),Oe})(),X=(()=>{class Oe{constructor(be,m,P,b){this.domSanitizer=be,this.elementRef=m,this.markdownService=P,this.zone=b}transform(be){if(null==be)return"";if("string"!=typeof be)return console.error(`MarkdownPipe has been invoked with an invalid value type [${typeof be}]`),be;const m=this.markdownService.compile(be);return this.zone.onStable.pipe((0,$.P)()).subscribe(()=>this.markdownService.highlight(this.elementRef.nativeElement)),this.domSanitizer.bypassSecurityTrustHtml(m)}}return Oe.\u0275fac=function(be){return new(be||Oe)(e.\u0275\u0275directiveInject(d.H7,16),e.\u0275\u0275directiveInject(e.ElementRef,16),e.\u0275\u0275directiveInject(ue,16),e.\u0275\u0275directiveInject(e.NgZone,16))},Oe.\u0275pipe=e.\u0275\u0275definePipe({name:"markdown",type:Oe,pure:!0}),Oe})(),ve=(()=>{class Oe{static forRoot(be){return{ngModule:Oe,providers:[ue,be&&be.loader||[],be&&be.markedOptions||[],{provide:Z,useValue:be&&null!=be.sanitize?be.sanitize:e.SecurityContext.HTML}]}}static forChild(){return{ngModule:Oe}}}return Oe.\u0275fac=function(be){return new(be||Oe)},Oe.\u0275mod=e.\u0275\u0275defineNgModule({type:Oe}),Oe.\u0275inj=e.\u0275\u0275defineInjector({}),Oe})()},3547:(it,K,u)=>{u.d(K,{Th:()=>qe,TU:()=>Ye});let n={baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};const x=/[&<>"']/,$=/[&<>"']/g,c=/[<>"']|&(?!#?\w+;)/,d=/[<>"']|&(?!#?\w+;)/g,p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},z=ut=>p[ut];function S(ut,le){if(le){if(x.test(ut))return ut.replace($,z)}else if(c.test(ut))return ut.replace(d,z);return ut}const V=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function N(ut){return ut.replace(V,(le,D)=>"colon"===(D=D.toLowerCase())?":":"#"===D.charAt(0)?"x"===D.charAt(1)?String.fromCharCode(parseInt(D.substring(2),16)):String.fromCharCode(+D.substring(1)):"")}const U=/(^|[^\[])\^/g;function H(ut,le){ut=ut.source||ut,le=le||"";const D={replace:(C,g)=>(g=(g=g.source||g).replace(U,"$1"),ut=ut.replace(C,g),D),getRegex:()=>new RegExp(ut,le)};return D}const Q=/[^\w:]/g,Z=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function ue(ut,le,D){if(ut){let C;try{C=decodeURIComponent(N(D)).replace(Q,"").toLowerCase()}catch{return null}if(0===C.indexOf("javascript:")||0===C.indexOf("vbscript:")||0===C.indexOf("data:"))return null}le&&!Z.test(D)&&(D=function Oe(ut,le){G[" "+ut]||(G[" "+ut]=X.test(ut)?ut+"/":P(ut,"/",!0));const D=-1===(ut=G[" "+ut]).indexOf(":");return"//"===le.substring(0,2)?D?le:ut.replace(ee,"$1")+le:"/"===le.charAt(0)?D?le:ut.replace(ve,"$1")+le:ut+le}(le,D));try{D=encodeURI(D).replace(/%25/g,"%")}catch{return null}return D}const G={},X=/^[^:]+:\/*[^/]*$/,ee=/^([^:]+:)[\s\S]*$/,ve=/^([^:]+:\/*[^/]*)[\s\S]*$/,Le={exec:function(){}};function be(ut){let D,C,le=1;for(;le<arguments.length;le++)for(C in D=arguments[le],D)Object.prototype.hasOwnProperty.call(D,C)&&(ut[C]=D[C]);return ut}function m(ut,le){const C=ut.replace(/\|/g,(B,de,ye)=>{let Me=!1,Qe=de;for(;--Qe>=0&&"\\"===ye[Qe];)Me=!Me;return Me?"|":" |"}).split(/ \|/);let g=0;if(C[0].trim()||C.shift(),C.length>0&&!C[C.length-1].trim()&&C.pop(),C.length>le)C.splice(le);else for(;C.length<le;)C.push("");for(;g<C.length;g++)C[g]=C[g].trim().replace(/\\\|/g,"|");return C}function P(ut,le,D){const C=ut.length;if(0===C)return"";let g=0;for(;g<C;){const B=ut.charAt(C-g-1);if(B!==le||D){if(B===le||!D)break;g++}else g++}return ut.substr(0,C-g)}function _(ut){ut&&ut.sanitize&&!ut.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function R(ut,le){if(le<1)return"";let D="";for(;le>1;)1&le&&(D+=ut),le>>=1,ut+=ut;return D+ut}function E(ut,le,D,C){const g=le.href,B=le.title?S(le.title):null,de=ut[1].replace(/\\([\[\]])/g,"$1");if("!"!==ut[0].charAt(0)){C.state.inLink=!0;const ye={type:"link",raw:D,href:g,title:B,text:de,tokens:C.inlineTokens(de,[])};return C.state.inLink=!1,ye}return{type:"image",raw:D,href:g,title:B,text:S(de)}}class me{constructor(le){this.options=le||n}space(le){const D=this.rules.block.newline.exec(le);if(D&&D[0].length>0)return{type:"space",raw:D[0]}}code(le){const D=this.rules.block.code.exec(le);if(D){const C=D[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:D[0],codeBlockStyle:"indented",text:this.options.pedantic?C:P(C,"\n")}}}fences(le){const D=this.rules.block.fences.exec(le);if(D){const C=D[0],g=function ne(ut,le){const D=ut.match(/^(\s+)(?:```)/);if(null===D)return le;const C=D[1];return le.split("\n").map(g=>{const B=g.match(/^\s+/);if(null===B)return g;const[de]=B;return de.length>=C.length?g.slice(C.length):g}).join("\n")}(C,D[3]||"");return{type:"code",raw:C,lang:D[2]?D[2].trim():D[2],text:g}}}heading(le){const D=this.rules.block.heading.exec(le);if(D){let C=D[2].trim();if(/#$/.test(C)){const B=P(C,"#");(this.options.pedantic||!B||/ $/.test(B))&&(C=B.trim())}const g={type:"heading",raw:D[0],depth:D[1].length,text:C,tokens:[]};return this.lexer.inline(g.text,g.tokens),g}}hr(le){const D=this.rules.block.hr.exec(le);if(D)return{type:"hr",raw:D[0]}}blockquote(le){const D=this.rules.block.blockquote.exec(le);if(D){const C=D[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:D[0],tokens:this.lexer.blockTokens(C,[]),text:C}}}list(le){let D=this.rules.block.list.exec(le);if(D){let C,g,B,de,ye,Me,Qe,st,Ut,qt,Ue,Lt,zt=D[1].trim();const $e=zt.length>1,Ot={type:"list",raw:"",ordered:$e,start:$e?+zt.slice(0,-1):"",loose:!1,items:[]};zt=$e?`\\d{1,9}\\${zt.slice(-1)}`:`\\${zt}`,this.options.pedantic&&(zt=$e?zt:"[*+-]");const Ke=new RegExp(`^( {0,3}${zt})((?: [^\\n]*)?(?:\\n|$))`);for(;le&&(Lt=!1,(D=Ke.exec(le))&&!this.rules.block.hr.test(le));){if(C=D[0],le=le.substring(C.length),st=D[2].split("\n",1)[0],Ut=le.split("\n",1)[0],this.options.pedantic?(de=2,Ue=st.trimLeft()):(de=D[2].search(/[^ ]/),de=de>4?1:de,Ue=st.slice(de),de+=D[1].length),Me=!1,!st&&/^ *$/.test(Ut)&&(C+=Ut+"\n",le=le.substring(Ut.length+1),Lt=!0),!Lt){const Be=new RegExp(`^ {0,${Math.min(3,de-1)}}(?:[*+-]|\\d{1,9}[.)])`);for(;le&&(qt=le.split("\n",1)[0],st=qt,this.options.pedantic&&(st=st.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!Be.test(st));){if(st.search(/[^ ]/)>=de||!st.trim())Ue+="\n"+st.slice(de);else{if(Me)break;Ue+="\n"+st}!Me&&!st.trim()&&(Me=!0),C+=qt+"\n",le=le.substring(qt.length+1)}}Ot.loose||(Qe?Ot.loose=!0:/\n *\n *$/.test(C)&&(Qe=!0)),this.options.gfm&&(g=/^\[[ xX]\] /.exec(Ue),g&&(B="[ ] "!==g[0],Ue=Ue.replace(/^\[[ xX]\] +/,""))),Ot.items.push({type:"list_item",raw:C,task:!!g,checked:B,loose:!1,text:Ue}),Ot.raw+=C}Ot.items[Ot.items.length-1].raw=C.trimRight(),Ot.items[Ot.items.length-1].text=Ue.trimRight(),Ot.raw=Ot.raw.trimRight();const rt=Ot.items.length;for(ye=0;ye<rt;ye++){this.lexer.state.top=!1,Ot.items[ye].tokens=this.lexer.blockTokens(Ot.items[ye].text,[]);const Be=Ot.items[ye].tokens.filter(wt=>"space"===wt.type),et=Be.every(wt=>{const Ft=wt.raw.split("");let dn=0;for(const Vt of Ft)if("\n"===Vt&&(dn+=1),dn>1)return!0;return!1});!Ot.loose&&Be.length&&et&&(Ot.loose=!0,Ot.items[ye].loose=!0)}return Ot}}html(le){const D=this.rules.block.html.exec(le);if(D){const C={type:"html",raw:D[0],pre:!this.options.sanitizer&&("pre"===D[1]||"script"===D[1]||"style"===D[1]),text:D[0]};return this.options.sanitize&&(C.type="paragraph",C.text=this.options.sanitizer?this.options.sanitizer(D[0]):S(D[0]),C.tokens=[],this.lexer.inline(C.text,C.tokens)),C}}def(le){const D=this.rules.block.def.exec(le);if(D)return D[3]&&(D[3]=D[3].substring(1,D[3].length-1)),{type:"def",tag:D[1].toLowerCase().replace(/\s+/g," "),raw:D[0],href:D[2],title:D[3]}}table(le){const D=this.rules.block.table.exec(le);if(D){const C={type:"table",header:m(D[1]).map(g=>({text:g})),align:D[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:D[3]&&D[3].trim()?D[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(C.header.length===C.align.length){C.raw=D[0];let B,de,ye,Me,g=C.align.length;for(B=0;B<g;B++)C.align[B]=/^ *-+: *$/.test(C.align[B])?"right":/^ *:-+: *$/.test(C.align[B])?"center":/^ *:-+ *$/.test(C.align[B])?"left":null;for(g=C.rows.length,B=0;B<g;B++)C.rows[B]=m(C.rows[B],C.header.length).map(Qe=>({text:Qe}));for(g=C.header.length,de=0;de<g;de++)C.header[de].tokens=[],this.lexer.inlineTokens(C.header[de].text,C.header[de].tokens);for(g=C.rows.length,de=0;de<g;de++)for(Me=C.rows[de],ye=0;ye<Me.length;ye++)Me[ye].tokens=[],this.lexer.inlineTokens(Me[ye].text,Me[ye].tokens);return C}}}lheading(le){const D=this.rules.block.lheading.exec(le);if(D){const C={type:"heading",raw:D[0],depth:"="===D[2].charAt(0)?1:2,text:D[1],tokens:[]};return this.lexer.inline(C.text,C.tokens),C}}paragraph(le){const D=this.rules.block.paragraph.exec(le);if(D){const C={type:"paragraph",raw:D[0],text:"\n"===D[1].charAt(D[1].length-1)?D[1].slice(0,-1):D[1],tokens:[]};return this.lexer.inline(C.text,C.tokens),C}}text(le){const D=this.rules.block.text.exec(le);if(D){const C={type:"text",raw:D[0],text:D[0],tokens:[]};return this.lexer.inline(C.text,C.tokens),C}}escape(le){const D=this.rules.inline.escape.exec(le);if(D)return{type:"escape",raw:D[0],text:S(D[1])}}tag(le){const D=this.rules.inline.tag.exec(le);if(D)return!this.lexer.state.inLink&&/^<a /i.test(D[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(D[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(D[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(D[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:D[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(D[0]):S(D[0]):D[0]}}link(le){const D=this.rules.inline.link.exec(le);if(D){const C=D[2].trim();if(!this.options.pedantic&&/^</.test(C)){if(!/>$/.test(C))return;const de=P(C.slice(0,-1),"\\");if((C.length-de.length)%2==0)return}else{const de=function b(ut,le){if(-1===ut.indexOf(le[1]))return-1;const D=ut.length;let C=0,g=0;for(;g<D;g++)if("\\"===ut[g])g++;else if(ut[g]===le[0])C++;else if(ut[g]===le[1]&&(C--,C<0))return g;return-1}(D[2],"()");if(de>-1){const Me=(0===D[0].indexOf("!")?5:4)+D[1].length+de;D[2]=D[2].substring(0,de),D[0]=D[0].substring(0,Me).trim(),D[3]=""}}let g=D[2],B="";if(this.options.pedantic){const de=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(g);de&&(g=de[1],B=de[3])}else B=D[3]?D[3].slice(1,-1):"";return g=g.trim(),/^</.test(g)&&(g=this.options.pedantic&&!/>$/.test(C)?g.slice(1):g.slice(1,-1)),E(D,{href:g&&g.replace(this.rules.inline._escapes,"$1"),title:B&&B.replace(this.rules.inline._escapes,"$1")},D[0],this.lexer)}}reflink(le,D){let C;if((C=this.rules.inline.reflink.exec(le))||(C=this.rules.inline.nolink.exec(le))){let g=(C[2]||C[1]).replace(/\s+/g," ");if(g=D[g.toLowerCase()],!g||!g.href){const B=C[0].charAt(0);return{type:"text",raw:B,text:B}}return E(C,g,C[0],this.lexer)}}emStrong(le,D,C=""){let g=this.rules.inline.emStrong.lDelim.exec(le);if(!g||g[3]&&C.match(/[\p{L}\p{N}]/u))return;const B=g[1]||g[2]||"";if(!B||B&&(""===C||this.rules.inline.punctuation.exec(C))){const de=g[0].length-1;let ye,Me,Qe=de,st=0;const Ut="*"===g[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(Ut.lastIndex=0,D=D.slice(-1*le.length+de);null!=(g=Ut.exec(D));){if(ye=g[1]||g[2]||g[3]||g[4]||g[5]||g[6],!ye)continue;if(Me=ye.length,g[3]||g[4]){Qe+=Me;continue}if((g[5]||g[6])&&de%3&&!((de+Me)%3)){st+=Me;continue}if(Qe-=Me,Qe>0)continue;if(Me=Math.min(Me,Me+Qe+st),Math.min(de,Me)%2){const Ue=le.slice(1,de+g.index+Me);return{type:"em",raw:le.slice(0,de+g.index+Me+1),text:Ue,tokens:this.lexer.inlineTokens(Ue,[])}}const qt=le.slice(2,de+g.index+Me-1);return{type:"strong",raw:le.slice(0,de+g.index+Me+1),text:qt,tokens:this.lexer.inlineTokens(qt,[])}}}}codespan(le){const D=this.rules.inline.code.exec(le);if(D){let C=D[2].replace(/\n/g," ");const g=/[^ ]/.test(C),B=/^ /.test(C)&&/ $/.test(C);return g&&B&&(C=C.substring(1,C.length-1)),C=S(C,!0),{type:"codespan",raw:D[0],text:C}}}br(le){const D=this.rules.inline.br.exec(le);if(D)return{type:"br",raw:D[0]}}del(le){const D=this.rules.inline.del.exec(le);if(D)return{type:"del",raw:D[0],text:D[2],tokens:this.lexer.inlineTokens(D[2],[])}}autolink(le,D){const C=this.rules.inline.autolink.exec(le);if(C){let g,B;return"@"===C[2]?(g=S(this.options.mangle?D(C[1]):C[1]),B="mailto:"+g):(g=S(C[1]),B=g),{type:"link",raw:C[0],text:g,href:B,tokens:[{type:"text",raw:g,text:g}]}}}url(le,D){let C;if(C=this.rules.inline.url.exec(le)){let g,B;if("@"===C[2])g=S(this.options.mangle?D(C[0]):C[0]),B="mailto:"+g;else{let de;do{de=C[0],C[0]=this.rules.inline._backpedal.exec(C[0])[0]}while(de!==C[0]);g=S(C[0]),B="www."===C[1]?"http://"+g:g}return{type:"link",raw:C[0],text:g,href:B,tokens:[{type:"text",raw:g,text:g}]}}}inlineText(le,D){const C=this.rules.inline.text.exec(le);if(C){let g;return g=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(C[0]):S(C[0]):C[0]:S(this.options.smartypants?D(C[0]):C[0]),{type:"text",raw:C[0],text:g}}}}const Ee={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Le,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};Ee.def=H(Ee.def).replace("label",Ee._label).replace("title",Ee._title).getRegex(),Ee.bullet=/(?:[*+-]|\d{1,9}[.)])/,Ee.listItemStart=H(/^( *)(bull) */).replace("bull",Ee.bullet).getRegex(),Ee.list=H(Ee.list).replace(/bull/g,Ee.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Ee.def.source+")").getRegex(),Ee._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Ee._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Ee.html=H(Ee.html,"i").replace("comment",Ee._comment).replace("tag",Ee._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Ee.paragraph=H(Ee._paragraph).replace("hr",Ee.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ee._tag).getRegex(),Ee.blockquote=H(Ee.blockquote).replace("paragraph",Ee.paragraph).getRegex(),Ee.normal=be({},Ee),Ee.gfm=be({},Ee.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),Ee.gfm.table=H(Ee.gfm.table).replace("hr",Ee.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ee._tag).getRegex(),Ee.gfm.paragraph=H(Ee._paragraph).replace("hr",Ee.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",Ee.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ee._tag).getRegex(),Ee.pedantic=be({},Ee.normal,{html:H("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",Ee._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Le,paragraph:H(Ee.normal._paragraph).replace("hr",Ee.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Ee.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const se={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Le,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Le,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function ze(ut){return ut.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function Ge(ut){let D,C,le="";const g=ut.length;for(D=0;D<g;D++)C=ut.charCodeAt(D),Math.random()>.5&&(C="x"+C.toString(16)),le+="&#"+C+";";return le}se._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",se.punctuation=H(se.punctuation).replace(/punctuation/g,se._punctuation).getRegex(),se.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,se.escapedEmSt=/\\\*|\\_/g,se._comment=H(Ee._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),se.emStrong.lDelim=H(se.emStrong.lDelim).replace(/punct/g,se._punctuation).getRegex(),se.emStrong.rDelimAst=H(se.emStrong.rDelimAst,"g").replace(/punct/g,se._punctuation).getRegex(),se.emStrong.rDelimUnd=H(se.emStrong.rDelimUnd,"g").replace(/punct/g,se._punctuation).getRegex(),se._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,se._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,se._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,se.autolink=H(se.autolink).replace("scheme",se._scheme).replace("email",se._email).getRegex(),se._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,se.tag=H(se.tag).replace("comment",se._comment).replace("attribute",se._attribute).getRegex(),se._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,se._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,se._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,se.link=H(se.link).replace("label",se._label).replace("href",se._href).replace("title",se._title).getRegex(),se.reflink=H(se.reflink).replace("label",se._label).replace("ref",Ee._label).getRegex(),se.nolink=H(se.nolink).replace("ref",Ee._label).getRegex(),se.reflinkSearch=H(se.reflinkSearch,"g").replace("reflink",se.reflink).replace("nolink",se.nolink).getRegex(),se.normal=be({},se),se.pedantic=be({},se.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:H(/^!?\[(label)\]\((.*?)\)/).replace("label",se._label).getRegex(),reflink:H(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",se._label).getRegex()}),se.gfm=be({},se.normal,{escape:H(se.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),se.gfm.url=H(se.gfm.url,"i").replace("email",se.gfm._extended_email).getRegex(),se.breaks=be({},se.gfm,{br:H(se.br).replace("{2,}","*").getRegex(),text:H(se.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});class xe{constructor(le){this.tokens=[],this.tokens.links=Object.create(null),this.options=le||n,this.options.tokenizer=this.options.tokenizer||new me,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const D={block:Ee.normal,inline:se.normal};this.options.pedantic?(D.block=Ee.pedantic,D.inline=se.pedantic):this.options.gfm&&(D.block=Ee.gfm,D.inline=this.options.breaks?se.breaks:se.gfm),this.tokenizer.rules=D}static get rules(){return{block:Ee,inline:se}}static lex(le,D){return new xe(D).lex(le)}static lexInline(le,D){return new xe(D).inlineTokens(le)}lex(le){let D;for(le=le.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(le,this.tokens);D=this.inlineQueue.shift();)this.inlineTokens(D.src,D.tokens);return this.tokens}blockTokens(le,D=[]){let C,g,B,de;for(this.options.pedantic&&(le=le.replace(/^ +$/gm,""));le;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(ye=>!!(C=ye.call({lexer:this},le,D))&&(le=le.substring(C.raw.length),D.push(C),!0)))){if(C=this.tokenizer.space(le)){le=le.substring(C.raw.length),1===C.raw.length&&D.length>0?D[D.length-1].raw+="\n":D.push(C);continue}if(C=this.tokenizer.code(le)){le=le.substring(C.raw.length),g=D[D.length-1],!g||"paragraph"!==g.type&&"text"!==g.type?D.push(C):(g.raw+="\n"+C.raw,g.text+="\n"+C.text,this.inlineQueue[this.inlineQueue.length-1].src=g.text);continue}if(C=this.tokenizer.fences(le)){le=le.substring(C.raw.length),D.push(C);continue}if(C=this.tokenizer.heading(le)){le=le.substring(C.raw.length),D.push(C);continue}if(C=this.tokenizer.hr(le)){le=le.substring(C.raw.length),D.push(C);continue}if(C=this.tokenizer.blockquote(le)){le=le.substring(C.raw.length),D.push(C);continue}if(C=this.tokenizer.list(le)){le=le.substring(C.raw.length),D.push(C);continue}if(C=this.tokenizer.html(le)){le=le.substring(C.raw.length),D.push(C);continue}if(C=this.tokenizer.def(le)){le=le.substring(C.raw.length),g=D[D.length-1],!g||"paragraph"!==g.type&&"text"!==g.type?this.tokens.links[C.tag]||(this.tokens.links[C.tag]={href:C.href,title:C.title}):(g.raw+="\n"+C.raw,g.text+="\n"+C.raw,this.inlineQueue[this.inlineQueue.length-1].src=g.text);continue}if(C=this.tokenizer.table(le)){le=le.substring(C.raw.length),D.push(C);continue}if(C=this.tokenizer.lheading(le)){le=le.substring(C.raw.length),D.push(C);continue}if(B=le,this.options.extensions&&this.options.extensions.startBlock){let ye=1/0;const Me=le.slice(1);let Qe;this.options.extensions.startBlock.forEach(function(st){Qe=st.call({lexer:this},Me),"number"==typeof Qe&&Qe>=0&&(ye=Math.min(ye,Qe))}),ye<1/0&&ye>=0&&(B=le.substring(0,ye+1))}if(this.state.top&&(C=this.tokenizer.paragraph(B))){g=D[D.length-1],de&&"paragraph"===g.type?(g.raw+="\n"+C.raw,g.text+="\n"+C.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=g.text):D.push(C),de=B.length!==le.length,le=le.substring(C.raw.length);continue}if(C=this.tokenizer.text(le)){le=le.substring(C.raw.length),g=D[D.length-1],g&&"text"===g.type?(g.raw+="\n"+C.raw,g.text+="\n"+C.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=g.text):D.push(C);continue}if(le){const ye="Infinite loop on byte: "+le.charCodeAt(0);if(this.options.silent){console.error(ye);break}throw new Error(ye)}}return this.state.top=!0,D}inline(le,D){this.inlineQueue.push({src:le,tokens:D})}inlineTokens(le,D=[]){let C,g,B,ye,Me,Qe,de=le;if(this.tokens.links){const st=Object.keys(this.tokens.links);if(st.length>0)for(;null!=(ye=this.tokenizer.rules.inline.reflinkSearch.exec(de));)st.includes(ye[0].slice(ye[0].lastIndexOf("[")+1,-1))&&(de=de.slice(0,ye.index)+"["+R("a",ye[0].length-2)+"]"+de.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(ye=this.tokenizer.rules.inline.blockSkip.exec(de));)de=de.slice(0,ye.index)+"["+R("a",ye[0].length-2)+"]"+de.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(ye=this.tokenizer.rules.inline.escapedEmSt.exec(de));)de=de.slice(0,ye.index)+"++"+de.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;le;)if(Me||(Qe=""),Me=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(st=>!!(C=st.call({lexer:this},le,D))&&(le=le.substring(C.raw.length),D.push(C),!0)))){if(C=this.tokenizer.escape(le)){le=le.substring(C.raw.length),D.push(C);continue}if(C=this.tokenizer.tag(le)){le=le.substring(C.raw.length),g=D[D.length-1],g&&"text"===C.type&&"text"===g.type?(g.raw+=C.raw,g.text+=C.text):D.push(C);continue}if(C=this.tokenizer.link(le)){le=le.substring(C.raw.length),D.push(C);continue}if(C=this.tokenizer.reflink(le,this.tokens.links)){le=le.substring(C.raw.length),g=D[D.length-1],g&&"text"===C.type&&"text"===g.type?(g.raw+=C.raw,g.text+=C.text):D.push(C);continue}if(C=this.tokenizer.emStrong(le,de,Qe)){le=le.substring(C.raw.length),D.push(C);continue}if(C=this.tokenizer.codespan(le)){le=le.substring(C.raw.length),D.push(C);continue}if(C=this.tokenizer.br(le)){le=le.substring(C.raw.length),D.push(C);continue}if(C=this.tokenizer.del(le)){le=le.substring(C.raw.length),D.push(C);continue}if(C=this.tokenizer.autolink(le,Ge)){le=le.substring(C.raw.length),D.push(C);continue}if(!this.state.inLink&&(C=this.tokenizer.url(le,Ge))){le=le.substring(C.raw.length),D.push(C);continue}if(B=le,this.options.extensions&&this.options.extensions.startInline){let st=1/0;const Ut=le.slice(1);let qt;this.options.extensions.startInline.forEach(function(Ue){qt=Ue.call({lexer:this},Ut),"number"==typeof qt&&qt>=0&&(st=Math.min(st,qt))}),st<1/0&&st>=0&&(B=le.substring(0,st+1))}if(C=this.tokenizer.inlineText(B,ze)){le=le.substring(C.raw.length),"_"!==C.raw.slice(-1)&&(Qe=C.raw.slice(-1)),Me=!0,g=D[D.length-1],g&&"text"===g.type?(g.raw+=C.raw,g.text+=C.text):D.push(C);continue}if(le){const st="Infinite loop on byte: "+le.charCodeAt(0);if(this.options.silent){console.error(st);break}throw new Error(st)}}return D}}class qe{constructor(le){this.options=le||n}code(le,D,C){const g=(D||"").match(/\S*/)[0];if(this.options.highlight){const B=this.options.highlight(le,g);null!=B&&B!==le&&(C=!0,le=B)}return le=le.replace(/\n$/,"")+"\n",g?'<pre><code class="'+this.options.langPrefix+S(g,!0)+'">'+(C?le:S(le,!0))+"</code></pre>\n":"<pre><code>"+(C?le:S(le,!0))+"</code></pre>\n"}blockquote(le){return"<blockquote>\n"+le+"</blockquote>\n"}html(le){return le}heading(le,D,C,g){return this.options.headerIds?"<h"+D+' id="'+this.options.headerPrefix+g.slug(C)+'">'+le+"</h"+D+">\n":"<h"+D+">"+le+"</h"+D+">\n"}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(le,D,C){const g=D?"ol":"ul";return"<"+g+(D&&1!==C?' start="'+C+'"':"")+">\n"+le+"</"+g+">\n"}listitem(le){return"<li>"+le+"</li>\n"}checkbox(le){return"<input "+(le?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(le){return"<p>"+le+"</p>\n"}table(le,D){return D&&(D="<tbody>"+D+"</tbody>"),"<table>\n<thead>\n"+le+"</thead>\n"+D+"</table>\n"}tablerow(le){return"<tr>\n"+le+"</tr>\n"}tablecell(le,D){const C=D.header?"th":"td";return(D.align?"<"+C+' align="'+D.align+'">':"<"+C+">")+le+"</"+C+">\n"}strong(le){return"<strong>"+le+"</strong>"}em(le){return"<em>"+le+"</em>"}codespan(le){return"<code>"+le+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(le){return"<del>"+le+"</del>"}link(le,D,C){if(null===(le=ue(this.options.sanitize,this.options.baseUrl,le)))return C;let g='<a href="'+S(le)+'"';return D&&(g+=' title="'+D+'"'),g+=">"+C+"</a>",g}image(le,D,C){if(null===(le=ue(this.options.sanitize,this.options.baseUrl,le)))return C;let g='<img src="'+le+'" alt="'+C+'"';return D&&(g+=' title="'+D+'"'),g+=this.options.xhtml?"/>":">",g}text(le){return le}}class Xe{strong(le){return le}em(le){return le}codespan(le){return le}del(le){return le}html(le){return le}text(le){return le}link(le,D,C){return""+C}image(le,D,C){return""+C}br(){return""}}class lt{constructor(){this.seen={}}serialize(le){return le.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(le,D){let C=le,g=0;if(this.seen.hasOwnProperty(C)){g=this.seen[le];do{g++,C=le+"-"+g}while(this.seen.hasOwnProperty(C))}return D||(this.seen[le]=g,this.seen[C]=0),C}slug(le,D={}){const C=this.serialize(le);return this.getNextSafeSlug(C,D.dryrun)}}class He{constructor(le){this.options=le||n,this.options.renderer=this.options.renderer||new qe,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Xe,this.slugger=new lt}static parse(le,D){return new He(D).parse(le)}static parseInline(le,D){return new He(D).parseInline(le)}parse(le,D=!0){let g,B,de,ye,Me,Qe,st,Ut,qt,Ue,Lt,zt,$e,Ot,Ke,rt,Be,et,wt,C="";const Ft=le.length;for(g=0;g<Ft;g++)if(Ue=le[g],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[Ue.type]&&(wt=this.options.extensions.renderers[Ue.type].call({parser:this},Ue),!1!==wt||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(Ue.type)))C+=wt||"";else switch(Ue.type){case"space":continue;case"hr":C+=this.renderer.hr();continue;case"heading":C+=this.renderer.heading(this.parseInline(Ue.tokens),Ue.depth,N(this.parseInline(Ue.tokens,this.textRenderer)),this.slugger);continue;case"code":C+=this.renderer.code(Ue.text,Ue.lang,Ue.escaped);continue;case"table":for(Ut="",st="",ye=Ue.header.length,B=0;B<ye;B++)st+=this.renderer.tablecell(this.parseInline(Ue.header[B].tokens),{header:!0,align:Ue.align[B]});for(Ut+=this.renderer.tablerow(st),qt="",ye=Ue.rows.length,B=0;B<ye;B++){for(Qe=Ue.rows[B],st="",Me=Qe.length,de=0;de<Me;de++)st+=this.renderer.tablecell(this.parseInline(Qe[de].tokens),{header:!1,align:Ue.align[de]});qt+=this.renderer.tablerow(st)}C+=this.renderer.table(Ut,qt);continue;case"blockquote":qt=this.parse(Ue.tokens),C+=this.renderer.blockquote(qt);continue;case"list":for(Lt=Ue.ordered,zt=Ue.start,$e=Ue.loose,ye=Ue.items.length,qt="",B=0;B<ye;B++)Ke=Ue.items[B],rt=Ke.checked,Be=Ke.task,Ot="",Ke.task&&(et=this.renderer.checkbox(rt),$e?Ke.tokens.length>0&&"paragraph"===Ke.tokens[0].type?(Ke.tokens[0].text=et+" "+Ke.tokens[0].text,Ke.tokens[0].tokens&&Ke.tokens[0].tokens.length>0&&"text"===Ke.tokens[0].tokens[0].type&&(Ke.tokens[0].tokens[0].text=et+" "+Ke.tokens[0].tokens[0].text)):Ke.tokens.unshift({type:"text",text:et}):Ot+=et),Ot+=this.parse(Ke.tokens,$e),qt+=this.renderer.listitem(Ot,Be,rt);C+=this.renderer.list(qt,Lt,zt);continue;case"html":C+=this.renderer.html(Ue.text);continue;case"paragraph":C+=this.renderer.paragraph(this.parseInline(Ue.tokens));continue;case"text":for(qt=Ue.tokens?this.parseInline(Ue.tokens):Ue.text;g+1<Ft&&"text"===le[g+1].type;)Ue=le[++g],qt+="\n"+(Ue.tokens?this.parseInline(Ue.tokens):Ue.text);C+=D?this.renderer.paragraph(qt):qt;continue;default:{const dn='Token with "'+Ue.type+'" type was not found.';if(this.options.silent)return void console.error(dn);throw new Error(dn)}}return C}parseInline(le,D){D=D||this.renderer;let g,B,de,C="";const ye=le.length;for(g=0;g<ye;g++)if(B=le[g],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[B.type]&&(de=this.options.extensions.renderers[B.type].call({parser:this},B),!1!==de||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(B.type)))C+=de||"";else switch(B.type){case"escape":case"text":C+=D.text(B.text);break;case"html":C+=D.html(B.text);break;case"link":C+=D.link(B.href,B.title,this.parseInline(B.tokens,D));break;case"image":C+=D.image(B.href,B.title,B.text);break;case"strong":C+=D.strong(this.parseInline(B.tokens,D));break;case"em":C+=D.em(this.parseInline(B.tokens,D));break;case"codespan":C+=D.codespan(B.text);break;case"br":C+=D.br();break;case"del":C+=D.del(this.parseInline(B.tokens,D));break;default:{const Me='Token with "'+B.type+'" type was not found.';if(this.options.silent)return void console.error(Me);throw new Error(Me)}}return C}}function Ye(ut,le,D){if(null==ut)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof ut)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(ut)+", string expected");if("function"==typeof le&&(D=le,le=null),_(le=be({},Ye.defaults,le||{})),D){const C=le.highlight;let g;try{g=xe.lex(ut,le)}catch(ye){return D(ye)}const B=function(ye){let Me;if(!ye)try{le.walkTokens&&Ye.walkTokens(g,le.walkTokens),Me=He.parse(g,le)}catch(Qe){ye=Qe}return le.highlight=C,ye?D(ye):D(null,Me)};if(!C||C.length<3||(delete le.highlight,!g.length))return B();let de=0;return Ye.walkTokens(g,function(ye){"code"===ye.type&&(de++,setTimeout(()=>{C(ye.text,ye.lang,function(Me,Qe){if(Me)return B(Me);null!=Qe&&Qe!==ye.text&&(ye.text=Qe,ye.escaped=!0),de--,0===de&&B()})},0))}),void(0===de&&B())}try{const C=xe.lex(ut,le);return le.walkTokens&&Ye.walkTokens(C,le.walkTokens),He.parse(C,le)}catch(C){if(C.message+="\nPlease report this to https://github.com/markedjs/marked.",le.silent)return"<p>An error occurred:</p><pre>"+S(C.message+"",!0)+"</pre>";throw C}}Ye.options=Ye.setOptions=function(ut){return be(Ye.defaults,ut),function y(ut){n=ut}(Ye.defaults),Ye},Ye.getDefaults=function e(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}},Ye.defaults=n,Ye.use=function(...ut){const le=be({},...ut),D=Ye.defaults.extensions||{renderers:{},childTokens:{}};let C;ut.forEach(g=>{if(g.extensions&&(C=!0,g.extensions.forEach(B=>{if(!B.name)throw new Error("extension name required");if(B.renderer){const de=D.renderers?D.renderers[B.name]:null;D.renderers[B.name]=de?function(...ye){let Me=B.renderer.apply(this,ye);return!1===Me&&(Me=de.apply(this,ye)),Me}:B.renderer}if(B.tokenizer){if(!B.level||"block"!==B.level&&"inline"!==B.level)throw new Error("extension level must be 'block' or 'inline'");D[B.level]?D[B.level].unshift(B.tokenizer):D[B.level]=[B.tokenizer],B.start&&("block"===B.level?D.startBlock?D.startBlock.push(B.start):D.startBlock=[B.start]:"inline"===B.level&&(D.startInline?D.startInline.push(B.start):D.startInline=[B.start]))}B.childTokens&&(D.childTokens[B.name]=B.childTokens)})),g.renderer){const B=Ye.defaults.renderer||new qe;for(const de in g.renderer){const ye=B[de];B[de]=(...Me)=>{let Qe=g.renderer[de].apply(B,Me);return!1===Qe&&(Qe=ye.apply(B,Me)),Qe}}le.renderer=B}if(g.tokenizer){const B=Ye.defaults.tokenizer||new me;for(const de in g.tokenizer){const ye=B[de];B[de]=(...Me)=>{let Qe=g.tokenizer[de].apply(B,Me);return!1===Qe&&(Qe=ye.apply(B,Me)),Qe}}le.tokenizer=B}if(g.walkTokens){const B=Ye.defaults.walkTokens;le.walkTokens=function(de){g.walkTokens.call(this,de),B&&B.call(this,de)}}C&&(le.extensions=D),Ye.setOptions(le)})},Ye.walkTokens=function(ut,le){for(const D of ut)switch(le.call(Ye,D),D.type){case"table":for(const C of D.header)Ye.walkTokens(C.tokens,le);for(const C of D.rows)for(const g of C)Ye.walkTokens(g.tokens,le);break;case"list":Ye.walkTokens(D.items,le);break;default:Ye.defaults.extensions&&Ye.defaults.extensions.childTokens&&Ye.defaults.extensions.childTokens[D.type]?Ye.defaults.extensions.childTokens[D.type].forEach(function(C){Ye.walkTokens(D[C],le)}):D.tokens&&Ye.walkTokens(D.tokens,le)}},Ye.parseInline=function(ut,le){if(null==ut)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof ut)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(ut)+", string expected");_(le=be({},Ye.defaults,le||{}));try{const D=xe.lexInline(ut,le);return le.walkTokens&&Ye.walkTokens(D,le.walkTokens),He.parseInline(D,le)}catch(D){if(D.message+="\nPlease report this to https://github.com/markedjs/marked.",le.silent)return"<p>An error occurred:</p><pre>"+S(D.message+"",!0)+"</pre>";throw D}},Ye.Parser=He,Ye.parser=He.parse,Ye.Renderer=qe,Ye.TextRenderer=Xe,Ye.Lexer=xe,Ye.lexer=xe.lex,Ye.Tokenizer=me,Ye.Slugger=lt,Ye.parse=Ye},1670:(it,K,u)=>{function e(y,x,$,c,d,p,z){try{var S=y[p](z),V=S.value}catch(N){return void $(N)}S.done?x(V):Promise.resolve(V).then(c,d)}function n(y){return function(){var x=this,$=arguments;return new Promise(function(c,d){var p=y.apply(x,$);function z(V){e(p,c,d,z,S,"next",V)}function S(V){e(p,c,d,z,S,"throw",V)}z(void 0)})}}u.d(K,{Z:()=>n})},2148:it=>{it.exports=JSON.parse('{"0":65533,"128":8364,"130":8218,"131":402,"132":8222,"133":8230,"134":8224,"135":8225,"136":710,"137":8240,"138":352,"139":8249,"140":338,"142":381,"145":8216,"146":8217,"147":8220,"148":8221,"149":8226,"150":8211,"151":8212,"152":732,"153":8482,"154":353,"155":8250,"156":339,"158":382,"159":376}')},6086:it=>{it.exports=JSON.parse('{"Aacute":"\xc1","aacute":"\xe1","Abreve":"\u0102","abreve":"\u0103","ac":"\u223e","acd":"\u223f","acE":"\u223e\u0333","Acirc":"\xc2","acirc":"\xe2","acute":"\xb4","Acy":"\u0410","acy":"\u0430","AElig":"\xc6","aelig":"\xe6","af":"\u2061","Afr":"\u{1d504}","afr":"\u{1d51e}","Agrave":"\xc0","agrave":"\xe0","alefsym":"\u2135","aleph":"\u2135","Alpha":"\u0391","alpha":"\u03b1","Amacr":"\u0100","amacr":"\u0101","amalg":"\u2a3f","amp":"&","AMP":"&","andand":"\u2a55","And":"\u2a53","and":"\u2227","andd":"\u2a5c","andslope":"\u2a58","andv":"\u2a5a","ang":"\u2220","ange":"\u29a4","angle":"\u2220","angmsdaa":"\u29a8","angmsdab":"\u29a9","angmsdac":"\u29aa","angmsdad":"\u29ab","angmsdae":"\u29ac","angmsdaf":"\u29ad","angmsdag":"\u29ae","angmsdah":"\u29af","angmsd":"\u2221","angrt":"\u221f","angrtvb":"\u22be","angrtvbd":"\u299d","angsph":"\u2222","angst":"\xc5","angzarr":"\u237c","Aogon":"\u0104","aogon":"\u0105","Aopf":"\u{1d538}","aopf":"\u{1d552}","apacir":"\u2a6f","ap":"\u2248","apE":"\u2a70","ape":"\u224a","apid":"\u224b","apos":"\'","ApplyFunction":"\u2061","approx":"\u2248","approxeq":"\u224a","Aring":"\xc5","aring":"\xe5","Ascr":"\u{1d49c}","ascr":"\u{1d4b6}","Assign":"\u2254","ast":"*","asymp":"\u2248","asympeq":"\u224d","Atilde":"\xc3","atilde":"\xe3","Auml":"\xc4","auml":"\xe4","awconint":"\u2233","awint":"\u2a11","backcong":"\u224c","backepsilon":"\u03f6","backprime":"\u2035","backsim":"\u223d","backsimeq":"\u22cd","Backslash":"\u2216","Barv":"\u2ae7","barvee":"\u22bd","barwed":"\u2305","Barwed":"\u2306","barwedge":"\u2305","bbrk":"\u23b5","bbrktbrk":"\u23b6","bcong":"\u224c","Bcy":"\u0411","bcy":"\u0431","bdquo":"\u201e","becaus":"\u2235","because":"\u2235","Because":"\u2235","bemptyv":"\u29b0","bepsi":"\u03f6","bernou":"\u212c","Bernoullis":"\u212c","Beta":"\u0392","beta":"\u03b2","beth":"\u2136","between":"\u226c","Bfr":"\u{1d505}","bfr":"\u{1d51f}","bigcap":"\u22c2","bigcirc":"\u25ef","bigcup":"\u22c3","bigodot":"\u2a00","bigoplus":"\u2a01","bigotimes":"\u2a02","bigsqcup":"\u2a06","bigstar":"\u2605","bigtriangledown":"\u25bd","bigtriangleup":"\u25b3","biguplus":"\u2a04","bigvee":"\u22c1","bigwedge":"\u22c0","bkarow":"\u290d","blacklozenge":"\u29eb","blacksquare":"\u25aa","blacktriangle":"\u25b4","blacktriangledown":"\u25be","blacktriangleleft":"\u25c2","blacktriangleright":"\u25b8","blank":"\u2423","blk12":"\u2592","blk14":"\u2591","blk34":"\u2593","block":"\u2588","bne":"=\u20e5","bnequiv":"\u2261\u20e5","bNot":"\u2aed","bnot":"\u2310","Bopf":"\u{1d539}","bopf":"\u{1d553}","bot":"\u22a5","bottom":"\u22a5","bowtie":"\u22c8","boxbox":"\u29c9","boxdl":"\u2510","boxdL":"\u2555","boxDl":"\u2556","boxDL":"\u2557","boxdr":"\u250c","boxdR":"\u2552","boxDr":"\u2553","boxDR":"\u2554","boxh":"\u2500","boxH":"\u2550","boxhd":"\u252c","boxHd":"\u2564","boxhD":"\u2565","boxHD":"\u2566","boxhu":"\u2534","boxHu":"\u2567","boxhU":"\u2568","boxHU":"\u2569","boxminus":"\u229f","boxplus":"\u229e","boxtimes":"\u22a0","boxul":"\u2518","boxuL":"\u255b","boxUl":"\u255c","boxUL":"\u255d","boxur":"\u2514","boxuR":"\u2558","boxUr":"\u2559","boxUR":"\u255a","boxv":"\u2502","boxV":"\u2551","boxvh":"\u253c","boxvH":"\u256a","boxVh":"\u256b","boxVH":"\u256c","boxvl":"\u2524","boxvL":"\u2561","boxVl":"\u2562","boxVL":"\u2563","boxvr":"\u251c","boxvR":"\u255e","boxVr":"\u255f","boxVR":"\u2560","bprime":"\u2035","breve":"\u02d8","Breve":"\u02d8","brvbar":"\xa6","bscr":"\u{1d4b7}","Bscr":"\u212c","bsemi":"\u204f","bsim":"\u223d","bsime":"\u22cd","bsolb":"\u29c5","bsol":"\\\\","bsolhsub":"\u27c8","bull":"\u2022","bullet":"\u2022","bump":"\u224e","bumpE":"\u2aae","bumpe":"\u224f","Bumpeq":"\u224e","bumpeq":"\u224f","Cacute":"\u0106","cacute":"\u0107","capand":"\u2a44","capbrcup":"\u2a49","capcap":"\u2a4b","cap":"\u2229","Cap":"\u22d2","capcup":"\u2a47","capdot":"\u2a40","CapitalDifferentialD":"\u2145","caps":"\u2229\ufe00","caret":"\u2041","caron":"\u02c7","Cayleys":"\u212d","ccaps":"\u2a4d","Ccaron":"\u010c","ccaron":"\u010d","Ccedil":"\xc7","ccedil":"\xe7","Ccirc":"\u0108","ccirc":"\u0109","Cconint":"\u2230","ccups":"\u2a4c","ccupssm":"\u2a50","Cdot":"\u010a","cdot":"\u010b","cedil":"\xb8","Cedilla":"\xb8","cemptyv":"\u29b2","cent":"\xa2","centerdot":"\xb7","CenterDot":"\xb7","cfr":"\u{1d520}","Cfr":"\u212d","CHcy":"\u0427","chcy":"\u0447","check":"\u2713","checkmark":"\u2713","Chi":"\u03a7","chi":"\u03c7","circ":"\u02c6","circeq":"\u2257","circlearrowleft":"\u21ba","circlearrowright":"\u21bb","circledast":"\u229b","circledcirc":"\u229a","circleddash":"\u229d","CircleDot":"\u2299","circledR":"\xae","circledS":"\u24c8","CircleMinus":"\u2296","CirclePlus":"\u2295","CircleTimes":"\u2297","cir":"\u25cb","cirE":"\u29c3","cire":"\u2257","cirfnint":"\u2a10","cirmid":"\u2aef","cirscir":"\u29c2","ClockwiseContourIntegral":"\u2232","CloseCurlyDoubleQuote":"\u201d","CloseCurlyQuote":"\u2019","clubs":"\u2663","clubsuit":"\u2663","colon":":","Colon":"\u2237","Colone":"\u2a74","colone":"\u2254","coloneq":"\u2254","comma":",","commat":"@","comp":"\u2201","compfn":"\u2218","complement":"\u2201","complexes":"\u2102","cong":"\u2245","congdot":"\u2a6d","Congruent":"\u2261","conint":"\u222e","Conint":"\u222f","ContourIntegral":"\u222e","copf":"\u{1d554}","Copf":"\u2102","coprod":"\u2210","Coproduct":"\u2210","copy":"\xa9","COPY":"\xa9","copysr":"\u2117","CounterClockwiseContourIntegral":"\u2233","crarr":"\u21b5","cross":"\u2717","Cross":"\u2a2f","Cscr":"\u{1d49e}","cscr":"\u{1d4b8}","csub":"\u2acf","csube":"\u2ad1","csup":"\u2ad0","csupe":"\u2ad2","ctdot":"\u22ef","cudarrl":"\u2938","cudarrr":"\u2935","cuepr":"\u22de","cuesc":"\u22df","cularr":"\u21b6","cularrp":"\u293d","cupbrcap":"\u2a48","cupcap":"\u2a46","CupCap":"\u224d","cup":"\u222a","Cup":"\u22d3","cupcup":"\u2a4a","cupdot":"\u228d","cupor":"\u2a45","cups":"\u222a\ufe00","curarr":"\u21b7","curarrm":"\u293c","curlyeqprec":"\u22de","curlyeqsucc":"\u22df","curlyvee":"\u22ce","curlywedge":"\u22cf","curren":"\xa4","curvearrowleft":"\u21b6","curvearrowright":"\u21b7","cuvee":"\u22ce","cuwed":"\u22cf","cwconint":"\u2232","cwint":"\u2231","cylcty":"\u232d","dagger":"\u2020","Dagger":"\u2021","daleth":"\u2138","darr":"\u2193","Darr":"\u21a1","dArr":"\u21d3","dash":"\u2010","Dashv":"\u2ae4","dashv":"\u22a3","dbkarow":"\u290f","dblac":"\u02dd","Dcaron":"\u010e","dcaron":"\u010f","Dcy":"\u0414","dcy":"\u0434","ddagger":"\u2021","ddarr":"\u21ca","DD":"\u2145","dd":"\u2146","DDotrahd":"\u2911","ddotseq":"\u2a77","deg":"\xb0","Del":"\u2207","Delta":"\u0394","delta":"\u03b4","demptyv":"\u29b1","dfisht":"\u297f","Dfr":"\u{1d507}","dfr":"\u{1d521}","dHar":"\u2965","dharl":"\u21c3","dharr":"\u21c2","DiacriticalAcute":"\xb4","DiacriticalDot":"\u02d9","DiacriticalDoubleAcute":"\u02dd","DiacriticalGrave":"`","DiacriticalTilde":"\u02dc","diam":"\u22c4","diamond":"\u22c4","Diamond":"\u22c4","diamondsuit":"\u2666","diams":"\u2666","die":"\xa8","DifferentialD":"\u2146","digamma":"\u03dd","disin":"\u22f2","div":"\xf7","divide":"\xf7","divideontimes":"\u22c7","divonx":"\u22c7","DJcy":"\u0402","djcy":"\u0452","dlcorn":"\u231e","dlcrop":"\u230d","dollar":"$","Dopf":"\u{1d53b}","dopf":"\u{1d555}","Dot":"\xa8","dot":"\u02d9","DotDot":"\u20dc","doteq":"\u2250","doteqdot":"\u2251","DotEqual":"\u2250","dotminus":"\u2238","dotplus":"\u2214","dotsquare":"\u22a1","doublebarwedge":"\u2306","DoubleContourIntegral":"\u222f","DoubleDot":"\xa8","DoubleDownArrow":"\u21d3","DoubleLeftArrow":"\u21d0","DoubleLeftRightArrow":"\u21d4","DoubleLeftTee":"\u2ae4","DoubleLongLeftArrow":"\u27f8","DoubleLongLeftRightArrow":"\u27fa","DoubleLongRightArrow":"\u27f9","DoubleRightArrow":"\u21d2","DoubleRightTee":"\u22a8","DoubleUpArrow":"\u21d1","DoubleUpDownArrow":"\u21d5","DoubleVerticalBar":"\u2225","DownArrowBar":"\u2913","downarrow":"\u2193","DownArrow":"\u2193","Downarrow":"\u21d3","DownArrowUpArrow":"\u21f5","DownBreve":"\u0311","downdownarrows":"\u21ca","downharpoonleft":"\u21c3","downharpoonright":"\u21c2","DownLeftRightVector":"\u2950","DownLeftTeeVector":"\u295e","DownLeftVectorBar":"\u2956","DownLeftVector":"\u21bd","DownRightTeeVector":"\u295f","DownRightVectorBar":"\u2957","DownRightVector":"\u21c1","DownTeeArrow":"\u21a7","DownTee":"\u22a4","drbkarow":"\u2910","drcorn":"\u231f","drcrop":"\u230c","Dscr":"\u{1d49f}","dscr":"\u{1d4b9}","DScy":"\u0405","dscy":"\u0455","dsol":"\u29f6","Dstrok":"\u0110","dstrok":"\u0111","dtdot":"\u22f1","dtri":"\u25bf","dtrif":"\u25be","duarr":"\u21f5","duhar":"\u296f","dwangle":"\u29a6","DZcy":"\u040f","dzcy":"\u045f","dzigrarr":"\u27ff","Eacute":"\xc9","eacute":"\xe9","easter":"\u2a6e","Ecaron":"\u011a","ecaron":"\u011b","Ecirc":"\xca","ecirc":"\xea","ecir":"\u2256","ecolon":"\u2255","Ecy":"\u042d","ecy":"\u044d","eDDot":"\u2a77","Edot":"\u0116","edot":"\u0117","eDot":"\u2251","ee":"\u2147","efDot":"\u2252","Efr":"\u{1d508}","efr":"\u{1d522}","eg":"\u2a9a","Egrave":"\xc8","egrave":"\xe8","egs":"\u2a96","egsdot":"\u2a98","el":"\u2a99","Element":"\u2208","elinters":"\u23e7","ell":"\u2113","els":"\u2a95","elsdot":"\u2a97","Emacr":"\u0112","emacr":"\u0113","empty":"\u2205","emptyset":"\u2205","EmptySmallSquare":"\u25fb","emptyv":"\u2205","EmptyVerySmallSquare":"\u25ab","emsp13":"\u2004","emsp14":"\u2005","emsp":"\u2003","ENG":"\u014a","eng":"\u014b","ensp":"\u2002","Eogon":"\u0118","eogon":"\u0119","Eopf":"\u{1d53c}","eopf":"\u{1d556}","epar":"\u22d5","eparsl":"\u29e3","eplus":"\u2a71","epsi":"\u03b5","Epsilon":"\u0395","epsilon":"\u03b5","epsiv":"\u03f5","eqcirc":"\u2256","eqcolon":"\u2255","eqsim":"\u2242","eqslantgtr":"\u2a96","eqslantless":"\u2a95","Equal":"\u2a75","equals":"=","EqualTilde":"\u2242","equest":"\u225f","Equilibrium":"\u21cc","equiv":"\u2261","equivDD":"\u2a78","eqvparsl":"\u29e5","erarr":"\u2971","erDot":"\u2253","escr":"\u212f","Escr":"\u2130","esdot":"\u2250","Esim":"\u2a73","esim":"\u2242","Eta":"\u0397","eta":"\u03b7","ETH":"\xd0","eth":"\xf0","Euml":"\xcb","euml":"\xeb","euro":"\u20ac","excl":"!","exist":"\u2203","Exists":"\u2203","expectation":"\u2130","exponentiale":"\u2147","ExponentialE":"\u2147","fallingdotseq":"\u2252","Fcy":"\u0424","fcy":"\u0444","female":"\u2640","ffilig":"\ufb03","fflig":"\ufb00","ffllig":"\ufb04","Ffr":"\u{1d509}","ffr":"\u{1d523}","filig":"\ufb01","FilledSmallSquare":"\u25fc","FilledVerySmallSquare":"\u25aa","fjlig":"fj","flat":"\u266d","fllig":"\ufb02","fltns":"\u25b1","fnof":"\u0192","Fopf":"\u{1d53d}","fopf":"\u{1d557}","forall":"\u2200","ForAll":"\u2200","fork":"\u22d4","forkv":"\u2ad9","Fouriertrf":"\u2131","fpartint":"\u2a0d","frac12":"\xbd","frac13":"\u2153","frac14":"\xbc","frac15":"\u2155","frac16":"\u2159","frac18":"\u215b","frac23":"\u2154","frac25":"\u2156","frac34":"\xbe","frac35":"\u2157","frac38":"\u215c","frac45":"\u2158","frac56":"\u215a","frac58":"\u215d","frac78":"\u215e","frasl":"\u2044","frown":"\u2322","fscr":"\u{1d4bb}","Fscr":"\u2131","gacute":"\u01f5","Gamma":"\u0393","gamma":"\u03b3","Gammad":"\u03dc","gammad":"\u03dd","gap":"\u2a86","Gbreve":"\u011e","gbreve":"\u011f","Gcedil":"\u0122","Gcirc":"\u011c","gcirc":"\u011d","Gcy":"\u0413","gcy":"\u0433","Gdot":"\u0120","gdot":"\u0121","ge":"\u2265","gE":"\u2267","gEl":"\u2a8c","gel":"\u22db","geq":"\u2265","geqq":"\u2267","geqslant":"\u2a7e","gescc":"\u2aa9","ges":"\u2a7e","gesdot":"\u2a80","gesdoto":"\u2a82","gesdotol":"\u2a84","gesl":"\u22db\ufe00","gesles":"\u2a94","Gfr":"\u{1d50a}","gfr":"\u{1d524}","gg":"\u226b","Gg":"\u22d9","ggg":"\u22d9","gimel":"\u2137","GJcy":"\u0403","gjcy":"\u0453","gla":"\u2aa5","gl":"\u2277","glE":"\u2a92","glj":"\u2aa4","gnap":"\u2a8a","gnapprox":"\u2a8a","gne":"\u2a88","gnE":"\u2269","gneq":"\u2a88","gneqq":"\u2269","gnsim":"\u22e7","Gopf":"\u{1d53e}","gopf":"\u{1d558}","grave":"`","GreaterEqual":"\u2265","GreaterEqualLess":"\u22db","GreaterFullEqual":"\u2267","GreaterGreater":"\u2aa2","GreaterLess":"\u2277","GreaterSlantEqual":"\u2a7e","GreaterTilde":"\u2273","Gscr":"\u{1d4a2}","gscr":"\u210a","gsim":"\u2273","gsime":"\u2a8e","gsiml":"\u2a90","gtcc":"\u2aa7","gtcir":"\u2a7a","gt":">","GT":">","Gt":"\u226b","gtdot":"\u22d7","gtlPar":"\u2995","gtquest":"\u2a7c","gtrapprox":"\u2a86","gtrarr":"\u2978","gtrdot":"\u22d7","gtreqless":"\u22db","gtreqqless":"\u2a8c","gtrless":"\u2277","gtrsim":"\u2273","gvertneqq":"\u2269\ufe00","gvnE":"\u2269\ufe00","Hacek":"\u02c7","hairsp":"\u200a","half":"\xbd","hamilt":"\u210b","HARDcy":"\u042a","hardcy":"\u044a","harrcir":"\u2948","harr":"\u2194","hArr":"\u21d4","harrw":"\u21ad","Hat":"^","hbar":"\u210f","Hcirc":"\u0124","hcirc":"\u0125","hearts":"\u2665","heartsuit":"\u2665","hellip":"\u2026","hercon":"\u22b9","hfr":"\u{1d525}","Hfr":"\u210c","HilbertSpace":"\u210b","hksearow":"\u2925","hkswarow":"\u2926","hoarr":"\u21ff","homtht":"\u223b","hookleftarrow":"\u21a9","hookrightarrow":"\u21aa","hopf":"\u{1d559}","Hopf":"\u210d","horbar":"\u2015","HorizontalLine":"\u2500","hscr":"\u{1d4bd}","Hscr":"\u210b","hslash":"\u210f","Hstrok":"\u0126","hstrok":"\u0127","HumpDownHump":"\u224e","HumpEqual":"\u224f","hybull":"\u2043","hyphen":"\u2010","Iacute":"\xcd","iacute":"\xed","ic":"\u2063","Icirc":"\xce","icirc":"\xee","Icy":"\u0418","icy":"\u0438","Idot":"\u0130","IEcy":"\u0415","iecy":"\u0435","iexcl":"\xa1","iff":"\u21d4","ifr":"\u{1d526}","Ifr":"\u2111","Igrave":"\xcc","igrave":"\xec","ii":"\u2148","iiiint":"\u2a0c","iiint":"\u222d","iinfin":"\u29dc","iiota":"\u2129","IJlig":"\u0132","ijlig":"\u0133","Imacr":"\u012a","imacr":"\u012b","image":"\u2111","ImaginaryI":"\u2148","imagline":"\u2110","imagpart":"\u2111","imath":"\u0131","Im":"\u2111","imof":"\u22b7","imped":"\u01b5","Implies":"\u21d2","incare":"\u2105","in":"\u2208","infin":"\u221e","infintie":"\u29dd","inodot":"\u0131","intcal":"\u22ba","int":"\u222b","Int":"\u222c","integers":"\u2124","Integral":"\u222b","intercal":"\u22ba","Intersection":"\u22c2","intlarhk":"\u2a17","intprod":"\u2a3c","InvisibleComma":"\u2063","InvisibleTimes":"\u2062","IOcy":"\u0401","iocy":"\u0451","Iogon":"\u012e","iogon":"\u012f","Iopf":"\u{1d540}","iopf":"\u{1d55a}","Iota":"\u0399","iota":"\u03b9","iprod":"\u2a3c","iquest":"\xbf","iscr":"\u{1d4be}","Iscr":"\u2110","isin":"\u2208","isindot":"\u22f5","isinE":"\u22f9","isins":"\u22f4","isinsv":"\u22f3","isinv":"\u2208","it":"\u2062","Itilde":"\u0128","itilde":"\u0129","Iukcy":"\u0406","iukcy":"\u0456","Iuml":"\xcf","iuml":"\xef","Jcirc":"\u0134","jcirc":"\u0135","Jcy":"\u0419","jcy":"\u0439","Jfr":"\u{1d50d}","jfr":"\u{1d527}","jmath":"\u0237","Jopf":"\u{1d541}","jopf":"\u{1d55b}","Jscr":"\u{1d4a5}","jscr":"\u{1d4bf}","Jsercy":"\u0408","jsercy":"\u0458","Jukcy":"\u0404","jukcy":"\u0454","Kappa":"\u039a","kappa":"\u03ba","kappav":"\u03f0","Kcedil":"\u0136","kcedil":"\u0137","Kcy":"\u041a","kcy":"\u043a","Kfr":"\u{1d50e}","kfr":"\u{1d528}","kgreen":"\u0138","KHcy":"\u0425","khcy":"\u0445","KJcy":"\u040c","kjcy":"\u045c","Kopf":"\u{1d542}","kopf":"\u{1d55c}","Kscr":"\u{1d4a6}","kscr":"\u{1d4c0}","lAarr":"\u21da","Lacute":"\u0139","lacute":"\u013a","laemptyv":"\u29b4","lagran":"\u2112","Lambda":"\u039b","lambda":"\u03bb","lang":"\u27e8","Lang":"\u27ea","langd":"\u2991","langle":"\u27e8","lap":"\u2a85","Laplacetrf":"\u2112","laquo":"\xab","larrb":"\u21e4","larrbfs":"\u291f","larr":"\u2190","Larr":"\u219e","lArr":"\u21d0","larrfs":"\u291d","larrhk":"\u21a9","larrlp":"\u21ab","larrpl":"\u2939","larrsim":"\u2973","larrtl":"\u21a2","latail":"\u2919","lAtail":"\u291b","lat":"\u2aab","late":"\u2aad","lates":"\u2aad\ufe00","lbarr":"\u290c","lBarr":"\u290e","lbbrk":"\u2772","lbrace":"{","lbrack":"[","lbrke":"\u298b","lbrksld":"\u298f","lbrkslu":"\u298d","Lcaron":"\u013d","lcaron":"\u013e","Lcedil":"\u013b","lcedil":"\u013c","lceil":"\u2308","lcub":"{","Lcy":"\u041b","lcy":"\u043b","ldca":"\u2936","ldquo":"\u201c","ldquor":"\u201e","ldrdhar":"\u2967","ldrushar":"\u294b","ldsh":"\u21b2","le":"\u2264","lE":"\u2266","LeftAngleBracket":"\u27e8","LeftArrowBar":"\u21e4","leftarrow":"\u2190","LeftArrow":"\u2190","Leftarrow":"\u21d0","LeftArrowRightArrow":"\u21c6","leftarrowtail":"\u21a2","LeftCeiling":"\u2308","LeftDoubleBracket":"\u27e6","LeftDownTeeVector":"\u2961","LeftDownVectorBar":"\u2959","LeftDownVector":"\u21c3","LeftFloor":"\u230a","leftharpoondown":"\u21bd","leftharpoonup":"\u21bc","leftleftarrows":"\u21c7","leftrightarrow":"\u2194","LeftRightArrow":"\u2194","Leftrightarrow":"\u21d4","leftrightarrows":"\u21c6","leftrightharpoons":"\u21cb","leftrightsquigarrow":"\u21ad","LeftRightVector":"\u294e","LeftTeeArrow":"\u21a4","LeftTee":"\u22a3","LeftTeeVector":"\u295a","leftthreetimes":"\u22cb","LeftTriangleBar":"\u29cf","LeftTriangle":"\u22b2","LeftTriangleEqual":"\u22b4","LeftUpDownVector":"\u2951","LeftUpTeeVector":"\u2960","LeftUpVectorBar":"\u2958","LeftUpVector":"\u21bf","LeftVectorBar":"\u2952","LeftVector":"\u21bc","lEg":"\u2a8b","leg":"\u22da","leq":"\u2264","leqq":"\u2266","leqslant":"\u2a7d","lescc":"\u2aa8","les":"\u2a7d","lesdot":"\u2a7f","lesdoto":"\u2a81","lesdotor":"\u2a83","lesg":"\u22da\ufe00","lesges":"\u2a93","lessapprox":"\u2a85","lessdot":"\u22d6","lesseqgtr":"\u22da","lesseqqgtr":"\u2a8b","LessEqualGreater":"\u22da","LessFullEqual":"\u2266","LessGreater":"\u2276","lessgtr":"\u2276","LessLess":"\u2aa1","lesssim":"\u2272","LessSlantEqual":"\u2a7d","LessTilde":"\u2272","lfisht":"\u297c","lfloor":"\u230a","Lfr":"\u{1d50f}","lfr":"\u{1d529}","lg":"\u2276","lgE":"\u2a91","lHar":"\u2962","lhard":"\u21bd","lharu":"\u21bc","lharul":"\u296a","lhblk":"\u2584","LJcy":"\u0409","ljcy":"\u0459","llarr":"\u21c7","ll":"\u226a","Ll":"\u22d8","llcorner":"\u231e","Lleftarrow":"\u21da","llhard":"\u296b","lltri":"\u25fa","Lmidot":"\u013f","lmidot":"\u0140","lmoustache":"\u23b0","lmoust":"\u23b0","lnap":"\u2a89","lnapprox":"\u2a89","lne":"\u2a87","lnE":"\u2268","lneq":"\u2a87","lneqq":"\u2268","lnsim":"\u22e6","loang":"\u27ec","loarr":"\u21fd","lobrk":"\u27e6","longleftarrow":"\u27f5","LongLeftArrow":"\u27f5","Longleftarrow":"\u27f8","longleftrightarrow":"\u27f7","LongLeftRightArrow":"\u27f7","Longleftrightarrow":"\u27fa","longmapsto":"\u27fc","longrightarrow":"\u27f6","LongRightArrow":"\u27f6","Longrightarrow":"\u27f9","looparrowleft":"\u21ab","looparrowright":"\u21ac","lopar":"\u2985","Lopf":"\u{1d543}","lopf":"\u{1d55d}","loplus":"\u2a2d","lotimes":"\u2a34","lowast":"\u2217","lowbar":"_","LowerLeftArrow":"\u2199","LowerRightArrow":"\u2198","loz":"\u25ca","lozenge":"\u25ca","lozf":"\u29eb","lpar":"(","lparlt":"\u2993","lrarr":"\u21c6","lrcorner":"\u231f","lrhar":"\u21cb","lrhard":"\u296d","lrm":"\u200e","lrtri":"\u22bf","lsaquo":"\u2039","lscr":"\u{1d4c1}","Lscr":"\u2112","lsh":"\u21b0","Lsh":"\u21b0","lsim":"\u2272","lsime":"\u2a8d","lsimg":"\u2a8f","lsqb":"[","lsquo":"\u2018","lsquor":"\u201a","Lstrok":"\u0141","lstrok":"\u0142","ltcc":"\u2aa6","ltcir":"\u2a79","lt":"<","LT":"<","Lt":"\u226a","ltdot":"\u22d6","lthree":"\u22cb","ltimes":"\u22c9","ltlarr":"\u2976","ltquest":"\u2a7b","ltri":"\u25c3","ltrie":"\u22b4","ltrif":"\u25c2","ltrPar":"\u2996","lurdshar":"\u294a","luruhar":"\u2966","lvertneqq":"\u2268\ufe00","lvnE":"\u2268\ufe00","macr":"\xaf","male":"\u2642","malt":"\u2720","maltese":"\u2720","Map":"\u2905","map":"\u21a6","mapsto":"\u21a6","mapstodown":"\u21a7","mapstoleft":"\u21a4","mapstoup":"\u21a5","marker":"\u25ae","mcomma":"\u2a29","Mcy":"\u041c","mcy":"\u043c","mdash":"\u2014","mDDot":"\u223a","measuredangle":"\u2221","MediumSpace":"\u205f","Mellintrf":"\u2133","Mfr":"\u{1d510}","mfr":"\u{1d52a}","mho":"\u2127","micro":"\xb5","midast":"*","midcir":"\u2af0","mid":"\u2223","middot":"\xb7","minusb":"\u229f","minus":"\u2212","minusd":"\u2238","minusdu":"\u2a2a","MinusPlus":"\u2213","mlcp":"\u2adb","mldr":"\u2026","mnplus":"\u2213","models":"\u22a7","Mopf":"\u{1d544}","mopf":"\u{1d55e}","mp":"\u2213","mscr":"\u{1d4c2}","Mscr":"\u2133","mstpos":"\u223e","Mu":"\u039c","mu":"\u03bc","multimap":"\u22b8","mumap":"\u22b8","nabla":"\u2207","Nacute":"\u0143","nacute":"\u0144","nang":"\u2220\u20d2","nap":"\u2249","napE":"\u2a70\u0338","napid":"\u224b\u0338","napos":"\u0149","napprox":"\u2249","natural":"\u266e","naturals":"\u2115","natur":"\u266e","nbsp":"\xa0","nbump":"\u224e\u0338","nbumpe":"\u224f\u0338","ncap":"\u2a43","Ncaron":"\u0147","ncaron":"\u0148","Ncedil":"\u0145","ncedil":"\u0146","ncong":"\u2247","ncongdot":"\u2a6d\u0338","ncup":"\u2a42","Ncy":"\u041d","ncy":"\u043d","ndash":"\u2013","nearhk":"\u2924","nearr":"\u2197","neArr":"\u21d7","nearrow":"\u2197","ne":"\u2260","nedot":"\u2250\u0338","NegativeMediumSpace":"\u200b","NegativeThickSpace":"\u200b","NegativeThinSpace":"\u200b","NegativeVeryThinSpace":"\u200b","nequiv":"\u2262","nesear":"\u2928","nesim":"\u2242\u0338","NestedGreaterGreater":"\u226b","NestedLessLess":"\u226a","NewLine":"\\n","nexist":"\u2204","nexists":"\u2204","Nfr":"\u{1d511}","nfr":"\u{1d52b}","ngE":"\u2267\u0338","nge":"\u2271","ngeq":"\u2271","ngeqq":"\u2267\u0338","ngeqslant":"\u2a7e\u0338","nges":"\u2a7e\u0338","nGg":"\u22d9\u0338","ngsim":"\u2275","nGt":"\u226b\u20d2","ngt":"\u226f","ngtr":"\u226f","nGtv":"\u226b\u0338","nharr":"\u21ae","nhArr":"\u21ce","nhpar":"\u2af2","ni":"\u220b","nis":"\u22fc","nisd":"\u22fa","niv":"\u220b","NJcy":"\u040a","njcy":"\u045a","nlarr":"\u219a","nlArr":"\u21cd","nldr":"\u2025","nlE":"\u2266\u0338","nle":"\u2270","nleftarrow":"\u219a","nLeftarrow":"\u21cd","nleftrightarrow":"\u21ae","nLeftrightarrow":"\u21ce","nleq":"\u2270","nleqq":"\u2266\u0338","nleqslant":"\u2a7d\u0338","nles":"\u2a7d\u0338","nless":"\u226e","nLl":"\u22d8\u0338","nlsim":"\u2274","nLt":"\u226a\u20d2","nlt":"\u226e","nltri":"\u22ea","nltrie":"\u22ec","nLtv":"\u226a\u0338","nmid":"\u2224","NoBreak":"\u2060","NonBreakingSpace":"\xa0","nopf":"\u{1d55f}","Nopf":"\u2115","Not":"\u2aec","not":"\xac","NotCongruent":"\u2262","NotCupCap":"\u226d","NotDoubleVerticalBar":"\u2226","NotElement":"\u2209","NotEqual":"\u2260","NotEqualTilde":"\u2242\u0338","NotExists":"\u2204","NotGreater":"\u226f","NotGreaterEqual":"\u2271","NotGreaterFullEqual":"\u2267\u0338","NotGreaterGreater":"\u226b\u0338","NotGreaterLess":"\u2279","NotGreaterSlantEqual":"\u2a7e\u0338","NotGreaterTilde":"\u2275","NotHumpDownHump":"\u224e\u0338","NotHumpEqual":"\u224f\u0338","notin":"\u2209","notindot":"\u22f5\u0338","notinE":"\u22f9\u0338","notinva":"\u2209","notinvb":"\u22f7","notinvc":"\u22f6","NotLeftTriangleBar":"\u29cf\u0338","NotLeftTriangle":"\u22ea","NotLeftTriangleEqual":"\u22ec","NotLess":"\u226e","NotLessEqual":"\u2270","NotLessGreater":"\u2278","NotLessLess":"\u226a\u0338","NotLessSlantEqual":"\u2a7d\u0338","NotLessTilde":"\u2274","NotNestedGreaterGreater":"\u2aa2\u0338","NotNestedLessLess":"\u2aa1\u0338","notni":"\u220c","notniva":"\u220c","notnivb":"\u22fe","notnivc":"\u22fd","NotPrecedes":"\u2280","NotPrecedesEqual":"\u2aaf\u0338","NotPrecedesSlantEqual":"\u22e0","NotReverseElement":"\u220c","NotRightTriangleBar":"\u29d0\u0338","NotRightTriangle":"\u22eb","NotRightTriangleEqual":"\u22ed","NotSquareSubset":"\u228f\u0338","NotSquareSubsetEqual":"\u22e2","NotSquareSuperset":"\u2290\u0338","NotSquareSupersetEqual":"\u22e3","NotSubset":"\u2282\u20d2","NotSubsetEqual":"\u2288","NotSucceeds":"\u2281","NotSucceedsEqual":"\u2ab0\u0338","NotSucceedsSlantEqual":"\u22e1","NotSucceedsTilde":"\u227f\u0338","NotSuperset":"\u2283\u20d2","NotSupersetEqual":"\u2289","NotTilde":"\u2241","NotTildeEqual":"\u2244","NotTildeFullEqual":"\u2247","NotTildeTilde":"\u2249","NotVerticalBar":"\u2224","nparallel":"\u2226","npar":"\u2226","nparsl":"\u2afd\u20e5","npart":"\u2202\u0338","npolint":"\u2a14","npr":"\u2280","nprcue":"\u22e0","nprec":"\u2280","npreceq":"\u2aaf\u0338","npre":"\u2aaf\u0338","nrarrc":"\u2933\u0338","nrarr":"\u219b","nrArr":"\u21cf","nrarrw":"\u219d\u0338","nrightarrow":"\u219b","nRightarrow":"\u21cf","nrtri":"\u22eb","nrtrie":"\u22ed","nsc":"\u2281","nsccue":"\u22e1","nsce":"\u2ab0\u0338","Nscr":"\u{1d4a9}","nscr":"\u{1d4c3}","nshortmid":"\u2224","nshortparallel":"\u2226","nsim":"\u2241","nsime":"\u2244","nsimeq":"\u2244","nsmid":"\u2224","nspar":"\u2226","nsqsube":"\u22e2","nsqsupe":"\u22e3","nsub":"\u2284","nsubE":"\u2ac5\u0338","nsube":"\u2288","nsubset":"\u2282\u20d2","nsubseteq":"\u2288","nsubseteqq":"\u2ac5\u0338","nsucc":"\u2281","nsucceq":"\u2ab0\u0338","nsup":"\u2285","nsupE":"\u2ac6\u0338","nsupe":"\u2289","nsupset":"\u2283\u20d2","nsupseteq":"\u2289","nsupseteqq":"\u2ac6\u0338","ntgl":"\u2279","Ntilde":"\xd1","ntilde":"\xf1","ntlg":"\u2278","ntriangleleft":"\u22ea","ntrianglelefteq":"\u22ec","ntriangleright":"\u22eb","ntrianglerighteq":"\u22ed","Nu":"\u039d","nu":"\u03bd","num":"#","numero":"\u2116","numsp":"\u2007","nvap":"\u224d\u20d2","nvdash":"\u22ac","nvDash":"\u22ad","nVdash":"\u22ae","nVDash":"\u22af","nvge":"\u2265\u20d2","nvgt":">\u20d2","nvHarr":"\u2904","nvinfin":"\u29de","nvlArr":"\u2902","nvle":"\u2264\u20d2","nvlt":"<\u20d2","nvltrie":"\u22b4\u20d2","nvrArr":"\u2903","nvrtrie":"\u22b5\u20d2","nvsim":"\u223c\u20d2","nwarhk":"\u2923","nwarr":"\u2196","nwArr":"\u21d6","nwarrow":"\u2196","nwnear":"\u2927","Oacute":"\xd3","oacute":"\xf3","oast":"\u229b","Ocirc":"\xd4","ocirc":"\xf4","ocir":"\u229a","Ocy":"\u041e","ocy":"\u043e","odash":"\u229d","Odblac":"\u0150","odblac":"\u0151","odiv":"\u2a38","odot":"\u2299","odsold":"\u29bc","OElig":"\u0152","oelig":"\u0153","ofcir":"\u29bf","Ofr":"\u{1d512}","ofr":"\u{1d52c}","ogon":"\u02db","Ograve":"\xd2","ograve":"\xf2","ogt":"\u29c1","ohbar":"\u29b5","ohm":"\u03a9","oint":"\u222e","olarr":"\u21ba","olcir":"\u29be","olcross":"\u29bb","oline":"\u203e","olt":"\u29c0","Omacr":"\u014c","omacr":"\u014d","Omega":"\u03a9","omega":"\u03c9","Omicron":"\u039f","omicron":"\u03bf","omid":"\u29b6","ominus":"\u2296","Oopf":"\u{1d546}","oopf":"\u{1d560}","opar":"\u29b7","OpenCurlyDoubleQuote":"\u201c","OpenCurlyQuote":"\u2018","operp":"\u29b9","oplus":"\u2295","orarr":"\u21bb","Or":"\u2a54","or":"\u2228","ord":"\u2a5d","order":"\u2134","orderof":"\u2134","ordf":"\xaa","ordm":"\xba","origof":"\u22b6","oror":"\u2a56","orslope":"\u2a57","orv":"\u2a5b","oS":"\u24c8","Oscr":"\u{1d4aa}","oscr":"\u2134","Oslash":"\xd8","oslash":"\xf8","osol":"\u2298","Otilde":"\xd5","otilde":"\xf5","otimesas":"\u2a36","Otimes":"\u2a37","otimes":"\u2297","Ouml":"\xd6","ouml":"\xf6","ovbar":"\u233d","OverBar":"\u203e","OverBrace":"\u23de","OverBracket":"\u23b4","OverParenthesis":"\u23dc","para":"\xb6","parallel":"\u2225","par":"\u2225","parsim":"\u2af3","parsl":"\u2afd","part":"\u2202","PartialD":"\u2202","Pcy":"\u041f","pcy":"\u043f","percnt":"%","period":".","permil":"\u2030","perp":"\u22a5","pertenk":"\u2031","Pfr":"\u{1d513}","pfr":"\u{1d52d}","Phi":"\u03a6","phi":"\u03c6","phiv":"\u03d5","phmmat":"\u2133","phone":"\u260e","Pi":"\u03a0","pi":"\u03c0","pitchfork":"\u22d4","piv":"\u03d6","planck":"\u210f","planckh":"\u210e","plankv":"\u210f","plusacir":"\u2a23","plusb":"\u229e","pluscir":"\u2a22","plus":"+","plusdo":"\u2214","plusdu":"\u2a25","pluse":"\u2a72","PlusMinus":"\xb1","plusmn":"\xb1","plussim":"\u2a26","plustwo":"\u2a27","pm":"\xb1","Poincareplane":"\u210c","pointint":"\u2a15","popf":"\u{1d561}","Popf":"\u2119","pound":"\xa3","prap":"\u2ab7","Pr":"\u2abb","pr":"\u227a","prcue":"\u227c","precapprox":"\u2ab7","prec":"\u227a","preccurlyeq":"\u227c","Precedes":"\u227a","PrecedesEqual":"\u2aaf","PrecedesSlantEqual":"\u227c","PrecedesTilde":"\u227e","preceq":"\u2aaf","precnapprox":"\u2ab9","precneqq":"\u2ab5","precnsim":"\u22e8","pre":"\u2aaf","prE":"\u2ab3","precsim":"\u227e","prime":"\u2032","Prime":"\u2033","primes":"\u2119","prnap":"\u2ab9","prnE":"\u2ab5","prnsim":"\u22e8","prod":"\u220f","Product":"\u220f","profalar":"\u232e","profline":"\u2312","profsurf":"\u2313","prop":"\u221d","Proportional":"\u221d","Proportion":"\u2237","propto":"\u221d","prsim":"\u227e","prurel":"\u22b0","Pscr":"\u{1d4ab}","pscr":"\u{1d4c5}","Psi":"\u03a8","psi":"\u03c8","puncsp":"\u2008","Qfr":"\u{1d514}","qfr":"\u{1d52e}","qint":"\u2a0c","qopf":"\u{1d562}","Qopf":"\u211a","qprime":"\u2057","Qscr":"\u{1d4ac}","qscr":"\u{1d4c6}","quaternions":"\u210d","quatint":"\u2a16","quest":"?","questeq":"\u225f","quot":"\\"","QUOT":"\\"","rAarr":"\u21db","race":"\u223d\u0331","Racute":"\u0154","racute":"\u0155","radic":"\u221a","raemptyv":"\u29b3","rang":"\u27e9","Rang":"\u27eb","rangd":"\u2992","range":"\u29a5","rangle":"\u27e9","raquo":"\xbb","rarrap":"\u2975","rarrb":"\u21e5","rarrbfs":"\u2920","rarrc":"\u2933","rarr":"\u2192","Rarr":"\u21a0","rArr":"\u21d2","rarrfs":"\u291e","rarrhk":"\u21aa","rarrlp":"\u21ac","rarrpl":"\u2945","rarrsim":"\u2974","Rarrtl":"\u2916","rarrtl":"\u21a3","rarrw":"\u219d","ratail":"\u291a","rAtail":"\u291c","ratio":"\u2236","rationals":"\u211a","rbarr":"\u290d","rBarr":"\u290f","RBarr":"\u2910","rbbrk":"\u2773","rbrace":"}","rbrack":"]","rbrke":"\u298c","rbrksld":"\u298e","rbrkslu":"\u2990","Rcaron":"\u0158","rcaron":"\u0159","Rcedil":"\u0156","rcedil":"\u0157","rceil":"\u2309","rcub":"}","Rcy":"\u0420","rcy":"\u0440","rdca":"\u2937","rdldhar":"\u2969","rdquo":"\u201d","rdquor":"\u201d","rdsh":"\u21b3","real":"\u211c","realine":"\u211b","realpart":"\u211c","reals":"\u211d","Re":"\u211c","rect":"\u25ad","reg":"\xae","REG":"\xae","ReverseElement":"\u220b","ReverseEquilibrium":"\u21cb","ReverseUpEquilibrium":"\u296f","rfisht":"\u297d","rfloor":"\u230b","rfr":"\u{1d52f}","Rfr":"\u211c","rHar":"\u2964","rhard":"\u21c1","rharu":"\u21c0","rharul":"\u296c","Rho":"\u03a1","rho":"\u03c1","rhov":"\u03f1","RightAngleBracket":"\u27e9","RightArrowBar":"\u21e5","rightarrow":"\u2192","RightArrow":"\u2192","Rightarrow":"\u21d2","RightArrowLeftArrow":"\u21c4","rightarrowtail":"\u21a3","RightCeiling":"\u2309","RightDoubleBracket":"\u27e7","RightDownTeeVector":"\u295d","RightDownVectorBar":"\u2955","RightDownVector":"\u21c2","RightFloor":"\u230b","rightharpoondown":"\u21c1","rightharpoonup":"\u21c0","rightleftarrows":"\u21c4","rightleftharpoons":"\u21cc","rightrightarrows":"\u21c9","rightsquigarrow":"\u219d","RightTeeArrow":"\u21a6","RightTee":"\u22a2","RightTeeVector":"\u295b","rightthreetimes":"\u22cc","RightTriangleBar":"\u29d0","RightTriangle":"\u22b3","RightTriangleEqual":"\u22b5","RightUpDownVector":"\u294f","RightUpTeeVector":"\u295c","RightUpVectorBar":"\u2954","RightUpVector":"\u21be","RightVectorBar":"\u2953","RightVector":"\u21c0","ring":"\u02da","risingdotseq":"\u2253","rlarr":"\u21c4","rlhar":"\u21cc","rlm":"\u200f","rmoustache":"\u23b1","rmoust":"\u23b1","rnmid":"\u2aee","roang":"\u27ed","roarr":"\u21fe","robrk":"\u27e7","ropar":"\u2986","ropf":"\u{1d563}","Ropf":"\u211d","roplus":"\u2a2e","rotimes":"\u2a35","RoundImplies":"\u2970","rpar":")","rpargt":"\u2994","rppolint":"\u2a12","rrarr":"\u21c9","Rrightarrow":"\u21db","rsaquo":"\u203a","rscr":"\u{1d4c7}","Rscr":"\u211b","rsh":"\u21b1","Rsh":"\u21b1","rsqb":"]","rsquo":"\u2019","rsquor":"\u2019","rthree":"\u22cc","rtimes":"\u22ca","rtri":"\u25b9","rtrie":"\u22b5","rtrif":"\u25b8","rtriltri":"\u29ce","RuleDelayed":"\u29f4","ruluhar":"\u2968","rx":"\u211e","Sacute":"\u015a","sacute":"\u015b","sbquo":"\u201a","scap":"\u2ab8","Scaron":"\u0160","scaron":"\u0161","Sc":"\u2abc","sc":"\u227b","sccue":"\u227d","sce":"\u2ab0","scE":"\u2ab4","Scedil":"\u015e","scedil":"\u015f","Scirc":"\u015c","scirc":"\u015d","scnap":"\u2aba","scnE":"\u2ab6","scnsim":"\u22e9","scpolint":"\u2a13","scsim":"\u227f","Scy":"\u0421","scy":"\u0441","sdotb":"\u22a1","sdot":"\u22c5","sdote":"\u2a66","searhk":"\u2925","searr":"\u2198","seArr":"\u21d8","searrow":"\u2198","sect":"\xa7","semi":";","seswar":"\u2929","setminus":"\u2216","setmn":"\u2216","sext":"\u2736","Sfr":"\u{1d516}","sfr":"\u{1d530}","sfrown":"\u2322","sharp":"\u266f","SHCHcy":"\u0429","shchcy":"\u0449","SHcy":"\u0428","shcy":"\u0448","ShortDownArrow":"\u2193","ShortLeftArrow":"\u2190","shortmid":"\u2223","shortparallel":"\u2225","ShortRightArrow":"\u2192","ShortUpArrow":"\u2191","shy":"\xad","Sigma":"\u03a3","sigma":"\u03c3","sigmaf":"\u03c2","sigmav":"\u03c2","sim":"\u223c","simdot":"\u2a6a","sime":"\u2243","simeq":"\u2243","simg":"\u2a9e","simgE":"\u2aa0","siml":"\u2a9d","simlE":"\u2a9f","simne":"\u2246","simplus":"\u2a24","simrarr":"\u2972","slarr":"\u2190","SmallCircle":"\u2218","smallsetminus":"\u2216","smashp":"\u2a33","smeparsl":"\u29e4","smid":"\u2223","smile":"\u2323","smt":"\u2aaa","smte":"\u2aac","smtes":"\u2aac\ufe00","SOFTcy":"\u042c","softcy":"\u044c","solbar":"\u233f","solb":"\u29c4","sol":"/","Sopf":"\u{1d54a}","sopf":"\u{1d564}","spades":"\u2660","spadesuit":"\u2660","spar":"\u2225","sqcap":"\u2293","sqcaps":"\u2293\ufe00","sqcup":"\u2294","sqcups":"\u2294\ufe00","Sqrt":"\u221a","sqsub":"\u228f","sqsube":"\u2291","sqsubset":"\u228f","sqsubseteq":"\u2291","sqsup":"\u2290","sqsupe":"\u2292","sqsupset":"\u2290","sqsupseteq":"\u2292","square":"\u25a1","Square":"\u25a1","SquareIntersection":"\u2293","SquareSubset":"\u228f","SquareSubsetEqual":"\u2291","SquareSuperset":"\u2290","SquareSupersetEqual":"\u2292","SquareUnion":"\u2294","squarf":"\u25aa","squ":"\u25a1","squf":"\u25aa","srarr":"\u2192","Sscr":"\u{1d4ae}","sscr":"\u{1d4c8}","ssetmn":"\u2216","ssmile":"\u2323","sstarf":"\u22c6","Star":"\u22c6","star":"\u2606","starf":"\u2605","straightepsilon":"\u03f5","straightphi":"\u03d5","strns":"\xaf","sub":"\u2282","Sub":"\u22d0","subdot":"\u2abd","subE":"\u2ac5","sube":"\u2286","subedot":"\u2ac3","submult":"\u2ac1","subnE":"\u2acb","subne":"\u228a","subplus":"\u2abf","subrarr":"\u2979","subset":"\u2282","Subset":"\u22d0","subseteq":"\u2286","subseteqq":"\u2ac5","SubsetEqual":"\u2286","subsetneq":"\u228a","subsetneqq":"\u2acb","subsim":"\u2ac7","subsub":"\u2ad5","subsup":"\u2ad3","succapprox":"\u2ab8","succ":"\u227b","succcurlyeq":"\u227d","Succeeds":"\u227b","SucceedsEqual":"\u2ab0","SucceedsSlantEqual":"\u227d","SucceedsTilde":"\u227f","succeq":"\u2ab0","succnapprox":"\u2aba","succneqq":"\u2ab6","succnsim":"\u22e9","succsim":"\u227f","SuchThat":"\u220b","sum":"\u2211","Sum":"\u2211","sung":"\u266a","sup1":"\xb9","sup2":"\xb2","sup3":"\xb3","sup":"\u2283","Sup":"\u22d1","supdot":"\u2abe","supdsub":"\u2ad8","supE":"\u2ac6","supe":"\u2287","supedot":"\u2ac4","Superset":"\u2283","SupersetEqual":"\u2287","suphsol":"\u27c9","suphsub":"\u2ad7","suplarr":"\u297b","supmult":"\u2ac2","supnE":"\u2acc","supne":"\u228b","supplus":"\u2ac0","supset":"\u2283","Supset":"\u22d1","supseteq":"\u2287","supseteqq":"\u2ac6","supsetneq":"\u228b","supsetneqq":"\u2acc","supsim":"\u2ac8","supsub":"\u2ad4","supsup":"\u2ad6","swarhk":"\u2926","swarr":"\u2199","swArr":"\u21d9","swarrow":"\u2199","swnwar":"\u292a","szlig":"\xdf","Tab":"\\t","target":"\u2316","Tau":"\u03a4","tau":"\u03c4","tbrk":"\u23b4","Tcaron":"\u0164","tcaron":"\u0165","Tcedil":"\u0162","tcedil":"\u0163","Tcy":"\u0422","tcy":"\u0442","tdot":"\u20db","telrec":"\u2315","Tfr":"\u{1d517}","tfr":"\u{1d531}","there4":"\u2234","therefore":"\u2234","Therefore":"\u2234","Theta":"\u0398","theta":"\u03b8","thetasym":"\u03d1","thetav":"\u03d1","thickapprox":"\u2248","thicksim":"\u223c","ThickSpace":"\u205f\u200a","ThinSpace":"\u2009","thinsp":"\u2009","thkap":"\u2248","thksim":"\u223c","THORN":"\xde","thorn":"\xfe","tilde":"\u02dc","Tilde":"\u223c","TildeEqual":"\u2243","TildeFullEqual":"\u2245","TildeTilde":"\u2248","timesbar":"\u2a31","timesb":"\u22a0","times":"\xd7","timesd":"\u2a30","tint":"\u222d","toea":"\u2928","topbot":"\u2336","topcir":"\u2af1","top":"\u22a4","Topf":"\u{1d54b}","topf":"\u{1d565}","topfork":"\u2ada","tosa":"\u2929","tprime":"\u2034","trade":"\u2122","TRADE":"\u2122","triangle":"\u25b5","triangledown":"\u25bf","triangleleft":"\u25c3","trianglelefteq":"\u22b4","triangleq":"\u225c","triangleright":"\u25b9","trianglerighteq":"\u22b5","tridot":"\u25ec","trie":"\u225c","triminus":"\u2a3a","TripleDot":"\u20db","triplus":"\u2a39","trisb":"\u29cd","tritime":"\u2a3b","trpezium":"\u23e2","Tscr":"\u{1d4af}","tscr":"\u{1d4c9}","TScy":"\u0426","tscy":"\u0446","TSHcy":"\u040b","tshcy":"\u045b","Tstrok":"\u0166","tstrok":"\u0167","twixt":"\u226c","twoheadleftarrow":"\u219e","twoheadrightarrow":"\u21a0","Uacute":"\xda","uacute":"\xfa","uarr":"\u2191","Uarr":"\u219f","uArr":"\u21d1","Uarrocir":"\u2949","Ubrcy":"\u040e","ubrcy":"\u045e","Ubreve":"\u016c","ubreve":"\u016d","Ucirc":"\xdb","ucirc":"\xfb","Ucy":"\u0423","ucy":"\u0443","udarr":"\u21c5","Udblac":"\u0170","udblac":"\u0171","udhar":"\u296e","ufisht":"\u297e","Ufr":"\u{1d518}","ufr":"\u{1d532}","Ugrave":"\xd9","ugrave":"\xf9","uHar":"\u2963","uharl":"\u21bf","uharr":"\u21be","uhblk":"\u2580","ulcorn":"\u231c","ulcorner":"\u231c","ulcrop":"\u230f","ultri":"\u25f8","Umacr":"\u016a","umacr":"\u016b","uml":"\xa8","UnderBar":"_","UnderBrace":"\u23df","UnderBracket":"\u23b5","UnderParenthesis":"\u23dd","Union":"\u22c3","UnionPlus":"\u228e","Uogon":"\u0172","uogon":"\u0173","Uopf":"\u{1d54c}","uopf":"\u{1d566}","UpArrowBar":"\u2912","uparrow":"\u2191","UpArrow":"\u2191","Uparrow":"\u21d1","UpArrowDownArrow":"\u21c5","updownarrow":"\u2195","UpDownArrow":"\u2195","Updownarrow":"\u21d5","UpEquilibrium":"\u296e","upharpoonleft":"\u21bf","upharpoonright":"\u21be","uplus":"\u228e","UpperLeftArrow":"\u2196","UpperRightArrow":"\u2197","upsi":"\u03c5","Upsi":"\u03d2","upsih":"\u03d2","Upsilon":"\u03a5","upsilon":"\u03c5","UpTeeArrow":"\u21a5","UpTee":"\u22a5","upuparrows":"\u21c8","urcorn":"\u231d","urcorner":"\u231d","urcrop":"\u230e","Uring":"\u016e","uring":"\u016f","urtri":"\u25f9","Uscr":"\u{1d4b0}","uscr":"\u{1d4ca}","utdot":"\u22f0","Utilde":"\u0168","utilde":"\u0169","utri":"\u25b5","utrif":"\u25b4","uuarr":"\u21c8","Uuml":"\xdc","uuml":"\xfc","uwangle":"\u29a7","vangrt":"\u299c","varepsilon":"\u03f5","varkappa":"\u03f0","varnothing":"\u2205","varphi":"\u03d5","varpi":"\u03d6","varpropto":"\u221d","varr":"\u2195","vArr":"\u21d5","varrho":"\u03f1","varsigma":"\u03c2","varsubsetneq":"\u228a\ufe00","varsubsetneqq":"\u2acb\ufe00","varsupsetneq":"\u228b\ufe00","varsupsetneqq":"\u2acc\ufe00","vartheta":"\u03d1","vartriangleleft":"\u22b2","vartriangleright":"\u22b3","vBar":"\u2ae8","Vbar":"\u2aeb","vBarv":"\u2ae9","Vcy":"\u0412","vcy":"\u0432","vdash":"\u22a2","vDash":"\u22a8","Vdash":"\u22a9","VDash":"\u22ab","Vdashl":"\u2ae6","veebar":"\u22bb","vee":"\u2228","Vee":"\u22c1","veeeq":"\u225a","vellip":"\u22ee","verbar":"|","Verbar":"\u2016","vert":"|","Vert":"\u2016","VerticalBar":"\u2223","VerticalLine":"|","VerticalSeparator":"\u2758","VerticalTilde":"\u2240","VeryThinSpace":"\u200a","Vfr":"\u{1d519}","vfr":"\u{1d533}","vltri":"\u22b2","vnsub":"\u2282\u20d2","vnsup":"\u2283\u20d2","Vopf":"\u{1d54d}","vopf":"\u{1d567}","vprop":"\u221d","vrtri":"\u22b3","Vscr":"\u{1d4b1}","vscr":"\u{1d4cb}","vsubnE":"\u2acb\ufe00","vsubne":"\u228a\ufe00","vsupnE":"\u2acc\ufe00","vsupne":"\u228b\ufe00","Vvdash":"\u22aa","vzigzag":"\u299a","Wcirc":"\u0174","wcirc":"\u0175","wedbar":"\u2a5f","wedge":"\u2227","Wedge":"\u22c0","wedgeq":"\u2259","weierp":"\u2118","Wfr":"\u{1d51a}","wfr":"\u{1d534}","Wopf":"\u{1d54e}","wopf":"\u{1d568}","wp":"\u2118","wr":"\u2240","wreath":"\u2240","Wscr":"\u{1d4b2}","wscr":"\u{1d4cc}","xcap":"\u22c2","xcirc":"\u25ef","xcup":"\u22c3","xdtri":"\u25bd","Xfr":"\u{1d51b}","xfr":"\u{1d535}","xharr":"\u27f7","xhArr":"\u27fa","Xi":"\u039e","xi":"\u03be","xlarr":"\u27f5","xlArr":"\u27f8","xmap":"\u27fc","xnis":"\u22fb","xodot":"\u2a00","Xopf":"\u{1d54f}","xopf":"\u{1d569}","xoplus":"\u2a01","xotime":"\u2a02","xrarr":"\u27f6","xrArr":"\u27f9","Xscr":"\u{1d4b3}","xscr":"\u{1d4cd}","xsqcup":"\u2a06","xuplus":"\u2a04","xutri":"\u25b3","xvee":"\u22c1","xwedge":"\u22c0","Yacute":"\xdd","yacute":"\xfd","YAcy":"\u042f","yacy":"\u044f","Ycirc":"\u0176","ycirc":"\u0177","Ycy":"\u042b","ycy":"\u044b","yen":"\xa5","Yfr":"\u{1d51c}","yfr":"\u{1d536}","YIcy":"\u0407","yicy":"\u0457","Yopf":"\u{1d550}","yopf":"\u{1d56a}","Yscr":"\u{1d4b4}","yscr":"\u{1d4ce}","YUcy":"\u042e","yucy":"\u044e","yuml":"\xff","Yuml":"\u0178","Zacute":"\u0179","zacute":"\u017a","Zcaron":"\u017d","zcaron":"\u017e","Zcy":"\u0417","zcy":"\u0437","Zdot":"\u017b","zdot":"\u017c","zeetrf":"\u2128","ZeroWidthSpace":"\u200b","Zeta":"\u0396","zeta":"\u03b6","zfr":"\u{1d537}","Zfr":"\u2128","ZHcy":"\u0416","zhcy":"\u0436","zigrarr":"\u21dd","zopf":"\u{1d56b}","Zopf":"\u2124","Zscr":"\u{1d4b5}","zscr":"\u{1d4cf}","zwj":"\u200d","zwnj":"\u200c"}')},2453:it=>{it.exports=JSON.parse('{"Aacute":"\xc1","aacute":"\xe1","Acirc":"\xc2","acirc":"\xe2","acute":"\xb4","AElig":"\xc6","aelig":"\xe6","Agrave":"\xc0","agrave":"\xe0","amp":"&","AMP":"&","Aring":"\xc5","aring":"\xe5","Atilde":"\xc3","atilde":"\xe3","Auml":"\xc4","auml":"\xe4","brvbar":"\xa6","Ccedil":"\xc7","ccedil":"\xe7","cedil":"\xb8","cent":"\xa2","copy":"\xa9","COPY":"\xa9","curren":"\xa4","deg":"\xb0","divide":"\xf7","Eacute":"\xc9","eacute":"\xe9","Ecirc":"\xca","ecirc":"\xea","Egrave":"\xc8","egrave":"\xe8","ETH":"\xd0","eth":"\xf0","Euml":"\xcb","euml":"\xeb","frac12":"\xbd","frac14":"\xbc","frac34":"\xbe","gt":">","GT":">","Iacute":"\xcd","iacute":"\xed","Icirc":"\xce","icirc":"\xee","iexcl":"\xa1","Igrave":"\xcc","igrave":"\xec","iquest":"\xbf","Iuml":"\xcf","iuml":"\xef","laquo":"\xab","lt":"<","LT":"<","macr":"\xaf","micro":"\xb5","middot":"\xb7","nbsp":"\xa0","not":"\xac","Ntilde":"\xd1","ntilde":"\xf1","Oacute":"\xd3","oacute":"\xf3","Ocirc":"\xd4","ocirc":"\xf4","Ograve":"\xd2","ograve":"\xf2","ordf":"\xaa","ordm":"\xba","Oslash":"\xd8","oslash":"\xf8","Otilde":"\xd5","otilde":"\xf5","Ouml":"\xd6","ouml":"\xf6","para":"\xb6","plusmn":"\xb1","pound":"\xa3","quot":"\\"","QUOT":"\\"","raquo":"\xbb","reg":"\xae","REG":"\xae","sect":"\xa7","shy":"\xad","sup1":"\xb9","sup2":"\xb2","sup3":"\xb3","szlig":"\xdf","THORN":"\xde","thorn":"\xfe","times":"\xd7","Uacute":"\xda","uacute":"\xfa","Ucirc":"\xdb","ucirc":"\xfb","Ugrave":"\xd9","ugrave":"\xf9","uml":"\xa8","Uuml":"\xdc","uuml":"\xfc","Yacute":"\xdd","yacute":"\xfd","yen":"\xa5","yuml":"\xff"}')},8161:it=>{it.exports=JSON.parse('{"amp":"&","apos":"\'","gt":">","lt":"<","quot":"\\""}')}}]);
//# sourceMappingURL=575.1b86b85af51f2d4a.js.map